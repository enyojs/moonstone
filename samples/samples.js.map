{"version":3,"sources":["../../../../enyo-dev/node_modules/browserify/node_modules/browser-pack/_prelude.js","../../../enyo/lib/PathResolverFactory.js","../../../enyo/lib/options.js","../../lib/moon-ilib.js","../../../spotlight/lib/accelerator.js","../../../spotlight/lib/muter.js","../../../spotlight/lib/neighbor.js","../../../spotlight/lib/scrolling.js","../../../enyo/lib/path.js","../../../enyo/index.js","../../../enyo/lib/ModelList.js","../../../enyo/lib/States.js","../../../enyo/lib/job.js","../../../enyo/lib/json.js","../../../enyo/lib/ready.js","../../../enyo/lib/roots.js","../../../enyo/lib/utils.js","../../../enyo/lib/StateSupport.js","../../../spotlight/lib/testmode.js","../../../enyo/lib/EventEmitter.js","../../../enyo/lib/platform.js","../../lib/options.js","../../../enyo/lib/animation.js","../../../enyo/lib/dom.js","../../../enyo/lib/logger.js","../../../enyo/lib/HTMLStringDelegate.js","../../../enyo/lib/resolution.js","../../../enyo/lib/VerticalDelegate.js","../../../enyo/lib/kind.js","../../lib/resolution.js","../../../enyo/lib/ApplicationSupport.js","../../../enyo/lib/Binding.js","../../../enyo/lib/ComponentBindingSupport.js","../../../enyo/lib/ComputedSupport.js","../../../enyo/lib/HorizontalDelegate.js","../../../enyo/lib/Layout.js","../../../enyo/lib/LinkedListNode.js","../../../enyo/lib/MixinSupport.js","../../../enyo/lib/MultipleDispatchSupport.js","../../../enyo/lib/Source.js","../../../enyo/lib/VerticalGridDelegate.js","../../../enyo/lib/dev.js","../../../enyo/lib/floatingLayer.js","../../../enyo/lib/BindingSupport.js","../../../enyo/lib/EmptyBinding.js","../../../enyo/lib/RepeaterChildSupport.js","../../../layout/lib/Arranger/Arranger.js","../../../layout/lib/ContextualLayout/ContextualLayout.js","../../../enyo/lib/LinkedList.js","../../../enyo/lib/ObserverChainNode.js","../../../layout/lib/CardArranger.js","../../../layout/lib/CarouselArranger.js","../../../layout/lib/DockRightArranger.js","../../../enyo/lib/ObserverChain.js","../../../enyo/lib/ObserverSupport.js","../../../enyo/lib/CoreObject.js","../../../enyo/lib/Store.js","../../../enyo/lib/jobs.js","../../../enyo/lib/Model.js","../../../enyo/lib/Component.js","../../../enyo/lib/Animator.js","../../../enyo/lib/Collection.js","../../../enyo/lib/MultipleDispatchComponent.js","../../../enyo/lib/ScrollMath.js","../../../enyo/lib/Selection.js","../../../enyo/lib/Signals.js","../../../spotlight/lib/container.js","../../../enyo/lib/Filter.js","../../../enyo/lib/Controller.js","../../../enyo/lib/hooks.js","../../../enyo/lib/master.js","../../../enyo/lib/ProgressiveFilter.js","../../../enyo/lib/UiComponent.js","../../../enyo/lib/dispatcher.js","../../../enyo/lib/Router.js","../../../enyo/lib/fullscreen/fullscreen.js","../../../enyo/lib/gesture.js","../../../layout/lib/Panels/Panels.js","../../../enyo/lib/Control/Control.js","../../../enyo/lib/drag.js","../../../enyo/lib/DataRepeater.js","../../../enyo/lib/Drawer.js","../../../enyo/lib/Group.js","../../../enyo/lib/GroupItem.js","../../../enyo/lib/Image/Image.js","../../../enyo/lib/Input.js","../../../enyo/lib/MediaSource.js","../../../enyo/lib/Repeater.js","../../../enyo/lib/Scrim/Scrim.js","../../../enyo/lib/ScrollStrategy.js","../../../enyo/lib/ScrollThumb/ScrollThumb.js","../../../enyo/lib/TableCell.js","../../../layout/lib/FittableLayout/FittableLayout.js","../../../layout/lib/FlyweightRepeater.js","../../../spotlight/lib/util.js","../../index.js","../../../enyo/lib/DataList/DataList.js","../../../enyo/lib/ToolDecorator/ToolDecorator.js","../../../layout/lib/GridListImageItem/GridListImageItem.js","../../../enyo/lib/Checkbox.js","../../../enyo/lib/RichText/RichText.js","../../../enyo/lib/TextArea.js","../../../enyo/lib/Video.js","../../../enyo/lib/Popup/Popup.js","../../../enyo/lib/TouchScrollStrategy.js","../../../enyo/lib/TableRow.js","../../../layout/lib/FittableColumns.js","../../../layout/lib/FittableRows.js","../../../spotlight/lib/spotlight.js","../../lib/BodyText/BodyText.js","../../lib/BreadcrumbArranger/BreadcrumbArranger.js","../../lib/CaptionDecorator/CaptionDecorator.js","../../lib/Clock/Clock.js","../../lib/ExpandableText/ExpandableText.js","../../lib/HighlightText/HighlightText.js","../../lib/History/History.js","../../lib/Icon/Icon.js","../../lib/ObjectActionDecorator/ObjectActionDecorator.js","../../lib/ProgressBar/ProgressBar.js","../../lib/Scrim/Scrim.js","../../lib/ScrollThumb/ScrollThumb.js","../../lib/StyleAnimator/StyleAnimator.js","../../lib/VideoInfoBackground/VideoInfoBackground.js","../../../enyo/lib/DataGridList/DataGridList.js","../../../enyo/lib/Button/Button.js","../../lib/RichText/RichText.js","../../lib/TextArea/TextArea.js","../../lib/Tooltip/Tooltip.js","../../../enyo/lib/TranslateScrollStrategy.js","../../../enyo/lib/Table.js","../../lib/Input/Input.js","../../lib/Marquee/Marquee.js","../../lib/Drawer/Drawer.js","../../lib/Checkbox/Checkbox.js","../../lib/IconButton/IconButton.js","../../lib/ImageBadge/ImageBadge.js","../../lib/SelectionOverlaySupport/SelectionOverlaySupport.js","../../lib/VideoFeedback/VideoFeedback.js","../../lib/Slider/Slider.js","../../../enyo/lib/Scroller/Scroller.js","../../lib/Table/Table.js","../../lib/InputDecorator/InputDecorator.js","../../lib/Button/Button.js","../../lib/ChannelInfo/ChannelInfo.js","../../lib/Divider/Divider.js","../../lib/GridListImageItem/GridListImageItem.js","../../lib/Item/Item.js","../../lib/ItemOverlay/ItemOverlay.js","../../lib/Spinner/Spinner.js","../../lib/VideoInfoHeader/VideoInfoHeader.js","../../lib/CheckboxItem/CheckboxItem.js","../../lib/ToggleSwitch/ToggleSwitch.js","../../lib/ContextualPopup/ContextualPopup.js","../../lib/PagingControl/PagingControl.js","../../lib/SimplePicker/SimplePicker.js","../../lib/VideoFullscreenToggleButton/VideoFullscreenToggleButton.js","../../lib/Image/Image.js","../../lib/VideoTransportSlider/VideoTransportSlider.js","../../lib/Header/Header.js","../../lib/ContextualPopupButton/ContextualPopupButton.js","../../lib/Popup/Popup.js","../../lib/ProgressButton/ProgressButton.js","../../lib/ToggleButton/ToggleButton.js","../../lib/TooltipDecorator/TooltipDecorator.js","TableSample.js","../../lib/Drawers/Drawers.js","../../lib/ExpandableListItem/ExpandableListItem.js","../../lib/LabeledTextItem/LabeledTextItem.js","../../lib/SelectableItem/SelectableItem.js","DividerSample.js","../../lib/FormCheckbox/FormCheckbox.js","ProgressSample.js","../../lib/ToggleItem/ToggleItem.js","../../lib/ScrollStrategy/ScrollStrategy.js","../../lib/Calendar/Calendar.js","ImageSample.js","../../lib/VideoPlayer/VideoPlayer.js","../../lib/InputHeader/InputHeader.js","../../lib/Panel/Panel.js","../../lib/ContextualPopupDecorator/ContextualPopupDecorator.js","../../lib/Dialog/Dialog.js","ProgressButtonSample.js","TooltipSample.js","../../lib/Accordion/Accordion.js","../../lib/DateTimePickerBase/DateTimePickerBase.js","../../lib/ExpandableInput/ExpandableInput.js","../../lib/ExpandablePicker/ExpandablePicker.js","../../lib/ImageItem/ImageItem.js","../../lib/RadioItem/RadioItem.js","../../lib/IntegerPicker/IntegerPicker.js","../../lib/Scroller/Scroller.js","VideoPlayerInlineSample.js","../../lib/Panels/Panels.js","DialogSample.js","VideoPlayerSample.js","../../lib/ExpandableDataPicker/ExpandableDataPicker.js","../../lib/RadioItemGroup/RadioItemGroup.js","../../lib/DatePicker/DatePicker.js","../../lib/SimpleIntegerPicker/SimpleIntegerPicker.js","../../lib/TimePicker/TimePicker.js","../../lib/DataList/DataList.js","../../lib/ListActions/ListActions.js","AccordionSample.js","BodyTextSample.js","ButtonSample.js","CheckboxItemSample.js","ClockSample.js","ExpandableInputSample.js","ExpandableListItemSample.js","ExpandableTextSample.js","FontSample.js","FormCheckboxSample.js","HeaderSample.js","IconButtonSample.js","IconSample.js","ImageBadgeSample.js","ImageItemSample.js","InputSample.js","IntegerPickerSample.js","ItemOverlaySample.js","ItemSample.js","LabeledTextItemSample.js","MarqueeSample.js","ObjectActionHorizontalTypeSample.js","ObjectActionVerticalTypeSample.js","Scroller2dSample.js","ScrollerHorizontalSample.js","ScrollerTextSample.js","SelectableItemSample.js","SimplePickerSample.js","SliderSample.js","SpinnerSample.js","ToggleButtonSample.js","ToggleItemSample.js","ActivityPanelsSample.js","ActivityPanelsWithVideoSample.js","AlwaysViewingPanelsSample.js","AlwaysViewingPanelsWithVideoSample.js","DrawerSample.js","HeaderAutoCollapsingSample.js","InputHeaderSample.js","PanelsVideoPlayerSample.js","PanelsWithCardArrangerSample.js","PanelsWithCarouselArrangerSample.js","PopupSample.js","ExpandableDataPickerSample.js","ContextualPopupSample.js","RadioItemSample.js","CalendarSample.js","DatePickerSample.js","../../lib/ExpandableIntegerPicker/ExpandableIntegerPicker.js","SimpleIntegerPickerSample.js","TimePickerSample.js","../../lib/DataGridList/DataGridList.js","All.js","DataListSample.js","HighlightTextSample.js","DynamicPanelsSample.js","HistorySample.js","ListActionsSample.js","ExpandablePickerSample.js","ScrollerVerticalSample.js","DataGridListSample.js","index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3CA;AACA;AACA;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;;;;ACFA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACjyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACz7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC15BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9yCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7mBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACleA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC/dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC5mBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC14BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/nBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC5+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/pDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACriBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC78BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACx0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7mCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3xBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"samples.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\n\nvar PathResolverFactory = module.exports = function() {\n\tthis.paths = {};\n\tthis.pathNames = [];\n};\n\nPathResolverFactory.prototype = {\n\taddPath: function(inName, inPath) {\n\t\tthis.paths[inName] = inPath;\n\t\tthis.pathNames.push(inName);\n\t\tthis.pathNames.sort(function(a, b) {\n\t\t\treturn b.length - a.length;\n\t\t});\n\t\treturn inPath;\n\t},\n\taddPaths: function(inPaths) {\n\t\tif (inPaths) {\n\t\t\tfor (var n in inPaths) {\n\t\t\t\tthis.addPath(n, inPaths[n]);\n\t\t\t}\n\t\t}\n\t},\n\tincludeTrailingSlash: function(inPath) {\n\t\treturn (inPath && inPath.slice(-1) !== \"/\") ? inPath + \"/\" : inPath;\n\t},\n\t// replace macros of the form $pathname with the mapped value of paths.pathname\n\trewrite: function (inPath) {\n\t\tvar working, its = this.includeTrailingSlash, paths = this.paths;\n\t\tvar fn = function(macro, name) {\n\t\t\tworking = true;\n\t\t\treturn its(paths[name]) || '';\n\t\t};\n\t\tvar result = inPath;\n\t\tdo {\n\t\t\tworking = false;\n\t\t\tfor (var i=0; i<this.pathNames.length; i++) {\n\t\t\t\tvar regex = new RegExp(\"\\\\$(\" + this.pathNames[i] + \")(\\\\/)?\", \"g\");\n\t\t\t\tresult = result.replace(regex, fn);\n\t\t\t}\n\t\t} while (working);\n\t\treturn result;\n\t}\n};","'use strict';\n\nmodule.exports = (global.enyo && global.enyo.options) || {};","/**\n* Localized strings from [iLib]{@link ilib} translations.\n*\n* @param {String} string - String to be localized.\n* @returns {String} Localized string.\n* @name moon.$L\n* @public\n*/\n// if (window.ilib) {\n// \tmodule.exports = (function() {\n// \t\tvar lfunc = function (string) {\n// \t\t\tif (!moon.$L.rb) {\n// \t\t\t\treturn string;\n// \t\t\t}\n// \t\t\tvar str = moon.$L.rb.getString(string);\n// \t\t\treturn str.toString();\n// \t\t};\n// \t\tlfunc.rb = new ilib.ResBundle({\n// \t\t\tloadParams: {\n// \t\t\t\troot: '$lib/moonstone/resources'\n// \t\t\t}\n// \t\t});\n// \t\treturn lfunc;\n// \t})();\n// } else {\n\tmodule.exports = window.$L || function(s) { return s; };\n// }","/**\n* {@link enyo.Spotlight.Accelerator} provides logic for accelerating and\n* throttling cursor movement.\n*\n* @typedef {Object} enyo.Spotlight.Accelerator\n*\n* @class enyo.Spotlight.Accelerator\n* @public\n*/\nvar Accelerator = module.exports = function (Spotlight) {\n\n    //* @protected\n    /*************************************************************/\n\n    var _isAccelerating = false,\n        _nSkipped = 0,\n        _nTime = 0,\n        _nKey = 0,\n        _bCanceled = false;\n\n    /**\n    * Controls the frequency with which the cursor will \"freeze\". While frozen,\n    * the current spotted item cannot change, and all events are directed to it.\n    *\n    * @type {Array}\n    * @default [3, 3, 3, 2, 2, 2, 1]\n    * @public\n    */\n    this.frequency = [3, 3, 3, 2, 2, 2, 1];\n\n    /**\n    * Called from {@link enyo.Spotlight}, with the current keydown event and\n    * Spotlight's callback, which will be called when the event is allowed\n    * through.\n    *\n    * @param  {Object} oEvent - The current event to validate.\n    * @param  {Function} fCallback - The callback to execute.\n    * @param  {Object} oContext - The callback's execution context.\n    * @returns {Boolean}\n    * @public\n    */\n    this.processKey = function(oEvent, fCallback, oContext) {\n        switch (oEvent.type) {\n            case 'keydown':\n            case 'pagehold':\n            case 'pageholdpulse':\n                if (oEvent.keyCode != _nKey) {\n                    this.reset();\n                    _nTime = (new Date()).getTime();\n                    _nKey = oEvent.keyCode;\n                    return fCallback.apply(oContext, [oEvent]);\n                } else if (_bCanceled) {\n\n                    // Prevent skipped keydown events from bubbling\n                    oEvent.preventDefault();\n                    return true;\n                } else {\n                    var nElapsedTime = (new Date()).getTime() - _nTime,\n                        nSeconds = Math.floor(nElapsedTime / 1000),\n                        nToSkip = 0;\n\n                    nSeconds = nSeconds > this.frequency.length - 1 ? this.frequency.length - 1 : nSeconds;\n\n                    nToSkip = this.frequency[nSeconds] - 1;\n                    if (nToSkip < 0) {\n                        nToSkip = 0;\n                    }\n\n                    _isAccelerating = !(nSeconds === 0 && _nSkipped === 0);\n\n                    if (_nSkipped >= nToSkip) {\n                        _nSkipped = 0;\n                        return fCallback.apply(oContext, [oEvent]);\n                    } else {\n                        _nSkipped++;\n                        oEvent.preventDefault(); // Prevent skipped keydown events from bubbling\n                        return true;\n                    }\n                }\n                break;\n            case 'keyup':\n            case 'pagerelease':\n                this.reset();\n                return fCallback.apply(oContext, [oEvent]);\n        }\n    };\n\n\n    /**\n    * Resets values for Spotlight.\n    *\n    * @public\n    */\n    this.reset = function() {\n        _nSkipped = 0;\n        _nTime = 0;\n        _nKey = 0;\n        _bCanceled = false;\n        _isAccelerating = false;\n    };\n\n    /**\n    * Cancels the accelerator.\n    *\n    * @public\n    */\n    this.cancel = function() {\n        _bCanceled = true;\n    };\n\n    /**\n    * Verifies that the accelerator is active.\n    *\n    * @returns {Boolean} `true` if the accelerator is active; otherwise, `false`.\n    * @public\n    */\n    this.isAccelerating = function() {\n        return _isAccelerating;\n    };\n};\n","/**\n* {@link enyo.Spotlight.Muter} provides methods for working with muted controls.\n* By default, when a control is muted, it does not have the `'spotlight'` CSS class\n* applied to its DOM node, and does not appear as highlighted when it has Spotlight\n* focus.\n*\n* @typedef {Object} enyo.Spotlight.Muter definition\n*\n* @class enyo.Spotlight.Muter\n* @public\n*/\nvar Muter = module.exports = function (Spotlight) {\n    var _oMutes = {},\n        _nMutes = 0;\n\n    /**\n    * Mutes a control.\n    *\n    * @param  {Object} oSender - The control to be muted.\n    * @public\n    */\n    this.addMuteReason = function(oSender) {\n        if (typeof _oMutes[oSender.id] != 'undefined') {\n            return;\n        }\n\n        if (_nMutes === 0) {\n            var oCurrent = Spotlight.getCurrent();\n            if (oCurrent) {\n                Spotlight.unhighlight(oCurrent);\n            }\n        }\n\n        _oMutes[oSender.id] = 1;\n        _nMutes++;\n    };\n\n    /**\n    * Un-mutes a muted control.\n    *\n    * @param  {Object} oSender - The control to be un-muted.\n    * @public\n    */\n    this.removeMuteReason = function(oSender) {\n        if (typeof _oMutes[oSender.id] == 'undefined') {\n            return;\n        }\n\n        delete _oMutes[oSender.id];\n        _nMutes--;\n\n        if (_nMutes === 0) {\n            var oCurrent = Spotlight.getCurrent();\n            if (oCurrent) {\n                Spotlight.highlight(oCurrent, true);\n            }\n        }\n    };\n\n    /**\n    * Determines whether Spotlight muter is currently in use.\n    *\n    * @type {Function}\n    * @returns {Boolean} `true` if there is at least one currently muted control;\n    * otherwise, `false`.\n    * @public\n    */\n    this.isMuted = function() {\n        return _nMutes > 0;\n    };\n};\n","/**\n* {@link enyo.Spotlight.NearestNeighbor} contains logic to identify the nearest\n* neighboring object for the object that currently has focus.\n*\n* @typedef {Object} enyo.Spotlight.NearestNeighbor definition\n*\n* @class enyo.Spotlight.NearestNeighbor\n* @public\n*/\nvar NearestNeighbor = module.exports = function (Spotlight) {\n\n    /**\n    * Determines whether a control overlaps multiple planes.\n    *\n    * @param  {String} sDirection - The direction of acceleration.\n    * @param  {Object} oBounds1 - Initial bounds.\n    * @param  {Object} oBounds2 - Final bounds.\n    * @param  {Boolean} bCenterCheck - Whether to check for the center of the bounds.\n    * @returns {Boolean}\n    * @private\n    */\n    var _isInHalfPlane = function(sDirection, oBounds1, oBounds2, bCenterCheck) {\n            if (bCenterCheck) {\n                switch (sDirection) {\n                    case 'UP':\n                        return oBounds1.top + oBounds1.height / 2 > oBounds2.top + oBounds2.height / 2;\n                    case 'DOWN':\n                        return oBounds1.top + oBounds1.height / 2 < oBounds2.top + oBounds2.height / 2;\n                    case 'LEFT':\n                        return oBounds1.left + oBounds1.width / 2 > oBounds2.left + oBounds2.width / 2;\n                    case 'RIGHT':\n                        return oBounds1.left + oBounds1.width / 2 < oBounds2.left + oBounds2.width / 2;\n                }\n            } else {\n                switch (sDirection) {\n                    case 'UP':\n                        return oBounds1.top >= oBounds2.top + oBounds2.height - 1;\n                    case 'DOWN':\n                        return oBounds1.top + oBounds1.height - 1 <= oBounds2.top;\n                    case 'LEFT':\n                        return oBounds1.left >= oBounds2.left + oBounds2.width - 1;\n                    case 'RIGHT':\n                        return oBounds1.left + oBounds1.width - 1 <= oBounds2.left;\n                }\n            }\n        },\n\n        /**\n        * Checks to see which control has higher precedence for spottability.\n        *\n        * @param  {String} sDirection - The direction of acceleration.\n        * @param  {Object} oBounds1 - Initial bounds.\n        * @param  {Object} oBounds2 - Final bounds.\n        * @returns {Number}\n        * @private\n        */\n        _getAdjacentControlPrecedence = function(sDirection, oBounds1, oBounds2) {\n            var oPoints = _getAdjacentControlPoints(sDirection, oBounds1, oBounds2);\n            return _getPrecedenceValue(oPoints, sDirection);\n        },\n\n        /**\n        * Retrieves the adjacent axis control points based on direction of acceleration.\n        *\n        * @param  {String} sDirection - The direction of acceleration.\n        * @param  {Object} oBounds1 - Initial bounds.\n        * @param  {Object} oBounds2 - Final bounds.\n        * @returns {Number}\n        * @private\n        */\n        _getAdjacentControlPoints = function(sDirection, oBounds1, oBounds2) {\n            switch (sDirection) {\n                case 'UP':\n                case 'DOWN':\n                    return _getYAxisPoints(sDirection, oBounds1, oBounds2);\n                case 'LEFT':\n                case 'RIGHT':\n                    return _getXAxisPoints(sDirection, oBounds1, oBounds2);\n            }\n        },\n\n        /**\n        * Retrieves the `y`-axis points for the specified bounds, dependent on\n        * direction of acceleration.\n        *\n        * @param  {String} sDirection - The direction of acceleration.\n        * @param  {Object} oBounds1 - Initial bounds.\n        * @param  {Object} oBounds2 - Final bounds.\n        * @returns {Number}\n        * @private\n        */\n        _getYAxisPoints = function(sDirection, oBounds1, oBounds2) {\n            var x1, x2, y1, y2;\n\n            y1 = (sDirection === 'UP') ? oBounds1.top : oBounds1.top + oBounds1.height;\n\n            y2 = (sDirection === 'UP') ? oBounds2.top + oBounds2.height : oBounds2.top;\n\n            if (oBounds1.left < oBounds2.left) {\n                if (oBounds1.left + oBounds1.width <= oBounds2.left) {\n                    x1 = oBounds1.left + oBounds1.width + 1;\n                    x2 = oBounds2.left;\n                } else {\n                    x1 = oBounds2.left;\n                    x2 = oBounds2.left;\n                }\n            } else {\n                if (oBounds1.left >= oBounds2.left + oBounds2.width) {\n                    x1 = oBounds1.left;\n                    x2 = oBounds2.left + oBounds2.width + 1;\n                } else {\n                    x1 = oBounds1.left;\n                    x2 = oBounds1.left;\n                }\n            }\n\n            return [{\n                x: x1,\n                y: y1\n            }, {\n                x: x2,\n                y: y2\n            }];\n        },\n\n        /**\n        * Retrieves the `x`-axis points for the specified bounds, dependent on\n        * direction of acceleration.\n        *\n        * @param  {String} sDirection - The direction of acceleration.\n        * @param  {Object} oBounds1 - Initial bounds.\n        * @param  {Object} oBounds2 - Final bounds.\n        * @returns {Number}\n        * @private\n        */\n        _getXAxisPoints = function(sDirection, oBounds1, oBounds2) {\n            var x1, x2, y1, y2;\n\n            x1 = (sDirection === 'LEFT') ? oBounds1.left : oBounds1.left + oBounds1.width;\n\n            x2 = (sDirection === 'LEFT') ? oBounds2.left + oBounds2.width : oBounds2.left;\n\n            if (oBounds1.top < oBounds2.top) {\n                if (oBounds1.top + oBounds1.height <= oBounds2.top) {\n                    y1 = oBounds1.top + oBounds1.height + 1;\n                    y2 = oBounds2.top;\n                } else {\n                    y1 = oBounds2.top;\n                    y2 = oBounds2.top;\n                }\n            } else {\n                if (oBounds1.top >= oBounds2.top + oBounds2.height) {\n                    y1 = oBounds1.top;\n                    y2 = oBounds2.top + oBounds2.height + 1;\n                } else {\n                    y1 = oBounds1.top;\n                    y2 = oBounds1.top;\n                }\n            }\n\n            return [{\n                x: x1,\n                y: y1\n            }, {\n                x: x2,\n                y: y2\n            }];\n        },\n\n        /**\n        * Calculates precedence value for the given set of axis points and\n        * direction of acceleration.\n        *\n        * @param  {Object} oPoints - Axis points to be evaluated.\n        * @param  {Object} sDirection - The direction of acceleration.\n        * @returns {Number} The precedence value.\n        * @private\n        */\n        _getPrecedenceValue = function(oPoints, sDirection) {\n            var delta = _getDelta(oPoints[0], oPoints[1]),\n                slope = _getSlope(delta, sDirection),\n                angle = _getAngle(slope),\n                distance = _getDistance(delta);\n\n            return angle > 90 ? 0 : 1 / (angle * Math.pow(distance, 4));\n        },\n\n        /**\n        * Retrieves the difference between points.\n        *\n        * @param  {Object} point1 - Initial point.\n        * @param  {Object} point2 - Destination point.\n        * @returns {Object}\n        * @private\n        */\n        _getDelta = function(point1, point2) {\n            return {\n                dx: Math.abs(point2.x - point1.x),\n                dy: Math.abs(point2.y - point1.y)\n            };\n        },\n\n        /**\n        * Retrieves the distance from the specified bounds to the center point.\n        *\n        * @param  {Object} oBounds1 - Initial bounds.\n        * @param  {Object} oBounds2 - Destination bounds.\n        * @returns {Object}\n        * @private\n        */\n        _getCenterToCenterDistance = function(oBounds1, oBounds2) {\n            var oCenter1 = {\n                    x: oBounds1.left + oBounds1.width / 2,\n                    y: oBounds1.top + oBounds1.height / 2\n                },\n                oCenter2 = {\n                    x: oBounds2.left + oBounds2.width / 2,\n                    y: oBounds2.top + oBounds2.height / 2\n                },\n                oDelta = _getDelta(oCenter1, oCenter2),\n                nDistance = _getDistance(oDelta);\n\n            return nDistance;\n        },\n\n        /**\n        * Retrieves the slope of the angle.\n        *\n        * @param  {Object} delta - Initial bounds.\n        * @param  {String} sDirection - Destination bounds.\n        * @returns {Number} The slope value.\n        * @private\n        */\n        _getSlope = function(delta, sDirection) {\n            switch (sDirection) {\n                case 'UP':\n                case 'DOWN':\n                    return delta.dx / delta.dy;\n                case 'LEFT':\n                case 'RIGHT':\n                    return delta.dy / delta.dx;\n            }\n        },\n\n        /**\n        * Retrieves the distance between delta points.\n        *\n        * @param  {Object} delta - Initial bounds.\n        * @returns {Number}\n        * @private\n        */\n        _getDistance = function(delta) {\n            return Math.pow(delta.dx * delta.dx + delta.dy * delta.dy, 0.5) || 0.1;\n        },\n\n        /**\n        * Retrieves the distance between angle based on slope.\n        *\n        * @param  {Number} nSlope - Slope used to determine angle.\n        * @returns {Number}\n        * @private\n        */\n        _getAngle = function(nSlope) {\n            return Math.atan(nSlope) * 180 / Math.PI || 0.1;\n        },\n\n        /**\n        * Calculates nearest neighbor based on bounds and acceleration direction.\n        *\n        * @param  {Object} o - Object used to determine if it is a neighbor.\n        * @param  {Number} sDirection - The direction of acceleration\n        * @param  {Number} oBounds1 - Originating bounds.\n        * @param  {Number} oControl - The current control.\n        * @returns {Number}\n        * @private\n        */\n        _calculateNearestNeighbor = function(o, sDirection, oBounds1, oControl) {\n            var n,\n                oBounds2,\n                nPrecedence,\n                nDistance,\n                oSibling = null,\n                oBestMatch = null,\n                nBestMatch = 0,\n                nBestDistance = 0,\n                nLen = o.length;\n\n            for (n = 0; n < nLen; n++) {\n                oSibling = o[n];\n                if (oControl && oSibling === oControl) {\n                    continue;\n                }\n\n                oBounds2 = oSibling.getAbsoluteBounds();\n\n                // If control is in half plane specified by direction\n                if (_isInHalfPlane(sDirection, oBounds1, oBounds2)) {\n                    // Find control with highest precedence to the direction\n                    nPrecedence = _getAdjacentControlPrecedence(sDirection, oBounds1, oBounds2);\n                    if (nPrecedence > nBestMatch) {\n                        nBestMatch = nPrecedence;\n                        oBestMatch = oSibling;\n                        nBestDistance = _getCenterToCenterDistance(oBounds1, oBounds2);\n                    } else if (nPrecedence == nBestMatch) {\n                        nDistance = _getCenterToCenterDistance(oBounds1, oBounds2);\n                        if (nBestDistance > nDistance) {\n                            nBestMatch = nPrecedence;\n                            oBestMatch = oSibling;\n                            nBestDistance = nDistance;\n                        }\n                    }\n                }\n            }\n            return oBestMatch;\n        };\n\n    /**\n    * Gets the nearest neighbor of the pointer.\n    *\n    * @param  {Object} oRoot - The root component.\n    * @param  {String} sDirection - The direction in which to spot the next control.\n    * @param  {Number} nPositionX - The `x` coordinate of the pointer.\n    * @param  {Number} nPositionY - The `y` coordinate of the pointer.\n    * @returns {Object} The nearest neighbor of the pointer.\n    * @public\n    */\n    this.getNearestPointerNeighbor = function(oRoot, sDirection, nPositionX, nPositionY) {\n        var oBounds = {\n                left: nPositionX,\n                top: nPositionY,\n                width: 1,\n                height: 1\n            },\n            o = Spotlight.getChildren(oRoot, true);\n\n        return _calculateNearestNeighbor(o, sDirection, oBounds);\n    };\n\n    /**\n    * Gets the nearest neighbor of a control.\n    *\n    * @param  {String} sDirection - The direction in which to spot the next control.\n    * @param  {Object} oControl - The control whose nearest neighbor is to be\n    * determined.\n    * @returns {Object} The nearest neighbor of the control.\n    * @public\n    */\n    this.getNearestNeighbor = function(sDirection, oControl) {\n        sDirection = sDirection.toUpperCase();\n        oControl = oControl || Spotlight.getCurrent();\n\n        // Check to see if default direction is specified\n        var oNeighbor = Spotlight.Util.getDefaultDirectionControl(sDirection, oControl);\n\t\tif (oNeighbor) {\n\t\t\tif (Spotlight.isSpottable(oNeighbor)) {\n\t\t\t\treturn oNeighbor;\n\t\t\t} else {\n\t\t\t\toNeighbor = Spotlight.getFirstChild(oNeighbor);\n\t\t\t\tif (oNeighbor && Spotlight.isSpottable(oNeighbor)) { \n\t\t\t\t\treturn oNeighbor;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n        // If default control in the direction of navigation is not specified, calculate it\n\n        var o = Spotlight.getSiblings(oControl),\n            oBounds;\n\n        // If the control is container, the nearest neighbor is calculated based on the bounds\n        // of last focused child of container.\n        if (Spotlight.isContainer(oControl)) {\n            oControl = Spotlight.Container.getLastFocusedChild(oControl) || oControl;\n        }\n\n        oBounds = oControl.getAbsoluteBounds();\n\n        return _calculateNearestNeighbor(o.siblings, sDirection, oBounds, oControl);\n    };\n};\n","/**\n * {@link enyo.Spotlight.Scrolling} contains logic relating to mousewheel events.\n *\n * @typedef {Object} enyo.Spotlight.Scrolling definition\n *\n * @class enyo.Spotlight.Scrolling\n * @public\n */\n\nvar Scrolling = module.exports = function (Spotlight) {\n    //* @protected\n    /*************************************************************/\n\n    var _nDelta = 0;\n\n    /**\n    * Scroll event is fired every `this.frequency` mousewheel points.\n    *\n    * @type {Number}\n    * @public\n    */\n    this.frequency = 40;\n\n    /**\n    * Determines string component id to push.\n    *\n    * @param  {Object} oEvent - The current event.\n    * @param  {Function} fCallback - The callback function.\n    * @param  {Object} oContext - The execution context for the callback.\n    * @public\n    */\n    this.processMouseWheel = function(oEvent, fCallback, oContext) {\n        _nDelta += oEvent.wheelDeltaY;\n\n        if (_nDelta >= this.frequency) {\n            _nDelta = 0;\n            return fCallback.apply(oContext, [oEvent, true]);\n        } else if (_nDelta <= -this.frequency) {\n            _nDelta = 0;\n            return fCallback.apply(oContext, [oEvent, false]);\n        }\n    };\n};\n","var PathResolverFactory = require('./PathResolverFactory');\n\nmodule.exports = new PathResolverFactory();","'use strict';\n\nexports = module.exports = require('./lib/options');\nexports.version = '2.6.0-pre';","require('../../enyo');\n\n/**\n* A special type of [array]{@glossary Array} used internally by data layer\n* [kinds]{@glossary kind}.\n*\n* @class enyo.ModelList\n* @protected\n*/\nfunction ModelList (args) {\n\tArray.call(this);\n\tthis.table = {};\n\tif (args) this.add(args, 0);\n}\n\nModelList.prototype = Object.create(Array.prototype);\n\nmodule.exports = ModelList;\n\n/**\n* Adds [models]{@link enyo.Model} to the [list]{@link enyo.ModelList}, updating an\n* internal table by the model's [primaryKey]{@link enyo.Model#primaryKey} (if\n* possible) and its [euid]{@glossary euid}.\n*\n* @name enyo.ModelList#add\n* @method\n* @param {(enyo.Model|enyo.Model[])} models The [model or models]{@link enyo.Model}\n*\tto add to the [list]{@link enyo.ModelList}.\n* @param {Number} [idx] - If provided and valid, the models will be\n* [spliced]{@glossary Array.splice} into the list at this position.\n* @returns {enyo.Model[]} An immutable [array]{@glossary Array} of models\n* that were actually added to the list.\n* @protected\n*/\nModelList.prototype.add = function (models, idx) {\n\tvar table = this.table,\n\t\tadded = [],\n\t\tmodel,\n\t\teuid,\n\t\tid,\n\t\ti = 0;\n\t\n\tif (models && !(models instanceof Array)) models = [models];\n\t\n\tfor (; (model = models[i]); ++i) {\n\t\teuid = model.euid;\n\t\t\n\t\t// we only want to actually add models we haven't already seen...\n\t\tif (!table[euid]) {\n\t\t\tid = model.get(model.primaryKey);\n\t\t\n\t\t\tif (id != null) {\n\t\t\t\n\t\t\t\t// @TODO: For now if we already have an entry for a model by its supposed unique\n\t\t\t\t// identifier but it isn't the instance we just found we can't just\n\t\t\t\t// overwrite the previous instance so we mark the new one as headless\n\t\t\t\tif (table[id] && table[id] !== model) model.headless = true;\n\t\t\t\t// otherwise we do the normal thing and add the entry for it\n\t\t\t\telse table[id] = model; \n\t\t\t}\n\t\t\n\t\t\t// nomatter what though the euid should be unique\n\t\t\ttable[euid] = model;\n\t\t\tadded.push(model);\n\t\t}\n\t}\n\t\n\tif (added.length) {\n\t\tidx = !isNaN(idx) ? Math.min(Math.max(0, idx), this.length) : 0;\n\t\tadded.unshift(0);\n\t\tadded.unshift(idx);\n\t\tthis.splice.apply(this, added);\n\t}\n\t\n\treturn added.length > 0 ? added.slice(2) : added; \n};\n\n/**\n* Removes the specified [models]{@link enyo.Model} from the [list]{@link enyo.ModelList}.\n*\n* @name enyo.ModelList#remove\n* @method\n* @param {(enyo.Model|enyo.Model[])} models The [model or models]{@link enyo.Model}\n*\tto remove from the [list]{@link enyo.ModelList}.\n* @returns {enyo.Model[]} An immutable [array]{@glossary Array} of\n*\tmodels that were actually removed from the list.\n* @protected\n*/\nModelList.prototype.remove = function (models) {\n\tvar table = this.table,\n\t\tremoved = [],\n\t\tmodel,\n\t\tidx,\n\t\tid,\n\t\ti,\n\t\t\n\t\t// these modifications are made to allow more performant logic to take place in\n\t\t// views that may need to know this information\n\t\tlow = Infinity;\n\t\n\tif (models && !(models instanceof Array)) models = [models];\n\t\n\t// we start at the end to ensure that you could even pass the list itself\n\t// and it will work\n\tfor (i = models.length - 1; (model = models[i]); --i) {\n\t\ttable[model.euid] = null;\n\t\tid = model.get(model.primaryKey);\n\t\t\n\t\tif (id != null) table[id] = null;\n\t\t\n\t\tidx = models === this ? i : this.indexOf(model);\n\t\tif (idx > -1) {\t\t\t\t\n\t\t\tif (idx < low) low = idx;\n\t\t\t\n\t\t\tthis.splice(idx, 1);\n\t\t\tremoved.push(model);\n\t\t}\n\t}\n\t\n\t// since this is a separate array we will add this property to it for internal use only\n\tremoved.low = low;\n\t\n\treturn removed;\n};\n\n/**\n* Determines whether the specified [model]{@link enyo.Model} is present in the\n* [list]{@link enyo.ModelList}. Will attempt to resolve a [string]{@glossary String}\n* or [number]{@glossary Number} to either a [primaryKey]{@link enyo.Model#primaryKey}\n* or [euid]{@glossary euid}.\n*\n* @name enyo.ModelList#has\n* @method\n* @param {(enyo.Model|String|Number)} model An identifier representing either the\n*\t[model]{@link enyo.Model} instance, its [primaryKey]{@link enyo.Model#primaryKey},\n* or its [euid]{@glossary euid}.\n* @returns {Boolean} Whether or not the model is present in the [list]{@link enyo.ModelList}.\n* @protected\n*/\nModelList.prototype.has = function (model) {\n\tif (model === undefined || model === null) return false;\n\t\n\tif (typeof model == 'string' || typeof model == 'number') {\n\t\treturn !! this.table[model];\n\t} else return this.indexOf(model) > -1;\n};\n\n/**\n* Given an identifier, attempts to return the associated [model]{@link enyo.Model}.\n* The identifier should be a [string]{@glossary String} or [number]{@glossary Number}.\n*\n* @name enyo.ModelList#resolve\n* @method\n* @param {(String|Number)} model - An identifier (either a\n*\t[primaryKey]{@link enyo.Model#primaryKey} or an [euid]{@glossary euid}).\n* @returns {(undefined|null|enyo.Model)} If the identifier could be resolved, a\n*\t[model]{@link enyo.Model} instance is returned; otherwise, `undefined`, or\n* possibly `null` if the model once belonged to the [list]{@link enyo.ModelList}.\n* @protected\n*/\nModelList.prototype.resolve = function (model) {\n\tif (typeof model == 'string' || typeof model == 'number') {\n\t\treturn this.table[model];\n\t} else return model;\n};\n\n/**\n* Copies the current [list]{@link enyo.ModelList} and returns an shallow copy. This\n* method differs from the [slice()]{@glossary Array.slice} method inherited from\n* native [Array]{@glossary Array} in that this returns an {@link enyo.ModelList},\n* while `slice()` returns an array.\n* \n* @name enyo.ModelList#copy\n* @method\n* @returns {enyo.ModelList} A shallow copy of the callee.\n* @protected\n*/\nModelList.prototype.copy = function () {\n\treturn new ModelList(this);\n};","require('../../enyo');\n\n/**\n* Shared values for various [kinds]{@glossary kind} used to indicate a state or\n* (multiple, simultaneous) states. These flags are binary values represented by\n* hexadecimal numerals. They may be modified and compared (or even extended) using\n* [bitwise operations]{@glossary bitwise} or various\n* [API methods]{@link enyo.StateSupport} available to the kinds that support them.\n* Make sure to explore the documentation for individual kinds, as they may have\n* specific uses for a given flag.\n* \n* As a cursory overview, here is a table of the values already declared by built-in flags.\n* Each hexadecimal numeral represents a unique power of 2 in binary, from which we can use\n* [bitwise masks]{@glossary bitwise} to determine if a particular value is present.\n* \n* ```javascript\n* HEX             DEC             BIN\n* 0x0001             1            0000 0000 0000 0001\n* 0x0002             2            0000 0000 0000 0010\n* 0x0004             4            0000 0000 0000 0100\n* 0x0008             8            0000 0000 0000 1000\n* 0x0010            16            0000 0000 0001 0000\n* 0x0020            32            0000 0000 0010 0000\n* 0x0040            64            0000 0000 0100 0000\n* 0x0080           128            0000 0000 1000 0000\n* 0x0100           256            0000 0001 0000 0000\n* 0x0200           512            0000 0010 0000 0000\n* 0x0400          1024            0000 0100 0000 0000\n* 0x0800          2048            0000 1000 0000 0000\n* \n* ...\n* \n* 0x1000          4096            0001 0000 0000 0000\n* ```\n*\n* As a hint, converting (HEX) 0x0800 to DEC do:\n*\n* ```javascript\n* (0*16^3) + (8*16^2) + (0*16^1) + (0*16^0) = 2048\n* ```\n*\n* As a hint, converting (HEX) 0x0800 to BIN do:\n*\n* ```javascript\n* 0    8    0    0    (HEX)\n* ---- ---- ---- ----\n* 0000 1000 0000 0000 (BIN)\n* ```\n*\n* @name enyo.States\n* @enum {Number}\n* @public\n* @see enyo.StateSupport\n*/\nmodule.exports = {\n\t\n\t/**\n\t* Only exists in the client and was created during the runtime of the\n\t* [application]{@glossary application}.\n\t*\n\t* @name enyo.States.NEW\n\t* @default 1\n\t*/\n\tNEW: 0x0001,\n\t\n\t/**\n\t* Has been modified locally only.\n\t*\n\t* @name enyo.States.DIRTY\n\t* @default 2\n\t*/\n\tDIRTY: 0x0002,\n\t\n\t/**\n\t* Has not been modified locally.\n\t*\n\t* @name enyo.States.CLEAN\n\t* @default 4\n\t*/\n\tCLEAN: 0x0004,\n\t\n\t/**\n\t* Can no longer be modified.\n\t*\n\t* @default 8\n\t*/\n\tDESTROYED: 0x0008,\n\t\n\t/**\n\t* Currently attempting to fetch.\n\t* \n\t* @see enyo.Model.fetch\n\t* @see enyo.RelationalModel.fetch\n\t* @see enyo.Collection.fetch\n\t*\n\t* @default 16\n\t*/\n\tFETCHING: 0x0010,\n\t\n\t/**\n\t* Currently attempting to commit.\n\t* \n\t* @see enyo.Model.commit\n\t* @see enyo.RelationalModel.commit\n\t* @see enyo.Collection.commit\n\t*\n\t* @default 32\n\t*/\n\tCOMMITTING: 0x0020,\n\t\n\t/**\n\t* Currently attempting to destroy.\n\t* \n\t* @see enyo.Model.destroy\n\t* @see enyo.RelationalModel.destroy\n\t* @see enyo.Collection.destroy\n\t*\n\t* @default 64\n\t*/\n\tDESTROYING: 0x0040,\n\t\n\t/**\n\t* There was an error during commit.\n\t* \n\t* @see enyo.Model.commit\n\t* @see enyo.RelationalModel.commit\n\t* @see enyo.Collection.commit\n\t*\n\t* @default 128\n\t*/\n\tERROR_COMMITTING: 0x0080,\n\t\n\t/**\n\t* There was an error during fetch.\n\t* \n\t* @see enyo.Model.fetch\n\t* @see enyo.RelationalModel.fetch\n\t* @see enyo.Collection.fetch\n\t*\n\t* @default 256\n\t*/\n\tERROR_FETCHING: 0x0100,\n\t\n\t/**\n\t* There was an error during destroy.\n\t* \n\t* @see enyo.Model.destroy\n\t* @see enyo.RelationalModel.destroy\n\t* @see enyo.Collection.destroy\n\t*\n\t* @default 512\n\t*/\n\tERROR_DESTROYING: 0x0200,\n\t\n\t/**\n\t* An error was encountered for which there was no exact flag, or an invalid error was\n\t* specified.\n\t*\n\t* @default 1024\n\t*/\n\tERROR_UNKNOWN: 0x0400,\n\t\n\t/**\n\t* A multi-state [bitmask]{@glossary bitwise}. Compares a given flag to the states\n\t* included in the definition of `BUSY`. By default, this is one of\n\t* [FETCHING]{@link enyo.States.FETCHING}, [COMMITTING]{@link enyo.States.COMMITTING}, or\n\t* [DESTROYING]{@link enyo.States.DESTROYING}. It may be extended to include additional\n\t* values using the [bitwise]{@glossary bitwise} `OR` operator (`|`).\n\t*\n\t* @default 112\n\t*/\n\tBUSY: 0x0010 | 0x0020 | 0x0040,\n\t\n\t/**\n\t* A multi-state [bitmask]{@glossary bitwise}. Compares a given flag to the states\n\t* included in the definition of `ERROR`. By default, this is one of\n\t* [ERROR_FETCHING]{@link enyo.States.ERROR_FETCHING},\n\t* [ERROR_COMMITTING]{@link enyo.States.ERROR_COMMITTING},\n\t* [ERROR_DESTROYING]{@link enyo.States.ERROR_DESTROYING}, or\n\t* [ERROR_UNKNOWN]{@link enyo.States.ERROR_UNKNOWN}. It may be extended to include\n\t* additional values using the [bitwise]{@glossary bitwise} `OR` operator (`|`).\n\t*\n\t* @name enyo.States.ERROR\n\t* @default 1920\n\t*/\n\tERROR: 0x0080 | 0x0100 | 0x0200 | 0x0400,\n\t\n\t/**\n\t* A multi-state [bitmask]{@glossary bitwise}. Compares a given flag to the states\n\t* included in the definition of `READY`. By default, this is the inverse of any\n\t* values included in [BUSY]{@link enyo.States.BUSY} or [ERROR]{@link enyo.States.ERROR}.\n\t*\n\t* @name enyo.States.READY\n\t* @default -2041\n\t*/\n\tREADY: ~(0x0008 | 0x0010 | 0x0020 | 0x0040 | 0x0080 | 0x0100 | 0x0200 | 0x0400)\n};","require('../../enyo');\n\nvar _jobs = {};\n\n/**\n* Runs a [job]{@link exports} after the specified amount of time has elapsed\n* since a job with the same name has run.\n* \n* Jobs can be used to throttle behaviors.  If some event may occur one time or\n* multiple times, but we want a response to occur only once every `n` seconds,\n* we can use a job.\n*\n* @example\n* onscroll: function() {\n*\t// updateThumb will be called, but only when 1 second has elapsed since the\n*\t// last onscroll\n*\texports(\"updateThumb\", this.bindSafely(\"updateThumb\"), 1000);\n* }\n*\n* @param {String} nom - The name of the [job]{@link exports} to throttle.\n* @param {(Function|String)} job - Either the name of a method or a [function]{@glossary Function}\n*                                to execute as the requested job.\n* @param {Number} wait - The number of milliseconds to wait before executing the job again.\n* @static\n* @public\n*/\nexports = module.exports = function (nom, job, wait) {\n\texports.stop(nom);\n\t_jobs[nom] = setTimeout(function() {\n\t\texports.stop(nom);\n\t\tjob();\n\t}, wait);\n};\n\n/**\n* Cancels the named [job]{@link exports}, if it has not already fired.\n*\n* @param {String} nom - The name of the [job]{@link exports} to cancel.\n* @static\n* @public\n*/\nexports.stop = function (nom) {\n\tif (_jobs[nom]) {\n\t\tclearTimeout(_jobs[nom]);\n\t\tdelete _jobs[nom];\n\t}\n};\n\n/**\n* Immediately invokes the [job]{@link exports} and prevents any other calls\n* to `exports.throttle()` with the same job name from running for the\n* specified amount of time.\n* \n* This is used for throttling user events when you want to provide an\n* immediate response, but later invocations might just be noise if they arrive\n* too often.\n* \n* @param {String} nom - The name of the [job]{@link exports} to throttle.\n* @param {(Function|String)} job - Either the name of a method or a [function]{@glossary Function}\n*                                to execute as the requested job.\n* @param {Number} wait - The number of milliseconds to wait before executing the\n*                      job again.\n* @static\n* @public\n*/\nexports.throttle = function (nom, job, wait) {\n\t// if we still have a job with this name pending, return immediately\n\tif (_jobs[nom]) {\n\t\treturn;\n\t}\n\tjob();\n\t_jobs[nom] = setTimeout(function() {\n\t\texports.stop(nom);\n\t}, wait);\n};","require('../../enyo');\n\n\n/**\n* [JSON]{@glossary JSON} related methods and wrappers.\n*\n* @namespace enyo.json\n* @public\n*/\nmodule.exports = /** @lends enyo.json */ {\n\t\n\t/**\n\t* Wrapper for [JSON.stringify()]{@glossary JSON.stringify}. Creates a\n\t* [JSON]{@glossary JSON} [string]{@glossary String} from an\n\t* [object]{@glossary Object}.\n\t*\n\t* @see {@glossary JSON.stringify}\n\t* @param {Object} value - The [object]{@glossary Object} to convert to a\n\t*\t[JSON]{@glossary JSON} [string]{@glossary String}.\n\t* @param {(Function|String[])} [replacer] An optional parameter indicating either an\n\t*\t[array]{@glossary Array} of keys to include in the final output or a\n\t*\t[function]{@glossary Function} that will have the opportunity to dynamically return\n\t*\tvalues to include for keys.\n\t* @param {(Number|String)} [space] - Determines the spacing (if any) for pretty-printed\n\t*\toutput of the JSON string. A [number]{@glossary Number} indicates the number of\n\t* spaces to use in the output, while a string will be used verbatim.\n\t* @returns {String} The JSON string for the given object.\n\t* @public\n\t*/\n\tstringify: function(value, replacer, space) {\n\t\treturn JSON.stringify(value, replacer, space);\n\t},\n\t\n\t/**\n\t* Wrapper for [JSON.parse()]{@glossary JSON.parse}. Parses a valid\n\t* [JSON]{@glossary JSON} [string]{@glossary String} and returns an\n\t* [object]{@glossary Object}, or `null` if the parameters are invalid.\n\t*\n\t* @see {@glossary JSON.parse}\n\t* @param {String} json - The [JSON]{@glossary JSON} [string]{@glossary String} to\n\t*\tparse into an [object]{@glossary Object}.\n\t* @param {Function} [reviver] - The optional [function]{@glossary Function} to use to\n\t*\tparse individual keys of the return object.\n\t* @returns {(Object|null)} If parameters are valid, an [object]{@glossary Object}\n\t* is returned; otherwise, `null`.\n\t* @public\n\t*/\n\tparse: function(json, reviver) {\n\t\treturn json ? JSON.parse(json, reviver) : null;\n\t}\n};","require('../../enyo');\n\n// we need to register appropriately to know when\n// the document is officially ready, to ensure that\n// client code is only going to execute at the\n// appropriate time\n\nvar doc = global.document;\nvar queue = [];\nvar ready = (\"complete\" === doc.readyState);\nvar run;\nvar init;\nvar remove;\nvar add;\nvar flush;\nvar flushScheduled = false;\n\n/**\n* Registers a callback (and optional `this` context) to run after all the Enyo and library code\n* has loaded and the `DOMContentLoaded` event (or equivalent on older browsers) has been sent.\n* \n* If called after the system is in a ready state, runs the supplied code asynchronously at the\n* earliest opportunity.\n*\n* @name enyo.ready\n* @method\n* @param {Function} fn - The method to execute when the DOM is ready.\n* @param {Object} [context] - The optional context (`this`) under which to execute the\n*\tcallback method.\n* @public\n*/\nmodule.exports = function (fn, context) {\n\tqueue.push([fn, context]);\n\t// schedule another queue flush if needed to run new ready calls\n\tif (ready && !flushScheduled) {\n\t\tsetTimeout(flush, 0);\n\t\tflushScheduled = true;\n\t}\n};\n\n/**\n* @private\n*/\nrun = function (fn, context) {\n\tfn.call(context || global);\n};\n\n/**\n* @private\n*/\ninit = function (event) {\n\t// if we're interactive, it should be safe to move\n\t// forward because the content has been parsed\n\tif ((ready = (\"interactive\" === doc.readyState))) {\n\t\tif (\"DOMContentLoaded\" !== event.type && \"readystatechange\" !== event.type) {\n\t\t\tremove(event.type, init);\n\t\t\tflush();\n\t\t}\n\t}\n\t// for an IE8 fallback and legacy WebKit (including webOS 3.x and less) and assurance\n\tif ((ready = (\"complete\" === doc.readyState || \"loaded\" === doc.readyState))) {\n\t\tremove(event.type, init);\n\t\tflush();\n\t}\n};\n\n/**\n* @private\n*/\nadd = function (event, fn) {\n\tvar name = doc.addEventListener? \"addEventListener\": \"attachEvent\";\n\tvar on = name === \"attachEvent\"? \"on\": \"\";\n\tdoc[name](on + event, fn, false);\n};\n\n/**\n* @private\n*/\nremove = function (event, fn) {\n\tvar name = doc.addEventListener? \"removeEventListener\": \"detachEvent\";\n\tvar on = name === \"detachEvent\"? \"on\": \"\";\n\tdoc[name](on + event, fn, false);\n};\n\n/**\n* @private\n*/\nflush = function () {\n\tif (ready && queue.length) {\n\t\twhile (queue.length) {\n\t\t\trun.apply(global, queue.shift());\n\t\t}\n\t}\n\tflushScheduled = false;\n};\n\n// ok, let's hook this up\nadd(\"DOMContentLoaded\", init);\nadd(\"readystatechange\", init);","require('../../enyo');\n\n/**\n* @private\n*/\nvar callbacks = [],\n\troots = [];\n\nexports.roots = roots;\n\n/**\n* Registers a single callback to be executed whenever a root view is rendered.\n* \n* @name enyo.rendered\n* @method\n* @param {Function} method - The callback to execute.\n* @param {Object} [context=enyo.global] The context under which to execute the callback.\n* @public\n*/\nexports.rendered = function (method, context) {\n\tcallbacks.push({method: method, context: context || global});\n};\n\n/**\n* @private\n*/\nexports.roots = roots;\n\n/**\n* Invokes all known callbacks (if any) against the root view once it has been rendered.\n* This method is not likely to be executed very often.\n* \n* @private\n*/\nfunction invoke (root) {\n\tcallbacks.forEach(function (ln) {\n\t\tln.method.call(ln.context, root);\n\t});\n}\n\n/**\n* @private\n*/\nexports.addToRoots = function (view) {\n\tvar rendered,\n\t\tdestroy;\n\t\n\t// since it is possible to call renderInto more than once on a given view we ensure we\n\t// don't register it twice unnecessarily\n\tif (roots.indexOf(view) === -1) {\n\t\t\n\t\troots.push(view);\n\t\t\n\t\t// hijack the rendered method\n\t\trendered = view.rendered;\n\t\t\n\t\t// hijack the destroy method\n\t\tdestroy = view.destroy;\n\t\t\n\t\t// supply our rendered hook\n\t\tview.rendered = function () {\n\t\t\t// we call the original first\n\t\t\trendered.apply(this, arguments);\n\t\t\t\n\t\t\t// and now we invoke the known callbacks against this root\n\t\t\tinvoke(this);\n\t\t};\n\t\t\n\t\t// supply our destroy hook\n\t\tview.destroy = function () {\n\t\t\tvar idx = roots.indexOf(this);\n\t\t\t\n\t\t\t// remove it from the roots array\n\t\t\tif (idx > -1) roots.splice(idx, 1);\n\t\t\t\n\t\t\t// now we can call the original\n\t\t\tdestroy.apply(this, arguments);\n\t\t};\n\t}\n};","require('../../enyo');\n\n\n/**\n* A polyfill for platforms that don't yet support\n* [bind()]{@glossary Function.prototype.bind}. As explained in the linked article, this\n* polyfill handles the general use case but cannot exactly mirror the ECMA-262 version 5\n* implementation specification. This is an adaptation of the example promoted\n* [here]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind}.\n*/\nif (!Function.prototype.bind) {\n\tFunction.prototype.bind = function (ctx) {\n\t\t// deliberately used here...\n\t\tvar args = Array.prototype.slice.call(arguments, 1),\n\t\t\tscop = this,\n\t\t\tnop = function () {},\n\t\t\tret;\n\t\t\n\t\t// as-per MDN's explanation of this polyfill we're filling in for the IsCallable\n\t\t// internal (we can't access it)\n\t\tif (typeof this != 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind called on non-callable object.');\n\t\t}\n\t\t\n\t\tret = function () {\n\t\t\tvar largs = args.concat(Array.prototype.slice.call(arguments)),\n\t\t\t\tlctx = this instanceof nop && ctx ? this : ctx;\n\t\t\t\n\t\t\treturn scop.apply(lctx, largs);\n\t\t};\n\t\t\n\t\tnop.prototype = this.prototype;\n\t\t\n\t\t/*jshint -W055 */\n\t\tret.prototype = new nop();\n\t\t/*jshint +W055 */\n\t\t\n\t\treturn ret;\n\t};\n}\n\n/**\n* @private\n*/\nexports.nop = function () {};\n\n/**\n* @private\n*/\nexports.nob = {};\n\n/**\n* @private\n*/\nexports.nar = [];\n\n/**\n* This name is reported in inspectors as the type of objects created via delegate;\n* otherwise, we would just use {@link enyo.nop}.\n*\n* @private\n*/\nvar Instance = exports.instance = function () {};\n\t\n/**\n* @private\n*/\nvar setPrototype = exports.setPrototype = function (ctor, proto) {\n\tctor.prototype = proto;\n};\n\n/**\n* Boodman/crockford delegation w/cornford optimization\n* \n* @private\n*/\nexports.delegate = function (proto) {\n\tsetPrototype(Instance, proto);\n\treturn new Instance();\n};\n\n// ----------------------------------\n// General Functions\n// ----------------------------------\n\n/**\n* Determines whether a variable is defined.\n* \n* @param {*} target - Anything that can be compared to `undefined`.\n* @returns {Boolean} `true` if defined, `false` otherwise.\n* @public\n*/\nvar exists = exports.exists = function (target) {\n\treturn (target !== undefined);\n};\n\nvar uidCounter = 0;\n\n/**\n* Creates a unique identifier (with an optional prefix) and returns the identifier as a string.\n*\n* @param {String} [prefix] - The prefix to prepend to the generated unique id.\n* @returns {String} An optionally-prefixed identifier.\n* @public\n*/\nexports.uid = function (prefix) {\n\treturn String((prefix? prefix: '') + uidCounter++);\n};\n\n/**\n* RFC4122 uuid generator for the browser.\n*\n* @returns {String} An [RFC4122]{@glossary UUID}-compliant, universally unique identifier.\n* @public\n*/\nexports.uuid = function () {\n\t// @TODO: Could possibly be faster\n\tvar t, p = (\n\t\t(Math.random().toString(16).substr(2,8)) + '-' +\n\t\t((t=Math.random().toString(16).substr(2,8)).substr(0,4)) + '-' +\n\t\t(t.substr(4,4)) +\n\t\t((t=Math.random().toString(16).substr(2,8)).substr(0,4)) + '-' +\n\t\t(t.substr(4,4)) +\n\t\t(Math.random().toString(16).substr(2,8))\n\t);\n\treturn p;\n};\n\n/**\n* Generates a random number using [Math.random]{@glossary Math.random}.\n*\n* @param {Number} bound - The multiplier used to generate the product.\n* @returns {Number} A random number.\n* @public\n*/\nexports.irand = function (bound) {\n\treturn Math.floor(Math.random() * bound);\n};\n\nvar toString = Object.prototype.toString;\n\n/**\n* Determines whether a given variable is a [String]{@glossary String}.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is a [String]{@glossary String};\n* otherwise, `false`.\n* @public\n*/\nexports.isString = function (it) {\n\treturn toString.call(it) === '[object String]';\n};\n\n/**\n* Determines whether a given variable is a [Function]{@glossary Function}.\n* \n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is a [Function]{@glossary Function};\n* otherwise, `false`.\n* @public\n*/\nvar isFunction = exports.isFunction = function (it) {\n\treturn toString.call(it) === '[object Function]';\n};\n\n/**\n* Determines whether a given variable is an [Array]{@glossary Array}.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is an [Array]{@glossary Array};\n* otherwise, `false`.\n* @method\n* @public\n*/\nvar isArray = exports.isArray = Array.isArray || function (it) {\n\treturn toString.call(it) === '[object Array]';\n};\n\n/**\n* Determines whether a given variable is an [Object]{@glossary Object}.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is an [Object]{@glossary Object};\n* otherwise, `false`.\n* @method\n* @public\n*/\nexports.isObject = Object.isObject || function (it) {\n\t// explicit null/undefined check for IE8 compatibility\n\treturn (it != null) && (toString.call(it) === '[object Object]');\n};\n\n/**\n* Determines whether a given variable is an explicit boolean `true`.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is an explicit `true`; otherwise,\n* `false`.\n* @public\n*/\nexports.isTrue = function (it) {\n\treturn !(it === 'false' || it === false || it === 0 || it === null || it === undefined);\n};\n\n/**\n* Determines whether a given variable is a numeric value.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is a numeric value; otherwise,\n* `false`.\n* @public\n*/\nexports.isNumeric = function (it) {\n\t// borrowed from jQuery\n\treturn !isArray(it) && (it - parseFloat(it) + 1) >= 0;\n};\n\n/**\n* Binds the `this` context of any method to a scope and a variable number of provided initial\n* parameters.\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\n*                      enclosed method.\n* @returns {Function} The bound method/closure.\n* @public\n*/\nvar bind = exports.bind = function (scope, method) {\n\tif (!method) {\n\t\tmethod = scope;\n\t\tscope = null;\n\t}\n\tscope = scope || global;\n\tif (typeof method == 'string') {\n\t\tif (scope[method]) {\n\t\t\tmethod = scope[method];\n\t\t} else {\n\t\t\tthrow('enyo.bind: scope[\"' + method + '\"] is null (scope=\"' + scope + '\")');\n\t\t}\n\t}\n\tif (typeof method == 'function') {\n\t\tvar args = cloneArray(arguments, 2);\n\t\tif (method.bind) {\n\t\t\treturn method.bind.apply(method, [scope].concat(args));\n\t\t} else {\n\t\t\treturn function() {\n\t\t\t\tvar nargs = cloneArray(arguments);\n\t\t\t\t// invoke with collected args\n\t\t\t\treturn method.apply(scope, args.concat(nargs));\n\t\t\t};\n\t\t}\n\t} else {\n\t\tthrow('enyo.bind: scope[\"' + method + '\"] is not a function (scope=\"' + scope + '\")');\n\t}\n};\n\n/**\n* Binds a callback to a scope. If the object has a `destroyed` property that's truthy, then the\n* callback will not be run if called. This can be used to implement both\n* {@link enyo.Object.bindSafely} and {@link enyo.Object}-like objects like\n* {@link enyo.Model} and {@link enyo.Collection}.\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\n*                      enclosed method.\n* @returns {Function} The bound method/closure.\n* @public\n*/\nexports.bindSafely = function (scope, method) {\n\tif (typeof method == 'string') {\n\t\tif (scope[method]) {\n\t\t\tmethod = scope[method];\n\t\t} else {\n\t\t\tthrow('enyo.bindSafely: scope[\"' + method + '\"] is null (this=\"' + this + '\")');\n\t\t}\n\t}\n\tif (typeof method == 'function') {\n\t\tvar args = cloneArray(arguments, 2);\n\t\treturn function() {\n\t\t\tif (scope.destroyed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar nargs = cloneArray(arguments);\n\t\t\treturn method.apply(scope, args.concat(nargs));\n\t\t};\n\t} else {\n\t\tthrow('enyo.bindSafely: scope[\"' + method + '\"] is not a function (this=\"' + this + '\")');\n\t}\n};\n\n/**\n* Calls the provided `method` on `scope`, asynchronously.\n*\n* Uses [window.setTimeout()]{@glossary window.setTimeout} with minimum delay,\n* usually around 10ms.\n*\n* Additional arguments are passed to `method` when it is invoked.\n*\n* If only a single argument is supplied, will just call that function asynchronously without\n* doing any additional binding.\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\n*                      enclosed method.\n* @returns {Number} The `setTimeout` id.\n* @public\n*/\nexports.asyncMethod = function (scope, method) {\n\tif (!method) {\n\t\t// passed just a single argument\n\t\treturn setTimeout(scope, 1);\n\t} else {\n\t\treturn setTimeout(bind.apply(scope, arguments), 1);\n\t}\n};\n\n/**\n* Calls the provided `method` ([String]{@glossary String}) on `scope` with optional\n* arguments `args` ([Array]{@glossary Array}), if the object and method exist.\n*\n* @example\n* \tenyo.call(myWorkObject, 'doWork', [3, 'foo']);\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {Array} [args] - An array of arguments to pass to the method.\n* @returns {*} The return value of the method.\n* @public\n*/\nexports.call = function (scope, method, args) {\n\tvar context = scope || this;\n\tif (method) {\n\t\tvar fn = context[method] || method;\n\t\tif (fn && fn.apply) {\n\t\t\treturn fn.apply(context, args || []);\n\t\t}\n\t}\n};\n\n/**\n* Returns the current time in milliseconds. On platforms that support it,\n* [Date.now()]{@glossary Date.now} will be used; otherwise this will\n* be equivalent to [new Date().getTime()]{@glossary Date.getTime}.\n* \n* @returns {Number} Number of milliseconds representing the current time.\n* @method\n* @public\n*/\n\nvar now = exports.now = Date.now || function () {\n\treturn new Date().getTime();\n};\n\n/**\n* When [window.performance]{@glossary window.performance} is available, supplies\n* a high-precision, high-performance monotonic timestamp, which is independent of\n* changes to the system clock and thus safer for use in animation, etc. Falls back to\n* [enyo.now()]{@link enyo#now} (based on the JavaScript [Date]{@glossary Date}\n* object), which is subject to system time changes.\n* \n* @returns {Number} Number of milliseconds representing the current time or time since\n*                   start of application execution as reported by the platform.\n* @method\n* @public\n*/\nexports.perfNow = (function () {\n\t// we have to check whether or not the browser has supplied a valid\n\t// method to use\n\tvar perf = window.performance || {};\n\t// test against all known vendor-specific implementations, but use\n\t// a fallback just in case\n\tperf.now = perf.now || perf.mozNow || perf.msNow || perf.oNow || perf.webkitNow || now;\n\treturn function () {\n\t\treturn perf.now();\n\t};\n}());\n\n/**\n* A fast-path enabled global getter that takes a string path, which may be a full path (from\n* context window/Enyo) or a relative path (to the execution context of the method). It knows how\n* to check for and call the backwards-compatible generated getters, as well as how to handle\n* computed properties. Returns `undefined` if the object at the given path cannot be found. May\n* safely be called on non-existent paths.\n*\t\n* @param {String} path - The path from which to retrieve a value.\n* @returns {*} The value for the given path, or `undefined` if the path could not be\n*                  completely resolved.\n* @method enyo.getPath\n* @public\n*/\nvar getPath = exports.getPath = function (path) {\n\t// we're trying to catch only null/undefined not empty string or 0 cases\n\tif (!path && path !== null && path !== undefined) return path;\n\t\n\tvar next = this,\n\t\tparts,\n\t\tpart,\n\t\tgetter,\n\t\tprev;\n\t\n\t// obviously there is a severe penalty for requesting get with a path lead\n\t// by unnecessary relative notation...\n\tif (path[0] == '.') path = path.replace(/^\\.+/, '');\n\t\n\t// here's where we check to make sure we have a truthy string-ish\n\tif (!path) return;\n\t\n\tparts = path.split('.');\n\tpart = parts.shift();\n\t\n\tdo {\n\t\tprev = next;\n\t\t// for constructors we must check to make sure they are undeferred before\n\t\t// looking for static properties\n\t\t// for the auto generated or provided published property support we have separate\n\t\t// routines that must be called to preserve compatibility\n\t\tif (next._getters && ((getter = next._getters[part])) && !getter.generated) next = next[getter]();\n\t\t// for all other special cases to ensure we use any overloaded getter methods\n\t\telse if (next.get && next !== this && next.get !== getPath) next = next.get(part);\n\t\t// and for regular cases\n\t\telse next = next[part];\n\t} while (next && (part = parts.shift()));\n\t\t\t\n\t// if necessary we ensure we've undeferred any constructor that we're\n\t// retrieving here as a final property as well\n\treturn next;\n};\n\n/**\n* @private\n*/\ngetPath.fast = function (path) {\n\t// the current context\n\tvar b = this, fn, v;\n\tif (b._getters && (fn = b._getters[path])) {\n\t\tv = b[fn]();\n\t} else {\n\t\tv = b[path];\n\t}\n\t\n\treturn v;\n};\n\n/**\n* @TODO: Out of date...\n* A global setter that takes a string path (relative to the method's execution context) or a\n* full path (relative to window). Attempts to automatically retrieve any previously existing\n* value to supply to any observers. If the context is an {@link enyo.Object} or subkind, the\n* {@link enyo.ObserverSupport.notify} method is used to notify listeners for the path's being\n* set. If the previous value is equivalent to the newly set value, observers will not be\n* triggered by default. If the third parameter is present and is an explicit boolean true, the\n* observers will be triggered regardless. Returns the context from which the method was executed.\n*\n* @param {String} path - The path for which to set the given value.\n* @param {*} is - The value to set.\n* @param {Object} [opts] - An options hash.\n* @returns {this} Whatever the given context was when executed.\n* @method enyo.setPath\n* @public\n*/\nvar setPath = exports.setPath = function (path, is, opts) {\n\t// we're trying to catch only null/undefined not empty string or 0 cases\n\tif (!path || (!path && path !== null && path !== undefined)) return this;\n\t\n\tvar next = this,\n\t\toptions = {create: true, silent: false, force: false},\n\t\tbase = next,\n\t\tparts,\n\t\tpart,\n\t\twas,\n\t\tforce,\n\t\tcreate,\n\t\tsilent,\n\t\tcomparator;\n\t\n\tif (typeof opts == 'object') opts = mixin({}, [options, opts]);\n\telse {\n\t\tforce = opts;\n\t\topts = options;\n\t}\n\t\n\tif (opts.force) force = true;\n\tsilent = opts.silent;\n\tcreate = opts.create;\n\tcomparator = opts.comparator;\n\t\n\t\n\t// obviously there is a severe penalty for requesting get with a path lead\n\t// by unnecessary relative notation...\n\tif (path[0] == '.') path = path.replace(/^\\.+/, '');\n\t\n\t// here's where we check to make sure we have a truthy string-ish\n\tif (!path) return next;\n\t\n\tparts = path.split('.');\n\tpart = parts.shift();\n\t\n\tdo {\n\t\t\n\t\tif (!parts.length) was = next.get && next.get !== getPath? next.get(part): next[part];\n\t\telse {\n\t\t\t// this allows us to ensure that if we're setting a static property of a constructor we have the\n\t\t\t// correct constructor\n\t\t\t// @TODO: It seems ludicrous to have to check this on every single part of a chain; if we didn't have\n\t\t\t// deferred constructors this wouldn't be necessary and is expensive - unnecessarily so when speed is so important\n\t\t\tif (next !== base && next.set && next.set !== setPath) {\n\t\t\t\tparts.unshift(part);\n\t\t\t\tnext.set(parts.join('.'), is, opts);\n\t\t\t\treturn base;\n\t\t\t}\n\t\t\tif (next !== base && next.get) next = (next.get !== getPath? next.get(part): next[part]) || (create && (next[part] = {}));\n\t\t\telse next = next[part] || (create && (next[part] = {}));\n\t\t}\n\t\t\n\t} while (next && parts.length && (part = parts.shift()));\n\t\n\tif (!next) return base;\n\t\n\t// now update to the new value\n\tif (next !== base && next.set && next.set !== setPath) {\n\t\tnext.set(part, is, opts);\n\t\treturn base;\n\t} else next[part] = is;\n\t\n\t// if possible we notify the changes but this change is notified from the immediate\n\t// parent not the root object (could be the same)\n\tif (next.notify && !silent && (force || was !== is || (comparator && comparator(was, is)))) next.notify(part, was, is, opts);\n\t// we will always return the original root-object of the call\n\treturn base;\n};\n\n/**\n* @private\n*/\nsetPath.fast = function (path, value) {\n\t// the current context\n\tvar b = this,\n\t\t// the previous value and helper variable\n\t\trv, fn;\n\t// we have to check and ensure that we're not setting a computed property\n\t// and if we are, do nothing\n\tif (b._computed && b._computed[path] !== undefined) {\n\t\treturn b;\n\t}\n\tif (b._getters && (fn=b._getters[path])) {\n\t\trv = b[fn]();\n\t} else {\n\t\trv = b[path];\n\t}\n\t// set the new value now that we can\n\tb[path] = value;\n\t\n\t// this method is only ever called from the context of enyo objects\n\t// as a protected method\n\tif (rv !== value) { b.notifyObservers(path, rv, value); }\n\t// return the context\n\treturn b;\n};\n\n// ----------------------------------\n// String Functions\n// ----------------------------------\n\n/**\n* Uppercases a given string. Will coerce to a [String]{@glossary String}\n* if possible/necessary.\n*\n* @param {String} str - The string to uppercase.\n* @returns {String} The uppercased string.\n* @public\n*/\nexports.toUpperCase = function (str) {\n\tif (str != null) {\n\t\treturn str.toString().toUpperCase();\n\t}\n\treturn str;\n};\n\n/**\n* Lowercases a given string. Will coerce to a [String]{@glossary String}\n* if possible/necessary.\n*\n* @param {String} str - The string to lowercase.\n* @returns {String} The lowercased string.\n* @public\n*/\nexports.toLowerCase = function (str) {\n\tif (str != null) {\n\t\treturn str.toString().toLowerCase();\n\t}\n\treturn str;\n};\n\n/**\n* Capitalizes a given string.\n*\n* @param {String} str - The string to capitalize.\n* @returns {String} The capitalized string.\n* @public\n*/\nexports.cap = function (str) {\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n};\n\n/**\n* Un-capitalizes a given string.\n* \n* @param {String} str - The string to un-capitalize.\n* @returns {String} The un-capitalized string.\n* @public\n*/\nexports.uncap = function (str) {\n\treturn str.slice(0, 1).toLowerCase() + str.slice(1);\n};\n\n/**\n* Injects an arbitrary number of values, in order, into a template string at\n* positions marked by `\"%.\"`.\n*\n* @param {String} template - The string template to inject with values.\n* @param {...String} val The values to inject into the template.\n* @returns {String} A copy of the template populated with values.\n* @public\n*/\nexports.format = function (template) {\n\tvar pattern = /\\%./g,\n\t\targ = 0,\n\t\ttmp = template,\n\t\targs = arguments,\n\t\treplacer;\n\t\n\treplacer = function () {\n\t\treturn args[++arg];\n\t};\n\t\n\treturn tmp.replace(pattern, replacer);\n};\n\n/**\n* @private\n*/\nString.prototype.trim = String.prototype.trim || function () {\n\treturn this.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n* Takes a string and trims leading and trailing spaces. Strings with no length,\n* non-strings, and falsy values will be returned without modification.\n*\n* @param {String} str - The string from which to remove whitespace.\n* @returns {String} The trimmed string.\n* @public\n*/\nexports.trim = function (str) {\n\treturn (typeof str == 'string' && str.trim()) || str;\n};\n\n// ----------------------------------\n// Object Functions\n// ----------------------------------\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Object.create()]{@glossary Object.create}.\n*/\nObject.create = Object.create || (function () {\n\tvar Anon = function () {};\n\treturn function (obj) {\n\t\t// in the polyfill we can't support the additional features so we are ignoring\n\t\t// the extra parameters\n\t\tif (!obj || obj === null || typeof obj != 'object') throw 'Object.create: Invalid parameter';\n\t\tAnon.prototype = obj;\n\t\treturn new Anon();\n\t};\n})();\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Object.keys()]{@glossary Object.keys}.\n*/\nObject.keys = Object.keys || function (obj) {\n\tvar results = [];\n\tvar hop = Object.prototype.hasOwnProperty;\n\tfor (var prop in obj) {\n\t\tif (hop.call(obj, prop)) {\n\t\t\tresults.push(prop);\n\t\t}\n\t}\n\t// *sigh* IE 8\n\tif (!({toString: null}).propertyIsEnumerable('toString')) {\n\t\tvar dontEnums = [\n\t\t\t'toString',\n\t\t\t'toLocaleString',\n\t\t\t'valueOf',\n\t\t\t'hasOwnProperty',\n\t\t\t'isPrototypeOf',\n\t\t\t'propertyIsEnumerable',\n\t\t\t'constructor'\n\t\t];\n\t\tfor (var i = 0, p; (p = dontEnums[i]); i++) {\n\t\t\tif (hop.call(obj, p)) {\n\t\t\t\tresults.push(p);\n\t\t\t}\n\t\t}\n\t}\n\treturn results;\n};\n\n/**\n* Returns an array of all known enumerable properties found on a given object.\n*\n* @alias Object.keys.\n* @method enyo.keys\n* @public\n*/\nexports.keys = Object.keys;\n\n/**\n* Convenience method that takes an [array]{@glossary Array} of properties\n* and an [object]{@glossary Object} as parameters. Returns a new object\n* with only those properties named in the array that are found to exist on the\n* base object. If the third parameter is `true`, falsy values will be ignored.\n*\n* @param {String[]} properties The properties to include on the returned object.\n* @param {Object} object - The object from which to retrieve values for the requested properties.\n* @param {Boolean} [ignore=false] Whether or not to ignore copying falsy values.\n* @returns {Object} A new object populated with the requested properties and values from\n*                     the given object.\n* @public\n*/\nexports.only = function (properties, object, ignore) {\n\tvar ret = {},\n\t\tprop,\n\t\tlen,\n\t\ti;\n\t\n\tfor (i = 0, len = properties.length >>> 0; i < len; ++i) {\n\t\tprop = properties[i];\n\t\t\n\t\tif (ignore && (object[prop] === undefined || object[prop] === null)) continue;\n\t\tret[prop] = object[prop];\n\t}\n\t\n\treturn ret;\n};\n\n/**\n* Convenience method that takes two [objects]{@glossary Object} as parameters.\n* For each key from the first object, if the key also exists in the second object,\n* a mapping of the key from the first object to the key from the second object is\n* added to a result object, which is eventually returned. In other words, the\n* returned object maps the named properties of the first object to the named\n* properties of the second object. The optional third parameter is a boolean\n* designating whether to pass unknown key/value pairs through to the new object.\n* If `true`, those keys will exist on the returned object.\n*\n* @param {Object} map - The object with key/value pairs.\n* @param {Object} obj - The object whose values will be used.\n* @param {Boolean} [pass=false] Whether or not to pass unnamed properties through\n*                               from the given object.\n* @returns {Object} A new object whose properties have been mapped.\n* @public\n*/\nexports.remap = function (map, obj, pass) {\n\tvar ret = pass ? clone(obj) : {},\n\t\tkey;\n\t\n\tfor (key in map) {\n\t\tif (key in obj) ret[map[key]] = obj.get ? obj.get(key) : obj[key];\n\t}\n\treturn ret;\n};\n\n/**\n* Helper method that accepts an [array]{@glossary Array} of\n* [objects]{@glossary Object} and returns a hash of those objects indexed\n* by the specified `property`. If a `filter` is provided, the filter should\n* accept four parameters: the key, the value (object), the current mutable map\n* reference, and an immutable copy of the original array of objects for\n* comparison.\n*\n* @param {String} property - The property to index the array by.\n* @param {Array} array - An array of property objects.\n* @param {Function} [filter] - The filter function to use; accepts four arguments.\n* @returns {Object} A hash (object) indexed by the `property` argument\n* @public\n*/\nexports.indexBy = function (property, array, filter) {\n\t// the return value - indexed map from the given array\n\tvar map = {},\n\t\tvalue,\n\t\tlen,\n\t\tidx = 0;\n\t// sanity check for the array with an efficient native array check\n\tif (!exists(array) || !(array instanceof Array)) {\n\t\treturn map;\n\t}\n\t// sanity check the property as a string\n\tif (!exists(property) || 'string' !== typeof property) {\n\t\treturn map;\n\t}\n\t// the immutable copy of the array\n\tvar copy = clone(array);\n\t// test to see if filter actually exsits\n\tfilter = exists(filter) && 'function' === typeof filter ? filter : undefined;\n\tfor (len = array.length; idx < len; ++idx) {\n\t\t// grab the value from the array\n\t\tvalue = array[idx];\n\t\t// make sure that it exists and has the requested property at all\n\t\tif (exists(value) && exists(value[property])) {\n\t\t\tif (filter) {\n\t\t\t\t// if there was a filter use it - it is responsible for\n\t\t\t\t// updating the map accordingly\n\t\t\t\tfilter(property, value, map, copy);\n\t\t\t} else {\n\t\t\t\t// use the default behavior - check to see if the key\n\t\t\t\t// already exists on the map it will be overwritten\n\t\t\t\tmap[value[property]] = value;\n\t\t\t}\n\t\t}\n\t}\n\t// go ahead and return our modified map\n\treturn map;\n};\n\n/**\n* Creates and returns a shallow copy of an [Object]{@glossary Object} or an\n* [Array]{@glossary Array}. For objects, by default, properties will be scanned and\n* copied directly to the clone such that they would pass the\n* [hasOwnProperty()]{@glossary Object.hasOwnProperty} test. This is expensive and often not\n* required. In this case, the optional second parameter may be used to allow a more efficient\n* [copy]{@link Object.create} to be made.\n* \n* @param {(Object|Array)} base - The [Object]{@glossary Object} or\n*                              [Array]{@glossary Array} to be cloned.\n* @param {Boolean} [quick] - If `true`, when cloning objects, a faster [copy]{@link Object.create}\n*                          method will be used. This parameter has no meaning when cloning arrays.\n* @returns {*} A clone of the provided `base` if `base` is of the correct type; otherwise,\n*              returns `base` as it was passed in.\n* @public\n*/\nvar clone = exports.clone = function (base, quick) {\n\tif (base) {\n\t\t\n\t\t// avoid the overhead of calling yet another internal function to do type-checking\n\t\t// just copy the array and be done with it\n\t\tif (base instanceof Array) return base.slice();\n\t\telse if (base instanceof Object) {\n\t\t\treturn quick ? Object.create(base) : mixin({}, base);\n\t\t}\n\t}\n\t\n\t// we will only do this if it is not an array or native object\n\treturn base;\n};\n\nvar empty = {};\nvar mixinDefaults = {\n\texists: false,\n\tignore: false,\n\tfilter: null\n};\n\n/**\n\t@todo Rewrite with appropriate documentation for options parameter (typedef)\n\t@todo document 'quick' option\n\n\tWill take a variety of options to ultimately mix a set of properties\n\tfrom objects into single object. All configurations accept a boolean as\n\tthe final parameter to indicate whether or not to ignore _truthy_/_existing_\n\tvalues on any _objects_ prior.\n\n\tIf _target_ exists and is an object, it will be the base for all properties\n\tand the returned value. If the parameter is used but is _falsy_, a new\n\tobject will be created and returned. If no such parameter exists, the first\n\tparameter must be an array of objects and a new object will be created as\n\tthe _target_.\n\n\tThe _source_ parameter may be an object or an array of objects. If no\n\t_target_ parameter is provided, _source_ must be an array of objects.\n\n\tThe _options_ parameter allows you to set the _ignore_ and/or _exists_ flags\n\tsuch that if _ignore_ is true, it will not override any truthy values in the\n\ttarget, and if _exists_ is true, it will only use truthy values from any of\n\tthe sources. You may optionally add a _filter_ method-option that returns a\n\ttrue or false value to indicate whether the value should be used. It receives\n\tparameters in this order: _property_, _source value_, _source values_,\n\t_target_, _options_. Note that modifying the target in the filter method can\n\thave unexpected results.\n\n\tSetting _options_ to true will set all options to true.\n\n* @method enyo.mixin\n* @public\n*/\nvar mixin = exports.mixin = function () {\n\tvar ret = arguments[0],\n\t\tsrc = arguments[1],\n\t\topts = arguments[2],\n\t\tval;\n\t\n\tif (!ret) ret = {};\n\telse if (ret instanceof Array) {\n\t\topts = src;\n\t\tsrc = ret;\n\t\tret = {};\n\t}\n\t\n\tif (!opts || opts === true) opts = mixinDefaults;\n\n\tif (src instanceof Array) for (var i=0, it; (it=src[i]); ++i) mixin(ret, it, opts);\n\telse {\n\t\tfor (var key in src) {\n\t\t\tval = src[key];\n\t\t\t\n\t\t\t// quickly ensure the property isn't a default\n\t\t\tif (empty[key] !== val) {\n\t\t\t\tif (\n\t\t\t\t\t(!opts.exists || val) &&\n\t\t\t\t\t(!opts.ignore || !ret[key]) &&\n\t\t\t\t\t(opts.filter? opts.filter(key, val, src, ret, opts): true)\n\t\t\t\t) {\n\t\t\t\t\tret[key] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn ret;\n};\n\n/**\n* Returns an [array]{@glossary Array} of the values of all properties in an\n* [object]{@glossary Object}.\n*\n* @param {Object} obj - The [Object]{@glossary Object} to read the values from.\n* @returns {Array} An [array]{@glossary Array} with the values from the `obj`.\n* @public\n*/\nexports.values = function (obj) {\n\tvar ret = [];\n\tfor (var key in obj) {\n\t\tif (obj.hasOwnProperty(key)) ret.push(obj[key]);\n\t}\n\treturn ret;\n};\n\n// ----------------------------------\n// Array Functions\n// ----------------------------------\n\n/**\n* Because our older API parameters are not consistent with other array API methods, and also\n* because only [IE8 lacks integrated support]{@glossary polyfill} for\n* [indexOf()]{@linkcode external:Array.indexOf}, we ensure it is defined (only IE8) and advise,\n* moving forward, that the built-in method be used. But to preserve our original API, it will\n* simply call this method, knowing it exists.\n*\n* @private\n*/\nArray.prototype.indexOf = Array.prototype.indexOf || function (el, offset) {\n\tvar len = this.length >>> 0;\n\t\n\toffset = +offset || 0;\n\t\n\tif (Math.abs(offset) === Infinity) offset = 0;\n\tif (offset < 0) offset += len;\n\tif (offset < 0) offset = 0;\n\t\n\tfor (; offset < len; ++offset) {\n\t\tif (this[offset] === el) return offset;\n\t}\n\t\n\treturn -1;\n};\n\n/**\n* Because our older API parameters are not consistent with other array API methods, and also\n* because only [IE8 lacks integrated support]{@glossary polyfill} for\n* [lastIndexOf()]{@glossary Array.lastIndexOf} we ensure it is defined (only IE8) and\n* advise, moving forward, that the built-in method be used. But to preserve our original API, it\n* will simply call this method, knowing it exists.\n*\n* @private\n*/\nArray.prototype.lastIndexOf = Array.prototype.lastIndexOf || function (el, offset) {\n\tvar array = Object(this)\n\t\t, len = array.length >>> 0;\n\t\t\n\tif (len === 0) return -1;\n\t\n\tif (offset !== undefined) {\n\t\toffset = Number(offset);\n\t\tif (Math.abs(offset) > len) offset = len;\n\t\tif (offset === Infinity || offset === -Infinity) offset = len;\n\t\tif (offset < 0) offset += len;\n\t} else offset = len;\n\t\n\tfor (; offset > -1; --offset) {\n\t\tif (array[offset] === el) return offset;\n\t}\n\t\n\treturn -1;\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.findIndex()]{@glossary Array.findIndex}.\n*/\nArray.prototype.findIndex = Array.prototype.findIndex || function (fn, ctx) {\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tif (fn.call(ctx, this[i], i, this)) return i;\n\t}\n\treturn -1;\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.find()]{@glossary Array.find}.\n*/\nArray.prototype.find = Array.prototype.find || function (fn, ctx) {\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tif (fn.call(ctx, this[i], i, this)) return this[i];\n\t}\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.forEach()]{@glossary Array.forEach}.\n*/\nArray.prototype.forEach = Array.prototype.forEach || function (fn, ctx) {\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) fn.call(ctx, this[i], this);\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.map()]{@glossary Array.map}.\n*/\nArray.prototype.map = Array.prototype.map || function (fn, ctx) {\n\tvar ret = [];\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tret.push(fn.call(ctx, this[i], i, this));\n\t}\n\treturn ret;\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.filter()]{@glossary Array.filter}.\n*/\nArray.prototype.filter = Array.prototype.filter || function (fn, ctx) {\n\tvar ret = [];\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tfn.call(ctx, this[i], i, this) && ret.push(this[i]);\n\t}\n\treturn ret;\n};\n\n/**\n* An Enyo convenience method reference to [Array.indexOf()]{@glossary Array.indexOf}.\n* \n* This also supports the legacy Enyo argument order `el.indexOf(array, offset)` and can\n* differentiate between this and the standard `array.indexOf(el, offset)`.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.indexOf = function (array, el, offset) {\n\tif (!(array instanceof Array)) return el.indexOf(array, offset);\n\treturn array.indexOf(el, offset);\n};\n\n/**\n* An Enyo convenience method reference to [Array.lastIndexOf()]{@glossary Array.lastIndexOf}.\n* \n* This also supports the legacy Enyo argument order `el.lastIndexOf(array, offset)` and can\n* differentiate between this and the standard `array.lastIndexOf(el, offset)`.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.lastIndexOf = function (array, el, offset) {\n\tif (!(array instanceof Array)) return el.lastIndexOf(array, offset);\n\treturn array.lastIndexOf(el, offset);\n};\n\n/**\n* An Enyo convenience method reference to [Array.findIndex()]{@glossary Array.findIndex}.\n* \n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n* \n* @public\n*/\nexports.findIndex = function (array, fn, ctx) {\n\treturn array.findIndex(fn, ctx);\n};\n\n/**\n* An Enyo convenience method reference to [Array.find()]{@glossary Array.find}.\n* \n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n* \n* @method enyo.find\n* @public\n*/\nvar find = exports.find = function (array, fn, ctx) {\n\treturn array.find(fn, ctx);\n};\n\n/**\n* @alias enyo.find\n* @method enyo.where\n* @public\n*/\nexports.where = find;\n\n/**\n* An Enyo convenience method reference to [Array.forEach()]{@glossary Array.forEach}.\n* \n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n* \n* @public\n*/\nexports.forEach = function (array, fn, ctx) {\n\treturn array.forEach(fn, ctx);\n};\n\n/**\n* An Enyo convenience method reference to [Array.map()]{@glossary Array.map}.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.map = function (array, fn, ctx) {\n\treturn array.map(fn, ctx);\n};\n\n/**\n* An Enyo convenience method reference to [Array.filter()]{@glossary Array.filter}.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.filter = function (array, fn, ctx) {\n\treturn array.filter(fn, ctx);\n};\n\n/**\n* When given an [array]{@glossary Array} of [objects]{@glossary Object},\n* searches through the array's objects; each object with a property name matching\n* `prop` has its value for that property compiled into a result array, which is\n* eventually returned. For each array object that doesn't have a matching property,\n* an `undefined` placeholder element is added to the result array, such that the\n* returned result array has the same length as the passed-in `array` parameter.\n* \n* @param {Array} array - The [array]{@glossary Array} of [objects]{@glossary Object}\n*                      in which the `prop` will be searched for.\n* @param {String} prop - A string containing the name of the property to search for.\n* @returns {Array} An array of all the values of the named property from\n*                     objects contained in the `array`.\n* @public\n*/\nexports.pluck = function (array, prop) {\n\tif (!(array instanceof Array)) {\n\t\tvar tmp = array;\n\t\tarray = prop;\n\t\tprop = tmp;\n\t}\n\t\n\tvar ret = [];\n\tfor (var i=0, len=array.length >>> 0; i<len; ++i) {\n\t\tret.push(array[i]? array[i][prop]: undefined);\n\t}\n\treturn ret;\n};\n\n/**\n* Concatenates a variable number of [arrays]{@glossary Array}, removing any duplicate\n* entries.\n* \n* @returns {Array} The unique values from all [arrays]{@glossary Array}.\n* @public\n*/\nexports.merge = function (/* _arrays_ */) {\n\tvar ret = [],\n\t\tvalues = Array.prototype.concat.apply([], arguments);\n\tfor (var i=0, len=values.length >>> 0; i<len; ++i) {\n\t\tif (!~ret.indexOf(values[i])) ret.push(values[i]);\n\t}\n\treturn ret;\n};\n\n/**\n* Clones an existing [Array]{@glossary Array}, or converts an array-like\n* object into an Array.\n* \n* If `offset` is non-zero, the cloning starts from that index in the source\n* Array. The clone may be appended to an existing Array by passing in the\n* existing Array as `initialArray`.\n* \n* Array-like objects have `length` properties, and support square-bracket\n* notation `([])`. Array-like objects often do not support Array methods\n* such as `push()` or `concat()`, and so must be converted to Arrays before\n* use.\n* \n* The special `arguments` variable is an example of an array-like object.\n*\n* @public\n*/\nvar cloneArray = exports.cloneArray = function (array, offset, initialArray) {\n\tvar ret = initialArray || [];\n\tfor(var i = offset || 0, l = array.length; i<l; i++){\n\t\tret.push(array[i]);\n\t}\n\t// Alternate smarter implementation:\n\t// return Array.prototype.slice.call(array, offset);\n\t// Array.of\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of\n\treturn ret;\n};\n\n/**\n* @alias cloneArray\n* @method enyo.toArray\n* @public\n*/\nexports.toArray = cloneArray;\n\n/**\n* Within a given [array]{@glossary Array}, removes the first\n* [strictly equal to]{@glossary ===} occurrence of `el`.\n* Note that `array` is modified directly.\n*\n* @param {Array} array - The [Array]{@glossary Array} to look through.\n* @param {*} el - The element to search for and remove.\n* @public\n*/\nexports.remove = function (array, el) {\n\tif (!(array instanceof Array)) {\n\t\tvar tmp = array;\n\t\tarray = el;\n\t\tel = tmp;\n\t}\n\t\n\tvar i = array.indexOf(el);\n\tif (-1 < i) array.splice(i, 1);\n\treturn array;\n};\n\n/**\n* This regex pattern is used by the [enyo.isRtl()]{@link enyo.isRtl} function.\n* \n* Arabic: \\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFE\n* Hebrew: \\u0590-\\u05FF\\uFB1D-\\uFB4F\n* \n* @private\n*/\nvar rtlPattern = /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFE\\u0590-\\u05FF\\uFB1D-\\uFB4F]/;\n\n/**\n* Takes content `str` and determines whether or not it is [RTL]{@glossary RTL}.\n*\n* @param {String} str - A [String]{@glossary String} to check the [RTL]{@glossary RTL}-ness of.\n* @return {Boolean} `true` if `str` should be RTL; `false` if not.\n* @public\n*/\nexports.isRtl = function (str) {\n\treturn rtlPattern.test(str);\n};\n","require('../../enyo');\n\nvar\n\tStates = require('./States');\n\n/**\n* Provides generic API methods related to using {@link enyo.States}.\n*\n* @mixin enyo.StateSupport\n* @public\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'StateSupport',\n\t\n\t/**\n\t* The given status. This property will be modified by the other API methods of\n\t* {@link enyo.StateSupport}.\n\t*\n\t* @type enyo.States\n\t* @default null\n\t*/\n\tstatus: null,\n\t\n\t/**\n\t* Will remove any [error flags]{@link enyo.States.ERROR} from the given\n\t* [status]{@link enyo.StateSupport.status}.\n\t*\n\t* @public\n\t*/\n\tclearError: function () {\n\t\tthis.status = this.status & ~States.ERROR;\n\t},\n\t\n\t/**\n\t* Convenience method to avoid using [bitwise]{@glossary bitwise} comparison for the\n\t* [status]{@link enyo.StateSupport.status}. Determines whether the current status\n\t* (or the optional passed-in value) is an [error state]{@link enyo.States.ERROR}.\n\t* The passed-in value will only be used if it is a [Number]{@glossary Number}.\n\t*\n\t* @param {enyo.States} [status] - The specific value to compare as an\n\t*\t[error state]{@link enyo.States.ERROR}.\n\t* @returns {Boolean} Whether the value is an [error state]{@link enyo.States.ERROR} or not.\n\t* @public\n\t*/\n\tisError: function (status) {\n\t\treturn !! ((isNaN(status) ? this.status : status) & States.ERROR);\n\t},\n\t\n\t/**\n\t* Convenience method to avoid using [bitwise]{@glossary bitwise} comparison for the\n\t* [status]{@link enyo.StateSupport.status}. Determines whether the current status\n\t* (or the optional passed-in value) is a [busy state]{@link enyo.States.BUSY}. The\n\t* passed-in value will only be used if it is a [Number]{@glossary Number}.\n\t*\n\t* @param {enyo.States} [status] - The specific value to compare as a\n\t*\t[busy state]{@link enyo.States.BUSY}.\n\t* @returns {Boolean} Whether the value is a [busy state]{@link enyo.States.BUSY} or not.\n\t* @public\n\t*/\n\tisBusy: function (status) {\n\t\treturn !! ((isNaN(status) ? this.status : status) & States.BUSY);\n\t},\n\t\n\t/**\n\t* Convenience method to avoid using [bitwise]{@glossary bitwise} comparison for the\n\t* [status]{@link enyo.StateSupport.status}. Determines whether the current status\n\t* (or the optional passed-in value) is a [ready state]{@link enyo.States.READY}. The\n\t* passed-in value will only be used if it is a [Number]{@glossary Number}.\n\t*\n\t* @param {enyo.States} [status] - The specific value to compare as a\n\t*\t[ready state]{@link enyo.States.READY}.\n\t* @returns {Boolean} Whether the value is a [ready state]{@link enyo.States.BUSY} or not.\n\t* @public\n\t*/\n\tisReady: function (status) {\n\t\treturn !! ((isNaN(status) ? this.status : status) & States.READY);\n\t}\n};","var\n    roots = require('../../enyo/lib/roots');\n\n/**\n* {@link enyo.Spotlight.TestMode} is a collection of Spotlight utilities for use\n* in testing.\n*\n* @typedef {Object} enyo.Spotlight.TestMode definition\n*\n* @class enyo.Spotlight.TestMode\n* @public\n*/\nvar TestMode = module.exports = function () {\n\n    /********************* PRIVATE ********************/\n\n    var _aNodes = [],\n        _bEnabled = false;\n\n    var\n\n        /**\n        * Destroys all highlight elements.\n        *\n        * @type {Function}\n        * @private\n        */\n        _destroyExistingHighlightNodes = function() {\n            var n;\n            for (n = 0; n < _aNodes.length; n++) {\n                if (_aNodes[n]) {\n                    _aNodes[n].destroy();\n                }\n            }\n            _aNodes = [];\n        },\n\n        /**\n        * Highlights the current spotted control and adds it to `_aNodes`.\n        *\n        * @private\n        */\n        _highlightCurrentControl = function() {\n            _aNodes.push(_addConrolHighlightNode({\n                control: Spotlight.getCurrent(),\n                str: 'C'\n            }));\n        },\n\n        /**\n        * Highlights controls adjacent to the current spotted control and adds\n        * them to `_aNodes`.\n        *\n        * @private\n        */\n        _highlightAdjacentControls = function() {\n            if (!Spotlight.getCurrent()) {\n                return;\n            }\n            var controls = _removeDuplicateHighlightNodes([{\n                control: Spotlight.NearestNeighbor.getNearestNeighbor('UP'),\n                str: 'U'\n            }, {\n                control: Spotlight.NearestNeighbor.getNearestNeighbor('DOWN'),\n                str: 'D'\n            }, {\n                control: Spotlight.NearestNeighbor.getNearestNeighbor('LEFT'),\n                str: 'L'\n            }, {\n                control: Spotlight.NearestNeighbor.getNearestNeighbor('RIGHT'),\n                str: 'R'\n            }]);\n\n            for (var i = 0; i < controls.length; i++) {\n                if (!controls[i]) {\n                    continue;\n                }\n                _aNodes.push(_addConrolHighlightNode(controls[i]));\n            }\n        },\n\n        /**\n        * Combines duplicate highlight nodes (created for the same control).\n        * This happens when a given control can be reached via multiple 5-way\n        * directions (e.g., up and left).\n        *\n        * @private\n        */\n        _removeDuplicateHighlightNodes = function(inControls) {\n            var returnControls = [],\n                dupeOf = -1;\n\n            for (var i = 0; i < inControls.length; i++) {\n                dupeOf = -1;\n\n                for (var j = 0; j < inControls.length; j++) {\n                    if (inControls[i].control === inControls[j].control && inControls[i].str !== inControls[j].str) {\n                        dupeOf = j;\n                        break;\n                    }\n                }\n\n                if (dupeOf > -1) {\n                    inControls[i].str += ',' + inControls[dupeOf].str;\n                    inControls.splice(dupeOf, 1);\n                }\n\n                returnControls.push(inControls[i]);\n            }\n\n            return returnControls;\n        },\n\n        /**\n        * Creates a new control with styling to highlight current or adjacent\n        * Spotlight nodes.\n        *\n        * @private\n        */\n        _addConrolHighlightNode = function(inObj) {\n            if (!inObj || !inObj.control || !inObj.control.hasNode()) {\n                return null;\n            }\n\n            var bounds = Spotlight.Util.getAbsoluteBounds(inObj.control),\n                className = (inObj.str === 'C') ? 'spotlight-current-item' : 'spotlight-adjacent-item',\n                highlightNode = roots[0].createComponent({\n                    classes: 'spotlight-highlight ' + className,\n                    style: 'height:' + bounds.height + 'px;width:' + bounds.width + 'px;top:' + bounds.top + 'px;left:' + bounds.left + 'px;line-height:' + bounds.height + 'px;',\n                    content: inObj.str\n                });\n\n            highlightNode.render();\n\n            return highlightNode;\n        };\n\n    /**\n    * Enables test mode.\n    *\n    * @public\n    */\n    this.enable = function() {\n        _bEnabled = true;\n        this.highlight();\n    };\n\n    /**\n    * Disables test mode.\n    *\n    * @public\n    */\n    this.disable = function() {\n        _bEnabled = false;\n        _destroyExistingHighlightNodes();\n    };\n\n    /**\n    * Destroys existing highlight nodes and highlights the currently spotted\n    * control and adjacent controls.\n    *\n    * @public\n    */\n    this.highlight = function() {\n        if (!_bEnabled) {\n            return;\n        }\n        _destroyExistingHighlightNodes();\n        _highlightCurrentControl();\n        _highlightAdjacentControls();\n    };\n\n    /**\n    * Determines whether test mode is enabled.\n    *\n    * @returns {Boolean} `true` if test mode is enabled; otherwise, `false`.\n    * @public\n    */\n    this.isEnabled = function() {\n        return _bEnabled;\n    };\n};\n","require('../../enyo');\n\nvar\n\tutils = require('./utils');\n\nvar\n\teventTable = {};\n\n/**\n* @private\n*/\nfunction addListener(obj, e, fn, ctx) {\n\n\tobj.listeners().push({\n\t\tevent: e,\n\t\tmethod: fn,\n\t\tctx: ctx || obj\n\t});\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction removeListener(obj, e, fn, ctx) {\n\tvar listeners = obj.listeners()\n\t\t, idx;\n\t\t\n\tif (listeners.length) {\n\t\tidx = listeners.findIndex(function (ln) {\n\t\t\treturn ln.event == e && ln.method === fn && (ctx? ln.ctx === ctx: true);\n\t\t});\n\t\tidx >= 0 && listeners.splice(idx, 1);\n\t}\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction emit(obj, args) {\n\tvar len = args.length\n\t\t, e = args[0]\n\t\t, listeners = obj.listeners(e);\n\t\t\n\tif (listeners.length) {\n\t\tif (len > 1) {\n\t\t\targs = utils.toArray(args);\n\t\t\targs.unshift(obj);\n\t\t} else {\n\t\t\targs = [obj, e];\n\t\t}\n\n\t\tfor (var i=0, ln; (ln=listeners[i]); ++i) ln.method.apply(ln.ctx, args);\n\t\t\n\t\treturn true;\n\t}\n\t\n\treturn false;\n}\n\n/**\n* {@link enyo.EventEmitter} is a {@glossary mixin} that adds support for\n* registered {@glossary event} listeners. These events are different from\n* bubbled events (e.g., DOM events and [handlers]{@link enyo.Component#handlers}).\n* When [emitted]{@link enyo.EventEmitter#emit}, these events **do not bubble**\n* and will only be handled by [registered listeners]{@link enyo.EventEmitter#on}.\n*\n* @mixin enyo.EventEmitter\n* @public\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'EventEmitter',\n\t\n\t/**\n\t* @private\n\t*/\n\t_silenced: false,\n\t\n\t/**\n\t* @private\n\t*/\n\t_silenceCount: 0,\n\t\n\t/**\n\t* Disables propagation of [events]{@glossary event}. This is a counting\n\t* semaphor and [unsilence()]{@link enyo.EventEmitter#unsilence} will need to\n\t* be called the same number of times that this method is called.\n\t*\n\t* @see enyo.EventEmitter.unsilence\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsilence: function () {\n\t\tthis._silenced = true;\n\t\tthis._silenceCount++;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Enables propagation of [events]{@glossary event}. This is a counting\n\t* semaphor and this method will need to be called the same number of times\n\t* that [silence()]{@link enyo.EventEmitter#silence} was called.\n\t*\n\t* @see enyo.EventEmitter.silence\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tunsilence: function (force) {\n\t\tif (force) {\n\t\t\tthis._silenceCount = 0;\n\t\t\tthis._silenced = false;\n\t\t} else {\n\t\t\tthis._silenceCount && this._silenceCount--;\n\t\t\tthis._silenceCount === 0 && (this._silenced = false);\n\t\t}\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Determines whether the callee is currently [silenced]{@link enyo.EventEmitter#silence}.\n\t*\n\t* @returns {Boolean} Whether or not the callee is\n\t*\t[silenced]{@link enyo.EventEmitter.silence}.\n\t* @public\n\t*/\n\tisSilenced: function () {\n\t\treturn this._silenced;\n\t},\n\t\n\t/**\n\t* @alias enyo.EventEmitter.on\n\t* @deprecated\n\t* @public\n\t*/\n\taddListener: function (e, fn, ctx) {\n\t\treturn addListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* Adds an {@glossary event} listener. Until [removed]{@link enyo.EventEmitter#off},\n\t* this listener will fire every time the event is\n\t* [emitted]{@link enyo.EventEmitter#emit}.\n\t*\n\t* @param {String} e - The {@glossary event} name to register for.\n\t* @param {Function} fn - The listener.\n\t* @param {Object} [ctx] - The optional context under which to execute the listener.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\ton: function (e, fn, ctx) {\n\t\treturn addListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* @alias enyo.EventEmitter.off\n\t* @deprecated\n\t* @public\n\t*/\n\tremoveListener: function (e, fn, ctx) {\n\t\treturn removeListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* Removes an {@glossary event} listener.\n\t*\n\t* @param {String} e - The {@glossary event} name.\n\t* @param {Function} fn - The listener to unregister.\n\t* @param {Object} [ctx] - If the listener was registered with a context, it\n\t* should be provided when unregistering as well.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\toff: function (e, fn, ctx) {\n\t\treturn removeListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* Removes all listeners, or all listeners for a given {@glossary event}.\n\t*\n\t* @param {String} [e] - The optional target {@glossary event}.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tremoveAllListeners: function (e) {\n\t\tvar euid = this.euid\n\t\t\t, loc = euid && eventTable[euid];\n\t\t\n\t\tif (loc) {\n\t\t\tif (e) {\n\t\t\t\teventTable[euid] = loc.filter(function (ln) {\n\t\t\t\t\treturn ln.event != e;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\teventTable[euid] = null;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Primarily intended for internal use, this method returns an immutable copy\n\t* of all listeners, or all listeners for a particular {@glossary event} (if any).\n\t*\n\t* @param {String} [e] - The targeted {@glossary event}.\n\t* @returns {Object[]} Event listeners are stored in [hashes]{@glossary Object}.\n\t*\tThe return value will be an [array]{@glossary Array} of these hashes\n\t* if any listeners exist.\n\t* @public\n\t*/\n\tlisteners: function (e) {\n\t\tvar euid = this.euid || (this.euid = utils.uid('e'))\n\t\t\t, loc = eventTable[euid] || (eventTable[euid] = []);\n\t\t\n\t\treturn !e? loc: loc.filter(function (ln) {\n\t\t\treturn ln.event == e || ln.event == '*';\n\t\t});\n\t},\n\t\n\t/**\n\t* @alias enyo.EventEmitter.emit\n\t* @deprecated\n\t* @public\n\t*/\n\ttriggerEvent: function () {\n\t\treturn !this._silenced? emit(this, arguments): false;\n\t},\n\t\n\t/**\n\t* Emits the named {@glossary event}. All subsequent arguments will be passed\n\t* to the event listeners.\n\t*\n\t* @param {String} e - The {@glossary event} to emit.\n\t* @param {...*} args All subsequent arguments will be passed to the event listeners.\n\t* @returns {Boolean} Whether or not any listeners were notified.\n\t* @public\n\t*/\n\temit: function () {\n\t\treturn !this._silenced? emit(this, arguments): false;\n\t}\n};","require('../../enyo');\n\nvar utils = require('./utils');\n\n/**\n* Determines OS versions of platforms that need special treatment. Can have one of the following\n* properties:\n*\n* * android\n* * androidChrome (Chrome on Android, standard starting in 4.1)\n* * androidFirefox\n* * ie\n* * ios\n* * webos\n* * windowsPhone\n* * blackberry\n* * tizen\n* * safari (desktop version)\n* * chrome (desktop version)\n* * firefox (desktop version)\n* * firefoxOS\n*\n* If the property is defined, its value will be the major version number of the platform.\n*\n* Example:\n* ```javascript\n* // android 2 does not have 3d css\n* if (enyo.platform.android < 3) {\n* \tt = 'translate(30px, 50px)';\n* } else {\n* \tt = 'translate3d(30px, 50px, 0)';\n* }\n* this.applyStyle('-webkit-transform', t);\n* ```\n*\n* @name enyo.platform\n*/\nexports = module.exports = \n\t/** @lends enyo.platform */ {\n\t//* `true` if the platform has native single-finger [events]{@glossary event}.\n\ttouch: Boolean(('ontouchstart' in window) || window.navigator.msMaxTouchPoints),\n\t//* `true` if the platform has native double-finger [events]{@glossary event}.\n\tgesture: Boolean(('ongesturestart' in window) || window.navigator.msMaxTouchPoints)\n};\n\n/**\n* @private\n*/\nvar ua = navigator.userAgent;\nvar ep = exports;\nvar platforms = [\n\t// Android 4+ using Chrome\n\t{platform: 'androidChrome', regex: /Android .* Chrome\\/(\\d+)[.\\d]+/},\n\t// Android 2 - 4\n\t{platform: 'android', regex: /Android (\\d+)/},\n\t// Kindle Fire\n\t// Force version to 2, (desktop mode does not list android version)\n\t{platform: 'android', regex: /Silk\\/1./, forceVersion: 2, extra: {silk: 1}},\n\t// Kindle Fire HD (Silk versions 2 or 3)\n\t// Force version to 4\n\t{platform: 'android', regex: /Silk\\/2./, forceVersion: 4, extra: {silk: 2}},\n\t{platform: 'android', regex: /Silk\\/3./, forceVersion: 4, extra: {silk: 3}},\n\t// Windows Phone 7 - 8\n\t{platform: 'windowsPhone', regex: /Windows Phone (?:OS )?(\\d+)[.\\d]+/},\n\t// IE 8 - 10\n\t{platform: 'ie', regex: /MSIE (\\d+)/},\n\t// IE 11\n\t{platform: 'ie', regex: /Trident\\/.*; rv:(\\d+)/},\n\t// iOS 3 - 5\n\t// Apple likes to make this complicated\n\t{platform: 'ios', regex: /iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/},\n\t// webOS 1 - 3\n\t{platform: 'webos', regex: /(?:web|hpw)OS\\/(\\d+)/},\n\t// webOS 4 / OpenWebOS\n\t{platform: 'webos', regex: /WebAppManager|Isis|webOS\\./, forceVersion: 4},\n\t// Open webOS release LuneOS\n\t{platform: 'webos', regex: /LuneOS/, forceVersion: 4, extra: {luneos: 1}},\n\t// desktop Safari\n\t{platform: 'safari', regex: /Version\\/(\\d+)[.\\d]+\\s+Safari/},\n\t// desktop Chrome\n\t{platform: 'chrome', regex: /Chrome\\/(\\d+)[.\\d]+/},\n\t// Firefox on Android\n\t{platform: 'androidFirefox', regex: /Android;.*Firefox\\/(\\d+)/},\n\t// FirefoxOS\n\t{platform: 'firefoxOS', regex: /Mobile;.*Firefox\\/(\\d+)/},\n\t// desktop Firefox\n\t{platform: 'firefox', regex: /Firefox\\/(\\d+)/},\n\t// Blackberry Playbook\n\t{platform: 'blackberry', regex: /PlayBook/i, forceVersion: 2},\n\t// Blackberry 10+\n\t{platform: 'blackberry', regex: /BB1\\d;.*Version\\/(\\d+\\.\\d+)/},\n\t// Tizen\n\t{platform: 'tizen', regex: /Tizen (\\d+)/}\n];\nfor (var i = 0, p, m, v; (p = platforms[i]); i++) {\n\tm = p.regex.exec(ua);\n\tif (m) {\n\t\tif (p.forceVersion) {\n\t\t\tv = p.forceVersion;\n\t\t} else {\n\t\t\tv = Number(m[1]);\n\t\t}\n\t\tep[p.platform] = v;\n\t\tif (p.extra) {\n\t\t\tutils.mixin(ep, p.extra);\n\t\t}\n\t\tep.platformName = p.platform;\n\t\tbreak;\n\t}\n}\n","var\n\tutils = require('../../enyo/lib/utils'),\n\toptions = require('../../enyo/lib/options');\n\nvar config = global.moon && global.moon.config;\n\n/**\n* Global *design-time* configuration options for Moonstone\n*\n* @param {Boolean} Set accelerate `false` to prefer position properties over CSS transforms.\n* @type {Object}\n*/\nmodule.exports = utils.mixin({\n\taccelerate: true\n}, options, config);","require('../../enyo');\n\nvar\n\tplatform = require('./platform'),\n\tutils = require('./utils');\n\nvar ms = Math.round(1000/60);\nvar prefix = ['webkit', 'moz', 'ms', 'o', ''];\nvar r = 'requestAnimationFrame';\nvar c = 'cancel' + utils.cap(r);\n\n/*\n* Fallback on setTimeout\n*\n* @private\n*/\nvar _requestFrame = function(inCallback) {\n\treturn global.setTimeout(inCallback, ms);\n};\n\n/*\n* Fallback on clearTimeout\n*\n* @private\n*/\nvar _cancelFrame = function(inId) {\n\treturn global.clearTimeout(inId);\n};\n\nfor (var i = 0, pl = prefix.length, p, wc, wr; (p = prefix[i]) || i < pl; i++) {\n\t// if we're on ios 6 just use setTimeout, requestAnimationFrame has some kinks currently\n\tif (platform.ios >= 6) {\n\t\tbreak;\n\t}\n\n\t// if prefixed, becomes Request and Cancel\n\twc = p ? (p + utils.cap(c)) : c;\n\twr = p ? (p + utils.cap(r)) : r;\n\t// Test for cancelRequestAnimationFrame, because some browsers (Firefix 4-10) have a request without a cancel\n\tif (global[wc]) {\n\t\t_cancelFrame = global[wc];\n\t\t_requestFrame = global[wr];\n\t\tif (p == 'webkit') {\n\t\t\t/*\n\t\t\t\tNote: In Chrome, the first return value of webkitRequestAnimationFrame is 0.\n\t\t\t\tWe make 1 bogus call so the first used return value of webkitRequestAnimationFrame is > 0, as the spec requires.\n\t\t\t\tThis makes it so that the requestId is always truthy.\n\t\t\t\t(we choose to do this rather than wrapping the native function to avoid the overhead)\n\t\t\t*/\n\t\t\t_cancelFrame(_requestFrame(utils.nop));\n\t\t}\n\t\tbreak;\n\t}\n}\n/**\n* Requests an animation callback.\n*\n* On compatible browsers, if `node` is defined, the [callback]{@glossary callback} will\n* fire only if `node` is visible.\n*\n* @param {Function} callback - A [callback]{@glossary callback} to be executed on the\n*                            animation frame.\n* @param {Node} node - The DOM node to request the animation frame for.\n* @returns {Object} A request id to be used with\n*                     [enyo.cancelRequestAnimationFrame()]{@link enyo.cancelRequestAnimationFrame}.\n* @public\n*/\nexports.requestAnimationFrame = function(callback, node) {\n\treturn _requestFrame(callback, node);\n};\n/**\n* Cancels a requested animation callback with the specified id.\n*\n* @public\n*/\nexports.cancelRequestAnimationFrame = function(inId) {\n\treturn _cancelFrame(inId);\n};\n\n/**\n* A set of interpolation functions for animations, similar in function to CSS3\n* transitions.\n*\n* These are intended for use with {@link enyo.easedLerp}. Each easing function\n* accepts one (1) [Number]{@glossary Number} parameter and returns one (1)\n* [Number]{@glossary Number} value.\n*\n* @namespace enyo.easing\n* @public\n*/\nexports.easing = /** @lends enyo.easing */ {\n\t/**\n\t* cubicIn\n\t*\n\t* @public\n\t*/\n\tcubicIn: function(n) {\n\t\treturn Math.pow(n, 3);\n\t},\n\t/**\n\t* cubicOut\n\t*\n\t* @public\n\t*/\n\tcubicOut: function(n) {\n\t\treturn Math.pow(n - 1, 3) + 1;\n\t},\n\t/**\n\t* expoOut\n\t*\n\t* @public\n\t*/\n\texpoOut: function(n) {\n\t\treturn (n == 1) ? 1 : (-1 * Math.pow(2, -10 * n) + 1);\n\t},\n\t/**\n\t* quadInOut\n\t*\n\t* @public\n\t*/\n\tquadInOut: function(n) {\n\t\tn = n * 2;\n\t\tif (n < 1) {\n\t\t\treturn Math.pow(n, 2) / 2;\n\t\t}\n\t\treturn -1 * ((--n) * (n - 2) - 1) / 2;\n\t},\n\t/**\n\t* linear\n\t*\n\t* @public\n\t*/\n\tlinear: function(n) {\n\t\treturn n;\n\t}\n};\n\n/**\n* Gives an interpolation of an animated transition's distance from 0 to 1.\n*\n* Given a start time (`t0`) and an animation duration (`duration`), this\n* method applies the `easing` function to the percentage of time elapsed\n* divided by duration, capped at 100%.\n*\n* @param {Number} t0 - Start time.\n* @param {Number} duration - Duration in milliseconds.\n* @param {Function} easing - An easing [function]{@glossary Function} reference from\n*\t{@link enyo.easing}.\n* @param {Boolean} reverse - Whether the animation will run in reverse.\n* @returns {Number} The resulting position, capped at a maximum of 100%.\n* @public\n*/\nexports.easedLerp = function(t0, duration, easing, reverse) {\n\tvar lerp = (utils.perfNow() - t0) / duration;\n\tif (reverse) {\n\t\treturn lerp >= 1 ? 0 : (1 - easing(1 - lerp));\n\t} else {\n\t\treturn lerp >= 1 ? 1 : easing(lerp);\n\t}\n};\n\n/**\n* Gives an interpolation of an animated transition's distance from\n* `startValue` to `valueChange`.\n*\n* Applies the `easing` function with a wider range of variables to allow for\n* more complex animations.\n*\n* @param {Number} t0 - Start time.\n* @param {Number} duration - Duration in milliseconds.\n* @param {Function} easing - An easing [function]{@glossary Function} reference from\n*\t{@link enyo.easing}.\n* @param {Boolean} reverse - Whether the animation will run in reverse.\n* @param {Number} time\n* @param {Number} startValue - Starting value.\n* @param {Number} valueChange\n* @returns {Number} The resulting position, capped at a maximum of 100%.\n* @public\n*/\nexports.easedComplexLerp = function(t0, duration, easing, reverse, time, startValue, valueChange) {\n\tvar lerp = (utils.perfNow() - t0) / duration;\n\tif (reverse) {\n\t\treturn easing(1 - lerp, time, startValue, valueChange, duration);\n\t} else {\n\t\treturn easing(lerp, time, startValue, valueChange, duration);\n\t}\n};","require('../../enyo');\n\nvar\n\troots = require('./roots'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\n\n/**\n* @namespace enyo.dom\n*/\nvar dom = module.exports =\n\t/** @lends enyo.dom */ {\n\n\t/**\n\t* Shortcut for `document.getElementById()` if `id` is a string; otherwise,\n\t* returns `id`. Uses `global.document` unless a document is specified in the\n\t* (optional) `doc` parameter.\n\t*\n\t* ```javascript\n\t* // find 'node' if it's a string id, or return it unchanged if it's already a node reference\n\t* var domNode = enyo.dom.byId(node);\n\t* ```\n\t*\n\t* @param {String} id - The document element ID to get.\n\t* @param {Node} [doc] - A [node]{@glossary Node} to search in. Default is the whole\n\t*\tdocument.\n\t* @returns {Element} A reference to a DOM element.\n\t* @public\n\t*/\n\tbyId: function(id, doc){\n\t\treturn (typeof id == 'string') ? (doc || document).getElementById(id) : id;\n\t},\n\n\t/**\n\t* Returns a string with ampersand, less-than, and greater-than characters replaced with HTML\n\t* entities, e.g.,\n\t* ```\n\t* '&lt;code&gt;'This &amp; That'&lt;/code&gt;'\n\t* ```\n\t* becomes\n\t* ```\n\t* '&amp;lt;code&amp;gt;'This &amp;amp; That'&amp;lt;/code&amp;gt;'\n\t* ```\n\t*\n\t* @param {String} text - A string with entities you'd like to escape/convert.\n\t* @returns {String} A string that is properly escaped (the above characters.)\n\t* @public\n\t*/\n\tescape: function(text) {\n\t\treturn text !== null ? String(text).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;') : '';\n\t},\n\n\t/**\n\t* Returns an object describing the geometry of this node.\n\t*\n\t* @param {Node} n - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `left`,\n\t* `height`, and `width`.\n\t* @public\n\t*/\n\tgetBounds: function(n) {\n\t\tif (n) {\n\t\t\treturn {left: n.offsetLeft, top: n.offsetTop, width: n.offsetWidth, height: n.offsetHeight};\n\t\t}\n\t\telse {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t* This is designed to be copied into the `computedStyle` object.\n\t*\n\t* @private\n\t*/\n\t_ie8GetComputedStyle: function(prop) {\n\t\tvar re = /(\\-([a-z]){1})/g;\n\t\tif (prop === 'float') {\n\t\t\tprop = 'styleFloat';\n\t\t} else if (re.test(prop)) {\n\t\t\tprop = prop.replace(re, function () {\n\t\t\t\treturn arguments[2].toUpperCase();\n\t\t\t});\n\t\t}\n\t\treturn this[prop] !== undefined ? this[prop] : null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetComputedStyle: function(node) {\n\t\tif(platform.ie < 9 && node && node.currentStyle) {\n\t\t\t//simple global.getComputedStyle polyfill for IE8\n\t\t\tvar computedStyle = utils.clone(node.currentStyle);\n\t\t\tcomputedStyle.getPropertyValue = this._ie8GetComputedStyle;\n\t\t\tcomputedStyle.setProperty = function() {\n\t\t\t\treturn node.currentStyle.setExpression.apply(node.currentStyle, arguments);\n\t\t\t};\n\t\t\tcomputedStyle.removeProperty = function() {\n\t\t\t\treturn node.currentStyle.removeAttribute.apply(node.currentStyle, arguments);\n\t\t\t};\n\t\t\treturn computedStyle;\n\t\t} else {\n\t\t\treturn global.getComputedStyle && node && global.getComputedStyle(node, null);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetComputedStyleValue: function(node, property, computedStyle) {\n\t\tvar s   = computedStyle || this.getComputedStyle(node),\n\t\t\tnIE = platform.ie;\n\n\t\ts = s ? s.getPropertyValue(property) : null;\n\n\t\tif (nIE) {\n\t\t\tvar oConversion = {\n\t\t\t\t'thin'   : (nIE > 8 ? 2 : 1) + 'px',\n\t\t\t\t'medium' : (nIE > 8 ? 4 : 3) + 'px',\n\t\t\t\t'thick'  : (nIE > 8 ? 6 : 5) + 'px',\n\t\t\t\t'none'   : '0'\n\t\t\t};\n\t\t\tif (typeof oConversion[s] != 'undefined') {\n\t\t\t\ts = oConversion[s];\n\t\t\t}\n\n\t\t\tif (s == 'auto') {\n\t\t\t\tswitch (property) {\n\t\t\t\tcase 'width':\n\t\t\t\t\ts = node.offsetWidth;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'height':\n\t\t\t\t\ts = node.offsetHeight;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn s;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetFirstElementByTagName: function(tagName) {\n\t\tvar e = document.getElementsByTagName(tagName);\n\t\treturn e && e[0];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyBodyFit: function() {\n\t\tvar h = this.getFirstElementByTagName('html');\n\t\tif (h) {\n\t\t\tthis.addClass(h, 'enyo-document-fit');\n\t\t}\n\t\tdom.addBodyClass('enyo-body-fit');\n\t\tdom.bodyIsFitting = true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetWindowWidth: function() {\n\t\tif (global.innerWidth) {\n\t\t\treturn global.innerWidth;\n\t\t}\n\t\tif (document.body && document.body.offsetWidth) {\n\t\t\treturn document.body.offsetWidth;\n\t\t}\n\t\tif (document.compatMode=='CSS1Compat' &&\n\t\t\tdocument.documentElement &&\n\t\t\tdocument.documentElement.offsetWidth ) {\n\t\t\treturn document.documentElement.offsetWidth;\n\t\t}\n\t\treturn 320;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetWindowHeight: function() {\n\t\tif (global.innerHeight) {\n\t\t\treturn global.innerHeight;\n\t\t}\n\t\tif (document.body && document.body.offsetHeight) {\n\t\t\treturn document.body.offsetHeight;\n\t\t}\n\t\tif (document.compatMode=='CSS1Compat' &&\n\t\t\tdocument.documentElement &&\n\t\t\tdocument.documentElement.offsetHeight ) {\n\t\t\treturn document.documentElement.offsetHeight;\n\t\t}\n\t\treturn 480;\n\t},\n\n\t/**\n\t* The proportion by which the `body` tag differs from the global size, in both X and Y\n\t* dimensions. This is relevant when we need to scale the whole interface down from 1920x1080\n\t* (1080p) to 1280x720 (720p), for example.\n\t*\n\t* @private\n\t*/\n\t_bodyScaleFactorY: 1,\n\t_bodyScaleFactorX: 1,\n\tupdateScaleFactor: function() {\n\t\tvar bodyBounds = this.getBounds(document.body);\n\t\tthis._bodyScaleFactorY = bodyBounds.height / this.getWindowHeight();\n\t\tthis._bodyScaleFactorX = bodyBounds.width / this.getWindowWidth();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t// Workaround for lack of compareDocumentPosition support in IE8\n\t// Code MIT Licensed, John Resig; source: http://ejohn.org/blog/comparing-document-position/\n\tcompareDocumentPosition: function(a, b) {\n\t\treturn a.compareDocumentPosition ?\n\t\ta.compareDocumentPosition(b) :\n\t\ta.contains ?\n\t\t\t(a != b && a.contains(b) && 16) +\n\t\t\t(a != b && b.contains(a) && 8) +\n\t\t\t(a.sourceIndex >= 0 && b.sourceIndex >= 0 ?\n\t\t\t\t(a.sourceIndex < b.sourceIndex && 4) +\n\t\t\t\t(a.sourceIndex > b.sourceIndex && 2) :\n\t\t\t\t1) +\n\t\t\t0 :\n\t\t\t0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t// moved from FittableLayout.js into common protected code\n\t_ieCssToPixelValue: function(node, value) {\n\t\tvar v = value;\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\t\tvar s = node.style;\n\t\t// store style and runtime style values\n\t\tvar l = s.left;\n\t\tvar rl = node.runtimeStyle && node.runtimeStyle.left;\n\t\t// then put current style in runtime style.\n\t\tif (rl) {\n\t\t\tnode.runtimeStyle.left = node.currentStyle.left;\n\t\t}\n\t\t// apply given value and measure its pixel value\n\t\ts.left = v;\n\t\tv = s.pixelLeft;\n\t\t// finally restore previous state\n\t\ts.left = l;\n\t\tif (rl) {\n\t\t\ts.runtimeStyle.left = rl;\n\t\t}\n\t\treturn v;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_pxMatch: /px/i,\n\tgetComputedBoxValue: function(node, prop, boundary, computedStyle) {\n\t\tvar s = computedStyle || this.getComputedStyle(node);\n\t\tif (s && (!platform.ie || platform.ie >= 9)) {\n\t\t\tvar p = s.getPropertyValue(prop + '-' + boundary);\n\t\t\treturn p === 'auto' ? 0 : parseInt(p, 10);\n\t\t} else if (node && node.currentStyle) {\n\t\t\tvar v = node.currentStyle[prop + utils.cap(boundary)];\n\t\t\tif (!v.match(this._pxMatch)) {\n\t\t\t\tv = this._ieCssToPixelValue(node, v);\n\t\t\t}\n\t\t\treturn parseInt(v, 0);\n\t\t}\n\t\treturn 0;\n\t},\n\n\t/**\n\t* Gets the boundaries of a [node's]{@glossary Node} `margin` or `padding` box.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @param {Node} box - The boundary to measure from ('padding' or 'margin').\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\n\t*\t`left`.\n\t* @public\n\t*/\n\tcalcBoxExtents: function(node, box) {\n\t\tvar s = this.getComputedStyle(node);\n\t\treturn {\n\t\t\ttop: this.getComputedBoxValue(node, box, 'top', s),\n\t\t\tright: this.getComputedBoxValue(node, box, 'right', s),\n\t\t\tbottom: this.getComputedBoxValue(node, box, 'bottom', s),\n\t\t\tleft: this.getComputedBoxValue(node, box, 'left', s)\n\t\t};\n\t},\n\n\t/**\n\t* Gets the calculated padding of a node. Shortcut for\n\t* [enyo.dom.calcBoxExtents()]{@link enyo.dom.calcBoxExtents}.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\n\t*\t`left`.\n\t* @public\n\t*/\n\tcalcPaddingExtents: function(node) {\n\t\treturn this.calcBoxExtents(node, 'padding');\n\t},\n\n\t/**\n\t* Gets the calculated margin of a node. Shortcut for\n\t* [enyo.dom.calcBoxExtents()]{@link enyo.dom.calcBoxExtents}.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\n\t*\t`left`.\n\t* @public\n\t*/\n\tcalcMarginExtents: function(node) {\n\t\treturn this.calcBoxExtents(node, 'margin');\n\t},\n\t/**\n\t* Returns an object like `{top: 0, left: 0, bottom: 100, right: 100, height: 10, width: 10}`\n\t* that represents the object's position relative to `relativeToNode` (suitable for absolute\n\t* positioning within that parent node). Negative values mean part of the object is not\n\t* visible. If you leave `relativeToNode` as `undefined` (or it is not a parent element), then\n\t* the position will be relative to the viewport and suitable for absolute positioning in a\n\t* floating layer.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @param {Node} relativeToNode - The [node]{@glossary Node} to measure the distance from.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, `left`,\n\t*\t`height`, and `width`.\n\t* @public\n\t*/\n\tcalcNodePosition: function(targetNode, relativeToNode) {\n\t\t// Parse upward and grab our positioning relative to the viewport\n\t\tvar top = 0,\n\t\t\tleft = 0,\n\t\t\tnode = targetNode,\n\t\t\twidth = node.offsetWidth,\n\t\t\theight = node.offsetHeight,\n\t\t\ttransformProp = dom.getStyleTransformProp(),\n\t\t\txregex = /translateX\\((-?\\d+)px\\)/i,\n\t\t\tyregex = /translateY\\((-?\\d+)px\\)/i,\n\t\t\tborderLeft = 0, borderTop = 0,\n\t\t\ttotalHeight = 0, totalWidth = 0,\n\t\t\toffsetAdjustLeft = 0, offsetAdjustTop = 0;\n\n\t\tif (relativeToNode) {\n\t\t\ttotalHeight = relativeToNode.offsetHeight;\n\t\t\ttotalWidth = relativeToNode.offsetWidth;\n\t\t} else {\n\t\t\ttotalHeight = (document.body.parentNode.offsetHeight > this.getWindowHeight() ? this.getWindowHeight() - document.body.parentNode.scrollTop : document.body.parentNode.offsetHeight);\n\t\t\ttotalWidth = (document.body.parentNode.offsetWidth > this.getWindowWidth() ? this.getWindowWidth() - document.body.parentNode.scrollLeft : document.body.parentNode.offsetWidth);\n\t\t}\n\n\t\tif (node.offsetParent) {\n\t\t\tdo {\n\t\t\t\t// Adjust the offset if relativeToNode is a child of the offsetParent\n\t\t\t\t// For IE 8 compatibility, have to use integer 8 instead of Node.DOCUMENT_POSITION_CONTAINS\n\t\t\t\tif (relativeToNode && this.compareDocumentPosition(relativeToNode, node.offsetParent) & 8) {\n\t\t\t\t\toffsetAdjustLeft = relativeToNode.offsetLeft;\n\t\t\t\t\toffsetAdjustTop = relativeToNode.offsetTop;\n\t\t\t\t}\n\t\t\t\t// Ajust our top and left properties based on the position relative to the parent\n\t\t\t\tleft += node.offsetLeft - (node.offsetParent ? node.offsetParent.scrollLeft : 0) - offsetAdjustLeft;\n\t\t\t\tif (transformProp && xregex.test(node.style[transformProp])) {\n\t\t\t\t\tleft += parseInt(node.style[transformProp].replace(xregex, '$1'), 10);\n\t\t\t\t}\n\t\t\t\ttop += node.offsetTop - (node.offsetParent ? node.offsetParent.scrollTop : 0) - offsetAdjustTop;\n\t\t\t\tif (transformProp && yregex.test(node.style[transformProp])) {\n\t\t\t\t\ttop += parseInt(node.style[transformProp].replace(yregex, '$1'), 10);\n\t\t\t\t}\n\t\t\t\t// Need to correct for borders if any exist on parent elements\n\t\t\t\tif (node !== targetNode) {\n\t\t\t\t\tif (node.currentStyle) {\n\t\t\t\t\t\t// Oh IE, we do so love working around your incompatibilities\n\t\t\t\t\t\tborderLeft = parseInt(node.currentStyle.borderLeftWidth, 10);\n\t\t\t\t\t\tborderTop = parseInt(node.currentStyle.borderTopWidth, 10);\n\t\t\t\t\t} else if (global.getComputedStyle) {\n\t\t\t\t\t\tborderLeft = parseInt(global.getComputedStyle(node, '').getPropertyValue('border-left-width'), 10);\n\t\t\t\t\t\tborderTop = parseInt(global.getComputedStyle(node, '').getPropertyValue('border-top-width'), 10);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No computed style options, so try the normal style object (much less robust)\n\t\t\t\t\t\tborderLeft = parseInt(node.style.borderLeftWidth, 10);\n\t\t\t\t\t\tborderTop = parseInt(node.style.borderTopWidth, 10);\n\t\t\t\t\t}\n\t\t\t\t\tif (borderLeft) {\n\t\t\t\t\t\tleft += borderLeft;\n\t\t\t\t\t}\n\t\t\t\t\tif (borderTop) {\n\t\t\t\t\t\ttop += borderTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Continue if we have an additional offsetParent, and either don't have a relativeToNode or the offsetParent is contained by the relativeToNode (if offsetParent contains relativeToNode, then we have already calculated up to the node, and can safely exit)\n\t\t\t\t// For IE 8 compatibility, have to use integer 16 instead of Node.DOCUMENT_POSITION_CONTAINED_BY\n\t\t\t} while ((node = node.offsetParent) && (!relativeToNode || this.compareDocumentPosition(relativeToNode, node) & 16));\n\t\t}\n\t\treturn {\n\t\t\t'top': top,\n\t\t\t'left': left,\n\t\t\t'bottom': totalHeight - top - height,\n\t\t\t'right': totalWidth - left - width,\n\t\t\t'height': height,\n\t\t\t'width': width\n\t\t};\n\t},\n\n\t/**\n\t* Sets the `innerHTML` property of the specified `node` to `html`.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to set.\n\t* @param {String} html - An HTML string.\n\t* @public\n\t*/\n\tsetInnerHtml: function(node, html) {\n\t\tnode.innerHTML = html;\n\t},\n\n\t/**\n\t* Checks a [DOM]{@glossary Node} [node]{@glossary Node} for a specific CSS class.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to set.\n\t* @param {String} s - The class name to check for.\n\t* @returns {(Boolean|undefined)} `true` if `node` has the `s` class; `undefined`\n\t* if there is no `node` or it has no `className` property.\n\t* @public\n\t*/\n\thasClass: function(node, s) {\n\t\tif (!node || !node.className) { return; }\n\t\treturn (' ' + node.className + ' ').indexOf(' ' + s + ' ') >= 0;\n\t},\n\n\t/**\n\t* Uniquely adds a CSS class to a DOM node.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to set.\n\t* @param {String} s - The class name to add.\n\t* @public\n\t*/\n\taddClass: function(node, s) {\n\t\tif (node && !this.hasClass(node, s)) {\n\t\t\tvar ss = node.className;\n\t\t\tnode.className = (ss + (ss ? ' ' : '') + s);\n\t\t}\n\t},\n\n\t/**\n\t* Removes a CSS class from a DOM node if it exists.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} from which to remove the class.\n\t* @param {String} s - The class name to remove from `node`.\n\t* @public\n\t*/\n\tremoveClass: function(node, s) {\n\t\tif (node && this.hasClass(node, s)) {\n\t\t\tvar ss = node.className;\n\t\t\tnode.className = (' ' + ss + ' ').replace(' ' + s + ' ', ' ').slice(1, -1);\n\t\t}\n\t},\n\n\t/**\n\t* Adds a class to `document.body`. This defers the actual class change if nothing has been\n\t* rendered into `body` yet.\n\t*\n\t* @param {String} s - The class name to add to the document's `body`.\n\t* @public\n\t*/\n\taddBodyClass: function(s) {\n\t\tif (!utils.exists(roots.roots) || roots.roots.length === 0) {\n\t\t\tif (dom._bodyClasses) {\n\t\t\t\tdom._bodyClasses.push(s);\n\t\t\t} else {\n\t\t\t\tdom._bodyClasses = [s];\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdom.addClass(document.body, s);\n\t\t}\n\t},\n\n\t/**\n\t* Returns an object describing the absolute position on the screen, relative to the top left\n\t* corner of the screen. This function takes into account account absolute/relative\n\t* `offsetParent` positioning, `scroll` position, and CSS transforms (currently\n\t* `translateX`, `translateY`, and `matrix3d`).\n\t*\n\t* ```javascript\n\t* {top: ..., right: ..., bottom: ..., left: ..., height: ..., width: ...}\n\t* ```\n\t*\n\t* Values returned are only valid if `hasNode()` is truthy. If there's no DOM node for the\n\t* object, this returns a bounds structure with `undefined` as the value of all fields.\n\t*\n\t* @param {Node} n - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, `left`,\n\t*\t`height`, and `width`.\n\t* @public\n\t*/\n\tgetAbsoluteBounds: function(targetNode) {\n\t\treturn utils.clone(targetNode.getBoundingClientRect());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflushBodyClasses: function() {\n\t\tif (dom._bodyClasses) {\n\t\t\tfor (var i = 0, c; (c=dom._bodyClasses[i]); ++i) {\n\t\t\t\tdom.addClass(document.body, c);\n\t\t\t}\n\t\t\tdom._bodyClasses = null;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_bodyClasses: null,\n\n\t/**\n\t* Convert to various unit formats. Useful for converting pixels to a resolution-independent\n\t* measurement method, like \"rem\". Other units are available if defined in the\n\t* [enyo.dom.unitToPixelFactors]{@link enyo.dom.unitToPixelFactors} object.\n\t*\n\t* ```javascript\n\t* // Do calculations and get back the desired CSS unit.\n\t* var frameWidth = 250,\n\t*     frameWithMarginInches = enyo.dom.unit( 10 + frameWidth + 10, 'in' ),\n\t*     frameWithMarginRems = enyo.dom.unit( 10 + frameWidth + 10, 'rem' );\n\t* // '2.8125in' == frameWithMarginInches\n\t* // '22.5rem' == frameWithMarginRems\n\t* ```\n\t*\n\t* @param {(String|Number)} pixels - The the pixels or math to convert to the unit.\n\t*\t(\"px\" suffix in String format is permitted. ex: `'20px'`)\n\t* @param {(String)} toUnit - The name of the unit to convert to.\n\t* @returns {(Number|undefined)} Resulting conversion, in case of malformed input, `undefined`\n\t* @public\n\t*/\n\tunit: function (pixels, toUnit) {\n\t\tif (!toUnit || !this.unitToPixelFactors[toUnit]) return;\n\t\tif (typeof pixels == 'string' && pixels.substr(-2) == 'px') pixels = parseInt(pixels.substr(0, pixels.length - 2), 10);\n\t\tif (typeof pixels != 'number') return;\n\n\t\treturn (pixels / this.unitToPixelFactors[toUnit]) + '' + toUnit;\n\t},\n\n\t/**\n\t* Object that stores all of the pixel conversion factors to each keyed unit.\n\t*\n\t* @public\n\t*/\n\tunitToPixelFactors: {\n\t\t'rem': 12,\n\t\t'in': 96\n\t}\n};\n\n// override setInnerHtml for Windows 8 HTML applications\nif (typeof global.MSApp !== 'undefined') {\n\tdom.setInnerHtml = function(node, html) {\n\t\tglobal.MSApp.execUnsafeLocalFunction(function() {\n\t\t\tnode.innerHTML = html;\n\t\t});\n\t};\n}\n\n// use faster classList interface if it exists\nif (document.head && document.head.classList) {\n\tdom.hasClass = function(node, s) {\n\t\tif (node) {\n\t\t\treturn node.classList.contains(s);\n\t\t}\n\t};\n\tdom.addClass = function(node, s) {\n\t\tif (node) {\n\t\t\treturn node.classList.add(s);\n\t\t}\n\t};\n\tdom.removeClass = function (node, s) {\n\t\tif (node) {\n\t\t\treturn node.classList.remove(s);\n\t\t}\n\t};\n}\n\n/**\n* Allows bootstrapping in environments that do not have a global object right away.\n*\n* @param {Function} func - The function to run\n* @public\n*/\ndom.requiresWindow = function(func) {\n\tfunc();\n};\n\n\nvar cssTransformProps = ['transform', '-webkit-transform', '-moz-transform', '-ms-transform', '-o-transform'],\n\tstyleTransformProps = ['transform', 'webkitTransform', 'MozTransform', 'msTransform', 'OTransform'];\n\n/**\n* @private\n*/\ndom.calcCanAccelerate = function() {\n\t/* Android 2 is a liar: it does NOT support 3D transforms, even though Perspective is the best check */\n\tif (platform.android <= 2) {\n\t\treturn false;\n\t}\n\tvar p$ = ['perspective', 'WebkitPerspective', 'MozPerspective', 'msPerspective', 'OPerspective'];\n\tfor (var i=0, p; (p=p$[i]); i++) {\n\t\tif (typeof document.body.style[p] != 'undefined') {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n/**\n* @private\n*/\ndom.getCssTransformProp = function() {\n\tif (this._cssTransformProp) {\n\t\treturn this._cssTransformProp;\n\t}\n\tvar i = utils.indexOf(this.getStyleTransformProp(), styleTransformProps);\n\tthis._cssTransformProp = cssTransformProps[i];\n\treturn this._cssTransformProp;\n};\n\n/**\n* @private\n*/\ndom.getStyleTransformProp = function() {\n\tif (this._styleTransformProp || !document.body) {\n\t\treturn this._styleTransformProp;\n\t}\n\tfor (var i = 0, p; (p = styleTransformProps[i]); i++) {\n\t\tif (typeof document.body.style[p] != 'undefined') {\n\t\t\tthis._styleTransformProp = p;\n\t\t\treturn this._styleTransformProp;\n\t\t}\n\t}\n};\n\n/**\n* @private\n*/\ndom.domTransformsToCss = function(inTransforms) {\n\tvar n, v, text = '';\n\tfor (n in inTransforms) {\n\t\tv = inTransforms[n];\n\t\tif ((v !== null) && (v !== undefined) && (v !== '')) {\n\t\t\ttext +=  n + '(' + v + ') ';\n\t\t}\n\t}\n\treturn text;\n};\n\n/**\n* @private\n*/\ndom.transformsToDom = function(control) {\n\tvar css = this.domTransformsToCss(control.domTransforms),\n\t\tstyleProp;\n\n\tif (control.hasNode()) {\n\t\tstyleProp = this.getStyleTransformProp();\n\t} else {\n\t\tstyleProp = this.getCssTransformProp();\n\t}\n\n\tif (styleProp) control.applyStyle(styleProp, css);\n};\n\n/**\n* Returns `true` if the platform supports CSS3 Transforms.\n*\n* @returns {Boolean} `true` if platform supports CSS `transform` property;\n* otherwise, `false`.\n* @public\n*/\ndom.canTransform = function() {\n\treturn Boolean(this.getStyleTransformProp());\n};\n\n/**\n* Returns `true` if platform supports CSS3 3D Transforms.\n*\n* Typically used like this:\n* ```\n* if (dom.canAccelerate()) {\n* \tdom.transformValue(this.$.slidingThing, 'translate3d', x + ',' + y + ',' + '0')\n* } else {\n* \tdom.transformValue(this.$.slidingThing, 'translate', x + ',' + y);\n* }\n* ```\n*\n* @returns {Boolean} `true` if platform supports CSS3 3D Transforms;\n* otherwise, `false`.\n* @public\n*/\ndom.canAccelerate = function() {\n\treturn (this.accelerando !== undefined) ? this.accelerando : document.body && (this.accelerando = this.calcCanAccelerate());\n};\n\n/**\n* Applies a series of transforms to the specified {@link enyo.Control}, using\n* the platform's prefixed `transform` property.\n*\n* **Note:** Transforms are not commutative, so order is important.\n*\n* Transform values are updated by successive calls, so\n* ```javascript\n* dom.transform(control, {translate: '30px, 40px', scale: 2, rotate: '20deg'});\n* dom.transform(control, {scale: 3, skewX: '-30deg'});\n* ```\n*\n* is equivalent to:\n* ```javascript\n* dom.transform(control, {translate: '30px, 40px', scale: 3, rotate: '20deg', skewX: '-30deg'});\n* ```\n*\n* When applying these transforms in a WebKit browser, this is equivalent to:\n* ```javascript\n* control.applyStyle('-webkit-transform', 'translate(30px, 40px) scale(3) rotate(20deg) skewX(-30deg)');\n* ```\n*\n* And in Firefox, this is equivalent to:\n* ```javascript\n* control.applyStyle('-moz-transform', 'translate(30px, 40px) scale(3) rotate(20deg) skewX(-30deg)');\n* ```\n*\n* @param {enyo.Control} control - The {@link enyo.Control} to transform.\n* @param {Object} transforms - The set of transforms to apply to `control`.\n* @public\n*/\ndom.transform = function(control, transforms) {\n\tvar d = control.domTransforms = control.domTransforms || {};\n\tutils.mixin(d, transforms);\n\tthis.transformsToDom(control);\n};\n\n/**\n* Applies a single transform to the specified {@link enyo.Control}.\n*\n* Example:\n* ```\n* tap: function(inSender, inEvent) {\n* \tvar c = inEvent.originator;\n* \tvar r = c.rotation || 0;\n* \tr = (r + 45) % 360;\n* \tc.rotation = r;\n* \tdom.transformValue(c, 'rotate', r);\n* }\n* ```\n*\n* This will rotate the tapped control by 45 degrees clockwise.\n*\n* @param {enyo.Control} control - The {@link enyo.Control} to transform.\n* @param {String} transform - The name of the transform function.\n* @param {(String|Number)} value - The value to apply to the transform.\n* @public\n*/\ndom.transformValue = function(control, transform, value) {\n\tvar d = control.domTransforms = control.domTransforms || {};\n\td[transform] = value;\n\tthis.transformsToDom(control);\n};\n\n/**\n* Applies a transform that should trigger GPU compositing for the specified\n* {@link enyo.Control}. By default, the acceleration is only applied if the\n* browser supports it. You may also optionally force-set `value` directly, to\n* be applied to `translateZ(value)`.\n*\n* @param {enyo.Control} control - The {@link enyo.Control} to accelerate.\n* @param {(String|Number)} [value] - An optional value to apply to the acceleration transform\n*\tproperty.\n* @public\n*/\ndom.accelerate = function(control, value) {\n\tvar v = value == 'auto' ? this.canAccelerate() : value;\n\tthis.transformValue(control, 'translateZ', v ? 0 : null);\n};\n\n\n/**\n * The CSS `transition` property name for the current browser/platform, e.g.:\n *\n * * `-webkit-transition`\n * * `-moz-transition`\n * * `transition`\n *\n * @type {String}\n * @private\n */\ndom.transition = (platform.ios || platform.android || platform.chrome || platform.androidChrome || platform.safari)\n\t? '-webkit-transition'\n\t: (platform.firefox || platform.firefoxOS || platform.androidFirefox)\n\t\t? '-moz-transition'\n\t\t: 'transition';","require('../../enyo');\n\nvar\n\tjson = require('./json'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\n\n/**\n* These platforms only allow one argument for [console.log()]{@glossary console.log}:\n*\n* * android\n* * ios\n* * webos\n*\n* @private\n*/\nvar dumbConsole = Boolean(platform.android || platform.ios || platform.webos);\n\n/**\n* Internally used methods and properties associated with logging.\n*\n* @namespace exports.logging\n* @public\n*/\nexports = module.exports = /** @lends exports.logging */ {\n\t\n\t/**\n\t* The log level to use. Can be a value from -1 to 99, where -1 disables all\n\t* logging, 0 is 'error', 10 is 'warn', and 20 is 'log'. It is preferred that\n\t* this value be set using the [exports.setLogLevel()]{@link enyo~setLogLevel}\n\t* method.\n\t*\n\t* @type {Number}\n\t* @default 99\n\t* @public\n\t*/\n\tlevel: 99,\n\t\n\t/**\n\t* The known levels.\n\t*\n\t* @private\n\t*/\n\tlevels: {log: 20, warn: 10, error: 0},\n\t\n\t/**\n\t* @private\n\t*/\n\tshouldLog: function (fn) {\n\t\tvar ll = parseInt(this.levels[fn], 0);\n\t\treturn (ll <= this.level);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tvalidateArgs: function (args) {\n\t\t// gracefully handle and prevent circular reference errors in objects\n\t\tfor (var i=0, l=args.length, item; (item=args[i]) || i<l; i++) {\n\t\t\ttry {\n\t\t\t\tif (typeof item === 'object') {\n\t\t\t\t\targs[i] = json.stringify(item);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\targs[i] = 'Error: ' + e.message;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_log: function (fn, args) {\n\t\t// avoid trying to use console on IE instances where the object hasn't been\n\t\t// created due to the developer tools being unopened\n\t\tvar console = global.console;\n\t\tif (typeof console === 'undefined') {\n            return;\n        }\n\t\t//var a$ = utils.logging.formatArgs(fn, args);\n\t\tvar a$ = utils.isArray(args) ? args : utils.cloneArray(args);\n\t\tif (platform.androidFirefox) {\n\t\t\t// Firefox for Android's console does not handle objects with circular references\n\t\t\tthis.validateArgs(a$);\n\t\t}\n\t\tif (dumbConsole) {\n\t\t\t// at least in early versions of webos, console.* only accept a single argument\n\t\t\ta$ = [a$.join(' ')];\n\t\t}\n\t\tvar fn$ = console[fn];\n\t\tif (fn$ && fn$.apply) {\n\t\t\t// some consoles support 'warn', 'info', and so on\n\t\t\tfn$.apply(console, a$);\n\t\t} else if (console.log.apply) {\n\t\t\t// some consoles support console.log.apply\n\t\t\tconsole.log.apply(console, a$);\n\t\t} else {\n\t\t\t// otherwise, do our own formatting\n\t\t\tconsole.log(a$.join(' '));\n\t\t}\n\t},\n\t\n\t/**\n\t* This is exposed elsewhere.\n\t*\n\t* @private\n\t*/\n\tlog: function (fn, args) {\n\n\t\tif (fn != 'log' && fn != 'warn' && fn != 'error') {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t\tfn = 'log';\n\t\t}\n\n\t\tvar console = global.console;\n\t\tif (typeof console !== 'undefined') {\n\t\t\tif (this.shouldLog(fn)) {\n\t\t\t\tthis._log(fn, args);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n* Sets the log level to the given value. This will restrict the amount of output depending on\n* the settings. The higher the value, the more output that will be allowed. The default is\n* 99. The value, -1, would silence all logging, even 'error' (0).\n* Without the 'see': {@link exports.log}.\n*\n* @see exports.logging.level\n* @see exports.log\n* @see exports.warn\n* @see exports.error\n* @param {Number} level - The level to set logging to.\n*/\nexports.setLogLevel = function (level) {\n\tvar ll = parseInt(level, 0);\n\tif (isFinite(ll)) {\n\t\tthis.level = ll;\n\t}\n};\n\n/**\n* A wrapper for [console.log()]{@glossary console.log}, compatible\n* across supported platforms. Will output only if the current\n* [log level]{@link exports.logging.level} allows it. [Object]{@glossary Object}\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\n* automatically.\n*\n* @utility\n* @see {@glossary console.log}\n* @param {...*} - The arguments to be logged.\n* @public\n*/\n\n/**\n* A wrapper for [console.warn()]{@glossary console.warn}, compatible\n* across supported platforms. Will output only if the current\n* [log level]{@link exports.logging.level} allows it. [Object]{@glossary Object}\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\n* automatically.\n*\n* @utility\n* @see {@glossary console.warn}\n* @param {...*} - The arguments to be logged.\n* @public\n*/\nexports.warn = function () {\n\tthis.log('warn', arguments);\n};\n\n/**\n* A wrapper for [console.error()]{@glossary console.error}, compatible\n* across supported platforms. Will output only if the current\n* [log level]{@link exports.logging.level} allows it. [Object]{@glossary Object}\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\n* automatically.\n*\n* @utility\n* @see {@glossary console.error}\n* @param {...*} - The arguments to be logged.\n* @public\n*/\nexports.error = function () {\n\tthis.log('error', arguments);\n};","require('../../enyo');\n\nvar\n\tDom = require('./dom');\n\nvar selfClosing = {img: 1, hr: 1, br: 1, area: 1, base: 1, basefont: 1, input: 1, link: 1,\n\tmeta: 1, command: 1, embed: 1, keygen: 1, wbr: 1, param: 1, source: 1, track: 1, col: 1};\n\n/**\n* This is the default render delegate used by {@link enyo.Control}. It\n* generates the HTML [string]{@glossary String} content and correctly inserts\n* it into the DOM. A string-concatenation technique is used to perform DOM\n* insertion in batches.\n*\n* @name enyo.HTMLStringDelegate\n* @type Object\n* @public\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tinvalidate: function (control, item) {\n\t\tswitch (item) {\n\t\tcase 'content':\n\t\t\tthis.renderContent(control);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcontrol.tagsValid = false;\n\t\t\tbreak;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trender: function (control) {\n\t\tif (control.parent) {\n\t\t\tcontrol.parent.beforeChildRender(control);\n\t\t\t\n\t\t\tif (!control.parent.generated) return;\n\t\t\tif (control.tag === null) return control.parent.render();\n\t\t}\n\t\t\n\t\tif (!control.hasNode()) this.renderNode(control);\n\t\tif (control.hasNode()) {\n\t\t\tthis.renderDom(control);\n\t\t\tif (control.generated) control.rendered();\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderInto: function (control, parentNode) {\n\t\tparentNode.innerHTML = this.generateHtml(control);\n\t\t\n\t\tif (control.generated) control.rendered();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderNode: function (control) {\n\t\tthis.teardownRender(control);\n\t\tcontrol.node = document.createElement(control.tag);\n\t\tcontrol.addNodeToParent();\n\t\tcontrol.set('generated', true);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderDom: function (control) {\n\t\tthis.renderAttributes(control);\n\t\tthis.renderStyles(control);\n\t\tthis.renderContent(control);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderStyles: function (control) {\n\t\tvar style = control.style;\n\t\t\n\t\t// we can safely do this knowing it will synchronize properly without a double\n\t\t// set in the DOM because we're flagging the internal property\n\t\tif (control.hasNode()) {\n\t\t\tcontrol.node.style.cssText = style;\n\t\t\t// retrieve the parsed value for synchronization\n\t\t\tcontrol.cssText = style = control.node.style.cssText;\n\t\t\t// now we set it knowing they will be synchronized and everybody that is listening\n\t\t\t// will also be updated to know about the change\n\t\t\tcontrol.set('style', style);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderAttributes: function (control) {\n\t\tvar attrs = control.attributes,\n\t\t\tnode = control.hasNode(),\n\t\t\tkey,\n\t\t\tval;\n\t\t\n\t\tif (node) {\n\t\t\tfor (key in attrs) {\n\t\t\t\tval = attrs[key];\n\t\t\t\tif (val === null || val === false || val === \"\") {\n\t\t\t\t\tnode.removeAttribute(key);\n\t\t\t\t} else {\n\t\t\t\t\tnode.setAttribute(key, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderContent: function (control) {\n\t\tif (control.generated) this.teardownChildren(control);\n\t\tif (control.hasNode()) control.node.innerHTML = this.generateInnerHtml(control);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateHtml: function (control) {\n\t\tvar content,\n\t\t\thtml;\n\t\t\n\t\tif (control.canGenerate === false) {\n\t\t\treturn '';\n\t\t}\n\t\t// do this first in case content generation affects outer html (styles or attributes)\n\t\tcontent = this.generateInnerHtml(control);\n\t\t// generate tag, styles, attributes\n\t\thtml = this.generateOuterHtml(control, content);\n\t\t// NOTE: 'generated' is used to gate access to findNodeById in\n\t\t// hasNode, because findNodeById is expensive.\n\t\t// NOTE: we typically use 'generated' to mean 'created in DOM'\n\t\t// but that has not actually happened at this point.\n\t\t// We set 'generated = true' here anyway to avoid having to walk the\n\t\t// control tree a second time (to set it later).\n\t\t// The contract is that insertion in DOM will happen synchronously\n\t\t// to generateHtml() and before anybody should be calling hasNode().\n\t\tcontrol.set('generated', true);\n\t\treturn html;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateOuterHtml: function (control, content) {\n\t\tif (!control.tag) return content;\n\t\tif (!control.tagsValid) this.prepareTags(control);\n\t\treturn control._openTag + content + control._closeTag;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateInnerHtml: function (control) {\n\t\tvar allowHtml = control.allowHtml,\n\t\t\tcontent;\n\t\t\n\t\t// flow can alter the way that html content is rendered inside\n\t\t// the container regardless of whether there are children.\n\t\tcontrol.flow();\n\t\tif (control.children.length) return this.generateChildHtml(control);\n\t\telse {\n\t\t\tcontent = control.get('content');\n\t\t\treturn allowHtml ? content : Dom.escape(content);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateChildHtml: function (control) {\n\t\tvar child,\n\t\t\thtml = '',\n\t\t\ti = 0,\n\t\t\tdelegate;\n\t\t\n\t\tfor (; (child = control.children[i]); ++i) {\n\t\t\tdelegate = child.renderDelegate || this;\n\t\t\thtml += delegate.generateHtml(child);\n\t\t}\n\t\t\n\t\treturn html;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tprepareTags: function (control) {\n\t\tvar html = '';\n\t\t\n\t\t// open tag\n\t\thtml += '<' + control.tag + (control.style ? ' style=\"' + control.style + '\"' : '');\n\t\thtml += this.attributesToHtml(control.attributes);\n\t\tif (selfClosing[control.tag]) {\n\t\t\tcontrol._openTag = html + '/>';\n\t\t\tcontrol._closeTag = '';\n\t\t} else {\n\t\t\tcontrol._openTag = html + '>';\n\t\t\tcontrol._closeTag = '</' + control.tag + '>';\n\t\t}\n\t\t\n\t\tcontrol.tagsValid = true;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tattributesToHtml: function(attrs) {\n\t\tvar key,\n\t\t\tval,\n\t\t\thtml = '';\n\t\t\t\n\t\tfor (key in attrs) {\n\t\t\tval = attrs[key];\n\t\t\tif (val != null && val !== false && val !== '') {\n\t\t\t\thtml += ' ' + key + '=\"' + this.escapeAttribute(val) + '\"';\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn html;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tescapeAttribute: function (text) {\n\t\tif (typeof text != 'string') return text;\n\t\n\t\treturn String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;');\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tteardownRender: function (control) {\n\t\tif (control.generated) this.teardownChildren(control);\n\t\tcontrol.node = null;\n\t\tcontrol.set('generated', false);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tteardownChildren: function (control) {\n\t\tvar child,\n\t\t\ti = 0;\n\t\t\t\n\t\tfor (; (child = control.children[i]); ++i) {\n\t\t\tchild.teardownRender();\n\t\t}\n\t}\n};","require('../../enyo');\n\nvar\n\tDom = require('./dom');\n\nvar _baseScreenType = 'standard',\n\t_riRatio,\n\t_screenType,\n\t_screenTypes = [ {name: 'standard', pxPerRem: 16, width: global.innerWidth,  height: global.innerHeight, aspectRatioName: 'standard'} ],\t// Assign one sane value in case defineScreenTypes is never run.\n\t_screenTypeObject;\n\nvar getScreenTypeObject = function (type) {\n\ttype = type || _screenType;\n\tif (type == _screenType && _screenTypeObject) {\n\t\treturn _screenTypeObject;\n\t}\n\treturn _screenTypes.filter(function (elem) {\n\t\treturn (type == elem.name);\n\t})[0];\n};\n\n/**\n* @namespace ri\n*/\nvar ri = module.exports = {\n\t/**\n\t* Setup screen resolution scaling capabilities by defining all of the screens you're working\n\t* with. These should be in the order of smallest to largest (according to width). Running\n\t* this also initializes the rest of this resolution code.\n\t*\n\t* In the arguments, the following properties are required: 'name', 'pxPerRem', 'width',\n\t* 'aspectRatioName'. The property 'base' defines the primary or default resoultion that\n\t* everything else will be based upon.\n\t*\n\t* ```\n\t* ri.defineScreenTypes([\n\t* \t{name: 'vga',     pxPerRem: 8,  width: 640,  height: 480,  aspectRatioName: 'standard'},\n\t* \t{name: 'xga',     pxPerRem: 16, width: 1024, height: 768,  aspectRatioName: 'standard'},\n\t* \t{name: 'hd',      pxPerRem: 16, width: 1280, height: 720,  aspectRatioName: 'hdtv'},\n\t* \t{name: 'fhd',     pxPerRem: 24, width: 1920, height: 1080, aspectRatioName: 'hdtv', base: true},\n\t* \t{name: 'uw-uxga', pxPerRem: 24, width: 2560, height: 1080, aspectRatioName: 'cinema'},\n\t* \t{name: 'uhd',     pxPerRem: 48, width: 3840, height: 2160, aspectRatioName: 'hdtv'}\n\t* ]);\n\t* ```\n\t*\n\t* @param {Array} types An array of objects with arguments like the example\n\t* @public\n\t*/\n\tdefineScreenTypes: function (types) {\n\t\t_screenTypes = types;\n\t\tfor (var i = 0; i < _screenTypes.length; i++) {\n\t\t\tif (_screenTypes[i]['base']) _baseScreenType = _screenTypes[i].name;\n\t\t}\n\t\tri.init();\n\t},\n\n\t/**\n\t* Fetches the best-matching screen type name for the current screen size. The \"best\" screen type\n\t* is determined by the screen type name that is the closest to the screen resolution without\n\t* going over. (\"The Price is Right\" style.)\n\t*\n\t* @param {Object} [rez] - Optional measurement scheme. Must have \"height\" and \"width\" properties.\n\t* @returns {String} Screen type, like \"fhd\", \"uhd\", etc.\n\t* @public\n\t*/\n\tgetScreenType: function (rez) {\n\t\trez = rez || {\n\t\t\theight: global.innerHeight,\n\t\t\twidth: global.innerWidth\n\t\t};\n\t\tvar i,\n\t\t\ttypes = _screenTypes,\n\t\t\tbestMatch = types[types.length - 1].name;\n\n\t\t// loop thorugh resolutions\n\t\tfor (i = types.length - 1; i >= 0; i--) {\n\t\t\t// find the one that matches our current size or is smaller. default to the first.\n\t\t\tif (rez.width <= types[i].width) {\n\t\t\t\tbestMatch = types[i].name;\n\t\t\t}\n\t\t}\n\t\t// return the name of the resolution if we find one.\n\t\treturn bestMatch;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateScreenBodyClasses: function (type) {\n\t\ttype = type || _screenType;\n\t\tif (type) {\n\t\t\tDom.addBodyClass('enyo-res-' + type.toLowerCase());\n\t\t\tvar scrObj = getScreenTypeObject(type);\n\t\t\tif (scrObj.aspectRatioName) {\n\t\t\t\tDom.addBodyClass('enyo-aspect-ratio-' + scrObj.aspectRatioName.toLowerCase());\n\t\t\t}\n\t\t\treturn type;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetRiRatio: function (type) {\n\t\ttype = type || _screenType;\n\t\tif (type) {\n\t\t\tvar ratio = this.getUnitToPixelFactors(type) / this.getUnitToPixelFactors(_baseScreenType);\n\t\t\tif (type == _screenType) {\n\t\t\t\t// cache this if it's for our current screen type.\n\t\t\t\t_riRatio = ratio;\n\t\t\t}\n\t\t\treturn ratio;\n\t\t}\n\t\treturn 1;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetUnitToPixelFactors: function (type) {\n\t\ttype = type || _screenType;\n\t\tif (type) {\n\t\t\treturn getScreenTypeObject(type).pxPerRem;\n\t\t}\n\t\treturn 1;\n\t},\n\n\t/**\n\t* Calculates the aspect ratio of the screen type provided. If none is provided the current\n\t* screen type is used.\n\t*\n\t* @param {String} type Screen type to get the aspect ratio of. Providing nothing uses the\n\t*\tcurrent screen type.\n\t* @returns {Number} The calculated screen ratio (1.333, 1.777, 2.333, etc)\n\t* @public\n\t*/\n\tgetAspectRatio: function (type) {\n\t\tvar scrObj = getScreenTypeObject(type);\n\t\tif (scrObj.width && scrObj.height) {\n\t\t\treturn (scrObj.width / scrObj.height);\n\t\t}\n\t\treturn 1;\n\t},\n\n\t/**\n\t* Returns the name of the aspect ration given the screen type or the default screen type if\n\t* none is proided.\n\t*\n\t* @param {String} type Screen type to get the aspect ratio of. Providing nothing uses the\n\t*\tcurrent screen type.\n\t* @returns {String} The name of the type of screen ratio\n\t* @public\n\t*/\n\tgetAspectRatioName: function (type) {\n\t\tvar scrObj = getScreenTypeObject(type);\n\t\t return scrObj.aspectRatioName || 'standard';\n\t},\n\n\t/**\n\t* Takes a provided pixel value and preforms a scaling operation on the number based on the\n\t* current screen type.\n\t*\n\t* @param {Number} px The amount of standard-resolution pixels to scale to the current screen\n\t*\tresolution.\n\t* @returns {Number} The scaled value based on the current screen scaling factor.\n\t* @public\n\t*/\n\tscale: function (px) {\n\t\treturn (_riRatio || this.getRiRatio()) * px;\n\t},\n\n\t/**\n\t* The default configurable [options]{@link ri.selectSrc#options}.\n\t*\n\t* @typedef {Object} ri.selectSrc~src\n\t* @property {String} hd - HD / 720p Resolution image asset source URI/URL\n\t* @property {String} fhd - FHD / 1080p Resolution image asset source URI/URL\n\t* @property {String} uhd - UHD / 4K Resolution image asset source URI/URL\n\t*\n\t* @typedef {String} ri.selectSrc~src - Image asset source URI/URL\n\t*/\n\n\t/**\n\t* Image src chooser. A simple utility method to select the ideal image asset from a set of\n\t* assets, based on various screen resolutions: HD (720p), FHD (1080p), UHD (4k). When provided\n\t* with a src argument, multiResSrc will choose the best image with respect to the current screen\n\t* resolution. `src` may be either the traditional string, which will pass straight through, or a\n\t* hash/object of screen types and their asset sources (keys:screen and values:src). The image\n\t* sources will be used chosen when the screen resolution is less than or equal to the provided\n\t* screen types.\n\t*\n\t* ```\n\t* // Take advantage of the multi-rez mode\n\t* {kind: 'moon.Image', src: {\n\t* \t'hd': 'http://lorempixel.com/64/64/city/1/',\n\t* \t'fhd': 'http://lorempixel.com/128/128/city/1/',\n\t* \t'uhd': 'http://lorempixel.com/256/256/city/1/'\n\t* }, alt: 'Multi-rez'},\n\t* // Standard string `src`\n\t* {kind: 'moon.Image', src: http://lorempixel.com/128/128/city/1/', alt: 'Large'},\n\t* ```\n\t*\n\t* @param {(String|moon.ri.selectSrc~src)} src A string containing a single image src or a\n\t*\tkey/value hash/object containing keys representing screen types (hd, fhd, uhd, etc) and\n\t*\tvalues containing the asset src for that target screen resolution.\n\t* @returns {String} The choosen src given the string or list provided.\n\t* @public\n\t*/\n\tselectSrc: function (src) {\n\t\tif (typeof src != 'string' && src) {\n\t\t\tvar i, t,\n\t\t\t\tnewSrc = src.fhd || src.uhd || src.hd,\n\t\t\t\ttypes = _screenTypes;\n\n\t\t\t// loop through resolutions\n\t\t\tfor (i = types.length - 1; i >= 0; i--) {\n\t\t\t\tt = types[i].name;\n\t\t\t\tif (_screenType == t && src[t]) newSrc = src[t];\n\t\t\t}\n\n\t\t\tsrc = newSrc;\n\t\t}\n\t\treturn src;\n\t},\n\n\t/**\n\t* This will need to be re-run any time the screen size changes, so all the values can be\n\t* re-cached.\n\t*\n\t* @public\n\t*/\n\t// Later we can wire this up to a screen resize event so it doesn't need to be called manually.\n\tinit: function () {\n\t\t_screenType = this.getScreenType();\n\t\t_screenTypeObject = getScreenTypeObject();\n\t\tthis.updateScreenBodyClasses();\n\t\tDom.unitToPixelFactors.rem = this.getUnitToPixelFactors();\n\t\t_riRatio = this.getRiRatio();\n\t}\n};","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tlogger = require('./logger');\nvar\n\tDom = require('./dom');\n\n/**\n* This is a [delegate]{@glossary delegate} (strategy) used by {@link enyo.DataList}\n* for vertically-oriented lists. This is used by all lists for this strategy; it\n* does not get copied, but is called directly from the list.\n*\n* @name enyo.DataList.delegates.vertical\n* @type Object\n* @private\n*/\nmodule.exports = {\n\n\t/**\n\t* Used to determine the minimum size of the page. The page size will be at least this\n\t* number of times greater than the viewport size.\n\t*\n\t* @type {Number}\n\t* @default 2\n\t* @public\n\t*/\n\tpageSizeMultiplier: 2,\n\n\t/**\n\t* Sets the priority properties for this orientation, which can then be customized by\n\t* other [delegates]{@glossary delegate} that wish to share basic functionality.\n\t*\n\t* @param {enyo.DataList} list - The [list]{@link enyo.DataList} to perform this action on.\n\t* @private\n\t*/\n\tinitList: function (list) {\n\t\tlist.posProp   = 'top';\n\t\tlist.upperProp = 'top';\n\t\tlist.lowerProp = 'bottom';\n\t\tlist.psizeProp = 'height';\n\t\tlist.ssizeProp = 'width';\n\t\t// set the scroller options\n\t\tvar so         = list.scrollerOptions? (list.scrollerOptions = utils.clone(list.scrollerOptions)): (list.scrollerOptions = {});\n\t\t// this is a datalist...it has to be scroll or auto for vertical\n\t\tso.vertical    = so.vertical == 'scroll'? 'scroll': 'auto';\n\t\tso.horizontal  = so.horizontal || 'hidden';\n\t\t// determine if the _controlsPerPage_ property has been set on the list\n\t\tif (list.controlsPerPage !== null && !isNaN(list.controlsPerPage)) {\n\t\t\tlist._staticControlsPerPage = true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgenerate: function (list) {\n\t\tfor (var i=0, p; (p=list.pages[i]); ++i) {\n\t\t\tthis.generatePage(list, p, p.index);\n\t\t}\n\t\tthis.adjustPagePositions(list);\n\t\tthis.adjustBuffer(list);\n\t},\n\n\n\t/**\n\t* Performs a hard reset of the [list's]{@link enyo.DataList} pages and children.\n\t* Scrolls to the top and resets each page's children to have the correct indices.\n\t*\n\t* @param {enyo.DataList} list - The [list]{@link enyo.DataList} to perform this action on.\n\t* @private\n\t*/\n\treset: function (list) {\n\t\tlist.$.page1.index = 0;\n\t\tlist.$.page2.index = 1;\n\t\tthis.generate(list);\n\t\tlist.hasReset = true;\n\t\t// reset the scroller so it will also start from the 'top' whatever that may\n\t\t// be (left/top)\n\t\tthis.scrollTo(list, 0, 0);\n\t},\n\n\t/**\n\t* Retrieves [list]{@link enyo.DataList} pages, indexed by their position.\n\t*\n\t* @param {enyo.DataList} list - The [list]{@link enyo.DataList} to perform this action on.\n\t* @returns {Object} Returns a [hash]{@glossary Object} of the pages marked by their\n\t*\tposition as either 'firstPage' or 'lastPage'.\n\t* @private\n\t*/\n\tpagesByPosition: function (list) {\n\t\tvar metrics     = list.metrics.pages,\n\t\t\tpos         = list.pagePositions || (list.pagePositions={}),\n\t\t\tupperProp   = list.upperProp,\n\t\t\tfirstIndex  = list.$.page1.index || 0,\n\t\t\tsecondIndex = (list.$.page2.index || list.$.page2.index === 0) ? list.$.page2.index : 1;\n\t\tpos.firstPage   = (\n\t\t\tmetrics[firstIndex] && metrics[secondIndex] &&\n\t\t\t(metrics[secondIndex][upperProp] < metrics[firstIndex][upperProp])\n\t\t\t? list.$.page2\n\t\t\t: list.$.page1\n\t\t);\n\t\tpos.lastPage = (pos.firstPage === list.$.page1? list.$.page2: list.$.page1);\n\t\treturn pos;\n\t},\n\n\t/**\n\t* Refreshes each page in the given [list]{@link enyo.DataList}, adjusting its position\n\t* and adjusting the buffer accordingly.\n\t*\n\t* @param {enyo.DataList} list - The [list]{@link enyo.DataList} to perform this action on.\n\t* @private\n\t*/\n\trefresh: function (list) {\n\t\tif (!list.hasReset) { return this.reset(list); }\n\t\tthis.assignPageIndices(list);\n\t\tthis.generate(list);\n\t},\n\n\t/**\n\t* Once the [list]{@link enyo.DataList} is initially rendered, it will generate its\n\t* [scroller]{@link enyo.Scroller} (so we know that is available). Now we need to\n\t* cache our initial size values and apply them to our pages individually.\n\t*\n\t* @param {enyo.DataList} list - The [list]{@link enyo.DataList} to perform this action on.\n\t* @private\n\t*/\n\trendered: function (list) {\n\t\tif (list.$.scroller.addScrollListener) {\n\t\t\tlist.usingScrollListener = true;\n\t\t\tlist.$.scroller.addScrollListener(\n\t\t\t\tutils.bindSafely(this, 'scrollHandler', list)\n\t\t\t);\n\t\t}\n\t\t// get our initial sizing cached now since we should actually have\n\t\t// bounds at this point\n\t\tthis.updateBounds(list);\n\t\t// calc offset of pages to scroller client\n\t\tthis.calcScrollOffset(list);\n\t\t// now if we already have a length then that implies we have a controller\n\t\t// and that we have data to render at this point, otherwise we don't\n\t\t// want to do any more initialization\n\t\tif (list.collection && list.collection.length) { this.reset(list); }\n\t},\n\t/**\n\t* Generates the markup for the page content.\n\t*\n\t* @private\n\t*/\n\tgeneratePage: function (list, page, index) {\n\t\t// Temporarily add logging code to make it easier for\n\t\t// QA and others to detect and report page-index issues\n\t\tif (index < 0) {\n\t\t\tlogger.warn('Invalid page index: ' + index);\n\t\t}\n\t\t// in case it hasn't been set we ensure it is marked correctly\n\t\tpage.index  = index;\n\t\t\t// the collection of data with records to use\n\t\tvar data    = list.collection,\n\t\t\t// the metrics for the entire list\n\t\t\tmetrics = list.metrics,\n\t\t\t// controls per page\n\t\t\tperPage = this.controlsPerPage(list),\n\t\t\t// placeholder for the control we're going to update\n\t\t\tview;\n\n\t\t// the first index for this generated page\n\t\tpage.start  = perPage * index;\n\t\t// the last index for this generated page\n\t\tpage.end    = Math.min((data.length - 1), (page.start + perPage) - 1);\n\n\t\t// if generating a control we need to use the correct page as the control parent\n\t\tlist.controlParent = page;\n\t\tfor (var i=page.start; i <= page.end && i < data.length; ++i) {\n\t\t\tview = (page.children[i - page.start] || list.createComponent({}));\n\t\t\t// disable notifications until all properties to be updated\n\t\t\t// have been\n\t\t\tview.teardownRender();\n\t\t\tview.stopNotifications();\n\t\t\tview.set('model', data.at(i));\n\t\t\tview.set('index', i);\n\t\t\tthis.checkSelected(list, view);\n\t\t\tview.set('selected', list.isSelected(view.model));\n\t\t\tview.startNotifications();\n\t\t\tview.canGenerate = true;\n\t\t}\n\t\t// if there are any controls that need to be hidden we do that now\n\t\tfor (i=(i-page.start); i < page.children.length; ++i) {\n\t\t\tview = page.children[i];\n\t\t\tview.teardownRender();\n\t\t\tview.canGenerate = false;\n\t\t}\n\t\t// update the entire page at once - this removes old nodes and updates\n\t\t// to the correct ones\n\t\tpage.render();\n\t\t// now to update the metrics\n\t\tmetrics        = metrics.pages[index] || (metrics.pages[index] = {});\n\t\tmetrics.height = this.pageHeight(list, page);\n\t\tmetrics.width  = this.pageWidth(list, page);\n\t\t// update the childSize value now that we have measurements\n\t\tthis.childSize(list);\n\t},\n\n\t/**\n\t* checks whether the control should have selected set based on selectionProperty\n\t*\n\t* @private\n\t*/\n\tcheckSelected: function (list, view) {\n\t\tvar s = list.selectionProperty;\n\t\tif (s && view.model.get(s) && !list.isSelected(view.model)) {\n\t\t\tlist.select(view.index);\n\t\t\t// don't have to check opposite case (model is false and isSelected is true)\n\t\t\t// because that shouldn't happen\n\t\t}\n\t},\n\n\t/**\n\t* Generates a child size for the given [list]{@link enyo.DataList}.\n\t*\n\t* @private\n\t*/\n\tchildSize: function (list) {\n\t\tif (!list.fixedChildSize) {\n\t\t\tvar pageIndex = list.$.page1.index,\n\t\t\t\tsizeProp  = list.psizeProp,\n\t\t\t\tn         = list.$.page1.node || list.$.page1.hasNode(),\n\t\t\t\tsize, props;\n\t\t\tif (pageIndex >= 0 && n) {\n\t\t\t\tprops = list.metrics.pages[pageIndex];\n\t\t\t\tsize  = props? props[sizeProp]: 0;\n\t\t\t\tlist.childSize = Math.floor(size / (n.children.length || 1));\n\t\t\t}\n\t\t}\n\t\treturn list.fixedChildSize || list.childSize || (list.childSize = 100); // we have to start somewhere\n\t},\n\n\t/**\n\t* Calculates the number of controls required to fill a page. This functionality is broken\n\t* out of [controlsPerPage]{@link DataList.delegates.vertical#controlsPerPage} so that it\n\t* can be overridden by delegates that inherit from this one.\n\t*\n\t* @private\n\t*/\n\tcalculateControlsPerPage: function (list) {\n\t\tvar fn              = this[list.psizeProp],\n\t\t\tmulti           = list.pageSizeMultiplier || this.pageSizeMultiplier,\n\t\t\tchildSize       = this.childSize(list);\n\n\t\t// using height/width of the available viewport times our multiplier value\n\t\treturn Math.ceil(((fn.call(this, list) * multi) / childSize) + 1);\n\t},\n\n\t/**\n\t* When necessary, updates the the value of `controlsPerPage` dynamically to ensure that\n\t* the page size is always larger than the viewport size. Note that once a\n\t* [control]{@link enyo.Control} is instanced (if this number increases and then decreases),\n\t* the number of available controls will be used instead. This method updates the\n\t* [childSize]{@link enyo.DataList#childSize} and is used internally to calculate other\n\t* values, such as [defaultPageSize]{@link DataList.delegates.vertical#defaultPageSize}.\n\t*\n\t* @private\n\t*/\n\tcontrolsPerPage: function (list, forceUpdate) {\n\t\tif (list._staticControlsPerPage) {\n\t\t\treturn list.controlsPerPage;\n\t\t} else {\n\t\t\tvar updatedControls = list._updatedControlsPerPage,\n\t\t\t\tupdatedBounds   = list._updatedBounds,\n\t\t\t\tperPage         = list.controlsPerPage;\n\t\t\t// if we've never updated the value or it was done longer ago than the most\n\t\t\t// recent updated sizing/bounds we need to update\n\t\t\tif (forceUpdate || !updatedControls || (updatedControls < updatedBounds)) {\n\t\t\t\tperPage = list.controlsPerPage = this.calculateControlsPerPage(list);\n\t\t\t\t// update our time for future comparison\n\t\t\t\tlist._updatedControlsPerPage = utils.perfNow();\n\t\t\t}\n\t\t\treturn perPage;\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves the page index for the given record index.\n\t*\n\t* @private\n\t*/\n\tpageForIndex: function (list, i) {\n\t\tvar perPage = list.controlsPerPage || this.controlsPerPage(list);\n\t\treturn Math.floor(i / (perPage || 1));\n\t},\n\n\t/**\n\t* An indirect interface to the list's scroller's scrollToControl()\n\t* method. We provide this to create looser coupling between the\n\t* delegate and the list / scroller, and to enable subkinds of the\n\t* delegate to easily override scrollToControl() functionality to\n\t* include options specific to the scroller being used.\n\t*\n\t* @private\n\t*/\n\tscrollToControl: function (list, control) {\n\t\tlist.$.scroller.scrollToControl(control);\n\t},\n\n\t/**\n\t* An indirect interface to the list's scroller's scrollTo()\n\t* method. We provide this to create looser coupling between the\n\t* delegate and the list / scroller, and to enable subkinds of the\n\t* delegate to easily override scrollTo() functionality to\n\t* include options specific to the scroller being used.\n\t*\n\t* @private\n\t*/\n\tscrollTo: function (list, x, y) {\n\t\tlist.$.scroller.scrollTo(x, y);\n\t},\n\n\t/**\n\t* Attempts to scroll to the given index.\n\t*\n\t* @param {enyo.DataList} list - The [list]{@link enyo.DataList} to perform this action on.\n\t* @param {Number} i - The index to scroll to.\n\t* @private\n\t*/\n\tscrollToIndex: function (list, i) {\n\t\t\t// first see if the child is already available to scroll to\n\t\tvar c = this.childForIndex(list, i),\n\t\t\t// but we also need the page so we can find its position\n\t\t\tp = this.pageForIndex(list, i);\n\t\t// if there is no page then the index is bad\n\t\tif (p < 0 || p > this.pageCount(list)) { return; }\n\t\t// if there isn't one, then we know we need to go ahead and\n\t\t// update, otherwise we should be able to use the scroller's\n\t\t// own methods to find it\n\t\tlist.$.scroller.stop();\n\t\tif (c) {\n\t\t\tthis.scrollToControl(list, c);\n\t\t} else {\n\t\t\t// we do this to ensure we trigger the paging event when necessary\n\t\t\tthis.resetToPosition(list, this.pagePosition(list, p));\n\t\t\t// now retry the original logic until we have this right\n\t\t\tlist.startJob('vertical_delegate_scrollToIndex', function () {\n\t\t\t\tlist.scrollToIndex(i);\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t* Returns the calculated height for the given page.\n\t*\n\t* @private\n\t*/\n\tpageHeight: function (list, page) {\n\t\tvar h = page.node.offsetHeight;\n\t\tvar m = list.metrics.pages[page.index];\n\t\tvar len = list.collection? list.collection.length: 0;\n\t\tif (h === 0 && len && page.node.children.length) {\n\t\t\tlist.heightNeedsUpdate = true;\n\t\t\t// attempt to reuse the last known height for this page\n\t\t\th = m? m.height: 0;\n\t\t}\n\t\treturn h;\n\t},\n\n\t/**\n\t* Returns the calculated width for the given page.\n\t*\n\t* @private\n\t*/\n\tpageWidth: function (list, page) {\n\t\tvar w = page.node.offsetWidth;\n\t\tvar m = list.metrics.pages[page.index];\n\t\tvar len = list.collection? list.collection.length: 0;\n\t\tif (w === 0 && len && page.node.children.length) {\n\t\t\tlist.widthNeedsUpdate = true;\n\t\t\t// attempt to reuse the last known width for this page\n\t\t\tw = m? m.width: 0;\n\t\t}\n\t\treturn w;\n\t},\n\n\t/**\n\t* Attempts to intelligently decide when to force updates for [models]{@link enyo.Model}\n\t* being added, if the models are part of any visible pages. For now, an assumption is\n\t* made that records being added are ordered and sequential.\n\t*\n\t* @private\n\t*/\n\tmodelsAdded: function (list, props) {\n\n\t\t// if the list has not already reset, reset\n\t\tif (!list.hasReset) return this.reset(list);\n\n\t\tvar cpp = this.controlsPerPage(list),\n\t\t\tend = Math.max(list.$.page1.start, list.$.page2.start) + cpp;\n\n\t\t// note that this will refresh the following scenarios\n\t\t// 1. if the dataset was spliced in above the current indices and the last index added was\n\t\t//    less than the first index rendered\n\t\t// 2. if the dataset was spliced in above the current indices and overlapped some of the\n\t\t//    current indices\n\t\t// 3. if the dataset was spliced in above the current indices and completely overlapped\n\t\t//    the current indices (pushing them all down)\n\t\t// 4. if the dataset was spliced inside the current indices (pushing some down)\n\t\t// 5. if the dataset was appended to the current dataset and was inside the indices that\n\t\t//    should be currently rendered (there was a partially filled page)\n\n\t\t// the only time we don't refresh is if the first index of the contiguous set of added\n\t\t// models is beyond our final rendered page (possible) indices\n\n\t\t// in the case where it does not need to refresh the existing controls it will update its\n\t\t// measurements and page positions within the buffer so scrolling can continue properly\n\n\t\t// if we need to refresh, do it now and ensure that we're properly setup to scroll\n\t\t// if we were adding to a partially filled page\n\t\tif (props.index <= end ) this.refresh(list);\n\t\telse {\n\t\t\t// we still need to ensure that the metrics are updated so it knows it can scroll\n\t\t\t// past the boundaries of the current pages (potentially)\n\t\t\tthis.adjustBuffer(list);\n\t\t\tthis.adjustPagePositions(list);\n\t\t}\n\t},\n\n\t/**\n\t* Attempts to find the [control]{@link enyo.Control} for the requested index.\n\t*\n\t* @private\n\t*/\n\tchildForIndex: function (list, i) {\n\t\tvar p  = this.pageForIndex(list, i),\n\t\t\tp1 = list.$.page1,\n\t\t\tp2 = list.$.page2;\n\t\tp = (p==p1.index && p1) || (p==p2.index && p2);\n\t\tif (p) {\n\t\t\tfor (var j=0, c; (c=p.children[j]); ++j) {\n\t\t\t\tif (c.index == i) {\n\t\t\t\t\treturn c;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Attempts to intelligently decide when to force updates for [models]{@link enyo.Model}\n\t* being removed, if the models are part of any visible pages.\n\t*\n\t* @private\n\t*/\n\tmodelsRemoved: function (list, props) {\n\n\t\t// if the list has not already reset, reset\n\t\tif (!list.hasReset) return this.reset(list);\n\n\t\tvar pg1 = list.$.page1,\n\t\t\tpg2 = list.$.page2,\n\t\t\tlastIdx = Math.max(pg1.end, pg2.end);\n\n\t\t// props.models is removed modelList and the lowest index among removed models\n\t\tif (props.models.low <= lastIdx) {\n\t\t\tthis.refresh(list);\n\t\t}\n\t},\n\n\t/**\n\t* Recalculates the buffer size based on the current metrics for the given list. This\n\t* may not be completely accurate until the final page is scrolled into view.\n\t*\n\t* @private\n\t*/\n\tadjustBuffer: function (list) {\n\t\tvar pc = this.pageCount(list),\n\t\t\tds = this.defaultPageSize(list),\n\t\t\tbs = 0, sp = list.psizeProp, ss = list.ssizeProp,\n\t\t\tn = list.$.buffer.node || list.$.buffer.hasNode(), p;\n\t\tif (n) {\n\t\t\tif (pc !== 0) {\n\t\t\t\tfor (var i=0; i<pc; ++i) {\n\t\t\t\t\tp = list.metrics.pages[i];\n\t\t\t\t\tbs += (p && p[sp]) || ds;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlist.bufferSize = bs;\n\t\t\tn.style[sp] = bs + 'px';\n\t\t\tn.style[ss] = this[ss](list) + 'px';\n\t\t\tlist.$.scroller.remeasure();\n\t\t}\n\t},\n\n\t/**\n\t* Ensures that the pages are positioned according to their calculated positions,\n\t* updating if necessary.\n\t*\n\t* @private\n\t*/\n\tadjustPagePositions: function (list) {\n\t\tfor (var i=0, p; (p=list.pages[i]); ++i) {\n\t\t\tvar pi = p.index,\n\t\t\t\tcp = this.pagePosition(list, p.index),\n\t\t\t\tmx = list.metrics.pages[pi] || (list.metrics.pages[pi] = {}),\n\t\t\t\tpp = list.posProp,\n\t\t\t\tup = list.upperProp,\n\t\t\t\tlp = list.lowerProp,\n\t\t\t\tsp = list.psizeProp;\n\t\t\tp.node.style[pp] = cp + 'px';\n\t\t\tp[up] = mx[up] = cp;\n\t\t\tp[lp] = mx[lp] = (mx[sp] + cp);\n\t\t}\n\t\tthis.setScrollThreshold(list);\n\t},\n\n\t/**\n\t* Retrieves the assumed position for the requested page index.\n\t*\n\t* @private\n\t*/\n\tpagePosition: function (list, index) {\n\t\tvar mx = list.metrics.pages,\n\t\t\tds = this.defaultPageSize(list),\n\t\t\ttt = 0, sp = list.psizeProp, cp;\n\t\twhile (index > 0) {\n\t\t\tcp = mx[--index];\n\t\t\t// if the index is > 0 then we need to ensure we have at least\n\t\t\t// the minimum height available so this is a deliberate 'fail-on-zero' case\n\t\t\ttt += (cp && cp[sp]? cp[sp]: ds);\n\t\t}\n\t\treturn tt;\n\t},\n\n\t/**\n\t* Retrieves the default page size.\n\t*\n\t* @private\n\t*/\n\tdefaultPageSize: function (list) {\n\t\tvar perPage = list.controlsPerPage || this.controlsPerPage(list);\n\t\treturn (perPage * (list.fixedChildSize || list.childSize || 100));\n\t},\n\n\t/**\n\t* Retrieves the number of pages for the given [list]{@link enyo.DataList}.\n\t*\n\t* @private\n\t*/\n\tpageCount: function (list) {\n\t\tvar perPage = list.controlsPerPage || this.controlsPerPage(list);\n\t\tvar len = list.collection? list.collection.length: 0;\n\t\treturn (Math.ceil(len / (perPage || 1)));\n\t},\n\n\t/**\n\t* Retrieves the current (and desired) scroll position from the\n\t* [scroller]{@link enyo.Scroller} for the given list.\n\t*\n\t* @private\n\t*/\n\tgetScrollPosition: function (list) {\n\t\treturn list.$.scroller.getScrollTop();\n\t},\n\n\t/**\n\t* Sets the scroll position on the [scroller]{@link enyo.Scroller}\n\t* owned by the given list.\n\t*\n\t* @private\n\t*/\n\tsetScrollPosition: function (list, pos) {\n\t\tlist.$.scroller.setScrollTop(pos);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollHandler: function (list, bounds) {\n\t\tvar last = this.pageCount(list)-1,\n\t\t\tpos  = this.pagesByPosition(list);\n\t\tif ((bounds.xDir === 1 || bounds.yDir === 1) && pos.lastPage.index !== (last)) {\n\t\t\tthis.generatePage(list, pos.firstPage, pos.lastPage.index + 1);\n\t\t\tthis.adjustPagePositions(list);\n\t\t\tthis.adjustBuffer(list);\n\t\t\t// note that the reference to the page positions has been udpated by\n\t\t\t// another method so we trust the actual pages\n\t\t\tlist.triggerEvent('paging', {\n\t\t\t\tstart: pos.firstPage.start,\n\t\t\t\tend: pos.lastPage.end,\n\t\t\t\taction: 'scroll'\n\t\t\t});\n\t\t} else if ((bounds.xDir === -1 || bounds.yDir === -1) && pos.firstPage.index !== 0) {\n\t\t\tthis.generatePage(list, pos.lastPage, pos.firstPage.index - 1);\n\t\t\tthis.adjustPagePositions(list);\n\t\t\tthis.adjustBuffer(list);\n\t\t\t// note that the reference to the page positions has been udpated by\n\t\t\t// another method so we trust the actual pages\n\t\t\tlist.triggerEvent('paging', {\n\t\t\t\tstart: pos.firstPage.start,\n\t\t\t\tend: pos.lastPage.end,\n\t\t\t\taction: 'scroll'\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetScrollThreshold: function (list) {\n\t\tvar threshold = list.scrollThreshold || (list.scrollThreshold={}),\n\t\t\tmetrics   = list.metrics.pages,\n\t\t\tpos       = this.pagesByPosition(list),\n\t\t\tfirstIdx  = pos.firstPage.index,\n\t\t\tlastIdx   = pos.lastPage.index,\n\t\t\tcount     = this.pageCount(list)-1,\n\t\t\tlowerProp = list.lowerProp,\n\t\t\tupperProp = list.upperProp,\n\t\t\tfn        = upperProp == 'top'? this.height: this.width;\n\t\t// now to update the properties the scroller will use to determine\n\t\t// when we need to be notified of position changes requiring paging\n\t\tif (firstIdx === 0) {\n\t\t\tthreshold[upperProp] = undefined;\n\t\t} else {\n\t\t\tthreshold[upperProp] = (metrics[firstIdx][upperProp] + this.childSize(list));\n\t\t}\n\t\tif (lastIdx >= count) {\n\t\t\tthreshold[lowerProp] = undefined;\n\t\t} else {\n\t\t\tthreshold[lowerProp] = (metrics[lastIdx][lowerProp] - fn.call(this, list) - this.childSize(list));\n\t\t}\n\t\tif (list.usingScrollListener) {\n\t\t\tlist.$.scroller.setScrollThreshold(threshold);\n\t\t}\n\t},\n\n\t/**\n\t* Determines which two pages to generate, based on a\n\t* specific target scroll position.\n\t*\n\t* @private\n\t*/\n\tassignPageIndices: function (list, targetPos) {\n\t\tvar index1, index2, bias,\n\t\t\tpc = this.pageCount(list),\n\t\t\tlast = Math.max(0, pc - 1),\n\t\t\tcurrentPos = this.getScrollPosition(list);\n\n\t\t// If no target position was specified, use the current position\n\t\tif (typeof targetPos == 'undefined') {\n\t\t\ttargetPos = currentPos;\n\t\t}\n\n\t\t// Make sure the target position is in-bounds\n\t\ttargetPos = Math.max(0, Math.min(targetPos, list.bufferSize));\n\n\t\t// First, we find the target page (the one that covers the target position)\n\t\tindex1 = Math.floor(targetPos / this.defaultPageSize(list));\n\t\tindex1 = Math.min(index1, last);\n\n\t\t// Our list always generates two pages worth of content, so -- now that we have\n\t\t// our target page -- we need to pick either the preceding page or the following\n\t\t// page to generate as well. To help us decide, we first determine how our\n\t\t// target position relates to our current position. If we know which direction\n\t\t// we're moving in, it's generally better to render the page that lies between\n\t\t// our current position and our target position, in case we are about to scroll\n\t\t// \"lazily\" to an element near the edge of our target page. If we don't have any\n\t\t// information to work with, we arbitrarily favor the following page.\n\t\tbias = (targetPos > currentPos) ? -1 : 1;\n\n\t\t// Now we know everything we need to choose our second page...\n\t\tindex2 =\n\t\t\t// If our target page is the first page (index == 0), there is no preceding\n\t\t\t// page -- so we choose the following page (index == 1). Note that our\n\t\t\t// our target page will always be (index == 0) if the list is empty or has\n\t\t\t// only one page worth of content. Picking (index == 1) for our second page\n\t\t\t// in these cases is fine, though the page won't contain any elements.\n\t\t\t(index1 === 0) ? 1 :\n\t\t\t// If target page is the last page, there is no following page -- so we choose\n\t\t\t// the preceding page.\n\t\t\t(index1 === last) ? index1 - 1 :\n\t\t\t// In all other cases, we pick a page using our previously determined bias.\n\t\t\tindex1 + bias;\n\n\t\tlist.$.page1.index = index1;\n\t\tlist.$.page2.index = index2;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresetToPosition: function (list, px) {\n\t\tthis.assignPageIndices(list, px);\n\t\tthis.generate(list);\n\t\tlist.triggerEvent('paging', {\n\t\t\tstart: list.$.page1.start,\n\t\t\tend: list.$.page2.end,\n\t\t\taction: 'reset'\n\t\t});\n\t},\n\t/**\n\t* Handles scroll [events]{@glossary event} for the given [list]{@link enyo.DataList}.\n\t* The events themselves aren't helpful, as, depending on the underlying\n\t* `scrollStrategy`, they have varied information. This is a hefty method, but it is\n\t* contained to keep from calling too many [functions]{@glossary Function} whenever\n\t* this event is propagated.\n\t*\n\t* @private\n\t*/\n\tdidScroll: function (list, event) {\n\t\tif (!list.usingScrollListener) {\n\t\t\tvar threshold = list.scrollThreshold,\n\t\t\t\tbounds    = event.scrollBounds,\n\t\t\t\tds        = this.defaultPageSize(list),\n\t\t\t\tlowerProp = list.lowerProp,\n\t\t\t\tupperProp = list.upperProp,\n\t\t\t\tpos       = bounds[upperProp],\n\t\t\t\tut        = threshold[upperProp],\n\t\t\t\tlt        = threshold[lowerProp];\n\t\t\tif (bounds.xDir === 1 || bounds.yDir === 1) {\n\t\t\t\tif (!isNaN(lt)) {\n\t\t\t\t\tif (pos >= lt) {\n\t\t\t\t\t\tif (pos >= lt + ds) {\n\t\t\t\t\t\t\t// big jump\n\t\t\t\t\t\t\tthis.resetToPosition(list, pos);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// continuous scrolling\n\t\t\t\t\t\t\tthis.scrollHandler(list, bounds);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (bounds.yDir === -1 || bounds.xDir === -1) {\n\t\t\t\tif (!isNaN(ut) && (pos <= ut)) {\n\t\t\t\t\tif (pos <= ut) {\n\t\t\t\t\t\tif (pos <= ut - ds) {\n\t\t\t\t\t\t\t// big jump\n\t\t\t\t\t\t\tthis.resetToPosition(list, pos);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//continuous scrolling\n\t\t\t\t\t\t\tthis.scrollHandler(list, bounds);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* The delegate's `resize` event handler.\n\t*\n\t* @private\n\t*/\n\tdidResize: function (list) {\n\t\tvar prevCPP = list.controlsPerPage;\n\n\t\tlist._updateBounds = true;\n\t\tthis.updateBounds(list);\n\t\t// Need to update our controlsPerPage value immediately,\n\t\t// before any cached metrics are used\n\t\tthis.controlsPerPage(list);\n\t\tif (prevCPP !== list.controlsPerPage) {\n\t\t\t// since we are now using a different number of controls per page,\n\t\t\t// we need to invalidate our cached page metrics\n\t\t\tlist.metrics.pages = {};\n\t\t}\n\t\tthis.resetToPosition(list);\n\t},\n\n\t/**\n\t* Returns the height for the given [list]{@link enyo.DataList}. This value\n\t* is cached and reused until the list is resized.\n\t*\n\t* @private\n\t*/\n\theight: function (list) {\n\t\tif (list._updateBounds) { this.updateBounds(list); }\n\t\treturn list.boundsCache.height;\n\t},\n\n\t/**\n\t* Returns the width for the given [list]{@link enyo.DataList}. This value\n\t* is cached and reused until the list is resized.\n\t*\n\t* @private\n\t*/\n\twidth: function (list) {\n\t\tif (list._updateBounds) { this.updateBounds(list); }\n\t\treturn list.boundsCache.width;\n\t},\n\n\t/**\n\t* Updates the cached values for the sizing of the given list.\n\t*\n\t* @private\n\t*/\n\tupdateBounds: function (list) {\n\t\tlist.boundsCache    = list.getBounds();\n\t\tlist._updatedBounds = utils.perfNow();\n\t\tlist._updateBounds  = false;\n\t},\n\n\t/**\n\t* Returns the `start` and `end` indices of the visible controls. Partially visible controls\n\t* are included if the amount visible exceeds the {@link enyo.DataList#visibleThreshold}.\n\t*\n\t* @private\n\t*/\n\tgetVisibleControlRange: function (list) {\n\t\tvar ret = {\n\t\t\t\tstart: -1,\n\t\t\t\tend: -1\n\t\t\t},\n\t\t\tposProp = list.posProp,\n\t\t\tsizeProp = list.psizeProp,\n\t\t\tsize = this[sizeProp](list),\n\t\t\tscrollPosition = this.getScrollPosition(list),\n\t\t\tpages = list.pages.slice(0).sort(function (a, b) {\n\t\t\t\treturn a.start - b.start;\n\t\t\t}),\n\t\t\ti = 0,\n\t\t\tmax = list.collection? list.collection.length - 1 : 0,\n\t\t\tcpp = list.controlsPerPage,\n\t\t\tadjustedScrollPosition, p, bounds, ratio;\n\n\t\t// find the first showing page and estimate the start and end indices\n\t\twhile ((p = pages[i++])) {\n\t\t\tbounds = p.getBounds();\n\t\t\tbounds.right = list.bufferSize - bounds.left - bounds.width;\n\n\t\t\tadjustedScrollPosition = scrollPosition - list.scrollPositionOffset;\n\n\t\t\tif (scrollPosition >= bounds[posProp] && scrollPosition < bounds[posProp] + bounds[sizeProp]) {\n\t\t\t\tratio = cpp/bounds[sizeProp];\n\t\t\t\tret.start = Math.min(max, Math.max(0, Math.round((adjustedScrollPosition - bounds[posProp])*ratio) + p.start));\n\t\t\t\tret.end = Math.min(max, Math.round(size*ratio) + ret.start);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tret.start = this.adjustIndex(list, ret.start, p, bounds, adjustedScrollPosition, true);\n\t\tret.end = Math.max(ret.start, this.adjustIndex(list, ret.end, p, bounds, adjustedScrollPosition + size, false));\n\n\t\treturn ret;\n\t},\n\n\t/**\n\t* Calculates the scroll position offset to account for the dimensions of any controls that\n\t* are within the scroller but precede the pages.\n\t*\n\t* @param  {enyo.DataList} list            The instance of enyo.DataList\n\t* @private\n\t*/\n\tcalcScrollOffset: function (list) {\n\t\tvar wrapper = list.pages[0].parent.hasNode(),\n\t\t\tscroller = list.$.scroller.hasNode(),\n\t\t\tposProp = list.posProp,\n\t\t\tposition;\n\n\t\t// these should always be truthy in production scenarios but since the nodes aren't\n\t\t// actually rendered in mocha, the tests fail so guarding against that.\n\t\tif (wrapper && scroller) {\n\t\t\tposition = Dom.calcNodePosition(wrapper, scroller);\n\t\t\tlist.scrollPositionOffset = position[posProp];\n\t\t} else {\n\t\t\tlist.scrollPositionOffset = 0;\n\t\t}\n\t},\n\n\t/**\n\t* Refines an estimated `index` to a precise index by evaluating the bounds of the control at\n\t* the estimated `index` against the visible area and adjusting it up or down based on the\n\t* actual bounds and the `list`'s {@link enyo.DataList#visibleThreshold}.\n\t*\n\t* @param {enyo.DataList} list\n\t* @param {Number}        index           Estimated index\n\t* @param {enyo.Control}  page            Page control containing control at `index`\n\t* @param {Object}        pageBounds      Bounds of `page`\n\t* @param {Number}        scrollBoundary  Edge of visible area (top, bottom, left, or right)\n\t* @param {Boolean}       start           `true` for start of boundary (top, right), `false`\n\t*   for end\n\t* @private\n\t*/\n\tadjustIndex: function (list, index, page, pageBounds, scrollBoundary, start) {\n\t\tvar dir = start? -1 : 1,\n\t\t\tposProp = list.posProp,\n\t\t\tsizeProp  = list.psizeProp,\n\t\t\tmax = list.collection? list.collection.length - 1 : 0,\n\t\t\tlast, control, bounds,\n\n\t\t\t// edge of control\n\t\t\tedge,\n\n\t\t\t// distance from edge of control to scroll boundary\n\t\t\tdEdge,\n\n\t\t\t// distance from visible threshold to scroll boundary\n\t\t\tdThresh;\n\n\t\tdo {\n\t\t\tcontrol = list.getChildForIndex(index);\n\n\t\t\t// if index is on a boundary (other than 0) and the control is fully visible, the\n\t\t\t// control at index may not exist if the buffer page hasn't shifted to cover this\n\t\t\t// index range yet. If that's the case, revert to our previous index and stop.\n\t\t\tif (!control) {\n\t\t\t\tindex = last;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// account for crossing page boundaries\n\t\t\tif (control.parent != page) {\n\t\t\t\tpage = control.parent;\n\t\t\t\tpageBounds = page.getBounds();\n\t\t\t}\n\n\t\t\tbounds = control.getBounds();\n\t\t\tbounds.right = pageBounds.width - bounds.left - bounds.width;\n\n\t\t\tedge = bounds[posProp] + pageBounds[posProp] + (start? 0 : bounds[sizeProp]);\n\t\t\tdEdge = edge - scrollBoundary;\n\t\t\tdThresh = dEdge - dir*bounds[sizeProp]*(1-list.visibleThreshold)\t;\n\n\t\t\tif ((start && dEdge > 0) || (!start && dEdge < 0)) {\n\t\t\t\t// control is fully visible\n\t\t\t\tif (last !== index + dir) {\n\t\t\t\t\tlast = index;\n\t\t\t\t\tindex += dir;\n\t\t\t\t} else {\n\t\t\t\t\t// if this control is fully visible but the last was too obscured, use this\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if ((start && dThresh >= 0) || (!start && dThresh <= 0)) {\n\t\t\t\t// control is partially obscured but enough is visible\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\t// control is too obscured\n\t\t\t\tif (last !== index - dir) {\n\t\t\t\t\tlast = index;\n\t\t\t\t\tindex -= dir;\n\t\t\t\t} else {\n\t\t\t\t\t// use the last since this is too obscured\n\t\t\t\t\tindex = last;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// guard against selecting an index that is out of bounds\n\t\t\tif (index < 0) {\n\t\t\t\tindex = 0;\n\t\t\t\tbreak;\n\t\t\t} else if (index > max) {\n\t\t\t\tindex = max;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} while (true);\n\n\t\treturn index;\n\t}\n};","require('../../enyo');\n\nvar\n\tlogger = require('./logger'),\n\tutils = require('./utils'),\n\toptions = require('./options');\n\nvar defaultCtor = null;\n\n/**\n* Creates a JavaScript [constructor]{@glossary constructor} function with\n* a prototype defined by `props`. **All constructors must have a unique name.**\n*\n* `enyo.kind()` makes it easy to build a constructor-with-prototype (like a\n* class) that has advanced features like prototype-chaining\n* ([inheritance]{@glossary inheritance}).\n*\n* A plug-in system is included for extending the abilities of the\n* [kind]{@glossary kind} generator, and constructors are allowed to\n* perform custom operations when subclassed.\n*\n* If you make changes to `enyo.kind()`, be sure to add or update the appropriate\n* [unit tests](@link https://github.com/enyojs/enyo/tree/master/tools/test/core/tests).\n*\n* For more information, see the documentation on\n* [Kinds]{@linkplain $dev-guide/key-concepts/kinds.html} in the Enyo Developer Guide.\n*\n* @namespace enyo.kind\n* @param {Object} props - A [hash]{@glossary Object} of properties used to define and create\n*\tthe [kind]{@glossary kind}\n* @public\n*/\nvar kind = exports = module.exports = function (props) {\n\t// extract 'name' property\n\tvar name = props.name || '';\n\tdelete props.name;\n\t// extract 'kind' property\n\tvar hasKind = ('kind' in props);\n\tvar kindName = props.kind;\n\tdelete props.kind;\n\t// establish base class reference\n\tvar base = constructorForKind(kindName);\n\tvar isa = base && base.prototype || null;\n\t// if we have an explicit kind property with value undefined, we probably\n\t// tried to reference a kind that is not yet in scope\n\tif (hasKind && kindName === undefined || base === undefined) {\n\t\tvar problem = kindName === undefined ? 'undefined kind' : 'unknown kind (' + kindName + ')';\n\t\tthrow 'enyo.kind: Attempt to subclass an ' + problem + '. Check dependencies for [' + (name || '<unnamed>') + '].';\n\t}\n\t// make a boilerplate constructor\n\tvar ctor = kind.makeCtor();\n\t// semi-reserved word 'constructor' causes problems with Prototype and IE, so we rename it here\n\tif (props.hasOwnProperty('constructor')) {\n\t\tprops._constructor = props.constructor;\n\t\tdelete props.constructor;\n\t}\n\t// create our prototype\n\t//ctor.prototype = isa ? enyo.delegate(isa) : {};\n\tutils.setPrototype(ctor, isa ? utils.delegate(isa) : {});\n\t// there are special cases where a base class has a property\n\t// that may need to be concatenated with a subclasses implementation\n\t// as opposed to completely overwriting it...\n\tkind.concatHandler(ctor, props);\n\n\t// put in our props\n\tutils.mixin(ctor.prototype, props);\n\t// alias class name as 'kind' in the prototype\n\t// but we actually only need to set this if a new name was used,\n\t// not if it is inheriting from a kind anonymously\n\tif (name) {\n\t\tctor.prototype.kindName = name;\n\t}\n\t// this is for anonymous constructors\n\telse {\n\t\tctor.prototype.kindName = base && base.prototype? base.prototype.kindName: '';\n\t}\n\t// cache superclass constructor\n\tctor.prototype.base = base;\n\t// reference our real constructor\n\tctor.prototype.ctor = ctor;\n\t// support pluggable 'features'\n\tutils.forEach(kind.features, function(fn){ fn(ctor, props); });\n\t\n\tif (name) kindCtors[name] = ctor;\n\t\n\treturn ctor;\n};\n\nexports.setDefaultCtor = function (ctor) {\n\tdefaultCtor = ctor;\n};\n\nvar getDefaultCtor = exports.getDefaultCtor = function () {\n\treturn defaultCtor;\n};\n\n/**\n* @private\n*/\nvar concatenated = exports.concatenated = [];\n\n/**\n* Creates a singleton of a given [kind]{@glossary kind} with a given\n* definition. **The `name` property will be the instance name of the singleton\n* and must be unique.**\n*\n* ```javascript\n*\tenyo.singleton({\n*\t\tkind: 'enyo.Control',\n*\t\tname: 'app.MySingleton',\n*\t\tpublished: {\n*\t\t\tvalue: 'foo'\n*\t\t},\n*\t\tmakeSomething: function() {\n*\t\t\t//...\n*\t\t}\n*\t});\n*\n*\tapp.MySingleton.makeSomething();\n*\tapp.MySingleton.setValue('bar');\n*```\n*\n* @public\n*/\nexports.singleton = function (conf, context) {\n\t// extract 'name' property (the name of our singleton)\n\tvar name = conf.name;\n\tdelete(conf.name);\n\t// create an unnamed kind and save its constructor's function\n\tvar Kind = kind(conf);\n\tvar inst;\n\t// create the singleton with the previous name and constructor\n\tutils.setPath.call(context || global, name, (inst = new Kind()));\n\treturn inst;\n};\n\n/**\n* @private\n*/\nkind.makeCtor = function () {\n\tvar enyoConstructor = function () {\n\t\tif (!(this instanceof enyoConstructor)) {\n\t\t\tthrow 'enyo.kind: constructor called directly, not using \"new\"';\n\t\t}\n\n\t\t// two-pass instantiation\n\t\tvar result;\n\t\tif (this._constructor) {\n\t\t\t// pure construction\n\t\t\tresult = this._constructor.apply(this, arguments);\n\t\t}\n\t\t// defer initialization until entire constructor chain has finished\n\t\tif (this.constructed) {\n\t\t\t// post-constructor initialization\n\t\t\tthis.constructed.apply(this, arguments);\n\t\t}\n\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t};\n\treturn enyoConstructor;\n};\n\n/**\n* Classes referenced by name may omit this namespace (e.g., \"Button\" instead of \"enyo.Button\")\n*\n* @private\n*/\nkind.defaultNamespace = 'enyo';\n\n/**\n* Feature hooks for the oop system\n*\n* @private\n*/\nkind.features = [];\n\n/**\n* Used internally by several mechanisms to allow safe and normalized handling for extending a\n* [kind's]{@glossary kind} super-methods. It can take a\n* [constructor]{@glossary constructor}, a [prototype]{@glossary Object.prototype}, or an\n* instance.\n*\n* @private\n*/\nkind.extendMethods = function (ctor, props, add) {\n\tvar proto = ctor.prototype || ctor,\n\t\tb = proto.base;\n\tif (!proto.inherited && b) {\n\t\tproto.inherited = kind.inherited;\n\t}\n\t// rename constructor to _constructor to work around IE8/Prototype problems\n\tif (props.hasOwnProperty('constructor')) {\n\t\tprops._constructor = props.constructor;\n\t\tdelete props.constructor;\n\t}\n\t// decorate function properties to support inherited (do this ex post facto so that\n\t// ctor.prototype is known, relies on elements in props being copied by reference)\n\tfor (var n in props) {\n\t\tvar p = props[n];\n\t\tif (isInherited(p)) {\n\t\t\t// ensure that if there isn't actually a super method to call, it won't\n\t\t\t// fail miserably - while this shouldn't happen often, it is a sanity\n\t\t\t// check for mixin-extensions for kinds\n\t\t\tif (add) {\n\t\t\t\tp = proto[n] = p.fn(proto[n] || utils.nop);\n\t\t\t} else {\n\t\t\t\tp = proto[n] = p.fn(b? (b.prototype[n] || utils.nop): utils.nop);\n\t\t\t}\n\t\t}\n\t\tif (utils.isFunction(p)) {\n\t\t\tif (add) {\n\t\t\t\tproto[n] = p;\n\t\t\t\tp.displayName = n + '()';\n\t\t\t} else {\n\t\t\t\tp._inherited = b? b.prototype[n]: null;\n\t\t\t\t// FIXME: we used to need some extra values for inherited, then inherited got cleaner\n\t\t\t\t// but in the meantime we used these values to support logging in Object.\n\t\t\t\t// For now we support this legacy situation, by suppling logging information here.\n\t\t\t\tp.displayName = proto.kindName + '.' + n + '()';\n\t\t\t}\n\t\t}\n\t}\n};\nkind.features.push(kind.extendMethods);\n\n/**\n* Called by {@link enyo.Object} instances attempting to access super-methods\n* of a parent class ([kind]{@glossary kind}) by calling\n* `this.inherited(arguments)` from within a kind method. This can only be done\n* safely when there is known to be a super class with the same method.\n*\n* @private\n*/\nkind.inherited = function (originals, replacements) {\n\t// one-off methods are the fast track\n\tvar target = originals.callee;\n\tvar fn = target._inherited;\n\n\t// regardless of how we got here, just ensure we actually\n\t// have a function to call or else we throw a console\n\t// warning to notify developers they are calling a\n\t// super method that doesn't exist\n\tif ('function' === typeof fn) {\n\t\tvar args = originals;\n\t\tif (replacements) {\n\t\t\t// combine the two arrays, with the replacements taking the first\n\t\t\t// set of arguments, and originals filling up the rest.\n\t\t\targs = [];\n\t\t\tvar i = 0, l = replacements.length;\n\t\t\tfor (; i < l; ++i) {\n\t\t\t\targs[i] = replacements[i];\n\t\t\t}\n\t\t\tl = originals.length;\n\t\t\tfor (; i < l; ++i) {\n\t\t\t\targs[i] = originals[i];\n\t\t\t}\n\t\t}\n\t\treturn fn.apply(this, args);\n\t} else {\n\t\tlogger.warn('enyo.kind.inherited: unable to find requested ' +\n\t\t\t'super-method from -> ' + originals.callee.displayName + ' in ' + this.kindName);\n\t}\n};\n\n// dcl inspired super-inheritance\n\n/**\n* @private\n*/\nvar Inherited = function (fn) {\n\tthis.fn = fn;\n};\n\n/**\n* When defining a method that overrides an existing method in a [kind]{@glossary kind}, you\n* can wrap the definition in this function and it will decorate it appropriately for inheritance\n* to work.\n*\n* The older `this.inherited(arguments)` method still works, but this version results in much\n* faster code and is the only one supported for kind [mixins]{@glossary mixin}.\n*\n* @param {Function} fn - A [function]{@glossary Function} that takes a single\n*   argument (usually named `sup`) and returns a function where\n*   `sup.apply(this, arguments)` is used as a mechanism to make the\n*   super-call.\n* @public\n*/\nvar inherit = exports.inherit = function (fn) {\n\treturn new Inherited(fn);\n};\n\n/**\n* @private\n*/\nvar isInherited = exports.isInherited = function (fn) {\n\treturn fn && (fn instanceof Inherited);\n};\n\n\n//\n// 'statics' feature\n//\nkind.features.push(function(ctor, props) {\n\t// install common statics\n\tif (!ctor.subclass) {\n\t\tctor.subclass = kind.statics.subclass;\n\t}\n\tif (!ctor.extend) {\n\t\tctor.extend = kind.statics.extend;\n\t}\n\t// move props statics to constructor\n\tif (props.statics) {\n\t\tutils.mixin(ctor, props.statics);\n\t\tdelete ctor.prototype.statics;\n\t}\n\t// also support protectedStatics which won't interfere with defer\n\tif (props.protectedStatics) {\n\t\tutils.mixin(ctor, props.protectedStatics);\n\t\tdelete ctor.prototype.protectedStatics;\n\t}\n\t// allow superclass customization\n\tvar base = ctor.prototype.base;\n\twhile (base) {\n\t\tbase.subclass(ctor, props);\n\t\tbase = base.prototype.base;\n\t}\n});\n\n/**\n* @private\n*/\nkind.statics = {\n\n\t/**\n\t* A [kind]{@glossary kind} may set its own `subclass()` method as a\n\t* static method for its [constructor]{@glossary constructor}. Whenever\n\t* it is subclassed, the constructor and properties will be passed through\n\t* this method for special handling of important features.\n\t*\n\t* @param {Function} ctor - The [constructor]{@glossary constructor} of the\n\t*\t[kind]{@glossary kind} being subclassed.\n\t* @param {Object} props - The properties of the kind being subclassed.\n\t* @memberof enyo.kind\n\t* @public\n\t*/\n\tsubclass: function (ctor, props) {},\n\n\t/**\n\t* Allows for extension of the current [kind]{@glossary kind} without\n\t* creating a new kind. This method is available on all\n\t* [constructors]{@glossary constructor}, although calling it on a\n\t* [deferred]{@glossary deferred} constructor will force it to be\n\t* resolved at that time. This method does not re-run the\n\t* {@link enyo.kind.features} against the constructor or instance.\n\t*\n\t* @param {Object|Object[]} props A [hash]{@glossary Object} or [array]{@glossary Array}\n\t*\tof [hashes]{@glossary Object}. Properties will override\n\t*\t[prototype]{@glossary Object.prototype} properties. If a\n\t*\tmethod that is being added already exists, the new method will\n\t*\tsupersede the existing one. The method may call\n\t*\t`this.inherited()` or be wrapped with `kind.inherit()` to call\n\t*\tthe original method (this chains multiple methods tied to a\n\t*\tsingle [kind]{@glossary kind}).\n\t* @param {Object} [target] - The instance to be extended. If this is not specified, then the\n\t*\t[constructor]{@glossary constructor} of the\n\t*\t[object]{@glossary Object} this method is being called on will\n\t*\tbe extended.\n\t* @returns {Object} The constructor of the class, or specific\n\t*\tinstance, that has been extended.\n\t* @memberof enyo.kind\n\t* @public\n\t*/\n\textend: function (props, target) {\n\t\tvar ctor = this\n\t\t\t, exts = utils.isArray(props)? props: [props]\n\t\t\t, proto, fn;\n\n\t\tfn = function (key, value) {\n\t\t\treturn !(typeof value == 'function' || isInherited(value)) && concatenated.indexOf(key) === -1;\n\t\t};\n\n\t\tproto = target || ctor.prototype;\n\t\tfor (var i=0, ext; (ext=exts[i]); ++i) {\n\t\t\tconcatHandler(proto, ext, true);\n\t\t\tkind.extendMethods(proto, ext, true);\n\t\t\tutils.mixin(proto, ext, {filter: fn});\n\t\t}\n\n\t\treturn target || ctor;\n\t}\n};\n\n/**\n* @private\n*/\nvar concatHandler = exports.concatHandler = function (ctor, props, instance) {\n\tvar proto = ctor.prototype || ctor\n\t\t, base = proto.ctor;\n\n\twhile (base) {\n\t\tif (base.concat) base.concat(ctor, props, instance);\n\t\tbase = base.prototype.base;\n\t}\n};\n\n/**\n* Factory for [kinds]{@glossary kind} identified by [strings]{@glossary String}.\n*\n* @private\n*/\nvar kindCtors = exports._kindCtors = {};\n\n/**\n* @private\n*/\nvar constructorForKind = exports.constructorForKind = function (kind) {\n\tif (kind === null) {\n\t\treturn kind;\n\t} else if (kind === undefined) {\n\t\treturn getDefaultCtor();\n\t}\n\telse if (utils.isFunction(kind)) {\n\t\treturn kind;\n\t}\n\n\t// use memoized constructor if available...\n\tvar ctor = kindCtors[kind];\n\tif (ctor) {\n\t\treturn ctor;\n\t}\n\t// otherwise look it up and memoize what we find\n\t//\n\t// if kind is an object in enyo, say \"Control\", then ctor = enyo[\"Control\"]\n\t// if kind is a path under enyo, say \"Heritage.Button\", then ctor = enyo[\"Heritage.Button\"] || enyo.Heritage.Button\n\t// if kind is a fully qualified path, say \"enyo.Heritage.Button\", then ctor = enyo[\"enyo.Heritage.Button\"] || enyo.enyo.Heritage.Button || enyo.Heritage.Button\n\t//\n\t// Note that kind \"Foo\" will resolve to enyo.Foo before resolving to global \"Foo\".\n\t// This is important so \"Image\" will map to built-in Image object, instead of enyo.Image control.\n\tctor = Theme[kind] || (global.enyo && gobal.enyo[kind]) || utils.getPath.call(global, 'enyo.' + kind) || global[kind] || utils.getPath.call(global, kind);\n\n\t// If what we found at this namespace isn't a function, it's definitely not a kind constructor\n\tif (!utils.isFunction(ctor)) {\n\t\tthrow '[' + kind + '] is not the name of a valid kind.';\n\t}\n\tkindCtors[kind] = ctor;\n\treturn ctor;\n};\n\n/**\n* Namespace for current theme (`enyo.Theme.Button` references the Button specialization for the\n* current theme).\n*\n* @private\n*/\nvar Theme = exports.Theme = {};\n\n/**\n* @private\n*/\nexports.registerTheme = function (ns) {\n\tutils.mixin(Theme, ns);\n};\n\n/**\n* @private\n*/\nexports.createFromKind = function (nom, param) {\n\tvar Ctor = nom && constructorForKind(nom);\n\tif (Ctor) {\n\t\treturn new Ctor(param);\n\t}\n};","var\n\tri = require('../../enyo/lib/resolution');\n\nri.defineScreenTypes([\n\t{name: 'hd',      pxPerRem: 16, width: 1280, height: 720,  aspectRatioName: 'hdtv'},\n\t{name: 'fhd',     pxPerRem: 24, width: 1920, height: 1080, aspectRatioName: 'hdtv', base: true},\n\t{name: 'uw-uxga', pxPerRem: 24, width: 2560, height: 1080, aspectRatioName: 'cinema'},\n\t{name: 'uhd',     pxPerRem: 48, width: 3840, height: 2160, aspectRatioName: 'hdtv'}\n]);\n\nmodule.exports = ri;","require('../../enyo');\n\nvar kind = require('./kind');\n\n/**\n* An internally-used support {@glossary mixin} that is applied to all\n* [components]{@link enyo.Component} of an {@link enyo.Application} instance\n* (and to their components, recursively). This mixin adds an `app` property to\n* each component--a local reference to the `enyo.Application` instance that\n* the component belongs to.\n* \n* @mixin enyo.ApplicationSupport\n* @protected\n*/\nmodule.exports = {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'ApplicationSupport',\n\n\t/**\n\t* @private\n\t*/\n\tadjustComponentProps: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tprops.app = props.app || this.app;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// release the reference to the application\n\t\t\tthis.app = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t})\n\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\n/**\n* All {@link enyo.Binding} instances are stored in this list and may be retrieved via the\n* {@link enyo.Binding.find} method using an {@link enyo.Binding#id} identifier.\n*\n* @name enyo.bindings\n* @public\n*/\nvar bindings = [];\n\nvar DIRTY_FROM = 0x01\n\t, DIRTY_TO = 0x02;\n\n/**\n* Used to determine if an {@link enyo.Binding} is actually ready.\n*\n* @private\n*/\nfunction ready (binding) {\n\tvar rdy = binding.ready;\n\t\n\tif (!rdy) {\n\t\t\n\t\tvar from = binding.from || '',\n\t\t\tto = binding.to || '',\n\t\t\tsource = binding.source,\n\t\t\ttarget = binding.target,\n\t\t\towner = binding.owner,\n\t\t\ttwoWay = !binding.oneWay,\n\t\t\ttoTarget;\n\t\t\n\t\tif (typeof from != 'string') from = '';\n\t\tif (typeof to != 'string') to = '';\n\t\t\n\t\tif (!source) {\n\t\t\t\n\t\t\t// the worst case scenario here is for backward compatibility purposes\n\t\t\t// we have to at least be able to derive the source via the from string\n\t\t\tif (from[0] == '^') {\n\t\t\t\t\n\t\t\t\t// this means we're reaching for a global\n\t\t\t\tvar fromParts = from.split('.');\n\t\t\t\tfrom = fromParts.pop();\n\t\t\t\tsource = utils.getPath(fromParts.join('.').slice(1));\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tsource = owner;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif (!target) {\n\t\t\t\n\t\t\t// same worst case as above, for backwards compatibility purposes\n\t\t\t// we have to at least be able to derive the target via the to string\n\t\t\tif (to[0] == '^') {\n\t\t\t\t\n\t\t\t\t// this means we're reaching for a global\n\t\t\t\tvar toParts = to.split('.');\n\t\t\t\tto = toParts.pop();\n\t\t\t\ttarget = utils.getPath(toParts.join('.').slice(1));\n\t\t\t} else {\n\t\t\t\ttarget = owner;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// we do this so we don't overwrite the originals in case we need to reset later\n\t\tbinding._target = target;\n\t\tbinding._source = source;\n\t\tbinding._from = from[0] == '.'? from.slice(1): from;\n\t\tbinding._to = to[0] == '.'? to.slice(1): to;\n\t\t\n\t\tif (!twoWay) {\n\t\t\ttoTarget = binding._to.split('.');\n\t\t\tif (toTarget.length > 2) {\n\t\t\t\ttoTarget.pop();\n\t\t\t\tbinding._toTarget = toTarget.join('.');\n\t\t\t}\n\t\t}\n\t\t\n\t\t// now our sanitization\n\t\trdy = !! (\n\t\t\t(source && (typeof source == 'object')) &&\n\t\t\t(target && (typeof target == 'object')) &&\n\t\t\t(from) &&\n\t\t\t(to)\n\t\t);\n\t}\n\t\n\t/*jshint -W093 */\n\treturn (binding.ready = rdy);\n\t/*jshint +W093 */\n}\n\n/**\n* The details for an {@link enyo.Binding#transform} [function]{@glossary Function}, \n* including the available parameters and how they can be used.\n* \n* @callback enyo.Binding~Transform\n* @param {*} value - The value being synchronized.\n* @param {Number} direction - The direction of synchronization; will be either\n* \t1 (source value has changed and will be written to target) or 2 (target\n* \tvalue has changed and will be written to source).\n* @param {Object} binding - A reference to the associated [binding]{@link enyo.Binding}. In cases \n* \twhere the binding should be interrupted and not propagate the synchronization at all, call\n* \tthe [stop()]{@link enyo.Binding#stop} method on the passed-in binding reference.\n*/\n\n/**\n* {@link enyo.Binding} is a mechanism used to keep properties synchronized. A \n* binding may be used to link two properties on different\n* [objects]{@glossary Object}, or even two properties on the same object.\n* Once a binding has been established, it will wait for change notifications;\n* when a notification arrives, the binding will synchronize the value between\n* the two ends. Note that bindings may be either\n* [one-way]{@link enyo.Binding#oneWay} (the default) or\n* [two-way]{@link enyo.Binding#oneWay}.\n* \n* Usually, you will not need to create Binding objects arbitrarily, but will\n* instead rely on the public [BindingSupport API]{@link enyo.BindingSupport},\n* which is applied to [enyo.Object]{@link enyo.Object} and so is available on\n* all of its [subkinds]{@glossary subkind}.\n* \n* @class enyo.Binding\n* @public\n*/\nvar Binding = module.exports = kind(\n\t/** @lends enyo.Binding.prototype */ {\n\t\n\tname: 'enyo.Binding',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* If a [binding]{@link enyo.Binding} is one-way, this flag should be `true` (the default). \n\t* If this flag is set to `false`, the binding will be two-way.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\toneWay: true,\n\t\n\t/**\n\t* If the [binding]{@link enyo.Binding} was able to resolve both ends (i.e., its \n\t* [source]{@link enyo.Binding#source} and [target]{@link enyo.Binding#target} \n\t* [objects]{@glossary Object}), this value will be `true`. Setting this manually will\n\t* have undesirable effects.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tconnected: false,\n\t\n\t/**\n\t* This property is used extensively for various purposes within a\n\t* [binding]{@link enyo.Binding}. One primary purpose is to serve as a root\n\t* [object]{@glossary Object} from which to\tsearch for the binding's ends (the\n\t* [source]{@link enyo.Binding#source} and/or [target]{@link enyo.Binding#target}).\n\t* If the owner created the binding, it will also be responsible for destroying \n\t* it (automatically).\n\t*\n\t* @type {enyo.Object}\n\t* @default null\n\t* @public\n\t*/\n\towner: null,\n\t\n\t/**\n\t* By default, a [binding]{@link enyo.Binding} will attempt to connect to both ends \n\t* ([source]{@link enyo.Binding#source} and [target]{@link enyo.Binding#target}). If this \n\t* process should be deferred, set this flag to `false`.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tautoConnect: true,\n\t\n\t/**\n\t* By default, a [binding]{@link enyo.Binding} will attempt to synchronize its values from \n\t* its [source]{@link enyo.Binding#source} to its [target]{@link enyo.Binding#target}. If \n\t* this process should be deferred, set this flag to `false`.\n\t* \n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tautoSync: true,\n\t\n\t/**\n\t* Set this only to a reference for an [object]{@glossary Object} to use\n\t* as the source for the [binding]{@link enyo.Binding}. If this is not a\n\t* [bindable]{@link enyo.BindingSupport} object, the source will be derived\n\t* from the [from]{@link enyo.Binding#from} property during initialization.\n\t* \n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tsource: null,\n\t\n\t/**\n\t* Set this only to a reference for an [object]{@glossary Object} to use\n\t* as the target for the [binding]{@link enyo.Binding}. If this is not a\n\t* [bindable]{@link enyo.BindingSupport} object, the target will will be\n\t* derived from the [to]{@link enyo.Binding#to} property during initialization.\n\t* \n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\ttarget: null,\n\t\n\t/**\n\t* A path in which the property of the [source]{@link enyo.Binding#source} to\n\t* bind from may be found. If the source is explicitly provided and the path\n\t* is relative (i.e., it begins with a `\".\"`), it is relative to the source;\n\t* otherwise, it is relative to the [owner]{@link enyo.Binding#owner} of the\n\t* [binding]{@link enyo.Binding}. To have a binding be evaluated from the\n\t* global scope, prefix the path with a `\"^\"`. If the source and the `\"^\"`\n\t* are used in tandem, the `\"^\"` will be ignored and the path will be assumed\n\t* to be relative to the provided source.\n\t* \n\t* @type {String}\n\t* @default null\n\t* @public\n\t*/\n\tfrom: null,\n\t\n\t/**\n\t* The `dirty` property represents the changed value state of both the property designated by\n\t* the [from]{@link enyo.Binding#from} path and the property designated by the \n\t* [to]{@link enyo.Binding#to} path.\n\t*\n\t* @type {Number}\n\t* @default enyo.Binding.DIRTY_FROM\n\t* @public\n\t*/\n\tdirty: DIRTY_FROM,\n\t\n\t/**\n\t* A path in which the property of the [target]{@link enyo.Binding#target} to\n\t* bind from may be found. If the target is explicitly provided and the path\n\t* is relative (i.e., it begins with a `\".\"`), it is relative to the target;\n\t* otherwise, it is relative to the owner of the [binding]{@link enyo.Binding}.\n\t* To have a binding be evaluated from the global scope, prefix the path with\n\t* a `\"^\"`. If the target and the `\"^\"` are used in tandem, the `\"^\"` will be\n\t* ignored and the path will be assumed to be relative to the provided target.\n\t* \n\t* @type {String}\n\t* @default null\n\t* @public\n\t*/\n\tto: null,\n\n\t/**\n\t* Set this to a [function]{@glossary Function} or the name of a method on\n\t* the [owner]{@link enyo.Binding#owner} of this [binding]{@link enyo.Binding}.\n\t* The transform is used to programmatically modify the value being synchronized.\n\t* See {@link enyo.Binding~Transform} for detailed information on the parameters\n\t* that are available to `transform`.\n\t* \n\t* @type {enyo.Binding~Transform}\n\t* @default null\n\t* @public\n\t*/\n\ttransform: null,\n\t\n\t/**\n\t* Indicates whether the [binding]{@link enyo.Binding} is currently connected.\n\t*\n\t* @returns {Boolean} `true` if connected; otherwise, `false`.\n\t* @public\n\t*/\n\tisConnected: function () {\n\t\tvar from = this._from,\n\t\t\tto = this.oneWay ? (this._toTarget || this._to) : this._to,\n\t\t\tsource = this._source,\n\t\t\ttarget = this._target,\n\t\t\ttoChain,\n\t\t\tfromChain;\n\t\t\t\n\t\tif (from && to && source && target) {\n\t\t\tif (!this.oneWay || this._toTarget) toChain = target.getChains()[to];\n\t\t\tfromChain = source.getChains()[from];\n\t\t\t\n\t\t\treturn this.connected\n\t\t\t\t&& (fromChain ? fromChain.isConnected() : true)\n\t\t\t\t&& (toChain ? toChain.isConnected() : true);\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\t/**\n\t* Causes a single propagation attempt to fail. Typically not called outside\n\t* the scope of a [transform]{@link enyo.Binding#transform}.\n\t* \n\t* @public\n\t*/\n\tstop: function () {\n\t\tthis._stop = true;\n\t},\n\t\n\t/**\n\t* Indicates whether the [binding]{@link enyo.Binding} is actually ready.\n\t* \n\t* @returns {Boolean} `true` if ready; otherwise, `false`.\n\t* @public\n\t*/\n\tisReady: function () {\n\t\treturn this.ready || ready(this);\n\t},\n\t\n\t/**\n\t* Resets all properties to their original state.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\treset: function () {\n\t\tthis.disconnect();\n\t\tthis.ready = null;\n\t\tthis._source = this._target = this._to = this._from = this._toTarget = null;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Rebuilds the entire [binding]{@link enyo.Binding}. Will synchronize if it is able to \n\t* connect and the [autoSync]{@link enyo.Binding#autoSync} flag is `true`.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trebuild: function () {\n\t\treturn this.reset().connect();\n\t},\n\t\n\t/**\n\t* Connects the ends (i.e., the [source]{@link enyo.Binding#source} and\n\t* [target]{@link enyo.Binding#target}) of the [binding]{@link enyo.Binding}. While you\n\t* typically won't need to call this method, it is safe to call even when the ends are\n\t* already established. Note that if one or both of the ends does become connected and the\n\t* [autoSync]{@link enyo.Binding#autoSync} flag is `true`, the ends will automatically be\n\t* synchronized.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tconnect: function () {\n\t\tif (!this.isConnected()) {\n\t\t\tif (this.isReady()) {\n\t\t\t\tthis._source.observe(this._from, this._sourceChanged, this, {priority: true});\n\t\t\t\t\n\t\t\t\t// for two-way bindings we register to observe changes\n\t\t\t\t// from the target\n\t\t\t\tif (!this.oneWay) this._target.observe(this._to, this._targetChanged, this);\n\t\t\t\telse if (this._toTarget) {\n\t\t\t\t\tthis._target.observe(this._toTarget, this._toTargetChanged, this, {priority: true});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// we flag it as having been connected\n\t\t\t\tthis.connected = true;\n\t\t\t\tif (this.isConnected() && this.autoSync) this.sync(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Disconnects from the ends (i.e., the [source]{@link enyo.Binding#source} and \n\t* [target]{@link enyo.Binding#target}) if a connection exists at either end. This method \n\t* will most likely not need to be called directly.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdisconnect: function () {\n\t\tif (this.isConnected()) {\n\t\t\tthis._source.unobserve(this._from, this._sourceChanged, this);\n\t\t\t\n\t\t\t// for two-way bindings we unregister the observer from\n\t\t\t// the target as well\n\t\t\tif (!this.oneWay) this._target.unobserve(this._to, this._targetChanged, this);\n\t\t\telse if (this._toTarget) {\n\t\t\t\tthis._target.unobserve(this._toTarget, this._toTargetChanged, this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.connected = false;\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Synchronizes values from the [source]{@link enyo.Binding#source} to the\n\t* [target]{@link enyo.Binding#target}. This usually will not need to be called manually.\n\t* [Two-way bindings]{@link enyo.Binding#oneWay} will automatically synchronize from the\n\t* target end once they are connected.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsync: function (force) {\n\t\tvar source = this._source,\n\t\t\ttarget = this._target,\n\t\t\tfrom = this._from,\n\t\t\tto = this._to,\n\t\t\txform = this.getTransform(),\n\t\t\tval;\n\t\t\n\t\tif (this.isReady() && this.isConnected()) {\n\t\t\t\t\n\t\t\tswitch (this.dirty || (force && DIRTY_FROM)) {\n\t\t\tcase DIRTY_TO:\n\t\t\t\tval = target.get(to);\n\t\t\t\tif (xform) val = xform.call(this.owner || this, val, DIRTY_TO, this);\n\t\t\t\tif (!this._stop) source.set(from, val, {create: false});\n\t\t\t\tbreak;\n\t\t\tcase DIRTY_FROM:\n\t\t\t\t\n\t\t\t// @TODO: This should never need to happen but is here just in case\n\t\t\t// it is ever arbitrarily called not having been dirty?\n\t\t\t// default:\n\t\t\t\tval = source.get(from);\n\t\t\t\tif (xform) val = xform.call(this.owner || this, val, DIRTY_FROM, this);\n\t\t\t\tif (!this._stop) target.set(to, val, {create: false});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.dirty = null;\n\t\t\tthis._stop = null;\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Releases all of the [binding's]{@link enyo.Binding} parts and unregisters its \n\t* [observers]{@link enyo.ObserverSupport}. Typically, this method will not need to be called \n\t* directly unless the binding was created without an [owner]{@link enyo.Binding#owner}.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroy: function () {\n\t\tvar owner = this.owner,\n\t\t\tidx;\n\t\t\n\t\tthis.disconnect();\n\t\tthis.owner = null;\n\t\tthis.source = this._source = null;\n\t\tthis.target = this._target = null;\n\t\tthis.ready = null;\n\t\tthis.destroyed = true;\n\t\t\n\t\t// @todo: remove me or postpone operation?\n\t\tidx = bindings.indexOf(this);\n\t\tif (idx > -1) bindings.splice(idx, 1);\n\t\t\n\t\tif (owner && !owner.destroyed) owner.removeBinding(this);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgetTransform: function () {\n\t\treturn this._didInitTransform ? this.transform : (function (bnd) {\n\t\t\tbnd._didInitTransform = true;\n\t\t\t\n\t\t\tvar xform = bnd.transform,\n\t\t\t\towner = bnd.owner,\n\t\t\t\txformOwner = owner && owner.bindingTransformOwner;\n\t\t\t\n\t\t\tif (xform) {\n\t\t\t\tif (typeof xform == 'string') {\n\t\t\t\t\tif (xformOwner && xformOwner[xform]) {\n\t\t\t\t\t\txform = xformOwner[xform];\n\t\t\t\t\t} else if (owner && owner[xform]) {\n\t\t\t\t\t\txform = owner[xform];\n\t\t\t\t\t} else {\n\t\t\t\t\t\txform = utils.getPath(xform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/*jshint -W093 */\n\t\t\t\treturn (bnd.transform = (typeof xform == 'function' ? xform : null));\n\t\t\t\t/*jshint +W093 */\n\t\t\t}\n\t\t})(this);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (props) {\n\t\tbindings.push(this);\n\t\t\n\t\tif (props) utils.mixin(this, props);\n\t\t\n\t\tif (!this.euid) this.euid = utils.uid('b');\n\t\tif (this.autoConnect) this.connect();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_sourceChanged: function (was, is, path) {\n\t\t// @TODO: Should it...would it benefit from using these passed in values?\n\t\tthis.dirty = this.dirty == DIRTY_TO ? null : DIRTY_FROM;\n\t\treturn this.dirty == DIRTY_FROM && this.sync();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_targetChanged: function (was, is, path) {\n\t\t// @TODO: Same question as above, it seems useful but would it affect computed\n\t\t// properties or stale values?\n\t\tthis.dirty = this.dirty == DIRTY_FROM ? null : DIRTY_TO;\n\t\treturn this.dirty == DIRTY_TO && this.sync();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_toTargetChanged: function (was, is, path) {\n\t\tthis.dirty = DIRTY_FROM;\n\t\tthis.reset().connect();\n\t}\n});\n\n/**\n* Retrieves a [binding]{@link enyo.Binding} by its global id.\n*\n* @param {String} euid - The [Enyo global id]{@glossary EUID} by which to retrieve a \n*\t[binding]{@link enyo.Binding}.\n* @returns {enyo.Binding|undefined} A reference to the binding if the id \n*\tis found; otherwise, it will return [undefined]{@glossary undefined}.\n* \n* @static\n* @public\n*/\nBinding.find = function (euid) {\n\treturn bindings.find(function (ln) {\n\t\treturn ln.euid == euid;\n\t});\n};\n\nBinding.bindings = bindings;\n\n/**\n* Possible value of the [dirty]{@link enyo.Binding#dirty} property, indicating that the value \n* of the [binding source]{@link enyo.Binding#source} has changed.\n* \n* @static\n* @public\nBindingB.DindingIRTY_FROM = DIRTY_FROM;\n\n/**\n* Possible value of the [dirty]{@link enyo.Binding#dirty} property, indicating that the value\n* of the [binding target]{@link enyo.Binding#target} has changed.\n* \n* @static\n* @public\n*/\nBinding.DIRTY_TO = DIRTY_TO;\n\n/**\n* The default [kind]{@glossary kind} that provides [binding]{@link enyo.Binding} \n* functionality.\n* \n* static\n* public\n*/\nBinding.defaultBindingKind = Binding;","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\n/**\n* An internally-used {@glossary mixin} applied to {@link enyo.Component}\n* instances to better support [bindings]{@link enyo.Binding}.\n*\n* @mixin enyo.ComponentBindingSupport\n* @protected\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'ComponentBindingSupport',\n\t\n\t/**\n\t* @private\n\t*/\n\tadjustComponentProps: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tprops.bindingTransformOwner || (props.bindingTransformOwner = this.getInstanceOwner());\n\t\t};\n\t})\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar extend = kind.statics.extend;\n\t\nkind.concatenated.push('computed');\n\n/**\n* @private\n*/\nfunction getComputedValue (obj, path) {\n\tvar cache = obj._getComputedCache(path)\n\t\t, isCached = obj._isComputedCached(path);\n\t\n\t// in the end, for efficiency and completeness in other situations\n\t// it is better to know the returned value of all computed properties\n\t// but in cases where they are set as cached we will sometimes use\n\t// that value\n\tif (cache.dirty || cache.dirty === undefined) {\n\t\tisCached && (cache.dirty = false);\n\t\tcache.previous = cache.value;\n\t\tcache.value = obj[path]();\n\t}\n\t\n\treturn cache.value;\n}\n\n/**\n* @private\n*/\nfunction queueComputed (obj, path) {\n\tvar queue = obj._computedQueue || (obj._computedQueue = [])\n\t\t, deps = obj._computedDependencies[path];\n\t\t\n\tif (deps) {\n\t\tfor (var i=0, dep; (dep=deps[i]); ++i) {\n\t\t\tif (!queue.length || -1 == queue.indexOf(dep)) queue.push(dep);\n\t\t}\n\t}\n}\n\n/**\n* @private\n*/\nfunction flushComputed (obj) {\n\tvar queue = obj._computedQueue;\n\tobj._computedQueue = null;\n\tif (queue && obj.isObserving()) {\n\t\tfor (var i=0, ln; (ln=queue[i]); ++i) {\n\t\t\tobj.notify(ln, obj._getComputedCache(ln).value, getComputedValue(obj, ln));\n\t\t}\n\t}\n}\n\n/**\n* A {@glossary mixin} that adds API methods to support\n* [computed properties]{@glossary \"computed property\"}. Unlike other support mixins,\n* this mixin does not need to be explicitly included by a [kind]{@glossary kind}. If the\n* `computed` [array]{@glossary Array} is found in a kind definition, this mixin will\n* automatically be included.\n*\n* @mixin enyo.ComputedSupport\n* @public\n*/\nvar ComputedSupport = module.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'ComputedSupport',\n\t\n\t/**\n\t* @private\n\t*/\n\t_computedRecursion: 0,\n\t\n\t/**\n\t* Primarily intended for internal use, this method determines whether the\n\t* given path is a known [computed property]{@glossary \"computed property\"}.\n\t*\n\t* @param {String} path - The property or path to test.\n\t* @returns {Boolean} Whether or not the `path` is a\n\t*\t[computed property]{@glossary \"computed property\"}.\n\t* @public\n\t*/\n\tisComputed: function (path) {\n\t\t// if it exists it will be explicitly one of these cases and it is cheaper than hasOwnProperty\n\t\treturn this._computed && (this._computed[path] === true || this._computed[path] === false);\n\t},\n\t\n\t/**\n\t* Primarily intended for internal use, this method determines whether the\n\t* given path is a known dependency of a\n\t* [computed property]{@glossary \"computed property\"}.\n\t*\n\t* @param {String} path - The property or path to test.\n\t* @returns {Boolean} Whether or not the `path` is a dependency of a\n\t*\t[computed property]{@glossary \"computed property\"}.\n\t* @public\n\t*/\n\tisComputedDependency: function (path) {\n\t\treturn !! (this._computedDependencies? this._computedDependencies[path]: false);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tget: kind.inherit(function (sup) {\n\t\treturn function (path) {\n\t\t\treturn this.isComputed(path)? getComputedValue(this, path): sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tset: kind.inherit(function (sup) {\n\t\treturn function (path) {\n\t\t\t// we do not accept parameters for computed properties\n\t\t\treturn this.isComputed(path)? this: sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tnotifyObservers: function () {\n\t\treturn this.notify.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tnotify: kind.inherit(function (sup) {\n\t\treturn function (path, was, is) {\n\t\t\tthis.isComputedDependency(path) && queueComputed(this, path);\n\t\t\tthis._computedRecursion++;\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis._computedRecursion--;\n\t\t\tthis._computedQueue && this._computedRecursion === 0 && flushComputed(this);\n\t\t\treturn this;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\t_isComputedCached: function (path) {\n\t\treturn this._computed[path];\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_getComputedCache: function (path) {\n\t\tvar cache = this._computedCache || (this._computedCache = {});\n\t\treturn cache[path] || (cache[path] = {});\n\t}\n};\n\n\n/**\n* Hijack the original so we can add additional default behavior.\n*/\nvar sup = kind.concatHandler;\n\n// @NOTE: It seems like a lot of work but it really won't happen that much and the more\n// we push to kind-time the better for initialization time\n\n/**\n* @private\n*/\nkind.concatHandler = function (ctor, props, instance) {\n\n\tsup.call(this, ctor, props, instance);\n\n\t// only matters if there are computed properties to manage\n\tif (props.computed) {\n\t\t\n\t\tvar proto = ctor.prototype || ctor\n\t\t\t, computed = proto._computed? Object.create(proto._computed): {}\n\t\t\t, dependencies = proto._computedDependencies? Object.create(proto._computedDependencies): {};\n\t\t\n\t\t// if it hasn't already been applied we need to ensure that the prototype will\n\t\t// actually have the computed support mixin present, it will not apply it more\n\t\t// than once to the prototype\n\t\textend(ComputedSupport, proto);\n\t\n\t\t// @NOTE: This is the handling of the original syntax provided for computed properties in 2.3.ish...\n\t\t// All we do here is convert it to a structure that can be used for the other scenario and preferred\n\t\t// computed declarations format\n\t\tif (!props.computed || !(props.computed instanceof Array)) {\n\t\t\t(function () {\n\t\t\t\tvar tmp = [], deps, name, conf;\n\t\t\t\t// here is the slow iteration over the properties...\n\t\t\t\tfor (name in props.computed) {\n\t\t\t\t\t// points to the dependencies of the computed method\n\t\t\t\t\tdeps = props.computed[name];\n\t\t\t\t\t/*jshint -W083 */\n\t\t\t\t\tconf = deps && deps.find(function (ln) {\n\t\t\t\t\t\t// we deliberately remove the entry here and forcibly return true to break\n\t\t\t\t\t\treturn typeof ln == 'object'? (utils.remove(deps, ln) || true): false;\n\t\t\t\t\t});\n\t\t\t\t\t/*jshint +W083 */\n\t\t\t\t\t// create a single entry now for the method/computed with all dependencies\n\t\t\t\t\ttmp.push({method: name, path: deps, cached: conf? conf.cached: null});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// note that we only do this one so even for a mixin that is evaluated several\n\t\t\t\t// times this would only happen once\n\t\t\t\tprops.computed = tmp;\n\t\t\t}());\n\t\t}\n\t\t\n\t\tvar addDependency = function (path, dep) {\n\t\t\t// its really an inverse look at the original\n\t\t\tvar deps;\n\t\t\t\n\t\t\tif (dependencies[path] && !dependencies.hasOwnProperty(path)) dependencies[path] = dependencies[path].slice();\n\t\t\tdeps = dependencies[path] || (dependencies[path] = []);\n\t\t\tdeps.push(dep);\n\t\t};\n\t\t\n\t\t// now we handle the new computed properties the way we intended to\n\t\tfor (var i=0, ln; (ln=props.computed[i]); ++i) {\n\t\t\t// if the entry already exists we are merely updating whether or not it is\n\t\t\t// now cached\n\t\t\tcomputed[ln.method] = !! ln.cached;\n\t\t\t// we must now look to add an entry for any given dependencies and map them\n\t\t\t// back to the computed property they will trigger\n\t\t\t/*jshint -W083 */\n\t\t\tif (ln.path && ln.path instanceof Array) ln.path.forEach(function (dep) { addDependency(dep, ln.method); });\n\t\t\t/*jshint +W083 */\n\t\t\telse if (ln.path) addDependency(ln.path, ln.method);\n\t\t}\n\t\t\n\t\t// arg, free the key from the properties so it won't be applied later...\n\t\t// delete props.computed;\n\t\t// make sure to reassign the correct items to the prototype\n\t\tproto._computed = computed;\n\t\tproto._computedDependencies = dependencies;\n\t}\n};","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tkind = require('./kind');\nvar\n\tVerticalDelegate = require('./VerticalDelegate');\n\n/**\n* This is a [delegate]{@glossary delegate} (strategy) used by {@link enyo.DataList}\n* for horizontally-oriented lists. This is used by all lists for this strategy;\n* it does not get copied, but is called directly from the list.\n*\n* Note that this is based on the [vertical delegate]{@link enyo.DataList.delegates.vertical}\n* and shares most of that delegate's logic. Overloads are implemented only where necessary.\n*\n* @name enyo.DataList.delegates.horizontal\n* @type Object\n* @private\n*/\nvar p = utils.clone(VerticalDelegate);\nkind.extendMethods(p, {\n\t/**\n\t* Initializes the list, adding a class to modify the CSS properly and setting its\n\t* priority properties.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tinitList: kind.inherit(function (sup) {\n\t\treturn function (list) {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// add the class\n\t\t\tlist.addClass('horizontal');\n\t\t\t// set the priority properties\n\t\t\tlist.posProp   = list.rtl ? 'right' : 'left';\n\t\t\tlist.upperProp = 'left';\n\t\t\tlist.lowerProp = 'right';\n\t\t\tlist.psizeProp = 'width';\n\t\t\tlist.ssizeProp = 'height';\n\t\t\t// set the scroller options\n\t\t\tvar so         = list.scrollerOptions? (list.scrollerOptions = utils.clone(list.scrollerOptions)): (list.scrollerOptions = {});\n\t\t\t// this is a horizontal list it cannot scroll vertically\n\t\t\tso.vertical    = 'hidden';\n\t\t\t// it has to scroll vertically one way or another\n\t\t\tso.horizontal  = so.horizontal == 'scroll'? 'scroll': 'auto';\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\tdestroyList: function (list) {\n\t\tif (list) {\n\t\t\tlist.removeClass('horizontal');\n\t\t}\n\t},\n\t/**\n\t* Overload to retrieve the correct scroll position.\n\t*\n\t* @private\n\t*/\n\tgetScrollPosition: function (list) {\n\t\treturn list.$.scroller.getScrollLeft();\n\t},\n\n\t/**\n\t* Sets the scroll position on the [scroller]{@link enyo.Scroller}\n\t* owned by the given list.\n\t*\n\t* @private\n\t*/\n\tsetScrollPosition: function (list, pos) {\n\t\tlist.$.scroller.setScrollLeft(pos);\n\t},\n\t\n\t/**\n\t* Overload to ensure we arbitrarily resize the active container to the width of the buffer.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tadjustBuffer: kind.inherit(function (sup) {\n\t\treturn function (list) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar an = list.$.active.node || list.$.active.hasNode(),\n\t\t\t\tbs = list.bufferSize;\n\t\t\tif (an) {\n\t\t\t\tan.style.width = bs + 'px';\n\t\t\t}\n\t\t};\n\t})\n}, true);\n\nmodule.exports = p;","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\n/**\n* {@link enyo.Layout} is the base [kind]{@glossary kind} for layout\n* kinds. Layout kinds are used by {@link enyo.UiComponent}-based\n* [controls]{@link enyo.Control} to allow for arranging of child controls by\n* setting the [layoutKind]{@link enyo.UiComponent#layoutKind} property.\n* \n* Derived kinds will usually provide their own\n* [layoutClass]{@link enyo.Layout#layoutClass} property to affect the CSS\n* rules used, and may also implement the [flow()]{@link enyo.Layout#flow}\n* and [reflow()]{@link enyo.Layout#reflow} methods. `flow()` is called\n* during control rendering, while `reflow()` is called when the associated\n* control is resized.\n*\n* @class enyo.Layout\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Layout.prototype */ {\n\n\tname: 'enyo.Layout',\n\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\n\t/** \n\t* CSS class that's added to the [control]{@link enyo.Control} using this \n\t* [layout]{@link enyo.Layout} [kind]{@glossary kind}.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tlayoutClass: '',\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (container) {\n\t\tthis.container = container;\n\t\tif (container) {\n\t\t\tcontainer.addClass(this.layoutClass);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\tif (this.container) {\n\t\t\tthis.container.removeClass(this.layoutClass);\n\t\t}\n\t},\n\t\n\t/**\n\t* Called during static property layout (i.e., during rendering).\n\t*\n\t* @public\n\t*/\n\tflow: function () {\n\t},\n\n\t/** \n\t* Called during dynamic measuring layout (i.e., during a resize).\n\t*\n\t* @public\n\t*/\n\treflow: function () {\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\n/**\n* An abstract linked-list node.\n*\n* @class enyo.LinkedListNode\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.LinkedListNode.prototype */ {\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @private\n\t*/\n\tprev: null,\n\t\n\t/**\n\t* @private\n\t*/\n\tnext: null,\n\t\n\t/**\n\t* @private\n\t*/\n\tcopy: function () {\n\t\tvar cpy = new this.ctor();\n\t\tcpy.prev = this.prev;\n\t\tcpy.next = this.next;\n\t\treturn cpy;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (props) {\n\t\tprops && utils.mixin(this, props);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\t// clear reference to previous node\n\t\tthis.prev = null;\n\t\t\n\t\t// if we have a reference to our next node\n\t\t// we continue down the chain\n\t\tthis.next && this.next.destroy();\n\t\t\n\t\t// clear our reference to the next node\n\t\tthis.next = null;\n\t}\n});","require('../../enyo');\n\n\nvar\n\tutils = require('./utils'),\n\tkind = require('./kind'),\n\tlogger = require('./logger');\n\nkind.concatenated.push('mixins');\n\nvar sup = kind.statics.extend;\n\n/**\n* @private\n*/\nvar extend = kind.statics.extend = function extend (args, target) {\n\tif (utils.isArray(args)) return utils.forEach(args, function (ln) { extend.call(this, ln, target); }, this);\n\tif (typeof args == 'string') apply(target || this.prototype, args);\n\telse {\n\t\tif (args.mixins) feature(target || this, args);\n\t\n\t\t// this allows for mixins to apply mixins which...is less than ideal but possible\n\t\tif (args.name) apply(target || this.prototype, args);\n\t\telse sup.apply(this, arguments);\n\t}\n};\n\n/**\n* Applies, with safeguards, a given mixin to an object.\n*\n* @private\n*/\nfunction apply (proto, props) {\n\tvar applied = proto._mixins? (proto._mixins = proto._mixins.slice()): (proto._mixins = [])\n\t\t, name = utils.isString(props)? props: props.name\n\t\t, idx = utils.indexOf(name, applied);\n\tif (idx < 0) {\n\t\tname == props && (props = utils.getPath(name));\n\t\t// if we could not resolve the requested mixin (should never happen)\n\t\t// we throw a simple little error\n\t\t// @TODO: Normalize error format\n\t\t!props && logger.error('Could not find the mixin ' + name);\n\t\t\n\t\t// it should be noted that this ensures it won't recursively re-add the same mixin but\n\t\t// since it is possible for mixins to apply mixins the names will be out of order\n\t\t// this name is pushed on but the nested mixins are applied before this one\n\t\tname && applied.push(name);\n\t\t\n\t\tprops = utils.clone(props);\n\t\t\n\t\t// we need to temporarily move the constructor if it has one so it\n\t\t// will override the correct method - this is a one-time permanent\n\t\t// runtime operation so subsequent additions of the mixin don't require\n\t\t// it again\n\t\tif (props.hasOwnProperty('constructor')) {\n\t\t\tprops._constructor = props.constructor;\n\t\t\tdelete props.constructor;\n\t\t}\n\t\t\n\t\tdelete props.name;\n\t\textend(props, proto);\n\t\t\n\t\t// now put it all back the way it was\n\t\tprops.name = name;\n\t}\n}\n\n/**\n* @private\n*/\nfunction feature (ctor, props) {\n\tif (props.mixins) {\n\t\tvar proto = ctor.prototype || ctor\n\t\t\t, mixins = props.mixins;\n\t\t\n\t\t// delete props.mixins;\n\t\t// delete proto.mixins;\n\t\t\n\t\tproto._mixins && (proto._mixins = proto._mixins.slice());\n\t\tutils.forEach(mixins, function (ln) { apply(proto, ln); });\n\t}\n}\n\nkind.features.push(feature);\n\n/**\n* An internally-used support {@glossary mixin} that adds API methods to aid in\n* using and applying mixins to [kinds]{@glossary kind}.\n*\n* @mixin enyo.MixinSupport\n* @protected\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'MixinSupport',\n\t\n\t/**\n\t* Extends the instance with the given properties.\n\t*\n\t* @param {Object} props - The property [hash]{@glossary Object} from which to extend\n\t*\tthe callee.\n\t*/\n\textend: function (props) {\n\t\tprops && apply(this, props);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\timportProps: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tprops && props.mixins && feature(this, props);\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t})\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\n/**\n* A collection of methods to allow a single {@link enyo.Component} to\n* [dispatch]{@link enyo.Component#dispatchEvent} a single {@glossary event} to\n* multiple targets. The events are synchronously propagated in the order in\n* which the targets are encountered. Note that this {@glossary mixin} is\n* already applied to a base [kind]{@glossary kind},\n* {@link enyo.MultipleDispatchComponent}.\n*\n* @mixin enyo.MultipleDispatchSupport\n* @public\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'MultipleDispatchSupport',\n\t\n\t/**\n\t* Adds a target for dispatching.\n\t*\n\t* @param {enyo.Component} component - The {@link enyo.Component} to add as a dispatch target.\n\t* @public\n\t*/\n\taddDispatchTarget: function (component) {\n\t\tvar dt = this._dispatchTargets;\n\t\tif (component && !~utils.indexOf(component, dt)) {\n\t\t\tdt.push(component);\n\t\t}\n\t},\n\t/**\n\t* Removes a target from dispatching.\n\t*\n\t* @param {enyo.Component} component - The {@link enyo.Component} to remove as a dispatch\n\t*\ttarget.\n\t* @public\n\t*/\n\tremoveDispatchTarget: function (component) {\n\t\tvar dt = this._dispatchTargets, i;\n\t\ti = utils.indexOf(component, dt);\n\t\tif (i > -1) {\n\t\t\tdt.splice(i, 1);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tbubbleUp: kind.inherit(function (sup) {\n\t\treturn function (name, event, sender) {\n\t\t\tif (this._dispatchDefaultPath) {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t\tvar dt = this._dispatchTargets;\n\t\t\tfor (var i=0, t; (t=dt[i]); ++i) {\n\t\t\t\tif (t && !t.destroyed) {\n\t\t\t\t\tt.dispatchBubble(name, event, sender);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\townerChanged: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar o = this.owner;\n\t\t\tthis._dispatchDefaultPath = !! o;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis._dispatchTargets = [];\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis._dispatchTargets = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\t_dispatchDefaultPath: false\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tlogger = require('./logger');\n\n/**\n* All of the known, instanced [sources]{@link enyo.Source}, by name.\n*\n* @name enyo~sources\n* @type {Object}\n* @readonly\n*/\nvar sources = {};\n\n/**\n* This is an abstract base class. A [source]{@link enyo.Source} is a communication\n* layer used by data layer [kinds]{@glossary kind} to retrieve and persist data and\n* application state via its abstract API methods.\n*\n* @class enyo.Source\n* @public\n*/\nvar Source = module.exports = kind(\n\t/** @lends enyo.Source.prototype */ {\n\t\n\tname: 'enyo.Source',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* When initialized, the source should be passed properties to set on itself.\n\t* These properties should include the name by which it will be referenced in\n\t* the application.\n\t*\n\t* @param {Object} [props] - The properties to set on itself.\n\t* @public\n\t*/\n\tconstructor: function (props) {\n\t\tif (props) this.importProps(props);\n\t\t// automatic coersion of name removing prefix\n\t\tthis.name || (this.name = this.kindName.replace(/^(.*)\\./, \"\"));\n\t\t// now add to the global registry of sources\n\t\tsources[this.name] = this;\n\t},\n\t\n\t/**\n\t* Overload this method to handle retrieval of data. This method should accept an options\n\t* [hash]{@glossary Object} with additional configuration properties, including `success`\n\t* and `error` callbacks to handle the result.\n\t*\n\t* @virtual\n\t* @param {(enyo.Model|enyo.Collection)} model The [model]{@link enyo.Model} or\n\t*\t[collection]{@link enyo.Collection} to be retrieved.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callbacks.\n\t*/\n\tfetch: function (model, opts) {\n\t\t//\n\t},\n\t\n\t/**\n\t* Overload this method to handle persisting of data. This method should accept an options\n\t* [hash]{@glossary Object} with additional configuration properties, including `success`\n\t* and `error` callbacks to handle the result.\n\t*\n\t* @virtual\n\t* @param {(enyo.Model|enyo.Collection)} model The [model]{@link enyo.Model} or\n\t*\t[collection]{@link enyo.Collection} to be persisted.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callback.\n\t*/\n\tcommit: function (model, opts) {\n\t\t//\n\t},\n\t\n\t/**\n\t* Overload this method to handle deletion of data. This method should accept an options\n\t* [hash]{@glossary Object} with additional configuration properties, including `success`\n\t* and `error` callbacks to handle the result. If called without parameters, it will\n\t* instead destroy itself and be removed from [enyo.sources]{@link enyo~sources}, rendering\n\t* itself unavailable for further operations.\n\t*\n\t* @param {(enyo.Model|enyo.Collection)} model The [model]{@link enyo.Model} or\n\t*\t[collection]{@link enyo.Collection} to be deleted.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callbacks.\n\t*/\n\tdestroy: function (model, opts) {\n\t\t\n\t\t// if called with no parameters we actually just breakdown the source and remove\n\t\t// it as being available\n\t\tif (!arguments.length) {\n\t\t\tsources[this.name] = null;\n\t\t\tthis.name = null;\n\t\t}\n\t},\n\t\n\t/**\n\t* Overload this method to handle querying of data based on the passed-in constructor. This\n\t* method should accept an options [hash]{@glossary Object} with additional configuration\n\t* properties, including `success` and `error` callbacks to handle the result.\n\t*\n\t* @virtual\n\t* @param {Function} ctor - The constructor for the [kind]{@glossary kind} of\n\t*\t{@link enyo.Model} or {@link enyo.Collection} to be queried.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callbacks.\n\t*/\n\tfind: function (ctor, opts) {\n\t\t//\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\timportProps: function (props) {\n\t\tprops && utils.mixin(this, props);\n\t},\n\t\n\t/**\n\t* @see enyo.getPath\n\t* @method\n\t* @public\n\t*/\n\tget: utils.getPath,\n\t\n\t/**\n\t* @see enyo.setPath\n\t* @method\n\t* @public\n\t*/\n\tset: utils.setPath\n});\n\n/**\n* Creates an instance of {@link enyo.Source} with the given properties. These\n* properties should include a `kind` property with the name of the\n* [kind]{@glossary kind} of source and a `name` for the instance. This static\n* method is also available on all [subkinds]{@glossary subkind} of\n* `enyo.Source`. The instance will automatically be added to the\n* [enyo.sources]{@link enyo~sources} [object]{@glossary Object} and may be\n* referenced by its `name`.\n*\n* @name enyo.Source.create\n* @static\n* @method\n* @param {Object} props - The properties to pass to the constructor for the requested\n*\t[kind]{@glossary kind} of [source]{@link enyo.Source}.\n* @returns {enyo.Source} An instance of the requested kind of source.\n* @public\n*/\nSource.create = function (props) {\n\tvar Ctor = (props && props.kind) || this;\n\t\n\tif (typeof Ctor == 'string') Ctor = kind.constructorForKind(Ctor);\n\t\n\treturn new Ctor(props);\n};\n\n/**\n* @static\n* @private\n*/\nSource.concat = function (ctor, props) {\n\t\n\t// force noDefer so that we can actually set this method on the constructor\n\tif (props) props.noDefer = true;\n\t\n\tctor.create = Source.create;\n};\n\n/**\n* @static\n* @private\n*/\nSource.execute = function (action, model, opts) {\n\tvar source = opts.source || model.source,\n\t\n\t\t// we need to be able to bind the success and error callbacks for each of the\n\t\t// sources we'll be using\n\t\toptions = utils.clone(opts, true),\n\t\tnom = source,\n\t\tmsg;\n\t\n\tif (source) {\n\t\t\n\t\t// if explicitly set to true then we need to use all available sources in the\n\t\t// application\n\t\tif (source === true) {\n\t\t\t\n\t\t\tfor (nom in sources) {\n\t\t\t\tsource = sources[nom];\n\t\t\t\tif (source[action]) {\n\t\t\t\t\t\n\t\t\t\t\t// bind the source name to the success and error callbacks\n\t\t\t\t\toptions.success = opts.success.bind(null, nom);\n\t\t\t\t\toptions.error = opts.error.bind(null, nom);\n\t\t\t\t\t\n\t\t\t\t\tsource[action](model, options);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if it is an array of specific sources to use we, well, will only use those!\n\t\telse if (source instanceof Array) {\n\t\t\tsource.forEach(function (nom) {\n\t\t\t\tvar src = typeof nom == 'string' ? sources[nom] : nom;\n\t\t\t\t\n\t\t\t\tif (src && src[action]) {\n\t\t\t\t\t// bind the source name to the success and error callbacks\n\t\t\t\t\toptions.success = opts.success.bind(null, src.name);\n\t\t\t\t\toptions.error = opts.error.bind(null, src.name);\n\t\t\t\t\t\n\t\t\t\t\tsrc[action](model, options);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t// if it is an instance of a source\n\t\telse if (source instanceof Source && source[action]) {\n\t\t\t\n\t\t\t// bind the source name to the success and error callbacks\n\t\t\toptions.success = opts.success.bind(null, source.name);\n\t\t\toptions.error = opts.error.bind(null, source.name);\n\t\t\t\n\t\t\tsource[action](model, options);\n\t\t}\n\t\t\n\t\t// otherwise only one was specified and we attempt to use that\n\t\telse if ((source = enyo.sources[nom]) && source[action]) {\n\t\t\t\n\t\t\t// bind the source name to the success and error callbacks\n\t\t\toptions.success = opts.success.bind(null, nom);\n\t\t\toptions.error = opts.error.bind(null, nom);\n\t\t\t\n\t\t\tsource[action](model, options);\n\t\t}\n\t\t\n\t\t// we could not resolve the requested source\n\t\telse {\n\t\t\tmsg = 'enyo.Source.execute(): requested source(s) could not be found for ' +\n\t\t\t\tmodel.kindName + '.' + action + '()';\n\t\t\t\n\t\t\tlogger.warn(msg);\n\t\t\t\n\t\t\t// we need to fail the attempt and let it be handled\n\t\t\topts.error(nom ? typeof nom == 'string' ? nom : nom.name : 'UNKNOWN', msg);\n\t\t}\n\t} else {\n\t\tmsg = 'enyo.Source.execute(): no source(s) provided for ' + model.kindName + '.' +\n\t\t\taction + '()';\n\t\t\t\n\t\tlogger.warn(msg);\n\t\t\n\t\t// we need to fail the attempt and let it be handled\n\t\topts.error(nom ? typeof nom == 'string' ? nom : nom.name : 'UNKNOWN', msg);\n\t}\n};\n\nSource.sources = sources;","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\nvar\n\tVerticalDelegate = require('./VerticalDelegate');\n\n/**\n* This is a [delegate]{@glossary delegate} (strategy) used by {@link enyo.DataGridList}\n* for vertically-oriented lists. This is used by all lists for this strategy; it does\n* not get copied, but is called directly from the list. It is only available to\n* `enyo.DataGridList`.\n*\n* @name enyo.DataGridList.delegates.verticalGrid\n* @type Object\n* @private\n*/\nvar p = utils.clone(VerticalDelegate);\nkind.extendMethods(p, {\n\t\n\t/**\n\t* Once the list is initially rendered, it will generate its [scroller]{@link enyo.Scroller}\n\t* (so we know that is available). Now we need to cache our initial size values and apply\n\t* them to our pages individually.\n\t*\n\t* @private\n\t*/\n\trendered: function (list) {\n\t\t// get our initial sizing cached now since we should actually have\n\t\t// bounds at this point\n\t\tthis.updateMetrics(list);\n\t\t// calc offset of pages to scroller client\n\t\tthis.calcScrollOffset(list);\n\t\t// now if we already have a length then that implies we have a controller\n\t\t// and that we have data to render at this point, otherwise we don't\n\t\t// want to do any more initialization\n\t\tif (list.collection && list.collection.length) { this.reset(list); }\n\t},\n\t\n\t/**\n\t* Resets the page, setting `canAddResetClass` flag if appropriate.\n\t*\n\t* @method\n\t* @private\n\t*/\n\treset: kind.inherit(function (sup) {\n\t\treturn function (list) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (list.hasReset && !list.hasClass('reset')) {\n\t\t\t\tlist.canAddResetClass = true;\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* Unlike in {@link enyo.DataList}, we can calculate the page height since we know\n\t* the structure and layout of the page precisely.\n\t*\n\t* @private\n\t*/\n\tpageHeight: function (list, page) {\n\t\tvar n  = page.node || page.hasNode(),\n\t\t\ta  = n.children.length,\n\t\t\tmx = list.metrics.pages[page.index], s;\n\t\ts = (Math.floor(a/list.columns)+(a%list.columns? 1: 0))*(list.tileHeight+list.spacing);\n\t\tn.style.height = s + 'px';\n\t\tmx.height = s;\n\t\treturn s;\n\t},\n\n\t/**\n\t* Generates the markup for the page content.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tgeneratePage: kind.inherit(function (sup) {\n\t\treturn function (list, page) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.layout(list, page);\n\t\t};\n\t}),\n\n\t/**\n\t* Returns the calculated width for the given page.\n\t*\n\t* @private\n\t*/\n\tpageWidth: function (list, page) {\n\t\tvar s  = this.width(list),\n\t\t\tn  = page.node || page.hasNode(),\n\t\t\tmx = list.metrics.pages[page.index];\n\t\tn.style.width = s + 'px';\n\t\tmx.width = s;\n\t\treturn s;\n\t},\n\n\t/**\n\t* Retrieves the default page size.\n\t*\n\t* @private\n\t*/\n\tdefaultPageSize: function (list) {\n\t\treturn (Math.ceil(this.controlsPerPage(list)/list.columns) * (list.tileHeight+list.spacing));\n\t},\n\n\t/**\n\t* Calculates metric values required for the absolute positioning and scaling of the\n\t* children in the list.\n\t*\n\t* @private\n\t*/\n\tupdateMetrics: function (list) {\n\t\tthis.updateBounds(list);\n\t\tthis.calculateMetrics(list);\n\t},\n\n\tcalculateMetrics: function (list, width) {\n\t\tvar w  = (width === undefined) ? this.width(list) : width,\n\t\t\ts  = list.spacing,\n\t\t\tm  = list.minWidth,\n\t\t\th  = list.minHeight;\n\t\t// the number of columns is the ratio of the available width minus the spacing\n\t\t// by the minimum tile width plus the spacing\n\t\tlist.columns    = Math.max(Math.floor((w-s) / (m+s)), 1);\n\t\t// the actual tile width is a ratio of the remaining width after all columns\n\t\t// and spacing are accounted for and the number of columns that we know we should have\n\t\tlist.tileWidth  = ((w-(s*(list.columns+1)))/list.columns);\n\t\t// the actual tile height is related to the tile width\n\t\tlist.tileHeight = (h*(list.tileWidth/m));\n\t\t// unfortunately this forces us to recalculate the number of controls that can\n\t\t// be used for each page\n\t\tthis.controlsPerPage(list, true);\n\t\t// Compute first and last row index bounds\n\t\tthis.updateIndexBound(list);\n\t},\n\n\t/**\n\t* Calculates index bound that is required for adjusting page position. Can be called\n\t* after the [DataGridList]{@link enyo.DataGridList} is rendered.\n\t*\n\t* @private\n\t*/\n\tupdateIndexBound: function(list) {\n\t\tif (!list.collection) {\n\t\t\treturn;\n\t\t}\n\t\t// If user calls this method before DataGridList is rendered\n\t\tif (list.boundsCache === undefined) {\n\t\t\tthis.updateMetrics(list);\n\t\t}\n\n\t\tlist.indexBoundFirstRow = list.columns;\n\t\tlist.indexBoundLastRow = (Math.ceil(list.collection.length / list.columns) - 1) * list.columns - 1;\n\t},\n\n\t/**\n\t* Ensures that index bound is maintained and up-to-date as\n\t* [models]{@link enyo.Model} are added.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tmodelsAdded: kind.inherit(function (sup) {\n\t\treturn function (list, props) {\n\t\t\tthis.calculateMetrics(list);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Ensures that index bound is maintained and up-to-date as\n\t* [models]{@link enyo.Model} are removed.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tmodelsRemoved: kind.inherit(function (sup) {\n\t\treturn function (list, props) {\n\t\t\tthis.calculateMetrics(list);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\n\t/**\n\t* This method calculates the number of [controls]{@link enyo.Control} necessary to\n\t* fill a page. It inherits from the same method in\n\t* [verticalDelegate]{@link DataList.delegates.vertical} and extends it to reflect\n\t* the number of columns in the grid list.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tcalculateControlsPerPage: kind.inherit(function (sup) {\n\t\treturn function(list) {\n\t\t\treturn sup.apply(this, arguments) * list.columns;\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\tchildSize: function (list) {\n\t\t// currently DataGridList is only vertical\n\t\t/*jshint -W093 */\n\t\treturn (list.childSize = (list.tileHeight + list.spacing));\n\t},\n\n\t/**\n\t* Takes a given page and arbitrarily positions its children according to the pre-computed\n\t* metrics of the list.\n\n\t* TODO: This could be optimized to use requestAnimationFrame as well as render not by child \n\t* index but by row, thus cutting down some of the over-calculation when iterating over every \n\t* child.\n\t*\n\t* @private\n\t*/\n\tlayout: function (list, page) {\n\t\tif (list.canAddResetClass) {\n\t\t\tlist.addClass('reset');\n\t\t\tdelete list.canAddResetClass;\n\t\t}\n\t\tvar cc = list.columns,\n\t\t\ts  = list.spacing,\n\t\t\tw  = list.tileWidth,\n\t\t\th  = list.tileHeight,\n\t\t\tr  = 0,\n\t\t\tn  = page,\n\t\t\tcn = n.children, co;\n\t\tif (cn.length) {\n\t\t\tfor (var i=0, c; (c=cn[i]); ++i) {\n\t\t\t\t// the column\n\t\t\t\tco = i % cc;\n\t\t\t\tc.addStyles(\n\t\t\t\t\t'top: '    + Math.round(s  + (r  * (h+s))) + 'px; ' +\n\t\t\t\t\t(list.rtl ? 'right: ' : 'left: ') + Math.round(s  + (co * (w+s))) + 'px; ' +\n\t\t\t\t\t'width: '  + Math.round(w) +                 'px; ' +\n\t\t\t\t\t'height: ' + Math.round(h) +                 'px;'\n\t\t\t\t);\n\t\t\t\t// check if we need to increment the row\n\t\t\t\tif ((i+1) % cc === 0) { ++r; }\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Recalculates the buffer size based on the current metrics for the given list. This\n\t* may not be completely accurate until the final page is scrolled into view.\n\t*\n\t* @private\n\t*/\n\tadjustBuffer: function (list) {\n\t\tvar pc = this.pageCount(list),\n\t\t\tds = this.defaultPageSize(list),\n\t\t\tbs = 0, sp = list.psizeProp, ss = list.ssizeProp,\n\t\t\tn = list.$.buffer.node || list.$.buffer.hasNode(), p;\n\t\tif (n) {\n\t\t\tfor (var i=0; i<pc; ++i) {\n\t\t\t\tp = list.metrics.pages[i];\n\t\t\t\tbs += (p && p[sp]) || ds;\n\t\t\t}\n\t\t\tbs += list.spacing;\n\t\t\tlist.bufferSize = bs;\n\t\t\tn.style[sp] = bs + 'px';\n\t\t\tn.style[ss] = this[ss](list) + 'px';\n\t\t\tlist.$.scroller.remeasure();\n\t\t}\n\t},\n\t\n\t/**\n\t* The delegate's `resize` {@glossary event} handler.\n\t*\n\t* @private\n\t*/\n\tdidResize: function (list) {\n\t\t// store the previous stats for comparative purposes\n\t\tvar prev = list.boundsCache;\n\t\t\n\t\t// flag the list to have its bounds updated\n\t\tlist._updateBounds = true;\n\t\tthis.updateMetrics(list);\n\t\t\n\t\t// if no change it the viewport then we didn't update anything size-wise\n\t\t// and do not need to refresh at all\n\t\tif (\n\t\t\tprev.left   === list.boundsCache.left  &&\n\t\t\tprev.top    === list.boundsCache.top   &&\n\t\t\tprev.width  === list.boundsCache.width &&\n\t\t\tprev.height === list.boundsCache.height\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// it is necessary to update the content of the list according to our\n\t\t// new sizing\n\t\tthis.refresh(list);\n\t},\n\n\t/**\n\t* @see enyo.VerticalDelegate#adjustIndex\n\t* @private\n\t*/\n\tadjustIndex: kind.inherit(function (sup) {\n\t\treturn function (list, index, page, pageBounds, scrollBoundary, start) {\n\t\t\tvar idx = sup.apply(this, arguments),\n\t\t\t\tdelta = idx%list.columns;\n\n\t\t\treturn idx - delta + (start? 0 : list.columns - 1);\n\t\t};\n\t})\n}, true);\n\nmodule.exports = p;","require('../../enyo');\n\n'use strict';\n\nvar\n\tutils = require('./utils'),\n\tkind = require('./kind'),\n\tlogger = require('./logger');\n\n/*\n* Tracks the active tests.\n*\n* @private\n*/\nvar tests = {};\n\n/*\n* Tracks averages.\n*\n* @private\n*/\nvar averages = {};\n\n/*\n* Default report template string.\n*\n* @private\n*/\nvar report_template = '- - - - - - - - - - - - - - - - -\\n' +\n\t\t\t\t'BENCHMARK REPORT (%.): %.\\n' +\n\t\t\t\t'TOTAL TIME (ms): %.\\n' +\n\t\t\t\t'AVERAGE TIME (ms): %.\\n' +\n\t\t\t\t'MINIMUM TIME (ms): %.\\n' +\n\t\t\t\t'MAXIMUM TIME (ms): %.\\n' +\n\t\t\t\t'NUMBER OF ENTRIES: %.\\n' +\n\t\t\t\t'- - - - - - - - - - - - - - - - -\\n';\n\n/*\n* Calculates average and basic statistics.\n*\n* @private\n*/\nvar calc = function (numbers) {\n\tvar total = 0;\n\tvar min = Infinity;\n\tvar max = -Infinity;\n\tvar number = numbers.length;\n\tvar stats = {total: null, average: null, number: number, min: null, max: null};\n\tutils.forEach(numbers, function (num) {\n\t\ttotal += num;\n\t\tmin = Math.min(num, min);\n\t\tmax = Math.max(num, max);\n\t});\n\tstats.total = total;\n\tstats.min = min;\n\tstats.max = max;\n\tstats.average = Math.abs(total/(number || 1));\n\treturn stats;\n};\n\n/**\n* Configurable benchmark options [hash]{@glossary Object}. For more\n* details, see the same properties defined on {@link enyo.dev.Benchmark}.\n* \n* @typedef  {Object} enyo.dev.Benchmark~Options\n* @property {String} name - The referenceable name of the\n* [benchmark]{@link enyo.dev.Benchmark} (used for reporting).\n* @property {Boolean} average - If `true` (the default), an average of\n* repeated start/stops for the bench will be calculated.\n* @property {Boolean} logging - If `true` (the default), start and stop\n* messages will be written to the console.\n* @property {Boolean} autoStart - If `true` (the default), the benchmark will\n* automatically start on instantiation.\n*/\n\n/**\n* A collection of methods to assist in simple benchmarking. In creating these\n* methods, the goal was to supply useful functionality while impacting the\n* results as little as possible (the more calculations we do during\n* benchmarking, the greater the opportunity to skew results). This is\n* particularly important when dealing with potentially-nested benchmark series\n* (i.e., benchmarking a method that executes other benchmarked methods).\n*\n* @namespace enyo.dev\n* @public\n*/\nexports = module.exports = /** @lends enyo.dev */ {\n\n\t/**\n\t* Can be set to `false` to disable all benchmarking code.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tenabled: true,\n\n\t/**\n\t* Creates a new [benchmark]{@link enyo.dev.Benchmark} test with the given\n\t* configuration options.\n\t*\n\t* @param {enyo.dev.Benchmark~Options} opts - The configuration\n\t* [options]{@link enyo.dev.Benchmark~Options} to apply to the\n\t* [benchmark]{@link enyo.dev.Benchmark}.\n\t* @returns {enyo.dev.Benchmark} A Benchmark instance with `start()` and\n\t* `stop()` methods used to track a test.\n\t* @public\n\t*/\n\tbench: function (opts) {\n\t\tif (true !== this.enabled) {\n\t\t\treturn false;\n\t\t}\n\t\tvar options = opts || {name: utils.uid('bench')};\n\t\treturn new Benchmark(options);\n\t},\n\n\t/**\n\t* Shows a report for a given [benchmark]{@link enyo.dev.Benchmark} by name.\n\t*\n\t* @param {String} name - The name of the [benchmark]{@link enyo.dev.Benchmark} to report.\n\t* @public\n\t*/\n\treport: function (name) {\n\t\tvar bench = averages[name] || tests[name];\n\t\tif (!bench) {\n\t\t\treturn false;\n\t\t}\n\t\tif (bench.report && 'function' === typeof bench.report) {\n\t\t\treturn bench.report();\n\t\t} else {\n\t\t\tvar stats = calc(bench);\n\t\t\tlogger.log(\n\t\t\t\tutils.format(\n\t\t\t\t\treport_template,\n\t\t\t\t\t'averages',\n\t\t\t\t\tname,\n\t\t\t\t\tstats.total,\n\t\t\t\t\tstats.average,\n\t\t\t\t\tstats.min,\n\t\t\t\t\tstats.max,\n\t\t\t\t\tstats.number\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t* Removes all stored data related to the named [benchmark]{@link enyo.dev.Benchmark}.\n\t*\n\t* @param {String} name - The name of the [benchmark]{@link enyo.dev.Benchmark} from which to\n\t*\tremove stored data.\n\t* @public\n\t*/\n\tclear: function (name) {\n\t\tvar source = tests[name]? tests: averages[name]? averages: null;\n\t\tif (!source) {\n\t\t\treturn false;\n\t\t}\n\t\tif (source.complete) {\n\t\t\tsource.complete();\n\t\t}\n\t\tif (source[name] instanceof Array) {\n\t\t\tsource[name] = [];\n\t\t}\n\t\telse {\n\t\t\tdelete source[name];\n\t\t}\n\t\treturn true;\n\t}\n\n};\n\n/**\n* A [kind]{@glossary kind} used internally for development benchmarking.\n*\n* @class enyo.dev.Benchmark\n* @protected\n*/\nvar Benchmark = exports.Benchmark = kind(/** @lends enyo.dev.Benchmark.prototype */ {\n\t\n\t/**\n\t* @private\n\t*/\n\t// name: 'enyo.dev.Benchmark',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* Determines whether output will be logged to the console.\n\t* \n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tlogging: true,\n\n\t/**\n\t* Determines whether benchmarking will start immediately when this instance is created. \n\t* \n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tautoStart: true,\n\t\n\t/**\n\t* Determines whether this instance will collect and maintain a report of averages for\n\t* benches intended to be executed multiple times.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\taverage: true,\n\t\n\t/**\n\t* @private\n\t*/\n\t_started: false,\n\n\t/**\n\t* @private\n\t*/\n\t_averaging: false,\n\n\t/**\n\t* @private\n\t*/\n\t_begin: null,\n\n\t/**\n\t* @private\n\t*/\n\t_end: null,\n\n\t/**\n\t* @private\n\t*/\n\t_time: null,\n\t\n\t/**\n\t* Begins benching.\n\t*\n\t* @returns {Boolean} Whether or not benching began successfully. Returns `false` if\n\t*\tbenching was already in progress.\n\t* @public\n\t*/\n\tstart: function () {\n\t\tif (true === this._started) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._log('starting benchmark');\n\t\tthis._begin = utils.perfNow();\n\t\tthis._started = true;\n\t\treturn true;\n\t},\n\n\t/**\n\t* Stops benching.\n\t*\n\t* @returns {Boolean} Whether or not benching was stopped successfully. Returns `false`\n\t*\tif benching was not in progress.\n\t* @public\n\t*/\n\tstop: function () {\n\t\tif (!this._started) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._end = enyo.bench();\n\t\tthis._time = this._end - this._begin;\n\t\tthis._log('benchmark complete: ' + this._time);\n\t\tif (true === this._averaging) {\n\t\t\taverages[this.name].push(this._time);\n\t\t}\n\t\tthis._started = false;\n\t\treturn true;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (options) {\n\t\tutils.mixin(this, options);\n\t\ttests[this.name] = this;\n\t\tif (true === this.average && !averages[this.name]) {\n\t\t\taverages[this.name] = [];\n\t\t}\n\t\tif (averages[this.name] && false !== this.average) {\n\t\t\tthis._averaging = true;\n\t\t}\n\t\tif (true === this.autoStart) {\n\t\t\tthis.start();\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_log: function (message) {\n\t\tif (!this.logging) {\n\t\t\treturn false;\n\t\t}\n\t\tlogger.log('bench (' + this.name + '): ' + message);\n\t}\n\t\n});\n\n/**\n* When available, supplies a high-precision, high performance monotonic\n* benchmark for some internal usage and benchmark testing.\n* \n* @alias enyo.perfNow\n* @method\n* @public\n*/","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\n\nmodule.exports = function (Control) {\n\t/**\n\t* {@link enyo.FloatingLayer} is a [control]{@link enyo.Control} that provides a layer for\n\t* controls that should be displayed above an [application]{@link enyo.Application}. The\n\t* `floatingLayer` singleton can be set as a control's parent to have the control float\n\t* above the application, e.g.:\n\t*\n\t* ```\n\t* create: kind.inherit(function (sup) {\n\t*\treturn function() {\n\t*\t\tsup.apply(this, arguments);\n\t*\t\tthis.setParent(enyo.floatingLayer);\n\t*\t}\n\t* });\n\t* ```\n\t*\n\t* Note: `enyo.FloatingLayer` is not meant to be instantiated by users.\n\t*\n\t* @class enyo.FloatingLayer\n\t* @extends enyo.Control\n\t* @ui\n\t* @protected\n\t*/\n\treturn kind(\n\t\t/** @lends enyo.FloatingLayer.prototype */ {\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tkind: Control,\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tclasses: 'enyo-fit enyo-clip enyo-untouchable',\n\n\t\t/**\n\t\t* @method\n\t\t* @private\n\t\t*/\n\t\tcreate: kind.inherit(function (sup) {\n\t\t\treturn function() {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t\tthis.setParent(null);\n\n\t\t\t\tif (platform.ie < 11) {\n\t\t\t\t\tthis.removeClass('enyo-fit');\n\t\t\t\t}\n\t\t\t};\n\t\t}),\n\n\t\t/**\n\t\t* Detects when [node]{@glossary Node} is detatched due to `document.body` being stomped.\n\t\t*\n\t\t* @method\n\t\t* @private\n\t\t*/\n\t\thasNode: kind.inherit(function (sup) {\n\t\t\treturn function() {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t\tif (this.node && !this.node.parentNode) {\n\t\t\t\t\tthis.teardownRender();\n\t\t\t\t}\n\t\t\t\treturn this.node;\n\t\t\t};\n\t\t}),\n\n\t\t/**\n\t\t* @method\n\t\t* @private\n\t\t*/\n\t\trender: kind.inherit(function (sup) {\n\t\t\treturn function() {\n\t\t\t\tthis.parentNode = document.body;\n\t\t\t\treturn sup.apply(this, arguments);\n\t\t\t};\n\t\t}),\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tgenerateInnerHtml: function () {\n\t\t\treturn '';\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tbeforeChildRender: function () {\n\t\t\tif (!this.hasNode()) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tteardownChildren: function () {\n\t\t}\n\t});\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tBinding = require('./Binding');\n\nkind.concatenated.push('bindings');\n\n/**\n* An internally-used {@glossary mixin} that is added to {@link enyo.Object}\n* and its [subkinds]{@glossary subkind}. It includes public and protected API\n* methods for working with [bindings]{@link enyo.Binding}.\n*\n* @mixin enyo.BindingSupport\n* @protected\n*/\nexports = module.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'BindingSupport',\n\t\n\t/**\n\t* @private\n\t*/\n\t_bindingSupportInitialized: false,\n\t\n\t/**\n\t* Imperatively creates a [binding]{@link enyo.Binding}. Merges a variable\n\t* number of [hashes]{@glossary Object} and instantiates a binding that\n\t* will have its [owner]{@link enyo.Binding#owner} property set to the callee\n\t* (the current {@link enyo.Object}). Bindings created in this way will be\n\t* [destroyed]{@link enyo.Binding#destroy} when their `owner` is\n\t* [destroyed]{@link enyo.Object#destroy}.\n\t*\n\t* @param {...Object} props A variable number of [hashes]{@glossary Object} that will\n\t*\tbe merged into the properties applied to the {@link enyo.Binding} instance.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tbinding: function () {\n\t\tvar args = utils.toArray(arguments)\n\t\t\t, props = utils.mixin(args)\n\t\t\t, bindings = this.bindings || (this.bindings = [])\n\t\t\t, Ctor, bnd;\n\t\t\t\n\t\tprops.owner = props.owner || this;\n\t\tCtor = props.kind = props.kind || this.defaultBindingKind || Binding.defaultBindingKind;\n\t\t\n\t\tif (this._bindingSupportInitialized) {\n\t\t\tutils.isString(Ctor) && (Ctor = props.kind = kind.constructorForKind(Ctor));\n\t\t\tbnd = new Ctor(props);\n\t\t\tbindings.push(bnd);\n\t\t\treturn bnd;\n\t\t} else bindings.push(props);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Removes and [destroys]{@link enyo.Binding#destroy} all of, or a subset of,\n\t* the [bindings]{@link enyo.Binding} belonging to the callee.\n\t*\n\t* @param {enyo.Binding[]} [subset] - The optional [array]{@glossary Array} of\n\t*\t[bindings]{@link enyo.Binding} to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tclearBindings: function (subset) {\n\t\tvar bindings = subset || (this.bindings && this.bindings.slice());\n\t\tbindings.forEach(function (bnd) {\n\t\t\tbnd.destroy();\n\t\t});\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Removes a single {@link enyo.Binding} from the callee. (This does not\n\t* [destroy]{@link enyo.Binding#destroy} the binding.) Also removes the\n\t* [owner]{@link enyo.Binding#owner} reference if it is the callee.\n\t*\n\t* It should be noted that when a binding is destroyed, it is automatically\n\t* removed from its owner.\n\t*\n\t* @param {enyo.Binding} binding - The {@link enyo.Binding} instance to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tremoveBinding: function (binding) {\n\t\tutils.remove(binding, this.bindings);\n\t\t\n\t\tif (binding.owner === this) binding.owner = null;\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar bindings = this.bindings;\n\t\t\tthis._bindingSupportInitialized = true;\n\t\t\tbindings && (this.bindings = []) && bindings.forEach(function (def) {\n\t\t\t\tthis.binding(def);\n\t\t\t}, this);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.bindings && this.bindings.length && this.clearBindings();\n\t\t\tthis.bindings = null;\n\t\t};\n\t})\n};\n\n/**\n\tHijack the original so we can add additional default behavior.\n*/\nvar sup = kind.concatHandler\n\t, flags = {ignore: true};\n\n/**\n* @private\n*/\nkind.concatHandler = function (ctor, props, instance) {\n\tvar proto = ctor.prototype || ctor\n\t\t, kind = props && (props.defaultBindingKind || Binding.defaultBindingKind)\n\t\t, defaults = props && props.bindingDefaults;\n\t\n\tsup.call(this, ctor, props, instance);\n\tif (props.bindings) {\n\t\tprops.bindings.forEach(function (bnd) {\n\t\t\tdefaults && utils.mixin(bnd, defaults, flags);\n\t\t\tbnd.kind || (bnd.kind = kind); \n\t\t});\n\t\t\n\t\tproto.bindings = proto.bindings? proto.bindings.concat(props.bindings): props.bindings;\n\t\tdelete props.bindings;\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\nvar\n\tBinding = require('./Binding');\n\n/**\n* An {@link enyo.Binding} that checks for empty values. Will be `true` if there is some\n* value, but `false` for an empty [string]{@glossary String}, `null`, or `undefined`.\n*\n* @class enyo.EmptyBinding\n* @extends enyo.Binding\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.EmptyBinding.prototype */ {\n\t\n\tname: 'enyo.EmptyBinding',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: Binding,\n\t\n\t/**\n\t* @private\n\t*/\n\ttransform: function (value) {\n\t\treturn (value !== '' && value != null);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tBinding = require('./Binding');\n\n/**\n* The {@link enyo.RepeaterChildSupport} [mixin]{@glossary mixin} contains methods and\n* properties that are automatically applied to all children of {@link enyo.DataRepeater}\n* to assist in selection support. (See {@link enyo.DataRepeater} for details on how to\n* use selection support.) This mixin also [adds]{@link enyo.Repeater#decorateEvent} the\n* `model`, `child` ([control]{@link enyo.Control} instance), and `index` properties to\n* all [events]{@glossary event} emitted from the repeater's children.\n*\n* @mixin enyo.RepeaterChildSupport\n* @public\n*/\nmodule.exports = {\n\n\t/*\n\t* @private\n\t*/\n\tname: 'RepeaterChildSupport',\n\n\t/**\n\t* Indicates whether the current child is selected in the [repeater]{@link enyo.DataRepeater}.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tselected: false,\n\n\t/**\n\t* Setting cachePoint: true ensures that events from the repeater child's subtree will\n\t* always bubble up through the child, allowing the events to be decorated with repeater-\n\t* related metadata and references.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @private\n\t*/\n\tcachePoint: true,\n\t\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tselectedChanged: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this.repeater.selection) {\n\t\t\t\tthis.addRemoveClass(this.selectedClass || 'selected', this.selected);\n\t\t\t\t// for efficiency purposes, we now directly call this method as opposed to\n\t\t\t\t// forcing a synchronous event dispatch\n\t\t\t\tvar idx = this.repeater.collection.indexOf(this.model);\n\t\t\t\tif (this.selected && !this.repeater.isSelected(this.model)) {\n\t\t\t\t\tthis.repeater.select(idx);\n\t\t\t\t} else if (!this.selected && this.repeater.isSelected(this.model)) {\n\t\t\t\t\tthis.repeater.deselect(idx);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tdecorateEvent: kind.inherit(function (sup) {\n\t\treturn function (sender, event) {\n\t\t\tevent.model = this.model;\n\t\t\tevent.child = this;\n\t\t\tevent.index = this.repeater.collection.indexOf(this.model);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\t_selectionHandler: function () {\n\t\tif (this.repeater.selection && !this.get('disabled')) {\n\t\t\tif (this.repeater.selectionType != 'group' || !this.selected) {\n\t\t\t\tthis.set('selected', !this.selected);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t* Deliberately used to supersede the default method and set \n\t* [owner]{@link enyo.Component#owner} to this [control]{@link enyo.Control} so that there \n\t* are no name collisions in the instance [owner]{@link enyo.Component#owner}, and also so \n\t* that [bindings]{@link enyo.Binding} will correctly map to names.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tcreateClientComponents: kind.inherit(function () {\n\t\treturn function (components) {\n\t\t\tthis.createComponents(components, {owner: this});\n\t\t};\n\t}),\n\t/**\n\t* Used so that we don't stomp on any built-in handlers for the `ontap`\n\t* {@glossary event}.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tdispatchEvent: kind.inherit(function (sup) {\n\t\treturn function (name, event, sender) {\n\t\t\tvar owner;\n\t\t\t\n\t\t\t// if the event is coming from a child of the repeater-child (this...) and has a\n\t\t\t// delegate assigned to it there is a distinct possibility it is supposed to be\n\t\t\t// targeting the instanceOwner of repeater-child not the repeater-child itself\n\t\t\t// so we have to check this case and treat it as expected - if there is a handler\n\t\t\t// and it returns true then we must skip the normal flow\n\t\t\tif (event.originator !== this && event.delegate && event.delegate.owner === this) {\n\t\t\t\tif (typeof this[name] != 'function') {\n\t\t\t\t\t// ok we don't have the handler here let's see if our owner does\n\t\t\t\t\towner = this.getInstanceOwner();\n\t\t\t\t\tif (owner && owner !== this) {\n\t\t\t\t\t\tif (typeof owner[name] == 'function') {\n\t\t\t\t\t\t\t// alright it appears that we're supposed to forward this to the\n\t\t\t\t\t\t\t// next owner instead\n\t\t\t\t\t\t\treturn owner.dispatch(name, event, sender);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!event._fromRepeaterChild) {\n\t\t\t\tif (!!~utils.indexOf(name, this.repeater.selectionEvents)) {\n\t\t\t\t\tthis._selectionHandler();\n\t\t\t\t\tevent._fromRepeaterChild = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar r = this.repeater,\n\t\t\t\ts = r.selectionProperty;\n\t\t\t// this property will only be set if the instance of the repeater needs\n\t\t\t// to track the selected state from the view and model and keep them in sync\n\t\t\tif (s) {\n\t\t\t\tvar bnd = this.binding({\n\t\t\t\t\tfrom: 'model.' + s,\n\t\t\t\t\tto: 'selected',\n\t\t\t\t\toneWay: false/*,\n\t\t\t\t\tkind: enyo.BooleanBinding*/\n\t\t\t\t});\n\t\t\t\tthis._selectionBindingId = bnd.euid;\n\t\t\t}\n\t\t};\n\t}),\n\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this._selectionBindingId) {\n\t\t\t\tvar b$ = Binding.find(this._selectionBindingId);\n\t\t\t\tif (b$) {\n\t\t\t\t\tb$.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\t_selectionBindingId: null\n};","var\n\tkind = require('../../../enyo/lib/kind'),\n\tutils = require('../../../enyo/lib/utils'),\n\tplatform = require('../../../enyo/lib/platform');\n\nvar\n\tLayout = require('../../../enyo/lib/Layout'),\n\tDom = require('../../../enyo/lib/dom');\n\n/**\n* {@link enyo.Arranger} is an {@link enyo.Layout} that considers one of the\n* controls it lays out as active. The other controls are placed relative to\n* the active control as makes sense for the layout.\n*\n* `enyo.Arranger` supports dynamic layouts, meaning it's possible to transition\n* between an arranger's layouts\tvia animation. Typically, arrangers should lay out\n* controls using CSS transforms, since these are optimized for animation. To\n* support this, the controls in an arranger are absolutely positioned, and\n* the Arranger kind has an [accelerated]{@link enyo.Arranger#accelerated} property,\n* which marks controls for CSS compositing. The default setting of `'auto'` ensures\n* that this will occur if enabled by the platform.\n*\n* For more information, see the documentation on\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\n* Enyo Developer Guide.\n*\n* @class  enyo.Arranger\n* @extends enyo.Layout\n* @public\n*/\nvar Arranger = module.exports = kind(\n\t/** @lends  enyo.Arranger.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Arranger',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Layout,\n\n\t/**\n\t* @private\n\t*/\n\tlayoutClass: 'enyo-arranger',\n\n\t/**\n\t* Flag indicating whether the Arranger should lay out controls using CSS\n\t* compositing. The default setting `('auto')` will mark controls for compositing\n\t* if the platform supports it.\n\t*\n\t* @type {String|Boolean}\n\t* @default 'auto'\n\t* @protected\n\t*/\n\taccelerated: 'auto',\n\n\t/**\n\t* A property of the drag event, used to calculate the amount that a drag will\n\t* move the layout.\n\t*\n\t* @type {String}\n\t* @default 'ddx'\n\t* @private\n\t*/\n\tdragProp: 'ddx',\n\n\t/**\n\t* A property of the drag event, used to calculate the direction of the drag.\n\t*\n\t* @type {String}\n\t* @default 'xDirection'\n\t* @private\n\t*/\n\tdragDirectionProp: 'xDirection',\n\n\t/**\n\t* A property of the drag event, used to calculate whether a drag should occur.\n\t*\n\t* @type {String}\n\t* @default 'horizontal'\n\t* @private\n\t*/\n\tcanDragProp: 'horizontal',\n\n\t/**\n\t* If set to `true`, transitions between non-adjacent arrangements will go\n\t* through the intermediate arrangements. This is useful when direct\n\t* transitions between arrangements would be visually jarring.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @protected\n\t*/\n\tincrementalPoints: false,\n\n\t/**\n\t* Called when removing an arranger (e.g., when switching a Panels control to a\n\t* different `arrangerKind`). Subkinds should implement this function to reset\n\t* whatever properties they've changed on child controls. Note that you **must**\n\t* call the superkind implementation in your subkind's `destroy()` function.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar c$ = this.container.getPanels();\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\t\tc._arranger = null;\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Arranges the given array of `controls` in the layout specified by `index`. When\n\t* implementing this method, rather than applying styling directly to controls, call\n\t* [arrangeControl()]{@link enyo.Arranger#arrangeControl} and pass in an arrangement\n\t* object with styling settings. The styles will then be applied via\n\t* [flowControl()]{@link enyo.Arranger#flowControl}.\n\t*\n\t* @param {enyo.Control[]} controls\n\t* @param {Number} index\n\t* @virtual\n\t* @protected\n\t*/\n\tarrange: function (controls, index) {\n\t},\n\n\t/**\n\t* Sizes the controls in the layout. This method is called only at reflow time.\n\t* Note that the sizing operation has been separated from the layout done in\n\t* [arrange()]{@link enyo.Arranger#arrange} because it is expensive and not suitable\n\t* for dynamic layout.\n\t*\n\t* @virtual\n\t* @protected\n\t*/\n\tsize: function () {\n\t},\n\n\t/**\n\t* Called when a layout transition begins. Implement this method to perform\n\t* tasks that should only occur when a transition starts; for example, some\n\t* controls might be shown or hidden. In addition, the `transitionPoints`\n\t* array may be set on the container to dictate the named arrangements\n\t* between which the transition occurs.\n\t*\n\t* @protected\n\t*/\n\tstart: function () {\n\t\tvar f = this.container.fromIndex, t = this.container.toIndex;\n\t\tvar p$ = this.container.transitionPoints = [f];\n\t\t// optionally add a transition point for each index between from and to.\n\t\tif (this.incrementalPoints) {\n\t\t\tvar d = Math.abs(t - f) - 2;\n\t\t\tvar i = f;\n\t\t\twhile (d >= 0) {\n\t\t\t\ti = i + (t < f ? -1 : 1);\n\t\t\t\tp$.push(i);\n\t\t\t\td--;\n\t\t\t}\n\t\t}\n\t\tp$.push(this.container.toIndex);\n\t},\n\n\t/**\n\t* Called when a layout transition completes. Implement this method to\n\t* perform tasks that should only occur when a transition ends; for\n\t* example, some controls might be shown or hidden.\n\t*\n\t* @virtual\n\t* @protected\n\t*/\n\tfinish: function () {\n\t},\n\n\t/**\n\t* Called when dragging the layout, this method returns the difference in\n\t* pixels between the arrangement `a0` for layout setting `i0`\tand\n\t* arrangement `a1` for layout setting `i1`. This data is used to calculate\n\t* the percentage that a drag should move the layout between two active states.\n\t*\n\t* @param {Number} i0 - The initial layout setting.\n\t* @param {Object} a0 - The initial arrangement.\n\t* @param {Number} i1 - The target layout setting.\n\t* @param {Object} a1 - The target arrangement.\n\t* @virtual\n\t* @protected\n\t*/\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcanDragEvent: function (event) {\n\t\treturn event[this.canDragProp];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcDragDirection: function (event) {\n\t\treturn event[this.dragDirectionProp];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcDrag: function (event) {\n\t\treturn event[this.dragProp];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrag: function (dp, an, a, bn, b) {\n\t\tvar f = this.measureArrangementDelta(-dp, an, a, bn, b);\n\t\treturn f;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmeasureArrangementDelta: function (x, i0, a0, i1, a1) {\n\t\tvar d = this.calcArrangementDifference(i0, a0, i1, a1);\n\t\tvar s = d ? x / Math.abs(d) : 0;\n\t\ts = s * (this.container.fromIndex > this.container.toIndex ? -1 : 1);\n\t\treturn s;\n\t},\n\n\t/**\n\t* Arranges the panels, with the panel at `index` being designated as active.\n\t*\n\t* @param  {Number} index - The index of the active panel.\n\t* @private\n\t*/\n\t_arrange: function (index) {\n\t\t// guard against being called before we've been rendered\n\t\tif (!this.containerBounds) {\n\t\t\tthis.reflow();\n\t\t}\n\t\tvar c$ = this.getOrderedControls(index);\n\t\tthis.arrange(c$, index);\n\t},\n\n\t/**\n\t* Arranges `control` according to the specified `arrangement`.\n\t*\n\t* Note that this method doesn't actually modify `control` but rather sets the\n\t* arrangement on a private member of the control to be retrieved by\n\t* {@link enyo.Panels}.\n\t*\n\t* @param  {enyo.Control} control\n\t* @param  {Object} arrangement\n\t* @private\n\t*/\n\tarrangeControl: function (control, arrangement) {\n\t\tcontrol._arranger = utils.mixin(control._arranger || {}, arrangement);\n\t},\n\n\t/**\n\t* Called before HTML is rendered. Applies CSS to panels to ensure GPU acceleration if\n\t* [accelerated]{@link enyo.Arranger#accelerated} is `true`.\n\t*\n\t* @private\n\t*/\n\tflow: function () {\n\t\tthis.c$ = [].concat(this.container.getPanels());\n\t\tthis.controlsIndex = 0;\n\t\tfor (var i=0, c$=this.container.getPanels(), c; (c=c$[i]); i++) {\n\t\t\tDom.accelerate(c, !c.preventAccelerate && this.accelerated);\n\t\t\tif (platform.safari) {\n\t\t\t\t// On Safari-desktop, sometimes having the panel's direct child set to accelerate isn't sufficient\n\t\t\t\t// this is most often the case with Lists contained inside another control, inside a Panels\n\t\t\t\tvar grands=c.children;\n\t\t\t\tfor (var j=0, kid; (kid=grands[j]); j++) {\n\t\t\t\t\tDom.accelerate(kid, this.accelerated);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Called during \"rendered\" phase to [size]{@link enyo.Arranger#size} the controls.\n\t*\n\t* @private\n\t*/\n\treflow: function () {\n\t\tvar cn = this.container.hasNode();\n\t\tthis.containerBounds = cn ? {width: cn.clientWidth, height: cn.clientHeight} : {};\n\t\tthis.size();\n\t},\n\n\t/**\n\t* If the {@link enyo.Panels} has an arrangement, flows each control according to that\n\t* arrangement.\n\t*\n\t* @private\n\t*/\n\tflowArrangement: function () {\n\t\tvar a = this.container.arrangement;\n\t\tif (a) {\n\t\t\tfor (var i=0, c$=this.container.getPanels(), c; (c=c$[i]) && (a[i]); i++) {\n\t\t\t\tthis.flowControl(c, a[i]);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t* Lays out the given `control` according to the settings stored in the\n\t* `arrangement` object. By default, `flowControl()` will apply settings for\n\t* `left`, `top`, and `opacity`. This method should only be implemented to apply\n\t* other settings made via [arrangeControl()]{@link enyo.Arranger#arrangeControl}.\n\t*\n\t* @param {enyo.Control} control - The control to be laid out.\n\t* @param {Object} arrangement - An object whose members specify the layout settings.\n\t* @protected\n\t*/\n\tflowControl: function (control, arrangement) {\n\t\tArranger.positionControl(control, arrangement);\n\t\tvar o = arrangement.opacity;\n\t\tif (o != null) {\n\t\t\tArranger.opacifyControl(control, o);\n\t\t}\n\t},\n\n\t/**\n\t* Gets an array of controls arranged in state order.\n\t* note: optimization, dial around a single array.\n\t*\n\t* @param  {Number} index     - The index of the active panel.\n\t* @return {enyo.Control[]}   - Ordered array of controls.\n\t* @private\n\t*/\n\tgetOrderedControls: function (index) {\n\t\tvar whole = Math.floor(index);\n\t\tvar a = whole - this.controlsIndex;\n\t\tvar sign = a > 0;\n\t\tvar c$ = this.c$ || [];\n\t\tfor (var i=0; i<Math.abs(a); i++) {\n\t\t\tif (sign) {\n\t\t\t\tc$.push(c$.shift());\n\t\t\t} else {\n\t\t\t\tc$.unshift(c$.pop());\n\t\t\t}\n\t\t}\n\t\tthis.controlsIndex = whole;\n\t\treturn c$;\n\t}\n});\n\n/**\n* Positions a control via transform--`translateX/translateY` if supported,\n* falling back to `left/top` if not.\n*\n* @lends enyo.Arranger\n* @param  {enyo.Control} control - The control to position.\n* @param  {Object} bounds        - The new bounds for `control`.\n* @param  {String} unit          - The unit for `bounds` members.\n* @public\n*/\nArranger.positionControl = function (control, bounds, unit) {\n\tunit = unit || 'px';\n\tif (!this.updating) {\n\t\t// IE10 uses setBounds because of control hit caching problems seem in some apps\n\t\tif (Dom.canTransform() && !control.preventTransform && !platform.android && platform.ie !== 10) {\n\t\t\tvar l = bounds.left, t = bounds.top;\n\t\t\tl = utils.isString(l) ? l : l && (l + unit);\n\t\t\tt = utils.isString(t) ? t : t && (t + unit);\n\t\t\tDom.transform(control, {translateX: l || null, translateY: t || null});\n\t\t} else {\n\t\t\t// If a previously positioned control has subsequently been marked with\n\t\t\t// preventTransform, we need to clear out any old translation values.\n\t\t\tif (Dom.canTransform() && control.preventTransform) {\n\t\t\t\tDom.transform(control, {translateX: null, translateY: null});\n\t\t\t}\n\t\t\tcontrol.setBounds(bounds, unit);\n\t\t}\n\t}\n},\n\n/**\n* Sets the opacity value for a given control.\n*\n* @lends enyo.Arranger\n* @param  {enyo.Control} inControl - The control whose opacity is to be set.\n* @param  {Number} inOpacity - The new opacity value for the control.\n* @public\n*/\nArranger.opacifyControl = function (inControl, inOpacity) {\n\tvar o = inOpacity;\n\t// FIXME: very high/low settings of opacity can cause a control to\n\t// blink so cap this here.\n\to = o > 0.99 ? 1 : (o < 0.01 ? 0 : o);\n\t// note: we only care about ie8\n\tif (platform.ie < 9) {\n\t\tinControl.applyStyle('filter', 'progid:DXImageTransform.Microsoft.Alpha(Opacity=' + (o * 100) + ')');\n\t} else {\n\t\tinControl.applyStyle('opacity', o);\n\t}\n}","var\n    kind = require('../../../enyo/lib/kind'),\n    Layout = require('../../../enyo/lib/Layout');\n\n/**\n* {@link enyo.ContextualLayout} provides the base positioning logic for a contextual\n* layout strategy. This layout strategy is intended for use with a popup in a\n* decorator/activator scenario, in which the popup is positioned relative to\n* the activator, e.g.:\n*\n* ```\n* {kind: 'onyx.ContextualPopupDecorator', components: [\n*   {content: 'Show Popup'},\n*   {kind: 'onyx.ContextualPopup',\n*       title: 'Sample Popup',\n*       actionButtons: [\n*           {content: 'Button 1', classes: 'onyx-button-warning'},\n*           {content: 'Button 2'}\n*       ],\n*       components: [\n*           {content: 'Sample component in popup'}\n*       ]\n*   }\n* ]}\n* ```\n*\n* The decorator contains the popup and activator, with the activator being the\n* first child component (i.e., the \"Show Popup\" button). The contextual layout\n* strategy is applied because, in the definition of `onyx.ContextualPopup`,\n* its `layoutKind` property is set to `enyo.ContextualLayout`.\n*\n* Note that a popup using ContextualLayout as its `layoutKind` is expected to\n* declare several specific properties:\n*\n* - `vertFlushMargin` - The vertical flush layout margin, i.e., how close the\n* popup's edge may come to the vertical screen edge (in pixels) before\n* being laid out \"flush\" style.\n* - `horizFlushMargin` - The horizontal flush layout margin, i.e., how close\n* the popup's edge may come to the horizontal screen edge (in pixels)\n* before being laid out \"flush\" style.\n* - `widePopup` - A popup wider than this value (in pixels) is considered wide\n* for layout calculation purposes.\n* - `longPopup` - A popup longer than this value (in pixels) is considered long\n* for layout calculation purposes.\n* - `horizBuffer` - Horizontal flush popups are not allowed within this buffer\n* area (in pixels) on the left or right screen edge.\n* - `activatorOffset` - The popup activator's offset on the page (in pixels);\n* this should be calculated whenever the popup is to be shown.\n*\n* @typedef {Object} enyo.ContextualLayout\n*\n* @class enyo.ContextualLayout\n* @extends enyo.Layout\n* @public\n*/\n\nmodule.exports = kind(\n    /** @lends  enyo.ContextualLayout.prototype */ {\n\n    /**\n    * @private\n    */\n    name: 'enyo.ContextualLayout',\n\n    /**\n\t* @private\n\t*/\n    kind: Layout,\n\n    /**\n    * Adjusts the popup's position, as well as the nub location and direction.\n    *\n    * @public\n    */\n    adjustPosition: function() {\n        if (this.container.showing && this.container.hasNode()) {\n            /****ContextualPopup positioning rules:\n                1. Activator Location:\n                    a. If activator is located in a corner then position using a flush style.\n                        i.  Attempt vertical first.\n                        ii. Horizontal if vertical doesn't fit.\n                    b. If not in a corner then check if the activator is located in one of the 4 \"edges\" of the view & position the\n                        following way if so:\n                        i.   Activator is in top edge, position popup below it.\n                        ii.  Activator is in bottom edge, position popup above it.\n                        iii. Activator is in left edge, position popup to the right of it.\n                        iv.  Activator is in right edge, position popup to the left of it.\n\n                2. Screen Size - the pop-up should generally extend in the direction where theres room for it.\n                    Note: no specific logic below for this rule since it is built into the positioning functions, ie we attempt to never\n                    position a popup where there isn't enough room for it.\n\n                3. Popup Size:\n                    i.  If popup content is wide, use top or bottom positioning.\n                    ii. If popup content is long, use horizontal positioning.\n\n                4. Favor top or bottom:\n                    If all the above rules have been followed and location can still vary then favor top or bottom positioning.\n\n                5. If top or bottom will work, favor bottom.\n                    Note: no specific logic below for this rule since it is built into the vertical position functions, ie we attempt to\n                    use a bottom position for the popup as much possible. Additionally within the vetical position function we center the\n                    popup if the activator is at the vertical center of the view.\n            ****/\n            this.resetPositioning();\n            var innerWidth = this.getViewWidth();\n            var innerHeight = this.getViewHeight();\n\n            //These are the view \"flush boundaries\"\n            var topFlushPt = this.container.vertFlushMargin;\n            var bottomFlushPt = innerHeight - this.container.vertFlushMargin;\n            var leftFlushPt = this.container.horizFlushMargin;\n            var rightFlushPt = innerWidth - this.container.horizFlushMargin;\n\n            //Rule 1 - Activator Location based positioning\n            //if the activator is in the top or bottom edges of the view, check if the popup needs flush positioning\n            if ((this.offset.top + this.offset.height) < topFlushPt || this.offset.top > bottomFlushPt) {\n                //check/try vertical flush positioning\t(rule 1.a.i)\n                if (this.applyVerticalFlushPositioning(leftFlushPt, rightFlushPt)) {\n                    return;\n                }\n\n                //if vertical doesn't fit then check/try horizontal flush (rule 1.a.ii)\n                if (this.applyHorizontalFlushPositioning(leftFlushPt, rightFlushPt)) {\n                    return;\n                }\n\n                //if flush positioning didn't work then try just positioning vertically (rule 1.b.i & rule 1.b.ii)\n                if (this.applyVerticalPositioning()){\n                    return;\n                }\n            //otherwise check if the activator is in the left or right edges of the view & if so try horizontal positioning\n            } else if ((this.offset.left + this.offset.width) < leftFlushPt || this.offset.left > rightFlushPt) {\n                //if flush positioning didn't work then try just positioning horizontally (rule 1.b.iii & rule 1.b.iv)\n                if (this.applyHorizontalPositioning()){\n                    return;\n                }\n            }\n\n            //Rule 2 - no specific logic below for this rule since it is inheritent to the positioning functions, ie we attempt to never\n            //position a popup where there isn't enough room for it.\n\n            //Rule 3 - Popup Size based positioning\n            var clientRect = this.getBoundingRect(this.container.node);\n\n            //if the popup is wide then use vertical positioning\n            if (clientRect.width > this.container.widePopup) {\n                if (this.applyVerticalPositioning()){\n                    return;\n                }\n            }\n            //if the popup is long then use horizontal positioning\n            else if (clientRect.height > this.container.longPopup) {\n                if (this.applyHorizontalPositioning()){\n                    return;\n                }\n            }\n\n            //Rule 4 - Favor top or bottom positioning\n            if (this.applyVerticalPositioning()) {\n                return;\n            }\n            //but if thats not possible try horizontal\n            else if (this.applyHorizontalPositioning()){\n                return;\n            }\n\n            //Rule 5 - no specific logic below for this rule since it is built into the vertical position functions, ie we attempt to\n            //         use a bottom position for the popup as much possible.\n        }\n    },\n    //\n\n    /**\n    * Determines whether the popup will fit onscreen if moved below or above the activator.\n    *\n    * @return {Boolean} `true` if popup will fit onscreen; otherwise, `false`.\n    * @public\n    */\n    initVerticalPositioning: function() {\n        this.resetPositioning();\n        this.container.addClass('vertical');\n\n        var clientRect = this.getBoundingRect(this.container.node);\n        var innerHeight = this.getViewHeight();\n\n        if (this.container.floating){\n            if (this.offset.top < (innerHeight / 2)) {\n                this.applyPosition({top: this.offset.top + this.offset.height, bottom: 'auto'});\n                this.container.addClass('below');\n            } else {\n                this.applyPosition({top: this.offset.top - clientRect.height, bottom: 'auto'});\n                this.container.addClass('above');\n            }\n        } else {\n            //if the popup's bottom goes off the screen then put it on the top of the invoking control\n            if ((clientRect.top + clientRect.height > innerHeight) && ((innerHeight - clientRect.bottom) < (clientRect.top - clientRect.height))){\n                this.container.addClass('above');\n            } else {\n                this.container.addClass('below');\n            }\n        }\n\n        //if moving the popup above or below the activator puts it past the edge of the screen then vertical doesn't work\n        clientRect = this.getBoundingRect(this.container.node);\n        if ((clientRect.top + clientRect.height) > innerHeight || clientRect.top < 0){\n            return false;\n        }\n\n        return true;\n    },\n\n    /**\n    * Moves the popup below or above the activating control.\n    *\n    * @return {Boolean} `false` if popup was not moved because it would not fit onscreen\n    * in the new position; otherwise, `true`.\n    * @public\n    */\n    applyVerticalPositioning: function() {\n        //if we can't fit the popup above or below the activator then forget vertical positioning\n        if (!this.initVerticalPositioning()) {\n            return false;\n        }\n\n        var clientRect = this.getBoundingRect(this.container.node);\n        var innerWidth = this.getViewWidth();\n\n        if (this.container.floating){\n            //Get the left edge delta to horizontally center the popup\n            var centeredLeft = this.offset.left + this.offset.width/2 - clientRect.width/2;\n            if (centeredLeft + clientRect.width > innerWidth) {//popup goes off right edge of the screen if centered\n                this.applyPosition({left: this.offset.left + this.offset.width - clientRect.width});\n                this.container.addClass('left');\n            } else if (centeredLeft < 0) {//popup goes off left edge of the screen if centered\n                this.applyPosition({left:this.offset.left});\n                this.container.addClass('right');\n            } else {//center the popup\n                this.applyPosition({left: centeredLeft});\n            }\n\n        } else {\n            //Get the left edge delta to horizontally center the popup\n            var centeredLeftDelta = this.offset.left + this.offset.width/2 - clientRect.left - clientRect.width/2;\n            if (clientRect.right + centeredLeftDelta > innerWidth) {//popup goes off right edge of the screen if centered\n                this.applyPosition({left: this.offset.left + this.offset.width - clientRect.right});\n                this.container.addRemoveClass('left', true);\n            } else if (clientRect.left + centeredLeftDelta < 0) {//popup goes off left edge of the screen if centered\n                this.container.addRemoveClass('right', true);\n            } else {//center the popup\n                this.applyPosition({left: centeredLeftDelta});\n            }\n        }\n\n        return true;\n    },\n\n    /**\n    * Positions the popup vertically flush with the activating control.\n    *\n    * @param {Number} leftFlushPt - Left side cutoff.\n    * @param {Number} rightFlushPt - Right side cutoff.\n    * @return {Boolean} `false` if popup will not fit onscreen in new position;\n    * otherwise, `true`.\n    * @public\n    */\n    applyVerticalFlushPositioning: function(leftFlushPt, rightFlushPt) {\n        //if we can't fit the popup above or below the activator then forget vertical positioning\n        if (!this.initVerticalPositioning()) {\n            return false;\n        }\n\n        var clientRect = this.getBoundingRect(this.container.node);\n        var innerWidth = this.getViewWidth();\n\n        //If the activator's right side is within our left side cut off use flush positioning\n        if ((this.offset.left + this.offset.width/2) < leftFlushPt){\n            //if the activator's left edge is too close or past the screen left edge\n            if (this.offset.left + this.offset.width/2 < this.container.horizBuffer){\n                this.applyPosition({left:this.container.horizBuffer + (this.container.floating ? 0 : -clientRect.left)});\n            } else {\n                this.applyPosition({left:this.offset.width/2  + (this.container.floating ? this.offset.left : 0)});\n            }\n\n            this.container.addClass('right');\n            this.container.addClass('corner');\n            return true;\n        }\n        //If the activator's left side is within our right side cut off use flush positioning\n        else if (this.offset.left + this.offset.width/2 > rightFlushPt) {\n            if ((this.offset.left+this.offset.width/2) > (innerWidth-this.container.horizBuffer)){\n                this.applyPosition({left:innerWidth - this.container.horizBuffer - clientRect.right});\n            } else {\n                this.applyPosition({left: (this.offset.left + this.offset.width/2) - clientRect.right});\n            }\n            this.container.addClass('left');\n            this.container.addClass('corner');\n            return true;\n        }\n\n        return false;\n    },\n\n    /**\n    * Determines whether popup will fit onscreen if moved to the left or right of the\n    * activator.\n    *\n    * @return {Boolean} `true` if the popup will fit onscreen; otherwise, `false`.\n    * @public\n    */\n    initHorizontalPositioning: function() {\n        this.resetPositioning();\n\n        var clientRect = this.getBoundingRect(this.container.node);\n        var innerWidth = this.getViewWidth();\n\n        //adjust horizontal positioning of the popup & nub vertical positioning\n        if (this.container.floating){\n            if ((this.offset.left + this.offset.width) < innerWidth/2) {\n                this.applyPosition({left: this.offset.left + this.offset.width});\n                this.container.addRemoveClass('left', true);\n            } else {\n                this.applyPosition({left: this.offset.left - clientRect.width});\n                this.container.addRemoveClass('right', true);\n            }\n        } else {\n            if (this.offset.left - clientRect.width > 0) {\n                this.applyPosition({left: this.offset.left - clientRect.left - clientRect.width});\n                this.container.addRemoveClass('right', true);\n            } else {\n                this.applyPosition({left: this.offset.width});\n                this.container.addRemoveClass('left', true);\n            }\n        }\n        this.container.addRemoveClass('horizontal', true);\n\n        //if moving the popup left or right of the activator puts it past the edge of the screen then horizontal won't work\n        clientRect = this.getBoundingRect(this.container.node);\n        if (clientRect.left < 0 || (clientRect.left + clientRect.width) > innerWidth){\n            return false;\n        }\n        return true;\n\n    },\n\n    /**\n    * Moves the popup to the left or right of the activating control.\n    *\n    * @return {Boolean} `false` if popup was not moved because it would not fit onscreen\n    * in the new position; otherwise, `true`.\n    * @public\n    */\n    applyHorizontalPositioning: function() {\n        //if we can't fit the popup left or right of the activator then forget horizontal positioning\n        if (!this.initHorizontalPositioning()) {\n            return false;\n        }\n\n        var clientRect = this.getBoundingRect(this.container.node);\n        var innerHeight = this.getViewHeight();\n        var activatorCenter = this.offset.top + this.offset.height/2;\n\n        if (this.container.floating){\n            //if the activator's center is within 10% of the center of the view, vertically center the popup\n            if ((activatorCenter >= (innerHeight/2 - 0.05 * innerHeight)) && (activatorCenter <= (innerHeight/2 + 0.05 * innerHeight))) {\n                this.applyPosition({top: this.offset.top + this.offset.height/2 - clientRect.height/2, bottom: 'auto'});\n            } else if (this.offset.top + this.offset.height < innerHeight/2) { //the activator is in the top 1/2 of the screen\n                this.applyPosition({top: this.offset.top, bottom: 'auto'});\n                this.container.addRemoveClass('high', true);\n            } else { //otherwise the popup will be positioned in the bottom 1/2 of the screen\n                this.applyPosition({top: this.offset.top - clientRect.height + this.offset.height*2, bottom: 'auto'});\n                this.container.addRemoveClass('low', true);\n            }\n        } else {\n            //if the activator's center is within 10% of the center of the view, vertically center the popup\n            if ((activatorCenter >= (innerHeight/2 - 0.05 * innerHeight)) && (activatorCenter <= (innerHeight/2 + 0.05 * innerHeight))) {\n                this.applyPosition({top: (this.offset.height - clientRect.height)/2});\n            } else if (this.offset.top + this.offset.height < innerHeight/2) { //the activator is in the top 1/2 of the screen\n                this.applyPosition({top: -this.offset.height});\n                this.container.addRemoveClass('high', true);\n            } else { //otherwise the popup will be positioned in the bottom 1/2 of the screen\n                this.applyPosition({top: clientRect.top - clientRect.height - this.offset.top + this.offset.height});\n                this.container.addRemoveClass('low', true);\n            }\n        }\n        return true;\n    },\n\n\n    /**\n    * Positions the popup horizontally flush with the activating control.\n    *\n    * @param {Number} leftFlushPt - Left side cutoff.\n    * @param {Number} rightFlushPt - Right side cutoff.\n    * @return {Boolean} `false` if popup will not fit onscreen in new position;\n    * otherwise, `true`.\n    * @public\n    */\n    applyHorizontalFlushPositioning: function(leftFlushPt, rightFlushPt) {\n        //if we can't fit the popup left or right of the activator then forget horizontal positioning\n        if (!this.initHorizontalPositioning()) {\n            return false;\n        }\n\n        var clientRect = this.getBoundingRect(this.container.node);\n        var innerHeight = this.getViewHeight();\n\n        //adjust vertical positioning (high or low nub & popup position)\n        if (this.container.floating){\n            if (this.offset.top < (innerHeight/2)){\n                this.applyPosition({top: this.offset.top + this.offset.height/2});\n                this.container.addRemoveClass('high', true);\n            } else {\n                this.applyPosition({top:this.offset.top + this.offset.height/2 - clientRect.height});\n                this.container.addRemoveClass('low', true);\n            }\n        } else {\n            if (((clientRect.top + clientRect.height) > innerHeight) && ((innerHeight - clientRect.bottom) < (clientRect.top - clientRect.height))) {\n                this.applyPosition({top: clientRect.top - clientRect.height - this.offset.top - this.offset.height/2});\n                this.container.addRemoveClass('low', true);\n            } else {\n                this.applyPosition({top: this.offset.height/2});\n                this.container.addRemoveClass('high', true);\n            }\n        }\n\n        //If the activator's right side is within our left side cut off use flush positioning\n        if ((this.offset.left + this.offset.width) < leftFlushPt){\n            this.container.addClass('left');\n            this.container.addClass('corner');\n            return true;\n        }\n        //If the activator's left side is within our right side cut off use flush positioning\n        else if (this.offset.left > rightFlushPt) {\n            this.container.addClass('right');\n            this.container.addClass('corner');\n            return true;\n        }\n\n        return false;\n    },\n\n    /**\n    * Retrieves an object with properties describing the bounding rectangle for the\n    * passed-in DOM node.\n    *\n    * @param  {String} inNode - DOM node for which to retrieve the bounding rectangle.\n    * @return {Object} Object with properties describing the DOM node's bounding rectangle.\n    * @private\n    */\n    getBoundingRect:  function(inNode){\n        // getBoundingClientRect returns top/left values which are relative to the viewport and not absolute\n        var o = inNode.getBoundingClientRect();\n        if (!o.width || !o.height) {\n            return {\n                left: o.left,\n                right: o.right,\n                top: o.top,\n                bottom: o.bottom,\n                width: o.right - o.left,\n                height: o.bottom - o.top\n            };\n        }\n        return o;\n    },\n\n    /**\n    * @private\n    */\n    getViewHeight: function() {\n        return (window.innerHeight === undefined) ? document.documentElement.clientHeight : window.innerHeight;\n    },\n\n    /**\n    * @private\n    */\n    getViewWidth: function() {\n        return (window.innerWidth === undefined) ? document.documentElement.clientWidth : window.innerWidth;\n    },\n\n    /**\n    * @private\n    */\n    applyPosition: function(inRect) {\n        var s = '';\n        for (var n in inRect) {\n            s += (n + ':' + inRect[n] + (isNaN(inRect[n]) ? '; ' : 'px; '));\n        }\n        this.container.addStyles(s);\n    },\n\n    /**\n    * @private\n    */\n    resetPositioning: function() {\n        this.container.removeClass('right');\n        this.container.removeClass('left');\n        this.container.removeClass('high');\n        this.container.removeClass('low');\n        this.container.removeClass(\"corner\");\n        this.container.removeClass('below');\n        this.container.removeClass('above');\n        this.container.removeClass('vertical');\n        this.container.removeClass('horizontal');\n\n        this.applyPosition({left: 'auto'});\n        this.applyPosition({top: 'auto'});\n    },\n\n    /**\n    * @private\n    */\n    reflow: function() {\n        this.offset = this.container.activatorOffset;\n        this.adjustPosition();\n    }\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\nvar\n\tLinkedListNode = require('./LinkedListNode');\n\n/**\n* An abstract linked-list.\n*\n* @class enyo.LinkedList\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.LinkedList.prototype */ {\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @private\n\t*/\n\tnodeKind: LinkedListNode,\n\t\n\t/**\n\t* @private\n\t*/\n\thead: null,\n\t\n\t/**\n\t* @private\n\t*/\n\ttail: null,\n\t\n\t/**\n\t* @private\n\t*/\n\tlength: 0,\n\t\n\t/**\n\t* @private\n\t*/\n\tclear: function () {\n\t\tif (this.head) {\n\t\t\t// this will trigger a chain event down the list\n\t\t\tthis.head.destroy();\n\t\t}\n\t\tthis.head = null;\n\t\tthis.tail = null;\n\t\tthis.length = 0;\t\t\t\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tslice: function (fromNode, toNode) {\n\t\tvar node = fromNode || this.head\n\t\t\t, list = new this.ctor()\n\t\t\t, cpy;\n\t\t\n\t\t// ensure we have a final node or our tail\n\t\ttoNode = toNode || this.tail;\n\t\t\n\t\tif (node && node !== toNode) {\n\t\t\tdo {\n\t\t\t\tcpy = node.copy();\n\t\t\t\tlist.appendNode(cpy);\n\t\t\t} while ((node = node.next) && node !== toNode);\n\t\t}\n\t\t\n\t\treturn list;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\tthis.clear();\n\t\tthis.destroyed = true;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tcreateNode: function (props) {\n\t\treturn new this.nodeKind(props);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdeleteNode: function (node) {\n\t\tthis.removeNode(node);\n\t\t\n\t\t// can't chain destruct because we removed its chain references\n\t\tnode.destroy();\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tremoveNode: function (node) {\n\t\tvar prev = node.prev\n\t\t\t, next = node.next;\n\t\t\t\n\t\tprev && (prev.next = next);\n\t\tnext && (next.prev = prev);\n\t\tthis.length--;\n\t\tnode.next = node.prev = null;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tappendNode: function (node, targetNode) {\n\t\ttargetNode = targetNode || this.tail;\n\t\t\n\t\tif (targetNode) {\n\t\t\tif (targetNode.next) {\n\t\t\t\tnode.next = targetNode.next;\n\t\t\t}\n\t\t\t\n\t\t\ttargetNode.next = node;\n\t\t\tnode.prev = targetNode;\n\t\t\t\n\t\t\tif (targetNode === this.tail) {\n\t\t\t\tthis.tail = node;\n\t\t\t}\n\t\t\t\n\t\t\tthis.length++;\n\t\t} else {\n\t\t\t\n\t\t\tthis.head = this.tail = node;\n\t\t\tnode.prev = node.next = null;\n\t\t\tthis.length = 1;\n\t\t}\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tfind: function (fn, ctx, targetNode) {\n\t\tvar node = targetNode || this.head;\n\t\tif (node) {\n\t\t\tdo {\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\t\t\t} while ((node = node.next));\n\t\t}\n\t\t// if no node qualified it returns false\n\t\treturn false;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tforward: function (fn, ctx, targetNode) {\n\t\tvar node = targetNode || this.head;\n\t\tif (node) {\n\t\t\tdo {\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} while ((node = node.next));\n\t\t}\n\t\t// returns the last node (if any) that was processed in the chain\n\t\treturn node;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tbackward: function (fn, ctx, targetNode) {\n\t\tvar node = targetNode || this.tail;\n\t\tif (node) {\n\t\t\tdo {\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} while ((node = node.prev));\n\t\t}\n\t\t// returns the last node (if any) that was processed in the chain\n\t\treturn node;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function () {\n\t\tthis.nodeType = kind.constructorForKind(this.nodeType);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tLinkedListNode = require('./LinkedListNode');\n\nfunction get (base, prop) {\n\treturn base && /*isObject(base)*/ (typeof base == 'object')? (\n\t\tbase.get? base.get(prop): base[prop]\n\t): undefined;\n}\n\n/**\n* An internally used {@glossary kind}.\n*\n* @class enyo.ObserverChainNode\n* @extends enyo.LinkedListNode\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ObserverChainNode.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tkind: LinkedListNode,\n\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.connect();\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.disconnect();\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.observer = null;\n\t\t\tthis.list = null;\n\t\t\tthis.object = null;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tconnect: function () {\n\t\tvar obj = this.object\n\t\t\t, obs = this._changed\n\t\t\t, prop = this.property;\n\t\tif (obj) {\n\t\t\tif (obj.observe) obj.observe(prop, obs, this, {noChain: true, priority: true});\n\t\t\tthis.connected = true;\n\t\t\tthis.list.connected++;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdisconnect: function () {\n\t\tvar obj = this.object\n\t\t\t, obs = this._changed\n\t\t\t, prop = this.property\n\t\t\t, was = this.connected;\n\t\tobj && obj.unobserve && obj.unobserve(prop, obs, this);\n\t\tthis.connected = null;\n\t\tif (was) this.list.connected--;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tsetObject: function (object) {\n\t\tvar cur = this.object\n\t\t\t, prop = this.property\n\t\t\t, was, is;\n\t\t\n\t\tif (cur !== object) {\n\t\t\tthis.disconnect();\n\t\t\tthis.object = object;\n\t\t\tthis.connect();\n\t\t\t\n\t\t\tif (this.list.tail === this) {\n\t\t\t\twas = get(cur, prop);\n\t\t\t\tis = get(object, prop);\n\t\t\t\t// @TODO: It would be better to somehow cache values\n\t\t\t\t// such that it could intelligently derive the difference\n\t\t\t\t// without needing to continuously look it up with get\n\t\t\t\twas !== is && this.list.observed(this, was, is);\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_changed: function (was, is) {\n\t\tthis.list.observed(this, was, is);\n\t}\n});","var\n\tkind = require('../../enyo/lib/kind');\n\nvar\n\tArranger = require('./Arranger');\n\n\n/**\n* {@link enyo.CardArranger} is an {@link enyo.Arranger} that displays only\n* one active control. The non-active controls are hidden with\n* `setShowing(false)`. Transitions between arrangements are handled by fading\n* from one control to the next.\n*\n* For more information, see the documentation on\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\n* Enyo Developer Guide.\n*\n* @class  enyo.CardArranger\n* @extends enyo.Arranger\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends  enyo.CardArranger.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.CardArranger',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Arranger,\n\n\t/**\n\t* @private\n\t*/\n\tlayoutClass: 'enyo-arranger enyo-arranger-fit',\n\n\t/**\n\t* @see {@link enyo.Arranger.calcArrangementDifference}\n\t* @protected\n\t*/\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\n\t\treturn this.containerBounds.width;\n\t},\n\n\t/**\n\t* Applies opacity to the activation and deactivation of panels. Expects the passed-in\n\t* array of controls to be ordered such that the first control in the array is the active\n\t* panel.\n\t*\n\t* @see {@link enyo.Arranger.arrange}\n\t* @protected\n\t*/\n\tarrange: function (controls, arrangement) {\n\t\tfor (var i=0, c, v; (c=controls[i]); i++) {\n\t\t\tv = (i === 0) ? 1 : 0;\n\t\t\tthis.arrangeControl(c, {opacity: v});\n\t\t}\n\t},\n\n\t/**\n\t* Shows the active panel at the start of transition. Also triggers a resize on\n\t* the active panel if it wasn't previously showing.\n\t*\n\t* @see {@link enyo.Arranger.start}\n\t* @method\n\t* @protected\n\t*/\n\tstart: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar c$ = this.container.getPanels();\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\t\tvar wasShowing=c.showing;\n\t\t\t\tc.setShowing(i == this.container.fromIndex || i == (this.container.toIndex));\n\t\t\t\tif (c.showing && !wasShowing) {\n\t\t\t\t\tc.resize();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* Hides all non-active panels when the transition completes.\n\t*\n\t* @see {@link enyo.Arranger.finish}\n\t* @method\n\t* @protected\n\t*/\n\tfinish: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar c$ = this.container.getPanels();\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\t\tc.setShowing(i == this.container.toIndex);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* Ensures all panels are showing and visible when the arranger is destroyed.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar c$ = this.container.getPanels();\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\t\tArranger.opacifyControl(c, 1);\n\t\t\t\tif (!c.showing) {\n\t\t\t\t\tc.setShowing(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t})\n});","var\n\tkind = require('../../enyo/lib/kind'),\n\tdom = require('../../enyo/lib/dom');\n\nvar\n\tArranger = require('./Arranger');\n\n/**\n* {@link enyo.CarouselArranger} is an {@link enyo.Arranger} that displays\n* the active control, along with some number of inactive controls to fill the\n* available space. The active control is positioned on the left side of the\n* container, and the rest of the views are laid out to the right.\n*\n* One of the controls may have `fit: true` set, in which case it will take up\n* any remaining space after all of the other controls have been sized.\n*\n* For best results with CarouselArranger, you should set a minimum width for\n* each control via a CSS style, e.g., `min-width: 25%` or `min-width: 250px`.\n*\n* Transitions between arrangements are handled by sliding the new controls in\n* from the right and sliding the old controls off to the left.\n*\n* For more information, see the documentation on\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\n* Enyo Developer Guide.\n*\n* @class  enyo.CarouselArranger\n* @extends enyo.Arranger\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.CarouselArranger */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.CarouselArranger',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Arranger,\n\n\t/**\n\t* Calculates the size of each panel. Considers the padding of the container by calling\n\t* {@link enyo.dom#calcPaddingExtents} and control margin by calling\n\t* {@link enyo.dom#calcMarginExtents}. If the container is larger than the combined sizes of\n\t* the controls, one control may be set to fill the remaining space by setting its `fit`\n\t* property to `true`. If multiple controls have `fit: true` set, the last control to be so\n\t* marked will have precedence.\n\t*\n\t* @protected\n\t*/\n\tsize: function () {\n\t\tvar c$ = this.container.getPanels();\n\t\tvar padding = this.containerPadding = this.container.hasNode() ? dom.calcPaddingExtents(this.container.node) : {};\n\t\tvar pb = this.containerBounds;\n\t\tvar i, e, s, m, c;\n\t\tpb.height -= padding.top + padding.bottom;\n\t\tpb.width -= padding.left + padding.right;\n\t\t// used space\n\t\tvar fit;\n\t\tfor (i=0, s=0; (c=c$[i]); i++) {\n\t\t\tm = dom.calcMarginExtents(c.hasNode());\n\t\t\tc.width = c.getBounds().width;\n\t\t\tc.marginWidth = m.right + m.left;\n\t\t\ts += (c.fit ? 0 : c.width) + c.marginWidth;\n\t\t\tif (c.fit) {\n\t\t\t\tfit = c;\n\t\t\t}\n\t\t}\n\t\tif (fit) {\n\t\t\tvar w = pb.width - s;\n\t\t\tfit.width = w >= 0 ? w : fit.width;\n\t\t}\n\t\tfor (i=0, e=padding.left; (c=c$[i]); i++) {\n\t\t\tc.setBounds({top: padding.top, bottom: padding.bottom, width: c.fit ? c.width : null});\n\t\t}\n\t},\n\n\t/**\n\t* @see {@link enyo.Arranger.arrange}\n\t* @protected\n\t*/\n\tarrange: function (controls, arrangement) {\n\t\tif (this.container.wrap) {\n\t\t\tthis.arrangeWrap(controls, arrangement);\n\t\t} else {\n\t\t\tthis.arrangeNoWrap(controls, arrangement);\n\t\t}\n\t},\n\n\t/**\n\t* A non-wrapping carousel arranges the controls from left to right without regard to the\n\t* ordered array passed via `controls`. `arrangement` will contain the index of the active\n\t* panel.\n\t*\n\t* @private\n\t*/\n\tarrangeNoWrap: function (controls, arrangement) {\n\t\tvar i, aw, cw, c;\n\t\tvar c$ = this.container.getPanels();\n\t\tvar s = this.container.clamp(arrangement);\n\t\tvar nw = this.containerBounds.width;\n\t\t// do we have enough content to fill the width?\n\t\tfor (i=s, cw=0; (c=c$[i]); i++) {\n\t\t\tcw += c.width + c.marginWidth;\n\t\t\tif (cw > nw) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t// if content width is less than needed, adjust starting point index and offset\n\t\tvar n = nw - cw;\n\t\tvar o = 0;\n\t\tif (n > 0) {\n\t\t\tfor (i=s-1, aw=0; (c=c$[i]); i--) {\n\t\t\t\taw += c.width + c.marginWidth;\n\t\t\t\tif (n - aw <= 0) {\n\t\t\t\t\to = (n - aw);\n\t\t\t\t\ts = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// arrange starting from needed index with detected offset so we fill space\n\t\tvar w, e;\n\t\tfor (i=0, e=this.containerPadding.left + o; (c=c$[i]); i++) {\n\t\t\tw = c.width + c.marginWidth;\n\t\t\tif (i < s) {\n\t\t\t\tthis.arrangeControl(c, {left: -w});\n\t\t\t} else {\n\t\t\t\tthis.arrangeControl(c, {left: Math.floor(e)});\n\t\t\t\te += w;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Arranges `controls` from left to right such that the active panel is always the\n\t* leftmost, with subsequent panels positioned to its right.\n\t*\n\t* @private\n\t*/\n\tarrangeWrap: function (controls, arrangement) {\n\t\tfor (var i=0, e=this.containerPadding.left, c; (c=controls[i]); i++) {\n\t\t\tthis.arrangeControl(c, {left: e});\n\t\t\te += c.width + c.marginWidth;\n\t\t}\n\t},\n\n\t/**\n\t* Calculates the change in `left` position between the two arrangements `a0` and `a1`.\n\t* @protected\n\t*/\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\n\t\tvar i = Math.abs(i0 % this.c$.length);\n\t\treturn a0[i].left - a1[i].left;\n\t},\n\n\t/**\n\t* Resets the size and position of all panels.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar c$ = this.container.getPanels();\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\t\tArranger.positionControl(c, {left: null, top: null});\n\t\t\t\tc.applyStyle('top', null);\n\t\t\t\tc.applyStyle('bottom', null);\n\t\t\t\tc.applyStyle('left', null);\n\t\t\t\tc.applyStyle('width', null);\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t})\n});","var\n\tkind = require('../../enyo/lib/kind'),\n\tdom = require('../../enyo/lib/dom');\n\nvar\n\tArranger = require('./Arranger');\n\n/**\n* {@link enyo.DockRightArranger} is an {@link enyo.Arranger} that displays the\n* active control, along with some number of inactive controls to fill the\n* available space. The active control is positioned on the right side of the\n* container and the rest of the views are laid out to the right.\n*\n* For best results with DockRightArranger, you should set a minimum width\n* for each control via a CSS style, e.g., `min-width: 25%` or\n* `min-width: 250px`.\n*\n* Transitions between arrangements are handled by sliding the new control\tin\n* from the right. If the width of the old control(s) can fit within the\n* container, they will slide to the left. If not, they will collapse to the left.\n*\n* For more information, see the documentation on\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\n* Enyo Developer Guide.\n*\n* @class  enyo.DockRightArranger\n* @extends enyo.Arranger\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.DockRightArranger.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.DockRightArranger',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Arranger,\n\n\t/**\n\t* If `true`, the base panel (i.e., the panel at index `0`) will fill the width\n\t* of the container, while newer controls will slide in and collapse on top of it.\n\t*\n\t* @type {Boolean}\n\t* @default  false\n\t* @public\n\t*/\n\tbasePanel: false,\n\n\t/**\n\t* Panels will overlap by this number of pixels.\n\t*\n\t* Note that this is imported from the container at construction time.\n\t*\n\t* @type {Number}\n\t* @default  0\n\t* @public\n\t*/\n\toverlap: 0,\n\n\t/**\n\t* The column width in pixels.\n\t*\n\t* Note that this is imported from the container at construction time.\n\t*\n\t* @type {Number}\n\t* @default  0\n\t* @public\n\t*/\n\tlayoutWidth: 0,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: function () {\n\t\tArranger.prototype._constructor.apply(this, arguments);\n\t\tthis.overlap = this.container.overlap != null ? this.container.overlap : this.overlap;\n\t\tthis.layoutWidth = this.container.layoutWidth != null ? this.container.layoutWidth : this.layoutWidth;\n\t},\n\n\t/**\n\t* @see {@link enyo.Arranger.size}\n\t* @protected\n\t*/\n\tsize: function () {\n\t\tvar c$ = this.container.getPanels();\n\t\tvar padding = this.containerPadding = this.container.hasNode() ? dom.calcPaddingExtents(this.container.node) : {};\n\t\tvar pb = this.containerBounds;\n\t\tvar i, m, c;\n\t\tpb.width -= padding.left + padding.right;\n\t\tvar nw = pb.width;\n\t\tvar len = c$.length;\n\t\tvar offset;\n\t\t// panel arrangement positions\n\t\tthis.container.transitionPositions = {};\n\n\t\tfor (i=0; (c=c$[i]); i++) {\n\t\t\tc.width = ((i===0) && (this.container.basePanel)) ? nw : c.getBounds().width;\n\t\t}\n\n\t\tfor (i=0; (c=c$[i]); i++) {\n\n\t\t\tif ((i===0) && (this.container.basePanel)) {\n\t\t\t\tc.setBounds({width: nw});\n\t\t\t}\n\t\t\tc.setBounds({top: padding.top, bottom: padding.bottom});\n\n\t\t\tfor (var j=0; (c=c$[j]); j++) {\n\t\t\t\tvar xPos;\n\t\t\t\t// index 0 always should always be left-aligned at 0px\n\t\t\t\tif ((i===0) && (this.container.basePanel)) {\n\t\t\t\t\txPos = 0;\n\t\t\t\t// else newer panels should be positioned off the viewport\n\t\t\t\t} else if (j < i) {\n\t\t\t\t\txPos = nw;\n\t\t\t\t// else active panel should be right-aligned\n\t\t\t\t} else if (i === j) {\n\t\t\t\t\toffset = nw > this.layoutWidth ? this.overlap : 0;\n\t\t\t\t\txPos = (nw - c$[i].width) + offset;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.container.transitionPositions[i + '.' + j] = xPos;\n\t\t\t}\n\n\t\t\tif (j < len) {\n\t\t\t\tvar leftAlign = false;\n\t\t\t\tfor (var k=i+1; k<len; k++) {\n\t\t\t\t\toffset = 0;\n\t\t\t\t\t// position panel to left: 0px\n\t\t\t\t\tif (leftAlign) {\n\t\t\t\t\t\toffset = 0;\n\t\t\t\t\t// else if next panel cannot fit within container\n\t\t\t\t\t} else if ( (c$[i].width + c$[k].width - this.overlap) > nw ) {\n\t\t\t\t\t//} else if ( (c$[i].width + c$[k].width) > nw ) {\n\t\t\t\t\t\toffset = 0;\n\t\t\t\t\t\tleftAlign = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toffset = c$[i].width - this.overlap;\n\t\t\t\t\t\tfor (m=i; m<k; m++) {\n\t\t\t\t\t\t\tvar _w = offset + c$[m+1].width - this.overlap;\n\t\t\t\t\t\t\tif (_w < nw) {\n\t\t\t\t\t\t\t\toffset = _w;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\toffset = nw;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset = nw - offset;\n\t\t\t\t\t}\n\t\t\t\t\tthis.container.transitionPositions[i + '.' + k] = offset;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\n\t/**\n\t* Sets the `left` position for each panel according to the `arrangement`.\n\t*\n\t* @see {@link enyo.Arranger.arrange}\n\t* @protected\n\t*/\n\tarrange: function (controls, arrangement) {\n\t\tvar i, c;\n\t\tvar c$ = this.container.getPanels();\n\t\tvar s = this.container.clamp(arrangement);\n\n\t\tfor (i=0; (c=c$[i]); i++) {\n\t\t\tvar xPos = this.container.transitionPositions[i + '.' + s];\n\t\t\tthis.arrangeControl(c, {left: xPos});\n\t\t}\n\t},\n\n\t/**\n\t* Calculates the difference in width between the panels at `i0` and `i1`.\n\t*\n\t* @see {@link enyo.Arranger.calcArrangementDifference}\n\t* @protected\n\t*/\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\n\t\tvar p = this.container.getPanels();\n\t\tvar w = (i0 < i1) ? p[i1].width : p[i0].width;\n\t\treturn w;\n\t},\n\n\t/**\n\t* Resets the position of the panels.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\tvar c$ = this.container.getPanels();\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\tArranger.positionControl(c, {left: null, top: null});\n\t\t\tc.applyStyle('top', null);\n\t\t\tc.applyStyle('bottom', null);\n\t\t\tc.applyStyle('left', null);\n\t\t\tc.applyStyle('width', null);\n\t\t}\n\t\tArranger.prototype.destroy.apply(this, arguments);\n\t}\n});","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tkind = require('./kind');\n\nvar\n\tLinkedList = require('./LinkedList'),\n\tObserverChainNode = require('./ObserverChainNode');\n\nfunction get (base, prop) {\n\treturn base && /*isObject(base)*/ (typeof base == 'object')? (\n\t\tbase.get? base.get(prop): base[prop]\n\t): undefined;\n}\n\n/**\n* An internally used {@glossary kind}.\n*\n* @class enyo.ObserverChain\n* @extends enyo.LinkedList\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ObserverChain.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tkind: LinkedList,\n\n\t/**\n\t* @private\n\t*/\n\tnodeKind: ObserverChainNode,\n\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @private\n\t*/\n\tconnected: 0,\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: function (path, object) {\n\t\tthis.object = object;\n\t\tthis.path = path;\n\t\tthis.parts = path.split('.');\n\t\tthis.createChain();\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.object = null;\n\t\t\tthis.parts = null;\n\t\t\tthis.path = null;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\trebuild: function (target) {\n\t\tif (!this.rebuilding) {\n\t\t\tthis.rebuilding = true;\n\t\t\tthis.forward(function (node) {\n\t\t\t\tif (node !== this.head) {\n\t\t\t\t\tvar src = node.prev.object\n\t\t\t\t\t\t, prop = node.prev.property;\n\t\t\t\t\tnode.setObject(get(src, prop));\n\t\t\t\t}\n\t\t\t}, this, target);\n\t\t\tthis.rebuilding = false;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tisConnected: function () {\n\t\treturn !! (this.connected === this.length && this.length);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tbuildPath: function (target) {\n\t\tvar str = '';\n\t\t\n\t\tthis.backward(function (node) {\n\t\t\tstr = node.property + (str? ('.' + str): str);\n\t\t}, this, target);\n\t\t\n\t\treturn str;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tcreateChain: function () {\n\t\tvar parts = this.parts\n\t\t\t, next = this.object\n\t\t\t, $ = false\n\t\t\t, node, prop;\n\t\t\t\n\t\tfor (var i=0; (prop=parts[i]); ++i) {\n\t\t\t\n\t\t// forEach(parts, function (prop, idx) {\n\t\t\t// we create a special case for the $ hash property\n\t\t\tif (prop == '$') {\n\t\t\t\t$ = true;\n\t\t\t} else {\n\t\t\t\t// in cases where the chain has the $ property we arbitrarily\n\t\t\t\t// force it onto our current nodes property and let the special handling\n\t\t\t\t// in ObserverChainNode and ObserverSupport handle the rest\n\t\t\t\t$ && (prop = '$.' + prop);\n\t\t\t\tnode = this.createNode({property: prop, object: next, list: this});\n\t\t\t\tthis.appendNode(node);\n\t\t\t\tnext = get(next, prop);\n\t\t\t\t$ = false;\n\t\t\t}\n\t\t// }, this);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tobserved: function (node, was, is) {\n\t\tthis.object.stopNotifications();\n\t\t// @NOTE: About the following two cases, they are mutually exclusive and this seems perfect\n\t\t// that we don't see double notifications\n\t\t// @TODO: Only notify if it was the full property path? This is far more efficient after\n\t\t// testing but not as flexible...\n\t\tnode === this.tail /*&& was !== is*/ && this.object.notify(this.buildPath(node), was, is);\n\t\t// @TODO: It seems the same case across the board that the rebuild only needs to take place\n\t\t// from the beginning to the second-to-last elem\n\t\tnode !== this.tail && was !== is && this.rebuild(node);\n\t\tthis.object.startNotifications();\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tObserverChain = require('./ObserverChain');\n\nvar observerTable = {};\n\t\nkind.concatenated.push(\"observers\");\n\n/**\n* Responds to changes in one or more properties.\n* [Observers]{@link enyo.ObserverSupport~observer} may be registered in\n* several different ways. See the {@link enyo.ObserverSupport} documentation\n* for more details. Also note that, while observers should not be called\n* directly, if defined on a [kind]{@glossary kind}, they may be\n* overloaded for special behavior.\n*\n* @see enyo.ObserverSupport\n* @see enyo.ObserverSupport.observe\n* @callback enyo.ObserverSupport~Observer\n* @param {*} was - The previous value of the property that has changed.\n* @param {*} is - The current value of the property that has changed.\n* @param {String} prop - The name of the property that has changed.\n* @public\n*/\n\n/**\n* @private\n*/\nfunction addObserver (path, fn, ctx, opts) {\n\t\n\tvar observers = this.getObservers(),\n\t\tchains = this.getChains(),\n\t\tparts = path.split('.'),\n\t\tprio = opts && opts.priority,\n\t\tentries,\n\t\tnoChain;\n\t\t\n\tnoChain = (opts && opts.noChain) ||\n\t\t\tchains[path] ||\n\t\t\tparts.length < 2 ||\n\t\t\t(parts.length === 2 && path[0] == '$');\n\t\n\tif (observers[path] && !observers.hasOwnProperty(path)) {\n\t\tobservers[path] = observers[path].slice();\n\t}\n\t\n\tentries = observers[path] || (observers[path] = []);\n\tentries[prio ? 'unshift' : 'push']({method: fn, ctx: ctx || this});\n\t\n\tif (!noChain) {\n\t\tthis.getChains()[path] = new ObserverChain(path, this);\n\t}\n\t\n\treturn this;\n}\n\n/**\n* @private\n*/\nfunction removeObserver (obj, path, fn, ctx) {\n\tvar observers = obj.getObservers(path)\n\t\t, chains = obj.getChains()\n\t\t, idx, chain;\n\t\t\n\tif (observers && observers.length) {\n\t\tidx = observers.findIndex(function (ln) {\n\t\t\treturn ln.method === fn && (ctx? ln.ctx === ctx: true);\n\t\t});\n\t\tidx > -1 && observers.splice(idx, 1);\n\t}\n\t\n\tif ((chain = chains[path]) && !observers.length) {\n\t\tchain.destroy();\n\t}\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction notifyObservers (obj, path, was, is, opts) {\n\tif (obj.isObserving()) {\n\t\tvar observers = obj.getObservers(path);\n\t\t\n\t\tif (observers && observers.length) {\n\t\t\tfor (var i=0, ln; (ln=observers[i]); ++i) {\n\t\t\t\tif (typeof ln.method == \"string\") obj[ln.method](was, is, path, opts);\n\t\t\t\telse ln.method.call(ln.ctx || obj, was, is, path, opts);\n\t\t\t}\n\t\t}\n\t} else enqueue(obj, path, was, is, opts);\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction enqueue (obj, path, was, is, opts) {\n\tif (obj._notificationQueueEnabled) {\n\t\tvar queue = obj._notificationQueue || (obj._notificationQueue = {})\n\t\t\t, ln = queue[path] || (queue[path] = {});\n\t\n\t\tln.was = was;\n\t\tln.is = is;\n\t\tln.opts = opts;\n\t}\n}\n\n/**\n* @private\n*/\nfunction flushQueue (obj) {\n\tvar queue = obj._notificationQueue\n\t\t, path, ln;\n\t\n\tif (queue) {\n\t\tobj._notificationQueue = null;\n\t\t\n\t\tfor (path in queue) {\n\t\t\tln = queue[path];\n\t\t\tobj.notify(path, ln.was, ln.is, ln.opts);\n\t\t}\n\t}\n}\n\t\n/**\n* Adds support for notifications on property changes. Most\n* [kinds]{@glossary kind} (including all kinds that inherit from\n* {@link enyo.Object}) already have this {@glossary mixin} applied.\n* This allows for\n* [observers]{@link enyo.ObserverSupport~Observer} to be\n* [declared]{@link enyo.ObserverSupport.observers} or \"implied\" (see below).\n*\n* Implied observers are not declared, but derived from their `name`. They take\n* the form `<property>Changed`, where `<property>` is the property to\n* [observe]{@link enyo.ObserverSupport.observe}. For example:\n*\n* ```javascript\n* enyo.kind({\n* \tname: 'MyKind',\n*\n* \t// some local property\n* \tvalue: true,\n*\n* \t// and the implied observer of that property\n* \tvalueChanged: function (was, is) {\n* \t\t// do something now that it has changed\n* \t\tenyo.log('value was \"' + was + '\" but now it is \"' + is + '\"');\n* \t}\n* });\n*\n* var mine = new MyKind();\n* mine.set('value', false); // -> value was \"true\" but now it is \"false\"\n* ```\n*\n* Using the `observers` property for its declarative syntax, an observer may\n* observe any property (or properties), regardless of its `name`. For example:\n*\n* ```javascript\n* enyo.kind({\n* \tname: 'MyKind',\n*\n* \t// some local property\n* \tvalue: true,\n*\n* \t// another local property\n* \tcount: 1,\n*\n* \t// declaring the observer\n* \tobservers: [\n* \t\t// the path can be a single string or an array of strings\n* \t\t{method: 'myObserver', path: ['value', 'count']}\n* \t],\n*\n* \t// now this observer will be notified of changes to both properties\n* \tmyObserver: function (was, is, prop) {\n* \t\t// do something now that it changed\n* \t\tenyo.log(prop + ' was \"' + was + '\" but now it is \"' + is + '\"');\n* \t}\n* });\n*\n* var mine = new MyKind();\n* mine.set('value', false); // -> value was \"true\" but now it is \"false\"\n* mine.set('count', 2); // -> count was \"1\" but now it is \"2\"\n* ```\n*\n* While observers may be [notified]{@link enyo.ObserverSupport.notify} of\n* changes to multiple properties, this is not a typical use case for implied\n* observers, since, by convention, they are only registered for the named\n* property.\n*\n* There is one additional way to use observers, if necessary. You may use the\n* API methods [observe()]{@link enyo.ObserverSupport.observe} and\n* [unobserve()]{@link enyo.ObserverSupport.unobserve} to dynamically\n* register and unregister observers as needed. For example:\n*\n* ```javascript\n* var object = new enyo.Object({value: true});\n* var observer = function (was, is) {\n* \tenyo.log('value was \"' + was + '\" but now it is \"' + is + '\"');\n* };\n*\n* object.observe('value', observer);\n* object.set('value', false); // -> value was \"true\" but now it is \"false\"\n* object.unobserve('value', observer);\n* object.set('value', true); // no output because there is no observer\n* ```\n*\n* Be sure to read the documentation for these API methods; proper usage of\n* these methods is important for avoiding common pitfalls and memory leaks.\n*\n* @mixin enyo.ObserverSupport\n* @public\n*/\nvar ObserverSupport = module.exports = /** @lends enyo.ObserverSupport */ {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: \"ObserverSupport\",\n\t\n\t/**\n\t* @private\n\t*/\n\t_observing: true,\n\t\n\t/**\n\t* @private\n\t*/\n\t_observeCount: 0,\n\t\n\t/**\n\t* @private\n\t*/\n\t_notificationQueue: null,\n\t\n\t/**\n\t* @private\n\t*/\n\t_notificationQueueEnabled: true,\n\t\n\t/**\n\t* Determines whether `_observing` is enabled. If\n\t* [stopNotifications()]{@link enyo.ObserverSupport.stopNotifications} has\n\t* been called, then this will return `false`.\n\t*\n\t* @see enyo.ObserverSupport.stopNotifications\n\t* @see enyo.ObserverSupport.startNotifications\n\t* @returns {Boolean} Whether or not the callee is observing.\n\t*/\n\tisObserving: function () {\n\t\treturn this._observing;\n\t},\n\t\n\t/**\n\t* Returns an immutable list of [observers]{@link enyo.ObserverSupport~Observer}\n\t* for the given `path`, or all observers for the callee.\n\t*\n\t* @param {String} [path] - Path or property path for which\n\t* [observers]{@link enyo.ObserverSupport~Observer} will be returned. If not\n\t* specified, all observers for the callee will be returned.\n\t*\n\t* @returns {enyo.ObserverSupport~Observer[]} The immutable\n\t* [array]{@glossary Array} of observers.\n\t* @public\n\t*/\n\tgetObservers: function (path) {\n\t\tvar euid = this.euid || (this.euid = utils.uid('o')),\n\t\t\tret,\n\t\t\tloc;\n\t\t\t\n\t\tloc = observerTable[euid] || (observerTable[euid] = (\n\t\t\tthis._observers? Object.create(this._observers): {}\n\t\t));\n\t\t\n\t\tif (!path) return loc;\n\t\t\n\t\tret = loc[path];\n\t\t\n\t\t// if the special property exists...\n\t\tif (loc['*']) ret = ret ? ret.concat(loc['*']) : loc['*'].slice();\n\t\treturn ret;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgetChains: function () {\n\t\treturn this._observerChains || (this._observerChains = {});\n\t},\n\t\n\t/**\n\t* @deprecated\n\t* @alias enyo.ObserverSupport.observe\n\t* @public\n\t*/\n\taddObserver: function () {\n\t\t// @NOTE: In this case we use apply because of internal variable use of parameters\n\t\treturn addObserver.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* Registers an [observer]{@link enyo.ObserverSupport~Observer} to be\n\t* [notified]{@link enyo.ObserverSupport.notify} when the given property has\n\t* been changed. It is important to note that it is possible to register the\n\t* same observer multiple times (although this is never the intention), so\n\t* care should be taken to avoid that scenario. It is also important to\n\t* understand how observers are stored and unregistered\n\t* ([unobserved]{@link enyo.ObserverSupport.unobserve}). The `ctx` (context)\n\t* parameter is stored with the observer reference. **If used when\n\t* registering, it should also be used when unregistering.**\n\t*\n\t* @see enyo.ObserverSupport.unobserve\n\t* @param {String} path - The property or property path to observe.\n\t* @param {enyo.ObserverSupport~Observer} fn - The\n\t*\t[observer]{@link enyo.ObserverSupport~Observer} method that responds to changes.\n\t* @param {*} [ctx] - The `this` (context) under which to execute the observer.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tobserve: function () {\n\t\t// @NOTE: In this case we use apply because of internal variable use of parameters\n\t\treturn addObserver.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* @deprecated\n\t* @alias enyo.ObserverSupport.unobserve\n\t* @public\n\t*/\n\tremoveObserver: function (path, fn, ctx) {\n\t\treturn removeObserver(this, path, fn);\n\t},\n\t\n\t/**\n\t* Unregisters an [observer]{@link enyo.ObserverSupport~Observer}. If a `ctx`\n\t* (context) was supplied to [observe()]{@link enyo.ObserverSupport.observe},\n\t* then it should also be supplied to this method.\n\t*\n\t* @see enyo.ObserverSupport.observe\n\t* @param {String} path - The property or property path to unobserve.\n\t* @param {enyo.ObserverSupport~Observer} fn - The\n\t*\t[observer]{@link enyo.ObserverSupport~Observer} method that responds to changes.\n\t* @param {*} [ctx] - The `this` (context) under which to execute the observer.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tunobserve: function (path, fn, ctx) {\n\t\treturn removeObserver(this, path, fn, ctx);\n\t},\n\t\n\t/**\n\t* Removes all [observers]{@link enyo.ObserverSupport~Observer} from the\n\t* callee. If a `path` parameter is provided, observers will only be removed\n\t* from that path (or property).\n\t*\n\t* @param {String} [path] - A property or property path from which to remove all\n\t*\t[observers]{@link enyo.ObserverSupport~Observer}.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tremoveAllObservers: function (path) {\n\t\tvar euid = this.euid\n\t\t\t, loc = euid && observerTable[euid];\n\t\t\n\t\tif (loc) {\n\t\t\tif (path) {\n\t\t\t\tloc[path] = null;\n\t\t\t} else {\n\t\t\t\tobserverTable[euid] = null;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @deprecated\n\t* @alias enyo.ObserverSupport.notify\n\t* @public\n\t*/\n\tnotifyObservers: function (path, was, is, opts) {\n\t\treturn notifyObservers(this, path, was, is, opts);\n\t},\n\t\n\t/**\n\t* Triggers any [observers]{@link enyo.ObserverSupport~Observer} for the\n\t* given `path`. The previous and current values must be supplied. This\n\t* method is typically called automatically, but it may also be called\n\t* forcibly by [setting]{@link enyo.Object#set} a value with the\n\t* `force` option.\n\t*\n\t* @param {String} path - The property or property path to notify.\n\t* @param {*} was - The previous value.\n\t* @param {*} is - The current value.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tnotify: function (path, was, is, opts) {\n\t\treturn notifyObservers(this, path, was, is, opts);\n\t},\n\t\n\t/**\n\t* Stops all [notifications]{@link enyo.ObserverSupport.notify} from\n\t* propagating. By default, all notifications will be queued and flushed once\n\t* [startNotifications()]{@link enyo.ObserverSupport.startNotifications}\n\t* has been called. Setting the optional `noQueue` flag will also disable the\n\t* queue, or you can use the\n\t* [disableNotificationQueue()]{@link enyo.ObserverSupport.disableNotificationQueue} and\n\t* [enableNotificationQueue()]{@link enyo.ObserverSupport.enableNotificationQueue}\n\t* API methods. `startNotifications()` will need to be called the same number\n\t* of times that this method has been called.\n\t*\n\t* @see enyo.ObserverSupport.startNotifications\n\t* @see enyo.ObserverSupport.disableNotificationQueue\n\t* @see enyo.ObserverSupport.enableNotificationQueue\n\t* @param {Boolean} [noQueue] - If `true`, this will also disable the notification queue.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tstopNotifications: function (noQueue) {\n\t\tthis._observing = false;\n\t\tthis._observeCount++;\n\t\tnoQueue && this.disableNotificationQueue();\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Starts [notifications]{@link enyo.ObserverSupport.notify} if they have\n\t* been [disabled]{@link enyo.ObserverSupport.stopNotifications}. If the\n\t* notification queue was not disabled, this will automatically flush the\n\t* queue of all notifications that were encountered while stopped. This\n\t* method must be called the same number of times that\n\t* [stopNotifications()]{@link enyo.ObserverSupport.stopNotifications} was\n\t* called.\n\t*\n\t* @see enyo.ObserverSupport.stopNotifications\n\t* @see enyo.ObserverSupport.disableNotificationQueue\n\t* @see enyo.ObserverSupport.enableNotificationQueue\n\t* @param {Boolean} [queue] - If `true` and the notification queue is disabled,\n\t* the queue will be re-enabled.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tstartNotifications: function (queue) {\n\t\tthis._observeCount && this._observeCount--;\n\t\tthis._observeCount === 0 && (this._observing = true);\n\t\tqueue && this.enableNotificationQueue();\n\t\tthis.isObserving() && flushQueue(this);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Re-enables the notification queue, if it was disabled.\n\t*\n\t* @see enyo.ObserverSupport.disableNotificationQueue\n\t* @returns {this} The callee for chaining.\n\t*/\n\tenableNotificationQueue: function () {\n\t\tthis._notificationQueueEnabled = true;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* If the notification queue is enabled (the default), it will be disabled\n\t* and any notifications in the queue will be removed.\n\t*\n\t* @see enyo.ObserverSupport.enableNotificationQueue\n\t* @returns {this} The callee for chaining.\n\t*/\n\tdisableNotificationQueue: function () {\n\t\tthis._notificationQueueEnabled = false;\n\t\tthis._notificationQueue = null;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar chains, chain, path, entries, i;\n\t\t\t\n\t\t\t// if there are any observers that need to create dynamic chains\n\t\t\t// we look for and instance those now\n\t\t\tif (this._observerChains) {\n\t\t\t\tchains = this._observerChains;\n\t\t\t\tthis._observerChains = {};\n\t\t\t\tfor (path in chains) {\n\t\t\t\t\tentries = chains[path];\n\t\t\t\t\tfor (i = 0; (chain = entries[i]); ++i) this.observe(path, chain.method);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar chains = this._observerChains,\n\t\t\t\tpath,\n\t\t\t\tchain;\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\tif (chains) {\n\t\t\t\tfor (path in chains) {\n\t\t\t\t\tchain = chains[path];\n\t\t\t\t\tchain.destroy();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis._observerChains = null;\n\t\t\t}\n\t\t};\n\t})\n\t\n};\n\n/**\n* Hijack the original so we can add additional default behavior.\n*\n* @private\n*/\nvar sup = kind.concatHandler;\n\n// @NOTE: It seems like a lot of work but it really won't happen that much and the more\n// we push to kind-time the better for initialization time\n\n/** @private */\nkind.concatHandler = function (ctor, props, instance) {\n\t\n\tsup.call(this, ctor, props, instance);\n\t\n\tif (props === ObserverSupport) return;\n\n\tvar proto = ctor.prototype || ctor\n\t\t, observers = proto._observers? Object.create(proto._observers): null\n\t\t, incoming = props.observers\n\t\t, chains = proto._observerChains && Object.create(proto._observerChains);\n\t\t\n\tif (!observers) {\n\t\tif (proto.kindName) observers = {};\n\t\telse return;\n\t}\n\t\t\n\tif (incoming && !(incoming instanceof Array)) {\n\t\t(function () {\n\t\t\tvar tmp = [], deps, name;\n\t\t\t// here is the slow iteration over the properties...\n\t\t\tfor (name in props.observers) {\n\t\t\t\t// points to the dependencies of the computed method\n\t\t\t\tdeps = props.observers[name];\n\t\t\t\t// create a single entry now for the method/computed with all dependencies\n\t\t\t\ttmp.push({method: name, path: deps});\n\t\t\t}\n\t\t\tincoming = tmp;\n\t\t}());\n\t\t// we need to ensure we don't modify the fixed array of a mixin or reused object\n\t\t// because it could wind up inadvertantly adding the same entry multiple times\n\t} else if (incoming) incoming = incoming.slice();\n\t\n\t// this scan is required to figure out what auto-observers might be present\n\tfor (var key in props) {\n\t\tif (key.slice(-7) == \"Changed\") {\n\t\t\tincoming || (incoming = []);\n\t\t\tincoming.push({method: key, path: key.slice(0, -7)});\n\t\t}\n\t}\n\t\n\tvar addObserverEntry = function (path, method) {\n\t\tvar obs;\n\t\t// we have to make sure that the path isn't a chain because if it is we add it\n\t\t// to the chains instead\n\t\tif (path.indexOf(\".\") > -1) {\n\t\t\tif (!chains) chains = {};\n\t\t\tobs = chains[path] || (chains[path] = []);\n\t\t\tobs.push({method: method});\n\t\t} else {\n\t\t\tif (observers[path] && !observers.hasOwnProperty(path)) observers[path] = observers[path].slice();\n\t\t\tobs = observers[path] || (observers[path] = []);\n\t\t\tif (!obs.find(function (ln) { return ln.method == method; })) obs.push({method: method});\n\t\t}\n\t};\n\t\n\tif (incoming) {\n\t\tincoming.forEach(function (ln) {\n\t\t\t// first we determine if the path itself is an array of paths to observe\n\t\t\tif (ln.path && ln.path instanceof Array) ln.path.forEach(function (en) { addObserverEntry(en, ln.method); });\n\t\t\telse addObserverEntry(ln.path, ln.method);\n\t\t});\n\t}\n\t\n\t// we clear the key so it will not be added to the prototype\n\t// delete props.observers;\n\t// we update the properties to whatever their new values may be\n\tproto._observers = observers;\n\tproto._observerChains = chains;\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tlogger = require('./logger'),\n\tutils = require('./utils');\n\nvar\n\tMixinSupport = require('./MixinSupport'),\n\tObserverSupport = require('./ObserverSupport'),\n\tBindingSupport = require('./BindingSupport');\n\t\n/**\n* Used by all [objects]{@link enyo.Object} and [subkinds]{@glossary subkind} when using the\n* {@link enyo.Object#log}, {@link enyo.Object#warn} and {@link enyo.Object#error} methods.\n*\n* @private\n*/\nfunction log (method, args) {\n\tif (logger.shouldLog(method)) {\n\t\ttry {\n\t\t\tthrow new Error();\n\t\t} catch(err) {\n\t\t\tlogger._log(method, [args.callee.caller.displayName + ': ']\n\t\t\t\t.concat(utils.cloneArray(args)));\n\t\t\tlogger.log(err.stack);\n\t\t}\n\t}\n}\n\n/**\n* {@link enyo.Object} lies at the heart of the Enyo framework's implementations of property\n* publishing, computed properties (via the {@link enyo.ComputedSupport} {@glossary mixin}),\n* and data binding (via the {@link enyo.BindingSupport} mixin and {@link enyo.Binding}\n* object). It also provides several utility [functions]{@glossary Function} for its\n* [subkinds]{@glossary subkind}.\n*\n* @class enyo.Object\n* @mixes enyo.MixinSupport\n* @mixes enyo.ObserverSupport\n* @mixes enyo.BindingSupport\n* @public\n*/\nvar CoreObject = module.exports = kind(\n\t/** @lends enyo.Object.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Object',\n\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* Will be `true` if the [destroy()]{@link enyo.Object#destroy} method has been called;\n\t* otherwise, `false`.\n\t*\n\t* @readonly\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tdestroyed: false,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MixinSupport, ObserverSupport, BindingSupport],\n\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (props) {\n\t\tthis.importProps(props);\n\t},\n\n\t/**\n\t* Imports the values from the given [object]{@glossary Object}. Automatically called\n\t* from the [constructor]{@link enyo.Object#constructor}.\n\t*\n\t* @param {Object} props - If provided, the [object]{@glossary Object} from which to\n\t*\tretrieve [keys/values]{@glossary Object.keys} to mix in.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\timportProps: function (props) {\n\t\tvar key;\n\n\t\tif (props) {\n\t\t\tkind.concatHandler(this, props, true);\n\t\t\t// if props is a default hash this is significantly faster than\n\t\t\t// requiring the hasOwnProperty check every time\n\t\t\tif (!props.kindName) {\n\t\t\t\tfor (key in props) {\n\t\t\t\t\tkind.concatenated.indexOf(key) === -1 && (this[key] = props[key]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (key in props) {\n\t\t\t\t\tif (kind.concatenated.indexOf(key) === -1 && props.hasOwnProperty(key)) {\n\t\t\t\t\t\tthis[key] = props[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Calls the [destroy()]{@link enyo.Object#destroy} method for the named {@link enyo.Object} \n\t* property.\n\t*\n\t* @param {String} name - The name of the property to destroy, if possible.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroyObject: function (name) {\n\t\tif (this[name] && this[name].destroy) {\n\t\t\tthis[name].destroy();\n\t\t}\n\t\tthis[name] = null;\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Sends a log message to the [console]{@glossary console}, prepended with the name\n\t* of the {@glossary kind} and method from which `log()` was invoked. Multiple\n\t* {@glossary arguments} are coerced to {@glossary String} and\n\t* [joined with spaces]{@glossary Array.join}.\n\t*\n\t* ```javascript\n\t* enyo.kind({\n\t*\tname: 'MyObject',\n\t*\tkind: 'enyo.Object',\n\t*\thello: function() {\n\t*\t\tthis.log('says', 'hi');\n\t*\t\t// shows in the console: MyObject.hello: says hi\n\t*\t}\n\t* });\n\t* ```\n\t* @public\n\t*/\n\tlog: function () {\n\t\tvar acc = arguments.callee.caller,\n\t\t\tnom = ((acc ? acc.displayName : '') || '(instance method)') + ':',\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\targs.unshift(nom);\n\t\tlogger.log('log', args);\n\t},\n\t\n\t/**\n\t* Same as [log()]{@link enyo.Object#log}, except that it uses the \n\t* console's [warn()]{@glossary console.warn} method (if it exists).\n\t*\n\t* @public\n\t*/\n\twarn: function () {\n\t\tlog('warn', arguments);\n\t},\n\t\n\t/**\n\t* Same as [log()]{@link enyo.Object#log}, except that it uses the \n\t* console's [error()]{@glossary console.error} method (if it exists).\n\t*\n\t* @public\n\t*/\n\terror: function () {\n\t\tlog('error', arguments);\n\t},\n\n\t/**\n\t* Retrieves the value for the given path. The value may be retrieved as long as the given \n\t* path is resolvable relative to the given {@link enyo.Object}. See\n\t* [enyo.getPath()]{@link enyo.getPath} for complete details.\n\t*\n\t* This method is backwards-compatible and will automatically call any existing getter\n\t* method that uses the \"getProperty\" naming convention. (Moving forward, however, Enyo code\n\t* should use [computed properties]{@link enyo.ComputedSupport} instead of relying on the \n\t* getter naming convention.)\n\t*\n\t* @param {String} path - The path from which to retrieve a value.\n\t* @returns {*} The value for the given path or [undefined]{@glossary undefined} if \n\t*\tthe path could not be completely resolved.\n\t* @public\n\t*/\n\tget: function () {\n\t\treturn utils.getPath.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* Updates the value for the given path. The value may be set as long as the\n\t* given path is resolvable relative to the given {@link enyo.Object}. See\n\t* [enyo.setPath()]{@link enyo.setPath} for complete details.\n\t*\n\t* @param {String} path - The path for which to set the given value.\n\t* @param {*} value - The value to set.\n\t* @param {Object} [opts] - An options hash.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tset: function () {\n\t\treturn utils.setPath.apply(this, arguments);\n\t},\n\n\t/**\n\t* Binds a [callback]{@glossary callback} to this [object]{@link enyo.Object}.\n\t* If the object has been destroyed, the bound method will be aborted cleanly,\n\t* with no value returned.\n\t*\n\t* This method should generally be used instead of {@link enyo.bind} for running\n\t* code in the context of an instance of {@link enyo.Object} or one of its\n\t* [subkinds]{@glossary subkind}.\n\t*\n\t* @alias enyo.bindSafely\n\t* @public\n\t*/\n\tbindSafely: function () {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift(this);\n\t\treturn utils.bindSafely.apply(null, args);\n\t},\n\t\n\t/**\n\t* An abstract method (primarily) that sets the [destroyed]{@link enyo.Object#destroyed} \n\t* property to `true`.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroy: function () {\n\t\t\n\t\t// Since JS objects are never truly destroyed (GC'd) until all references are\n\t\t// gone, we might have some delayed action on this object that needs access\n\t\t// to this flag.\n\t\t// Using this.set to make the property observable\n\t\treturn this.set('destroyed', true);\n\t}\n});\n\n/**\n* @private\n*/\nCoreObject.concat = function (ctor, props) {\n\tvar pubs = props.published,\n\t\tcpy,\n\t\tprop;\n\t\t\n\tif (pubs) {\n\t\tcpy = ctor.prototype || ctor;\n\t\tfor (prop in pubs) {\n\t\t\t// need to make sure that even though a property is 'published'\n\t\t\t// it does not overwrite any computed properties\n\t\t\tif (props[prop] && typeof props[prop] == 'function') continue;\n\t\t\taddGetterSetter(prop, pubs[prop], cpy);\n\t\t}\n\t}\n};\n\n/**\n* This method creates a getter/setter for a published property of an {@link enyo.Object}, but is\n* deprecated. It is maintained for purposes of backwards compatibility. The preferred method is \n* to mark public and protected (private) methods and properties using documentation or other \n* means and rely on the [get]{@link enyo.Object#get} and [set]{@link enyo.Object#set} methods of\n* {@link enyo.Object} instances.\n*\n* @private\n*/\nfunction addGetterSetter (prop, value, proto) {\n\t\n\t// so we don't need to re-execute this over and over and over...\n\tvar cap = utils.cap(prop),\n\t\tgetName = 'get' + cap,\n\t\tsetName = 'set' + cap,\n\t\tgetters = proto._getters || (proto._getters = {}),\n\t\tsetters = proto._setters || (proto._setters = {}),\n\t\tfn;\n\t\n\t// we assign the default value from the published block to the prototype\n\t// so it will be initialized properly\n\tproto[prop] = value;\n\t\n\t// check for a supplied getter and if there isn't one we create one otherwise\n\t// we mark the supplied getter in the tracking object so the global getPath will\n\t// know about it\n\tif (!(fn = proto[getName]) || typeof fn != 'function') {\n\t\tfn = proto[getName] = function () {\n\t\t\treturn utils.getPath.fast.call(this, prop);\n\t\t};\n\t\t\n\t\t// and we mark it as generated\n\t\tfn.generated = true;\n\t} else if (fn && typeof fn == 'function' && !fn.generated) getters[prop] = getName;\n\t\n\t// we need to do the same thing for the setters\n\tif (!(fn = proto[setName]) || typeof fn != 'function') {\n\t\tfn = proto[setName] = function (val) {\n\t\t\treturn utils.setPath.fast.call(this, prop, val);\n\t\t};\n\t\t\n\t\t// and we mark it as generated\n\t\tfn.generated = true;\n\t} else if (fn && typeof fn == 'function' && !fn.generated) setters[prop] = setName;\n}","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tModelList = require('./ModelList'),\n\tEventEmitter = require('./EventEmitter');\n\tCoreObject = require('./CoreObject');\n\n/**\n* Only necessary because of the order in which mixins are applied.\n*\n* @class\n* @private\n*/\nvar BaseStore = kind({\n\tkind: CoreObject,\n\tmixins: [EventEmitter]\n});\n\n/**\n* This method should determine whether the given [model]{@link enyo.Model}\n* should be included in the filtered set for the [find()]{@link enyo.Store#find}\n* method.\n* \n* @callback enyo.Store~Filter\n* @param {enyo.Model} model - The [model]{@link enyo.Model} to filter.\n* @returns {Boolean} `true` if the model meets the filter requirements;\n* otherwise, `false`.\n*/\n\n/**\n* The configuration options for the [find()]{@link enyo.Store#find} method.\n* \n* @typedef {Object} enyo.Store~FindOptions\n* @property {Boolean} all=true - Whether or not to include more than one match for the\n*\tfilter method. If `true`, an array of matches is returned; otherwise, a single match.\n* @property {Object} context - If provided, it will be used as the `this` (context) of\n*\tthe filter method.\n*/\n\n/**\n* An anonymous kind used internally for the singleton {@link enyo.store}.\n* \n* @class enyo.Store\n* @mixes enyo.EventEmitter\n* @extends enyo.Object\n* @protected\n*/\nvar Store = kind(\n\t/** @lends enyo.Store.prototype */ {\n\t\n\tname: 'enyo.Store',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: BaseStore,\n\t\n\t/**\n\t* Finds a [model (or models)]{@link enyo.Model} of a certain [kind]{@glossary kind}.\n\t* It uses the return value from a filter method to determine whether a particular\n\t* model will be included. Set the optional `all` flag to `true` to ensure that\n\t* the method looks for all matches; otherwise, it will return the first positive\n\t* match.\n\t* \n\t* @see {@glossary Array.find}\n\t* @param {enyo.Model} ctor - The constructor for the [kind]{@glossary kind} of\n\t*\t[model]{@link enyo.Model} to be filtered.\n\t* @param {enyo.Store~Filter} fn - The filter method.\n\t* @param {enyo.Store~FindOptions} [opts] - The options parameter.\n\t* @returns {(enyo.Model|enyo.Model[]|undefined)} If the `all` flag is `true`,\n\t*\treturns an array of models; otherwise, returns the first model that returned\n\t*\tthat returned `true` from the filter method. Returns `undefined` if `all` is\n\t* `false` and no match could be found.\n\t* @public\n\t*/\n\tfind: function (ctor, fn, opts) {\n\t\tvar kindName = ctor.prototype.kindName,\n\t\t\tlist = this.models[kindName],\n\t\t\toptions = {all: true, context: this};\n\t\t\n\t\t// allows the method to be called with a constructor only and will return an\n\t\t// immutable copy of the array of all models of that type or an empty array\n\t\tif (arguments.length == 1 || typeof fn != 'function') {\n\t\t\treturn list ? list.slice() : [];\n\t\t}\n\t\t\n\t\t// ensure we use defaults with any provided options\n\t\topts = opts ? utils.mixin({}, [options, opts]) : options;\n\t\t\t\n\t\tif (list) return opts.all ? list.filter(fn, opts.context) : list.find(fn, opts.context);\n\t\t\n\t\t// if it happens it could not find a list for the requested kind we fudge the return\n\t\t// so it can keep on executing\n\t\telse return opts.all ? [] : undefined;\n\t},\n\t\n\t/**\n\t* This method is an alias for [find()]{@link enyo.Store#find}.\n\t*\n\t* @deprecated\n\t* @public\n\t*/\n\tfindLocal: function () {\n\t\treturn this.find.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tadd: function (models, opts) {\n\t\tvar ctor = models && (models instanceof Array ? models[0].ctor : models.ctor),\n\t\t\tkindName = ctor && ctor.prototype.kindName,\n\t\t\tlist = kindName && this.models[kindName],\n\t\t\tadded,\n\t\t\ti;\n\t\t\t\n\t\t// if we were able to find the list then we go ahead and attempt to add the models\n\t\tif (list) {\n\t\t\tadded = list.add(models);\n\t\t\t// if we successfully added models and this was a default operation (not being\n\t\t\t// batched by a collection or other feature) we emit the event needed primarily\n\t\t\t// by relational models but could be useful other places\n\t\t\tif (added.length && (!opts || !opts.silent)) {\n\t\t\t\tfor (i = 0; i < added.length; ++i) {\n\t\t\t\t\tthis.emit(ctor, 'add', {model: added[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tremove: function (models, opts) {\n\t\tvar ctor = models && (models instanceof Array ? models[0].ctor : models.ctor),\n\t\t\tkindName = ctor && ctor.prototype.kindName,\n\t\t\tlist = kindName && this.models[kindName],\n\t\t\tremoved,\n\t\t\ti;\n\t\t\n\t\t// if we were able to find the list then we go ahead and attempt to remove the models\n\t\tif (list) {\n\t\t\tremoved = list.remove(models);\n\t\t\t// if we successfully removed models and this was a default operation (not being\n\t\t\t// batched by a collection or other feature) we emit the event. Needed primarily\n\t\t\t// by relational models but could be useful other places\n\t\t\tif (removed.length && (!opts || !opts.silent)) {\n\t\t\t\tfor (i = 0; i < removed.length; ++i) {\n\t\t\t\t\tthis.emit(ctor, 'remove', {model: removed[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Determines, from the given parameters, whether the [store]{@link enyo.store}\n\t* has a specific [model]{@link enyo.Model}.\n\t*\n\t* @param {(Function|enyo.Model)} ctor Can be the constructor for an {@link enyo.Model}\n\t*\tor a model instance. Must be a constructor unless a model instance is passed as the\n\t* optional `model` parameter.\n\t* @param {(String|Number|enyo.Model)} [model] If the `ctor` parameter is a\n\t*\tconstructor, this may be a [Number]{@glossary Number} or a [String]{@glossary String}\n\t* representing a [primaryKey]{@link enyo.Model#primaryKey} for the given model, or an\n\t*\tinstance of a model.\n\t* @returns {Boolean} Whether or not the [store]{@link enyo.store} has the given\n\t*\t[model]{@link enyo.Model}.\n\t* @public\n\t*/\n\thas: function (ctor, model) {\n\t\tvar list;\n\t\t\n\t\tif (!model) {\n\t\t\tmodel = ctor;\n\t\t\tctor = model.ctor;\n\t\t}\n\t\t\n\t\tlist = this.models[ctor.prototype.kindName];\n\t\treturn list ? list.has(model) : false;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tresolve: function (ctor, model) {\n\t\tvar list = this.models[ctor && ctor.prototype.kindName];\n\t\treturn list? list.resolve(model): undefined;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\tthis._scopeListeners = [];\n\t\t\t\n\t\t\t// all future sub-kinds of enyo.Model that are processed will automatically\n\t\t\t// create/add their entries to this object in their concat method\n\t\t\tthis.models = {\n\t\t\t\t'enyo.Model': new ModelList()\n\t\t\t};\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tscopeListeners: function (scope, e) {\n\t\treturn !scope ? this._scopeListeners : this._scopeListeners.filter(function (ln) {\n\t\t\treturn ln.scope === scope ? !e ? true : ln.event == e : false;\n\t\t});\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\ton: kind.inherit(function (sup) {\n\t\treturn function (ctor, e, fn, ctx) {\n\t\t\tif (typeof ctor == 'function') {\n\t\t\t\tthis.scopeListeners().push({\n\t\t\t\t\tscope: ctor,\n\t\t\t\t\tevent: e,\n\t\t\t\t\tmethod: fn,\n\t\t\t\t\tctx: ctx || this\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\toff: kind.inherit(function (sup) {\n\t\treturn function (ctor, e, fn) {\n\t\t\tvar listeners,\n\t\t\t\tidx;\n\t\t\t\n\t\t\tif (typeof ctor == 'function') {\n\t\t\t\tlisteners = this.scopeListeners(ctor);\n\t\t\t\tif (listeners.length) {\n\t\t\t\t\tidx = listeners.findIndex(function (ln) {\n\t\t\t\t\t\treturn ln.event == e && ln.method === fn;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// if it found the entry we remove it\n\t\t\t\t\tif (idx >= 0) listeners.splice(idx, 1);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\temit: kind.inherit(function (sup) {\n\t\treturn function (ctor, e) {\n\t\t\tvar listeners,\n\t\t\t\targs;\n\t\t\t\n\t\t\tif (typeof ctor == 'function') {\n\t\t\t\tlisteners = this.scopeListeners(ctor, e);\n\t\t\t\t\n\t\t\t\tif (listeners.length) {\n\t\t\t\t\targs = utils.toArray(arguments).slice(1);\n\t\t\t\t\targs.unshift(this);\n\t\t\t\t\tlisteners.forEach(function (ln) {\n\t\t\t\t\t\tln.method.apply(ln.ctx, args);\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t})\n});\n\n/**\n* A runtime database for working with [models]{@link enyo.Model}. It is primarily used\n* internally by data layer [kinds]{@glossary kind} ({@link enyo.Model},\n* {@link enyo.Collection}, and {@link enyo.RelationalModel}).\n* \n* @see enyo.Model\n* @see enyo.Collection\n* @see enyo.RelationalModel\n* @type enyo.Store\n* @memberof enyo\n* @public\n*/\nmodule.exports = new Store();","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tkind = require('./kind');\n\t\nvar CoreObject = require('./CoreObject');\n\n/**\n* The {@link enyo.jobs} singleton provides a mechanism for queueing tasks\n* (i.e., functions) for execution in order of priority. The execution of the\n* current job stack may be blocked programmatically by setting a priority\n* level (run level) below which no jobs are executed.\n*\n* At the moment, only {@link enyo.Animator} uses this interface, setting a\n* priority of 4, which blocks all low priority tasks from executing during\n* animations. To maintain backward compatibility, jobs are assigned a priority\n* of 5 by default; thus they are not blocked by animations.\n*\n* Normally, application code will not use `enyo.jobs` directly, but will\n* instead use the [job()]{@link enyo.Component#job} method of\n* {@link enyo.Component}.\n*\n* @name enyo.jobs\n* @public\n*/\nmodule.exports = kind.singleton(\n\t/** @lends enyo.jobs */ {\n\t\n\tkind: CoreObject,\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: /** @lends enyo.jobs */ {\n\t\t\n\t\t/**\n\t\t* The current priority level.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tpriorityLevel: 0\n\t},\n\t\n\t/**\n\t* Prioritized by index.\n\t*\n\t* @private\n\t*/\n\t_jobs: [ [], [], [], [], [], [], [], [], [], [] ],\n\t\n\t/**\n\t* @private\n\t*/\n\t_priorities: {},\n\t\n\t/**\n\t* @private\n\t*/\n\t_namedJobs: {},\n\t\n\t/**\n\t* @private\n\t*/\n\t_magicWords: {\n\t\t'low': 3,\n\t\t'normal': 5,\n\t\t'high': 7\n\t},\n\t\n\t/**\n\t* Adds a [job]{@link enyo.job} to the job queue. If the current priority\n\t* level is higher than this job's priority, this job gets deferred until the\n\t* job level drops; if it is lower, this job is run immediately.\n\t*\n\t* @param {Function} job - The actual {@glossary Function} to execute as the\n\t* [job]{@link enyo.job}.\n\t* @param {Number} priority - The priority of the job.\n\t* @param {String} nom - The name of the job for later reference.\n\t* @public\n\t*/\n\tadd: function (job, priority, nom) {\n\t\tpriority = priority || 5;\n\n\t\t// magic words: low = 3, normal = 5, high = 7\n\t\tpriority = utils.isString(priority) ? this._magicWords[priority] : priority;\n\n\t\t// if a job of the same name exists, remove it first (replace it)\n\t\tif(nom){\n\t\t\tthis.remove(nom);\n\t\t\tthis._namedJobs[nom] = priority;\n\t\t}\n\n\t\t// if the job is of higher priority than the current priority level then\n\t\t// there's no point in queueing it\n\t\tif(priority >= this.priorityLevel){\n\t\t\tjob();\n\t\t} else {\n\t\t\tthis._jobs[priority - 1].push({fkt: job, name: nom});\n\t\t}\n\t},\n\t\n\t/**\n\t* Will remove the named [job]{@link enyo.job} from the queue.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to remove.\n\t* @returns {Array} An {@glossary Array} that will contain the removed job if\n\t* it was found, or empty if it was not found.\n\t* @public\n\t*/\n\tremove: function (nom) {\n\t\tvar jobs = this._jobs[this._namedJobs[nom] - 1];\n\t\tif(jobs){\n\t\t\tfor(var j = jobs.length-1; j >= 0; j--){\n\t\t\t\tif(jobs[j].name === nom){\n\t\t\t\t\treturn jobs.splice(j, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* Adds a new priority level at which jobs will be executed. If it is higher than the\n\t* highest current priority, the priority level rises. Newly added jobs below that priority\n\t* level are deferred until the priority is removed (i.e., unregistered).\n\t*\n\t* @param {Number} priority - The priority value to register.\n\t* @param {String} id - The name of the priority.\n\t* @public\n\t*/\n\tregisterPriority: function(priority, id) {\n\t\tthis._priorities[id] = priority;\n\t\tthis.setPriorityLevel( Math.max(priority, this.priorityLevel) );\n\t},\n\t\n\t/**\n\t* Removes a priority level. If the removed priority was previously the\n\t* highest priority, the priority level drops to the next highest priority\n\t* and queued jobs with a higher priority are executed.\n\t*\n\t* @param {String} id - The name of the priority level to remove.\n\t* @public\n\t*/\n\tunregisterPriority: function (id) {\n\t\tvar highestPriority = 0;\n\n\t\t// remove priority\n\t\tdelete this._priorities[id];\n\n\t\t// find new highest current priority\n\t\tfor( var i in this._priorities ){\n\t\t\thighestPriority = Math.max(highestPriority, this._priorities[i]);\n\t\t}\n\n\t\tthis.setPriorityLevel( highestPriority );\n\t},\n\t\n\t/**\n\t* Tries to run next job if priority level has dropped.\n\t*\n\t* @type {enyo.ObserverSupport~Observer}\n\t* @private\n\t*/\n\tpriorityLevelChanged: function (was) {\n\t\tif(was > this.priorityLevel){\n\t\t\tthis._doJob();\n\t\t}\n\t},\n\t\n\t/**\n\t* Finds and executes the job of highest priority; in this way, all jobs with priority\n\t* greater than or equal to the current level are run, in order of their priority (highest\n\t* to lowest).\n\t*\n\t* @private\n\t*/\n\t_doJob: function () {\n\t\tvar job;\n\t\t// find the job of highest priority above the current priority level\n\t\t// and remove from the job list\n\t\tfor (var i = 9; i >= this.priorityLevel; i--){\n\t\t\tif (this._jobs[i].length) {\n\t\t\t\tjob = this._jobs[i].shift();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// allow other events to pass through\n\t\tif (job) {\n\t\t\tjob.fkt();\n\t\t\tdelete this._namedJobs[job.name];\n\t\t\tsetTimeout(utils.bind(this, '_doJob'), 10);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tObserverSupport = require('./ObserverSupport'),\n\tComputedSupport = require('./ComputedSupport'),\n\tBindingSupport = require('./BindingSupport'),\n\tEventEmitter = require('./EventEmitter'),\n\tStateSupport = require('./StateSupport'),\n\tModelList = require('./ModelList'),\n\tSource = require('./Source'),\n\tStates = require('./States'),\n\tStore = require('./Store');\n\n/**\n* This is only necessary because of the order in which mixins are applied.\n*\n* @class\n* @private\n*/\nvar BaseModel = kind({\n\tkind: null,\n\tmixins: [ObserverSupport, ComputedSupport, BindingSupport, EventEmitter, StateSupport]\n});\n\n/**\n* The event emitted when [attributes]{@link enyo.Model#attributes} have been modified.\n* The event [object]{@glossary Object} will consist of key/value pairs of attributes\n* that changed and their new values.\n*\n* @event enyo.Model#change\n* @type {Object}\n* @public\n*/\n\n/**\n* The default configurable [options]{@link enyo.Model#options} used in certain API methods\n* of {@link enyo.Model}.\n*\n* @typedef {Object} enyo.Model~Options\n* @property {Boolean} silent=false - Keep events and notifications from being emitted.\n* @property {Boolean} commit=false - Immediately [commit]{@link enyo.Model#commit} changes\n*\tafter they have occurred. Also note that, if `true`, when the [model]{@link enyo.Model}\n* is [destroyed]{@link enyo.Model#destroy}, it will also be destroyed via any\n* [sources]{@link enyo.Model#source} it has.\n* @property {Boolean} parse=false - During initialization, [parse]{@link enyo.Model#parse}\n*\tany given [attributes]{@link enyo.Model#attributes}; after\n*\t[fetching]{@link enyo.Model#fetch}, parse the data before calling\n* [set()]{@link enyo.Model#set}.\n* @property {Boolean} fetch=false - Automatically call [fetch()]{@link enyo.Model#fetch}\n*\tduring initialization.\n*/\n\n/**\n* The configurable options for [fetch()]{@link enyo.Model#fetch},\n* [commit()]{@link enyo.Model#commit}, and [destroy()]{@link enyo.Model#destroy}.\n*\n* @typedef {enyo.Model~Options} enyo.Model~ActionOptions\n* @property {enyo.Model~Success} success - The callback executed upon successful\n*\tcompletion.\n* @property {enyo.Model~Error} error - The callback executed upon a failed attempt.\n*/\n\n/**\n* @callback enyo.Model~Success\n* @param {enyo.Model} model - The [model]{@link enyo.Model} that is returning successfully.\n* @param {enyo.Model~ActionOptions} opts - The original options passed to the action method\n*\tthat is returning successfully.\n* @param {*} res - The result, if any, returned by the [source]{@link enyo.Source} that\n*\texecuted it.\n* @param {String} source - The name of the [source]{@link enyo.Model#source} that has\n* returned successfully.\n*/\n\n/**\n* @callback enyo.Model~Error\n* @param {enyo.Model} model - The model that is returning an error.\n* @param {String} action - The name of the action that failed, one of `'FETCHING'`,\n*\t`'COMMITTING'`, or `'DESTROYING'`.\n* @param {enyo.Model~Options} opts - The original options passed to the action method\n*\tthat is returning an error.\n* @param {*} res - The result, if any, returned by the [source]{@link enyo.Source} that\n*\texecuted it.\n* @param {String} source - The name of the [source]{@link enyo.Model#source} that has\n*\treturned an error.\n*/\n\n/**\n* An [object]{@glossary Object} used to represent and maintain state. Usually,\n* an {@link enyo.Model} is used to expose data to the view layer. It keeps logic\n* related to the data (retrieving it, updating it, storing it, etc.) out of the\n* view, and the view can automatically update based on changes in the model.\n* Models have the ability to work with other data layer [kinds]{@glossary kind}\n* to provide more sophisticated implementations.\n*\n* Models have [bindable]{@link enyo.BindingSupport}\n* [attributes]{@link enyo.Model#attributes}. Models differs from other\n* bindable kinds in that attribute values are proxied from an internal\n* [hash]{@glossary Object} instead of being set on the target properties\n* directly.\n*\n* @see enyo.Store\n* @see enyo.Collection\n* @see enyo.RelationalModel\n* @see enyo.ModelController\n* @class enyo.Model\n* @mixes enyo.ObserverSupport\n* @mixes enyo.ComputedSupport\n* @mixes enyo.BindingSupport\n* @mixes enyo.EventEmitter\n* @mixes enyo.StateSupport\n* @public\n*/\nvar Model = module.exports = kind(\n\t/** @lends enyo.Model.prototype */ {\n\n\tname: 'enyo.Model',\n\n\t/**\n\t* @private\n\t*/\n\tkind: BaseModel,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* Used by various [sources]{@link enyo.Model#source} as part of the\n\t* [URI]{@glossary URI} from which they may be [fetched]{@link enyo.Model#fetch},\n\t* [committed]{@link enyo.Model#commit}, or [destroyed]{@link enyo.Model#destroy}.\n\t* Some sources may use this property in other ways.\n\t*\n\t* @see enyo.Model.getUrl\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\turl: '',\n\n\t/**\n\t* Implement this method to be used by [sources]{@link enyo.Model#source} to\n\t* dynamically derive the [URI]{@glossary URI} from which they may be\n\t* [fetched]{@link enyo.Model#fetch}, [committed]{@link enyo.Model#commit},\n\t* or [destroyed]{@link enyo.Model#destroy}. Some sources may use this\n\t* property in other ways. Note that, if this method is implemented, the\n\t* [url]{@link enyo.Model#url} will not be used.\n\t*\n\t* @see enyo.Model.url\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {Function}\n\t* @default null\n\t* @virtual\n\t* @public\n\t*/\n\tgetUrl: null,\n\n\t/**\n\t* The [hash]{@glossary Object} of properties proxied by this [model]{@link enyo.Model}.\n\t* If defined on a [subkind]{@glossary subkind}, it may be assigned default values and\n\t* all instances will share its default structure. If no attributes are defined, an\n\t* empty [hash]{@glossary Object} will be assigned during initialization. It is not\n\t* necessary to pre-define the structure of a model; depending on the model's complexity,\n\t* pre-defining the structure may possibly hinder performance.\n\t*\n\t* It should also be noted that calls to [get()]{@link enyo.Model#get} or\n\t* [set()]{@link enyo.Model#set} will access and modify this property. This includes\n\t* the values to which (or from which) [bindings]{@link enyo.BindingSupport} are bound.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tattributes: null,\n\n\t/**\n\t* The [source(s)]{@link enyo.Source} to use when [fetching]{@link enyo.Model#fetch},\n\t* [committing]{@link enyo.Model#commit}, or [destroying]{@link enyo.Model#destroy}.\n\t* Any method that uses sources may override this default value in its configuration\n\t* options. This value may be a [string]{@glossary String}, an\n\t* [Array]{@glossary Array} of strings, an instance of {@link enyo.Source}, or an\n\t* array of `enyo.Source` instances.\n\t*\n\t* @see enyo.Source\n\t* @see enyo.Model.fetch\n\t* @see enyo.Model.commit\n\t* @see enyo.Model.destroy\n\t* @type {(String|String[]|enyo.Source|enyo.Source[])}\n\t* @default null\n\t* @public\n\t*/\n\tsource: null,\n\n\t/**\n\t* These [keys]{@glossary Object.keys} will be the only\n\t* [attributes]{@link enyo.Model#attributes} included if the\n\t* [model]{@link enyo.Model} is [committed]{@link enyo.Model#commit}. This\n\t* directly modifies the result of calling [raw()]{@link enyo.Model#raw}. If\n\t* not defined, all keys from the [attributes]{@link enyo.Model#attributes}\n\t* [hash]{@glossary Object} will be used.\n\t*\n\t* @see enyo.Model.raw\n\t* @see enyo.Model.toJSON\n\t* @type {String[]}\n\t* @default null\n\t* @public\n\t*/\n\tincludeKeys: null,\n\n\t/**\n\t* The inheritable default configuration options. These specify the behavior of particular\n\t* API features of {@link enyo.Model}. Any method that uses these options may override\n\t* the default values in its own configuration options. Note that setting an\n\t* [options hash]{@glossary Object} on a [subkind]{@glossary subkind} will result in\n\t* the new values' being merged with--not replacing--the\n\t* [superkind's]{@glossary superkind} own `options`.\n\t*\n\t* @type {enyo.Model~Options}\n\t* @public\n\t*/\n\toptions: {\n\t\tsilent: false,\n\t\tcommit: false,\n\t\tparse: false,\n\t\tfetch: false\n\t},\n\n\t/**\n\t* The current [state(s)]{@link enyo.States} possessed by the [model]{@link enyo.Model}.\n\t* There are limitations as to which state(s) the model may possess at any given time.\n\t* By default, a model is [NEW]{@link enyo.States.NEW} and [CLEAN]{@link enyo.States.CLEAN}.\n\t* Note that this is **not** a [bindable]{@link enyo.BindingSupport} property.\n\t*\n\t* @see enyo.States\n\t* @see enyo.StateSupport\n\t* @type {enyo.States}\n\t* @readonly\n\t* @public\n\t*/\n\tstatus: States.NEW | States.CLEAN,\n\n\t/**\n\t* The unique attribute by which the [model]{@link enyo.Model} may be indexed. The\n\t* attribute's value must be unique across all instances of the specific model\n\t* [kind]{@glossary kind}\n\t*\n\t* @type {String}\n\t* @default 'id'\n\t* @public\n\t*/\n\tprimaryKey: 'id',\n\n\t/**\n\t* Inspects and restructures incoming data prior to [setting]{@link enyo.Model#set} it on\n\t* the [model]{@link enyo.Model}. While this method may be called directly, it is most\n\t* often used via the [parse]{@link enyo.Model~Options.parse} option and executed\n\t* automatically, either during initialization or when [fetched]{@link enyo.Model#fetch}\n\t* (or, in some cases, both). This is a virtual method and must be provided to suit a\n\t* given implementation's needs.\n\t*\n\t* @see enyo.Model~Options.parse\n\t* @param {*} data - The incoming data that may need to be restructured or reduced prior to\n\t*\tbeing [set]{@link enyo.Model#set} on the [model]{@link enyo.Model}.\n\t* @returns {Object} The [hash]{@glossary Object} to apply to the\n\t*\tmodel via [set()]{@link enyo.Model#set}.\n\t* @virtual\n\t* @public\n\t*/\n\tparse: function (data) {\n\t\treturn data;\n\t},\n\n\t/**\n\t* Returns an [Object]{@glossary Object} that represents the underlying data structure\n\t* of the [model]{@link enyo.Model}. This is dependent on the current\n\t* [attributes]{@link enyo.Model#attributes} as well as the\n\t* [includeKeys]{@link enyo.Model#includeKeys}.\n\t* [Computed properties]{@link enyo.ComputedSupport} are **never** included.\n\t*\n\t* @see enyo.Model.includeKeys\n\t* @see enyo.Model.attributes\n\t* @returns {Object} The formatted [hash]{@glossary Object} representing the underlying\n\t*\tdata structure of the [model]{@link enyo.Model}.\n\t* @public\n\t*/\n\traw: function () {\n\t\tvar inc = this.includeKeys\n\t\t\t, attrs = this.attributes\n\t\t\t, keys = inc || Object.keys(attrs)\n\t\t\t, cpy = inc? utils.only(inc, attrs): utils.clone(attrs);\n\t\tkeys.forEach(function (key) {\n\t\t\tvar ent = this.get(key);\n\t\t\tif (typeof ent == 'function') cpy[key] = ent.call(this);\n\t\t\telse if (ent && ent.raw) cpy[key] = ent.raw();\n\t\t\telse cpy[key] = ent;\n\t\t}, this);\n\t\treturn cpy;\n\t},\n\n\t/**\n\t* Returns the [JSON]{@glossary JSON} serializable [raw()]{@link enyo.Model#raw} output\n\t* of the [model]{@link enyo.Model}. Will automatically be executed by\n\t* [JSON.parse()]{@glossary JSON.parse}.\n\t*\n\t* @see enyo.Model.raw\n\t* @returns {Object} The return value of [raw()]{@link enyo.Model#raw}.\n\t* @public\n\t*/\n\ttoJSON: function () {\n\n\t\t// @NOTE: Because this is supposed to return a JSON parse-able object\n\t\treturn this.raw();\n\t},\n\n\t/**\n\t* Restores an [attribute]{@link enyo.Model#attributes} to its previous value. If no\n\t* attribute is specified, all previous values will be restored.\n\t*\n\t* @see enyo.Model.set\n\t* @see enyo.Model.previous\n\t* @param {String} [prop] - The [attribute]{@link enyo.Model#attributes} to\n\t*\t[restore]{@link enyo.Model#restore}. If not provided, all attributes will be\n\t* restored to their previous values.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trestore: function (prop) {\n\n\t\t// we ensure that the property is forcibly notified (when possible) to ensure that\n\t\t// bindings or other observers will know it returned to that value\n\t\tif (prop) this.set(prop, this.previous[prop], {force: true});\n\t\telse this.set(this.previous);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Commits the [model]{@link enyo.Model} to a [source or sources]{@link enyo.Model#source}.\n\t* A model cannot be [committed]{@link enyo.Model#commit} if it is in an\n\t* [error]{@link enyo.States.ERROR} ({@link enyo.StateSupport.isError}) or\n\t* [busy]{@link enyo.States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Model#status}. While executing, it will add the\n\t* [COMMITTING]{@link enyo.States.COMMITTING} flag to the model's\n\t* [status]{@link enyo.Model#status}. Once it has completed execution, it will\n\t* remove this flag (even if it fails).\n\t*\n\t* @see enyo.Model.committed\n\t* @see enyo.Model.status\n\t* @param {enyo.Model~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tcommit: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\n\t\t// if the current status is not one of the error or busy states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(enyo.sources);\n\t\t\t}\n\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.committed(opts, res, source);\n\t\t\t};\n\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('COMMITTING', opts, res, source);\n\t\t\t};\n\n\t\t\t// set the state\n\t\t\tthis.status = this.status | States.COMMITTING;\n\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('commit', this, options);\n\t\t} else this.errored(this.status, opts);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Fetches the [model]{@link enyo.Model} from a\n\t* [source or sources]{@link enyo.Model#source}. A model cannot be\n\t* [fetched]{@link enyo.Model#fetch} if it is in an\n\t* [error]{@link enyo.States.ERROR} ({@link enyo.StateSupport.isError}) or\n\t* [busy]{@link enyo.States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Model#status}. While executing, it will add the\n\t* [FETCHING]{@link enyo.States.FETCHING} flag to the model's\n\t* [status]{@link enyo.Model#status}. Once it has completed execution, it will\n\t* remove this flag (even if it fails).\n\t*\n\t* @see enyo.Model.fetched\n\t* @see enyo.Model.status\n\t* @param {enyo.Model~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tfetch: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\n\t\t// if the current status is not one of the error or busy states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(enyo.sources);\n\t\t\t}\n\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.fetched(opts, res, source);\n\t\t\t};\n\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('FETCHING', opts, res, source);\n\t\t\t};\n\n\t\t\t// set the state\n\t\t\tthis.status = this.status | States.FETCHING;\n\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('fetch', this, options);\n\t\t} else this.errored(this.status, opts);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Destroys the [model]{@link enyo.Model}. By default, the model will only\n\t* be [destroyed]{@glossary destroy} in the client. To execute with a\n\t* [source or sources]{@link enyo.Model#source}, either the\n\t* [commit default option]{@link enyo.Model#options} must be `true` or a\n\t* `source` property must be explicitly provided in the `opts` parameter.\n\t* A model cannot be destroyed (using a source) if it is in an\n\t* [error]{@link enyo.States.ERROR} ({@link enyo.StateSupport.isError})\n\t* or [busy]{@link enyo.States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Model#status}. While executing, it will add the\n\t* [DESTROYING]{@link enyo.States.DESTROYING} flag to the model's\n\t* [status]{@link enyo.Model#status}. Once it has completed execution, it\n\t* will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Model.status\n\t* @param {enyo.Model~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroy: function (opts) {\n\t\tvar options = opts ? utils.mixin({}, [this.options, opts]) : this.options,\n\t\t\tit = this,\n\t\t\tidx;\n\n\t\t// this becomes an (potentially) async operation if we are committing this destroy\n\t\t// to a source and its kind of tricky to figure out because there are several ways\n\t\t// it could be flagged to do this\n\n\t\tif (options.commit || options.source) {\n\n\t\t\t// if the current status is not one of the error states we can continue\n\t\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\n\t\t\t\t// remap to the originals\n\t\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\n\t\t\t\toptions.success = function (source, res) {\n\n\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t}\n\t\t\t\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\t\t};\n\n\t\t\t\toptions.error = function (source, res) {\n\n\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t}\n\n\t\t\t\t\t// we don't bother setting the error state if we aren't waiting because it\n\t\t\t\t\t// will be cleared to DESTROYED and it would be pointless\n\t\t\t\t\telse this.errored('DESTROYING', opts, res, source);\n\t\t\t\t};\n\n\t\t\t\tthis.status = this.status | States.DESTROYING;\n\n\t\t\t\tSource.execute('destroy', this, options);\n\t\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\n\t\t\t// we don't allow the destroy to take place and we don't forcibly break-down\n\t\t\t// the collection errantly so there is an opportuniy to resolve the issue\n\t\t\t// before we lose access to the collection's content!\n\t\t\treturn this;\n\t\t}\n\n\n\t\t// we flag this early so objects that receive an event and process it\n\t\t// can optionally check this to support faster cleanup in some cases\n\t\t// e.g. Collection/Store don't need to remove listeners because it will\n\t\t// be done in a much quicker way already\n\t\tthis.destroyed = true;\n\t\tthis.status = States.DESTROYED;\n\t\tthis.unsilence(true).emit('destroy');\n\t\tthis.removeAllListeners();\n\t\tthis.removeAllObservers();\n\n\t\t// if this does not have the the batching flag (that would be set by a collection)\n\t\t// then we need to do the default of removing it from the store\n\t\tif (!opts || !opts.batching) this.store.remove(this);\n\t},\n\n\t/**\n\t* Retrieves the value for the given property or path. If the property is a\n\t* [computed property]{@link enyo.ComputedSupport.computed}, then it will return\n\t* that value; otherwise, it will attempt to retrieve the value from the\n\t* [attributes hash]{@link enyo.Model#attributes}.\n\t*\n\t* @param {String} path - The property to retrieve.\n\t* @returns {*} The value for the requested property or path, or `undefined` if\n\t* it cannot be found or does not exist.\n\t* @public\n\t*/\n\tget: function (path) {\n\t\treturn this.isComputed(path) ? this._getComputed(path) : this.attributes[path];\n\t},\n\n\t/**\n\t* Sets the requested `path` or [hash]{@glossary Object} of properties on the\n\t* [model]{@link enyo.Model}. Properties are applied to the\n\t* [attributes hash]{@link enyo.Model#attributes} and are retrievable via\n\t* [get()]{@link enyo.Model#get}. If properties were updated and the `silent`\n\t* option is not `true`, this method will emit a `change` event, as well as\n\t* individual [notifications]{@link enyo.ObserverSupport.notify} for the\n\t* properties that were modified.\n\t*\n\t* @fires enyo.Model#change\n\t* @see enyo.ObserverSupport\n\t* @see enyo.BindingSupport\n\t* @param {(String|Object)} path - Either the property name or a [hash]{@glossary Object}\n\t*\tof properties and values to set.\n\t* @param {(*|enyo.Model~Options)} is If `path` is a [string]{@glossary String},\n\t* this should be the value to set for the given property; otherwise, it should be\n\t* an optional hash of available [configuration options]{@link enyo.Model~Options}.\n\t* @param {enyo.Model~Options} [opts] - If `path` is a string, this should be the\n\t* optional hash of available configuration options; otherwise, it will not be used.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tset: function (path, is, opts) {\n\t\tif (!this.destroyed) {\n\n\t\t\tvar attrs = this.attributes,\n\t\t\t\toptions = this.options,\n\t\t\t\tchanged,\n\t\t\t\tincoming,\n\t\t\t\tforce,\n\t\t\t\tsilent,\n\t\t\t\tkey,\n\t\t\t\tvalue,\n\t\t\t\tcommit,\n\t\t\t\tfetched;\n\n\t\t\t// the default case for this setter is accepting an object of key->value pairs\n\t\t\t// to apply to the model in which case the second parameter is the optional\n\t\t\t// configuration hash\n\t\t\tif (typeof path == 'object') {\n\t\t\t\tincoming = path;\n\t\t\t\topts = opts || is;\n\t\t\t}\n\n\t\t\t// otherwise in order to have a single path here we flub it so it will keep on\n\t\t\t// going as expected\n\t\t\telse {\n\t\t\t\tincoming = {};\n\t\t\t\tincoming[path] = is;\n\t\t\t}\n\n\t\t\t// to maintain backward compatibility with the old setters that allowed the third\n\t\t\t// parameter to be a boolean to indicate whether or not to force notification of\n\t\t\t// change even if there was any\n\t\t\tif (opts === true) {\n\t\t\t\tforce = true;\n\t\t\t\topts = {};\n\t\t\t}\n\n\t\t\topts = opts ? utils.mixin({}, [options, opts]) : options;\n\t\t\tsilent = opts.silent;\n\t\t\tforce = force || opts.force;\n\t\t\tcommit = opts.commit;\n\t\t\tfetched = opts.fetched;\n\n\t\t\tfor (key in incoming) {\n\t\t\t\tvalue = incoming[key];\n\n\t\t\t\tif (value !== attrs[key] || force) {\n\t\t\t\t\t// to ensure we have an object to work with\n\t\t\t\t\t// note that we check inside this loop so we don't have to examine keys\n\t\t\t\t\t// later only the local variable changed\n\t\t\t\t\tchanged = this.changed || (this.changed = {});\n\t\t\t\t\t//store the previous attr value\n\t\t\t\t\tthis.previous[key] = attrs[key];\n\t\t\t\t\t//set new value\n\t\t\t\t\tchanged[key] = attrs[key] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (changed) {\n\n\t\t\t\t// we add dirty as a value of the status but clear the CLEAN bit if it\n\t\t\t\t// was set - this would allow it to be in the ERROR state and NEW and DIRTY\n\t\t\t\tif (!fetched) this.status = (this.status | States.DIRTY) & ~States.CLEAN;\n\n\t\t\t\tif (!silent) this.emit('change', changed, this);\n\n\t\t\t\tif (commit && !fetched) this.commit(opts);\n\n\t\t\t\t// reset value so subsequent changes won't be added to this change-set\n\t\t\t\tthis.changed = null;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* A bit of hackery to facade the normal [getter]{@link enyo.ComputedSupport.get}. Note that\n\t* we pass an arbitrary super-method that automatically returns `undefined`, which is\n\t* consistent with this use case and its intended purpose.\n\t*\n\t* @private\n\t*/\n\t_getComputed: ComputedSupport.get.fn(function () { return undefined; }),\n\n\t/**\n\t* Initializes the [model]{@link enyo.Model}. Unlike some methods, the parameters are not\n\t* interchangeable. If you are not using a particular (optional) parameter, pass in `null`.\n\t*\n\t* @param {Object} [attrs] - Optionally initialize the [model]{@link enyo.Model} with some\n\t*\t[attributes]{@link enyo.Model#attributes}.\n\t* @param {Object} [props] - Properties to apply directly to the [model]{@link enyo.Model} and\n\t*\tnot the [attributes hash]{@link enyo.Model#attributes}. If these properties contain an\n\t*\t`options` property (a [hash]{@glossary Object}) it will be merged with existing\n\t*\t[options]{@link enyo.Model#options}.\n\t* @param {enyo.Model~Options} [opts] - This is a one-time [options hash]{@link enyo.Model~Options} that\n\t*\tis only used during initialization and not applied as defaults.\n\t* @public\n\t*/\n\tconstructor: function (attrs, props, opts) {\n\n\t\t// in cases where there is an options hash provided in the _props_ param\n\t\t// we need to integrate it manually...\n\t\tif (props && props.options) {\n\t\t\tthis.options = utils.mixin({}, [this.options, props.options]);\n\t\t\tdelete props.options;\n\t\t}\n\n\t\t// the _opts_ parameter is a one-hit options hash it does not leave\n\t\t// behind its values as default options...\n\t\topts = opts? utils.mixin({}, [this.options, opts]): this.options;\n\n\t\t// go ahead and mix all of the properties in\n\t\tprops && utils.mixin(this, props);\n\n\t\tvar noAdd = opts.noAdd\n\t\t\t, commit = opts.commit\n\t\t\t, parse = opts.parse\n\t\t\t, fetch = this.options.fetch\n\t\t\t, defaults;\n\n\t\t// defaults = this.defaults && (typeof this.defaults == 'function'? this.defaults(attrs, opts): this.defaults);\n\t\tdefaults = this.defaults && typeof this.defaults == 'function'? this.defaults(attrs, opts): null;\n\n\t\t// ensure we have a unique identifier that could potentially\n\t\t// be used in remote systems\n\t\tthis.euid = this.euid || utils.uid('m');\n\n\t\t// if necessary we need to parse the incoming attributes\n\t\tattrs = attrs? parse? this.parse(attrs): attrs: null;\n\n\t\t// ensure we have the updated attributes\n\t\tthis.attributes = this.attributes? defaults? utils.mixin({}, [defaults, this.attributes]): utils.clone(this.attributes, true): defaults? utils.clone(defaults, true): {};\n\t\tattrs && utils.mixin(this.attributes, attrs);\n\t\tthis.previous = utils.clone(this.attributes);\n\n\t\t// now we need to ensure we have a store and register with it\n\t\tthis.store = this.store || Store;\n\n\t\t// @TODO: The idea here is that when batch instancing records a collection\n\t\t// should be intelligent enough to avoid doing each individually or in some\n\t\t// cases it may be useful to have a record that is never added to a store?\n\t\tif (!noAdd) this.store.add(this, opts);\n\n\t\tcommit && this.commit();\n\t\tfetch && this.fetch();\n\t},\n\n\t/**\n\t* Overloaded. We funnel arbitrary notification updates through here, as this\n\t* is faster than using the built-in notification updates for batch operations.\n\t*\n\t* @private\n\t*/\n\temit: kind.inherit(function (sup) {\n\t\treturn function (e, props) {\n\t\t\tif (e == 'change' && props && this.isObserving()) {\n\t\t\t\tfor (var key in props) this.notify(key, this.previous[key], props[key]);\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Overloaded to alias the (also overloaded) [emit()]{@link enyo.Model#emit} method.\n\t*\n\t* @private\n\t*/\n\ttriggerEvent: function () {\n\t\treturn this.emit.apply(this, arguments);\n\t},\n\n\t/**\n\t* When a [fetch]{@link enyo.Model#fetch} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that you call\n\t* the super-method. This correctly sets the [status]{@link enyo.Model#status} and, in\n\t* cases where multiple [sources]{@link enyo.Model#source} were used, it waits until\n\t* all have responded before clearing the [FETCHING]{@link enyo.States.FETCHING} flag.\n\t* If a [success]{@link enyo.Model~Success} callback was provided, it will be called\n\t* once for each source.\n\t*\n\t* @param {enyo.Model~ActionOptions} opts - The original options passed to\n\t*\t[fetch()]{@link enyo.Model#fetch}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given [source]{@link enyo.Model#source},\n\t* if any. This will vary depending on the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tfetched: function (opts, res, source) {\n\t\tvar idx,\n\t\t\toptions = this.options;\n\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\n\t\t// normalize options so we have values and ensure it knows it was just fetched\n\t\topts = opts ? utils.mixin({}, [options, opts]) : options;\n\t\topts.fetched = true;\n\n\t\t// for a special case purge to only use the result sub-tree of the fetched data for\n\t\t// the model attributes\n\t\tif (opts.parse) res = this.parse(res);\n\n\t\t// note this will not add the DIRTY state because it was fetched but also note that it\n\t\t// will not clear the DIRTY flag if it was already DIRTY\n\t\tif (res) this.set(res, opts);\n\n\t\t// clear the FETCHING and NEW state (if it was NEW) we do not set it as dirty as this\n\t\t// action alone doesn't warrant a dirty flag that would need to be set in the set method\n\t\tif (!this._waiting) this.status = this.status & ~(States.FETCHING | States.NEW);\n\n\t\t// now look for an additional success callback\n\t\tif (opts.success) opts.success(this, opts, res, source);\n\t},\n\n\t/**\n\t* When a [commit]{@link enyo.Model#commit} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that you call the\n\t* super-method. This correctly sets the [status]{@link enyo.Model#status} and, in cases\n\t* where multiple [sources]{@link enyo.Model#source} were used, it waits until all have\n\t* responded before clearing the [COMMITTING]{@link enyo.States.COMMITTING} flag. If a\n\t* [success]{@link enyo.Model~Success} callback was provided, it will be called once for\n\t* each source.\n\t*\n\t* @param {enyo.Model~ActionOptions} opts - The original options passed to\n\t*\t[commit()]{@link enyo.Model#commit}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given [source]{@link enyo.Model#source},\n\t* if any. This will vary depending on the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tcommitted: function (opts, res, source) {\n\t\tvar idx;\n\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\n\t\tif (!this._waiting) {\n\t\t\t// we need to clear the COMMITTING bit and DIRTY bit as well as ensure that the\n\t\t\t// 'previous' hash is whatever the current attributes are\n\t\t\tthis.previous = utils.clone(this.attributes);\n\t\t\tthis.status = (this.status | States.CLEAN) & ~(States.COMMITTING | States.DIRTY);\n\t\t}\n\n\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t},\n\n\t/**\n\t* When an action ([fetch()]{@link enyo.Model#fetch}, [commit()]{@link enyo.Model#commit},\n\t* or [destroy()]{@link enyo.Model#destroy}) has failed, it will be passed to this method.\n\t* This method handles special and important behavior; it should not be called directly\n\t* and, when overloading, care must be taken to ensure that you call the super-method.\n\t* This correctly sets the [status]{@link enyo.Model#status} to the known\n\t* [error state]{@link enyo.States.ERROR}, or to the\n\t* [unknown error state]{@link enyo.States.ERROR_UNKNOWN} if it the error state could not\n\t* be determined. If an [error callback]{@link enyo.Model~Error} was provided, this method\n\t* will execute it.\n\t*\n\t* @see enyo.StateSupport.clearError\n\t* @param {String} action - The action (one of `'FETCHING'`, `'COMMITTING'`, or\n\t* `'DESTROYING'`) that failed and is now in an [error state]{@link enyo.States.ERROR}.\n\t* @param {enyo.Model~ActionOptions} opts - The original options passed to the `action`\n\t* method, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given [source]{@link enyo.Model#source},\n\t* if any. This will vary depending on the source.\n\t* @param {String} source - The name of the source that has returned an error.\n\t* @public\n\t*/\n\terrored: function (action, opts, res, source) {\n\t\tvar stat,\n\t\t\tidx;\n\n\t\t// if the error action is a status number then we don't need to update it otherwise\n\t\t// we set it to the known state value\n\t\tif (typeof action == 'string') {\n\n\t\t\t// all built-in errors will pass this as their values are > 0 but we go ahead and\n\t\t\t// ensure that no developer used the 0x00 for an error code\n\t\t\tstat = STATES['ERROR_' + action];\n\t\t} else stat = action;\n\n\t\tif (isNaN(stat) || (stat & ~States.ERROR)) stat = States.ERROR_UNKNOWN;\n\n\t\t// correctly set the current status and ensure we clear any busy flags\n\t\tthis.status = (this.status | stat) & ~States.BUSY;\n\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\n\t\t// we need to check to see if there is an options handler for this error\n\t\tif (opts && opts.error) opts.error(this, action, opts, res, source);\n\t}\n\n});\n\n/**\n* @name enyo.Model.concat\n* @static\n* @private\n*/\nModel.concat = function (ctor, props) {\n\tvar proto = ctor.prototype || ctor;\n\n\tif (props.options) {\n\t\tproto.options = utils.mixin({}, [proto.options, props.options]);\n\t\tdelete props.options;\n\t}\n};\n\n/**\n* @private\n*/\nkind.features.push(function (ctor) {\n\tif (ctor.prototype instanceof Model) {\n\t\t!Store.models[ctor.prototype.kindName] && (Store.models[ctor.prototype.kindName] = new ModelList());\n\t}\n});","require('../../enyo');\n\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tlogger = require('./logger');\n\nvar\n\tCoreObject = require('./CoreObject'),\n\tApplicationSupport = require('./ApplicationSupport'),\n\tComponentBindingSupport = require('./ComponentBindingSupport'),\n\tJobs = require('./jobs');\n\nvar\n\tkindPrefix = {},\n\tunnamedCounter = 0;\n\t\n/**\n* @callback enyo.Component~EventHandler\n* @param {enyo.Component} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @param {Object} event - An [object]{@glossary Object} containing\n*\tevent information.\n* @returns {Boolean} A value indicating whether the event has been\n*\thandled or not. If `true`, then bubbling is stopped.\n*/\n\n/**\n* A [hash]{@glossary Object} of references to all the [components]{@link enyo.Component}\n* owned by this component. This property is updated whenever a new\n* component is added; the new component may be accessed via its\n* [name]{@link enyo.Component#name} property. We may also observe changes on\n* properties of components referenced by the `$` property.\n*\n* Component access via the `$` hash:\n* ```javascript\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other'}\n*\t]\n* });\n*\n* // We can now access 'other' on the $ hash of 'c', via c.$.other\n* ```\n*\n* Observing changes on a component referenced by the `$` property:\n* ```javascript\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other'}\n*\t]\n* });\n*\n* c.addObserver('$.other.active', function() {\n*\t// do something to respond to the \"active\" property of \"other\" changing\n* })\n*\n* c.$.other.set('active', true); // this will trigger the observer to run its callback\n* ```\n*\n* @name $\n* @type {Object}\n* @default null\n* @memberof enyo.Component.prototype\n* @readonly\n* @public\n*/\n\n/**\n* If `true`, this [component's]{@link enyo.Component} [owner]{@link enyo.Component#owner} will\n* have a direct name reference to the owned component.\n*\n* @example\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other', publish: true}\n*\t]\n* });\n*\n* // We can now access 'other' directly, via c.other\n*\n* @name publish\n* @type {Boolean}\n* @default undefined\n* @memberOf enyo.Component.prototype\n* @public\n*/\n\n/**\n* If `true`, the [layout]{@glossary layout} strategy will adjust the size of this\n* [component]{@link enyo.Component} to occupy the remaining available space.\n*\n* @name fit\n* @type {Boolean}\n* @default undefined\n* @memberOf enyo.Component.prototype\n* @public\n*/\n\n/**\n* {@link enyo.Component} is the fundamental building block for Enyo applications.\n* Components are designed to fit together, allowing complex behaviors to\n* be fashioned from smaller bits of functionality.\n*\n* Component [constructors]{@glossary constructor} take a single\n* argument (sometimes called a [component configuration]{@glossary configurationBlock}),\n* a JavaScript [object]{@glossary Object} that defines various properties to be initialized on the\n* component.  For example:\n*\n* ```javascript\n* // create a new component, initialize its name property to 'me'\n* var c = new enyo.Component({\n*\tname: 'me'\n* });\n* ```\n*\n* When a component is instantiated, items configured in its\n* `components` property are instantiated, too:\n*\n* ```javascript\n* // create a new component, which itself has a component\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other'}\n*\t]\n* });\n* ```\n*\n* In this case, when `me` is created, `other` is also created, and we say that `me` owns `other`.\n* In other words, the [owner]{@link enyo.Component#owner} property of `other` equals `me`.\n* Notice that you can specify the [kind]{@glossary kind} of `other` explicitly in its\n* configuration block, to tell `me` what constructor to use to create `other`.\n*\n* Note that [kind]{@glossary kind} values may be references to actual\n* kinds or string-names of kinds. Kind names that do not resolve directly to kinds\n* are looked up in default namespaces. In this case, `kind: 'Component'` resolves to\n* `enyo.Component`.\n*\n* To move a component, use the `setOwner()` method to change the\n* component's owner. If you want a component to be unowned, use `setOwner(null)`.\n*\n* If you make changes to `enyo.Component`, be sure to add or update the appropriate\n* {@linkplain https://github.com/enyojs/enyo/tree/master/tools/test/core/tests unit tests}.\n*\n* For more information, see the documentation on\n* [Components]{@linkplain $dev-guide/key-concepts/components.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Component\n* @extends enyo.Object\n* @mixes enyo.ApplicationSupport\n* @mixes enyo.ComponentBindingSupport\n* @public\n*/\nvar Component = module.exports = kind(\n\t/** @lends enyo.Component.prototype */ {\n\n\tname: 'enyo.Component',\n\n\t/**\n\t* @private\n\t*/\n\tkind: CoreObject,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* @private\n\t*/\n\tcachedBubble: true,\n\n\t/**\n\t* @private\n\t*/\n\tcachePoint: false,\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.Component.prototype */ {\n\n\t\t/**\n\t\t* A unique name for the [component]{@link enyo.Component} within its\n\t\t* [owner]{@link enyo.Component#owner}. This is used to set the access name in the\n\t\t* owner's [$ hash]{@link enyo.Component#$}. If not\n\t\t* specified, a default name will be provided based on the name of the\n\t\t* [object's]{@link enyo.Object} [kind]{@glossary kind}, with a numeric\n\t\t* suffix appended if more than one instance exists in the owner.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tname: '',\n\n\t\t/**\n\t\t* A unique id for the [component]{@link enyo.Component}, usually automatically generated\n\t\t* based on its position within the component hierarchy, although\n\t\t* it may also be directly specified. {@link enyo.Control} uses this `id` value for the\n\t\t* DOM [id]{@link enyo.Control#id} attribute.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tid: '',\n\n\t\t/**\n\t\t* The [component]{@link enyo.Component} that owns this component.\n\t\t* It is usually defined implicitly at creation time based on the\n\t\t* [createComponent()]{@link enyo.Component#createComponent} call or\n\t\t* the `components` hash.\n\t\t*\n\t\t* @type {enyo.Component}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\towner: null,\n\n\t\t/**\n\t\t* This can be a [hash]{@glossary Object} of features to apply to\n\t\t* [chrome]{@glossary chrome} [components]{@link enyo.Component} of the base\n\t\t* [kind]{@glossary kind}. They are matched by [name]{@link enyo.Component#name}\n\t\t* (if the component you wish to modify does not have a name, this will not work).\n\t\t* You can modify any properties of the component except for methods. Setting a\n\t\t* value for `componentOverrides` at runtime will have no effect.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcomponentOverrides: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: 'Component',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {},\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [ApplicationSupport, ComponentBindingSupport],\n\n\t/**\n\t* @private\n\t*/\n\ttoString: function () {\n\t\treturn this.id + ' [' + this.kindName + ']';\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\t// initialize instance objects\n\t\t\tthis._componentNameMap = {};\n\t\t\tthis.$ = {};\n\t\t\tthis.cachedBubbleTarget = {};\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\t// perform initialization\n\t\t\tthis.create(props);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\t// stop and queue all of the notifications happening synchronously to allow\n\t\t// responders to only do single passes on work traversing the tree\n\t\tthis.stopNotifications();\n\t\tthis.ownerChanged();\n\t\tthis.initComponents();\n\t\t// release the kraken!\n\t\tthis.startNotifications();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\t// The _components_ property in kind declarations is renamed to\n\t\t// _kindComponents_ by the Component subclass mechanism.  This makes it\n\t\t// easy for the developer to distinguish kindComponents from the components\n\t\t// in _this.components_, without having to worry about the actual difference.\n\t\t//\n\t\t// Specifically, the difference is that kindComponents are constructed as\n\t\t// owned by this control (whereas components in _this.components_ are not).\n\t\t// In addition, kindComponents are marked with the _isChrome: true_ flag.\n\t\tthis.createChrome(this.kindComponents);\n\t\tthis.createClientComponents(this.components);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateChrome: function (comps) {\n\t\tthis.createComponents(comps, {isChrome: true});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateClientComponents: function (comps) {\n\t\tthis.createComponents(comps, {owner: this.getInstanceOwner()});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetInstanceOwner: function () {\n\t\treturn (!this.owner || this.owner.notInstanceOwner) ? this : this.owner;\n\t},\n\n\t/**\n\t* Removes this [component]{@link enyo.Component} from its\n\t* [owner]{@link enyo.Component#owner} (setting `owner` to `null`)\n\t* and does any necessary cleanup. The component is flagged with\n\t* `destroyed: true`. Usually, the component will be suitable for garbage\n\t* collection after being destroyed, unless user code keeps a reference\n\t* to it.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @method\n\t* @public\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.destroyComponents();\n\t\t\tthis.setOwner(null);\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.stopAllJobs();\n\t\t\treturn this;\n\t\t};\n\t}),\n\n\t/**\n\t* Destroys all owned [components]{@link enyo.Component}.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroyComponents: function () {\n\t\tvar comps = this.getComponents(),\n\t\t\tcomp,\n\t\t\ti;\n\n\t\tfor (i = 0; i < comps.length; ++i) {\n\t\t\tcomp = comps[i];\n\t\t\t// @todo: previous comment said list might be stale and ownership may have caused\n\t\t\t// components to be destroyed as a result of some inner-container...look into this\n\t\t\t// because that seems incorrect or avoidable\n\t\t\tif (!comp.destroyed) comp.destroy();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeId: function() {\n\t\tvar delim = '_', pre = this.owner && this.owner.getId(),\n\t\t\tbaseName = this.name || ('@@' + (++unnamedCounter));\n\t\treturn (pre ? pre + delim : '') + baseName;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\townerChanged: function (was) {\n\t\tif (was && was.removeComponent) was.removeComponent(this);\n\t\tif (this.owner && this.owner.addComponent) this.owner.addComponent(this);\n\t\tif (!this.id) this.id = this.makeId();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnameComponent: function (comp) {\n\t\tvar pre = prefixFromKindName(comp.kindName),\n\t\t\tlast = this._componentNameMap[pre] || 0,\n\t\t\tnom;\n\n\t\tdo {\n\t\t\tnom = pre + (++last > 1 ? String(last) : '');\n\t\t} while (this.$[nom]);\n\n\t\tthis._componentNameMap[pre] = Number(last);\n\t\t/*jshint -W093 */\n\t\treturn (comp.name = nom);\n\t},\n\n\t/**\n\t* Adds a [component]{@link enyo.Component} to the list of components\n\t* owned by the current component (i.e., [this.$]{@link enyo.Component#$}).\n\t*\n\t* @param {enyo.Component} comp - The [component]{@link enyo.Component} to add.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddComponent: function (comp) {\n\t\tvar nom = comp.get('name');\n\n\t\t// if there is no name we have to come up with a generic name\n\t\tif (!nom) nom = this.nameComponent(comp);\n\n\t\t// if there already was a component by that name we issue a warning\n\t\t// @todo: if we're going to name rules being violated we need to normalize this approach\n\t\t// and ensure we have one for every warning/error we throw\n\t\tif (this.$[nom]) this.warn(\n\t\t\t'Duplicate component name ' + nom + ' in owner ' + this.id + ' violates ' +\n\t\t\t'unique-name-under-owner rule, replacing existing component in the hash and ' +\n\t\t\t'continuing, but this is an error condition and should be fixed.'\n\t\t);\n\n\t\tthis.$[nom] = comp;\n\t\tthis.notify('$.' + nom, null, comp);\n\n\t\t// if the component has the `publish` true property then we also create a reference to\n\t\t// it directly on the owner (this)\n\t\tif (comp.publish) {\n\t\t\tthis[nom] = comp;\n\n\t\t\t// and to ensure that bindings are aware we have to notify them as well\n\t\t\tthis.notify(nom, null, comp);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Removes the passed-in [component]{@link enyo.Component} from those known\n\t* to be owned by this component. The component will be removed from the\n\t* [$ hash]{@link enyo.Component#$}, and from the [owner]{@link enyo.Component#owner}\n\t* directly if [publish]{@link enyo.Component#publish} is set to `true`.\n\t*\n\t* @param {enyo.Component} comp - The component to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tremoveComponent: function (comp) {\n\t\tvar nom = comp.get('name');\n\n\t\t// remove it from the hash if it existed\n\t\tdelete this.$[nom];\n\n\t\t// if it was published remove it from the component proper\n\t\tif (comp.publish) delete this[nom];\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Returns an [array]{@glossary Array} of owned [components]{@link enyo.Component}; in\n\t* other words, converts the [$ hash]{@link enyo.Component#$} into an array\n\t* and returns the array.\n\t*\n\t* @returns {enyo.Component[]} The [components]{@link enyo.Component} found in the\n\t*\t[$ hash]{@link enyo.Component#$}.\n\t* @public\n\t*/\n\tgetComponents: function () {\n\t\treturn utils.values(this.$);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tadjustComponentProps: function (props) {\n\t\tif (this.defaultProps) utils.mixin(props, this.defaultProps, {ignore: true});\n\t\tprops.kind = props.kind || props.isa || this.defaultKind;\n\t\tprops.owner = props.owner || this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_createComponent: function (props, ext) {\n\t\tvar def = ext ? utils.mixin({}, [ext, props]) : utils.clone(props);\n\n\t\t// always adjust the properties according to the needs of the kind and parent kinds\n\t\tthis.adjustComponentProps(def);\n\n\t\t// pass along for the final stage\n\t\treturn Component.create(def);\n\t},\n\n\t/**\n\t* Creates and returns a [component]{@link enyo.Component} as defined by the combination of\n\t* a base and an additional property [hash]{@glossary Object}. The properties provided\n\t* in the standard property hash override those provided in the\n\t* additional property hash.\n\t*\n\t* The created component passes through initialization machinery\n\t* provided by the creating component, which may supply special\n\t* handling. Unless the [owner]{@link enyo.Component#owner} is explicitly specified, the new\n\t* component will be owned by the instance on which this method is called.\n\t*\n\t* @example\n\t* // Create a new component named 'dynamic', owned by 'this'\n\t* // (will be available as this.$.dynamic).\n\t* this.createComponent({name: 'dynamic'});\n\t*\n\t* @example\n\t* // Create a new component named 'another' owned by 'other'\n\t* // (will be available as other.$.another).\n\t* this.createComponent({name: 'another'}, {owner: other});\n\t*\n\t* @param {Object} props - The declarative [kind]{@glossary kind} definition.\n\t* @param {Object} ext - Additional properties to be applied (defaults).\n\t* @returns {enyo.Component} The instance created with the given parameters.\n\t* @public\n\t*/\n\tcreateComponent: function (props, ext) {\n\t\t// createComponent and createComponents both delegate to the protected method\n\t\t// (_createComponent), allowing overrides to customize createComponent and\n\t\t// createComponents separately.\n\t\treturn this._createComponent(props, ext);\n\t},\n\n\t/**\n\t* Creates [components]{@link enyo.Component} as defined by the [arrays]{@glossary Array}\n\t* of base and additional property [hashes]{@glossary Object}. The standard and\n\t* additional property hashes are combined as described in\n\t* [createComponent()]{@link enyo.Component#createComponent}.\n\t*\n\t* @example\n\t* // ask foo to create components 'bar' and 'zot', but set the owner of\n\t* // both components to 'this'.\n\t* this.$.foo.createComponents([\n\t*\t{name: 'bar'},\n\t*\t{name: 'zot'}\n\t* ], {owner: this});\n\t*\n\t* @param {Object[]} props The array of {@link enyo.Component} definitions to be created.\n\t* @param {Object} ext - Additional properties to be supplied as defaults for each.\n\t* @returns {enyo.Component[]} The array of [components]{@link enyo.Component} that were\n\t*\tcreated.\n\t* @public\n\t*/\n\tcreateComponents: function (props, ext) {\n\t\tvar comps = [],\n\t\t\tcomp,\n\t\t\ti;\n\n\t\tif (props) {\n\t\t\tfor (i = 0; i < props.length; ++i) {\n\t\t\t\tcomp = props[i];\n\t\t\t\tcomps.push(this._createComponent(comp, ext));\n\t\t\t}\n\t\t}\n\n\t\treturn comps;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetBubbleTarget: function (nom, event) {\n\t\tif (event.delegate) return this.owner;\n\t\telse {\n\t\t\treturn (\n\t\t\t\tthis.bubbleTarget\n\t\t\t\t|| (this.cachedBubble && this.cachedBubbleTarget[nom])\n\t\t\t\t|| this.owner\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t* Bubbles an {@glossary event} up an [object]{@glossary Object} chain,\n\t* starting with `this`.\n\t*\n\t* A handler for an event may be specified. See {@link enyo.Component~EventHandler}\n\t* for complete details.\n\t*\n\t* @param {String} nom - The name of the {@glossary event} to bubble.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to be passed along\n\t* while bubbling.\n\t* @param {enyo.Component} [sender=this] - The {@link enyo.Component} responsible for\n\t*\tbubbling the event.\n\t* @returns {Boolean} `false` if unhandled or uninterrupted; otherwise, `true`.\n\t* @public\n\t*/\n\tbubble: function (nom, event, sender) {\n\t\tif (!this._silenced) {\n\t\t\tevent = event || {};\n\t\t\tevent.lastHandledComponent = null;\n\t\t\tevent.bubbling = true;\n\t\t\t// deliberately done this way\n\t\t\tif (event.originator == null) event.originator = sender || this;\n\t\t\treturn this.dispatchBubble(nom, event, sender || this);\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Bubbles an {@glossary event} up an [object]{@glossary Object} chain,\n\t* starting **above** `this`.\n\t*\n\t* A handler for an event may be specified. See {@link enyo.Component~EventHandler}\n\t* for complete details.\n\t*\n\t* @param {String} nom - The name of the {@glossary event}.\n\t* @param {Object} [event] - The event properties to pass along while bubbling.\n\t* @returns {Boolean} `false` if unhandled or uninterrupted; otherwise, `true`.\n\t* @public\n\t*/\n\tbubbleUp: function (nom, event) {\n\t\tvar next;\n\n\t\tif (!this._silenced) {\n\t\t\tevent = event || {};\n\t\t\tevent.bubbling = true;\n\t\t\tnext = this.getBubbleTarget(nom, event);\n\t\t\tif (next) {\n\t\t\t\t// use delegate as sender if it exists to preserve illusion\n\t\t\t\t// that event is dispatched directly from that, but we still\n\t\t\t\t// have to bubble to get decorations\n\t\t\t\treturn next.dispatchBubble(nom, event, event.delegate || this);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Sends an {@glossary event} to a named [delegate]{@glossary delegate}.\n\t* This [object]{@glossary Object} may dispatch an event to\n\t* itself via a [handler]{@link enyo.Component~EventHandler}, or to its\n\t* [owner]{@link enyo.Component#owner} via an event property, e.g.:\n\t*\n\t*\thandlers {\n\t*\t\t// 'tap' events dispatched to this.tapHandler\n\t*\t\tontap: 'tapHandler'\n\t*\t}\n\t*\n\t*\t// 'tap' events dispatched to 'tapHandler' delegate in this.owner\n\t*\tontap: 'tapHandler'\n\t*\n\t* @private\n\t*/\n\tdispatchEvent: function (nom, event, sender) {\n\t\tvar delegate,\n\t\t\tret;\n\n\t\tif (!this._silenced) {\n\t\t\t// if the event has a delegate associated with it we grab that\n\t\t\t// for reference\n\t\t\t// NOTE: This is unfortunate but we can't use a pooled object here because\n\t\t\t// we don't know where to release it\n\t\t\tdelegate = (event || (event = {})).delegate;\n\n\t\t\t// bottleneck event decoration w/ optimization to avoid call to empty function\n\t\t\tif (this.decorateEvent !== Component.prototype.decorateEvent) {\n\t\t\t\tthis.decorateEvent(nom, event, sender);\n\t\t\t}\n\n\t\t\t// first, handle any delegated events intended for this object\n\t\t\tif (delegate && delegate.owner === this) {\n\t\t\t\t// the most likely case is that we have a method to handle this\n\t\t\t\tif (this[nom] && 'function' === typeof this[nom]) {\n\t\t\t\t\treturn this.dispatch(nom, event, sender);\n\t\t\t\t}\n\t\t\t\t// but if we don't, just stop the event from going further\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// for non-delgated events, try the handlers block if possible\n\t\t\tif (!delegate) {\n\t\t\t\tvar bHandler = this.handlers && this.handlers[nom];\n\t\t\t\tvar bDelegatedFunction = this[nom] && utils.isString(this[nom]);\n\t\t\t\tvar cachePoint = this.cachePoint || bHandler || bDelegatedFunction || this.id === \"master\" ;\n\n\t\t\t\tif (event.bubbling) {\n\t\t\t\t\tif (event.lastHandledComponent && cachePoint) {\n\t\t\t\t\t\tevent.lastHandledComponent.cachedBubbleTarget[nom] = this;\n\t\t\t\t\t\tevent.lastHandledComponent = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (!event.lastHandledComponent && this.id !== \"master\") {\n\t\t\t\t\t\tevent.lastHandledComponent = this;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bHandler && this.dispatch(bHandler, event, sender)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (bDelegatedFunction) {\n\t\t\t\t\t// we dispatch it up as a special delegate event with the\n\t\t\t\t\t// component that had the delegation string property stored in\n\t\t\t\t\t// the 'delegate' property\n\t\t\t\t\tevent.delegate = this;\n\t\t\t\t\tret = this.bubbleUp(this[nom], event, sender);\n\t\t\t\t\tdelete event.delegate;\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Internal - try dispatching {@glossary event} to self; if that fails,\n\t* [bubble it up]{@link enyo.Component#bubbleUp} the tree.\n\t*\n\t* @private\n\t*/\n\tdispatchBubble: function (nom, event, sender) {\n\t\tif (!this._silenced) {\n\t\t\t// Try to dispatch from here, stop bubbling on truthy return value\n\t\t\tif (this.dispatchEvent(nom, event, sender)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// Bubble to next target\n\t\t\treturn this.bubbleUp(nom, event, sender);\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdecorateEvent: function (nom, event, sender) {\n\t\t// an event may float by us as part of a dispatchEvent chain\n\t\t// both call this method so intermediaries can decorate inEvent\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopAllJobs: function () {\n\t\tvar job;\n\n\t\tif (this.__jobs) for (job in this.__jobs) this.stopJob(job);\n\t},\n\n\t/**\n\t* Dispatches the {@glossary event} to named [delegate]{@glossary delegate} `nom`,\n\t* if it exists. [Subkinds]{@glossary subkind} may re-route dispatches. Note that\n\t* both 'handlers' events and events delegated from owned controls arrive here.\n\t* If you need to handle these types of events differently, you may also need to\n\t* override [dispatchEvent()]{@link enyo.Component#dispatchEvent}.\n\t*\n\t* @param {String} nom - The method name to dispatch the {@glossary event}.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\n\t* @param {enyo.Component} [sender=this] - The originator of the event.\n\t* @public\n\t*/\n\tdispatch: function (nom, event, sender) {\n\t\tvar fn;\n\n\t\tif (!this._silenced) {\n\t\t\tfn = nom && this[nom];\n\t\t\tif (fn && typeof fn == 'function') {\n\t\t\t\t// @todo: deprecate sender\n\t\t\t\treturn fn.call(this, sender || this, event);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Triggers the [handler]{@link enyo.Component~EventHandler} for a given\n\t* {@glossary event} type.\n\t*\n\t* @example\n\t* myControl.triggerHandler('ontap');\n\t*\n\t* @param {String} nom - The name of the {@glossary event} to trigger.\n\t* @param {Object} [event] - The event object to pass along.\n\t* @param {enyo.Component} [sender=this] - The originator of the event.\n\t* @returns {Boolean} `false` if unhandled or uninterrupted, `true` otherwise.\n\t* @public\n\t*/\n\ttriggerHandler: function () {\n\t\treturn this.dispatchEvent.apply(this, arguments);\n\t},\n\n\t/**\n\t* Sends a message to myself and all of my [components]{@link enyo.Component}.\n\t* You can stop a waterfall into components owned by a receiving object\n\t* by returning a truthy value from the {@glossary event}\n\t* [handler]{@link enyo.Component~EventHandler}.\n\t*\n\t* @param {String} nom - The name of the {@glossary event} to waterfall.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\n\t* @param {enyo.Component} [sender=this] - The originator of the event.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\twaterfall: function(nom, event, sender) {\n\t\tif (!this._silenced) {\n\t\t\tevent = event || {};\n\t\t\tevent.bubbling = false;\n\n\t\t\t// give the locals an opportunity to interrupt the event\n\t\t\tif (this.dispatchEvent(nom, event, sender)) return true;\n\n\t\t\t// otherwise carry on\n\t\t\tthis.waterfallDown(nom, event, sender || this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Sends a message to all of my [components]{@link enyo.Component}, but not myself. You can\n\t* stop a [waterfall]{@link enyo.Component#waterfall} into [components]{@link enyo.Component}\n\t* owned by a receiving [object]{@glossary Object} by returning a truthy value from the\n\t* {@glossary event} [handler]{@link enyo.Component~EventHandler}.\n\t*\n\t* @param {String} nom - The name of the {@glossary event}.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\n\t* @param {enyo.Component} [sender=this] - The event originator.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\twaterfallDown: function(nom, event, sender) {\n\t\tvar comp;\n\t\tevent = event || {};\n\t\tevent.bubbling = false;\n\n\t\tif (!this._silenced) {\n\t\t\tfor (comp in this.$) this.$[comp].waterfall(nom, event, sender || this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_silenced: false,\n\n\t/**\n\t* @private\n\t*/\n\t_silenceCount: 0,\n\n\t/**\n\t* Sets a flag that disables {@glossary event} propagation for this\n\t* [component]{@link enyo.Component}. Also increments an internal counter that tracks\n\t* the number of times the [unsilence()]{@link enyo.Component#unsilence} method must\n\t* be called before event propagation will continue.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsilence: function () {\n\t\tthis._silenced = true;\n\t\tthis._silenceCount += 1;\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Determines if the [object]{@glossary Object} is currently\n\t* [silenced]{@link enyo.Component#_silenced}, which will prevent propagation of\n\t* [events]{@glossary event} (of any kind).\n\t*\n\t* @returns {Boolean} `true` if silenced; otherwise, `false`.\n\t* @public\n\t*/\n\tisSilenced: function () {\n\t\treturn this._silenced;\n\t},\n\n\t/**\n\t* Allows {@glossary event} propagation for this [component]{@link enyo.Component}\n\t* if the internal silence counter is `0`; otherwise, decrements the counter by one.\n\t* For event propagation to resume, this method must be called one time each call to\n\t* [silence()]{@link enyo.Component#silence}.\n\t*\n\t* @returns {Boolean} `true` if the {@link enyo.Component} is now unsilenced completely;\n\t*\t`false` if it remains silenced.\n\t* @public\n\t*/\n\tunsilence: function () {\n\t\tif (0 !== this._silenceCount) --this._silenceCount;\n\t\tif (0 === this._silenceCount) this._silenced = false;\n\t\treturn !this._silenced;\n\t},\n\n\t/**\n\t* Creates a new [job]{@link enyo.job} tied to this instance of the\n\t* [component]{@link enyo.Component}. If the component is\n\t* [destroyed]{@link enyo.Component#destroy}, any jobs associated with it\n\t* will be stopped.\n\t*\n\t* If you start a job with the same name as a pending job,\n\t* the original job will be stopped; this can be useful for resetting\n\t* timeouts.\n\t*\n\t* You may supply a priority level (1-10) at which the job should be\n\t* executed. The default level is `5`. Setting the priority lower than `5` (or setting it to\n\t* the string `\"low\"`) will defer the job if an animation is in progress,\n\t* which can help to avoid stuttering.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to start.\n\t* @param {(Function|String)} job - Either the name of a method or a\n\t*\t[function]{@glossary Function} to execute as the requested job.\n\t* @param {Number} wait - The number of milliseconds to wait before starting\n\t*\tthe job.\n\t* @param {Number} [priority=5] The priority value to be associated with this\n\t*\tjob.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tstartJob: function (nom, job, wait, priority) {\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\n\t\tpriority = priority || 5;\n\t\t// allow strings as job names, they map to local method names\n\t\tif (typeof job == 'string') job = this[job];\n\t\t// stop any existing jobs with same name\n\t\tthis.stopJob(nom);\n\t\tjobs[nom] = setTimeout(this.bindSafely(function() {\n\t\t\tJobs.add(this.bindSafely(job), priority, nom);\n\t\t}), wait);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Stops a [component]{@link enyo.Component}-specific [job]{@link enyo.job} before it has\n\t* been activated.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to be stopped.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tstopJob: function (nom) {\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\n\t\tif (jobs[nom]) {\n\t\t\tclearTimeout(jobs[nom]);\n\t\t\tdelete jobs[nom];\n\t\t}\n\t\tJobs.remove(nom);\n\t},\n\n\t/**\n\t* Executes the specified [job]{@link enyo.job} immediately, then prevents\n\t* any other calls to `throttleJob()` with the same job name from running for\n\t* the specified amount of time.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to throttle.\n\t* @param {(Function|String)} job - Either the name of a method or a\n\t*\t[function]{@glossary Function} to execute as the requested job.\n\t* @param {Number} wait - The number of milliseconds to wait before executing the\n\t*\tjob again.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tthrottleJob: function (nom, job, wait) {\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\n\t\t// if we still have a job with this name pending, return immediately\n\t\tif (!jobs[nom]) {\n\t\t\t// allow strings as job names, they map to local method names\n\t\t\tif (typeof job == 'string') job = this[job];\n\t\t\tjob.call(this);\n\t\t\tjobs[nom] = setTimeout(this.bindSafely(function() {\n\t\t\t\tthis.stopJob(nom);\n\t\t\t}), wait);\n\t\t}\n\t\treturn this;\n\t}\n});\n\n/**\n* @private\n*/\nkind.setDefaultCtor(Component);\n\n/**\n* Creates new instances from [config]{@glossary configurationBlock}\n* [objects]{@glossary Object}. This method looks up the proper\n* [constructor]{@glossary constructor} based on the provided [kind]{@glossary kind}\n* attribute.\n*\n* @name enyo.create\n* @param {Object} props - The properties that define the [kind]{@glossary kind}.\n* @returns {*} An instance of the requested [kind]{@glossary kind}.\n* @public\n*/\nComponent.create = function (props) {\n\tvar theKind,\n\t\tCtor;\n\n\tif (!props.kind && props.hasOwnProperty('kind')) throw new Error(\n\t\t'enyo.create: Attempt to create a null kind. Check dependencies for [' + props.name + ']'\n\t);\n\n\ttheKind = props.kind || props.isa || kind.getDefaultCtor();\n\tCtor = kind.constructorForKind(theKind);\n\n\tif (!Ctor) {\n\t\tlogger.error('No constructor found for kind ' + theKind);\n\t\tCtor = Component;\n\t}\n\n\treturn new Ctor(props);\n};\n\n/**\n* @name enyo.Component.subclass\n* @static\n* @private\n*/\nComponent.subclass = function (ctor, props) {\n\t// Note: To reduce API surface area, sub-components are declared only as\n\t// 'components' in both kind and instance declarations.\n\t//\n\t// However, 'components' from kind declarations must be handled separately\n\t// at creation time.\n\t//\n\t// We rename the property here to avoid having\n\t// to interrogate the prototype at creation time.\n\t//\n\tvar proto = ctor.prototype;\n\t//\n\tif (props.components) {\n\t\tproto.kindComponents = props.components;\n\t\tdelete proto.components;\n\t} else {\n\t\t// Feature to mixin overrides of super-kind component properties from named hash\n\t\t// (only applied when the sub-kind doesn't supply its own components block)\n\t\tif (props.componentOverrides) {\n\t\t\tproto.kindComponents = Component.overrideComponents(\n\t\t\t\tproto.kindComponents,\n\t\t\t\tprops.componentOverrides,\n\t\t\t\tproto.defaultKind\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n* @name enyo.Component.concat\n* @static\n* @private\n*/\nComponent.concat = function (ctor, props) {\n\tvar proto = ctor.prototype || ctor,\n\t\thandlers;\n\tif (props.handlers) {\n\t\thandlers = proto.handlers ? utils.clone(proto.handlers) : {};\n\t\tproto.handlers = utils.mixin(handlers, props.handlers);\n\t\tdelete props.handlers;\n\t}\n\tif (props.events) Component.publishEvents(proto, props);\n};\n\n/**\n* @name enyo.Component.overrideComponents\n* @static\n* @private\n*/\nComponent.overrideComponents = function (components, overrides, defaultKind) {\n\tvar fn = function (k, v) { return !(utils.isFunction(v) || kind.isInherited(v)); };\n\tcomponents = utils.clone(components);\n\tfor (var i=0; i<components.length; i++) {\n\t\tvar c = utils.clone(components[i]);\n\t\tvar o = overrides[c.name];\n\t\tvar ctor = kind.constructorForKind(c.kind || defaultKind);\n\t\tif (o) {\n\n\t\t\t// NOTE: You cannot overload mixins, observers or computed properties from\n\t\t\t// component overrides\n\t\t\tkind.concatHandler(c, o);\n\t\t\tvar b = (c.kind && ((typeof c.kind == 'string' && utils.getPath(c.kind)) || (typeof c.kind == 'function' && c.kind))) || kind.getDefaultCtor();\n\t\t\twhile (b) {\n\t\t\t\tif (b.concat) { b.concat(c, o, true); }\n\t\t\t\tb = b.prototype.base;\n\t\t\t}\n\t\t\t// All others just mix in\n\t\t\tutils.mixin(c, o, {filter: fn});\n\t\t}\n\t\tif (c.components) {\n\t\t\tc.components = Component.overrideComponents(c.components, overrides, ctor.prototype.defaultKind);\n\t\t}\n\t\tcomponents[i] = c;\n\t}\n\treturn components;\n};\n\n/**\n* @name enyo.Component.publishEvents\n* @static\n* @private\n*/\nComponent.publishEvents = function (ctor, props) {\n\tvar events = props.events,\n\t\tevent,\n\t\tproto;\n\tif (events) {\n\t\tproto = ctor.prototype || ctor;\n\t\tfor (event in events) Component.addEvent(event, events[event], proto);\n\t}\n};\n\n/**\n* @name enyo.Component.addEvent\n* @static\n* @private\n*/\nComponent.addEvent = function (nom, val, proto) {\n\tvar v, fn;\n\tif (!utils.isString(val)) {\n\t\tv = val.value;\n\t\tfn = val.caller;\n\t} else {\n\t\tif (nom.slice(0, 2) != 'on') {\n\t\t\tlogger.warn('enyo.Component.addEvent: event names must start with \"on\". ' + proto.kindName + ' ' +\n\t\t\t\t'event \"' + nom + '\" was auto-corrected to \"on' + nom + '\".');\n\t\t\tnom = 'on' + nom;\n\t\t}\n\t\tv = val;\n\t\tfn = 'do' + utils.cap(nom.slice(2));\n\t}\n\tproto[nom] = v;\n\tif (!proto[fn]) {\n\t\tproto[fn] = function(payload, other) {\n\t\t\t// bubble this event\n\n\t\t\t// if the second parameter exists then we use that - this is for a single case\n\t\t\t// where a named event delegates happent to point to an auto generated event\n\t\t\t// bubbler like this one - in that case the first parameter is actually the\n\t\t\t// sender\n\t\t\tvar e = other || payload;\n\t\t\tif (!e) {\n\t\t\t\te = {};\n\t\t\t}\n\t\t\tvar d = e.delegate;\n\t\t\t// delete payload.delegate;\n\t\t\te.delegate = undefined;\n\t\t\tif (!utils.exists(e.type)) {\n\t\t\t\te.type = nom;\n\t\t\t}\n\t\t\tthis.bubble(nom, e);\n\t\t\tif (d) {\n\t\t\t\te.delegate = d;\n\t\t\t}\n\t\t};\n\t}\n};\n\n/**\n* @private\n*/\nfunction prefixFromKindName (nom) {\n\tvar pre = kindPrefix[nom],\n\t\tlast;\n\n\tif (!pre) {\n\t\tlast = nom.lastIndexOf('.');\n\t\tpre = (last >= 0) ? nom.slice(last+1) : nom;\n\t\tpre = pre.charAt(0).toLowerCase() + pre.slice(1);\n\t\tkindPrefix[nom] = pre;\n\t}\n\n\treturn pre;\n}","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tanimation = require('./animation');\n\nvar\n\tComponent = require('./Component'),\n\tJobs = require('./jobs');\n\n/**\n* Fires when an animation step occurs.\n*\n* @event enyo.Animator#onStep\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the animation finishes normally.\n*\n* @event enyo.Animator#onEnd\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the animation is prematurely stopped.\n*\n* @event enyo.Animator#onStop\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Animator} is a basic animation [component]{@link enyo.Component}.  Call\n* [play()]{@link enyo.Animator#play} to start the animation. The animation will run for\n* the period (in milliseconds) specified by its [duration]{@link enyo.Animator#duration}\n* property. [onStep]{@link enyo.Animator#onStep} [events]{@glossary event} will\n* fire in quick succession and should be handled to do something based on the\n* [value]{@link enyo.Animator#value} property.\n*\n* The `value` property will progress from [startValue]{@link enyo.Animator#startValue}\n* to [endValue]{@link enyo.Animator#endValue} during the animation, based on the\n* [function]{@glossary Function} referenced by the\n* [easingFunction]{@link enyo.Animator#easingFunction} property.\n* \n* Event handlers may be specified as functions. If specified, the handler function will\n* be used to handle the event directly, without sending the event to its\n* [owner]{@link enyo.Component#owner} or [bubbling]{@link enyo.Component#bubble} it.\n* The [context]{@link enyo.Animator#context} property may be used to call the supplied\n* event functions in a particular `this` context.\n* \n* During animation, an {@link enyo.jobs} priority of 5 is registered to defer low priority \n* tasks.\n*\n* @class enyo.Animator\n* @extends enyo.Component\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Animator.prototype */ {\n\n\t/**\n\t* A context in which to run the specified {@glossary event} handlers. If this is\n\t* not specified or is falsy, then the [global object]{@glossary global} is used.\n\t* \n\t* @name context\n\t* @type {Object}\n\t* @default undefined\n\t* @memberOf enyo.Animator.prototype\n\t* @public\n\t*/\n\t\t\n\tname: 'enyo.Animator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Animator.prototype */ {\n\t\t\n\t\t/** \n\t\t* Animation duration in milliseconds\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 350\n\t\t* @public\n\t\t*/\n\t\tduration: 350,\n\n\t\t/** \n\t\t* Value of [value]{@link enyo.Animator#value} property at the beginning of an animation.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tstartValue: 0,\n\n\t\t/** \n\t\t* Value of [value]{@link enyo.Animator#value} property at the end of an animation.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1\n\t\t* @public\n\t\t*/\n\t\tendValue: 1,\n\n\t\t/** \n\t\t* Node that must be visible in order for the animation to continue. This reference is \n\t\t* destroyed when the animation ceases.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tnode: null,\n\n\t\t/** \n\t\t* [Function]{@glossary Function} that determines how the animation progresses from \n\t\t* [startValue]{@link enyo.Animator#startValue} to [endValue]{@link enyo.Animator#endValue}.\n\t\t* \n\t\t* @type {Function}\n\t\t* @default enyo.easing.cubicOut\n\t\t* @public\n\t\t*/\n\t\teasingFunction: animation.easing.cubicOut\n\t},\n\t\n\t/*\n\t* @private\n\t*/\n\tevents: {\n\t\tonStep: '',\n\t\tonEnd: '',\n\t\tonStop: ''\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis._next = this.bindSafely('next');\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/** \n\t* Plays the animation.\n\t*\n\t* @param {Object} props - As a convenience, this [hash]{@glossary Object} will be mixed\n\t*\tdirectly into this [object]{@glossary Object}.\n\t* @public\n\t*/\n\tplay: function (props) {\n\t\tthis.stop();\n\t\tthis.reversed = false;\n\t\tif (props) {\n\t\t\tutils.mixin(this, props);\n\t\t}\n\t\tthis.t0 = this.t1 = utils.perfNow();\n\t\tthis.value = this.startValue;\n\n\t\t// register this jobPriority to block less urgent tasks from executing\n\t\tJobs.registerPriority(5, this.id);\n\n\t\tthis.job = true;\n\t\tthis.next();\n\t\treturn this;\n\t},\n\n\t/** \n\t* Stops the animation and fires the associated {@glossary event}.\n\t*\n\t* @fires enyo.Animator#onStop\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tstop: function () {\n\t\tif (this.isAnimating()) {\n\t\t\tthis.cancel();\n\t\t\tthis.fire('onStop');\n\t\t\treturn this;\n\t\t}\n\t},\n\n\t/**\n\t* Stops the animation after a final step\n\t*\n\t* @returns {this} The callee for chaining\n\t* @public\n\t*/\n\tcomplete: function () {\n\t\tif (this.isAnimating()) {\n\t\t\t// set the start time such that the delta will always be greater than the duration\n\t\t\t// causing the animation to complete immediately\n\t\t\tthis.t0 = -this.duration - 1;\n\t\t\tthis.next();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/** \n\t* Reverses the direction of a running animation.\n\t* \n\t* @return {this} The callee for chaining.\n\t* @public\n\t*/\n\treverse: function () {\n\t\tif (this.isAnimating()) {\n\t\t\tthis.reversed = !this.reversed;\n\t\t\tvar now = this.t1 = utils.perfNow();\n\t\t\t// adjust start time (t0) to allow for animation done so far to replay\n\t\t\tvar elapsed = now - this.t0;\n\t\t\tthis.t0 = now + elapsed - this.duration;\n\t\t\t// swap start and end values\n\t\t\tvar startValue = this.startValue;\n\t\t\tthis.startValue = this.endValue;\n\t\t\tthis.endValue = startValue;\n\t\t\treturn this;\n\t\t}\n\t},\n\n\t/**\n\t* Determines whether an animation is in progress.\n\t*\n\t* @returns {Boolean} `true` if there is an animation currently running; otherwise, `false`.\n\t* @private\n\t*/\n\tisAnimating: function () {\n\t\treturn Boolean(this.job);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestNext: function () {\n\t\tthis.job = animation.requestAnimationFrame(this._next, this.node);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcancel: function () {\n\t\tanimation.cancelRequestAnimationFrame(this.job);\n\t\tthis.node = null;\n\t\tthis.job = null;\n\n\t\t// unblock job queue\n\t\tJobs.unregisterPriority(this.id);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshouldEnd: function () {\n\t\treturn (this.dt >= this.duration);\n\t},\n\n\t/**\n\t* Runs the next step of the animation.\n\t*\n\t* @fires enyo.Animator#onStep\n\t* @fires enyo.Animator#onEnd\n\t* @private\n\t*/\n\tnext: function () {\n\t\tthis.t1 = utils.perfNow();\n\t\tthis.dt = this.t1 - this.t0;\n\t\tvar args = this.easingFunction.length;\n\t\tvar f;\n\n\t\tif (args === 1) {\n\t\t\t// time independent\n\t\t\tf = this.fraction = animation.easedLerp(this.t0, this.duration, this.easingFunction, this.reversed);\n\t\t\tthis.value = this.startValue + f * (this.endValue - this.startValue);\n\t\t} else {\n\t\t\tthis.value = animation.easedComplexLerp(this.t0, this.duration, this.easingFunction, this.reversed,\n\t\t\t\tthis.dt, this.startValue, (this.endValue - this.startValue));\n\t\t}\n\t\tif (((f >= 1) && (args === 1)) || this.shouldEnd()) {\n\t\t\tthis.value = this.endValue;\n\t\t\tthis.fraction = 1;\n\t\t\tthis.fire('onStep');\n\t\t\tthis.cancel();\n\t\t\tutils.asyncMethod(this.bindSafely(function() {\n\t\t\t\tthis.fire('onEnd');\n\t\t\t}));\n\t\t} else {\n\t\t\tthis.fire('onStep');\n\t\t\tthis.requestNext();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfire: function (nom) {\n\t\tvar fn = this[nom];\n\t\tif (utils.isString(fn)) {\n\t\t\tthis.bubble(nom);\n\t\t} else if (fn) {\n\t\t\tfn.call(this.context || global, this);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tComponent = require('./Component'),\n\tEventEmitter = require('./EventEmitter'),\n\tModel = require('./Model'),\n\tModelList = require('./ModelList'),\n\tStateSupport = require('./StateSupport'),\n\tSource = require('./Source'),\n\tStore = require('./Store'),\n\tStates = require('./States');\n\n/**\n* This is only necessary because of the order in which mixins are applied.\n*\n* @class\n* @private\n*/\nvar BaseCollection = kind({\n\tkind: Component,\n\tmixins: [EventEmitter, StateSupport]\n});\n\n/**\n* Fires when [models]{@link enyo.Model} have been [added]{@link enyo.Collection#add}\n* to the [collection]{@link enyo.Collection}.\n*\n* @event enyo.Collection#add\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of\n*\t[models]{@link enyo.Model} that were [added]{@link enyo.Collection#add} to the\n*\t[collection]{@link enyo.Collection}.\n* @property {enyo.Collection} collection - A reference to the\n*\tcollection that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @property {Number} index - The index in the given collection where the models were inserted.\n* @public\n*/\n\n/**\n* Fires when [models]{@link enyo.Model} have been [removed]{@link enyo.Collection#remove}\n* from the [collection]{@link enyo.Collection}.\n*\n* @event enyo.Collection#remove\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of\n*\t[models]{@link enyo.Model} that were [removed]{@link enyo.Collection#remove} from the\n*\t[collection]{@link enyo.Collection}.\n* @property {enyo.Collection} collection - A reference to the\n*\tcollection that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @public\n*/\n\n/**\n* Fires when the [collection]{@link enyo.Collection} has been\n* [sorted]{@link enyo.Collection#sort}.\n*\n* @event enyo.Collection#sort\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of all\n*\t[models]{@link enyo.Model} in the correct, [sorted]{@link enyo.Collection#sort} order.\n* @property {enyo.Collection} collection - A reference to the\n*\t[collection]{@link enyo.Collection} that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @property {Function} comparator - A reference to the\n*\t[comparator]{@link enyo.Collection#comparator} that was used when\n*\tsorting the collection.\n* @public\n*/\n\n/**\n* Fires when the [collection]{@link enyo.Collection} has been reset and its\n* contents have been updated arbitrarily.\n*\n* @event enyo.Collection#reset\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of all\n*\t[models]{@link enyo.Model} as they are currently.\n* @property {enyo.Collection} collection - A reference to the\n*\t[collection]{@link enyo.Collection} that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @public\n*/\n\n/**\n* The default configurable [options]{@link enyo.Collection#options} used by certain API\n* methods of {@link enyo.Collection}.\n*\n* @typedef {Object} enyo.Collection~Options\n* @property {Boolean} merge=true - If `true`, when data is being added to the\n*\t[collection]{@link enyo.Collection} that already exists (i.e., is matched by\n*\t[primaryKey]{@link enyo.Model#primaryKey}), the new data values will be set\n* with the current [model]{@link enyo.Model} instance. This means that the\n* existing values will be updated with the new ones by calling\n* [set()]{@link enyo.Model#set} on the model.\n* @property {Boolean} silent=false - Many accessor methods of the collection\n*\twill emit events and/or notifications. This value indicates whether or not\n*\tthose events or notifications will be suppressed at times when that behavior\n*\tis necessary. Typically, you will not want to modify this value.\n* @property {Boolean} purge=false - When [adding]{@link enyo.Collection#add}\n*\tmodels, this flag indicates whether or not to [remove]{@link enyo.Collection#remove}\n* (purge) the existing models that are not included in the new dataset.\n* @property {Boolean} parse=false - The collection's [parse()]{@link enyo.Collection#parse}\n*\tmethod can be executed automatically when incoming data is added via the\n*\t[constructor()]{@link enyo.Collection#constructor} method, or, later, via a\n*\t[fetch]{@link enyo.Collection#fetch}. You may need to examine the runtime\n* configuration options of the method(s) to determine whether parsing is needed.\n* In cases where parsing will always be necessary, this may be set to `true`.\n* @property {Boolean} create=true - This value determines whether a new\n*\tmodel will be created when data being added to the collection cannot be found\n* (or the [find]{@link enyo.Collection#options#find} flag is `false`). Models\n* that are created by a collection have their [owner]{@link enyo.Model#owner}\n* property set to the collection that instanced them.\n* @property {Boolean} find=true - When data being added to the collection is not\n* already a model instance, the collection will attempt to find an existing model\n* by its `primaryKey`, if it exists. In most cases, this is the preferred behavior,\n* but if the model [kind]{@glossary kind} being  instanced does not have a\n* `primaryKey`, it is unnecessary and this value may be set to `false`.\n* @property {Boolean} sort=false - When adding models to the collection, the\n* collection can also be sorted. If the [comparator]{@link enyo.Collection#comparator}\n* is a [function]{@glossary Function} and this value is `true`, the comparator\n*\twill be used to sort the entire collection. It may also be a function that\n* will be used to sort the collection, instead of (or in the place of) a defined\n*\tcomparator.\n* @property {Boolean} commit=false - When modifications are made to the\n*\tcollection, this flag ensures that those changes are\n*\t[committed]{@link enyo.Collection#commit} according to the configuration and\n*\tavailability of a [source]{@link enyo.Collection#source}. This may also be\n* configured per-call to methods that use it.\n* @property {Boolean} destroy=false - When models are removed from the collection,\n*\tthis flag indicates whether or not they will be [destroyed]{@link enyo.Model#destroy}\n* as well. Note that this could have a significant impact if the same models are\n* used in other collections.\n* @property {Boolean} complete=false - When models are removed from the\n* collection, this flag indicates whether or not they will also be removed from\n* the [store]{@link enyo.Collection#store}. This is rarely necessary and can\n* cause problems if the models are used in other collections. In addition, this\n* value will be ignored if the [destroy]{@link enyo.Collection#options#destroy}\n* flag is `true`.\n* @property {Boolean} fetch=false - If `true`, when the collection is initialized,\n* it will automatically attempt to fetch data if the\n* [source]{@link enyo.Collection#source} and [url]{@link enyo.Collection#url}\n*\tor [getUrl]{@link enyo.Collection#getUrl} properties are properly configured.\n* @property {Boolean} modelEvents=true - If `false`, this will keep the collection from\n*\tregistering with each model for individual model events.\n*/\n\n/**\n* The configuration options for [add()]{@link enyo.Collection#add}. For complete\n* descriptions of the options and their default values, see\n* {@link enyo.Collection#options}. Note that some properties have different\n* meanings in different contexts. Please review the descriptions below to see\n* how each property is used in this context.\n* \n* @typedef {enyo.Collection~Options} enyo.Collection~AddOptions\n* @property {Boolean} merge - Update existing [models]{@link enyo.Model} when found.\n* @property {Boolean} purge - Remove existing models not in the new dataset.\n* @property {Boolean} silent - Emit [events]{@glossary event} and notifications.\n* @property {Boolean} parse - Parse the incoming dataset before evaluating.\n* @property {Boolean} find - Look for an existing model.\n* @property {(Boolean|Function)} sort - Sort the finalized dataset.\n* @property {Boolean} commit - [Commit]{@link enyo.Collection#commit} changes to the\n*\t{@link enyo.Collection} after completing the [add]{@link enyo.Collection#add}\n* operation.\n* @property {Boolean} create - When an existing {@link enyo.Model} instance cannot be\n*\tresolved, a new instance should be created.\n* @property {number} index - The index at which to add the new dataset. Defaults to the\n*\tend of the current dataset if not explicitly set or invalid.\n* @property {Boolean} destroy - If `purge` is `true`, this will\n* [destroy]{@link enyo.Model#destroy} any models that are\n* [removed]{@link enyo.Collection#remove}.\n* @property {Object} modelOptions - When instancing a model, this\n*\t[object]{@glossary Object} will be passed to the constructor as its `options`\n*\tparameter.\n*/\n\n/**\n* The configuration options for [remove()]{@link enyo.Collection#remove}. For\n* complete descriptions of the options and their defaults, see\n* {@link enyo.Collection~Options}. Note that some properties have different\n* meanings in different contexts. Please review the descriptions below to see\n* how each property is used in this context.\n* \n* @typedef {enyo.Collection~Options} enyo.Collection~RemoveOptions\n* @property {Boolean} silent - Emit [events]{@glossary event} and notifications.\n* @property {Boolean} commit - [Commit]{@link enyo.Collection#commit} changes to the\n*\t[collection]{@link enyo.Collection} after completing the\n*\t[remove]{@link enyo.Collection#remove} operation.\n* @property {Boolean} complete - Remove the [model]{@link enyo.Model} from the\n*\t[store]{@link enyo.Collection#store} as well as the collection.\n* @property {Boolean} destroy - [Destroy]{@link enyo.Model#destroy} models\n*\tthat are removed from the collection.\n*/\n\n/**\n* The configurable options for [fetch()]{@link enyo.Collection#fetch},\n* [commit()]{@link enyo.Collection#commit}, and [destroy()]{@link enyo.Collection#destroy}.\n*\n* @typedef {enyo.Collection~Options} enyo.Collection~ActionOptions\n* @property {enyo.Collection~Success} success - The callback executed upon successful\n*\tcompletion.\n* @property {enyo.Collection~Error} error - The callback executed upon a failed attempt.\n*/\n\n/**\n* @callback enyo.Collection~Success\n* @param {enyo.Collection} collection - The [collection]{@link enyo.Collection}\n* that is returning successfully.\n* @param {enyo.Collection~ActionOptions} - opts The original options passed to the action method\n*\tthat is returning successfully.\n* @param {*} - res The result, if any, returned by the [source]{@link enyo.Source} that\n*\texecuted it.\n* @param {String} source - The name of the [source]{@link enyo.Collection#source} that has\n*\treturned successfully.\n*/\n\n/**\n* @callback enyo.Collection~Error\n* @param {enyo.Collection} collection - The [collection]{@link enyo.Collection}\n* that is returning an error.\n* @param {String} action - The name of the action that failed, one of `'FETCHING'`,\n*\t`'COMMITTING'`, or `'DESTROYING'`.\n* @param {enyo.Collection~ActionOptions} opts - The original options passed to the\n*\taction method that is returning an error.\n* @param {*} res - The result, if any, returned by the [source]{@link enyo.Source}\n*\tthat executed it.\n* @param {String} source - The name of the [source]{@link enyo.Collection#source}\n*\tthat has returned an error.\n*/\n\n/**\n* A method used to compare two elements in an {@link enyo.Collection}. Should be\n* implemented like callbacks used with [Array.sort()]{@glossary Array.sort}.\n*\n* @see {@glossary Array.sort}\n* @see enyo.Collection.sort\n* @see enyo.Collection.comparator\n* @callback enyo.Collection~Comparator\n* @param {enyo.Model} a - The first [model]{@link enyo.Model} to compare.\n* @param {enyo.Model} b - The second model to compare.\n* @returns {Number} `-1` if `a` should have the lower index, `0` if they are the same,\n* or `1` if `b` should have the lower index.\n*/\n\n/**\n* An array-like structure designed to store instances of {@link enyo.Model}.\n* \n* @class enyo.Collection\n* @extends enyo.Component\n* @mixes enyo.StateSupport\n* @mixes enyo.EventEmitter\n* @public\n*/\nvar Collection = module.exports = kind(\n\t/** @lends enyo.Collection.prototype */ {\n\t\n\tname: 'enyo.Collection',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: BaseCollection,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* Used by various [sources]{@link enyo.Collection#source} as part of the\n\t* [URI]{@glossary URI} from which they may be [fetched]{@link enyo.Collection#fetch},\n\t* [committed]{@link enyo.Collection#commit}, or [destroyed]{@link enyo.Collection#destroy}.\n\t* Some sources may use this property in other ways.\n\t*\n\t* @see enyo.Collection.getUrl\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\turl: '',\n\t\n\t/**\n\t* Implement this method to be used by [sources]{@link enyo.Model#source} to\n\t* dynamically derive the [URI]{@glossary URI} from which they may be\n\t* [fetched]{@link enyo.Collection#fetch}, [committed]{@link enyo.Collection#commit},\n\t* or [destroyed]{@link enyo.Collection#destroy}. Some\n\t* [sources]{@link enyo.Collection#source} may use this property in other ways.\n\t* Note that if this method is implemented, the [url]{@link enyo.Collection#url}\n\t* property will not be used.\n\t*\n\t* @see enyo.Collection.url\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {Function}\n\t* @default null\n\t* @virtual\n\t* @public\n\t*/\n\tgetUrl: null,\n\t\n\t/**\n\t* The [kind]{@glossary kind) of {@link enyo.Model} that this\n\t* [collection]{@link enyo.Collection} will contain. This is important to set properly so\n\t* that when [fetching]{@link enyo.Collection#fetch}, the returned data will be instanced\n\t* as the correct model [subkind]{@glossary subkind}.\n\t* \n\t* @type {(enyo.Model|String)}\n\t* @default enyo.Model\n\t* @public\n\t*/\n\tmodel: Model,\n\t\n\t/**\n\t* A special type of [array]{@glossary Array} used internally by\n\t* {@link enyo.Collection}. The array should not be modified directly, nor\n\t* should the property be set directly. It is used as a container by the\n\t* collection. If [set]{@link enyo.Collection#set} directly, it will\n\t* [emit]{@link enyo.EventEmitter.emit} a [reset]{@link enyo.Collection#reset}\n\t* event.\n\t*\n\t* @see enyo.Collection.modelsChanged\n\t* @type enyo.ModelList\n\t* @default null\n\t* @readonly\n\t* @protected\n\t*/\n\tmodels: null,\n\t\n\t/**\n\t* The current [state]{@link enyo.States} of the [collection]{@link enyo.Collection}.\n\t* This value changes automatically and may be observed for more complex state\n\t* monitoring. The default value is [READY]{@link enyo~States.READY}.\n\t* (And let's try {@link enyo~States#READY} while we're at it.)\n\t* @see enyo.States\n\t* @see enyo.StateSupport\n\t* @type enyo.States\n\t* @default enyo.States.READY\n\t* @readonly\n\t* @public\n\t*/\n\tstatus: States.READY,\n\t\n\t/**\n\t* The configurable default [options]{@link enyo.Collection~Options}. These values will be\n\t* used to modify the behavior of the [collection]{@link enyo.Collection} unless additional\n\t* options are passed into the methods that use them. When modifying these values in a\n\t* [subkind]{@glossary subkind} of {@link enyo.Collection}, they will be merged with\n\t* existing values.\n\t* \n\t* @type {enyo.Collection~Options}\n\t* @public\n\t*/\n\toptions: {\n\t\tmerge: true,\n\t\tsilent: false,\n\t\tpurge: false,\n\t\tparse: false,\n\t\tcreate: true,\n\t\tfind: true,\n\t\tsort: false,\n\t\tcommit: false,\n\t\tdestroy: false,\n\t\tcomplete: false,\n\t\tfetch: false,\n\t\tmodelEvents: true\n\t},\n\t\n\t/**\n\t* Modifies the structure of data so that it can be used by the\n\t* [add()]{@link enyo.Collection#add} method. This method will only be used\n\t* during initialization or after a successful [fetch]{@link enyo.Collection#fetch}\n\t* if the [parse]{@link enyo.Collection~Options.parse} flag is set to `true`.\n\t* It may be used for simple remapping, renaming, or complex restructuring of\n\t* data coming from a [source]{@link enyo.Collection#source} that requires\n\t* modification before it can be added to the [collection]{@link enyo.Collection}.\n\t* This is a virtual method and must be implemented.\n\t* \n\t* @param {*} data - The incoming data passed to the\n\t*\t[constructor]{@link enyo.Collection#constructor} or returned by a successful\n\t*\t[fetch]{@link enyo.Collection#fetch}.\n\t* @returns {Array} The properly formatted data to be accepted by the\n\t*\t[add()]{@link enyo.Collection#add} method.\n\t* @virtual\n\t* @public\n\t*/\n\tparse: function (data) {\n\t\treturn data;\n\t},\n\t\n\t/**\n\t* Adds data to the [collection]{@link enyo.Collection}. This method can add an\n\t* individual [model]{@link enyo.Model} or an [array]{@glossary Array} of models.\n\t* It can splice them into the dataset at a designated index or remove models\n\t* from the existing dataset that are not included in the new one.\n\t* See {@link enyo.Collection~AddOptions} for detailed information on the\n\t* configuration options available for this method. This method is heavily\n\t* optimized for batch operations on arrays of models. For better performance,\n\t* ensure that loops do not consecutively call this method but instead\n\t* build an array to pass as the first parameter.\n\t* \n\t* @fires enyo.Collection#add\n\t* @param {(Object|Object[]|enyo.Model|enyo.Model[])} models The data to add to the\n\t*\t{@link enyo.Collection} that can be a [hash]{@glossary Object}, an array of\n\t*\thashes, an {@link enyo.Model} instance, or and array of `enyo.Model` instances.\n\t* Note that if the [parse]{@link enyo.Collection#options#parse} configuration\n\t* option is `true`, it will use the returned value as this parameter.\n\t* @param {enyo.Collection~AddOptions} [opts] - The configuration options that modify\n\t*\tthe behavior of this method. The default values will be merged with these options\n\t* before evaluating.\n\t* @returns {enyo.Model[]} The models that were added, if any.\n\t* @public\n\t*/\n\tadd: function (models, opts) {\n\t\tvar loc = this.models\n\t\t\t, len = this.length\n\t\t\t, ctor = this.model\n\t\t\t, options = this.options\n\t\t\t, pkey = ctor.prototype.primaryKey\n\t\t\t, idx = len\n\t\t\t, removedBeforeIdx = 0\n\t\t\t, added, keep, removed, model, attrs, found, id;\n\t\t\t\n\t\t// for backwards compatibility with earlier api standards we allow the\n\t\t// second paramter to be the index and third param options when\n\t\t// necessary\n\t\t!isNaN(opts) && (idx = opts);\n\t\targuments.length > 2 && (opts = arguments[2]);\n\t\t\n\t\t// normalize options so we have values\n\t\topts = opts? utils.mixin({}, [options, opts]): options;\n\t\t\n\t\t// our flags\n\t\tvar merge = opts.merge\n\t\t\t, purge = opts.purge\n\t\t\t, silent = opts.silent\n\t\t\t, parse = opts.parse\n\t\t\t, find = opts.find\n\t\t\t, sort = opts.sort\n\t\t\t, commit = opts.commit\n\t\t\t, create = opts.create !== false\n\t\t\t, modelOpts = opts.modelOptions\n\t\t\t, index = opts.index;\n\t\t\t\n\t\tidx = !isNaN(index) ? Math.max(0, Math.min(len, index)) : idx;\n\n\t\t/*jshint -W018 */\n\t\tsort && !(typeof sort == 'function') && (sort = this.comparator);\n\t\t/*jshint +W018 */\n\t\t\n\t\t// for a special case purge to remove records that aren't in the current\n\t\t// set being added\n\t\t\n\t\tif (parse) models = this.parse(models);\n\t\t\t\n\t\t// we treat all additions as an array of additions\n\t\t!(models instanceof Array) && (models = [models]);\n\t\t\n\t\tfor (var i=0, end=models.length; i<end; ++i) {\n\t\t\tmodel = models[i];\n\t\t\tattrs = null;\n\t\t\t\n\t\t\tif (!model && isNaN(model)) continue;\n\t\t\t\n\t\t\t// first determine if the model is an instance of model since\n\t\t\t// everything else hinges on this\n\t\t\tif (!(model instanceof Model)) {\n\t\t\t\t// we need to determine how to handle this\n\t\t\t\tattrs = model;\n\t\t\t}\n\t\t\t\n\t\t\tif (typeof attrs == 'string' || typeof attrs == 'number') {\n\t\t\t\tid = attrs;\n\t\t\t\tattrs = {};\n\t\t\t\tattrs[pkey] = id;\n\t\t\t} else id = attrs? attrs[pkey]: model;\n\t\t\t\t\n\t\t\t\n\t\t\t// see if we have an existing entry for this model/hash\n\t\t\tif (find) found = loc.has(id);\n\t\t\t\n\t\t\t// if it already existed...\n\t\t\tif (found) {\n\t\t\t\t\n\t\t\t\t// we need to ensure we've resolved the model (if necessary)\n\t\t\t\tfound = loc.resolve(id);\n\t\t\t\t\n\t\t\t\tif (merge) {\n\t\t\t\t\tattrs || (attrs = model.attributes);\n\t\t\t\t\tfound.set(attrs, opts);\n\t\t\t\t}\n\t\t\t\t// with the purge flag we endeavor on the expensive track of removing\n\t\t\t\t// those models currently in the collection that aren't in the incoming\n\t\t\t\t// dataset and aren't being created\n\t\t\t\tif (purge) {\n\t\t\t\t\tkeep || (keep = {length: 0});\n\t\t\t\t\tkeep[found.euid] = model;\n\t\t\t\t\tkeep.length++;\n\t\t\t\t}\n\t\t\t} else if (attrs && find && (found = this.store.resolve(ctor, id))) {\n\t\t\t\t// in this case we were asked to search our store for an existing record\n\t\t\t\t// and we found one but we didn't previously have it so we are technically\n\t\t\t\t// adding it\n\t\t\t\t// @NOTE: Setting the _find_ option always assumes _merge_\n\t\t\t\tattrs || (attrs = model.attributes);\n\t\t\t\tparse && (attrs = found.parse(attrs));\n\t\t\t\tadded || (added = []);\n\t\t\t\tadded.push(found);\n\t\t\t\tthis.prepareModel(found, opts);\n\t\t\t\tmerge && found.set(attrs, opts);\n\t\t\t} else if (!attrs) {\n\t\t\t\tadded || (added = []);\n\t\t\t\tadded.push(model);\n\t\t\t\tthis.prepareModel(model);\n\t\t\t} else if (create) {\n\t\t\t\tmodel = this.prepareModel(attrs || model, modelOpts);\n\t\t\t\tadded || (added = []);\n\t\t\t\tadded.push(model);\n\t\t\t\t\n\t\t\t\t// with the purge flag we endeavor on the expensive track of removing\n\t\t\t\t// those models currently in the collection that aren't in the incoming\n\t\t\t\t// dataset and aren't being created\n\t\t\t\tif (purge) {\n\t\t\t\t\tkeep || (keep = {length: 0});\n\t\t\t\t\tkeep[model.euid] = model;\n\t\t\t\t\tkeep.length++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// here we process those models to be removed if purge was true\n\t\t// the other guard is just in case we actually get to keep everything\n\t\t// so we don't do this unnecessary pass\n\t\tif (purge && (keep && keep.length)) {\n\t\t\tremoved || (removed = []);\n\t\t\tkeep || (keep = {});\n\t\t\tfor (i=0; i<len; ++i) {\n\t\t\t\tif (!keep[(model = loc[i]).euid]) {\n\t\t\t\t\tremoved.push(model);\n\t\t\t\t\tif (i < idx) removedBeforeIdx++;\n\t\t\t\t}\n\t\t\t} \n\t\t\t// if we removed any we process that now\n\t\t\tremoved.length && this.remove(removed, opts);\n\t\t\tidx = idx - removedBeforeIdx;\n\t\t}\n\t\t\n\t\t// added && loc.stopNotifications().add(added, idx).startNotifications();\n\t\tif (added) {\n\t\t\tloc.add(added, idx);\n\t\t\tsort && this.sort(sort, {silent: true});\n\t\t\t\n\t\t\t// we batch this operation to make use of its ~efficient array operations\n\t\t\tthis.store.add(added); \n\t\t}\n\t\tthis.length = loc.length;\n\t\t\n\t\t\n\t\tif (!silent) {\n\t\t\t// notify observers of the length change\n\t\t\tlen != this.length && this.notify('length', len, this.length);\n\t\t\t// notify listeners of the addition of records\n\t\t\tif (added) {\n\t\t\t\tthis.emit('add', {models: added, collection: this, index: idx});\n\t\t\t}\n\t\t}\n\t\t\n\t\t// note that if commit is set but this was called from a successful fetch this will be\n\t\t// a nop (as intended)\n\t\tcommit && added && this.commit(opts);\n\t\t\n\t\treturn added || [];\n\t},\n\t\n\t/**\n\t* Removes data from the [collection]{@link enyo.Collection}. It can take a\n\t* [model]{@link enyo.Model} or an [array]{@glossary Array} of models.\n\t* If any of the instances are present in the collection, they will be\n\t* removed in the order in which they are encountered. Emits the\n\t* [remove]{@link enyo.Collection#remove} event if any models were found and\n\t* removed from the collection (and the `silent` option is not `true`).\n\t* \n\t* @fires enyo.Collection#remove\n\t* @param {(enyo.Model|enyo.Model[])} models The [models]{@link enyo.Model} to remove\t\t\n\t*\tif they exist in the [collection]{@link enyo.Collection}.\n\t* @param {enyo.Collection~RemoveOptions} [opts] - The configuration options that modify\n\t*\tthe behavior of this method.\n\t* @returns {enyo.Model[]} The models that were removed, if any.\n\t* @public\n\t*/\n\tremove: function (models, opts) {\n\t\tvar loc = this.models\n\t\t\t, len = loc.length\n\t\t\t, options = this.options\n\t\t\t, removed, model;\n\t\t\n\t\t// normalize options so we have values\n\t\topts = opts? utils.mixin({}, [options, opts]): options;\n\t\t\n\t\t// our flags\n\t\tvar silent = opts.silent\n\t\t\t, destroy = opts.destroy\n\t\t\t, complete = opts.complete\n\t\t\t, commit = opts.commit;\n\t\t\n\t\t// we treat all additions as an array of additions\n\t\t!(models instanceof Array) && (models = [models]);\n\t\t\n\t\tremoved = loc.remove(models);\n\t\t\n\t\tif (removed.length) {\n\t\t\t\n\t\t\t// ensure that we can batch remove from the store\n\t\t\topts.batching = true;\n\t\t\t\n\t\t\tfor (var i=0, end=removed.length; i<end; ++i) {\n\t\t\t\tmodel = removed[i];\n\t\t\t\t\n\t\t\t\t// it is possible but highly, highly unlikely that this would have been set\n\t\t\t\t// to false by default and true at runtime...so we take our chances for the\n\t\t\t\t// small performance gain in those situations where it was defaulted to false\n\t\t\t\tif (options.modelEvents) model.off('*', this._modelEvent, this);\n\t\t\t\tif (destroy) model.destroy(opts);\n\t\t\t}\n\t\t\t\n\t\t\t// if complete or destroy was set we remove them from the store (batched op)\n\t\t\tif (complete || destroy) this.store.remove(removed);\n\t\t}\n\t\t\n\t\tthis.length = loc.length;\n\t\t\n\t\tif (!silent) {\n\t\t\tlen != this.length && this.notify('length', len, this.length);\n\t\t\tif (removed.length) {\n\t\t\t\tthis.emit('remove', {models: removed, collection: this});\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if this is called from an overloaded method (such as fetch or commit) or some \n\t\t// success callback this will be a nop (as intended)\n\t\tcommit && removed.length && this.commit();\n\t\t\n\t\treturn removed;\n\t},\n\t\n\t/**\n\t* Retrieves a [model]{@link enyo.Model} for the provided index.\n\t* \n\t* @param {Number} idx - The index to return from the [collection]{@link enyo.Collection}.\n\t* @returns {(enyo.Model|undefined)} The [model]{@link enyo.Model} at the given index or\n\t*\t`undefined` if it cannot be found.\n\t* @public\n\t*/\n\tat: function (idx) {\n\t\treturn this.models[idx];\n\t},\n\t\n\t/**\n\t* Returns the JSON serializable [array]{@glossary Array} of [models]{@link enyo.Model}\n\t* according to their own [raw()]{@link enyo.Model#raw} output.\n\t*\n\t* @returns {enyo.Model[]} The [models]{@link enyo.Model} according to their\n\t*\t[raw()]{@link enyo.Model#raw} output.\n\t* @public\n\t*/\n\traw: function () {\n\t\treturn this.models.map(function (model) {\n\t\t\treturn model.raw();\n\t\t});\n\t},\n\t\n\t/**\n\t* Determines if the specified [model]{@link enyo.Model} is contained by this\n\t* [collection]{@link enyo.Collection}.\n\t*\n\t* @param {enyo.Model} model - The [model]{@link enyo.Model} to check.\n\t* @returns {Boolean} Whether or not the model belongs to the\n\t*\t[collection]{@link enyo.Collection}.\n\t* @public\n\t*/\n\thas: function (model) {\n\t\treturn this.models.has(model);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.forEach}\n\t* @public\n\t*/\n\tforEach: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().forEach(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.filter}\n\t* @public\n\t*/\n\tfilter: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().filter(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.find}\n\t* @public\n\t*/\n\tfind: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().find(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.map}\n\t* @public\n\t*/\n\tmap: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().map(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.indexOf}\n\t* @public\n\t*/\n\tindexOf: function (model, offset) {\n\t\treturn this.models.indexOf(model, offset);\n\t},\n\t\n\t/**\n\t* Removes all [models]{@link enyo.Model} from the [collection]{@link enyo.Collection}.\n\t* Optionally, a model (or models) may be provided to replace the removed models.\n\t* If this operation is not `silent`, it will emit a `reset` event. Returns the\n\t* removed models, but be aware that, if the `destroy` configuration option is set,\n\t* the returned models will have limited usefulness.\n\t* \n\t* @param {(enyo.Model|enyo.Model[])} [models] The [model or models]{@link enyo.Model}\n\t*\tto use as a replacement for the current set of models in the\n\t*\t{@link enyo.Collection}.\n\t* @param {enyo.Collection~Options} [opts] - The options that will modify the behavior\n\t*\tof this method.\n\t* @returns {enyo.Model[]} The models that were removed from the collection.\n\t* @public\n\t*/\n\tempty: function (models, opts) {\n\t\tvar silent,\n\t\t\tremoved,\n\t\t\tlen = this.length;\n\t\t\n\t\tif (models && !(models instanceof Array || models instanceof Model)) {\n\t\t\t// there were no models but instead some options only\n\t\t\topts = models;\n\t\t\tmodels = null;\n\t\t}\n\t\t\n\t\topts = opts || {};\n\t\t\n\t\t// just in case the entire thing was supposed to be silent\n\t\tsilent = opts.silent;\n\t\topts.silent = true;\n\t\t\n\t\tremoved = this.remove(this.models, opts);\n\t\t\n\t\t// if there are models we are going to propagate the remove quietly and instead issue\n\t\t// a single reset with the new content\n\t\tif (models) this.add(models, opts);\n\t\t\n\t\t// now if the entire thing wasn't supposed to have been done silently we issue\n\t\t// a reset\n\t\tif (!silent) {\n\t\t\tif (len != this.length) this.notify('length', len, this.length);\n\t\t\tthis.emit('reset', {models: this.models.copy(), collection: this});\n\t\t}\n\t\t\n\t\treturn removed;\n\t},\n\t\n\t/**\n\t* Returns the [JSON]{@glossary JSON} serializable [raw()]{@link enyo.Collection#raw}\n\t* output of the [collection]{@link enyo.Collection}. Will automatically be executed by\n\t* [JSON.parse()]{@glossary JSON.parse}.\n\t*\n\t* @see enyo.Collection.raw\n\t* @returns {Object} The return value of [raw()]{@link enyo.Collection#raw}.\n\t* @public\n\t*/\n\ttoJSON: function () {\n\t\treturn this.raw();\n\t},\n\t\n\t/**\n\t* The default behavior of this method is the same as {@glossary Array.sort}. If the\n\t* [function]{@glossary Function} parameter is omitted, it will attempt to use the\n\t* [comparator]{@link enyo.Collection#comparator} (if any) from the\n\t* [collection]{@link enyo.Collection}. Note that the collection is sorted in-place\n\t* and returns a reference to itself. The collection\n\t* [emits]{@link enyo.EventEmitter.emit} the [sort]{@link enyo.Collection#sort}\n\t* event.\n\t*\n\t* @fires enyo.Collection#sort\n\t* @see {@glossary Array.sort}\n\t* @param {enyo.Collection~Comparator} [fn] - The [comparator]{@link enyo.Collection#comparator}\n\t* method.\n\t* @param {enyo.Collection~Options} [opts] - The configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsort: function (fn, opts) {\n\t\tif (fn || this.comparator) {\n\t\t\tvar options = {silent: false}, silent;\n\t\t\n\t\t\topts = opts? utils.mixin({}, [options, opts]): options;\n\t\t\tsilent = opts.silent;\n\t\t\tthis.models.sort(fn || this.comparator);\n\t\t\t!silent && this.emit('sort', {\n\t\t\t\tcomparator: fn || this.comparator,\n\t\t\t\tmodels: this.models.copy(),\n\t\t\t\tcollection: this\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Commits the [collection]{@link enyo.Collection} to a\n\t* [source]{@link enyo.Collection#source} or sources. An {@link enyo.Collection}\n\t* cannot be committed if it is in an [error]{@link enyo.States.ERROR}\n\t* ({@link enyo.StateSupport.isError}) or [busy]{@link enyo.States.BUSY}\n\t* ({@link enyo.StateSupport.isBusy}) [state]{@link enyo.Model#status}. While\n\t* executing, it will add the [COMMITTING]{@link enyo.States.COMMITTING} flag\n\t* to the collection's [status]{@link enyo.Collection#status}. Once it has\n\t* completed execution, it will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Collection.committed\n\t* @see enyo.Collection.status\n\t* @param {enyo.Collection~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tcommit: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\t\t\n\t\t// if the current status is not one of the error states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\t\t\t\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\t\t\t\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(enyo.sources);\n\t\t\t}\n\t\t\t\t\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.committed(opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('COMMITTING', opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\t// set the state\n\t\t\tthis.set('status', (this.status | States.COMMITTING) & ~States.READY);\n\t\t\t\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('commit', this, options);\n\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Fetches the [collection]{@link enyo.Collection} from a\n\t* [source]{@link enyo.Collection#source} or sources. An {@link enyo.Collection}\n\t* cannot be fetched if it is in an [error]{@link enyo.States.ERROR}\n\t* ({@link enyo.StateSupport.isError}) or [busy]{@link enyo.States.BUSY}\n\t* ({@link enyo.StateSupport.isBusy}) [state]{@link enyo.Model#status}. While\n\t* executing, it will add the [FETCHING]{@link enyo.States.FETCHING} flag to\n\t* the collection's [status]{@link enyo.Collection#status}. Once it has\n\t* completed execution, it will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Collection.fetched\n\t* @see enyo.Collection.status\n\t* @param {enyo.Collection~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tfetch: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\t\t\t\n\t\t// if the current status is not one of the error states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\t\t\t\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\t\t\t\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(enyo.sources);\n\t\t\t}\n\t\t\t\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.fetched(opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('FETCHING', opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\t// set the state\n\t\t\tthis.set('status', (this.status | States.FETCHING) & ~States.READY);\n\t\t\t\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('fetch', this, options);\n\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Destroys the [collection]{@link enyo.Collection}. By default, the\n\t* collection will only be [destroyed]{@glossary destroy} in the client. To\n\t* execute with a [source]{@link enyo.Collection#source} or sources, the\n\t* [commit default option]{@link enyo.Collection#options} must be `true` or a\n\t* `source` property must be explicitly provided in the `opts` parameter. A\n\t* collection cannot be destroyed (using a source) if it is in an\n\t* [error]{@link enyo.States.ERROR} ({@link enyo.StateSupport.isError}) or\n\t* [busy]{@link enyo.States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Collection#status}. While executing, it will add the\n\t* [DESTROYING]{@link enyo.States.DESTROYING} flag to the collection's\n\t* [status]{@link enyo.Collection#status}. Once it has completed execution,\n\t* it will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Collection.status\n\t* @param {enyo.Collection~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @method\n\t* @public\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function (opts) {\n\t\t\tvar options = opts ? utils.mixin({}, [this.options, opts]) : this.options,\n\t\t\t\tit = this,\n\t\t\t\tidx;\n\t\t\t\t\t\t\n\t\t\t// this becomes an (potentially) async operation if we are committing this destroy\n\t\t\t// to a source and its kind of tricky to figure out because there are several ways\n\t\t\t// it could be flagged to do this\n\t\t\t\t\t\t\n\t\t\tif (options.commit || options.source) {\n\t\t\t\t\n\t\t\t\t// if the current status is not one of the error states we can continue\n\t\t\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\t\t\t\t\n\t\t\t\t\t// remap to the originals\n\t\t\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\t\t\t\t\n\t\t\t\t\toptions.success = function (source, res) {\n\t\t\t\t\n\t\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\t\t\t};\n\t\t\t\n\t\t\t\t\toptions.error = function (source, res) {\n\t\t\t\t\n\t\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t// we don't bother setting the error state if we aren't waiting because \n\t\t\t\t\t\t// it will be cleared to DESTROYED and it would be pointless\n\t\t\t\t\t\telse this.errored('DESTROYING', opts, res, source);\n\t\t\t\t\t};\n\t\t\t\t\n\t\t\t\t\tthis.set('status', (this.status | States.DESTROYING) & ~States.READY);\n\t\t\t\n\t\t\t\t\tSource.execute('destroy', this, options);\n\t\t\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\t\t\t\t\n\t\t\t\t// we don't allow the destroy to take place and we don't forcibly break-down\n\t\t\t\t// the collection errantly so there is an opportuniy to resolve the issue\n\t\t\t\t// before we lose access to the collection's content!\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.length && options.destroy) this.empty(options);\n\t\t\t\n\t\t\t// set the final resting state of this collection\n\t\t\tthis.set('status', States.DESTROYED);\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* This is a virtual method that, when provided, will be used for sorting during\n\t* [add()]{@link enyo.Collection#add} when the `sort` flag is `true` or when the\n\t* [sort()]{@link enyo.Collection#sort} method is called without a passed-in\n\t* [function]{@glossary Function} parameter.\n\t*\n\t* @see enyo.Collection~Comparator\n\t* @type {enyo.Collection~Comparator}\n\t* @default null\n\t* @virtual\n\t* @method\n\t* @public\n\t*/\n\tcomparator: null,\n\t\n\t/**\n\t* Used during [add()]{@link enyo.Collection#add} when `create` is `true` and\n\t* the data is a [hash]{@glossary Object}.\n\t*\n\t* @private\n\t*/\n\tprepareModel: function (attrs, opts) {\n\t\tvar Ctor = this.model\n\t\t\t, options = this.options\n\t\t\t, model;\n\t\t\n\t\tattrs instanceof Ctor && (model = attrs);\n\t\tif (!model) {\n\t\t\topts = opts || {};\n\t\t\topts.noAdd = true;\n\t\t\tmodel = new Ctor(attrs, null, opts);\n\t\t}\n\t\t\n\t\tif (options.modelEvents) model.on('*', this._modelEvent, this);\n\t\t\n\t\treturn model;\n\t},\n\t\n\t/**\n\t* When a [commit]{@link enyo.Collection#commit} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that the\n\t* super-method is called. This correctly sets the [status]{@link enyo.Collection#status}\n\t* and, in cases where multiple [sources]{@link enyo.Collection#source} were used, it waits\n\t* until all have responded before clearing the [COMMITTING]{@link enyo.States.COMMITTING}\n\t* flag. If a [success]{@link enyo.Collection~Success} callback was provided, it will be\n\t* called once for each source.\n\t*\n\t* @param {enyo.Collection~ActionOptions} opts - The original options passed to\n\t*\t[commit()]{@link enyo.Collection#commit}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given\n\t* [source]{@link enyo.Collection#source}, if any. This will vary depending\n\t* on the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tcommitted: function (opts, res, source) {\n\t\tvar idx;\n\t\t\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\t\t\n\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\n\t\t// clear the state\n\t\tif (!this._waiting) {\n\t\t\tthis.set('status', (this.status | States.READY) & ~States.COMMITTING);\n\t\t}\n\t},\n\t\n\t/**\n\t* When a [fetch]{@link enyo.Collection#fetch} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that you call the\n\t* super-method. This correctly sets the [status]{@link enyo.Collection#status} and, in\n\t* cases where multiple [sources]{@link enyo.Collection#source} were used, it waits until\n\t* all have responded before clearing the [FETCHING]{@link enyo.States.FETCHING} flag. If\n\t* a [success]{@link enyo.Collection~Success} callback was provided, it will be called\n\t* once for each source.\n\t*\n\t* @param {enyo.Collection~ActionOptions} opts - The original options passed to\n\t*\t[fetch()]{@link enyo.Collection#fetch}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given\n\t* [source]{@link enyo.Collection#source}, if any. This will vary depending\n\t*\ton the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tfetched: function (opts, res, source) {\n\t\tvar idx;\n\t\t\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\t\t\n\t\t// if there is a result we add it to the collection passing it any per-fetch options\n\t\t// that will override the defaults (e.g. parse) we don't do that here as it will\n\t\t// be done in the add method -- also note we reassign the result to whatever was\n\t\t// actually added and pass that to any other success callback if there is one\n\t\tif (res) res = this.add(res, opts);\n\t\t\n\t\t// now look for an additional success callback\n\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\n\t\t// clear the state\n\t\tif (!this._waiting) {\n\t\t\tthis.set('status', (this.status | States.READY) & ~States.FETCHING);\n\t\t}\n\t},\n\t\n\t/**\n\t* If an error is encountered while [fetching]{@link enyo.Collection#fetch},\n\t* [committing]{@link enyo.Collection#commit}, or [destroying]{@link enyo.Collection#destroy}\n\t* the [collection]{@link enyo.Collection}, this method will be called. By\n\t* default, it updates the collection's [status]{@link enyo.Collection#status}\n\t* property and then checks to see if there is a provided\n\t* [error handler]{@link enyo.Collection~ErrorCallback}. If the error handler\n\t* exists, it will be called.\n\t* \n\t* @param {String} action - The name of the action that failed,\n\t* one of `'FETCHING'` or `'COMMITTING'`.\n\t* @param {enyo.Collection~ActionOptions} opts - The options hash originally\n\t* passed along with the original action.\n\t* @param {*} [res] - The result of the requested `action`; varies depending on the\n\t*\trequested [source]{@link enyo.Collection#source}.\n\t* @param {String} source - The name of the source that has returned an error.\n\t* @public\n\t*/\n\terrored: function (action, opts, res, source) {\n\t\tvar stat;\n\t\t\n\t\t// if the error action is a status number then we don't need to update it otherwise\n\t\t// we set it to the known state value\n\t\tif (typeof action == 'string') {\n\t\t\t\n\t\t\t// all built-in errors will pass this as their values are > 0 but we go ahead and\n\t\t\t// ensure that no developer used the 0x00 for an error code\n\t\t\tstat = STATES['ERROR_' + action];\n\t\t} else stat = action;\n\t\t\n\t\tif (isNaN(stat) || !(stat & States.ERROR)) stat = States.ERROR_UNKNOWN;\n\t\t\n\t\t// if it has changed give observers the opportunity to respond\n\t\tthis.set('status', (this.status | stat) & ~States.READY);\n\t\t\n\t\t// we need to check to see if there is an options handler for this error\n\t\tif (opts && opts.error) opts.error(this, action, opts, res, source);\n\t},\n\t\n\t/**\n\t* Overloaded version of the method to call [set()]{@link enyo.Collection#set}\n\t* instead of simply assigning the value. This allows it to\n\t* [notify observers]{@link enyo.ObserverSupport.notify} and thus update\n\t* [bindings]{@link enyo.BindingSupport.bindings} as well.\n\t*\n\t* @see enyo.StateSupport.clearError\n\t* @public\n\t*/\n\tclearError: function () {\n\t\treturn this.set('status', States.READY);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_modelEvent: function (model, e) {\n\t\tswitch (e) {\n\t\tcase 'change':\n\t\t\tthis.emit('change', {model: model});\n\t\t\tbreak;\n\t\tcase 'destroy':\n\t\t\tthis.remove(model);\n\t\t\tbreak;\n\t\t}\n\t},\n\t\n\t/**\n\t* Responds to changes to the [models]{@link enyo.Collection#models} property.\n\t*\n\t* @see enyo.Collection.models\n\t* @fires enyo.Collection#reset\n\t* @type {enyo.ObserverSupport~Observer}\n\t* @public\n\t*/\n\tmodelsChanged: function (was, is, prop) {\n\t\tvar models = this.models.copy(),\n\t\t\tlen = models.length;\n\t\t\n\t\tif (len != this.length) this.set('length', len);\n\t\t\n\t\tthis.emit('reset', {models: models, collection: this});\n\t},\n\t\n\t/**\n\t* Initializes the [collection]{@link enyo.Collection}.\n\t*\n\t* @param {(Object|Object[]|enyo.Model[])} [recs] May be an [array]{@glossary Array}\n\t*\tof either [models]{@link enyo.Model} or [hashes]{@glossary Object} used to\n\t* initialize the [collection]{@link enyo.Collection}, or an [object]{@glossary Object}\n\t*\tequivalent to the `props` parameter.\n\t* @param {Object} [props] - A hash of properties to apply directly to the\n\t* collection.\n\t* @param {Object} [opts] - A hash.\n\t* @method\n\t* @public\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function (recs, props, opts) {\n\t\t\t// opts = opts? (this.options = enyo.mixin({}, [this.options, opts])): this.options;\n\t\t\t\n\t\t\t// if properties were passed in but not a records array\n\t\t\tprops = recs && !(recs instanceof Array)? recs: props;\n\t\t\tif (props === recs) recs = null;\n\t\t\t// initialize our core records\n\t\t\t// this.models = this.models || new ModelList();\n\t\t\t!this.models && (this.set('models', new ModelList()));\n\t\t\t\n\t\t\t// this is backwards compatibility\n\t\t\tif (props && props.records) {\n\t\t\t\trecs = recs? recs.concat(props.records): props.records.slice();\n\t\t\t\tdelete props.records;\n\t\t\t}\n\t\t\t\n\t\t\tif (props && props.models) {\n\t\t\t\trecs = recs? recs.concat(props.models): props.models.slice();\n\t\t\t\tdelete props.models;\n\t\t\t}\n\t\t\t\n\t\t\tif (props && props.options) {\n\t\t\t\tthis.options = utils.mixin({}, [this.options, props.options]);\n\t\t\t\tdelete props.options;\n\t\t\t}\n\t\t\t\n\t\t\topts = opts? utils.mixin({}, [this.options, opts]): this.options;\n\t\t\t\n\t\t\t// @TODO: For now, while there is only one property we manually check for it\n\t\t\t// if more options arrise that should be configurable this way it may need to\n\t\t\t// be modified\n\t\t\topts.fetch && (this.options.fetch = opts.fetch);\n\t\t\t\n\t\t\tthis.length = this.models.length;\n\t\t\tthis.euid = utils.uid('c');\n\t\t\t\n\t\t\tsup.call(this, props);\n\t\t\t\n\t\t\ttypeof this.model == 'string' && (this.model = kind.constructorForKind(this.model));\n\t\t\tthis.store = this.store || Store;\n\t\t\trecs && recs.length && this.add(recs, opts);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\t// automatically attempt a fetch after initialization is complete\n\t\t\tif (this.options.fetch) this.fetch();\n\t\t};\n\t})\n\t\n});\n\n/**\n* @name enyo.Collection.concat\n* @static\n* @private\n*/\nCollection.concat = function (ctor, props) {\n\tvar proto = ctor.prototype || ctor;\n\t\n\tif (props.options) {\n\t\tproto.options = utils.mixin({}, [proto.options, props.options]);\n\t\tdelete props.options;\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\nvar\n\tComponent = require('./Component'),\n\tMultipleDispatchSupport = require('./MultipleDispatchSupport');\n\n/**\n* {@link enyo.MultipleDispatchComponent} is a purely abstract [kind]\n* {@glossary kind} that simply provides a common ancestor for\n* {@link enyo.Component} [objects]{@glossary Object} that need \n* the [MultipleDispatchSupport]{@link enyo.MultipleDispatchSupport}\n* [mixin]{@glossary mixin}.\n*\n* @class enyo.MultipleDispatchComponent\n* @extends enyo.Component\n* @mixes enyo.MultipleDispatchSupport\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.MultipleDispatchComponent */ {\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MultipleDispatchSupport]\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tplatform = require('./platform'),\n\tanimation = require('./animation');\n\nvar\n\tComponent = require('./Component');\n\n/**\n* Fires when a scrolling action starts.\n*\n* @event enyo.ScrollMath#onScrollStart\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @private\n*/\n\n/**\n* Fires while a scrolling action is in progress.\n*\n* @event enyo.ScrollMath#onScroll\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @private\n*/\n\n/**\n* Fires when a scrolling action stops.\n*\n* @event enyo.ScrollMath#onScrollStop\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @private\n*/\n\n/**\n* {@link enyo.ScrollMath} implements a scrolling dynamics simulation. It is a\n* helper [kind]{@glossary kind} used by other [scroller]{@link enyo.Scroller}\n* kinds, such as {@link enyo.TouchScrollStrategy}.\n* \n* `enyo.ScrollMath` is not typically created in application code.\n*\n* @class enyo.ScrollMath\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ScrollMath.prototype */ {\n\n\tname: 'enyo.ScrollMath',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.ScrollMath.prototype */ {\n\n\t\t/** \n\t\t* Set to `true` to enable vertical scrolling.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @private\n\t\t*/\n\t\tvertical: true,\n\n\t\t/** \n\t\t* Set to `true` to enable horizontal scrolling.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @private\n\t\t*/\n\t\thorizontal: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonScrollStart: '',\n\t\tonScroll: '',\n\t\tonScrollStop: '',\n\t\tonStabilize: ''\n\t},\n\n\t/**\n\t* \"Spring\" damping returns the scroll position to a value inside the boundaries. Lower \n\t* values provide faster snapback.\n\t*\n\t* @private\n\t*/\n\tkSpringDamping: 0.93,\n\n\t/** \n\t* \"Drag\" damping resists dragging the scroll position beyond the boundaries. Lower values \n\t* provide more resistance.\n\t*\n\t* @private\n\t*/\n\tkDragDamping: 0.5,\n\t\n\t/** \n\t* \"Friction\" damping reduces momentum over time. Lower values provide more friction.\n\t*\n\t* @private\n\t*/\n\tkFrictionDamping: 0.97,\n\n\t/** \n\t* Additional \"friction\" damping applied when momentum carries the viewport into overscroll. \n\t* Lower values provide more friction.\n\t*\n\t* @private\n\t*/\n\tkSnapFriction: 0.9,\n\t\n\t/** \n\t* Scalar applied to `flick` event velocity.\n\t*\n\t* @private\n\t*/\n\tkFlickScalar: 15,\n\n\t/** \n\t* Limits the maximum allowable flick. On Android > 2, we limit this to prevent compositing \n\t* artifacts.\n\t*\n\t* @private\n\t*/\n\tkMaxFlick: platform.android > 2 ? 2 : 1e9,\n\t\n\t/** \n\t* The value used in [friction()]{@link enyo.ScrollMath#friction} to determine if the delta \n\t* (e.g., y - y0) is close enough to zero to consider as zero.\n\t*\n\t* @private\n\t*/\n\tkFrictionEpsilon: platform.webos >= 4 ? 1e-1 : 1e-2,\n\t\n\t/** \n\t* Top snap boundary, generally `0`.\n\t*\n\t* @private\n\t*/\n\ttopBoundary: 0,\n\t\n\t/** \n\t* Right snap boundary, generally `(viewport width - content width)`.\n\t*\n\t* @private\n\t*/\n\trightBoundary: 0,\n\t\n\t/** \n\t* Bottom snap boundary, generally `(viewport height - content height)`.\n\t*\n\t* @private\n\t*/\n\tbottomBoundary: 0,\n\t\n\t/** \n\t* Left snap boundary, generally `0`.\n\t*\n\t* @private\n\t*/\n\tleftBoundary: 0,\n\t\n\t/** \n\t* Animation time step.\n\t*\n\t* @private\n\t*/\n\tinterval: 20,\n\t\n\t/** \n\t* Flag to enable frame-based animation; if `false`, time-based animation is used.\n\t*\n\t* @private\n\t*/\n\tfixedTime: true,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\tx0: 0,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\tx: 0,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\ty0: 0,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\ty: 0,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Simple Verlet integrator for simulating Newtonian motion.\n\t*\n\t* @private\n\t*/\n\tverlet: function () {\n\t\tvar x = this.x;\n\t\tthis.x += x - this.x0;\n\t\tthis.x0 = x;\n\t\t//\n\t\tvar y = this.y;\n\t\tthis.y += y - this.y0;\n\t\tthis.y0 = y;\n\t},\n\n\t/**\n\t* Boundary damping function. Returns damped `value` based on `coeff` on one side of \n\t* `origin`.\n\t*\n\t* @private\n\t*/\n\tdamping: function (val, origin, coeff, sign) {\n\t\tvar kEpsilon = 0.5;\n\t\t//\n\t\t// this is basically just value *= coeff (generally, coeff < 1)\n\t\t//\n\t\t// 'sign' and the conditional is to force the damping to only occur\n\t\t// on one side of the origin.\n\t\t//\n\t\tvar dv = val - origin;\n\t\t// Force close-to-zero to zero\n\t\tif (Math.abs(dv) < kEpsilon) {\n\t\t\treturn origin;\n\t\t}\n\t\treturn val*sign > origin*sign ? coeff * dv + origin : val;\n\t},\n\n\t/**\n\t* Dual-boundary damping function. Returns damped `value` based on `coeff` when exceeding \n\t* either boundary.\n\t*\n\t* @private\n\t*/\n\tboundaryDamping: function (val, aBoundary, bBoundary, coeff) {\n\t\treturn this.damping(this.damping(val, aBoundary, coeff, 1), bBoundary, coeff, -1);\n\t},\n\n\t/**\n\t* Simulation constraints (spring damping occurs here).\n\t*\n\t* @private\n\t*/\n\tconstrain: function () {\n\t\tvar y = this.boundaryDamping(this.y, this.topBoundary, this.bottomBoundary, this.kSpringDamping);\n\t\tif (y != this.y) {\n\t\t\t// ensure snapping introduces no velocity, add additional friction\n\t\t\tthis.y0 = y - (this.y - this.y0) * this.kSnapFriction;\n\t\t\tthis.y = y;\n\t\t}\n\t\tvar x = this.boundaryDamping(this.x, this.leftBoundary, this.rightBoundary, this.kSpringDamping);\n\t\tif (x != this.x) {\n\t\t\tthis.x0 = x - (this.x - this.x0) * this.kSnapFriction;\n\t\t\tthis.x = x;\n\t\t}\n\t},\n\n\t/**\n\t* The friction function.\n\t*\n\t* @private\n\t*/\n\tfriction: function (ex, ex0, coeff) {\n\t\t// implicit velocity\n\t\tvar dp = this[ex] - this[ex0];\n\t\t// let close-to-zero collapse to zero (i.e. smaller than epsilon is considered zero)\n\t\tvar c = Math.abs(dp) > this.kFrictionEpsilon ? coeff : 0;\n\t\t// reposition using damped velocity\n\t\tthis[ex] = this[ex0] + c * dp;\n\t},\n\n\t/** \n\t* One unit of time for simulation.\n\t*\n\t* @private\n\t*/\n\tframe: 10,\n\t// piece-wise constraint simulation\n\tsimulate: function (t) {\n\t\twhile (t >= this.frame) {\n\t\t\tt -= this.frame;\n\t\t\tif (!this.dragging) {\n\t\t\t\tthis.constrain();\n\t\t\t}\n\t\t\tthis.verlet();\n\t\t\tthis.friction('y', 'y0', this.kFrictionDamping);\n\t\t\tthis.friction('x', 'x0', this.kFrictionDamping);\n\t\t}\n\t\treturn t;\n\t},\n\n\t/**\n\t* @fires enyo.ScrollMath#onScrollStop\n\t* @private\n\t*/\n\tanimate: function () {\n\t\tthis.stop();\n\t\t// time tracking\n\t\tvar t0 = utils.perfNow(), t = 0;\n\t\t// delta tracking\n\t\tvar x0, y0;\n\t\t// animation handler\n\t\tvar fn = this.bindSafely(function() {\n\t\t\t// wall-clock time\n\t\t\tvar t1 = utils.perfNow();\n\t\t\t// schedule next frame\n\t\t\tthis.job = animation.requestAnimationFrame(fn);\n\t\t\t// delta from last wall clock time\n\t\t\tvar dt = t1 - t0;\n\t\t\t// record the time for next delta\n\t\t\tt0 = t1;\n\t\t\t// user drags override animation\n\t\t\tif (this.dragging) {\n\t\t\t\tthis.y0 = this.y = this.uy;\n\t\t\t\tthis.x0 = this.x = this.ux;\n\t\t\t\tthis.endX = this.endY = null;\n\t\t\t}\n\t\t\t// frame-time accumulator\n\t\t\t// min acceptable time is 16ms (60fps)\n\t\t\tt += Math.max(16, dt);\n\t\t\t// prevent snapping to originally desired scroll position if we are in overscroll\n\t\t\tif (this.isInOverScroll()) {\n\t\t\t\tthis.endX = null;\n\t\t\t\tthis.endY = null;\n\t\t\t}\n\t\t\t// alternate fixed-time step strategy:\n\t\t\telse if (this.fixedTime) {\n\t\t\t\tt = this.interval;\n\t\t\t}\n\t\t\t// consume some t in simulation\n\t\t\tt = this.simulate(t);\n\t\t\t// scroll if we have moved, otherwise the animation is stalled and we can stop\n\t\t\tif (y0 != this.y || x0 != this.x) {\n\t\t\t\tthis.scroll();\n\t\t\t} else if (!this.dragging) {\n\t\t\t\t// set final values\n\t\t\t\tif (this.endX != null) {\n\t\t\t\t\tthis.x = this.x0 = this.endX;\n\t\t\t\t}\n\t\t\t\tif (this.endY != null) {\n\t\t\t\t\tthis.y = this.y0 = this.endY;\n\t\t\t\t}\n\n\t\t\t\tthis.stop();\n\t\t\t\tthis.scroll();\n\t\t\t\tthis.doScrollStop();\n\n\t\t\t\tthis.endX = null;\n\t\t\t\tthis.endY = null;\n\t\t\t}\n\t\t\ty0 = this.y;\n\t\t\tx0 = this.x;\n\t\t});\n\t\tthis.job = animation.requestAnimationFrame(fn);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tstart: function () {\n\t\tif (!this.job) {\n\t\t\tthis.doScrollStart();\n\t\t\tthis.animate();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstop: function (fire) {\n\t\tvar job = this.job;\n\t\tif (job) {\n\t\t\tthis.job = animation.cancelRequestAnimationFrame(job);\n\t\t}\n\t\tif (fire) {\n\t\t\tthis.doScrollStop();\n\n\t\t\tthis.endX = undefined;\n\t\t\tthis.endY = undefined;\n\t\t}\n\t},\n\n\t/**\n\t* Adjusts the scroll position to be valid, if necessary (e.g., after the scroll contents\n\t* have changed).\n\t*\n\t* @private\n\t*/\n\tstabilize: function () {\n\t\tvar y = Math.min(this.topBoundary, Math.max(this.bottomBoundary, this.y));\n\t\tvar x = Math.min(this.leftBoundary, Math.max(this.rightBoundary, this.x));\n\t\tif (y != this.y || x != this.x) {\n\t\t\tthis.y = this.y0 = y;\n\t\t\tthis.x = this.x0 = x;\n\t\t\tthis.doStabilize();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstartDrag: function (e) {\n\t\tthis.dragging = true;\n\t\t//\n\t\tthis.my = e.pageY;\n\t\tthis.py = this.uy = this.y;\n\t\t//\n\t\tthis.mx = e.pageX;\n\t\tthis.px = this.ux = this.x;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrag: function (e) {\n\t\tif (this.dragging) {\n\t\t\tvar dy = this.vertical ? e.pageY - this.my : 0;\n\t\t\tthis.uy = dy + this.py;\n\t\t\t// provides resistance against dragging into overscroll\n\t\t\tthis.uy = this.boundaryDamping(this.uy, this.topBoundary, this.bottomBoundary, this.kDragDamping);\n\t\t\t//\n\t\t\tvar dx = this.horizontal ? e.pageX - this.mx : 0;\n\t\t\tthis.ux = dx + this.px;\n\t\t\t// provides resistance against dragging into overscroll\n\t\t\tthis.ux = this.boundaryDamping(this.ux, this.leftBoundary, this.rightBoundary, this.kDragDamping);\n\t\t\t//\n\t\t\tthis.start();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragDrop: function () {\n\t\tif (this.dragging && !window.PalmSystem) {\n\t\t\tvar kSimulatedFlickScalar = 0.5;\n\t\t\tthis.y = this.uy;\n\t\t\tthis.y0 = this.y - (this.y - this.y0) * kSimulatedFlickScalar;\n\t\t\tthis.x = this.ux;\n\t\t\tthis.x0 = this.x - (this.x - this.x0) * kSimulatedFlickScalar;\n\t\t}\n\t\tthis.dragFinish();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragFinish: function () {\n\t\tthis.dragging = false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflick: function (e) {\n\t\tvar v;\n\t\tif (this.vertical) {\n\t\t\tv = e.yVelocity > 0 ? Math.min(this.kMaxFlick, e.yVelocity) : Math.max(-this.kMaxFlick, e.yVelocity);\n\t\t\tthis.y = this.y0 + v * this.kFlickScalar;\n\t\t}\n\t\tif (this.horizontal) {\n\t\t\tv = e.xVelocity > 0 ? Math.min(this.kMaxFlick, e.xVelocity) : Math.max(-this.kMaxFlick, e.xVelocity);\n\t\t\tthis.x = this.x0 + v * this.kFlickScalar;\n\t\t}\n\t\tthis.start();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmousewheel: function (e) {\n\t\tvar dy = this.vertical ? e.wheelDeltaY || (!e.wheelDeltaX ? e.wheelDelta : 0) : 0,\n\t\t\tdx = this.horizontal ? e.wheelDeltaX : 0,\n\t\t\tshouldScroll = false;\n\t\tif ((dy > 0 && this.y < this.topBoundary) || (dy < 0 && this.y > this.bottomBoundary)) {\n\t\t\tthis.y = this.y0 = this.y0 + dy;\n\t\t\tshouldScroll = true;\n\t\t}\n\t\tif ((dx > 0 && this.x < this.leftBoundary) || (dx < 0 && this.x > this.rightBoundary)) {\n\t\t\tthis.x = this.x0 = this.x0 + dx;\n\t\t\tshouldScroll = true;\n\t\t}\n\t\tthis.stop(!shouldScroll);\n\t\tif (shouldScroll) {\n\t\t\tthis.start();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.ScrollMath#onScroll\n\t* @private\n\t*/\n\tscroll: function () {\n\t\tthis.doScroll();\n\t},\n\n\t// NOTE: Yip/Orvell method for determining scroller instantaneous velocity\n\t// FIXME: incorrect if called when scroller is in overscroll region\n\t// because does not account for additional overscroll damping.\n\t\n\t/**\n\t* Animates a scroll to the specified position.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @private\n\t*/\n\tscrollTo: function (x, y) {\n\t\tif (x == this.x && y == this.y) return;\n\t\tif (y !== null) {\n\t\t\tthis.endY = -y;\n\t\t\tthis.y = this.y0 - (y + this.y0) * (1 - this.kFrictionDamping);\n\t\t}\n\t\tif (x !== null) {\n\t\t\tthis.endX = -x;\n\t\t\tthis.x = this.x0 - (x + this.x0) * (1 - this.kFrictionDamping);\n\t\t}\n\t\tthis.start();\n\t},\n\n\t/**\n\t* Sets the scroll position along the x-axis.\n\t*\n\t* @param {Number} x - The x-axis scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tsetScrollX: function (x) {\n\t\tthis.x = this.x0 = x;\n\t},\n\n\t/**\n\t* Sets the scroll position along the y-axis.\n\t*\n\t* @param {Number} y - The y-axis scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tsetScrollY: function (y) {\n\t\tthis.y = this.y0 = y;\n\t},\n\n\t/**\n\t* Sets the scroll position; defaults to setting this position along the y-axis.\n\t*\n\t* @param {Number} pos - The scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tsetScrollPosition: function (pos) {\n\t\tthis.setScrollY(pos);\n\t},\n\n\t/** \n\t* Determines whether or not the [scroller]{@link enyo.Scroller} is actively moving.\n\t* \n\t* @return {Boolean} `true` if actively moving; otherwise, `false`.\n\t* @private\n\t*/\n\tisScrolling: function () {\n\t\treturn Boolean(this.job);\n\t},\n\n\t/** \n\t* Determines whether or not the [scroller]{@link enyo.Scroller} is in overscroll.\n\t* \n\t* @return {Boolean} `true` if in overscroll; otherwise, `false`.\n\t* @private\n\t*/\n\tisInOverScroll: function () {\n\t\treturn this.job && (this.x > this.leftBoundary || this.x < this.rightBoundary ||\n\t\t\tthis.y > this.topBoundary || this.y < this.bottomBoundary);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tComponent = require('./Component');\n\n/**\n* The extended {@glossary event} [object]{@glossary Object} that is provided\n* when the [onSelect]{@link enyo.Selection#onSelect} and\n* [onDeselect]{@link enyo.Selection#onDeselect} events are fired.\n*\n* @typedef {Object} enyo.Selection~SelectionEvent\n* @property {Number|String} key The key that was used to register the\n*\t[selection]{@link enyo.Selection} (usually a row index).\n* @property {Object} data - References data registered with the key by the code\n* that made the original selection.\n*/\n\n/**\n* Fires when an item is selected.\n* \n* ```javascript\n* {kind: \"Selection\", onSelect: \"selectRow\"...\n* ...\n* selectRow: function(inSender, inEvent) {\n* ...\n* ```\n*\n* @event enyo.Selection#onSelect\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {enyo.Selection~SelectionEvent} event - An [object]{@glossary Object}\n*\tcontaining event information.\n* @public\n*/\n\n/**\n* Fires when an item is deselected.\n* \n* ```javascript\n* {kind: \"Selection\", onSelect: \"deselectRow\"...\n* ...\n* deselectRow: function(inSender, inEvent)\n* ...\n* ```\n*\n* @event enyo.Selection#onDeselect\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {enyo.Selection~SelectionEvent} event - An [object]{@glossary Object}\n*\tcontaining event information.\n* @public\n*/\n\n/**\n* Fires when selection changes (but not when selection is cleared).\n*\n* @event enyo.Selection#onChange\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Selection} is used to manage row selection state for lists. It provides\n* selection state management for both single-select and multi-select lists.\n*\n* ```javascript\n* // The following is an excerpt from enyo.FlyweightRepeater.\n* enyo.kind({\n*\tname: \"enyo.FlyweightRepeater\",\n*\t...\n*\tcomponents: [\n*\t\t{kind: \"Selection\", onSelect: \"selectDeselect\", onDeselect: \"selectDeselect\"},\n*\t\t...\n*\t],\n*\ttap: function(inSender, inEvent) {\n*\t\t...\n*\t\t// mark the tapped row as selected\n*\t\tthis.$.selection.select(inEvent.index);\n*\t\t...\n*\t},\n*\tselectDeselect: function(inSender, inEvent) {\n*\t\t// this is where a row selection highlight might be applied\n*\t\tthis.renderRow(inEvent.key);\n*\t}\n*\t...\n* });\n* ```\n*\n* @class enyo.Selection\n* @extends enyo.Component\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Selection.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Selection',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Selection.prototype */ {\n\n\t\t/**\n\t\t* If `true`, multiple selections are allowed.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tmulti: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonSelect: '',\n\t\tonDeselect: '',\n\t\tonChange: ''\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.clear();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tmultiChanged: function () {\n\t\tif (!this.multi) {\n\t\t\tthis.clear();\n\t\t}\n\t\tthis.doChange();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thighlander: function () {\n\t\tif (!this.multi) {\n\t\t\tthis.deselect(this.lastSelected);\n\t\t}\n\t},\n\n\t/**\n\t* Removes all selections.\n\t* \n\t* @public\n\t*/\n\tclear: function () {\n\t\tthis.selected = {};\n\t},\n\n\t/**\n\t* Determines whether a particular row is selected.\n\t*\n\t* @param {Number|String} key - The unique identifier of the row.\n\t* @returns {Boolean} `true` if the specified row is selected; otherwise, `false`.\n\t* @public\n\t*/\n\tisSelected: function (key) {\n\t\treturn this.selected[key];\n\t},\n\n\t/**\n\t* Manually sets a row's state to selected or unselected.\n\t*\n\t* @param {Number|String} key - The unique identifier of the row.\n\t* @param {Boolean} sel - `true` if the row should be selected; `false` if the row\n\t* should be unselected.\n\t* @param {Object} [data] - An optional data [object]{@glossary Object} to store\n\t*\tin the selection for the key that will be sent with the\n\t*\t[onSelect]{@link enyo.Selection#onSelect} or\n\t*\t[onDeselect]{@link enyo.Selection#onDeselect} {@glossary event}. If\n\t*\tnot used, the `data` will be set to `true`.\n\t* @fires enyo.Selection#onChange\n\t* @public\n\t*/\n\tsetByKey: function (key, sel, data) {\n\t\tif (sel) {\n\t\t\tthis.selected[key] = (data || true);\n\t\t\tthis.lastSelected = key;\n\t\t\tthis.doSelect({key: key, data: this.selected[key]});\n\t\t} else {\n\t\t\tvar was = this.isSelected(key);\n\t\t\tdelete this.selected[key];\n\t\t\tthis.doDeselect({key: key, data: was});\n\t\t}\n\t\tthis.doChange();\n\t},\n\n\t/**\n\t* Deselects a row.\n\t*\n\t* @param {Number|String} key - The unique identifier of the row.\n\t* @public\n\t*/\n\tdeselect: function (key) {\n\t\tif (this.isSelected(key)) {\n\t\t\tthis.setByKey(key, false);\n\t\t}\n\t},\n\n\t/**\n\t* Selects a row. If the [multi]{@link enyo.Selection#multi} property is set to `false`,\n\t* this will also deselect the previous [selection]{@link enyo.Selection}.\n\t*\n\t* @param {Number|String} key - The unique identifier of the row.\n\t* @param {Object} [data] - An optional data [object]{@glossary Object} to store\n\t* in the selection for the key that will be sent with the\n\t*\t[onSelect]{@link enyo.Selection#onSelect} or\n\t*\t[onDeselect]{@link enyo.Selection#onDeselect} {@glossary event}. If\n\t*\tnot used, the `data` will be set to `true`.\n\t* @public\n\t*/\n\tselect: function (key, data) {\n\t\tif (this.multi) {\n\t\t\tthis.setByKey(key, !this.isSelected(key), data);\n\t\t} else if (!this.isSelected(key)) {\n\t\t\tthis.highlander();\n\t\t\tthis.setByKey(key, true, data);\n\t\t}\n\t},\n\n\t/**\n\t* Toggles [selection]{@link enyo.Selection} state for a row. If the\n\t* [multi]{@link enyo.Selection#multi} property is set to `false`, toggling a\n\t* selection \"on\" will deselect the previous selection.\n\t*\n\t* @param {Number|String} key - The unique identifier of the row.\n\t* @param {Object} [data] - An optional data [object]{@glossary Object} to store\n\t* in the selection for the key that will be sent with the\n\t*\t[onSelect]{@link enyo.Selection#onSelect} or\n\t*\t[onDeselect]{@link enyo.Selection#onDeselect} {@glossary event}. If\n\t*\tnot used, the `data` will be set to `true`.\n\t* @public\n\t*/\n\ttoggle: function (key, data) {\n\t\tif (!this.multi && this.lastSelected != key) {\n\t\t\tthis.deselect(this.lastSelected);\n\t\t}\n\t\tthis.setByKey(key, !this.isSelected(key), data);\n\t},\n\n\t/**\n\t* Retrieves the current [selection]{@link enyo.Selection}.\n\t*\n\t* @returns {Object} The selection as a [hash]{@glossary Object} in which each\n\t* selected item has a value; unselected items are [undefined]{@glossary undefined}.\n\t* @public\n\t*/\n\tgetSelected: function () {\n\t\treturn this.selected;\n\t},\n\n\t/**\n\t* Removes a row that's included in the [selection]{@link enyo.Selection} set.\n\t* If this row is selected, it will be unselected.  Any rows above this row\n\t* will have their keys value reduced by one.\n\t*\n\t* @param {Number|String} key - The unique identifier of the row.\n\t* @public\n\t*/\n\tremove: function (key) {\n\t\tvar newSelected = {};\n\t\tfor (var row in this.selected) {\n\t\t\tif (row < key) {\n\t\t\t\tnewSelected[row] = this.selected[row];\n\t\t\t} else if (row > key) {\n\t\t\t\tnewSelected[row - 1] = this.selected[row];\n\t\t\t}\n\t\t}\n\t\tthis.selected = newSelected;\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tComponent = require('./Component');\n\n/**\n* {@link enyo.Signals} is a [component]{@link enyo.Component} used to listen\n* to global messages.\n* \n* An object with a Signals component can listen to messages sent from anywhere\n* by declaring handlers for them.\n* \n* DOM [events]{@glossary event} that have no node targets are broadcast as\n* signals. These events include Window events, such as `onload` and\n* `onbeforeunload`, as well as events that occur directly on `document`, such\n* as `onkeypress` if `document` has the focus.\n* \n* For more information, see the documentation on [Event\n* Handling]{@linkplain $dev-guide/key-concepts/event-handling.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Signals\n* @extends enyo.Component\n* @public\n*/\nvar Signals = module.exports = kind(\n\t/** @lends enyo.Signals.prototype */ {\n\n\tname: 'enyo.Signals',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* Needed because of early calls to bind DOM {@glossary event} listeners\n\t* to the [enyo.Signals.send()]{@link enyo.Signals#send} call.\n\t* \n\t* @private\n\t*/\n\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tSignals.addListener(this);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tSignals.removeListener(this);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tnotify: function (msg, load) {\n\t\tthis.dispatchEvent(msg, load);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprotectedStatics: {\n\t\tlisteners: [],\n\t\taddListener: function(listener) {\n\t\t\tthis.listeners.push(listener);\n\t\t},\n\t\tremoveListener: function(listener) {\n\t\t\tutils.remove(listener, this.listeners);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstatics: \n\t\t/** @lends enyo.Signals.prototype */ {\n\n\t\t/**\n\t\t* Broadcasts a global message to be consumed by subscribers.\n\t\t* \n\t\t* @param {String} msg - The message to send; usually the name of the\n\t\t*\t{@glossary event}.\n\t\t* @param {Object} load - An [object]{@glossary Object} containing any\n\t\t*\tassociated event properties to be accessed by subscribers.\n\t\t* @public\n\t\t*/\n\t\tsend: function (msg, load) {\n\t\t\tutils.forEach(this.listeners, function(l) {\n\t\t\t\tl.notify(msg, load);\n\t\t\t});\n\t\t}\n\t}\n});","var\n    dom = require('../../enyo/lib/dom'),\n    logger = require('../../enyo/lib/logger'),\n    Component = require('../../enyo/lib/Component');\n\n/**\n* {@link enyo.Spotlight.Container}\n*\n* @typedef {Object} enyo.Spotlight.Container definition\n*\n* @class enyo.Spotlight.Container\n* @public\n*/\nvar Container = module.exports = function (Spotlight) {\n\n    //* @protected\n    /************************************************************/\n\n    var _oThis = this;\n\n    /**\n    * Creates `oSender._spotlight` object.\n    *\n    * @param  {Object} oSender - The object that will be initalized for Spotlight.\n    * @private\n    */\n    var _initComponent = function(oSender) {\n            var oLastFocusedChild;\n            if (!_isInitialized(oSender)) {\n                if (oSender.defaultSpotlightControl) {\n                    if (oSender.$[oSender.defaultSpotlightControl]) {\n                        oLastFocusedChild = oSender.$[oSender.defaultSpotlightControl];\n                    } else if (oSender.owner.$[oSender.defaultSpotlightControl]) {\n                        oLastFocusedChild = oSender.owner.$[oSender.defaultSpotlightControl];\n                    } else {\n                        throw 'Invalid default spotlight control specified in ' + oSender.name;\n                    }\n                } else {\n                    oLastFocusedChild = Spotlight.getFirstChild(oSender);\n                }\n\n                if (oLastFocusedChild && oLastFocusedChild.isDescendantOf(oSender)) {\n                    _oThis.setLastFocusedChild(oSender, oLastFocusedChild);\n                }\n            }\n        },\n\n        /**\n        * Determines whether Spotlight has been initialized.\n        *\n        * @param  {Object} oSender - The object that will be checked for\n        * Spotlight initalization.\n        * @return {Boolean} `true` if Spotlight has been initialized; otherwise, `false`.\n        * @private\n        */\n        _isInitialized = function(oSender) {\n            return typeof oSender._spotlight.lastFocusedChild != 'undefined';\n        },\n\n        /**\n        * Handles events bubbling from within the container.\n        *\n        * @param  {Object} oSender - The object that is sending the event.\n        * @param  {Object} oEvent - The event to bubble.\n        * @private\n        */\n        _handleEvent = function(oSender, oEvent) {\n            oSender.cachePoint = true;\n            switch (oEvent.type) {\n                case 'onSpotlightFocus':\n                    if (oEvent.originator !== oSender) {\n                        _oThis.setLastFocusedChild(oSender, oEvent.originator);\n                    }\n                    break;\n                case 'onSpotlightKeyDown':\n                    // Inform other controls that spotlight 5-way event was generated within a container\n                    oEvent.spotSentFromContainer = true;\n                    break;\n                case 'onSpotlightContainerEnter':\n                    if(oEvent.last && oEvent.last.isDescendantOf(oSender)) {\n                        return true;\n                    }\n                    break;\n                case 'onSpotlightContainerLeave':\n                    if(oEvent.commonAncestor && oEvent.commonAncestor.isDescendantOf(oSender)) {\n                        return true;\n                    }\n                    break;\n            }\n        },\n\n        /**\n        * Determines whether last spotted control was the container's child.\n        *\n        * @param  {Object} oSender\n        * @returns {Object}\n        * @private\n        */\n        _hadFocus = function(oSender) {\n            var oLastControl = Spotlight.getLastControl();\n            if (oSender._spotlight.bEnorceOutsideIn) {\n                return false;\n            } // Programmatically spotted containers are always treated as not having focus\n            if (!Spotlight.isSpottable(oLastControl)) {\n                return false;\n            } // Because oLastControl might have been DHD'd\n            return Spotlight.Util.isChild(oSender, oLastControl);\n        };\n\n    /**\n    * Starts intercepting events to keep track of last focus for container.\n    * Call this API after dynamically setting Spotlight as \"container\".\n    *\n    * @param  {Object} control\n    * @public\n    */\n    this.initContainer = function(control) {\n        if (!control._spotlight || (control._spotlight && !control._spotlight.interceptEvents)) {\n            control._spotlight = control._spotlight || {};\n            control._spotlight.interceptEvents = true;\n            Spotlight.Util.interceptEvents(control, _handleEvent);\n        }\n    };\n\n    /**\n    * Handles Spotlight focus event.\n    *\n    * @param  {Object} oSender - The sender of the event.\n    * @param  {Object} oEvent - The focus event.\n    * @public\n    */\n    this.onSpotlightFocus = function(oSender, oEvent) {\n        oSender._spotlight = oSender._spotlight || {};\n        oSender._spotlight.bEnorceOutsideIn = !oEvent.dir;\n    };\n\n    /**\n    * Handles Spotlight focused event.\n    *\n    * @param  {Object} oSender - The sender of the event.\n    * @param  {Object} oEvent - The focused event.\n    * @returns {Boolean}\n    * @public\n    */\n    this.onSpotlightFocused = function(oSender, oEvent) {\n        if (Spotlight.isInitialized() && Spotlight.getPointerMode()) {\n            return true;\n        }\n        _initComponent(oSender);\n\n        var s5WayEventType = Spotlight.getLast5WayEvent() ? Spotlight.getLast5WayEvent().type : '';\n\n        // Focus came from inside AND this was a 5-way move\n        if (_hadFocus(oSender)) {\n            if (s5WayEventType) {\n\n                // Re-dispatch 5 way event\n                Spotlight.Util.dispatchEvent(\n                    s5WayEventType, {\n                        spotSentFromContainer: true\n                    },\n                    oSender\n                );\n            }\n\n            // Focus came from outside or this was a programmatic spot\n        } else {\n            var oLastFocusedChild = this.getLastFocusedChild(oSender);\n            if (oLastFocusedChild) {\n                Spotlight.spot(oLastFocusedChild);\n            } else {\n                if (s5WayEventType) {\n\n                    // Re-dispatch 5 way event\n                    Spotlight.Util.dispatchEvent(\n                        s5WayEventType, {\n                            spotSentFromContainer: true\n                        },\n                        oSender\n                    );\n                    return true;\n                }\n            }\n        }\n\n        return true;\n    };\n\n    /**\n    * Returns last focused child of the container.\n    *\n    * @param  {Object} oSender\n    * @returns {Object} - The last focused child of the container.\n    * @public\n    */\n    this.getLastFocusedChild = function(oSender) {\n        oSender._spotlight = oSender._spotlight || {};\n        if (!oSender._spotlight.lastFocusedChild || !Spotlight.isSpottable(oSender._spotlight.lastFocusedChild)) {\n            oSender._spotlight.lastFocusedChild = Spotlight.getChildren(oSender)[0];\n        }\n        return oSender._spotlight.lastFocusedChild;\n    };\n\n    /**\n    * Sets last focused child for the container.\n    *\n    * @param  {Object} oSender\n    * @param  {Object} oChild - The child to set as the last focused child.\n    * @public\n    */\n    this.setLastFocusedChild = function(oSender, oChild) {\n        if (!Spotlight.isSpottable(oChild)) {\n            oChild = Spotlight.getFirstChild(oChild);\n        }\n        if (oChild) {\n            oSender._spotlight = oSender._spotlight || {};\n            oSender._spotlight.lastFocusedChild = oChild;\n        } else {\n            logger.warn('Spotlight Container attempting to set non-spottable lastFocusedChild');\n        }\n    };\n\n    this.fireContainerEvents = function (blurredControl, focusedControl) {\n        if(blurredControl) {\n            var to = focusedControl.hasNode(),\n                from = blurredControl,\n                position = 0;\n\n            // find common ancestor\n            do {\n                position = dom.compareDocumentPosition(to, from.hasNode());\n                if(position & 8) {  // 8 == 'contains'\n                    Spotlight.Util.dispatchEvent('onSpotlightContainerLeave', {\n                        commonAncestor: from\n                    }, blurredControl);\n                    break;\n                } else {\n                    from = from.parent;\n                }\n            } while (from);\n        }\n\n        if(focusedControl) {\n            Spotlight.Util.dispatchEvent('onSpotlightContainerEnter', {\n                last: blurredControl,\n                current: focusedControl\n            }, focusedControl);\n        }\n    };\n\n    /*\n    Using the hack below to ensure that statically declared Spotlight containers are\n    initialized upon creation. Our previous pass at this used enyo.Control.extend(),\n    which meant it failed to work for Control subkinds whose constructors were created\n    immediately (vs. being deferred). Unfortunately, this caused big problems in webOS,\n    where the \"container\" app systematically disables the deferral of constructor\n    creation.\n\n    There is some discussion ongoing as to whether we need a nicer mechanism for\n    extending functionality in cases like this (see comments in BHV-15323), but in\n    the meantime we need to proceed with a quick fix for this issue.\n    */\n\n    var originalEnyoComponentCreate = Component.create;\n\n    Component.create = function () {\n        var component = originalEnyoComponentCreate.apply(Component, arguments);\n        if (component.spotlight == 'container') {\n            Spotlight.Container.initContainer(component);\n        }\n        return component;\n    };\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar Collection = require('./Collection');\n\n/**\n* Used internally (re-use) for filters that do not have a valid filter. This means they will\n* always keep a mirrored copy of the entire current dataset of the parent filter.\n* \n* @private\n*/\nfunction alwaysTrue () {\n\treturn true;\n}\n\n/**\n* This is an abstract [kind]{@glossary kind} used by [subkinds]{@glossary subkind} to\n* implement features relevant to filtered [collections]{@link enyo.Collection}. It does extend\n* {@link enyo.Collection} but only implements a subset of its methods. Unlike a normal\n* collection, which keeps its own set of [model]{@link enyo.Model} instances (and can\n* create, remove, or destroy them), an {@link enyo.Filter} uses another instance of\n* `enyo.Collection` as its dataset and safely proxies its models as a complete set or\n* according to the needs of its subkind. `enyo.Filter` is not intended to communicate\n* with [sources]{@link enyo.Source} (e.g., via [fetch()]{@link enyo.Collection#fetch}).\n* It maintains an implementation-specific API (from its subkinds) and propagates the\n* events and APIs inherited from `enyo.Collection` that are needed to interact with\n* [controls]{@link enyo.Control}.\n* \n* @class enyo.Filter\n* @extends enyo.Collection\n* @protected\n*/\nvar Filter = module.exports = kind(\n\t/** @lends enyo.Filter.prototype */ {\n\t\n\tname: 'enyo.Filter',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: Collection,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* Provide a filter-method that will be applied to each [model]{@link enyo.Model} in the\n\t* current set of models. This method will accept parameters according to those supplied\n\t* with the native {@glossary Array.filter} method. If not provided a function that always\n\t* returns `true` will be used.\n\t*\n\t* @virtual\n\t* @type {Function}\n\t* @public\n\t*/\n\tmethod: null,\n\t\n\t/**\n\t* The actual {@link enyo.Collection} content to proxy. How the collection is\n\t* used varies depending on the [subkind]{@glossary subkind} implementing the\n\t* feature.\n\t* \n\t* @type enyo.Collection\n\t* @default null\n\t* @public\n\t*/\n\tcollection: null,\n\t\n\t/**\n\t* Once all components have been created, those that are [filters]{@link enyo.Filter}\n\t* (or [subkinds]{@glossary subkind}) will be added to this [array]{@glossary Array}.\n\t* This array is primarily for internal use and should not be modified directly.\n\t* \n\t* @type Array\n\t* @default null\n\t* @readonly\n\t* @public\n\t*/\n\tfilters: null,\n\t\n\t/**\n\t* @private\n\t*/\n\tdefaultProps: {\n\t\tkind: null // replaced after the fact\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tadjustComponentProps: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\t// all filters are public...always...except when they aren't...\n\t\t\tif (props.publish !== false) props.publish = true;\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\t// now to ensure that there is the correct kind associated with the child component\n\t\t\tif (typeof props.kind == 'string') props.kind = kind.constructorForKind(props.kind);\n\t\t\tif (props.kind && props.kind.prototype instanceof Filter) {\n\t\t\t\tif (!props.name) {\n\t\t\t\t\tthrow 'enyo.Filter.adjustComponentProps: Child filters must have a name';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// if no method is named explicitly we assume the same name as the filter\n\t\t\t\tif (!props.method) props.method = props.name;\n\t\t\t\t\n\t\t\t\t// most likely it will be a string but it is possible that the filter method\n\t\t\t\t// be declared inline in the component descriptor block\n\t\t\t\tif (typeof props.method == 'string') props.method = this[props.method];\n\t\t\t\t\n\t\t\t\t// we assign an always true method if none exists just because we assume it was\n\t\t\t\t// mean to be a mirror filter for the entire dataset\n\t\t\t\tif (typeof props.method != 'function') {\n\t\t\t\t\t// check to see if the prototype has one already\n\t\t\t\t\tprops.method = props.kind.prototype.method || alwaysTrue;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\taddComponent: kind.inherit(function (sup) {\n\t\treturn function (comp) {\n\t\t\t\n\t\t\t// if the component is a filter we add it to the array\n\t\t\tif (comp instanceof Filter) this.filters.push(comp);\n\t\t\t\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* Resets the [filter]{@link enyo.Filter} to its initial state. Behavior will\n\t* vary depending on the [subkind]{@glossary subkind} implementation.\n\t* \n\t* @virtual\n\t* @method\n\t* @public\n\t*/\n\treset: utils.nop,\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// ensure we have an array to work with\n\t\t\tthis.filters = [];\n\t\t\t\n\t\t\t// unfortunately we must maintain data structures that need remain out of our\n\t\t\t// proxy path so we each must create a collection instance for internal use\n\t\t\tthis._internal = new Collection({options: {modelEvents: false}});\n\t\t\tthis._internal.on('*', this._internalEvent, this);\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar collection,\n\t\t\t\towner;\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\t// we allow filters to be nested so they need to receive events from the\n\t\t\t// parent-filter and do with them as they need\n\t\t\tthis.isChildFilter = ((owner = this.owner) && owner instanceof Filter);\n\t\t\tif(this.isChildFilter) {\n\t\t\t\t\n\t\t\t\t// if we're a child collection we don't want to monitor our parent's own state\n\t\t\t\t// we want to monitor their entire dataset\n\t\t\t\tthis.collection = owner._internal;\n\t\t\t\t\n\t\t\t\t// register especially for owner events as we will differentiate them from\n\t\t\t\t// normal collection events\n\t\t\t\tthis.collection.on('*', this._ownerEvent, this);\n\t\t\t}\n\t\t\t\n\t\t\tcollection = this.collection;\n\t\t\t\n\t\t\t// if there is a collection instance already we need to initialize it\n\t\t\tif (collection) this.collectionChanged(null, collection);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar collection = this.collection;\n\t\t\t\n\t\t\t// make sure that we remove our listener if we're being destroyed for some\n\t\t\t// reason (this would seem to be an irregular practice)\n\t\t\tif (collection) {\n\t\t\t\tif (this.isChildFilter && collection === this.owner._internal) {\n\t\t\t\t\tcollection.off('*', this._ownerEvent, this);\n\t\t\t\t} else {\n\t\t\t\t\tcollection.off('*', this._collectionEvent, this);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcollection.unobserve('destroyed', this._collectionDestroyed, this);\n\t\t\t}\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\t// free our internal collection\n\t\t\tthis._internal.destroy();\n\t\t\tthis._internal = null;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tcollectionChanged: function (was, is) {\n\t\tvar internal = this._internal;\n\t\t\n\t\tif (was) {\n\t\t\twas.off('*', this._collectionEvent, this);\n\t\t\twas.unobserve('destroyed', this._collectionDestroyed, this);\n\t\t}\n\t\t\n\t\t// ensure that child-filters cannot have their internal/external collections reset\n\t\tif (is && !(was && this.isChildFilter && was === this.owner._internal)) {\n\t\t\t\n\t\t\t// case of child-filter whose collection is its owner does not need to receive\n\t\t\t// these events since it will receive them in a special handler to differentiate\n\t\t\t// these cases\n\t\t\tif (!this.isChildFilter || (is !== this.owner._internal)) {\n\t\t\t\tis.on('*', this._collectionEvent, this);\n\t\t\t}\n\t\t\t\n\t\t\t// if for any reason the collection is destroyed we want to know about it\n\t\t\tis.observe('destroyed', this._collectionDestroyed, this);\n\t\t\t\n\t\t\t// reset the models (causing reset to propagate to children or bound parties)\n\t\t\tinternal.set('models', is.models.copy());\n\t\t} else {\n\t\t\t// it was set to nothing so we should be nothing\n\t\t\tif (internal.length) internal.empty();\n\t\t}\n\t},\n\t\n\t/**\n\t* This method is invoked when events are received from a\n\t* [collection]{@link enyo.Collection} that is not the owner of this\n\t* [filter]{@link enyo.Filter} (meaning it is not a child, since all child-filters'\n\t* owners are also filters and their event handling happens in another method).\n\t* As long as we are consistent about applying the same action against ourselves,\n\t* we should remain in sync and propagate the same event again, except that\n\t* `sort` will end up being a `reset`.\n\t* \n\t* @private\n\t*/\n\t_collectionEvent: function (sender, e, props) {\n\t\t// we are listening for particular events to signal that we should update according\n\t\t// to its changes if we are a nested filter\n\t\t\n\t\tvar models = props.models,\n\t\t\tinternal = this._internal;\n\t\t\n\t\tswitch (e) {\n\t\tcase 'add':\n\t\t\t\n\t\t\t// will ensure an add gets propagated if the models are new\n\t\t\tinternal.add(models, {merge: false});\n\t\t\tbreak;\n\t\tcase 'reset':\n\t\tcase 'sort':\n\t\t\t\n\t\t\t// will ensure a reset gets propagated\n\t\t\tinternal.empty(models);\n\t\t\tbreak;\n\t\tcase 'remove':\n\t\t\t\n\t\t\t// will ensure a remove gets propagated (assuming something is removed)\n\t\t\tinternal.remove(models);\n\t\t\tbreak;\n\t\tcase 'change':\n\t\t\t\n\t\t\t// we need to propagate the change event as our internal collection's own so that\n\t\t\t// child filters and/or subclasses will be able to handle this as they need to\n\t\t\tinternal.emit(e, props);\n\t\t\tbreak;\n\t\t}\n\t},\n\t\n\t/**\n\t* When the collection is destroyed we can't use it anymore so we need to remove it as our\n\t* collection to prevent weird things from happening.\n\t*\n\t* @private\n\t*/\n\t_collectionDestroyed: function () {\n\t\tthis.set('collection', null);\n\t},\n\t\n\t/**\n\t* To be implemented by [subkind]{@glossary subkind}; for internal use only.\n\t*\n\t* @virtual\n\t* @private\n\t*/\n\t_internalEvent: utils.nop,\n\t\n\t/**\n\t* To be implemented by [subkind]{@glossary subkind}; for internal use only.\n\t*\n\t* @virtual\n\t* @private\n\t*/\n\t_ownerEvent: utils.nop,\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tadd: utils.nop,\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tremove: utils.nop,\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tfetch: utils.nop,\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tsort: utils.nop,\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tcommit: utils.nop,\n\t\n\t/**\n\t* Overloaded implementation.\n\t*\n\t* @see enyo.Collection.at\n\t* @method\n\t* @public\n\t*/\n\tat: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\treturn this.models ? sup.apply(this.models.at ? this.models : this, arguments) : undefined;\n\t\t};\n\t}),\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\traw: utils.nop,\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\ttoJSON: utils.nop,\n\t\n\t/**\n\t* Overloaded implementation.\n\t*\n\t* @see enyo.Collection.has\n\t* @method\n\t* @public\n\t*/\n\thas: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\treturn this.models ? sup.apply(this, arguments) : false;\n\t\t};\n\t}),\n\t\n\t/**\n\t* Overloaded implementation.\n\t*\n\t* @see enyo.Collection.forEach\n\t* @method\n\t* @public\n\t*/\n\tforEach: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\treturn this.models ? sup.apply(this, arguments) : undefined;\n\t\t};\n\t}),\n\t\n\t/**\n\t* Overloaded implementation.\n\t*\n\t* @see enyo.Collection.filter\n\t* @method\n\t* @public\n\t*/\n\tfilter: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\treturn this.models ? sup.apply(this, arguments) : [];\n\t\t};\n\t}),\n\t\n\t/**\n\t* Overloaded implementation.\n\t*\n\t* @see enyo.Collection.find\n\t* @method\n\t* @public\n\t*/\n\tfind: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\treturn this.models ? sup.apply(this, arguments) : undefined;\n\t\t};\n\t}),\n\t\n\t/**\n\t* Overloaded implementation.\n\t*\n\t* @see enyo.Collection.map\n\t* @method\n\t* @public\n\t*/\n\tmap: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\treturn this.models ? sup.apply(this, arguments) : [];\n\t\t};\n\t}),\n\t\n\t/**\n\t* Overloaded implementation.\n\t*\n\t* @see enyo.Collection.indexOf\n\t* @method\n\t* @public\n\t*/\n\tindexOf: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\treturn this.models ? sup.apply(this, arguments) : -1;\n\t\t};\n\t}),\n\t\n\t/**\n\t* Unavailable on {@link enyo.Filter} and [subkinds]{@glossary subkind}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tempty: utils.nop\n});\n\nFilter.prototype.defaultProps.kind = Filter;","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tMultipleDispatchComponent = require('./MultipleDispatchComponent');\n\n/**\n* {@link enyo.Controller} is the base [kind]{@glossary kind} for all\n* controllers in Enyo. An abstract kind, `enyo.Controller` is a\n* [delegate]{@glossary delegate}/[component]{@link enyo.Component} that\n* is designed to be a proxy for information.\n*\n* @class enyo.Controller\n* @extends enyo.MultipleDispatchComponent\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Controller.prototype */ {\n\n\tname: 'enyo.Controller',\n\n\t/**\n\t* @private\n\t*/\n\tkind: MultipleDispatchComponent,\n\n\t/**\n\t* Set this flag to `true` to make this [controller]{@link enyo.Controller}\n\t* available globally, when instanced. When set to `true`, even the\n\t* [owner]{@link enyo.Component#owner} (if any) cannot\n\t* [destroy]{@link enyo.Component#destroy} it.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tglobal: false,\n\n\t/**\n\t* The default source of information for all instances of {@link enyo.Controller}\n\t* and its [subkinds]{@glossary subkind}. In some cases, this will be a\n\t* [computed property]{@link enyo.ComputedSupport} to facilitate overloading.\n\t* It may contain any type of data.\n\t*\n\t* @type {*}\n\t* @default null\n\t* @public\n\t*/\n\tdata: null,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.global) {\n\t\t\t\tutils.setPath(this.name, this);\n\t\t\t}\n\t\t};\n\t}),\n\t_isController: true\n});","require('../../enyo');\n\nvar\n\tSignals = require('./Signals');\n\n/**\n* Provides a stub function for g11n string translation. This allows strings to be wrapped in\n* preparation for localization. If a g11n library is not loaded, this function will return the\n* string as is.\n* \n* `$L('Welcome')`\n* \n* If a compatible g11n library is loaded, this function will be replaced by the g11n library's\n* version, which translates wrapped strings to strings from a developer-provided resource file\n* corresponding to the current user locale.\n*\n* @name $L\n* @scope global\n* @type {Function}\n* @param {String} str - The {@glossary String} to translate.\n* @returns {String} The translated {@glossary String}.\n* @public\n*/\nexports.$L = function (str) {\n\treturn str;\n};\n\n/**\n* THE BELOW MAY NOT BE RELEVANT MOVING FORWARD BUT IS RETAINED FOR POSTERITY.\n*\n* Enyo controls may register for an `onlocalechange` signal to dynamically update their\n* presentation based on changes to the user's locale. This feature is currently used in webOS,\n* where Cordova for webOS listens for changes to the system locales and fires a `localechange`\n* event on the `document` object. Similar functionality could be implemented on other platforms\n* via a Cordova plugin or by other means.\n* \n* Enyo registers an event listener for the `localechange` event and broadcasts the\n* `onlocalechange` signal when the locale has changed. Before broadcasting, Enyo calls\n* `enyo.updateLocale()`. The default implementation of `enyo.updateLocale()` is a stub, but a\n* g11n library may override it to update its internal state before the `onlocalechange` signal\n* is broadcast.\n* \n* This feature is not supported on IE8, which doesn't support `addEventListener()`.\n*\n* @private\n*/\nexports.updateLocale = function updateLocale () {\n\t// This is a stub, to be implemented by a g11n library as needed\n\tSignals.send('onlocalechange');\n};\n\n// this...may not work the way it used to...\nif (document.addEventListener) {\n\tdocument.addEventListener('localechange', function(e) {\n\t\texports.updateLocale();\n\t}, false);\n}","require('../../enyo');\n\nvar\n\tutils = require('./utils');\nvar\n\tComponent = require('./Component'),\n\tSignals = require('./Signals');\n\n/**\n* Default owner assigned to ownerless [UiComponents]{@link enyo.UiComponent},\n* to allow such UiComponents to be notified of important system events like window resize.\n*\n* NOTE: Ownerless [UiComponents]{@link enyo.UiComponent} will not be garbage collected unless \n* explicitly destroyed, as they will be referenced by `enyo.master`.\n*\n* @private\n*/\nvar master = module.exports = new Component({\n\tname: 'master',\n\tnotInstanceOwner: true,\n\teventFlags: {showingOnly: true}, // don't waterfall these events into hidden controls\n\tgetId: function () {\n\t\treturn '';\n\t},\n\tisDescendantOf: utils.nop,\n\tbubble: function (nom, event) {\n\t\t//enyo.log('master event: ' + nom);\n\t\tif (nom == 'onresize') {\n\t\t\t// Resize is special; waterfall this message.\n\t\t\t// This works because master is a Component, so it waterfalls\n\t\t\t// to its owned Components (i.e., master has no children).\n\t\t\tmaster.waterfallDown('onresize', this.eventFlags);\n\t\t\tmaster.waterfallDown('onpostresize', this.eventFlags);\n\t\t} else {\n\t\t\t// All other top-level events are sent only to interested Signal\n\t\t\t// receivers.\n\t\t\tSignals.send(nom, event);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tFilter = require('./Filter'),\n\tModelList = require('./ModelList');\n\n/**\n* A primarily abstract {@glossary kind} of {@link enyo.Filter}. It serves the simple purpose\n* of taking a [collection]{@link enyo.Collection} of [models]{@link enyo.Model} and\n* progressively filtering its contents each time it is triggered. Because this is primarily\n* an abstract kind, it makes no assumptions about how it is triggered.\n* [Subkinds]{@glossary subkind} may provide a more defined API.\n*\n* @class enyo.ProgressiveFilter\n* @extends enyo.Filter\n* @public\n*/\nvar ProgressiveFilter = module.exports = kind(\n\t/** @lends enyo.ProgressiveFilter.prototype */ {\n\t\n\tname: 'enyo.ProgressiveFilter',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: Filter,\n\t\n\t/**\n\t* @private\n\t*/\n\tdefaultProps: {\n\t\tkind: 'enyo.ProgressiveFilter'\n\t},\n\t\n\t/**\n\t* Whether or not the content is currently filtered.\n\t*\n\t* @type Boolean\n\t* @default false\n\t* @public\n\t*/\n\tfiltered: false,\n\t\n\t/**\n\t* Resets the filtered set to the complete set of the proxied\n\t* [collection]{@link enyo.Collection}, if there is one, and sets the\n\t* [filtered]{@link enyo.ProgressiveFilter#filtered} property to `false`.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\treset: function () {\n\t\tif (this.collection) {\n\t\t\t\n\t\t\t// because we can't be certain that the models were completely replaced on the\n\t\t\t// the collection we have to make a new copy each time reset is called\n\t\t\tthis._internal.set('models', this.collection.models.copy());\n\t\t}\n\t\tthis.set('filtered', false);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* An overloaded version of the normal [filter()]{@link enyo.Collection#filter} method.\n\t* This method may be called without parameters to trigger an in-place application of\n\t* the [_filter()]{@link enyo.ProgressiveFilter#_filter} method against the current set\n\t* or subset of [models]{@link enyo.Model}.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tfilter: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (arguments.length > 0) return sup.apply(this, arguments);\n\t\t\t\n\t\t\treturn this._filter();\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcollectionChanged: kind.inherit(function (sup) {\n\t\treturn function (was, is) {\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\t// this ensures we aren't filtered anymore\n\t\t\tthis.set('filtered', false);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\t// we need to always proxy a single targets content so, unlike bucket filters\n\t\t\t// we facade our 'models' as our internal collection\n\t\t\tthis.models = this._internal;\n\t\t};\n\t}),\n\t\n\t/**\n\t* Abstracted to allow (internal) subkinds to overload the filter method and still call\n\t* this method for the same behavior if necessary.\n\t*\n\t* @private\n\t*/\n\t_filter: function () {\n\t\tvar internal = this._internal,\n\t\t\tlen = internal.length,\n\t\t\tres;\n\t\t\n\t\tif (len) {\n\t\t\t\n\t\t\t// skip one arbitrary level of abstraction to the lowest level implementation of\n\t\t\t// the filter that we can since we need an array that we can reuse anyway\n\t\t\tres = internal.models.filter(this.method, this);\n\t\t\t\n\t\t\tif (res.length != len) {\n\t\t\t\tinternal.set('models', new ModelList(res.length ? res : null));\n\t\t\t\tthis.set('filtered', true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn res || [];\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_internalEvent: function (sender, e, props) {\n\t\t\n\t\t// if our internal collection is what we are currently proxying then we need to\n\t\t// propagate the event, otherwise not\n\t\tif (this.models === sender) {\n\t\t\t\n\t\t\tif (sender.models.length != this.length) this.set('length', sender.models.length);\n\t\t\t\n\t\t\tthis.emit(e, props);\n\t\t}\n\t},\n\t\n\t/*\n\t* See the comments on {@link enyo.Filter#_collectionEvent}.\n\t* \n\t* @private\n\t*/\n\t_ownerEvent: function (sender, e, props) {\n\t\tthis._collectionEvent(sender, e, props);\n\t},\n\t\n\t/**\n\t* This method is invoked when events are received from a\n\t* [collection]{@link enyo.Collection} that is not the owner of this\n\t* [filter]{@link enyo.Filter} (meaning it is not a child, since all child-filters'\n\t* owners are also filters and their event handling happens in another method).\n\t* As long as we are consistent about applying the same action against ourselves,\n\t* we should remain in sync and propagate the same event again, except that\n\t* `sort` will end up being a `reset`.\n\t* \n\t* @private\n\t*/\n\t_collectionEvent: function (sender, e, props) {\n\t\t// we are listening for particular events to signal that we should update according\n\t\t// to its changes if we are a nested filter\n\t\t\n\t\tvar models = props.models,\n\t\t\tinternal = this._internal,\n\t\t\tfiltered = this.get('filtered');\n\t\t\n\t\tswitch (e) {\n\t\tcase 'add':\n\t\t\t// to preserve the efficacy of the abstracted internal _filter method we need\n\t\t\t// to go ahead and allow all of the models to be added at the correct location\n\t\t\t// and then, if necessary filter but only emit events/changes for those that\n\t\t\t// are actually added\n\t\t\tif (filtered) internal.silence().stopNotifications(true);\n\t\t\t\n\t\t\tinternal.add(models, {merge: false, index: props.index});\n\t\t\t\n\t\t\tif (filtered) {\n\t\t\t\t// here we let it update the filtered set\n\t\t\t\tinternal.unsilence().startNotifications(true);\n\t\t\t\tthis.filter();\n\t\t\t\t\n\t\t\t\t// there is the off-chance that the lengths don't get updated correctly\n\t\t\t\tif (this.length !== internal.length) this.set('length', internal.length);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'reset':\n\t\tcase 'sort':\n\t\t\t\n\t\t\tif (filtered) internal.silence().stopNotifications(true);\n\t\t\t\n\t\t\t// will ensure a reset gets propagated\n\t\t\tinternal.empty(models);\n\t\t\t\n\t\t\tif (filtered) {\n\t\t\t\tinternal.unsilence().startNotifications(true);\n\t\t\t\tthis.filter();\n\t\t\t\t\n\t\t\t\t// there is the off-chance that the lengths don't get updated correctly\n\t\t\t\tif (this.length !== internal.length) this.set('length', internal.length);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'remove':\n\t\t\t\n\t\t\t// will ensure a remove gets propagated (assuming something is removed)\n\t\t\tinternal.remove(models);\n\t\t\tbreak;\n\t\tcase 'change':\n\t\t\t\n\t\t\t// we only want to emit the event if the model exists in the filtered set\n\t\t\t// (if filtered)\n\t\t\tif (filtered && !internal.has(props.model)) break; \n\t\t\t\n\t\t\t// we need to propagate the change event as our internal collection's own so that\n\t\t\t// child filters and/or subclasses will be able to handle this as they need to\n\t\t\tinternal.emit(e, props);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tmaster = require('./master');\n\nvar\n\tComponent = require('./Component');\n\n/**\n* {@link enyo.UiComponent} implements a container strategy suitable for presentation layers.\n* \n* `UiComponent` itself is abstract. Concrete [subkinds]{@glossary subkind} include\n* {@link enyo.Control} (for HTML/DOM) and\n* {@link enyo.canvas.Control} (for Canvas contexts).\n*\n* @class enyo.UiComponent\n* @extends enyo.Component\n* @public\n*/\nvar UiComponent = exports = module.exports = kind(\n\t/** @lends enyo.UiComponent.prototype */ {\n\n\tname: 'enyo.UiComponent',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends  enyo.UiComponent.prototype */ {\n\n\t\t/** \n\t\t* The [UiComponent]{@link enyo.UiComponent} that physically contains this \n\t\t* [component]{@link enyo.Component} in the DOM.\n\t\t*\n\t\t* @type {enyo.UiComponent}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcontainer: null,\n\n\t\t/**\n\t\t* The [UiComponent]{@link enyo.UiComponent} that owns this\n\t\t* [component]{@link enyo.Component} for purposes of {@glossary event}\n\t\t* propagation.\n\t\t*\n\t\t* @type {enyo.UiComponent}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tparent: null,\n\n\t\t/**\n\t\t* The [UiComponent]{@link enyo.UiComponent} that will physically contain new items added\n\t\t* by calls to [createComponent()]{@link enyo.UiComponent#createComponent}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'client'\n\t\t* @public\n\t\t*/\n\t\tcontrolParentName: 'client',\n\t\t\n\t\t/** \n\t\t* A [kind]{@glossary kind} used to manage the size and placement of child \n\t\t* [components]{@link enyo.Component}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tlayoutKind: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonresize: 'handleResize'\n\t},\n\n\t/**\n\t* When set, provides a [control]{@link enyo.Control} reference used to indicate where a\n\t* newly-created [component]{@link enyo.Component} should be added in the\n\t* [UiComponent's]{@link enyo.UiComponent} [array]{@glossary Array} of children. This is\n\t* typically used when creating children dynamically (rather than at design time). If set\n\t* to `null`, the new control will be added at the beginning of the array; if set to a\n\t* specific existing control, the new control will be added before the specified\n\t* control. If left as `undefined`, the default behavior is to add the new control\n\t* at the end of the array.\n\t*\n\t* @type {enyo.Control}\n\t* @default undefined\n\t* @public\n\t*/\n\taddBefore: undefined,\n\t\n\t/**\n\t* @private\n\t*/\n\tprotectedStatics: {\n\t\t_resizeFlags: {showingOnly: true} // don't waterfall these events into hidden controls\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.controls = this.controls || [];\n\t\t\tthis.children = this.children || [];\n\t\t\tthis.containerChanged();\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.layoutKindChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\t// Destroys all non-chrome controls (regardless of owner).\n\t\t\tthis.destroyClientControls();\n\t\t\t// Removes us from our container.\n\t\t\tthis.setContainer(null);\n\t\t\t// Destroys chrome controls owned by this.\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\timportProps: kind.inherit(function (sup) {\n\t\treturn function(inProps) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (!this.owner) {\n\t\t\t\tthis.owner = master;\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* Creates [components]{@link enyo.Component} as defined by the [arrays]{@glossary Array}\n\t* of base and additional property [hashes]{@glossary Object}. The standard and \n\t* additional property hashes are combined as described in\n\t* {@link enyo.Component#createComponent}.\n\t* \n\t* ```\n\t* // ask foo to create components 'bar' and 'zot', but set the owner of\n\t* // both components to 'this'.\n\t* this.$.foo.createComponents([\n\t*\t{name: 'bar'},\n\t*\t{name: 'zot'}\n\t* ], {owner: this});\n\t* ```\n\t*\n\t* As implemented, [controlParentName]{@link enyo.UiComponent#controlParentName} only works\n\t* to identify an owned control created via `createComponents()`\n\t* (i.e., usually in our `components` block). To attach a `controlParent` via other means, \n\t* one must call [discoverControlParent()]{@link enyo.UiComponent#discoverControlParent} or \n\t* set `controlParent` directly.\n\t* \n\t* We could call `discoverControlParent()` in\n\t* [addComponent()]{@link enyo.Component#addComponent}, but that would\n\t* cause a lot of useless checking.\n\t* \n\t* @param {Object[]} props The array of {@link enyo.Component} definitions to be created.\n\t* @param {Object} ext - Additional properties to be supplied as defaults for each.\n\t* @returns {enyo.Component[]} The array of components that were created.\n\t* @method\n\t* @public\n\t*/\n\t// \n\tcreateComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tvar results = sup.apply(this, arguments);\n\t\t\tthis.discoverControlParent();\n\t\t\treturn results;\n\t\t};\n\t}),\n\n\t/**\n\t* Determines and sets the current [control's]{@link enyo.Control} parent.\n\t*\n\t* @protected\n\t*/\n\tdiscoverControlParent: function () {\n\t\tthis.controlParent = this.$[this.controlParentName] || this.controlParent;\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tadjustComponentProps: kind.inherit(function (sup) {\n\t\treturn function(inProps) {\n\t\t\t// Components we create have us as a container by default.\n\t\t\tinProps.container = inProps.container || this;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Containment\n\t* \n\t* @method\n\t* @private\n\t*/\n\tcontainerChanged: function (container) {\n\t\tif (container) {\n\t\t\tcontainer.removeControl(this);\n\t\t}\n\t\tif (this.container) {\n\t\t\tthis.container.addControl(this, this.addBefore);\n\t\t}\n\t},\n\n\t/**\n\t* Parentage\n\t* \n\t* @method\n\t* @private\n\t*/\n\tparentChanged: function (oldParent) {\n\t\tif (oldParent && oldParent != this.parent) {\n\t\t\toldParent.removeChild(this);\n\t\t}\n\t},\n\n\t/**\n\t* Determines whether the [control]{@link enyo.Control} is a descendant of\n\t* another control.\n\t* \n\t* Note: Oddly, a control is considered to be a descendant of itself.\n\t*\n\t* @param {enyo.Control} ancestor - The [control]{@link enyo.Control} whose lineage\n\t*\twill be checked to determine whether the current control is a descendant.\n\t* @public\n\t*/\n\tisDescendantOf: function (ancestor) {\n\t\tvar p = this;\n\t\twhile (p && p!=ancestor) {\n\t\t\tp = p.parent;\n\t\t}\n\t\treturn ancestor && (p === ancestor);\n\t},\n\n\t/**\n\t* Returns all controls.\n\t*\n\t* @returns {enyo.Control[]} An [array]{@glossary Array} of [controls]{@link enyo.Control}.\n\t* @public\n\t*/\n\tgetControls: function () {\n\t\treturn this.controls;\n\t},\n\n\t/**\n\t* Returns all non-chrome controls.\n\t*\n\t* @returns {enyo.Control[]} An [array]{@glossary Array} of [controls]{@link enyo.Control}.\n\t* @public\n\t*/\n\tgetClientControls: function () {\n\t\tvar results = [];\n\t\tfor (var i=0, cs=this.controls, c; (c=cs[i]); i++) {\n\t\t\tif (!c.isChrome) {\n\t\t\t\tresults.push(c);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t},\n\n\t/**\n\t* Destroys \"client controls\", the same set of [controls]{@link enyo.Control} returned by \n\t* [getClientControls()]{@link enyo.UiComponent#getClientControls}.\n\t*\n\t* @public\n\t*/\n\tdestroyClientControls: function () {\n\t\tvar c$ = this.getClientControls();\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\tc.destroy();\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\taddControl: function (ctl, before) {\n\t\t// Called to add an already created control to the object's control list. It is\n\t\t// not used to create controls and should likely not be called directly.\n\t\t// It can be overridden to detect when controls are added.\n\t\tif (before !== undefined) {\n\t\t\tvar idx = (before === null) ? 0 : this.indexOfControl(before);\n\t\t\tthis.controls.splice(idx, 0, ctl);\n\t\t} else {\n\t\t\tthis.controls.push(ctl);\n\t\t}\n\t\t// When we add a Control, we also establish a parent.\n\t\tthis.addChild(ctl, before);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveControl: function (ctl) {\n\t\t// Called to remove a control from the object's control list. As with addControl it\n\t\t// can be overridden to detect when controls are removed.\n\t\t// When we remove a Control, we also remove it from its parent.\n\t\tctl.setParent(null);\n\t\treturn utils.remove(ctl, this.controls);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexOfControl: function (ctl) {\n\t\treturn utils.indexOf(ctl, this.controls);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexOfClientControl: function (ctl) {\n\t\treturn utils.indexOf(ctl, this.getClientControls());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexInContainer: function () {\n\t\treturn this.container.indexOfControl(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclientIndexInContainer: function () {\n\t\treturn this.container.indexOfClientControl(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontrolAtIndex: function (idx) {\n\t\treturn this.controls[idx];\n\t},\n\t\n\t/**\n\t* Children\n\t* \n\t* @private\n\t*/\n\taddChild: function (child, before) {\n\t\t// if before is undefined, add to the end of the child list.\n\t\t// If it's null, add to front of list, otherwise add before the\n\t\t// specified control.\n\t\t//\n\t\t// allow delegating the child to a different container\n\t\tif (this.controlParent /*&& !child.isChrome*/) {\n\t\t\t// this.controlParent might have a controlParent, and so on; seek the ultimate parent\n\t\t\tthis.controlParent.addChild(child, before);\n\t\t} else {\n\t\t\t// NOTE: addChild drives setParent.\n\t\t\t// It's the opposite for setContainer, where containerChanged (in Containable)\n\t\t\t// drives addControl.\n\t\t\t// Because of the way 'parent' is derived from 'container', this difference is\n\t\t\t// helpful for implementing controlParent.\n\t\t\t// By the same token, since 'parent' is derived from 'container', setParent is\n\t\t\t// not intended to be called by client code. Therefore, the lack of parallelism\n\t\t\t// should be private to this implementation.\n\t\t\t// Set the child's parent property to this\n\t\t\tchild.setParent(this);\n\t\t\t// track in children array\n\t\t\tif (before !== undefined) {\n\t\t\t\tvar idx = (before === null) ? 0 : this.indexOfChild(before);\n\t\t\t\tthis.children.splice(idx, 0, child);\n\t\t\t} else {\n\t\t\t\tthis.children.push(child);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveChild: function (child) {\n\t\treturn utils.remove(child, this.children);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexOfChild: function (child) {\n\t\treturn utils.indexOf(child, this.children);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlayoutKindChanged: function () {\n\t\tif (this.layout) {\n\t\t\tthis.layout.destroy();\n\t\t}\n\t\tthis.layout = kind.createFromKind(this.layoutKind, this);\n\t\tif (this.generated) {\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflow: function () {\n\t\tif (this.layout) {\n\t\t\tthis.layout.flow();\n\t\t}\n\t},\n\n\t/**\n\t* CAVEAT: currently we use the entry point for both post-render layout work *and* \n\t* post-resize layout work.\n\t* @private\n\t*/\n\treflow: function () {\n\t\tif (this.layout) {\n\t\t\tthis.layout.reflow();\n\t\t}\n\t},\n\n\t/**\n\t* Call after this [control]{@link enyo.Control} has been resized to allow it to process the \n\t* size change. To respond to a resize, override `handleResize()` instead. Acts as syntactic \n\t* sugar for `waterfall('onresize')`.\n\t* \n\t* @public\n\t*/\n\tresize: function () {\n\t\tthis.waterfall('onresize', UiComponent._resizeFlags);\n\t\tthis.waterfall('onpostresize', UiComponent._resizeFlags);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandleResize: function () {\n\t\t// FIXME: once we are in the business of reflowing layouts on resize, then we have an\n\t\t// inside/outside problem: some scenarios will need to reflow before child\n\t\t// controls reflow, and some will need to reflow after. Even more complex scenarios\n\t\t// have circular dependencies, and can require multiple passes or other resolution.\n\t\t// When we can rely on CSS to manage reflows we do not have these problems.\n\t\tthis.reflow();\n\t},\n\n\t/**\n\t* Sends a message to all of my descendants, but not myself. You can stop a\n\t* [waterfall]{@link enyo.Component#waterfall} into [components]{@link enyo.Component}\n\t* owned by a receiving [object]{@glossary Object} by returning a truthy value from the\n\t* {@glossary event} [handler]{@link enyo.Component~EventHandler}.\n\t* \n\t* @param {String} nom - The name of the {@glossary event}.\n\t* @param {Object} [event] - The event object to pass along.\n\t* @param {enyo.Component} [sender=this] - The event's originator.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\twaterfallDown: function (nom, event, sender) {\n\t\tevent = event || {};\n\t\t// Note: Controls will generally be both in a $ hash and a child list somewhere.\n\t\t// Attempt to avoid duplicated messages by sending only to components that are not\n\t\t// UiComponent, as those components are guaranteed not to be in a child list.\n\t\t// May cause a problem if there is a scenario where a UiComponent owns a pure\n\t\t// Component that in turn owns Controls.\n\t\t//\n\t\t// waterfall to all pure components\n\t\tfor (var n in this.$) {\n\t\t\tif (!(this.$[n] instanceof UiComponent)) {\n\t\t\t\tthis.$[n].waterfall(nom, event, sender);\n\t\t\t}\n\t\t}\n\t\t// waterfall to my children\n\t\tfor (var i=0, cs=this.children, c; (c=cs[i]); i++) {\n\t\t\t// Do not send {showingOnly: true} events to hidden controls. This flag is set for resize events\n\t\t\t// which are broadcast from within the framework. This saves a *lot* of unnecessary layout.\n\t\t\t// TODO: Maybe remember that we did this, and re-send those messages on setShowing(true)?\n\t\t\t// No obvious problems with it as-is, though\n\t\t\tif (c.showing || !(event && event.showingOnly)) {\n\t\t\t\tc.waterfall(nom, event, sender);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetBubbleTarget: function (nom, event) {\n\t\tif (event.delegate) return this.owner;\n\t\telse {\n\t\t\treturn (\n\t\t\t\tthis.bubbleTarget\n\t\t\t\t|| (this.cachedBubble && this.cachedBubbleTarget[nom])\n\t\t\t\t|| this.parent\n\t\t\t\t|| this.owner\n\t\t\t);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tlogger = require('./logger'),\n\tmaster = require('./master'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\n\nvar\n\tDom = require('./dom');\n\n/**\n * An [object]{@glossary Object} describing the the last known coordinates of the cursor or\n * user-interaction point in touch environments.\n *\n * @typedef {Object} enyo.dispatcher~CursorCoordinates\n * @property {Number} clientX - The horizontal coordinate within the application's client area.\n * @property {Number} clientY - The vertical coordinate within the application's client area.\n * @property {Number} pageX - The X coordinate of the cursor relative to the viewport, including any\n *   scroll offset.\n * @property {Number} pageY - The Y coordinate of the cursor relative to the viewport, including any\n *   scroll offset.\n * @property {Number} screenX - The X coordinate of the cursor relative to the screen, not including\n *   any scroll offset.\n * @property {Number} screenY - The Y coordinate of the cursor relative to the screen, not including\n *   any scroll offset.\n */\n\n/**\n* @private\n*/\n\n/**\n* @private\n*/\nvar dispatcher = module.exports = dispatcher =\n\t/** @lends enyo.dispatcher.prototype */ {\n\n\t$: {},\n\n\t/**\n\t* These events come from document\n\t*\n\t* @private\n\t*/\n\tevents: [\"mousedown\", \"mouseup\", \"mouseover\", \"mouseout\", \"mousemove\", \"mousewheel\",\n\t\t\"click\", \"dblclick\", \"change\", \"keydown\", \"keyup\", \"keypress\", \"input\",\n\t\t\"paste\", \"copy\", \"cut\", \"webkitTransitionEnd\", \"transitionend\", \"webkitAnimationEnd\", \"animationend\",\n\t\t\"webkitAnimationStart\", \"animationstart\", \"webkitAnimationIteration\", \"animationiteration\"],\n\n\t/**\n\t* These events come from window\n\t*\n\t* @private\n\t*/\n\twindowEvents: [\"resize\", \"load\", \"unload\", \"message\", \"hashchange\", \"popstate\", \"focus\", \"blur\"],\n\n\t/**\n\t* Feature plugins (aka filters)\n\t*\n\t* @private\n\t*/\n\tfeatures: [],\n\n\t/**\n\t* @private\n\t*/\n\tconnect: function() {\n\t\tvar d = dispatcher, i, n;\n\t\tfor (i=0; (n=d.events[i]); i++) {\n\t\t\td.listen(document, n);\n\t\t}\n\t\tfor (i=0; (n=d.windowEvents[i]); i++) {\n\t\t\t// Chrome Packaged Apps don't like \"unload\"\n\t\t\tif(n === \"unload\" &&\n\t\t\t\t(typeof global.chrome === \"object\") &&\n\t\t\t\tglobal.chrome.app) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\td.listen(window, n);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlisten: function(inListener, inEventName, inHandler) {\n\t\tif (inListener.addEventListener) {\n\t\t\tthis.listen = function(inListener, inEventName, inHandler) {\n\t\t\t\tinListener.addEventListener(inEventName, inHandler || dispatch, false);\n\t\t\t};\n\t\t} else {\n\t\t\t//enyo.log(\"IE8 COMPAT: using 'attachEvent'\");\n\t\t\tthis.listen = function(inListener, inEvent, inHandler) {\n\t\t\t\tinListener.attachEvent(\"on\" + inEvent, function(e) {\n\t\t\t\t\te.target = e.srcElement;\n\t\t\t\t\tif (!e.preventDefault) {\n\t\t\t\t\t\te.preventDefault = this.iePreventDefault;\n\t\t\t\t\t}\n\t\t\t\t\treturn (inHandler || dispatch)(e);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\tthis.listen(inListener, inEventName, inHandler);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopListening: function(inListener, inEventName, inHandler) {\n\t\tif (inListener.addEventListener) {\n\t\t\tthis.stopListening = function(inListener, inEventName, inHandler) {\n\t\t\t\tinListener.removeEventListener(inEventName, inHandler || dispatch, false);\n\t\t\t};\n\t\t} else {\n\t\t\t//enyo.log(\"IE8 COMPAT: using 'detachEvent'\");\n\t\t\tthis.stopListening = function(inListener, inEvent, inHandler) {\n\t\t\t\tinListener.detachEvent(\"on\" + inEvent, inHandler || dispatch);\n\t\t\t};\n\t\t}\n\t\tthis.stopListening(inListener, inEventName, inHandler);\n\t},\n\n\t/**\n\t* Fires an event for Enyo to listen for.\n\t*\n\t* @private\n\t*/\n\tdispatch: function(e) {\n\t\t// Find the control who maps to e.target, or the first control that maps to an ancestor of e.target.\n\t\tvar c = this.findDispatchTarget(e.target) || this.findDefaultTarget();\n\t\t// Cache the original target\n\t\te.dispatchTarget = c;\n\t\t// support pluggable features return true to abort immediately or set e.preventDispatch to avoid processing.\n\t\tfor (var i=0, fn; (fn=this.features[i]); i++) {\n\t\t\tif (fn.call(this, e) === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (c && !e.preventDispatch) {\n\t\t\treturn this.dispatchBubble(e, c);\n\t\t}\n\t},\n\n\t/**\n\t* Takes an event target and finds the corresponding Enyo control.\n\t*\n\t* @private\n\t*/\n\tfindDispatchTarget: function(inNode) {\n\t\tvar t, n = inNode;\n\t\t// FIXME: Mozilla: try/catch is here to squelch \"Permission denied to access property xxx from a non-chrome context\"\n\t\t// which appears to happen for scrollbar nodes in particular. It's unclear why those nodes are valid targets if\n\t\t// it is illegal to interrogate them. Would like to trap the bad nodes explicitly rather than using an exception block.\n\t\ttry {\n\t\t\twhile (n) {\n\t\t\t\tif ((t = this.$[n.id])) {\n\t\t\t\t\t// there could be multiple nodes with this id, the relevant node for this event is n\n\t\t\t\t\t// we don't push this directly to t.node because sometimes we are just asking what\n\t\t\t\t\t// the target 'would be' (aka, calling findDispatchTarget from handleMouseOverOut)\n\t\t\t\t\tt.eventNode = n;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tn = n.parentNode;\n\t\t\t}\n\t\t} catch(x) {\n\t\t\tlogger.log(x, n);\n\t\t}\n\t\treturn t;\n\t},\n\n\t/**\n\t* Returns the default Enyo control for events.\n\t*\n\t* @private\n\t*/\n\tfindDefaultTarget: function() {\n\t\treturn master;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdispatchBubble: function(e, c) {\n\t\tvar type = e.type;\n\t\ttype = e.customEvent ? type : \"on\" + type;\n\t\treturn c.bubble(type, e, c);\n\t}\n};\n\n/**\n* Called in the context of an event.\n*\n* @private\n*/\ndispatcher.iePreventDefault = function() {\n\ttry {\n\t\tthis.returnValue = false;\n\t}\n\tcatch(e) {\n\t\t// do nothing\n\t}\n};\n\n/**\n* @private\n*/\nfunction dispatch (inEvent) {\n\treturn dispatcher.dispatch(inEvent);\n};\n\n/**\n* @private\n*/\ndispatcher.bubble = function(inEvent) {\n\t// '|| window.event' clause needed for IE8\n\tvar e = inEvent || global.event;\n\tif (e) {\n\t\t// We depend on e.target existing for event tracking and dispatching.\n\t\tif (!e.target) {\n\t\t\te.target = e.srcElement;\n\t\t}\n\t\tdispatcher.dispatch(e);\n\t}\n};\n\n// This string is set on event handlers attributes for DOM elements that\n// don't normally bubble (like onscroll) so that they can participate in the\n// Enyo event system.\ndispatcher.bubbler = \"enyo.bubble(arguments[0])\";\n\n// The code below helps make Enyo compatible with Google Packaged Apps\n// Content Security Policy(http://developer.chrome.com/extensions/contentSecurityPolicy.html),\n// which, among other things, forbids the use of inline scripts.\n// We replace online scripting with equivalent means, leaving enyo.bubbler\n// for backward compatibility.\n(function() {\n\tvar bubbleUp = function() {\n\t\tdispatcher.bubble(arguments[0]);\n\t};\n\n\t/**\n\t* Makes given events bubble on a specified Enyo control.\n\t*\n\t* @private\n\t*/\n\tdispatcher.makeBubble = function() {\n\t\tvar args = Array.prototype.slice.call(arguments, 0),\n\t\t\tcontrol = args.shift();\n\n\t\tif((typeof control === \"object\") && (typeof control.hasNode === \"function\")) {\n\t\t\tutils.forEach(args, function(event) {\n\t\t\t\tif(this.hasNode()) {\n\t\t\t\t\tdispatcher.listen(this.node, event, bubbleUp);\n\t\t\t\t}\n\t\t\t}, control);\n\t\t}\n\t};\n\n\t/**\n\t* Removes the event listening and bubbling initiated by\n\t* [enyo.makeBubble()]{@link enyo.makeBubble} on a specific control.\n\t*\n\t* @private\n\t*/\n\tdispatcher.unmakeBubble = function() {\n\t\tvar args = Array.prototype.slice.call(arguments, 0),\n\t\t\tcontrol = args.shift();\n\n\t\tif((typeof control === \"object\") && (typeof control.hasNode === \"function\")) {\n\t\t\tutils.forEach(args, function(event) {\n\t\t\t\tif(this.hasNode()) {\n\t\t\t\t\tdispatcher.stopListening(this.node, event, bubbleUp);\n\t\t\t\t}\n\t\t\t}, control);\n\t\t}\n\t};\n})();\n\n/**\n* @private\n*/\n// FIXME: we need to create and initialize dispatcher someplace else to allow overrides\nDom.requiresWindow(dispatcher.connect);\n\n/**\n* Generates a tapped event for a raw-click event.\n*\n* @private\n*/\ndispatcher.features.push(\n\tfunction (e) {\n\t\tif (\"click\" === e.type) {\n\t\t\tif (e.clientX === 0 && e.clientY === 0) {\n\t\t\t\t// this allows the click to dispatch as well\n\t\t\t\t// but note the tap event will fire first\n\t\t\t\tvar cp = utils.clone(e);\n\t\t\t\tcp.type = \"tap\";\n\t\t\t\tcp.preventDefault = utils.nop;\n\t\t\t\tdispatcher.dispatch(cp);\n\t\t\t}\n\t\t}\n\t}\n);\n\n/**\n* Instead of having multiple `features` pushed and handled in separate methods\n* for these events, we handle them uniformly here to expose the last known\n* interaction coordinates as accurately as possible.\n*\n* @private\n*/\nvar _xy = {};\ndispatcher.features.push(\n\tfunction (e) {\n\t\tif (\n\t\t\t(e.type == \"mousemove\")  ||\n\t\t\t(e.type == \"tap\")        ||\n\t\t\t(e.type == \"click\")      ||\n\t\t\t(e.type == \"touchmove\")\n\t\t) {\n\t\t\t_xy.clientX = e.clientX;\n\t\t\t_xy.clientY = e.clientY;\n\t\t\t// note only ie8 does not support pageX/pageY\n\t\t\t_xy.pageX   = e.pageX;\n\t\t\t_xy.pageY   = e.pageY;\n\t\t\t// note ie8 and opera report these values incorrectly\n\t\t\t_xy.screenX = e.screenX;\n\t\t\t_xy.screenY = e.screenY;\n\t\t}\n\t}\n);\n\n/**\n* Retrieves the last known coordinates of the cursor or user-interaction point\n* in touch environments. Returns an immutable object with the `clientX`,\n* `clientY`, `pageX`, `pageY`, `screenX`, and `screenY` properties. It is\n* important to note that IE8 and Opera have improper reporting for the\n* `screenX` and `screenY` properties (they both use CSS pixels as opposed to\n* device pixels) and IE8 has no support for the `pageX` and `pageY` properties,\n* so they are facaded.\n*\n* @returns {enyo.dispatcher~CursorCoordinates} An [object]{@glossary Object} describing the\n*\tthe last known coordinates of the cursor or user-interaction point in touch environments.\n* @public\n*/\ndispatcher.getPosition = function () {\n\tvar p = utils.clone(_xy);\n\t// if we are in ie8 we facade the _pageX, pageY_ properties\n\tif (platform.ie < 9) {\n\t\tvar d = (document.documentElement || document.body.parentNode || document.body);\n\t\tp.pageX = (p.clientX + d.scrollLeft);\n\t\tp.pageY = (p.clientY + d.scrollTop);\n\t}\n\treturn p;\n};\n\n\n/**\n* Key mapping feature: Adds a `keySymbol` property to key [events]{@glossary event},\n* based on a global key mapping. Use\n* [enyo.dispatcher.registerKeyMap()]{@link enyo.dispatcher.registerKeyMap} to add\n* keyCode-to-keySymbol mappings via a simple hash. This method may be called\n* multiple times from different libraries to mix different maps into the global\n* mapping table; if conflicts arise, the last-in wins.\n*\n* ```\n* enyo.dispatcher.registerKeyMap({\n* \t415 : 'play',\n* \t413 : 'stop',\n* \t19  : 'pause',\n* \t412 : 'rewind',\n* \t417 : 'fastforward'\n* });\n* ```\n* \n* @private\n*/\ndispatcher.features.push(function(e) {\n\tif ((e.type === 'keydown') || (e.type === 'keyup') || (e.type === 'keypress')) {\n\t\te.keySymbol = this.keyMap[e.keyCode];\n\t\t// Dispatch key events to be sent via Signals\n\t\tvar c = this.findDefaultTarget();\n\t\tif (e.dispatchTarget !== c) {\n\t\t\tthis.dispatchBubble(e, c);\n\t\t}\n\t}\n});\n\nutils.mixin(dispatcher, {\n\tkeyMap: {},\n\tregisterKeyMap: function(map) {\n\t\tutils.mixin(this.keyMap, map);\n\t}\n});\n\n\n/**\n* Event modal capture feature. Capture events to a specific control via\n* [enyo.dispatcher.capture(inControl, inShouldForward)]{@linkcode enyo.dispatcher.capture};\n* release events via [enyo.dispatcher.release()]{@link enyo.dispatcher.release}.\n*\n* @private\n*/\ndispatcher.features.push(function(e) {\n\tif (this.captureTarget) {\n\t\tvar c = e.dispatchTarget;\n\t\tvar eventName = (e.customEvent ? '' : 'on') + e.type;\n\t\tvar handlerName = this.captureEvents[eventName];\n\t\tvar handlerScope = this.captureHandlerScope || this.captureTarget;\n\t\tvar handler = handlerName && handlerScope[handlerName];\n\t\tvar shouldCapture = handler && !(c && c.isDescendantOf && c.isDescendantOf(this.captureTarget));\n\t\tif (shouldCapture) {\n\t\t\tvar c1 = e.captureTarget = this.captureTarget;\n\t\t\t// NOTE: We do not want releasing capture while an event is being processed to alter\n\t\t\t// the way the event propagates. Therefore decide if the event should forward\n\t\t\t// before the capture target receives the event (since it may release capture).\n\t\t\te.preventDispatch = handler && handler.apply(handlerScope, [c1, e]) && !this.autoForwardEvents[e.type];\n\t\t}\n\t}\n});\n\n//\n//        NOTE: This object is a plug-in; these methods should\n//        be called on `enyo.dispatcher`, and not on the plug-in itself.\n//\nutils.mixin(dispatcher, {\n\n\t/**\n\t* @private\n\t*/\n\tautoForwardEvents: {leave: 1, resize: 1},\n\n\t/**\n\t* @private\n\t*/\n\tcaptures: [],\n\n\t/** \n\t* Captures [events]{@glossary event} for `inTarget`, where `inEvents` is specified as a\n\t* hash of event names mapped to callback handler names to be called on `inTarget` (or,\n\t* optionally, `inScope`). The callback is called when any of the captured events are\n\t* dispatched outside of the capturing control. Returning `true` from the callback stops\n\t* dispatch of the event to the original `dispatchTarget`.\n\t*\n\t* @private\n\t*/\n\tcapture: function(inTarget, inEvents, inScope) {\n\t\tvar info = {target: inTarget, events: inEvents, scope: inScope};\n\t\tthis.captures.push(info);\n\t\tthis.setCaptureInfo(info);\n\t},\n\n\t/**\n\t* Removes the specified target from the capture list.\n\t* \n\t* @private\n\t*/\n\trelease: function(inTarget) {\n\t\tfor (var i = this.captures.length - 1; i >= 0; i--) {\n\t\t\tif (this.captures[i].target === inTarget) {\n\t\t\t\tthis.captures.splice(i,1);\n\t\t\t\tthis.setCaptureInfo(this.captures[this.captures.length-1]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Sets the information for a captured {@glossary event}.\n\t* \n\t* @private\n\t*/\n\tsetCaptureInfo: function(inInfo) {\n\t\tthis.captureTarget = inInfo && inInfo.target;\n\t\tthis.captureEvents = inInfo && inInfo.events;\n\t\tthis.captureHandlerScope = inInfo && inInfo.scope;\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tready = require('./ready'),\n\tdispatcher = require('./dispatcher');\n\nvar\n\tController = require('./Controller');\n\n/**\n* Any instance of a router will be referenced here for the global hash change handler.\n* \n* @private\n*/\nvar listeners = [];\n\n/**\n* This is the intended global `window.hashchange` event handler. If another handler is\n* arbitrarily registered for this event, then it will not fire.\n* \n* @private\n*/\nvar hashDidChange = function (hash) {\n\tvar list = listeners;\n\tvar len = list.length;\n\tvar idx = 0;\n\tfor (; idx < len; ++idx) {\n\t\tlist[idx]._hashChanged(hash);\n\t}\n};\n\n/*\n* @private\n*/\nvar token = /\\:[a-zA-Z0-9]*/g;\n\n/*\n* @private\n*/\nvar prepare = function (str) {\n\treturn str[0] === '#'? str.slice(1): str;\n};\n\n/**\n* All of our actively-supported browsers support this method of registering\n* for `hashchange` events.\n* \n* @private\n*/\nready(function () {\n\tdispatcher.listen(global, 'hashchange', hashDidChange);\n});\n\n/**\n* {@link enyo.Router} is a controller with the ability to interpret changes in\n* the URL and make changes to the URL in a manner that is compatible across\n* browsers. With defined route handling, the application state can be managed\n* more closely with respect to the location state of the browser. There may be\n* multiple router instances active at any one time. Routers only interact with\n* the hash portion of the browser location and will not force a reload of the\n* current page.\n*\n* [Routes]{@link enyo.Router#routes} may be defined in several ways and\n* may be added at startup or [added programmatically]{@link enyo.Router#addRoute}\n* at a later time.\n*\n* A route is a declarative hash with the following structure:\n*\n* ```\n* {path: 'some/path', handler: 'function', context: 'context'}\n* ```\n*\n* The `path` is a string that may be static (explicitly matched) or dynamic\n* (matched based on dynamic placeholders). Dynamic paths may name elements to\n* be matched, e.g.:\n*\n* ```\n* {path: ':user/:id'}\n* ```\n*\n* In this case, `handler` would be called with two parameters filled with\n* the values matched by that structure. It is important to note that a dynamic\n* route will apply the first match it finds, so care must be taken to ensure\n* that the correct route is matched (e.g., `/users/:user/:id` is more exact\n* because it includes the static `users` portion of the path).\n*\n* `handler` may be a function reference or a string that will be mapped to a\n* function. A check for the function's existence is conducted first on the\n* router, then on any provided context, and finally in the global scope. If a\n* context is provided, the function will be executed under that context\n* regardless of where the function was found.\n*\n* The `context` property may be an object, an instance, or a string that will\n* be mapped to an object, if possible.\n*\n* Note that, currently, only letters and numbers are supported in dynamic routes.\n* \n* @class enyo.Router\n* @extends enyo.Controller\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Router.prototype */ {\n\n\tname: 'enyo.Router',\n\n\t// ...........................\n\t// PUBLIC PROPERTIES\n\n\t/**\n\t* If `true`, the router will respond to hash changes or internal events. If this flag is set\n\t* to `false`, it will stop responding. This may be changed at any time.\n\t* \n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tlistening: true,\n\n\t/**\n\t* If `true`, the router will neither respond to hash changes in the browser\n\t* nor be able to trigger them. Instead, the router may be used internally to\n\t* maintain or trigger state changes in an application without changing\n\t* location.\n\t* \n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tinternalOnly: false,\n\n\t/**\n\t* Set this to `true` to force the current browser location to a particular\n\t* path on startup. This flag will be ignored if\n\t* [triggerOnStart]{@link enyo.Router#triggerOnStart} is `false`.\n\t* \n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tdefaultPathOnStart: false,\n\n\t/**\n\t* The `defaultRoute` should have the same structure as a normal route (hash). It may be\n\t* arbitrarily assigned to this property or mixed into the\n\t* [routes]{@link enyo.Router#routes} array with a special `default: true` flag set. For\n\t* any unmatched hash changes, this route will be executed and passed the path that was not\n\t* matched.\n\t* \n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tdefaultRoute: null,\n\n\t/**\n\t* By default, when a router is created, it will attempt to trigger the correct route for the\n\t* current browser location. Set this flag to `false` to prevent this behavior.\n\t* \n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\ttriggerOnStart: true,\n\n\t/**\n\t* The router will attempt to track history based on the events that have been generated\n\t* through it. This allows the usage of the browser's 'Back' and 'Forward' buttons.\n\t* \n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tuseHistory: false,\n\n\t/**\n\t* The `routes` [array]{@glossary Array} specifies the handlers for\n\t* the current Router instance. Routes are string paths, static or dynamic,\n\t* that route particular `hashchange` events. They are defined in an array of\n\t* [hashes]{@glossary Object} with a `handler` (function name), `path`\n\t* (for static and dynamic paths), an optional `context` (for the `handler`),\n\t* or a `default` Boolean `true`|`false` value indicating whether the handler\n\t* should be used when no other route can handle the `hashchange` event.\n\t* \n\t* @example\n\t* routes: [\n\t*     {path: 'users/:userName', handler: 'loadUser'},\n\t*     {path: 'users', handler: 'usersIndex'},\n\t*     {path: 'about/moreDetail', handler: 'detailedAboutScreen'},\n\t*     {path: 'about', handler: 'aboutScreen'},\n\t*     {path: 'home', handler: 'homeScreen', default: true},\n\t*     {path: '', handler: 'handleBlankRoute'}\n\t* ]\n\t* \n\t* @type {Array}\n\t* @public\n\t*/\n\troutes: null,\n\n\t// ...........................\n\t// PROTECTED PROPERTIES\n\n\t/*\n\t* @private\n\t*/\n\tkind: Controller,\n\n\t/*\n\t* @private\n\t*/\n\t_staticRoutes: null,\n\n\t/*\n\t* @private\n\t*/\n\t_dynamicRoutes: null,\n\n\t/*\n\t* @private\n\t*/\n\t_current: '',\n\n\t/*\n\t* @private\n\t*/\n\t_history: null,\n\n\t// ...........................\n\t// COMPUTED PROPERTIES\n\t\n\tcomputed: [\n\t\t{method: 'location', path: '_current', config: {cached: true}},\n\t\t{method: 'defaultPath'}\n\t],\n\n\t/**\n\t* A computed property that returns the location as known by this router. This property\n\t* will be synchronized with [window.location.hash]{@glossary window.location}\n\t* unless the [internalOnly]{@link enyo.Router#internalOnly} flag is set to `true`.\n\t* Passing a string to this property via `_set('location', 'mylocation')` will update the\n\t* inner location known by this router.\n\t*\n\t* @public\n\t*/\n\tlocation: function (loc) {\n\t\tif (loc) {\n\t\t\tloc = prepare(loc);\n\t\t\tif (!this.internalOnly) {\n\t\t\t\tutils.asyncMethod(this, 'trigger', {location: loc, change: true});\n\t\t\t} else {\n\t\t\t\tthis.set('_current', loc);\n\t\t\t}\n\t\t} else {\n\t\t\treturn prepare(this.get('_current'));\n\t\t}\n\t},\n\n\t/**\n\t* Returns the string for the default path, or an empty string if no default\n\t* path exists.\n\t*\n\t* @public\n\t*/\n\tdefaultPath: function () {\n\t\treturn this.defaultRoute ? this.defaultRoute.path: '';\n\t},\n\n\t// ...........................\n\t// PUBLIC METHODS\n\n\t/**\n\t* Triggers a change without necessarily requiring a change to occur. If\n\t* called without a parameter, it will force the route that matches the\n\t* current browser location to fire. If a string is passed in, this method\n\t* will trigger an internal-only event (i.e., the browser location will not\n\t* be changed). If it is passed a hash, the method will try to use a\n\t* `location` property while looking for optional `change` and `global`\n\t* properties.\n\t*\n\t* If the `change` property is present and `true`, it will force a\n\t* [location.hash]{@glossary window.location} change in the\n\t* browser (this is always global). If the `global` property is present and\n\t* `true` and `change` is not present or `false`, it will trigger an internal\n\t* event that all routers will respond to (not just this instance).\n\t*\n\t* @public\n\t*/\n\ttrigger: function (params) {\n\t\tif (!params) {\n\t\t\tparams = {location: this.get('_current')};\n\t\t} else if ('string' === typeof params) {\n\t\t\tparams = {location: params};\n\t\t}\n\t\tvar loc = params.location;\n\t\tvar isGlobal = params.global;\n\t\tvar change = params.change;\n\t\tvar current = this.get('location');\n\t\tif (change) {\n\t\t\tif (current !== loc) {\n\t\t\t\tglobal.location.hash = loc;\n\t\t\t} else {\n\t\t\t\tthis._hashChanged(loc);\n\t\t\t}\n\t\t} else {\n\t\t\tif (isGlobal) {\n\t\t\t\thashDidChange(loc);\n\t\t\t} else {\n\t\t\t\tthis._hashChanged(loc);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* In very rare circumstances, it may be useful to pass a path to the\n\t* [routes]{@link enyo.Router#routes} without using\n\t* [trigger()]{@link enyo.Router#trigger} or global hash changes with\n\t* `path` being a string that will be evaluated against the routes owned by\n\t* this router.\n\t*\n\t* @param {String} path - A path to test against this router's\n\t*\t[routes]{@link enyo.Router#routes}.\n\t* @public\n\t*/\n\thandle: function (path) {\n\t\t// fast track is to check against static routes first\n\t\tif (this._handleStatic(path)) {\n\t\t\treturn;\n\t\t}\n\t\t// then we check against dynamic paths in this simple scheme\n\t\telse if (this._handleDynamic(path)) {\n\t\t\t/* do nothing */\n\t\t}\n\t\telse {\n\t\t\tthis._handleDefault(path);\n\t\t}\n\t},\n\n\t/**\n\t* If history is enabled and some history exists, attempts to revert the\n\t* current known location to the previous one in the stack.\n\t*\n\t* @public\n\t*/\n\tback: function () {\n\t\tif (this.useHistory) {\n\t\t\tif (this._history.length >= 2) {\n\t\t\t\t// we shift the current location off the stack\n\t\t\t\tthis._history.shift();\n\t\t\t\t// we shift the requested location off the stack\n\t\t\t\t// but reapply it\n\t\t\t\tthis.set('location', this._history.shift());\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Arbitrarily adds history. The optional second parameter may be set to a\n\t* boolean `true` to add the location at the lowest (first) position in the\n\t* stack, or to an integer indicating the exact position for the location in\n\t* the stack. If the index is out of bounds, the location will be added at\n\t* the lowest position (the same as if boolean `true` is passed as the second\n\t* parameter). Returns callee for chaining.\n\t*\n\t* @param {String} location - The location string to add to the history.\n\t* @param {(Number|Boolean)} [idx] - Position in the history stack where the\n\t* new location should be added. Pass `true` for the first/oldest position,\n\t* or a number indicating the index where the location should be added. If no\n\t* value (or `undefined`) is specified, the location will be added at the\n\t*\tlast/most-recent position in the history stack.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddHistory: function (location, idx) {\n\t\tif (this.useHistory) {\n\t\t\tswitch (typeof idx) {\n\t\t\tcase 'undefined':\n\t\t\t\tthis._history.unshift(location);\n\t\t\t\tbreak;\n\t\t\tcase 'number':\n\t\t\t\tif (idx >= 0 && idx < this._history.length) {\n\t\t\t\t\tthis._history.splice(idx, 0, location);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'boolean':\n\t\t\t\tthis._history.push(location);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t/**\n\t* Clears any history the router has stored. Returns callee for chaining.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tclearHistory: function () {\n\t\tthis._history = [];\n\t\treturn this;\n\t},\n\n\t/**\n\t* May be used to programmatically add [routes]{@link enyo.Router#routes}\n\t* to the router. `route` is a hash as described by the\n\t* [routes]{@link enyo.Router#routes} array. Returns callee for chaining.\n\t*\n\t* @param {Object} route - The route to add.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddRoute: function (route) {\n\t\tvar statics = this._staticRoutes;\n\t\tvar dynamic = this._dynamicRoutes;\n\t\tvar regex;\n\t\tif (true === route['default']) {\n\t\t\tthis.defaultRoute = route;\n\t\t}\n\t\telse if (token.test(route.path)) {\n\t\t\ttoken.lastIndex = 0;\n\t\t\t// regex = new RegExp(route.path.replace(token, '([a-zA-Z0-9-]*)'));\n\t\t\tregex = new RegExp(route.path.replace(token, '([a-zA-Z0-9-.]*)'));\n\t\t\troute.regex = regex;\n\t\t\tdynamic.push(route);\n\t\t} else {\n\t\t\tstatics[route.path] = route;\n\t\t}\n\t\treturn this;\n\t},\n\n\t// ...........................\n\t// PROTECTED METHODS\n\n\t/*\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis._staticRoutes = {};\n\t\t\tthis._dynamicRoutes = [];\n\t\t\tthis.routes = this.routes || [];\n\t\t\tthis._history = this._history || [];\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// make sure to initialize our routes prior\n\t\t\t// to registering for events\n\t\t\tthis._setupRoutes();\n\t\t\t// make sure we're up to date\n\t\t\tthis.set('_current', prepare(window.location.hash));\n\t\t\t// ok, register for events\n\t\t\tlisteners.push(this);\n\t\t\t// ok, if we need to go ahead and route our current\n\t\t\t// location, lets do it, but let create finish first\n\t\t\tif (this.triggerOnStart) {\n\t\t\t\tif (this.defaultPathOnStart) {\n\t\t\t\t\tutils.asyncMethod(this, 'trigger', {change: true, location: this.get('defaultPath')});\n\t\t\t\t} else {\n\t\t\t\t\tutils.asyncMethod(this, 'trigger');\n\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar idx = utils.indexOf(this, listeners);\n\t\t\tif (!~idx) {\n\t\t\t\tlisteners.splice(idx, 1);\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\t_hashChanged: function (hash) {\n\t\tvar $hash = (function (prop) {\n\t\t\tif (!utils.isString(prop)) {\n\t\t\t\t// some browsers do not support the newUrl property\n\t\t\t\t// so we're forced to look at the current hash\n\t\t\t\tprop = prop.newUrl || global.location.hash;\n\t\t\t}\n\t\t\treturn prepare(prop);\n\t\t})(hash);\n\t\tif (this.listening) {\n\t\t\tthis.set('_current', $hash);\n\t\t\tthis.handle($hash);\n\t\t}\n\t},\n\n\t/*\n\t* @private\n\t*/\n\t_execHandler: function (context, handler, args, route) {\n\t\tvar $fn = handler;\n\t\tvar $ctx = 'string' === typeof context? utils.getPath.call(this, context): context;\n\t\t// if the handler is defined as a string, we need to determine if it is relative to the\n\t\t// router, relative to the owner, relative to the context, or a named function in the\n\t\t// global scope\n\t\tif ('string' === typeof handler) {\n\t\t\tif (typeof this[handler] === 'function') {\n\t\t\t\t$fn = this[handler];\n\t\t\t\t$ctx = $ctx || this;\n\t\t\t} else if (typeof this.owner[handler] === 'function') {\n\t\t\t\t$fn = this.owner[handler];\n\t\t\t\t$ctx = $ctx || this.owner;\n\t\t\t} else if (typeof $ctx[handler] === 'function') {\n\t\t\t\t$fn = $ctx[handler];\n\t\t\t}\n\t\t\tif ('function' === typeof $fn) {\n\t\t\t\t// in case we actually found it, let's not go hunting\n\t\t\t\t// next time\n\t\t\t\troute.handler = $fn;\n\t\t\t\troute.context = $ctx;\n\t\t\t}\n\t\t}\n\t\t// if we have an actual handler, let's execute it now\n\t\tif ($fn && 'function' === typeof $fn) {\n\t\t\t$fn.apply($ctx, args);\n\t\t\treturn true;\n\t\t}\n\t\t// otherwise we couldn't determine what we were supposed to\n\t\t// do here\n\t\treturn false;\n\t},\n\n\t/*\n\t* @private\n\t*/\n\t_handleStatic: function (path) {\n\t\tvar statics = this._staticRoutes;\n\t\tvar route;\n\t\tvar handler;\n\t\tvar context;\n\t\tif ((route = statics[path])) {\n\t\t\thandler = route.handler;\n\t\t\tcontext = route.context;\n\t\t\treturn this._execHandler(context, handler, [path], route);\n\t\t}\n\t\treturn false;\n\t},\n\n\t/*\n\t* @private\n\t*/\n\t_handleDynamic: function (path) {\n\t\tvar dynamic = this._dynamicRoutes;\n\t\tvar regex;\n\t\tvar route;\n\t\tvar handler;\n\t\tvar context;\n\t\tvar matches;\n\t\tvar idx = 0;\n\t\tvar len = dynamic.length;\n\t\tfor (; idx < len; ++idx) {\n\t\t\troute = dynamic[idx];\n\t\t\tregex = route.regex;\n\t\t\tif ((matches = regex.exec(path))) {\n\t\t\t\t// we need to strip off the full match so we can\n\t\t\t\t// use the other matches as parameters\n\t\t\t\tmatches = matches.slice(1);\n\t\t\t\thandler = route.handler;\n\t\t\t\tcontext = route.context;\n\t\t\t\treturn this._execHandler(context, handler, matches, route);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/*\n\t* @private\n\t*/\n\t_handleDefault: function (path) {\n\t\tvar route = this.defaultRoute || {};\n\t\tvar context = route.context;\n\t\tvar handler = route.handler;\n\t\treturn this._execHandler(context, handler, [path], route);\n\t},\n\n\t/*\n\t* @private\n\t*/\n\t_setupRoutes: function () {\n\t\tvar routes = this.routes;\n\t\tvar idx = 0;\n\t\tvar len = routes.length;\n\t\tvar route;\n\t\tfor (; idx < len; ++idx) {\n\t\t\troute = routes[idx];\n\t\t\tif (!route) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis.addRoute(route);\n\t\t}\n\t},\n\n\t/*\n\t* @private\n\t*/\n\t_currentChanged: function () {\n\t\tif (this.useHistory) {\n\t\t\tthis._history.unshift(this.get('location'));\n\t\t}\n\t}\n\n});","require('../../../enyo');\n\n\n\nvar\n\tdispatcher = require('../dispatcher'),\n\tutils = require('../utils');\nvar\n\tSignals = require('../Signals'),\n\tReady = require('../ready');\n\n/**\n* Normalizes and provides fullscreen support for [controls]{@link enyo.Control},\n* based on the [fullscreen]{@glossary fullscreen} API.\n*\n* @name enyo.fullscreen\n* @type Object\n* @public\n*/\nvar fullscreen = module.exports = {\n\t\n\t/**\n\t* Reference to the current fullscreen [control]{@link enyo.Control}.\n\t*\n\t* @private\n\t*/\n\tfullscreenControl: null,\n\n\t/**\n\t* Reference to the current fullscreen element (fallback for platforms\n\t* without native support).\n\t*\n\t* @private\n\t*/\n\tfullscreenElement: null,\n\n\t/** \n\t* Reference to that [control]{@link enyo.Control} that requested fullscreen.\n\t* \n\t* @private\n\t*/\n\trequestor: null,\n\n\t/** \n\t* Native accessor used to get reference to the current fullscreen element.\n\t*\n\t* @private\n\t*/\n\telementAccessor:\n\t\t('fullscreenElement' in document) ? 'fullscreenElement' :\n\t\t('mozFullScreenElement' in document) ? 'mozFullScreenElement' :\n\t\t('webkitFullscreenElement' in document) ? 'webkitFullscreenElement' :\n\t\tnull,\n\n\t/** \n\t* Native accessor used to request fullscreen.\n\t*\n\t* @private\n\t*/\n\trequestAccessor:\n\t\t('requestFullscreen' in document.documentElement) ? 'requestFullscreen' :\n\t\t('mozRequestFullScreen' in document.documentElement) ? 'mozRequestFullScreen' :\n\t\t('webkitRequestFullscreen' in document.documentElement) ? 'webkitRequestFullscreen' :\n\t\tnull,\n\n\t/** \n\t* Native accessor used to cancel fullscreen.\n\t*\n\t* @private\n\t*/\n\tcancelAccessor:\n\t\t('cancelFullScreen' in document) ? 'cancelFullScreen' :\n\t\t('mozCancelFullScreen' in document) ? 'mozCancelFullScreen' :\n\t\t('webkitCancelFullScreen' in document) ? 'webkitCancelFullScreen' :\n\t\tnull,\n\n\t/**\n\t* Determines whether the platform supports the [fullscreen]{@glossary fullscreen} API.\n\t* \n\t* @returns {Boolean} Returns `true` if platform supports all of the \n\t*\t[fullscreen]{@glossary fullscreen} API, `false` otherwise.\n\t* @public\n\t*/\n\tnativeSupport: function() {\n\t\treturn (this.elementAccessor !== null && this.requestAccessor !== null && this.cancelAccessor !== null);\n\t},\n\n\t/** \n\t* Normalizes `getFullscreenElement()`.\n\t*\n\t* @public\n\t*/\n\tgetFullscreenElement: function() {\n\t\treturn (this.nativeSupport()) ? document[this.elementAccessor] : this.fullscreenElement;\n\t},\n\n\t/** \n\t* Returns current fullscreen [control]{@link enyo.Control}.\n\t*\n\t* @public\n\t*/\n\tgetFullscreenControl: function() {\n\t\treturn this.fullscreenControl;\n\t},\n\n\t/**\n\t* Normalizes `requestFullscreen()`.\n\t*\n\t* @public\n\t*/\n\trequestFullscreen: function(ctl) {\n\t\tif (this.getFullscreenControl() || !(ctl.hasNode())) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.requestor = ctl;\n\n\t\t// Only use native request if platform supports all of the API\n\t\tif (this.nativeSupport()) {\n\t\t\tctl.hasNode()[this.requestAccessor]();\n\t\t} else {\n\t\t\tthis.fallbackRequestFullscreen();\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/** \n\t* Normalizes `cancelFullscreen()`.\n\t*\n\t* @public\n\t*/\n\tcancelFullscreen: function() {\n\t\tif (this.nativeSupport()) {\n\t\t\tdocument[this.cancelAccessor]();\n\t\t} else {\n\t\t\tthis.fallbackCancelFullscreen();\n\t\t}\n\t},\n\n\t/** \n\t* Fallback support for setting fullscreen element (done by browser on platforms with\n\t* native support).\n\t*\n\t* @private\n\t*/\n\tsetFullscreenElement: function(node) {\n\t\tthis.fullscreenElement = node;\n\t},\n\n\t/** \n\t* Sets current fullscreen [control]{@link enyo.Control}.\n\t*\n\t* @private\n\t*/\n\tsetFullscreenControl: function(ctl) {\n\t\tthis.fullscreenControl = ctl;\n\t},\n\n\t/** \n\t* Fallback fullscreen request for platforms without fullscreen support.\n\t*\n\t* @private\n\t*/\n\tfallbackRequestFullscreen: function() {\n\t\tvar control = this.requestor;\n\n\t\tif (!control) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get before node to allow us to exit floating layer to the proper position\n\t\tcontrol.prevAddBefore = control.parent.controlAtIndex(control.indexInContainer() + 1);\n\t\t\n\t\tvar floatingLayer = Control.floatingLayer;\n\t\t\n\t\t// Render floating layer if we need to\n\t\tif (!floatingLayer.hasNode()) {\n\t\t\tfloatingLayer.render();\n\t\t}\n\n\t\tcontrol.addClass('enyo-fullscreen');\n\t\tcontrol.appendNodeToParent(floatingLayer.hasNode());\n\t\tcontrol.resize();\n\n\t\tthis.setFullscreenControl(control);\n\t\tthis.setFullscreenElement(control.hasNode());\n\t},\n\n\t/** \n\t* Fallback cancel fullscreen for platforms without fullscreen support.\n\t*\n\t* @private\n\t*/\n\tfallbackCancelFullscreen: function() {\n\t\tvar control = this.fullscreenControl,\n\t\t\tbeforeNode,\n\t\t\tparentNode\n\t\t;\n\n\t\tif (!control) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find beforeNode based on _this.addBefore_ and _this.prevAddBefore_\n\t\tbeforeNode = (control.prevAddBefore) ? control.prevAddBefore.hasNode() : null;\n\t\tparentNode = control.parent.hasNode();\n\t\tcontrol.prevAddBefore = null;\n\n\t\tcontrol.removeClass('enyo-fullscreen');\n\n\t\tif (!beforeNode) {\n\t\t\tcontrol.appendNodeToParent(parentNode);\n\t\t} else {\n\t\t\tcontrol.insertNodeInParent(parentNode, beforeNode);\n\t\t}\n\n\t\tcontrol.resize();\n\n\t\tthis.setFullscreenControl(null);\n\t\tthis.setFullscreenElement(null);\n\t},\n\n\t/** \n\t* Listens for fullscreen change {@glossary event} and broadcasts it as a\n\t* normalized event.\n\t*\n\t* @private\n\t*/\n\tdetectFullscreenChangeEvent: function() {\n\t\tthis.setFullscreenControl(this.requestor);\n\t\tthis.requestor = null;\n\n\t\t// Broadcast change\n\t\tSignals.send('onFullscreenChange');\n\t}\n};\n\n/**\n* Normalizes platform-specific fullscreen change [events]{@glossary event}.\n*\n* @private\n*/\nReady(function() {\n\t// no need for IE8 fallback, since it won't ever send this event\n\tif (document.addEventListener) {\n\t\tdocument.addEventListener('webkitfullscreenchange', utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\n\t\tdocument.addEventListener('mozfullscreenchange',    utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\n\t\tdocument.addEventListener('fullscreenchange',       utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\n\t}\n});\n\n/**\n* If this platform doesn't have native support for fullscreen, add an escape handler to mimic \n* native behavior.\n*/\nif(!fullscreen.nativeSupport()) {\n\tdispatcher.features.push(\n\t\tfunction(e) {\n\t\t\tif (e.type === 'keydown' && e.keyCode === 27) {\n\t\t\t\tfullscreen.cancelFullscreen();\n\t\t\t}\n\t\t}\n\t);\n}","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tplatform = require('./platform'),\n\tdispatcher = require('./dispatcher');\n\nvar\n\tDom = require('./dom');\n\n\n/**\n* Enyo supports a set of normalized events that work similarly across all supported platforms.\n* These events are provided so that users can write a single set of event handlers for\n* applications that run on both mobile and desktop platforms. They are needed because desktop\n* and mobile platforms handle basic input differently.\n*\n* For more information on normalized input events and their associated properties, see the\n* documentation on [Event Handling]{@linkplain $dev-guide/key-concepts/event-handling.html}\n* in the Enyo Developer Guide.\n*\n* @namespace gesture\n* @public\n*/\nvar gesture = module.exports =\n\t/** @lends gesture */ {\n\n\t/**\n\t* @private\n\t*/\n\teventProps: ['target', 'relatedTarget', 'clientX', 'clientY', 'pageX', 'pageY',\n\t\t'screenX', 'screenY', 'altKey', 'ctrlKey', 'metaKey', 'shiftKey',\n\t\t'detail', 'identifier', 'dispatchTarget', 'which', 'srcEvent'],\n\n\t/**\n\t* Creates an {@glossary event} of type `type` and returns it.\n\t* `evt` should be an event [object]{@glossary Object}.\n\t*\n\t* @param {String} type - The type of {@glossary event} to make.\n\t* @param {(Event|Object)} evt - The event you'd like to clone or an object that looks like it.\n\t* @returns {Object} The new event [object]{@glossary Object}.\n\t* @public\n\t*/\n\tmakeEvent: function(type, evt) {\n\t\tvar e = {};\n\t\te.type = type;\n\t\tfor (var i=0, p; (p=this.eventProps[i]); i++) {\n\t\t\te[p] = evt[p];\n\t\t}\n\t\te.srcEvent = e.srcEvent || evt;\n\t\te.preventDefault = this.preventDefault;\n\t\te.disablePrevention = this.disablePrevention;\n\n\t\tif (Dom._bodyScaleFactorX !== 1 || Dom._bodyScaleFactorY !== 1) {\n\t\t\t// Intercept only these events, not all events, like: hold, release, tap, etc,\n\t\t\t// to avoid doing the operation again.\n\t\t\tif (e.type == 'move' || e.type == 'up' || e.type == 'down' || e.type == 'enter' || e.type == 'leave') {\n\t\t\t\te.clientX *= Dom._bodyScaleFactorX;\n\t\t\t\te.clientY *= Dom._bodyScaleFactorY;\n\t\t\t}\n\t\t}\n\t\t//\n\t\t// normalize event.which and event.pageX/event.pageY\n\t\t// Note that while 'which' works in IE9, it is broken for mousemove. Therefore,\n\t\t// in IE, use global.event.button\n\t\tif (platform.ie < 10) {\n\t\t\t//Fix for IE8, which doesn't include pageX and pageY properties\n\t\t\tif(platform.ie==8 && e.target) {\n\t\t\t\te.pageX = e.clientX + e.target.scrollLeft;\n\t\t\t\te.pageY = e.clientY + e.target.scrollTop;\n\t\t\t}\n\t\t\tvar b = global.event && global.event.button;\n\t\t\tif (b) {\n\t\t\t\t// multi-button not supported, priority: left, right, middle\n\t\t\t\t// (note: IE bitmask is 1=left, 2=right, 4=center);\n\t\t\t\te.which = b & 1 ? 1 : (b & 2 ? 2 : (b & 4 ? 3 : 0));\n\t\t\t}\n\t\t} else if (platform.webos || global.PalmSystem) {\n\t\t\t// Temporary fix for owos: it does not currently supply 'which' on move events\n\t\t\t// and the user agent string doesn't identify itself so we test for PalmSystem\n\t\t\tif (e.which === 0) {\n\t\t\t\te.which = 1;\n\t\t\t}\n\t\t}\n\t\treturn e;\n\t},\n\n\t/**\n\t* Handles \"down\" [events]{@glossary event}, including `mousedown` and `keydown`. This is\n\t* responsible for the press-and-hold key repeater.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tdown: function(evt) {\n\t\tvar e = this.makeEvent('down', evt);\n\n\t\t// prepare for hold\n\t\tthis.drag.prepareHold(e);\n\n\t\t// enable prevention of tap event\n\t\te.preventTap = function() {\n\t\t\te._tapPrevented = true;\n\t\t};\n\n\t\tdispatcher.dispatch(e);\n\t\tthis.downEvent = e;\n\n\t\t// start hold, now that control has had a chance\n\t\t// to override the holdPulse configuration\n\t\tthis.drag.beginHold(e);\n\t},\n\n\t/**\n\t* Handles `mousemove` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tmove: function(evt) {\n\t\tvar e = this.makeEvent('move', evt);\n\t\t// include delta and direction v. down info in move event\n\t\te.dx = e.dy = e.horizontal = e.vertical = 0;\n\t\tif (e.which && this.downEvent) {\n\t\t\te.dx = evt.clientX - this.downEvent.clientX;\n\t\t\te.dy = evt.clientY - this.downEvent.clientY;\n\t\t\te.horizontal = Math.abs(e.dx) > Math.abs(e.dy);\n\t\t\te.vertical = !e.horizontal;\n\t\t}\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* Handles \"up\" [events]{@glossary event}, including `mouseup` and `keyup`.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tup: function(evt) {\n\t\tvar e = this.makeEvent('up', evt);\n\n\t\t// We have added some logic to synchronize up and down events in certain scenarios (i.e.\n\t\t// clicking multiple buttons with a mouse) and to generally guard against any potential\n\t\t// asymmetry, but a full solution would be to maintain a map of up/down events as an \n\t\t// ideal solution, for future work.\n\t\te._tapPrevented = this.downEvent && this.downEvent._tapPrevented && this.downEvent.which == e.which;\n\t\te.preventTap = function() {\n\t\t\te._tapPrevented = true;\n\t\t};\n\n\t\tdispatcher.dispatch(e);\n\t\tif (!e._tapPrevented && this.downEvent && this.downEvent.which == 1) {\n\t\t\tvar target = this.findCommonAncestor(this.downEvent.target, evt.target);\n\n\t\t\t// the common ancestor of the down/up events is the target of the tap\n\t\t\tif(target) {\n\t\t\t\tif(this.supportsDoubleTap(target)) {\n\t\t\t\t\tthis.doubleTap(e, target);\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendTap(e, target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.downEvent && this.downEvent.which == e.which) {\n\t\t\tthis.downEvent = null;\n\t\t}\n\t},\n\n\t/**\n\t* Handles `mouseover` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tover: function(evt) {\n\t\tvar e = this.makeEvent('enter', evt);\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* Handles `mouseout` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tout: function(evt) {\n\t\tvar e = this.makeEvent('leave', evt);\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* Generates `tap` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tsendTap: function(evt, target) {\n\t\tvar e = this.makeEvent('tap', evt);\n\t\te.target = target;\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttapData: {\n\t\tid: null,\n\t\ttimer: null,\n\t\tstart: 0\n\t},\n\n\t/**\n\t* Global configuration for double tap support. If this is true, all tap events for Controls\n\t* that do not have {@link enyo.Control#doubleTapEnabled} explicitly set to false will be\n\t* delayed by the {@link enyo.Control#doubleTapInterval}.\n\t*\n\t* @type {Boolean}\n\t* @default  false\n\t* @public\n\t*/\n\tdoubleTapEnabled: false,\n\n\t/**\n\t* Determines if the provided target node supports double tap events\n\t*\n\t* @param {Node} target\n\t* @return {Boolean}\n\t* @private\n\t*/\n\tsupportsDoubleTap: function(target) {\n\t\tvar obj = dispatcher.findDispatchTarget(target);\n\n\t\tif(obj) {\n\t\t\t// Control.doubleTapEnabled is a tri-value property. The default is 'inherit'\n\t\t\t// which takes its cue from gesture's doubleTapEnabled. Values of true or false\n\t\t\t// override the default. So, if the global is true, any truthy value on Control\n\t\t\t// results in true. If the global is false, only an explicit true on Control\n\t\t\t// results in true.\n\t\t\treturn this.doubleTapEnabled? !!obj.doubleTapEnabled : obj.doubleTapEnabled === true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t* private\n\t*/\n\tdoubleTap: function(evt, t) {\n\t\tvar obj = dispatcher.findDispatchTarget(t);\n\n\t\tif(this.tapData.id !== obj.id) {\t// this is the first tap\n\t\t\tthis.resetTapData(true);\n\n\t\t\tthis.tapData.id = obj.id;\n\t\t\tthis.tapData.event = evt;\n\t\t\tthis.tapData.target = t;\n\t\t\tthis.tapData.timer = setTimeout(utils.bind(this, \"resetTapData\", true), obj.doubleTapInterval);\n\t\t\tthis.tapData.start = utils.perfNow();\n\t\t} else {\t\t\t\t\t\t\t// this is the double tap\n\t\t\tvar e2 = this.makeEvent('doubletap', evt);\n\t\t\te2.target = t;\n\t\t\te2.tapInterval = utils.perfNow() - this.tapData.start;\n\t\t\tthis.resetTapData(false);\n\t\t\tdispatcher.dispatch(e2);\n\t\t}\n\t},\n\n\tresetTapData: function(sendTap) {\n\t\tvar data = this.tapData;\n\n\t\tif(sendTap && data.id) {\n\t\t\tthis.sendTap(data.event, data.target);\n\t\t}\n\n\t\tclearTimeout(data.timer);\n\t\tdata.id = data.start = data.event = data.target = data.timer = null;\n\t},\n\n\t/**\n\t* Given two [DOM nodes]{@glossary Node}, searches for a shared ancestor (looks up\n\t* the hierarchic [DOM]{@glossary DOM} tree of [nodes]{@glossary Node}). The shared\n\t* ancestor node is returned.\n\t*\n\t* @param {Node} controlA - Control one.\n\t* @param {Node} controlB - Control two.\n\t* @returns {(Node|undefined)} The shared ancestor.\n\t* @public\n\t*/\n\tfindCommonAncestor: function(controlA, controlB) {\n\t\tvar p = controlB;\n\t\twhile (p) {\n\t\t\tif (this.isTargetDescendantOf(controlA, p)) {\n\t\t\t\treturn p;\n\t\t\t}\n\t\t\tp = p.parentNode;\n\t\t}\n\t},\n\n\t/**\n\t* Given two controls, returns `true` if the `child` is inside the `parent`.\n\t*\n\t* @param {Node} child - The child to search for.\n\t* @param {Node} parent - The expected parent.\n\t* @returns {(Boolean|undefined)} `true` if the `child` is actually a child of `parent`.\n\t*/\n\tisTargetDescendantOf: function(child, parent) {\n\t\tvar c = child;\n\t\twhile(c) {\n\t\t\tif (c == parent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tc = c.parentNode;\n\t\t}\n\t}\n};\n\n/**\n* Installed on [events]{@glossary event} and called in event context.\n*\n* @private\n*/\ngesture.preventDefault = function() {\n\tif (this.srcEvent) {\n\t\tthis.srcEvent.preventDefault();\n\t}\n};\n\n/**\n* @private\n*/\ngesture.disablePrevention = function() {\n\tthis.preventDefault = enyo.nop;\n\tif (this.srcEvent) {\n\t\tthis.srcEvent.preventDefault = enyo.nop;\n\t}\n};\n\ndispatcher.features.push(\n\tfunction(e) {\n\t\t// NOTE: beware of properties in gesture inadvertently mapped to event types\n\t\tif (gesture.events[e.type]) {\n\t\t\treturn gesture.events[e.type](e);\n\t\t}\n\t}\n);\n\n/**\n* @namespace gesture.events\n* @public\n*/\ngesture.events =\n\t/** @lends gesture.events */ {\n\n\t/**\n\t* Shortcut to [gesture.down()]{@link gesture.down}.\n\t*\n\t* @public\n\t*/\n\tmousedown: function(e) {\n\t\tgesture.down(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.up()]{@link gesture.up}.\n\t*\n\t* @public\n\t*/\n\tmouseup: function(e) {\n\t\tgesture.up(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.move()]{@link gesture.move}.\n\t*\n\t* @public\n\t*/\n\tmousemove:  function(e) {\n\t\tgesture.move(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.over()]{@link gesture.over}.\n\t*\n\t* @public\n\t*/\n\tmouseover:  function(e) {\n\t\tgesture.over(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.out()]{@link gesture.out}.\n\t*\n\t* @public\n\t*/\n\tmouseout:  function(e) {\n\t\tgesture.out(e);\n\t}\n};\n\n// Firefox mousewheel handling\nDom.requiresWindow(function() {\n\tif (document.addEventListener) {\n\t\tdocument.addEventListener('DOMMouseScroll', function(inEvent) {\n\t\t\tvar e = utils.clone(inEvent);\n\t\t\te.preventDefault = function() {\n\t\t\t\tinEvent.preventDefault();\n\t\t\t};\n\t\t\te.type = 'mousewheel';\n\t\t\tvar p = e.VERTICAL_AXIS == e.axis ? 'wheelDeltaY' : 'wheelDeltaX';\n\t\t\te[p] =  e.detail * -40;\n\t\t\tdispatcher.dispatch(e);\n\t\t}, false);\n\t}\n});\n\n\n\n/**\n* The extended {@glossary event} [object]{@glossary Object} that is provided when we\n* emulate iOS gesture events on non-iOS devices.\n*\n* @typedef {Object} enyo.gesture~EmulatedGestureEvent\n* @property {Number} pageX - The x-coordinate of the center point between fingers.\n* @property {Number} pageY - The y-coordinate of the center point between fingers.\n* @property {Number} rotation - The degrees of rotation from the beginning of the gesture.\n* @property {Number} scale - The percent change of distance between fingers.\n*/\n\n/**\n* @private\n*/\nif (!platform.gesture && platform.touch) {\n\tdispatcher.features.push(function(e) {\n\t\tif (handlers[e.type]) {\n\t\t\ttouchGestures[e.type](e);\n\t\t}\n\t});\n}\n\n/**\n* @private\n*/\nvar handlers = {\n\ttouchstart: true,\n\ttouchmove: true,\n\ttouchend: true\n};\n\n/**\n* @private\n*/\nvar touchGestures = {\n\n\t/**\n\t* @private\n\t*/\n\torderedTouches: [],\n\n\t/**\n\t* @private\n\t*/\n\tgesture: null,\n\n\t/**\n\t* @private\n\t*/\n\ttouchstart: function (e) {\n\t\t// some devices can send multiple changed touches on start and end\n\t\tvar i,\n\t\t\tchangedTouches = e.changedTouches,\n\t\t\tlength = changedTouches.length;\n\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tvar id = changedTouches[i].identifier;\n\n\t\t\t// some devices can send multiple touchstarts\n\t\t\tif (utils.indexOf(id, this.orderedTouches) < 0) {\n\t\t\t\tthis.orderedTouches.push(id);\n\t\t\t}\n\t\t}\n\n\t\tif (e.touches.length >= 2 && !this.gesture) {\n\t\t\tvar p = this.gesturePositions(e);\n\n\t\t\tthis.gesture = this.gestureVector(p);\n\t\t\tthis.gesture.angle = this.gestureAngle(p);\n\t\t\tthis.gesture.scale = 1;\n\t\t\tthis.gesture.rotation = 0;\n\t\t\tvar g = this.makeGesture('gesturestart', e, {vector: this.gesture, scale: 1, rotation: 0});\n\t\t\tdispatcher.dispatch(g);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttouchend: function (e) {\n\t\t// some devices can send multiple changed touches on start and end\n\t\tvar i,\n\t\t\tchangedTouches = e.changedTouches,\n\t\t\tlength = changedTouches.length;\n\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tutils.remove(changedTouches[i].identifier, this.orderedTouches);\n\t\t}\n\n\t\tif (e.touches.length <= 1 && this.gesture) {\n\t\t\tvar t = e.touches[0] || e.changedTouches[e.changedTouches.length - 1];\n\n\t\t\t// gesture end sends last rotation and scale, with the x/y of the last finger\n\t\t\tdispatcher.dispatch(this.makeGesture('gestureend', e, {vector: {xcenter: t.pageX, ycenter: t.pageY}, scale: this.gesture.scale, rotation: this.gesture.rotation}));\n\t\t\tthis.gesture = null;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttouchmove: function (e) {\n\t\tif (this.gesture) {\n\t\t\tvar g = this.makeGesture('gesturechange', e);\n\t\t\tthis.gesture.scale = g.scale;\n\t\t\tthis.gesture.rotation = g.rotation;\n\t\t\tenyo.dispatch(g);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfindIdentifiedTouch: function (touches, id) {\n\t\tfor (var i = 0, t; (t = touches[i]); i++) {\n\t\t\tif (t.identifier === id) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgesturePositions: function (e) {\n\t\tvar first = this.findIdentifiedTouch(e.touches, this.orderedTouches[0]);\n\t\tvar last = this.findIdentifiedTouch(e.touches, this.orderedTouches[this.orderedTouches.length - 1]);\n\t\tvar fx = first.pageX, lx = last.pageX, fy = first.pageY, ly = last.pageY;\n\t\t// center the first touch as 0,0\n\t\tvar x = lx - fx, y = ly - fy;\n\t\tvar h = Math.sqrt(x*x + y*y);\n\t\treturn {x: x, y: y, h: h, fx: fx, lx: lx, fy: fy, ly: ly};\n\t},\n\n\t/**\n\t* Finds rotation angle.\n\t* \n\t* @private\n\t*/\n\tgestureAngle: function (positions) {\n\t\tvar p = positions;\n\t\t// yay math!, rad -> deg\n\t\tvar a = Math.asin(p.y / p.h) * (180 / Math.PI);\n\t\t// fix for range limits of asin (-90 to 90)\n\t\t// Quadrants II and III\n\t\tif (p.x < 0) {\n\t\t\ta = 180 - a;\n\t\t}\n\t\t// Quadrant IV\n\t\tif (p.x > 0 && p.y < 0) {\n\t\t\ta += 360;\n\t\t}\n\t\treturn a;\n\t},\n\n\t/**\n\t* Finds bounding box.\n\t* \n\t* @private\n\t*/\n\tgestureVector: function (positions) {\n\t\t// the least recent touch and the most recent touch determine the bounding box of the gesture event\n\t\tvar p = positions;\n\t\t// center the first touch as 0,0\n\t\treturn {\n\t\t\tmagnitude: p.h,\n\t\t\txcenter: Math.abs(Math.round(p.fx + (p.x / 2))),\n\t\t\tycenter: Math.abs(Math.round(p.fy + (p.y / 2)))\n\t\t};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeGesture: function (type, e, cache) {\n\t\tvar vector, scale, rotation;\n\t\tif (cache) {\n\t\t\tvector = cache.vector;\n\t\t\tscale = cache.scale;\n\t\t\trotation = cache.rotation;\n\t\t} else {\n\t\t\tvar p = this.gesturePositions(e);\n\t\t\tvector = this.gestureVector(p);\n\t\t\tscale = vector.magnitude / this.gesture.magnitude;\n\t\t\t// gestureEvent.rotation is difference from the starting angle, clockwise\n\t\t\trotation = (360 + this.gestureAngle(p) - this.gesture.angle) % 360;\n\t\t}\n\t\tvar event = utils.clone(e);\n\t\treturn utils.mixin(event, {\n\t\t\ttype: type,\n\t\t\tscale: scale,\n\t\t\tpageX: vector.xcenter,\n\t\t\tpageY: vector.ycenter,\n\t\t\trotation: rotation\n\t\t});\n\t}\n};","var\n\tkind = require('../../../enyo/lib/kind'),\n\tdispatcher = require('../../../enyo/lib/dispatcher'),\n\tdom = require('../../../enyo/lib/dom'),\n\tplatform = require('../../../enyo/lib/platform'),\n\tutils = require('../../../enyo/lib/utils'),\n\tAnimator = require('../../../enyo/lib/Animator');\n\nvar\n\tCardArranger = require('../CardArranger');\n\n/**\n* Fires at the start of a panel transition, when [setIndex()]{@link enyo.Panels#setIndex}\n* is called, and also during dragging.\n*\n* @event enyo.Panels#onTransitionStart\n* @type {Object}\n* @property {Number} fromIndex - The index of the old panel.\n* @property {Number} toIndex   - The index of the new panel.\n* @public\n*/\n\n/**\n* Fires at the end of a panel transition, when [setIndex()]{@link enyo.Panels#setIndex}\n* is called, and also during dragging.\n*\n* @event enyo.Panels#onTransitionFinish\n* @type {Object}\n* @property {Number} fromIndex - The index of the old panel.\n* @property {Number} toIndex   - The index of the new panel.\n* @public\n*/\n\n/**\n* The {@link enyo.Panels} kind is designed to satisfy a variety of common use cases\n* for application layout. Using `enyo.Panels`, controls may be arranged as (among\n* other things) a carousel, a set of collapsing panels, a card stack that fades\n* between panels, or a grid.\n*\n* Any Enyo control may be placed inside an `enyo.Panels`, but by convention we\n* refer to each of these controls as a \"panel\". From the set of panels in an\n* `enyo.Panels`, one is considered to be active. The active panel is set by index\n* using the [setIndex()]{@link enyo.Panels#setIndex} method. The actual layout of\n* the panels typically changes each time the active panel is set, such that the new\n* active panel has the most prominent position.\n*\n* For more information, see the documentation on\n* [Panels]{@linkplain $dev-guide/building-apps/layout/panels.html} in the\n* Enyo Developer Guide.\n*\n* @ui\n* @class enyo.Panels\n* @extends enyo.Control\n* @public\n*/\nvar Panels = module.exports = kind(\n\t/** @lends  enyo.Panels.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Panels',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-panels',\n\n\t/**\n\t* @lends enyo.Panels.prototype\n\t* @private\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* The index of the active panel. The layout of panels is controlled by the\n\t\t* [layoutKind]{@link enyo.Panels#layoutKind}, but as a rule, the active panel\n\t\t* is displayed in the most prominent position. For example, in the (default)\n\t\t* {@link enyo.CardArranger} layout, the active panel is shown and the other\n\t\t* panels are hidden.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default  0\n\t\t* @public\n\t\t*/\n\t\tindex: 0,\n\n\t\t/**\n\t\t* Indicates whether the user may drag between panels.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default  true\n\t\t* @public\n\t\t*/\n\t\tdraggable: true,\n\n\t\t/**\n\t\t* Indicates whether the panels animate when transitioning, e.g., when\n\t\t* [setIndex()]{@link enyo.Panels#setIndex} is called.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default  true\n\t\t* @public\n\t\t*/\n\t\tanimate: true,\n\n\t\t/**\n\t\t* Indicates whether panels \"wrap around\" when moving past the end.\n\t\t* The actual effect depends upon the arranger in use.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default  false\n\t\t* @public\n\t\t*/\n\t\twrap: false,\n\n\t\t/**\n\t\t* The arranger kind to be used for dynamic layout.\n\t\t*\n\t\t* @type {String}\n\t\t* @default  'CardArranger'\n\t\t* @public\n\t\t*/\n\t\tarrangerKind: CardArranger,\n\n\t\t/**\n\t\t* By default, each panel will be sized to fit the Panels' width when the\n\t\t* screen size is sufficiently narrow (less than 800px). Set to `false` to\n\t\t* avoid this behavior.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default  true\n\t\t* @public\n\t\t*/\n\t\tnarrowFit: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonTransitionStart: '',\n\t\tonTransitionFinish: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tondragstart: 'dragstart',\n\t\tondrag: 'drag',\n\t\tondragfinish: 'dragfinish',\n\t\tonscroll: 'domScroll'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{kind: Animator, onStep: 'step', onEnd: 'animationEnded'}\n\t],\n\n\t/**\n\t* Tracks completion percentage for a transition between two panels.\n\t*\n\t* @private\n\t*/\n\tfraction: 0,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.transitionPoints = [];\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.arrangerKindChanged();\n\t\t\tthis.narrowFitChanged();\n\t\t\tthis.indexChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this, 'scroll');\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tdomScroll: function (sender, event) {\n\t\tif (this.hasNode()) {\n\t\t\tif (this.node.scrollLeft > 0) {\n\t\t\t\t// Reset scrollLeft position\n\t\t\t\tthis.node.scrollLeft = 0;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.createChrome(this.tools);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tarrangerKindChanged: function () {\n\t\tthis.setLayoutKind(this.arrangerKind);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnarrowFitChanged: function () {\n\t\tthis.addRemoveClass(Panels.getNarrowClass(), this.narrowFit);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// When the entire panels is going away, take note so we don't try and do single-panel\n\t\t\t// remove logic such as changing the index and reflowing when each panel is destroyed\n\t\t\tthis.destroying = true;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Adjusts the index if the removed control is the active panel and reflows the layout.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tremoveControl: kind.inherit(function (sup) {\n\t\treturn function (control) {\n\t\t\t// Skip extra work during panel destruction.\n\t\t\tif (this.destroying) {\n\t\t\t\treturn sup.apply(this, arguments);\n\t\t\t}\n\t\t\t// adjust index if the current panel is being removed\n\t\t\t// so it's either the previous panel or the first one.\n\t\t\tvar newIndex = -1;\n\t\t\tvar controlIndex = utils.indexOf(control, this.controls);\n\t\t\tif (controlIndex === this.index) {\n\t\t\t\tnewIndex = Math.max(controlIndex - 1, 0);\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (newIndex !== -1 && this.controls.length > 0) {\n\t\t\t\tthis.setIndex(newIndex);\n\t\t\t\tthis.flow();\n\t\t\t\tthis.reflow();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* Designed to be overridden in kinds derived from Panels that have\n\t* non-panel client controls.\n\t*\n\t* @return {Boolean} [description]\n\t* @protected\n\t* @todo  Assume that this should take a control as a parameter.\n\t*/\n\tisPanel: function () {\n\t\treturn true;\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tflow: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.arrangements = [];\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\treflow: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.arrangements = [];\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.refresh();\n\t\t};\n\t}),\n\n\t/**\n\t* Returns the array of contained panels. Subclasses may override this if they\n\t* don't want the arranger to lay out all of their children.\n\t*\n\t* @return {enyo.Control[]} - The array of contained panels.\n\t*/\n\tgetPanels: function () {\n\t\tvar p = this.controlParent || this;\n\t\treturn p.children;\n\t},\n\n\t/**\n\t* Returns a reference to the active panel--i.e., the panel at the specified index.\n\t*\n\t* @return {enyo.Control} - The active panel.\n\t*/\n\tgetActive: function () {\n\t\tvar p$ = this.getPanels();\n\t\t//Constrain the index within the array of panels, needed if wrapping is enabled\n\t\tvar index = this.index % p$.length;\n\t\tif (index < 0) {\n\t\t\tindex += p$.length;\n\t\t}\n\t\treturn p$[index];\n\t},\n\n\t/**\n\t* Returns a reference to the {@link enyo.Animator} instance used to\n\t* animate panel transitions. The Panels' animator may be used to set the\n\t* duration of panel transitions, e.g.:\n\t*\n\t* ```\n\t* this.getAnimator().setDuration(1000);\n\t* ```\n\t*\n\t* @return {enyo.Animator} - The {@link enyo.Animator} instance used to animate\n\t* panel transitions.\n\t* @public\n\t*/\n\tgetAnimator: function () {\n\t\treturn this.$.animator;\n\t},\n\n\t/**\n\t* Sets the active panel to the panel specified by the given index.\n\t* Note that if the [animate]{@link enyo.Panels#animate} property is set to\n\t* `true`, the active panel will animate into view.\n\t*\n\t* @param {Number} index - The index of the panel to activate.\n\t* @public\n\t*/\n\tsetIndex: function (index) {\n\t\t// override setIndex so that indexChanged is called\n\t\t// whether this.index has actually changed or not. Also, do\n\t\t// index clamping here.\n\t\tvar prevIndex = this.get('index'),\n\t\t\tnewIndex = this.clamp(index);\n\t\tthis.index = newIndex;\n\t\tthis.notifyObservers('index', prevIndex, newIndex);\n\t},\n\n\t/**\n\t* Sets the active panel to the panel specified by the given index.\n\t* The transition to the next panel will be immediate and will not be animated,\n\t* regardless of the value of the [animate]{@link enyo.Panels#animate} property.\n\t*\n\t* @param {Number} index - The index of the panel to activate.\n\t* @public\n\t*/\n\tsetIndexDirect: function (index) {\n\t\tif (this.animate) {\n\t\t\tthis.animate = false;\n\t\t\tthis.setIndex(index);\n\t\t\tthis.animate = true;\n\t\t} else {\n\t\t\tthis.setIndex(index);\n\t\t}\n\t},\n\n\t/**\n\t* Selects the named component owned by the Panels and returns its index.\n\t*\n\t* @param  {String} name - The name of the panel to activate.\n\t* @return {Number} The index of the newly activated panel.\n\t* @public\n\t*/\n\tselectPanelByName: function (name) {\n\t\tif (!name) {\n\t\t\treturn;\n\t\t}\n\t\tvar idx = 0;\n\t\tvar panels = this.getPanels();\n\t\tvar len = panels.length;\n\t\tfor (; idx < len; ++idx) {\n\t\t\tif (name === panels[idx].name) {\n\t\t\t\tthis.setIndex(idx);\n\t\t\t\treturn idx;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Transitions to the previous panel--i.e., the panel whose index value is one\n\t* less than that of the current active panel.\n\t*\n\t* @public\n\t*/\n\tprevious: function () {\n\t\tvar prevIndex = this.index - 1;\n\t\tif (this.wrap && prevIndex < 0) {\n\t\t\tprevIndex = this.getPanels().length - 1;\n\t\t}\n\t\tthis.setIndex(prevIndex);\n\t},\n\n\t/**\n\t* Transitions to the next panel--i.e., the panel whose index value is one\n\t* greater than that of the current active panel.\n\t*\n\t* @public\n\t*/\n\tnext: function () {\n\t\tvar nextIndex = this.index+1;\n\t\tif (this.wrap && nextIndex >= this.getPanels().length) {\n\t\t\tnextIndex = 0;\n\t\t}\n\t\tthis.setIndex(nextIndex);\n\t},\n\n\t/**\n\t* Ensures that `value` references a valid panel, accounting for\n\t* [wrapping]{@link enyo.Panels#wrap}.\n\t*\n\t* @param  {Number} value - The index of a panel.\n\t* @return {Number}       - The valid index of a panel.\n\t* @private\n\t*/\n\tclamp: function (value) {\n\t\tvar l = this.getPanels().length;\n\t\tif (this.wrap) {\n\t\t\t// FIXME: dragging makes assumptions about direction and from->start indexes.\n\t\t\t//return value < 0 ? l : (value > l ? 0 : value);\n\t\t\tvalue %= l;\n\t\t\treturn (value < 0) ? value + l : value;\n\t\t} else {\n\t\t\treturn Math.max(0, Math.min(value, l - 1));\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexChanged: function (old) {\n\t\tthis.lastIndex = old;\n\t\tif (!this.dragging && this.$.animator && this.hasNode()) {\n\t\t\tif (this.shouldAnimate()) {\n\t\t\t\t// If we're mid-transition, complete it and indicate we need to transition\n\t\t\t\tif (this.$.animator.isAnimating()) {\n\t\t\t\t\tthis.transitionOnComplete = true;\n\t\t\t\t\tthis.$.animator.complete();\n\t\t\t\t} else {\n\t\t\t\t\tthis.animateTransition();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.directTransition();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Returns `true` if the panels should animate in the transition from `fromIndex` to\n\t* `toIndex`. This can be overridden in a {@glossary subkind} for greater customization.\n\t*\n\t* @protected\n\t*/\n\tshouldAnimate: function () {\n\t\treturn this.animate;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstep: function (sender) {\n\t\tthis.fraction = sender.value;\n\t\tthis.stepTransition();\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimationEnded: function (sender, event) {\n\t\tthis.completed();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcompleted: function () {\n\t\tthis.finishTransition();\n\n\t\t// Animator.onEnd fires asynchronously so we need an internal flag to indicate we need\n\t\t// to start the next transition when the previous completes\n\t\tif (this.transitionOnComplete) {\n\t\t\tthis.transitionOnComplete = false;\n\t\t\tthis.animateTransition();\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragstart: function (sender, event) {\n\t\tif (this.draggable && this.layout && this.layout.canDragEvent(event)) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.dragstartTransition(event);\n\t\t\tthis.dragging = true;\n\t\t\tthis.$.animator.stop();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrag: function (sender, event) {\n\t\tif (this.dragging) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.dragTransition(event);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragfinish: function (sender, event) {\n\t\tif (this.dragging) {\n\t\t\tthis.dragging = false;\n\t\t\tevent.preventTap();\n\t\t\tthis.dragfinishTransition(event);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragstartTransition: function (event) {\n\t\tif (!this.$.animator.isAnimating()) {\n\t\t\tvar f = this.fromIndex = this.index;\n\t\t\tthis.toIndex = f - (this.layout ? this.layout.calcDragDirection(event) : 0);\n\t\t} else {\n\t\t\tthis.verifyDragTransition(event);\n\t\t}\n\t\tthis.fromIndex = this.clamp(this.fromIndex);\n\t\tthis.toIndex = this.clamp(this.toIndex);\n\t\t//this.log(this.fromIndex, this.toIndex);\n\t\tthis.fireTransitionStart();\n\t\tif (this.layout) {\n\t\t\tthis.layout.start();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragTransition: function (event) {\n\t\t// note: for simplicity we choose to calculate the distance directly between\n\t\t// the first and last transition point.\n\t\tvar d = this.layout ? this.layout.calcDrag(event) : 0;\n\t\tvar t$ = this.transitionPoints, s = t$[0], f = t$[t$.length-1];\n\t\tvar as = this.fetchArrangement(s);\n\t\tvar af = this.fetchArrangement(f);\n\t\tvar dx = this.layout ? this.layout.drag(d, s, as, f, af) : 0;\n\t\tvar dragFail = d && !dx;\n\t\tif (dragFail) {\n\t\t\t//this.log(dx, s, as, f, af);\n\t\t}\n\t\tthis.fraction += dx;\n\t\tvar fr = this.fraction;\n\t\tif (fr > 1 || fr < 0 || dragFail) {\n\t\t\tif (fr > 0 || dragFail) {\n\t\t\t\tthis.dragfinishTransition(event);\n\t\t\t}\n\t\t\tthis.dragstartTransition(event);\n\t\t\tthis.fraction = 0;\n\t\t\t// FIXME: account for lost fraction\n\t\t\t//this.dragTransition(event);\n\t\t}\n\t\tthis.stepTransition();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragfinishTransition: function (event) {\n\t\tthis.verifyDragTransition(event);\n\t\tthis.setIndex(this.toIndex);\n\t\t// note: if we're still dragging, then we're at a transition boundary\n\t\t// and should fire the finish event\n\t\tif (this.dragging) {\n\t\t\tthis.fireTransitionFinish();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverifyDragTransition: function (event) {\n\t\tvar d = this.layout ? this.layout.calcDragDirection(event) : 0;\n\t\tvar f = Math.min(this.fromIndex, this.toIndex);\n\t\tvar t = Math.max(this.fromIndex, this.toIndex);\n\t\tif (d > 0) {\n\t\t\tvar s = f;\n\t\t\tf = t;\n\t\t\tt = s;\n\t\t}\n\t\tif (f != this.fromIndex) {\n\t\t\tthis.fraction = 1 - this.fraction;\n\t\t}\n\t\t//this.log('old', this.fromIndex, this.toIndex, 'new', f, t);\n\t\tthis.fromIndex = f;\n\t\tthis.toIndex = t;\n\t},\n\n\t/**\n\t* Resets the panels without sending any events.\n\t*\n\t* @private\n\t*/\n\trefresh: function () {\n\t\tif (this.$.animator && this.$.animator.isAnimating()) {\n\t\t\tthis.$.animator.stop();\n\t\t}\n\t\tthis.setupTransition();\n\t\tthis.fraction = 1;\n\t\tthis.stepTransition();\n\t\tthis.completeTransition();\n\t},\n\n\t/**\n\t* Transitions to the new index without animation\n\t*\n\t* @private\n\t*/\n\tdirectTransition: function () {\n\t\tthis.startTransition();\n\t\tthis.fraction = 1;\n\t\tthis.stepTransition();\n\t\tthis.finishTransition();\n\t},\n\n\t/**\n\t* Animates the transition to the new index\n\t*\n\t* @private\n\t*/\n\tanimateTransition: function () {\n\t\tthis.startTransition();\n\t\tthis.$.animator.play({\n\t\t\tstartValue: this.fraction\n\t\t});\n\t},\n\n\t/**\n\t* Starts the transition between two panels. if a transition is already in progress, this is\n\t* a no-op.\n\t*\n\t* @private\n\t*/\n\tstartTransition: function () {\n\t\tif (!this.transitioning) {\n\t\t\tthis.transitioning = true;\n\t\t\tthis.setupTransition();\n\t\t\tthis.fireTransitionStart();\n\t\t}\n\t},\n\n\t/**\n\t* Sets up transition state\n\t*\n\t* @private\n\t*/\n\tsetupTransition: function () {\n\t\tthis.fromIndex = this.fromIndex != null ? this.fromIndex : this.lastIndex || 0;\n\t\tthis.toIndex = this.toIndex != null ? this.toIndex : this.index;\n\t\tif (this.layout) {\n\t\t\tthis.layout.start();\n\t\t}\n\t},\n\n\t/**\n\t* Completes the transition between two panels.\n\t*\n\t* @private\n\t*/\n\tfinishTransition: function () {\n\t\tthis.completeTransition(true);\n\t\tthis.transitioning = false;\n\t},\n\n\t/**\n\t* Completes the transition by performing any tasks to be run when the transition ends,\n\t* including firing events and clean-up.\n\t*\n\t* @param {Boolean} [fire] - If `true`, will fire the {@link enyo.Panels#onTransitionFinish}\n\t*\tevent if deemed necessary.\n\t* @private\n\t*/\n\tcompleteTransition: function (fire) {\n\t\tif (this.layout) {\n\t\t\tthis.layout.finish();\n\t\t}\n\n\t\tif (fire) {\n\t\t\tthis.fireTransitionFinish();\n\t\t}\n\n\t\tthis.transitionPoints = [];\n\t\tthis.fraction = 0;\n\t\tthis.fromIndex = this.toIndex = null;\n\t},\n\n\t/**\n\t* @fires enyo.Panels#onTransitionStart\n\t* @private\n\t*/\n\tfireTransitionStart: function () {\n\t\tvar t = this.startTransitionInfo;\n\t\tif (this.hasNode() && (!t || (t.fromIndex != this.fromIndex || t.toIndex != this.toIndex))) {\n\t\t\tthis.startTransitionInfo = {fromIndex: this.fromIndex, toIndex: this.toIndex};\n\t\t\tthis.doTransitionStart(utils.clone(this.startTransitionInfo));\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.Panels#onTransitionFinish\n\t* @private\n\t*/\n\tfireTransitionFinish: function () {\n\t\tvar t = this.finishTransitionInfo;\n\t\tif (this.hasNode() && (!t || (t.fromIndex != this.fromIndex || t.toIndex != this.toIndex))) {\n\t\t\tif (this.transitionOnComplete) {\n\t\t\t\tthis.finishTransitionInfo = {fromIndex: t.toIndex, toIndex: this.lastIndex};\n\t\t\t} else {\n\t\t\t\tthis.finishTransitionInfo = {fromIndex: this.lastIndex, toIndex: this.index};\n\t\t\t}\n\t\t\tthis.doTransitionFinish(utils.clone(this.finishTransitionInfo));\n\t\t}\n\t},\n\n\t/**\n\t* Interpolates between arrangements as needed.\n\t*\n\t* @private\n\t*/\n\tstepTransition: function () {\n\t\tif (this.hasNode()) {\n\t\t\t// select correct transition points and normalize fraction.\n\t\t\tvar t$ = this.transitionPoints;\n\t\t\tvar r = (this.fraction || 0) * (t$.length-1);\n\t\t\tvar i = Math.floor(r);\n\t\t\tr = r - i;\n\t\t\tvar s = t$[i], f = t$[i+1];\n\t\t\t// get arrangements and lerp between them\n\t\t\tvar s0 = this.fetchArrangement(s);\n\t\t\tvar s1 = this.fetchArrangement(f);\n\t\t\tthis.arrangement = s0 && s1 ? Panels.lerp(s0, s1, r) : (s0 || s1);\n\t\t\tif (this.arrangement && this.layout) {\n\t\t\t\tthis.layout.flowArrangement();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Fetches the arrangement at a specified index, initializing it if necessary.\n\t*\n\t* @param  {Number} index - The index of the desired arrangement from `transitionPoints`.\n\t* @return {Object} The desired arrangement object.\n\t* @private\n\t*/\n\tfetchArrangement: function (index) {\n\t\tif ((index != null) && !this.arrangements[index] && this.layout) {\n\t\t\tthis.layout._arrange(index);\n\t\t\tthis.arrangements[index] = this.readArrangement(this.getPanels());\n\t\t}\n\t\treturn this.arrangements[index];\n\t},\n\n\t/**\n\t* Iterates over `panels` and retrieves a copy of each panel's `_arranger`.\n\t*\n\t* @param  {enyo.Control[]} panels - The array of panels.\n\t* @return {Object[]}              - The array of arrangement objects.\n\t*/\n\treadArrangement: function (panels) {\n\t\tvar r = [];\n\t\tfor (var i=0, c$=panels, c; (c=c$[i]); i++) {\n\t\t\tr.push(utils.clone(c._arranger));\n\t\t}\n\t\treturn r;\n\t},\n\n\t/**\n\t* @lends  enyo.Panels\n\t* @private\n\t*/\n\tstatics: {\n\t\t/**\n\t\t* Returns `true` for iOS and Android phone form factors, or when window width\n\t\t* is 800px or less. Approximates work done using media queries in `Panels.css`.\n\t\t*\n\t\t* @return {Boolean} `true` for narrow devices or viewports; otherwise, `false`.\n\t\t* @public\n\t\t*/\n\t\tisScreenNarrow: function () {\n\t\t\tif(Panels.isNarrowDevice()) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn dom.getWindowWidth() <= 800;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* Returns the class name to apply for narrow fitting. See media queries\n\t\t* in `Panels.css`.\n\t\t*\n\t\t* @return {String} The CSS class name to apply.\n\t\t*/\n\t\tgetNarrowClass: function () {\n\t\t\tif(Panels.isNarrowDevice()) {\n\t\t\t\treturn 'enyo-panels-force-narrow';\n\t\t\t} else {\n\t\t\t\treturn 'enyo-panels-fit-narrow';\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* Lerps between arrangements.\n\t\t*\n\t\t* @param  {Object[]} a0     - Array of current arrangement objects.\n\t\t* @param  {Object[]} a1     - Array of target arrangement object.\n\t\t* @param  {Number} fraction - The fraction (between 0 and 1) with which to lerp.\n\t\t* @return {Object[]}        - Array of arrangements that is `fraction` between\n\t\t* \t`a0` and `a1`.\n\t\t* @private\n\t\t*/\n\t\tlerp: function (a0, a1, fraction) {\n\t\t\tvar r = [];\n\t\t\tfor (var i=0, k$=utils.keys(a0), k; (k=k$[i]); i++) {\n\t\t\t\tr.push(this.lerpObject(a0[k], a1[k], fraction));\n\t\t\t}\n\t\t\treturn r;\n\t\t},\n\n\t\t/**\n\t\t* Lerps between the values of arrangement objects.\n\t\t*\n\t\t* @param  {Object} a0       - The source arragement.\n\t\t* @param  {Object} a1       - The destination arragement.\n\t\t* @param  {Number} fraction - The fraction (between 0 and 1) with which to lerp.\n\t\t*\n\t\t* @return {Object}          - The lerped arrangement.\n\t\t* @private\n\t\t*/\n\t\tlerpObject: function (a0, a1, fraction) {\n\t\t\tvar b = utils.clone(a0), n, o;\n\t\t\t// a1 might be undefined when deleting panels\n\t\t\tif (a1) {\n\t\t\t\tfor (var i in a0) {\n\t\t\t\t\tn = a0[i];\n\t\t\t\t\to = a1[i];\n\t\t\t\t\tif (n != o) {\n\t\t\t\t\t\tb[i] = n - (n - o) * fraction;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn b;\n\t\t},\n\n\t\t/**\n\t\t* Tests User Agent strings to identify narrow devices.\n\t\t*\n\t\t* @return {Boolean} `true` if the current device is a narrow device;\n\t\t* otherwise, `false`.\n\t\t*/\n\t\tisNarrowDevice: function () {\n\t\t\tvar ua = navigator.userAgent;\n\t\t\tswitch (platform.platformName) {\n\t\t\t\tcase 'ios':\n\t\t\t\t\treturn (/iP(?:hone|od;(?: U;)? CPU) OS (\\d+)/).test(ua);\n\t\t\t\tcase 'android':\n\t\t\t\t\treturn (/Mobile/).test(ua) && (platform.android > 2);\n\t\t\t\tcase 'androidChrome':\n\t\t\t\t\treturn (/Mobile/).test(ua);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils'),\n\tplatform = require('../platform'),\n\tdispatcher = require('../dispatcher'),\n\tfullscreen = require('../fullscreen'),\n\troots = require('../roots');\n\nvar\n\tUiComponent = require('../UiComponent'),\n\tHTMLStringDelegate = require('../HTMLStringDelegate'),\n\tDom = require('../dom'),\n\tFloatingLayer = require('../floatingLayer');\n\nvar nodePurgatory;\n\n/**\n* Called by `Control.teardownRender()`. In certain circumstances,\n* we need to temporarily keep a DOM node around after tearing down\n* because we're still acting on a stream of touch events emanating\n* from the node. See `Control.retainNode()` for more information.\n*\n* @private\n*/\nfunction storeRetainedNode (control) {\n\tvar p = getNodePurgatory(),\n\t\tn = control._retainedNode;\n\tif (n) {\n\t\tp.appendChild(n);\n\t}\n\tcontrol._retainedNode = null;\n}\n\n/**\n* Called (via a callback) when it's time to release a DOM node\n* that we've retained.\n*\n* @private\n*/\nfunction releaseRetainedNode (retainedNode) {\n\tvar p = getNodePurgatory();\n\tif (retainedNode) {\n\t\tp.removeChild(retainedNode);\n\t}\n}\n\n/**\n* Lazily add a hidden `<div>` to `document.body` to serve as a\n* container for retained DOM nodes.\n*\n* @private\n*/\nfunction getNodePurgatory () {\n\tvar p = nodePurgatory;\n\tif (!p) {\n\t\tp = nodePurgatory = document.createElement(\"div\");\n\t\tp.id = \"node_purgatory\";\n\t\tp.style.display = \"none\";\n\t\tdocument.body.appendChild(p);\n\t}\n\treturn p;\n}\n\n/**\n* {@link enyo.Control} is a [component]{@link enyo.UiComponent} that controls\n* a [DOM]{@glossary DOM} [node]{@glossary Node} (i.e., an element in the user\n* interface). Controls are generally visible and the user often interacts with\n* them directly. While things like buttons and input boxes are obviously\n* controls, in Enyo, a control may be as simple as a text item or as complex\n* as an entire application. Both inherit the same basic core capabilities from\n* this kind.\n*\n* For more information, see the documentation on\n* [Controls]{@linkplain $dev-guide/key-concepts/controls.html} in the\n* Enyo Developer Guide.\n*\n* **If you make changes to `enyo.Control`, be sure to add or update the\n* appropriate unit tests.**\n*\n* @class enyo.Control\n* @extends enyo.UiComponent\n* @ui\n* @public\n*/\nvar Control = module.exports = kind(\n\t/** @lends enyo.Control.prototype */ {\n\n\tname: 'enyo.Control',\n\n\t/**\n\t* @private\n\t*/\n\tkind: UiComponent,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* @type {String}\n\t* @default 'enyo.Control'\n\t* @public\n\t*/\n\tdefaultKind: null, // set after the fact\n\n\t/**\n\t* The [DOM node]{@glossary DOM} tag name that should be created.\n\t*\n\t* @type {String}\n\t* @default 'div'\n\t* @public\n\t*/\n\ttag: 'div',\n\n\t/**\n\t* A [hash]{@glossary Object} of attributes to be applied to the created\n\t* [DOM]{@glossary DOM} node.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tattributes: null,\n\n\t/**\n\t* [Boolean]{@glossary Boolean} flag indicating whether this element should\n\t* \"fit\", or fill its container's size.\n\t*\n\t* @type {Boolean}\n\t* @default null\n\t* @public\n\t*/\n\tfit: null,\n\n\t/**\n\t* [Boolean]{@glossary Boolean} flag indicating whether HTML is allowed in\n\t* this control's [content]{@link enyo.Control#content} property. If `false`\n\t* (the default), HTML will be encoded into [HTML entities]{@glossary entity}\n\t* (e.g., `&lt;` and `&gt;`) for literal visual representation.\n\t*\n\t* @type {Boolean}\n\t* @default null\n\t* @public\n\t*/\n\tallowHtml: false,\n\n\t/**\n\t* Mimics the HTML `style` attribute.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tstyle: '',\n\n\t/**\n\t* @private\n\t*/\n\tkindStyle: '',\n\n\t/**\n\t* Mimics the HTML `class` attribute.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tclasses: '',\n\n\t/**\n\t* @private\n\t*/\n\tkindClasses: '',\n\n\t/**\n\t* [Classes]{@link enyo.Control#classes} that are applied to all controls.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tcontrolClasses: '',\n\n\t/**\n\t* The text-based content of the Control. If the [allowHtml]{@link enyo.Control#allowHtml}\n\t* flag is set to `true`, you may set this property to an HTML string.\n\t* @public\n\t*/\n\tcontent: '',\n\n\t/**\n\t* If true or 'inherit' and enyo.gesture.doubleTabEnabled == true, will fire a doubletap\n\t* event, and will temporarily suppress a single tap while waiting for a double tap.\n\t*\n\t* @type {String|Boolean}\n\t* @default 'inherit'\n\t* @public\n\t*/\n\tdoubleTapEnabled: 'inherit',\n\n\t/**\n\t* Time in milliseconds to wait to detect a double tap\n\t*\n\t* @type {Number}\n\t* @default 300\n\t* @public\n\t*/\n\tdoubleTapInterval: 300,\n\n\t/**\n\t* @todo Find out how to document \"handlers\".\n\t* @public\n\t*/\n\thandlers: {\n\t\tontap: 'tap',\n\t\tonShowingChanged: 'showingChangedHandler'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstrictlyInternalEvents: {onenter: 1, onleave: 1},\n\n\t/**\n\t* @private\n\t*/\n\tisInternalEvent: function (event) {\n\t\tvar rdt = dispatcher.findDispatchTarget(event.relatedTarget);\n\t\treturn rdt && rdt.isDescendantOf(this);\n\t},\n\n\t// .................................\n\t// DOM NODE MANIPULATION API\n\n\t/**\n\t* Gets the bounds for this control. The `top` and `left` properties returned\n\t* by this method represent the control's positional distance in pixels from\n\t* either A) the first parent of this control that is absolutely or relatively\n\t* positioned, or B) the `document.body`.\n\t*\n\t* This is a shortcut convenience method for {@link enyo.dom.getBounds}.\n\t*\n\t* @returns {Object} An [object]{@glossary Object} containing `top`, `left`,\n\t* `width`, and `height` properties.\n\t* @public\n\t*/\n\tgetBounds: function () {\n\t\tvar node = this.hasNode(),\n\t\t\tbounds = node && Dom.getBounds(node);\n\n\t\treturn bounds || {left: undefined, top: undefined, width: undefined, height: undefined};\n\t},\n\n\t/**\n\t* Sets the absolute/relative position and/or size for this control. Values\n\t* of `null` or `undefined` for the `bounds` properties will be ignored. You\n\t* may optionally specify a `unit` (i.e., a valid CSS measurement unit) as a\n\t* [string]{@glossary String} to be applied to each of the position/size\n\t* assignments.\n\t*\n\t* @param {Object} bounds - An [object]{@glossary Object}, optionally\n\t* containing one or more of the following properties: `width`, `height`,\n\t* `top`, `right`, `bottom`, and `left`.\n\t* @param {String} [unit='px']\n\t* @public\n\t*/\n\tsetBounds: function (bounds, unit) {\n\t\tvar newStyle = '',\n\t\t\textents = ['width', 'height', 'left', 'top', 'right', 'bottom'],\n\t\t\ti = 0,\n\t\t\tval,\n\t\t\text;\n\n\t\t// if no unit is supplied, we default to pixels\n\t\tunit = unit || 'px';\n\n\t\tfor (; (ext = extents[i]); ++i) {\n\t\t\tval = bounds[ext];\n\t\t\tif (val || val === 0) {\n\t\t\t\tnewStyle += (ext + ':' + val + (typeof val == 'string' ? '' : unit) + ';');\n\t\t\t}\n\t\t}\n\n\t\tthis.set('style', this.style + newStyle);\n\t},\n\n\t/**\n\t* Gets the bounds for this control. The `top` and `left` properties returned\n\t* by this method represent the control's positional distance in pixels from\n\t* `document.body`. To get the bounds relative to this control's parent(s),\n\t* use [getBounds()]{@link enyo.Control#getBounds}.\n\t*\n\t* This is a shortcut convenience method for {@link enyo.dom.getAbsoluteBounds}.\n\t*\n\t* @returns {Object} An [object]{@glossary Object} containing `top`, `left`,\n\t* `width`, and `height` properties.\n\t* @public\n\t*/\n\tgetAbsoluteBounds: function () {\n\t\tvar node = this.hasNode(),\n\t\t\tbounds = node && Dom.getAbsoluteBounds(node);\n\n\t\treturn bounds || {\n\t\t\tleft: undefined,\n\t\t\ttop: undefined,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tbottom: undefined,\n\t\t\tright: undefined\n\t\t};\n\t},\n\n\t/**\n\t* Shortcut method to set [showing]{@link enyo.Control#showing} to `true`.\n\t*\n\t* @public\n\t*/\n\tshow: function () {\n\t\tthis.set('showing', true);\n\t},\n\n\t/**\n\t* Shortcut method to set [showing]{@link enyo.Control#showing} to `false`.\n\t*\n\t* @public\n\t*/\n\thide: function () {\n\t\tthis.set('showing', false);\n\t},\n\n\t/**\n\t* Sets this control to be [focused]{@glossary focus}.\n\t*\n\t* @public\n\t*/\n\tfocus: function () {\n\t\tif (this.hasNode()) this.node.focus();\n\t},\n\n\t/**\n\t* [Blurs]{@glossary blur} this control. (The opposite of\n\t* [focus()]{@link enyo.Control#focus}.)\n\t*\n\t* @public\n\t*/\n\tblur: function () {\n\t\tif (this.hasNode()) this.node.blur();\n\t},\n\n\t/**\n\t* Determines whether this control currently has the [focus]{@glossary focus}.\n\t*\n\t* @returns {Boolean} Whether this control has focus. `true` if the control\n\t* has focus; otherwise, `false`.\n\t* @public\n\t*/\n\thasFocus: function () {\n\t\tif (this.hasNode()) return document.activeElement === this.node;\n\t},\n\n\t/**\n\t* Determines whether this control's [DOM node]{@glossary Node} has been created.\n\t*\n\t* @returns {Boolean} Whether this control's [DOM node]{@glossary Node} has\n\t* been created. `true` if it has been created; otherwise, `false`.\n\t* @public\n\t*/\n\thasNode: function () {\n\t\treturn this.generated && (this.node || this.findNodeById());\n\t},\n\n\t/**\n\t* Gets the requested property (`name`) from the control's attributes\n\t* [hash]{@glossary Object}, from its cache of node attributes, or, if it has\n\t* yet to be cached, from the [node]{@glossary Node} itself.\n\t*\n\t* @param {String} name - The attribute name to get.\n\t* @returns {(String|Null)} The value of the requested attribute, or `null`\n\t* if there isn't a [DOM node]{@glossary Node} yet.\n\t* @public\n\t*/\n\tgetAttribute: function (name) {\n\t\tvar node;\n\n\t\t// TODO: This is a fixed API assuming that no changes will happen to the DOM that\n\t\t// do not use it...original implementation of this method used the node's own\n\t\t// getAttribute method every time it could but we really only need to do that if we\n\t\t// weren't the ones that set the value to begin with -- in slow DOM situations this\n\t\t// could still be faster but it needs to be verified\n\t\tif (this.attributes.hasOwnProperty(name)) return this.attributes[name];\n\t\telse {\n\t\t\tnode = this.hasNode();\n\n\t\t\t// we store the value so that next time we'll know what it is\n\t\t\t/*jshint -W093 */\n\t\t\treturn (this.attributes[name] = (node ? node.getAttribute(name) : null));\n\t\t\t/*jshint +W093 */\n\t\t}\n\t},\n\n\t/**\n\t* Assigns an attribute to a control's [node]{@glossary Node}. Assigning\n\t* `name` a value of `null`, `false`, or the empty string `(\"\")` will remove\n\t* the attribute from the node altogether.\n\t*\n\t* @param {String} name - Attribute name to assign/remove.\n\t* @param {(String|Number|null)} value - The value to assign to `name`\n\t* @returns {this} Callee for chaining.\n\t* @public\n\t*/\n\tsetAttribute: function (name, value) {\n\t\tvar attrs = this.attributes,\n\t\t\tnode = this.hasNode(),\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tif (name) {\n\t\t\tattrs[name] = value;\n\n\t\t\tif (node) {\n\t\t\t\tif (value == null || value === false || value === '') {\n\t\t\t\t\tnode.removeAttribute(name);\n\t\t\t\t} else node.setAttribute(name, value);\n\t\t\t} else delegate.invalidate(this, 'attributes');\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Reads the `name` property directly from the [node]{@glossary Node}. You\n\t* may provide a default (`def`) to use if there is no node yet.\n\t*\n\t* @param {String} name - The [node]{@glossary Node} property name to get.\n\t* @param {*} def - The default value to apply if there is no node.\n\t* @returns {String} The value of the `name` property, or `def` if the node\n\t* was not available.\n\t* @public\n\t*/\n\tgetNodeProperty: function (name, def) {\n\t\treturn this.hasNode() ? this.node[name] : def;\n\t},\n\n\t/**\n\t* Sets the value of a property (`name`) directly on the [node]{@glossary Node}.\n\t*\n\t* @param {String} name - The [node]{@glossary Node} property name to set.\n\t* @param {*} value - The value to assign to the property.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsetNodeProperty: function (name, value) {\n\t\tif (this.hasNode()) this.node[name] = value;\n\t\treturn this;\n\t},\n\n\t/**\n\t* Appends additional content to this control.\n\t*\n\t* @param {String} content - The new string to add to the end of the `content`\n\t* property.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddContent: function (content) {\n\t\treturn this.set('content', this.get('content') + content);\n\t},\n\n\t// .................................\n\n\t// .................................\n\t// STYLE/CLASS API\n\n\t/**\n\t* Determines whether this control has the class `name`.\n\t*\n\t* @param {String} name - The name of the class (or classes) to check for.\n\t* @returns {Boolean} Whether the control has the class `name`.\n\t* @public\n\t*/\n\thasClass: function (name) {\n\t\treturn name && (' ' + this.classes + ' ').indexOf(' ' + name + ' ') > -1;\n\t},\n\n\t/**\n\t* Adds the specified class to this control's list of classes.\n\t*\n\t* @param {String} name - The name of the class to add.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddClass: function (name) {\n\t\tvar classes = this.classes || '';\n\n\t\t// NOTE: Because this method accepts a string and for efficiency does not wish to\n\t\t// parse it to determine if it is actually multiple classes we later pull a trick\n\t\t// to keep it normalized and synchronized with our attributes hash and the node's\n\t\tif (!this.hasClass(name)) {\n\n\t\t\t// this is hooked\n\t\t\tthis.set('classes', classes + (classes ? (' ' + name) : name));\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Removes the specified class from this control's list of classes.\n\t*\n\t* **Note: It is not advisable to pass a string of multiple, space-delimited\n\t* class names into this method. Instead, call the method once for each class\n\t* name that you want to remove.**\n\t*\n\t* @param {String} name - The name of the class to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tremoveClass: function (name) {\n\t\tvar classes = this.classes;\n\n\t\tif (name) {\n\t\t\tthis.set('classes', (' ' + classes + ' ').replace(' ' + name + ' ', ' ').trim());\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Adds or removes the specified class conditionally, based on the state\n\t* of the `add` argument.\n\t*\n\t* @param {String} name - The name of the class to add or remove.\n\t* @param {Boolean} add - If `true`, `name` will be added as a class; if\n\t* `false`, it will be removed.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddRemoveClass: function (name, add) {\n\t\treturn name ? this[add ? 'addClass' : 'removeClass'](name) : this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclassesChanged: function () {\n\t\tvar classes = this.classes,\n\t\t\tnode = this.hasNode(),\n\t\t\tattrs = this.attributes,\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tif (node) {\n\t\t\tif (classes || this.kindClasses) {\n\t\t\t\tnode.setAttribute('class', classes || this.kindClasses);\n\t\t\t} else node.removeAttribute('class');\n\n\t\t\tthis.classes = classes = node.getAttribute('class');\n\t\t}\n\n\t\t// we need to update our attributes.class value and flag ourselves to be\n\t\t// updated\n\t\tattrs['class'] = classes;\n\n\t\t// we want to notify the delegate that the attributes have changed in case it wants\n\t\t// to handle this is some special way\n\t\tdelegate.invalidate(this, 'attributes');\n\t},\n\n\t/**\n\t* Applies a CSS style directly to the control. Use the `prop` argument to\n\t* specify the CSS property name you'd like to set, and `value` to specify\n\t* the desired value. Setting `value` to `null` will remove the CSS property\n\t* `prop` altogether.\n\t*\n\t* @param {String} prop - The CSS property to assign.\n\t* @param {(String|Number|null|undefined)} value - The value to assign to\n\t* `prop`. Setting a value of `null`, `undefined`, or the empty string `(\"\")`\n\t* will remove the property `prop` from the control.\n\t* @returns {this} Callee for chaining.\n\t* @public\n\t*/\n\tapplyStyle: function (prop, value) {\n\n\t\t// NOTE: This method deliberately avoids calling set('style', ...) for performance\n\t\t// as it will have already been parsed by the browser so we pass it on via the\n\t\t// notification system which is the same\n\n\t\t// TODO: Wish we could delay this potentially...\n\t\t// if we have a node we render the value immediately and update our style string\n\t\t// in the process to keep them synchronized\n\t\tvar node = this.hasNode(),\n\t\t\tstyle = this.style,\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\n\n\t\t// FIXME: This is put in place for a Firefox bug where setting a style value of a node \n\t\t// via its CSSStyleDeclaration object (by accessing its node.style property) does\n\t\t// not work when using a CSS property name that contains one or more dash, and requires \n\t\t// setting the property via the JavaScript-style property name. This fix should be \n\t\t// removed once this issue has been resolved in the Firefox mainline and its variants\n\t\t// (it is currently resolved in the 36.0a1 nightly):\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1083457\n\t\tif (node && (platform.firefox < 35 || platform.firefoxOS || platform.androidFirefox)) {\n\t\t\tprop = prop.replace(/-([a-z])/gi, function(match, submatch) {\n\t\t\t\treturn submatch.toUpperCase();\n\t\t\t});\n\t\t}\n\n\t\tif (value !== null && value !== '' && value !== undefined) {\n\t\t\t// update our current cached value\n\t\t\tif (node) {\n\t\t\t\tnode.style[prop] = value;\n\n\t\t\t\t// cssText is an internal property used to help know when to sync and not\n\t\t\t\t// sync with the node in styleChanged\n\t\t\t\tthis.style = this.cssText = node.style.cssText;\n\n\t\t\t\t// we need to invalidate the style for the delegate\n\t\t\t\tdelegate.invalidate(this, 'style');\n\n\t\t\t\t// otherwise we have to try and prepare it for the next time it is rendered we\n\t\t\t\t// will need to update it because it will not be synchronized\n\t\t\t} else this.set('style', style + (' ' + prop + ':' + value + ';'));\n\t\t} else {\n\n\t\t\t// in this case we are trying to clear the style property so if we have the node\n\t\t\t// we let the browser handle whatever the value should be now and otherwise\n\t\t\t// we have to parse it out of the style string and wait to be rendered\n\n\t\t\tif (node) {\n\t\t\t\tnode.style[prop] = '';\n\t\t\t\tthis.style = this.cssText = node.style.cssText;\n\n\t\t\t\t// we need to invalidate the style for the delegate\n\t\t\t\tdelegate.invalidate(this, 'style');\n\t\t\t} else {\n\n\t\t\t\t// this is a rare case to nullify the style of a control that is not\n\t\t\t\t// rendered or does not have a node\n\t\t\t\tstyle = style.replace(new RegExp(\n\t\t\t\t\t// This looks a lot worse than it is. The complexity stems from needing to\n\t\t\t\t\t// match a url container that can have other characters including semi-\n\t\t\t\t\t// colon and also that the last property may/may-not end with one\n\t\t\t\t\t'\\\\s*' + prop + '\\\\s*:\\\\s*[a-zA-Z0-9\\\\ ()_\\\\-\\'\"%,]*(?:url\\\\(.*\\\\)\\\\s*[a-zA-Z0-9\\\\ ()_\\\\-\\'\"%,]*)?\\\\s*(?:;|;?$)',\n\t\t\t\t\t'gi'\n\t\t\t\t),'');\n\t\t\t\tthis.set('style', style);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Allows the addition of several CSS properties and values at once, via a\n\t* single string, similar to how the HTML `style` attribute works.\n\t*\n\t* @param {String} css - A string containing one or more valid CSS styles.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddStyles: function (css) {\n\t\tvar key,\n\t\t\tnewStyle = '';\n\n\t\tif (typeof css == 'object') {\n\t\t\tfor (key in css) newStyle += (key + ':' + css[key] + ';');\n\t\t} else newStyle = css || '';\n\n\t\tthis.set('style', this.style + newStyle);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstyleChanged: function () {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\t// if the cssText internal string doesn't match then we know style was set directly\n\t\tif (this.cssText !== this.style) {\n\n\t\t\t// we need to render the changes and synchronize - this means that the style\n\t\t\t// property was set directly so we will reset it prepending it with the original\n\t\t\t// style (if any) for the kind and keeping whatever the browser is keeping\n\t\t\tif (this.hasNode()) {\n\t\t\t\tthis.node.style.cssText = this.kindStyle + (this.style || '');\n\t\t\t\t// now we store the parsed version\n\t\t\t\tthis.cssText = this.style = this.node.style.cssText;\n\t\t\t}\n\n\t\t\t// we need to ensure that the delegate has an opportunity to handle this change\n\t\t\t// separately if it needs to\n\t\t\tdelegate.invalidate(this, 'style');\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves a control's CSS property value. This doesn't just pull the\n\t* assigned value of `prop`; it returns the browser's understanding of `prop`,\n\t* the \"computed\" value. If the control isn't been rendered yet, and you need\n\t* a default value (such as `0`), include it in the arguments as `def`.\n\t*\n\t* @param {String} prop - The property name to get.\n\t* @param {*} [def] - An optional default value, in case the control isn't\n\t* rendered yet.\n\t* @returns {(String|Number)} The computed value of `prop`, as the browser\n\t* sees it.\n\t* @public\n\t*/\n\tgetComputedStyleValue: function (prop, def) {\n\t\treturn this.hasNode() ? Dom.getComputedStyleValue(this.node, prop) : def;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfindNodeById: function () {\n\t\treturn this.id && (this.node = Dom.byId(this.id));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tidChanged: function (was) {\n\t\tif (was) Control.unregisterDomEvents(was);\n\t\tif (this.id) {\n\t\t\tControl.registerDomEvents(this.id, this);\n\t\t\tthis.setAttribute('id', this.id);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\t\tdelegate.invalidate(this, 'content');\n\t},\n\n\t/**\n\t* If the control has been generated, re-flows the control.\n\t*\n\t* @public\n\t*/\n\tbeforeChildRender: function () {\n\t\t// if we are generated, we should flow before rendering a child;\n\t\t// if not, the render context isn't ready anyway\n\t\tif (this.generated) this.flow();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function (was) {\n\t\t// if we are changing from not showing to showing we attempt to find whatever\n\t\t// our last known value for display was or use the default\n\t\tif (!was && this.showing) {\n\t\t\tthis.applyStyle('display', this._display || '');\n\t\t\tthis.sendShowingChangedEvent(was);\n\t\t}\n\n\t\t// if we are supposed to be hiding the control then we need to cache our current\n\t\t// display state\n\t\telse if (was && !this.showing) {\n\t\t\tthis.sendShowingChangedEvent(was);\n\t\t\t// we can't truly cache this because it _could_ potentially be set to multiple\n\t\t\t// values throughout its lifecycle although that seems highly unlikely...\n\t\t\tthis._display = this.hasNode() ? this.node.style.display : '';\n\t\t\tthis.applyStyle('display', 'none');\n\t\t}\n\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendShowingChangedEvent: function (was) {\n\t\tvar waterfall = (was === true || was === false),\n\t\t\tparent = this.parent;\n\n\t\t// make sure that we don't trigger the waterfall when this method\n\t\t// is arbitrarily called during _create_ and it should only matter\n\t\t// that it changed if our parent's are all showing as well\n\t\tif (waterfall && (parent ? parent.getAbsoluteShowing(true) : true)) {\n\t\t\tthis.waterfall('onShowingChanged', {originator: this, showing: this.showing});\n\t\t}\n\t},\n\n\t/**\n\t* Returns `true` if this control and all parents are showing.\n\t*\n\t* @param {Boolean} ignoreBounds - If `true`, it will not force a layout by retrieving\n\t*\tcomputed bounds and rely on the return from [showing]{@link enyo.Control#showing}\n\t* exclusively.\n\t* @returns {Boolean} Whether the control is showing (visible).\n\t* @public\n\t*/\n\tgetAbsoluteShowing: function (ignoreBounds) {\n\t\tvar bounds = !ignoreBounds ? this.getBounds() : null,\n\t\t\tparent = this.parent;\n\n\t\tif (!this.generated || this.destroyed || !this.showing || (bounds &&\n\t\t\tbounds.height === 0 && bounds.width === 0)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (parent && parent.getAbsoluteShowing) {\n\n\t\t\t// we actually don't care what the parent says if it is the floating layer\n\t\t\tif (!this.parentNode || (this.parentNode !== Control.floatingLayer.hasNode())) {\n\t\t\t\treturn parent.getAbsoluteShowing(ignoreBounds);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* Handles the `onShowingChanged` event that is waterfalled by controls when\n\t* their `showing` value is modified. If the control is not showing itself\n\t* already, it will not continue the waterfall. Overload this method to\n\t* provide additional handling for this event.\n\t*\n\t* @private\n\t*/\n\tshowingChangedHandler: function (sender, event) {\n\t\treturn sender === this ? false : !this.showing;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfitChanged: function () {\n\t\tthis.parent.reflow();\n\t},\n\n\t/**\n\t* Determines whether we are in fullscreen mode or not.\n\t*\n\t* @returns {Boolean} Whether we are currently in fullscreen mode.\n\t* @public\n\t*/\n\tisFullscreen: function () {\n\t\treturn (this.hasNode() && this.node === fullscreen.getFullscreenElement());\n\t},\n\n\t/**\n\t* Requests that this control be displayed fullscreen (like a video\n\t* container). If the request is granted, the control fills the screen and\n\t* `true` is returned; if the request is denied, the control is not resized\n\t* and `false` is returned.\n\t*\n\t* @returns {Boolean} `true` on success; otherwise, `false`.\n\t* @public\n\t*/\n\trequestFullscreen: function () {\n\t\tif (!this.hasNode()) return false;\n\n\t\tif (fullscreen.requestFullscreen(this)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t* Ends fullscreen mode for this control.\n\t*\n\t* @returns {Boolean} If the control was in fullscreen mode before this\n\t* method was called, it is taken out of that mode and `true` is returned;\n\t* otherwise, `false` is returned.\n\t* @public\n\t*/\n\tcancelFullscreen: function() {\n\t\tif (this.isFullscreen()) {\n\t\t\tfullscreen.cancelFullscreen();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// .................................\n\n\t// .................................\n\t// RENDER-SCHEME API\n\n\t/**\n\t* Indicates whether the control is allowed to be generated, i.e., rendered\n\t* into the [DOM]{@glossary DOM} tree.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tcanGenerate: true,\n\n\t/**\n\t* Indicates whether the control is visible.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tshowing: true,\n\n\t/**\n\t* The [node]{@glossary Node} that this control will be rendered into.\n\t*\n\t* @type {enyo.Control}\n\t* @default null\n\t* @public\n\t*/\n\trenderDelegate: null,\n\n\t/**\n\t* Indicates whether the control has been generated yet.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @private\n\t*/\n\tgenerated: false,\n\n\t/**\n\t* Forces the control to be rendered. You should use this sparingly, as it\n\t* can be costly, but it may be necessary in cases where a control or its\n\t* contents have been updated surreptitiously.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trender: function () {\n\n\t\t// prioritize the delegate set for this control otherwise use the default\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\t// the render delegate acts on the control\n\t\tdelegate.render(this);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Takes this control and drops it into a (new/different)\n\t* [DOM node]{@glossary Node}. This will replace any existing nodes in the\n\t* target `parentNode`.\n\t*\n\t* @param {Node} parentNode - The new parent of this control.\n\t* @param {Boolean} preventRooting - If `true`, this control will not be treated as a root \n\t*\tview and will not be added to the set of roots.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trenderInto: function (parentNode, preventRooting) {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate,\n\t\t\tnoFit = this.fit === false;\n\n\t\t// attempt to retrieve the parentNode\n\t\tparentNode = Dom.byId(parentNode);\n\n\t\t// teardown in case of previous render\n\t\tdelegate.teardownRender(this);\n\n\t\tif (parentNode == document.body && !noFit) this.setupBodyFitting();\n\t\telse if (this.fit) this.addClass('enyo-fit enyo-clip');\n\n\t\t// for IE10 support, we want full support over touch actions in enyo-rendered areas\n\t\tthis.addClass('enyo-no-touch-action');\n\n\t\t// add css to enable hw-accelerated scrolling on non-android platforms\n\t\t// ENYO-900, ENYO-901\n\t\tthis.setupOverflowScrolling();\n\n\t\t// if there are unflushed body classes we flush them now...\n\t\tDom.flushBodyClasses();\n\n\t\t// we inject this as a root view because, well, apparently that is just an assumption\n\t\t// we've been making...\n\t\tif (!preventRooting) {\n\t\t\troots.addToRoots(this);\n\t\t}\n\n\t\t// now let the delegate render it the way it needs to\n\t\tdelegate.renderInto(this, parentNode);\n\n\t\tDom.updateScaleFactor();\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* A function that fires after the control has rendered. This performs a\n\t* reflow.\n\t*\n\t* @public\n\t*/\n\trendered: function () {\n\t\tvar child,\n\t\t\ti = 0;\n\n\t\t// CAVEAT: Currently we use one entry point ('reflow') for\n\t\t// post-render layout work *and* post-resize layout work.\n\t\tthis.reflow();\n\n\t\tfor (; (child = this.children[i]); ++i) {\n\t\t\tif (child.generated) child.rendered();\n\t\t}\n\t},\n\n\t/**\n\t* You should generally not need to call this method in your app code.\n\t* It is used internally by some Enyo UI libraries to handle a rare\n\t* issue that sometimes arises when using a virtualized list or repeater\n\t* on a touch device.\n\t*\n\t* This issue occurs when a gesture (e.g. a drag) originates with a DOM\n\t* node that ends up being destroyed in mid-gesture as the list updates.\n\t* When the node is destroyed, the stream of DOM events representing the\n\t* gesture stops, causing the associated action to stop or otherwise\n\t* fail.\n\t*\n\t* You can prevent this problem from occurring by calling `retainNode`\n\t* on the {@link enyo.Control} from which the gesture originates. Doing\n\t* so will cause Enyo to keep the DOM node around (hidden from view)\n\t* until you explicitly release it. You should call `retainNode` in the\n\t* event handler for the event that starts the gesture.\n\t*\n\t* `retainNode` returns a function that you must call when the gesture\n\t* ends to release the node. Make sure you call this function to avoid\n\t* \"leaking\" the DOM node (failing to remove it from the DOM).\n\t*\n\t* @param {Node} node - Optional. Defaults to the node associated with\n\t* the Control (`Control.node`). You can generally omit this parameter\n\t* when working with {@link enyo.DataList} or {@link enyo.DataGridList},\n\t* but should generally pass in the event's target node (`event.target`)\n\t* when working with {@link enyo.List}. (Because {@link enyo.List} is\n\t* based on the Flyweight pattern, the event's target node is often not\n\t* the node currently associated with the Control at the time the event\n\t* occurs.)\n\t* @returns {Function} Keep a reference to this function and call it\n\t* to release the node when the gesture has ended.\n\t* @public\n\t*/\n\tretainNode: function(node) {\n\t\tvar control = this,\n\t\t\tretainedNode = this._retainedNode = (node || this.hasNode());\n\t\treturn function() {\n\t\t\tif (control && (control._retainedNode == retainedNode)) {\n\t\t\t\tcontrol._retainedNode = null;\n\t\t\t} else {\n\t\t\t\treleaseRetainedNode(retainedNode);\n\t\t\t}\n\t\t};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tteardownRender: function () {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tif (this._retainedNode) {\n\t\t\tstoreRetainedNode(this);\n\t\t}\n\n\t\tdelegate.teardownRender(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tteardownChildren: function () {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tdelegate.teardownChildren(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\taddNodeToParent: function () {\n\t\tvar pn;\n\n\t\tif (this.node) {\n\t\t\tpn = this.getParentNode();\n\t\t\tif (pn) {\n\t\t\t\tif (this.addBefore !== undefined) {\n\t\t\t\t\tthis.insertNodeInParent(pn, this.addBefore && this.addBefore.hasNode());\n\t\t\t\t} else this.appendNodeToParent(pn);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tappendNodeToParent: function(parentNode) {\n\t\tparentNode.appendChild(this.node);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinsertNodeInParent: function(parentNode, beforeNode) {\n\t\tparentNode.insertBefore(this.node, beforeNode || parentNode.firstChild);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveNodeFromDom: function() {\n\t\tif (this.hasNode() && this.node.parentNode) {\n\t\t\tthis.node.parentNode.removeChild(this.node);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetParentNode: function () {\n\t\treturn this.parentNode || (this.parent && (\n\t\t\tthis.parent.hasNode() || this.parent.getParentNode())\n\t\t);\n\t},\n\n\t// .................................\n\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tvar attrs = props && props.attributes;\n\n\t\t\t// ensure that we both keep an instance copy of defined attributes but also\n\t\t\t// update the hash with any additional instance definitions at runtime\n\t\t\tthis.attributes = this.attributes ? utils.clone(this.attributes) : {};\n\t\t\tif (attrs) {\n\t\t\t\tutils.mixin(this.attributes, attrs);\n\t\t\t\tdelete  props.attributes;\n\t\t\t}\n\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tvar classes;\n\n\t\t\t// initialize the styles for this instance\n\t\t\tthis.style = this.kindStyle + this.style;\n\n\t\t\t// ensure that the default value assigned to showing is actually a boolean\n\t\t\tthis.showing = !! this.showing;\n\n\t\t\t// super initialization\n\t\t\tsup.apply(this, arguments);\n\n\t\t\t// ensure that if we aren't showing -> true then the correct style\n\t\t\t// is applied - note that there might be issues with this because we are\n\t\t\t// trying not to have to parse out any other explicit display value during\n\t\t\t// initialization and we can't check because we haven't rendered yet\n\t\t\tif (!this.showing) this.style += ' display: none;';\n\n\t\t\t// try and make it so we only need to call the method once during\n\t\t\t// initialization and only then when we have something to add\n\t\t\tclasses = this.kindClasses;\n\t\t\tif (classes && this.classes) classes += (' ' + this.classes);\n\t\t\telse if (this.classes) classes = this.classes;\n\n\t\t\t// if there are known classes needed to be applied from the kind\n\t\t\t// definition and the instance definition (such as a component block)\n\t\t\tthis.classes = this.attributes['class'] = classes ? classes.trim() : classes;\n\n\t\t\t// setup the id for this control if we have one\n\t\t\tthis.idChanged();\n\t\t\tthis.contentChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* Destroys the control and removes it from the [DOM]{@glossary DOM}. Also\n\t* removes the control's ability to receive bubbled events.\n\t*\n\t* @public\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\t// if the control has been rendered we ensure it is removed from the DOM\n\t\t\tthis.removeNodeFromDom();\n\n\t\t\t// ensure no other bubbled events can be dispatched to this control\n\t\t\tdispatcher.$[this.id] = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tdispatchEvent: kind.inherit(function (sup) {\n\t\treturn function (name, event, sender) {\n\t\t\t// prevent dispatch and bubble of events that are strictly internal (e.g.\n\t\t\t// enter/leave)\n\t\t\tif (this.strictlyInternalEvents[name] && this.isInternalEvent(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\taddChild: kind.inherit(function (sup) {\n\t\treturn function (control) {\n\t\t\tcontrol.addClass(this.controlClasses);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tremoveChild: kind.inherit(function (sup) {\n\t\treturn function (control) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tcontrol.removeClass(this.controlClasses);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tset: kind.inherit(function (sup) {\n\t\treturn function (path, value, opts) {\n\t\t\t// this should be updated if a better api for hooking becomes available but for\n\t\t\t// now we just do this directly to ensure that the showing value is actually\n\t\t\t// a boolean\n\t\t\tif (path == 'showing') {\n\t\t\t\treturn sup.call(this, path, !! value, opts);\n\t\t\t} else return sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t// .................................\n\t// BACKWARDS COMPATIBLE API, LEGACY METHODS AND PUBLIC PROPERTY\n\t// METHODS OR PROPERTIES THAT PROBABLY SHOULD NOT BE HERE BUT ARE ANYWAY\n\n\t/**\n\t* Apparently used by Ares 2 still but we have the property embedded in the kind...\n\t*\n\t* @deprecated\n\t* @private\n\t*/\n\tisContainer: false,\n\n\t/**\n\t* @private\n\t*/\n\trtl: false,\n\n\t/**\n\t* @private\n\t*/\n\tsetupBodyFitting: function () {\n\t\tDom.applyBodyFit();\n\t\tthis.addClass('enyo-fit enyo-clip');\n\t},\n\n\t/*\n\t* If the platform is Android or Android-Chrome, don't include the css rule\n\t* `-webkit-overflow-scrolling: touch`, as it is not supported in Android and leads to\n\t* overflow issues (ENYO-900 and ENYO-901). Similarly, BB10 has issues repainting\n\t* out-of-viewport content when `-webkit-overflow-scrolling` is used (ENYO-1396).\n\t*\n\t* @private\n\t*/\n\tsetupOverflowScrolling: function () {\n\t\tif(platform.android || platform.androidChrome || platform.blackberry) {\n\t\t\treturn;\n\t\t}\n\t\tDom.addBodyClass('webkitOverflowScrolling');\n\t},\n\n\t/**\n\t* Sets the control's directionality based on its content, or an optional `stringInstead`.\n\t*\n\t* @param {String} [stringInstead] An alternate string for consideration may be sent instead,\n\t*\tin-case the string to test the directionality of the control is stored in `this.value`,\n\t*\tor some other property, for example.\n\t* @private\n\t*/\n\tdetectTextDirectionality: function (stringInstead) {\n\t\t// If an argument was supplied at all, use it, even if it's undefined.\n\t\t// Values that are null or undefined, or are numbers, arrays, and some objects are safe\n\t\t// to be tested.\n\t\tvar str = (arguments.length) ? stringInstead : this.content;\n\t\tif (str || str === 0) {\n\t\t\tthis.rtl = utils.isRtl(str);\n\t\t\tthis.applyStyle('direction', this.rtl ? 'rtl' : 'ltr');\n\t\t} else {\n\t\t\tthis.applyStyle('direction', null);\n\t\t}\n\n\t},\n\n\t// .................................\n\n\t// .................................\n\t// DEPRECATED\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetTag: function () {\n\t\treturn this.tag;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetTag: function (tag) {\n\t\tvar was = this.tag;\n\n\t\tif (tag && typeof tag == 'string') {\n\t\t\tthis.tag = tag;\n\t\t\tif (was !== tag) this.notify('tag', was, tag);\n\t\t}\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetAttributes: function () {\n\t\treturn this.attributes;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetAttributes: function (attrs) {\n\t\tvar was = this.attributes;\n\n\t\tif (typeof attrs == 'object') {\n\t\t\tthis.attributes = attrs;\n\t\t\tif (attrs !== was) this.notify('attributes', was, attrs);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetClasses: function () {\n\t\treturn this.classes;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetClasses: function (classes) {\n\t\tvar was = this.classes;\n\n\t\tthis.classes = classes;\n\t\tif (was != classes) this.notify('classes', was, classes);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetStyle: function () {\n\t\treturn this.style;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetStyle: function (style) {\n\t\tvar was = this.style;\n\n\t\tthis.style = style;\n\t\tif (was != style) this.notify('style', was, style);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetContent: function () {\n\t\treturn this.content;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetContent: function (content) {\n\t\tvar was = this.content;\n\t\tthis.content = content;\n\n\t\tif (was != content) this.notify('content', was, content);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetShowing: function () {\n\t\treturn this.showing;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetShowing: function (showing) {\n\t\tvar was = this.showing;\n\n\t\t// force the showing property to always be a boolean value\n\t\tthis.showing = !! showing;\n\n\t\tif (was != showing) this.notify('showing', was, showing);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetAllowHtml: function () {\n\t\treturn this.allowHtml;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetAllowHtml: function (allow) {\n\t\tvar was = this.allowHtml;\n\t\tthis.allowHtml = !! allow;\n\n\t\tif (was !== allow) this.notify('allowHtml', was, allow);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetCanGenerate: function () {\n\t\treturn this.canGenerate;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetCanGenerate: function (can) {\n\t\tvar was = this.canGenerate;\n\t\tthis.canGenerate = !! can;\n\n\t\tif (was !== can) this.notify('canGenerate', was, can);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetFit: function () {\n\t\treturn this.fit;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetFit: function (fit) {\n\t\tvar was = this.fit;\n\t\tthis.fit = !! fit;\n\n\t\tif (was !== fit) this.notify('fit', was, fit);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @ares\n\t* @deprecated\n\t* @public\n\t*/\n\tgetIsContainer: function () {\n\t\treturn this.isContainer;\n\t},\n\n\t/**\n\t* @ares\n\t* @deprecated\n\t* @public\n\t*/\n\tsetIsContainer: function (isContainer) {\n\t\tvar was = this.isContainer;\n\t\tthis.isContainer = !! isContainer;\n\n\t\tif (was !== isContainer) this.notify('isContainer', was, isContainer);\n\n\t\treturn this;\n\t}\n\n\t// .................................\n\n});\n\n/**\n* @static\n* @public\n*/\nkind.setDefaultCtor(Control);\n\n/**\n* @static\n* @public\n*/\nControl.renderDelegate = HTMLStringDelegate;\n\n/**\n* @private\n*/\nControl.registerDomEvents = function (id, control) {\n\tdispatcher.$[id] = control;\n};\n\n/**\n* @private\n*/\nControl.unregisterDomEvents = function (id) {\n\tdispatcher.$[id] = null;\n};\n\n/**\n* @private\n*/\nControl.normalizeCssStyleString = function (style) {\n\treturn style ? (\n\t\t(\";\" + style)\n\t\t// add a semi-colon if it's not the last character (also trim possible unnecessary whitespace)\n\t\t.replace(/([^;])\\s*$/, \"$1;\")\n\t\t// ensure we have one space after each colon or semi-colon\n\t\t.replace(/\\s*;\\s*([\\w-]+)\\s*:\\s*/g, \"; $1: \")\n\t\t// remove first semi-colon and space\n\t\t.substr(2).trim()\n\t) : \"\";\n};\n\n/**\n* @private\n*/\nControl.concat = function (ctor, props, instance) {\n\tvar proto = ctor.prototype || ctor,\n\t\tattrs,\n\t\tstr;\n\n\tif (props.classes) {\n\t\tif (instance) {\n\t\t\tstr = (proto.classes ? (proto.classes + ' ') : '') + props.classes;\n\t\t\tproto.classes = str;\n\t\t} else {\n\t\t\tstr = (proto.kindClasses || '') + (proto.classes ? (' ' + proto.classes) : '');\n\t\t\tproto.kindClasses = str;\n\t\t\tproto.classes = props.classes;\n\t\t}\n\t\tdelete props.classes;\n\t}\n\n\tif (props.style) {\n\t\tif (instance) {\n\t\t\tstr = (proto.style ? (proto.style + ';') : '') + (props.style + ';');\n\t\t\tproto.style = Control.normalizeCssStyleString(str);\n\t\t} else {\n\t\t\tstr = proto.kindStyle ? proto.kindStyle : '';\n\t\t\tstr += proto.style ? (';' + proto.style) : '';\n\t\t\tstr += props.style;\n\n\t\t\t// moved it all to kindStyle so that it will be available whenever instanced\n\t\t\tproto.kindStyle = Control.normalizeCssStyleString(str);\n\t\t}\n\t\tdelete props.style;\n\t}\n\n\tif (props.attributes) {\n\t\tattrs = proto.attributes;\n\t\tproto.attributes = attrs ? utils.mixin({}, [attrs, props.attributes]) : props.attributes;\n\t\tdelete props.attributes;\n\t}\n};\n\nControl.prototype.defaultKind = Control;\n\n// Control has to be *completely* set up before creating the floating layer otherwise things will\n// error out during construction.\n\n/**\n* @static\n* @public\n*/\nControl.FloatingLayer = FloatingLayer(Control);\n\n/**\n* @static\n* @public\n*/\nControl.floatingLayer = new Control.FloatingLayer({id: 'floatingLayer'});","require('../../enyo');\n\nvar\n\tdispatcher = require('./dispatcher'),\n\tgesture = require('./gesture'),\n\tplatform = require('./platform'),\n\tutils = require('./utils');\n\n/**\n* @private\n*/\ndispatcher.features.push(\n\tfunction(e) {\n\t\t// NOTE: beware of properties in gesture inadvertently mapped to event types\n\t\tif (gesture.drag[e.type]) {\n\t\t\treturn gesture.drag[e.type](e);\n\t\t}\n\t}\n);\n\n/**\n* Enyo supports a cross-platform set of drag [events]{@glossary event}. These\n* events allow users to write a single set of event handlers for applications\n* that run on both mobile and desktop platforms.\n*\n* The following events are provided:\n*\n* * 'dragstart'\n* * 'dragfinish'\n* * 'drag'\n* * 'drop'\n* * 'dragover'\n* * 'dragout'\n* * 'hold'\n* * 'release'\n* * 'holdpulse'\n* * 'flick'\n*\n* For more information on these events, see the documentation on\n* [Event Handling]{@linkplain $dev-guide/key-concepts/event-handling.html} in\n* the Enyo Developer Guide.\n*\n* @namespace gesture.drag\n* @public\n*/\nmodule.exports = gesture.drag =\n\t/** @lends gesture.drag */ {\n\n\t/**\n\t* @private\n\t*/\n\tholdPulseDefaultConfig: {\n\t\tfrequency: 200,\n\t\tevents: [{name: 'hold', time: 200}],\n\t\tresume: false,\n\t\tmoveTolerance: 16,\n\t\tendHold: 'onMove'\n\t},\n\n\t/**\n\t* Call this method to specify the framework's 'holdPulse' behavior, which\n\t* determines the nature of the events generated when a user presses and holds\n\t* on a user interface element.\n\t*\n\t* By default, an `onhold` event fires after 200 ms. After that, an `onholdpulse`\n\t* event fires every 200 ms until the user stops holding, at which point a\n\t* `onrelease` event fires.\n\t*\n\t* To change the default behavior, call this method and pass it a holdPulse\n\t* configuration object. The holdPulse configuration object has a number of\n\t* properties.\n\t*\n\t* You can specify a set of custom hold events by setting the `events` property\n\t* to an array containing one or more objects. Each object specifies a custom\n\t* hold event, in the form of a `name` / `time` pair. Notes:\n\t*\n\t*  * Your custom event names should not include the 'on' prefix; that will be\n\t*    added automatically by the framework.\n\t*\n\t*  * Times should be specified in milliseconds.\n\t*\n\t*  * Your `events` array overrides the framework defaults entirely, so if you\n\t*    want the standard `hold` event to fire at 200 ms (in addition to whatever\n\t*    custom events you define), you'll need to redefine it yourself as part of\n\t*    your `events` array.\n\t*\n\t* Regardless of how many custom hold events you define, `onholdpulse` events\n\t* will start firing after the first custom hold event fires, and continue until\n\t* the user stops holding. Likewise, only one `onrelease` event will fire,\n\t* regardless of how many custom hold events you define.\n\t*\n\t* The`frequency` parameter determines not only how often `holdpulse` events are\n\t* sent, but the frequency with which the hold duration is measured. This means\n\t* that the value you set for `frequency` should always be a common factor of the\n\t* times you set for your custom hold events, to ensure accurate event timing.\n\t*\n\t* You can use the `endHold` property to specify the circumstances under which a\n\t* hold is considered to end. Set `endHold` to `onMove` (the default) if you want\n\t* the hold to end as soon as the user's finger or pointer moves. Set `endHold`\n\t* to `onLeave` if you want the hold to end only when the finger or pointer\n\t* leaves the element altogether. When specifying `onMove`, you can also provide\n\t* a `moveTolerance` value (default: `16`) that determines how tolerant you want\n\t* to be of small movements when deciding whether a hold has ended. The higher\n\t* the value, the further a user's finger or pointer may move without causing\n\t* the hold to end.\n\t*\n\t* Finally, the `resume` parameter (default: `false`) specifies whether a hold\n\t* that has ended due to finger / pointer movement should be resumed if the\n\t* user's finger or pointer moves back inside the tolerance threshold (in the\n\t* case of `endHold: onMove`) or back over the element (in the case of\n\t* `endHold: onLeave`).\n\t*\n\t* Here is an example:\n\t*\n\t* ```\n\t* gesture.drag.configureHoldPulse({\n\t*     frequency: 100,\n\t*     events: [\n\t*         {name: 'hold', time: 200},\n\t*         {name: 'longpress', time: 500}\n\t*     ],\n\t*     endHold: 'onLeave',\n\t*     resume: true\n\t* });\n\t* ```\n\t* For comparison, here are the out-of-the-box defaults:\n\t*\n\t* ```\n\t* gesture.drag.configureHoldPulse({\n\t*     frequency: 200,\n\t*     events: [\n\t*         {name: 'hold', time: 200}\n\t*     ],\n\t*     endHold: 'onMove',\n\t*     moveTolerance: 16,\n\t*     resume: false\n\t* });\n\t* ```\n\t*\n\t* The settings you provide via this method will be applied globally, affecting\n\t* every Control. Note that you can also override the defaults on a case-by-case\n\t* basis by handling the `down` event for any Control and calling the\n\t* `configureHoldPulse` method exposed by the event itself. That method works\n\t* exactly like this one, except that the settings you provide will apply only to\n\t* holds on that particular Control.\n\t*\n\t* @public\n\t*/\n\tconfigureHoldPulse: function(config) {\n\t\t// TODO: Might be nice to do some validation, error handling\n\t\tthis.holdPulseDefaultConfig = config;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tholdPulseConfig: {},\n\n\t/**\n\t* @private\n\t*/\n\ttrackCount: 5,\n\n\t/**\n\t* @private\n\t*/\n\tminFlick: 0.1,\n\n\t/**\n\t* @private\n\t*/\n\tminTrack: 8,\n\n\t/**\n\t* @private\n\t*/\n\tdown: function(e) {\n\t\t// tracking if the mouse is down\n\t\t//enyo.log('tracking ON');\n\t\t// Note: 'tracking' flag indicates interest in mousemove, it's turned off\n\t\t// on mouseup\n\t\t// make sure to stop dragging in case the up event was not received.\n\t\tthis.stopDragging(e);\n\t\tthis.target = e.target;\n\t\tthis.startTracking(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmove: function(e) {\n\t\tif (this.tracking) {\n\t\t\tthis.track(e);\n\t\t\t// If the mouse is not down and we're tracking a drag, abort.\n\t\t\t// this error condition can occur on IE/Webkit after interaction with a scrollbar.\n\t\t\tif (!e.which) {\n\t\t\t\tthis.stopDragging(e);\n\t\t\t\tthis.endHold();\n\t\t\t\tthis.tracking = false;\n\t\t\t\t//enyo.log('gesture.drag: mouse must be down to drag.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.dragEvent) {\n\t\t\t\tthis.sendDrag(e);\n\t\t\t} else if (this.holdPulseConfig.endHold === 'onMove') {\n\t\t\t\tif (this.dy*this.dy + this.dx*this.dx >= this.holdPulseConfig.moveTolerance) { // outside of target\n\t\t\t\t\tif (this.holdJob) { // only stop/cancel hold job if it currently exists\n\t\t\t\t\t\tif (this.holdPulseConfig.resume) { // pause hold to potentially resume later\n\t\t\t\t\t\t\tthis.suspendHold();\n\t\t\t\t\t\t} else { // completely cancel hold\n\t\t\t\t\t\t\tthis.endHold();\n\t\t\t\t\t\t\tthis.sendDragStart(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (this.holdPulseConfig.resume && !this.holdJob) { // when moving inside target, only resume hold job if it was previously paused\n\t\t\t\t\tthis.resumeHold();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tup: function(e) {\n\t\tthis.endTracking(e);\n\t\tthis.stopDragging(e);\n\t\tthis.endHold();\n\t\tthis.target = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tenter: function(e) {\n\t\t// resume hold when re-entering original target when using 'onLeave' endHold value\n\t\tif (this.holdPulseConfig.resume && this.holdPulseConfig.endHold === 'onLeave' && this.target && e.target === this.target) {\n\t\t\tthis.resumeHold();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tleave: function(e) {\n\t\tif (this.dragEvent) {\n\t\t\tthis.sendDragOut(e);\n\t\t} else if (this.holdPulseConfig.endHold === 'onLeave') {\n\t\t\tif (this.holdPulseConfig.resume) { // pause hold to potentially resume later\n\t\t\t\tthis.suspendHold();\n\t\t\t} else { // completely cancel hold\n\t\t\t\tthis.endHold();\n\t\t\t\tthis.sendDragStart(e);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopDragging: function(e) {\n\t\tif (this.dragEvent) {\n\t\t\tthis.sendDrop(e);\n\t\t\tvar handled = this.sendDragFinish(e);\n\t\t\tthis.dragEvent = null;\n\t\t\treturn handled;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeDragEvent: function(inType, inTarget, inEvent, inInfo) {\n\t\tvar adx = Math.abs(this.dx), ady = Math.abs(this.dy);\n\t\tvar h = adx > ady;\n\t\t// suggest locking if off-axis < 22.5 degrees\n\t\tvar l = (h ? ady/adx : adx/ady) < 0.414;\n\t\tvar e = {};\n\t\t// var e = {\n\t\te.type = inType;\n\t\te.dx = this.dx;\n\t\te.dy = this.dy;\n\t\te.ddx = this.dx - this.lastDx;\n\t\te.ddy = this.dy - this.lastDy;\n\t\te.xDirection = this.xDirection;\n\t\te.yDirection = this.yDirection;\n\t\te.pageX = inEvent.pageX;\n\t\te.pageY = inEvent.pageY;\n\t\te.clientX = inEvent.clientX;\n\t\te.clientY = inEvent.clientY;\n\t\te.horizontal = h;\n\t\te.vertical = !h;\n\t\te.lockable = l;\n\t\te.target = inTarget;\n\t\te.dragInfo = inInfo;\n\t\te.ctrlKey = inEvent.ctrlKey;\n\t\te.altKey = inEvent.altKey;\n\t\te.metaKey = inEvent.metaKey;\n\t\te.shiftKey = inEvent.shiftKey;\n\t\te.srcEvent = inEvent.srcEvent;\n\t\t// };\n\t\t//Fix for IE8, which doesn't include pageX and pageY properties\n\t\tif(platform.ie==8 && e.target) {\n\t\t\te.pageX = e.clientX + e.target.scrollLeft;\n\t\t\te.pageY = e.clientY + e.target.scrollTop;\n\t\t}\n\t\te.preventDefault = gesture.preventDefault;\n\t\te.disablePrevention = gesture.disablePrevention;\n\t\treturn e;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDragStart: function(e) {\n\t\t//enyo.log('dragstart');\n\t\tthis.dragEvent = this.makeDragEvent('dragstart', this.target, e);\n\t\tdispatcher.dispatch(this.dragEvent);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDrag: function(e) {\n\t\t//enyo.log('sendDrag to ' + this.dragEvent.target.id + ', over to ' + e.target.id);\n\t\t// send dragOver event to the standard event target\n\t\tvar synth = this.makeDragEvent('dragover', e.target, e, this.dragEvent.dragInfo);\n\t\tdispatcher.dispatch(synth);\n\t\t// send drag event to the drag source\n\t\tsynth.type = 'drag';\n\t\tsynth.target = this.dragEvent.target;\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDragFinish: function(e) {\n\t\t//enyo.log('dragfinish');\n\t\tvar synth = this.makeDragEvent('dragfinish', this.dragEvent.target, e, this.dragEvent.dragInfo);\n\t\tsynth.preventTap = function() {\n\t\t\tif (e.preventTap) {\n\t\t\t\te.preventTap();\n\t\t\t}\n\t\t};\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDragOut: function(e) {\n\t\tvar synth = this.makeDragEvent('dragout', e.target, e, this.dragEvent.dragInfo);\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDrop: function(e) {\n\t\tvar synth = this.makeDragEvent('drop', e.target, e, this.dragEvent.dragInfo);\n\t\tsynth.preventTap = function() {\n\t\t\tif (e.preventTap) {\n\t\t\t\te.preventTap();\n\t\t\t}\n\t\t};\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstartTracking: function(e) {\n\t\tthis.tracking = true;\n\t\t// note: use clientX/Y to be compatible with ie8\n\t\tthis.px0 = e.clientX;\n\t\tthis.py0 = e.clientY;\n\t\t// this.flickInfo = {startEvent: e, moves: []};\n\t\tthis.flickInfo = {};\n\t\tthis.flickInfo.startEvent = e;\n\t\t// FIXME: so we're trying to reuse objects where possible, should\n\t\t// do the same in scenarios like this for arrays\n\t\tthis.flickInfo.moves = [];\n\t\tthis.track(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttrack: function(e) {\n\t\tthis.lastDx = this.dx;\n\t\tthis.lastDy = this.dy;\n\t\tthis.dx = e.clientX - this.px0;\n\t\tthis.dy = e.clientY - this.py0;\n\t\tthis.xDirection = this.calcDirection(this.dx - this.lastDx, 0);\n\t\tthis.yDirection = this.calcDirection(this.dy - this.lastDy, 0);\n\t\t//\n\t\tvar ti = this.flickInfo;\n\t\tti.moves.push({\n\t\t\tx: e.clientX,\n\t\t\ty: e.clientY,\n\t\t\tt: utils.perfNow()\n\t\t});\n\t\t// track specified # of points\n\t\tif (ti.moves.length > this.trackCount) {\n\t\t\tti.moves.shift();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tendTracking: function() {\n\t\tthis.tracking = false;\n\t\tvar ti = this.flickInfo;\n\t\tvar moves = ti && ti.moves;\n\t\tif (moves && moves.length > 1) {\n\t\t\t// note: important to use up time to reduce flick\n\t\t\t// velocity based on time between move and up.\n\t\t\tvar l = moves[moves.length-1];\n\t\t\tvar n = utils.perfNow();\n\t\t\t// take the greatest of flick between each tracked move and last move\n\t\t\tfor (var i=moves.length-2, dt=0, x1=0, y1=0, x=0, y=0, sx=0, sy=0, m; (m=moves[i]); i--) {\n\t\t\t\t// this flick (this move - last move) / (this time - last time)\n\t\t\t\tdt = n - m.t;\n\t\t\t\tx1 = (l.x - m.x) / dt;\n\t\t\t\ty1 = (l.y - m.y) / dt;\n\t\t\t\t// establish flick direction\n\t\t\t\tsx = sx || (x1 < 0 ? -1 : (x1 > 0 ? 1 : 0));\n\t\t\t\tsy = sy || (y1 < 0 ? -1 : (y1 > 0 ? 1 : 0));\n\t\t\t\t// if either axis is a greater flick than previously recorded use this one\n\t\t\t\tif ((x1 * sx > x * sx) || (y1 * sy > y * sy)) {\n\t\t\t\t\tx = x1;\n\t\t\t\t\ty = y1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar v = Math.sqrt(x*x + y*y);\n\t\t\tif (v > this.minFlick) {\n\t\t\t\t// generate the flick using the start event so it has those coordinates\n\t\t\t\tthis.sendFlick(ti.startEvent, x, y, v);\n\t\t\t}\n\t\t}\n\t\tthis.flickInfo = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcDirection: function(inNum, inDefault) {\n\t\treturn inNum > 0 ? 1 : (inNum < 0 ? -1 : inDefault);\n\t},\n\n\t/**\n\t* Translate the old format for holdPulseConfig to the new one, to\n\t* preserve backward compatibility.\n\t*\n\t* @private\n\t*/\n\tnormalizeHoldPulseConfig: function (oldOpts) {\n\t\tvar nOpts = utils.clone(oldOpts);\n\t\tnOpts.frequency = nOpts.delay;\n\t\tnOpts.events = [{name: 'hold', time: nOpts.delay}];\n\t\treturn nOpts;\n\t},\n\n\t/**\n\t* Method to override holdPulseConfig for a given gesture. This method isn't\n\t* accessed directly from gesture.drag, but exposed by the `down` event.\n\t* See `prepareHold()`.\n\t*\n\t* @private\n\t*/\n\t_configureHoldPulse: function(opts) {\n\t\tvar nOpts = (opts.delay === undefined) ?\n\t\t\topts :\n\t\t\tthis.normalizeHoldPulseConfig(opts);\n\t\tutils.mixin(this.holdPulseConfig, nOpts);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprepareHold: function(e) {\n\t\t// quick copy as the prototype of the new overridable config\n\t\tthis.holdPulseConfig = utils.clone(this.holdPulseDefaultConfig, true);\n\n\t\t// expose method for configuring holdpulse options\n\t\te.configureHoldPulse = this._configureHoldPulse.bind(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbeginHold: function(e) {\n\t\tvar ce;\n\t\t// cancel any existing hold since it's possible in corner cases to get a down without an up\n\t\tthis.endHold();\n\t\tthis.holdStart = utils.perfNow();\n\t\tthis._holdJobFunction = utils.bind(this, 'handleHoldPulse');\n\t\t// clone the event to ensure it stays alive on IE upon returning to event loop\n\t\tce = this._holdJobEvent = utils.clone(e);\n\t\tce.srcEvent = utils.clone(e.srcEvent);\n\t\tthis._pulsing = false;\n\t\tthis._unsent = utils.clone(this.holdPulseConfig.events);\n\t\tthis._unsent.sort(this.sortEvents);\n\t\tthis._next = this._unsent.shift();\n\t\tif (this._next) {\n\t\t\tthis.holdJob = setInterval(this._holdJobFunction, this.holdPulseConfig.frequency);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresumeHold: function() {\n\t\tthis.handleHoldPulse();\n\t\tthis.holdJob = setInterval(this._holdJobFunction, this.holdPulseConfig.frequency);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsortEvents: function(a, b) {\n\t\t\tif (a.time < b.time) return -1;\n\t\t\tif (a.time > b.time) return 1;\n\t\t\treturn 0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tendHold: function() {\n\t\tvar e = this._holdJobEvent;\n\t\tthis.suspendHold();\n\t\tif (e && this._pulsing) {\n\t\t\tthis.sendRelease(e);\n\t\t}\n\t\tthis._pulsing = false;\n\t\tthis._unsent = null;\n\t\tthis._holdJobFunction = null;\n\t\tthis._holdJobEvent = null;\n\t\tthis._next = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsuspendHold: function() {\n\t\tclearInterval(this.holdJob);\n\t\tthis.holdJob = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleHoldPulse: function() {\n\t\tvar holdTime = utils.perfNow() - this.holdStart,\n\t\t\thje = this._holdJobEvent,\n\t\t\te;\n\t\tthis.maybeSendHold(hje, holdTime);\n\t\tif (this._pulsing) {\n\t\t\te = gesture.makeEvent('holdpulse', hje);\n\t\t\te.holdTime = holdTime;\n\t\t\tdispatcher.dispatch(e);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaybeSendHold: function(inEvent, inHoldTime) {\n\t\tvar n = this._next;\n\t\twhile (n && n.time <= inHoldTime) {\n\t\t\tvar e = gesture.makeEvent(n.name, inEvent);\n\t\t\tthis._pulsing = true;\n\t\t\tdispatcher.dispatch(e);\n\t\t\tn = this._next = this._unsent.shift();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendRelease: function(inEvent) {\n\t\tvar e = gesture.makeEvent('release', inEvent);\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendFlick: function(inEvent, inX, inY, inV) {\n\t\tvar e = gesture.makeEvent('flick', inEvent);\n\t\te.xVelocity = inX;\n\t\te.yVelocity = inY;\n\t\te.velocity = inV;\n\t\tdispatcher.dispatch(e);\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\nvar\n\tControl = require('./Control'),\n\tRepeaterChildSupport = require('./RepeaterChildSupport');\n\n/**\n* {@link enyo.DataRepeater} iterates over the items in an {@link enyo.Collection} to\n* repeatedly render and synchronize records (instances of {@link enyo.Model}) to its\n* own children. For any record in the collection, a new child will be rendered in\n* the repeater. If the record is destroyed, the child will be destroyed. These\n* [controls]{@link enyo.Control} will automatically update when properties on the\n* underlying records are modified if they have been bound using\n* [bindings]{@link enyo.Binding}.\n*\n* @class enyo.DataRepeater\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar DataRepeater = module.exports = kind(\n\t/** @lends enyo.DataRepeater.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.DataRepeater',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* Set this to `true` to enable selection support. Note that selection stores a\n\t* reference to the [model]{@link enyo.Model} that is selected, via the\n\t* [selected]{@link enyo.DataRepeater#selected} method.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tselection: true,\n\n\t/**\n\t* Specifies the type of selection (if enabled), that we want to enable. The possible values\n\t* are 'single', 'multi', and 'group'. The default is 'single' selection mode, which enables\n\t* selection and deselection of a single item at a time. The 'multi' selection mode allows\n\t* multiple children to be selected simultaneously, while the 'group' selection mode allows\n\t* group-selection behavior such that only one child may be selected at a time and, once a\n\t* child is selected, it cannot be deselected via user input. The child may still be \n\t* deselected via the selection API methods.\n\t* \n\t* @type {String}\n\t* @default 'single'\n\t* @public\n\t*/\n\tselectionType: 'single',\n\n\t/**\n\t* Set this to `true` to allow multiple children to be selected simultaneously.\n\t*\n\t* @deprecated since version 2.6\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tmultipleSelection: false,\n\n\t/**\n\t* Set this to `true` to allow group-selection behavior such that only one child\n\t* may be selected at a time and, once a child is selected, it cannot be\n\t* deselected via user input. The child may still be deselected via the selection\n\t* API methods. Note that setting this property to `true` will set the\n\t* [multipleSelection]{@link enyo.DataRepeater#multipleSelection} property to\n\t* `false`.\n\t*\n\t* @deprecated since version 2.6\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tgroupSelection: false,\n\n\t/**\n\t* This class will be applied to the [repeater]{@link enyo.DataRepeater} when\n\t* [selection]{@link enyo.DataRepeater#selection} is enabled. It will also be\n\t* applied if [multipleSelection]{@link enyo.DataRepeater#multipleSelection}\n\t* is `true`.\n\t*\n\t* @type {String}\n\t* @default 'selection-enabled'\n\t* @public\n\t*/\n\tselectionClass: 'selection-enabled',\n\n\t/**\n\t* This class will be applied to the [repeater]{@link enyo.DataRepeater} when\n\t* [selectionType]{@link enyo.DataRepeater#selectionType} is `multi`.\n\t* When that is the case, the [selectionClass]{@link enyo.DataRepeater#selectionClass}\n\t* will also be applied.\n\t*\n\t* @type {String}\n\t* @default 'multiple-selection-enabled'\n\t* @public\n\t*/\n\tmultipleSelectionClass: 'multiple-selection-enabled',\n\n\t/**\n\t* In cases where selection should be detected from the state of the\n\t* [model]{@link enyo.Model}, this property should be set to the property on\n\t* the model that the [repeater]{@link enyo.DataRepeater} should observe for\n\t* changes. If the model changes, the repeater will reflect the change without\n\t* having to interact directly with the model. Note that this property must be\n\t* part of the model's schema, or else its changes will not be detected\n\t* properly.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tselectionProperty: '',\n\n\t/**\n\t* Set this to a space-delimited string of [events]{@glossary event} or an\n\t* [array]{@glossary Array} that can trigger the selection of a particular\n\t* child. To prevent selection entirely, set\n\t* [selection]{@link enyo.DataRepeater#selection} to `false`.\n\t*\n\t* @type {String}\n\t* @default 'ontap'\n\t* @public\n\t*/\n\tselectionEvents: 'ontap',\n\n\t/**\n\t* Use this [hash]{@glossary Object} to define default [binding]{@link enyo.Binding}\n\t* properties for **all** children (even children of children) of this\n\t* [repeater]{@link enyo.DataRepeater}. This can eliminate the need to write the\n\t* same paths over and over. You may also use any binding macros. Any property\n\t* defined here will be superseded by the same property if defined for an individual\n\t* binding.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tchildBindingDefaults: null,\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tthis.initContainer();\n\t\tvar components = this.kindComponents || this.components || [],\n\t\t\towner = this.getInstanceOwner(),\n\t\t\tprops = this.defaultProps? utils.clone(this.defaultProps, true): (this.defaultProps = {});\n\t\t// ensure that children know who their binding owner is\n\t\tprops.bindingTransformOwner = this;\n\t\tprops.bindingDefaults = this.childBindingDefaults;\n\t\tif (components) {\n\t\t\t// if there are multiple components in the components block they will become nested\n\t\t\t// children of the default kind set for the repeater\n\t\t\tif (components.length > 1) {\n\t\t\t\tprops.components = components;\n\t\t\t}\n\t\t\t// if there is only one child, the properties will be the default kind of the repeater\n\t\t\telse {\n\t\t\t\tutils.mixin(props, components[0]);\n\t\t\t}\n\t\t\tprops.repeater = this;\n\t\t\tprops.owner = owner;\n\t\t\tprops.mixins = props.mixins? props.mixins.concat(this.childMixins): this.childMixins;\n\t\t}\n\n\t\tthis.defaultProps = props;\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis._selection = [];\n\t\t\t// we need to initialize our selectionEvents array\n\t\t\tvar se = this.selectionEvents;\n\t\t\tthis.selectionEvents = (typeof se == 'string'? se.split(' '): se);\n\t\t\t// we need to pre-bind these methods so they can easily be added\n\t\t\t// and removed as listeners later\n\t\t\tvar h = this._handlers = utils.clone(this._handlers);\n\t\t\tfor (var e in h) {\n\t\t\t\th[e] = this.bindSafely(h[e]);\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.collectionChanged();\n\t\t\t// Converting deprecated selection properties to our current selection API\n\t\t\tthis.selectionType = this.multipleSelection ? (this.groupSelection ? 'group' : 'multi') : this.selectionType;\n\t\t\tthis.selectionTypeChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tgroupSelectionChanged: function () {\n\t\tthis.set('selectionType', this.groupSelection ? 'group' : 'single');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmultipleSelectionChanged: function () {\n\t\tthis.set('selectionType', this.multipleSelection ? 'multi' : 'single');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectionTypeChanged: function (was) {\n\t\t// Synchronizing our deprecated properties\n\t\tthis.groupSelection = this.selectionType == 'group';\n\t\tthis.multipleSelection = this.selectionType == 'multi';\n\n\t\tif (was == 'multi') {\n\t\t\tif (this._selection.length > 1) {\n\t\t\t\tthis.deselectAll();\n\t\t\t}\n\t\t}\n\t\tthis.selectionChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectionChanged: function () {\n\t\tthis.addRemoveClass(this.selectionClass, this.selection);\n\t\tthis.addRemoveClass(this.multipleSelectionClass, this.selectionType == 'multi' && this.selection);\n\t},\n\n\t/**\n\t* Destroys any existing children in the [repeater]{@link enyo.DataRepeater} and creates all\n\t* new children based on the current [data]{@link enyo.Repeater#data}.\n\t*\n\t* @public\n\t*/\n\treset: function () {\n\t\t// use the facaded dataset because this could be any\n\t\t// collection of records\n\t\tvar dd = this.get('data');\n\t\t// destroy the client controls we might already have\n\t\tthis.destroyClientControls();\n\t\t// and now we create new ones for each new record we have\n\t\tfor (var i=0, r; (r=dd.at(i)); ++i) {\n\t\t\tthis.add(r, i);\n\t\t}\n\t\tthis.hasReset = true;\n\t},\n\t/**\n\t* Refreshes each [control]{@link enyo.Control} in the dataset.\n\t*\n\t* @param {Boolean} immediate - If `true`, refresh will occur immediately; otherwise,\n\t* it will be queued up as a job.\n\t* @public\n\t*/\n\trefresh: function (immediate) {\n\t\tif (!this.hasReset) { return this.reset(); }\n\t\tvar refresh = this.bindSafely(function () {\n\t\t\tvar dd = this.get('data'),\n\t\t\t\tcc = this.getClientControls();\n\t\t\tfor (var i=0, c, d; (d=dd.at(i)); ++i) {\n\t\t\t\tc = cc[i];\n\t\t\t\tif (c) {\n\t\t\t\t\tc.set('model', d);\n\t\t\t\t} else {\n\t\t\t\t\tthis.add(d, i);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.prune();\n\t\t});\n\n\t\t// refresh is used as the event handler for\n\t\t// collection resets so checking for truthy isn't\n\t\t// enough. it must be true.\n\t\tif(immediate === true) {\n\t\t\trefresh();\n\t\t} else {\n\t\t\tthis.startJob('refreshing', refresh, 16);\n\t\t}\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.collection && this.collection.length) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t\tthis.hasRendered = true;\n\t\t};\n\t}),\n\n\t/**\n\t* Adds a [record]{@link enyo.Model} at a particular index.\n\t*\n\t* @param {enyo.Model} rec - The [record]{@link enyo.Model} to add.\n\t* @param {Number} idx - The index at which the record should be added.\n\t* @public\n\t*/\n\tadd: function (rec, idx) {\n\t\tvar c = this.createComponent({model: rec, index: idx});\n\t\tif (this.generated && !this.batching) {\n\t\t\tc.render();\n\t\t}\n\t},\n\n\t/**\n\t* Removes the [record]{@link enyo.Model} at a particular index.\n\t*\n\t* @param {Number} idx - The index of the [record]{@link enyo.Model} to be removed.\n\t* @public\n\t*/\n\tremove: function (idx) {\n\t\tvar controls = this.getClientControls()\n\t\t\t, control;\n\n\t\tcontrol = controls[idx];\n\n\t\tif (control) control.destroy();\n\t},\n\n\t/**\n\t* Removes any [controls]{@link enyo.Control} that are outside the boundaries of the\n\t* [data]{@link enyo.DataRepeater#data} [collection]{@link enyo.Collection} for the\n\t* [repeater]{@link enyo.DataRepeater}.\n\t*\n\t* @public\n\t*/\n\tprune: function () {\n\t\tvar g = this.getClientControls()\n\t\t\t, len = (this.collection? this.collection.length: 0)\n\t\t\t, x;\n\t\tif (g.length > len) {\n\t\t\tx = g.slice(len);\n\t\t\tfor (var i=0, c; (c=x[i]); ++i) {\n\t\t\t\tc.destroy();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitContainer: function () {\n\t\tvar ops = this.get('containerOptions'),\n\t\t\tnom = ops.name || (ops.name = this.containerName);\n\t\tthis.createChrome([ops]);\n\t\tthis.discoverControlParent();\n\t\tif (nom != this.containerName) {\n\t\t\tthis.$[this.containerName] = this.$[nom];\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSelected: 'childSelected',\n\t\tonDeselected: 'childDeselected'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_handlers: {\n\t\tadd: 'modelsAdded',\n\t\tremove: 'modelsRemoved',\n\t\treset: 'refresh',\n\t\tsort: 'refresh',\n\t\tfilter: 'refresh'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcollectionChanged: function (p) {\n\t\tvar c = this.collection;\n\t\tif (typeof c == 'string') {\n\t\t\tc = this.collection = enyo.getPath(c);\n\t\t}\n\t\tif (c) {\n\t\t\tthis.initCollection(c, p);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitCollection: function (c, p) {\n\t\tvar e;\n\t\tif (c && c.addListener) {\n\t\t\tfor (e in this._handlers) {\n\t\t\t\tc.addListener(e, this._handlers[e]);\n\t\t\t}\n\t\t}\n\t\tif (p && p.removeListener) {\n\t\t\tfor (e in this._handlers) {\n\t\t\t\tp.removeListener(e, this._handlers[e]);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmodelsAdded: function (sender, e, props) {\n\t\tif (sender === this.collection) this.refresh();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmodelsRemoved: function (sender, e, props) {\n\t\tif (sender === this.collection) {\n\t\t\tthis.deselectRemovedModels(props.models);\n\t\t\tthis.refresh();\n\t\t}\n\t},\n\n\t/**\n\t* Deselect removed models from _selected array.\n\t* After calling it, we can ensure that the removed models aren't currently selected.\n\t* @param {array} models - The array of models that are removed from collection.\n\t* @private\n\t*/\n\tdeselectRemovedModels: function(models) {\n\t\tvar selected = this._selection,\n\t\t\torig,\n\t\t\tmodel,\n\t\t\tidx,\n\t\t\tlen = selected && selected.length,\n\t\t\ti = models.length - 1;\n\n\t\t// We have selected models\n\t\tif (len) {\n\t\t\t// unfortunately we need to make a copy to preserve what the original was\n\t\t\t// so we can pass it with the notification if any of these are deselected\n\t\t\torig = selected.slice();\n\n\t\t\t// we have _selected array to track currently selected models\n\t\t\t// if some removed models are in _selected, we should remove them from _selected\n\t\t\t// clearly we won't need to continue checking if selected does not have any models\n\t\t\tfor (; (model = models[i]) && selected.length; --i) {\n\t\t\t\tidx = selected.indexOf(model);\n\t\t\t\tif (idx > -1) selected.splice(idx, 1);\n\t\t\t}\n\n\t\t\t// Some selected models are discovered, so we need to notify\n\t\t\tif (len != selected.length) {\n\t\t\t\tif (this.selection) {\n\t\t\t\t\tif (this.selectionType == 'multi') this.notify('selected', orig, selected);\n\t\t\t\t\telse this.notify('selected', orig[0], selected[0] || null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbatchingChanged: function (prev, val) {\n\t\tif (this.generated && false === val) {\n\t\t\tthis.$[this.containerName].render();\n\t\t\tthis.refresh(true);\n\t\t}\n\t},\n\n\t/**\n\t* Calls [childForIndex()]{@link enyo.DataRepeater#getChildForIndex}. Leaving for posterity.\n\t*\n\t* @param {Number} idx - The index of the child to retrieve.\n\t* @returns {enyo.Control|undefined} The [control]{@link enyo.Control} at the specified\n\t* index, or `undefined` if it could not be found or the index is out of bounds.\n\t* @public\n\t*/\n\tgetChildForIndex: function (idx) {\n\t\treturn this.childForIndex(idx);\n\t},\n\n\t/**\n\t* Attempts to return the [control]{@link enyo.Control} representation at a particular index.\n\t*\n\t* @param {Number} idx - The index of the child to retrieve.\n\t* @returns {enyo.Control|undefined} The [control]{@link enyo.Control} at the specified\n\t* index, or `undefined` if it could not be found or the index is out of bounds.\n\t* @public\n\t*/\n\tchildForIndex: function (idx) {\n\t\treturn this.$.container.children[idx];\n\t},\n\n\t/**\n\t* Retrieves the data associated with the [repeater]{@link enyo.DataRepeater}.\n\t*\n\t* @returns {enyo.Collection} The {@link enyo.Collection} that comprises the data.\n\t* @public\n\t*/\n\tdata: function () {\n\t\treturn this.collection;\n\t},\n\n\t/**\n\t* Consolidates selection logic and allows for deselection of a [model]{@link enyo.Model}\n\t* that has already been removed from the [collection]{@link enyo.Collection}.\n\t*\n\t* @private\n\t*/\n\t_select: function (idx, model, select) {\n\t\tif (!this.selection) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar c = this.getChildForIndex(idx),\n\t\t\ts = this._selection,\n\t\t\ti = utils.indexOf(model, s);\n\n\t\tif (select) {\n\t\t\tif(i == -1) {\n\t\t\t\tif(this.selectionType != 'multi') {\n\t\t\t\t\twhile (s.length) {\n\t\t\t\t\t\ti = this.collection.indexOf(s.pop());\n\t\t\t\t\t\tthis.deselect(i);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ts.push(model);\n\t\t\t}\n\t\t} else {\n\t\t\tif(i >= 0) {\n\t\t\t\ts.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (c) {\n\t\t\tc.set('selected', select);\n\t\t}\n\t\tif (this.selectionProperty && model) {\n\t\t\t(s=this.selectionProperty) && model.set(s, select);\n\t\t}\n\t\tthis.notifyObservers('selected');\n\t},\n\n\t/**\n\t* Selects the item at the given index.\n\t*\n\t* @param {Number} idx - The index of the item to select.\n\t* @public\n\t*/\n\tselect: function (idx) {\n\t\tthis._select(idx, this.collection.at(idx), true);\n\t},\n\n\t/**\n\t* Deselects the item at the given index.\n\t*\n\t* @param {Number} idx - The index of the item to deselect.\n\t* @public\n\t*/\n\tdeselect: function (idx) {\n\t\tthis._select(idx, this.collection.at(idx), false);\n\t},\n\n\t/**\n\t* Determines whether a [model]{@link enyo.Model} is currently selected.\n\t*\n\t* @param {enyo.Model} model - The [model]{@link enyo.Model} whose selection status\n\t* is to be determined.\n\t* @returns {Boolean} `true` if the given model is selected; otherwise, `false`.\n\t* @public\n\t*/\n\tisSelected: function (model) {\n\t\treturn !!~utils.indexOf(model, this._selection);\n\t},\n\n\t/**\n\t* Selects all items (if [selectionType]{@link enyo.DataRepeater#selectionType} is `multi`).\n\t*\n\t* @public\n\t*/\n\tselectAll: function () {\n\t\tif (this.selectionType == 'multi') {\n\t\t\tthis.stopNotifications();\n\t\t\tvar s = this._selection\n\t\t\t\t, len = this.collection? this.collection.length: 0;\n\t\t\ts.length = 0;\n\t\t\tfor (var i=0; i<len; ++i) {\n\t\t\t\tthis.select(i);\n\t\t\t}\n\t\t\tthis.startNotifications();\n\t\t}\n\t},\n\n\t/**\n\t* Deselects all items.\n\t*\n\t* @public\n\t*/\n\tdeselectAll: function () {\n\t\tif (this.selection) {\n\t\t\tthis.stopNotifications();\n\t\t\tvar s = this._selection, m, i;\n\t\t\twhile (s.length) {\n\t\t\t\tm = s.pop();\n\t\t\t\ti = this.collection.indexOf(m);\n\t\t\t\tthis.deselect(i);\n\t\t\t}\n\t\t\tthis.startNotifications();\n\t\t}\n\t},\n\n\t/**\n\t* A computed property that returns the currently selected [model]{@link enyo.Model}\n\t* (if [selectionType]{@link enyo.DataRepeater#selectionType} is not `multi'`),\n\t* or an immutable [array]{@glossary Array} of all currently selected models (if\n\t* `selectionType` is `multi'`).\n\t*\n\t* @public\n\t*/\n\tselected: function() {\n\t\t// to ensure that bindings will clear properly according to their api\n\t\treturn (this.selectionType == 'multi' ? this._selection : this._selection[0]) || null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdataChanged: function () {\n\t\tif (this.collection && this.hasRendered) {\n\t\t\tthis.reset();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomputed: [\n\t\t{method: 'selected'},\n\t\t{method: 'data', path: ['controller', 'collection']}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* @private\n\t*/\n\tchildMixins: [RepeaterChildSupport],\n\n\t/**\n\t* @private\n\t*/\n\tcontrolParentName: 'container',\n\n\t/**\n\t* @private\n\t*/\n\tcontainerName: 'container',\n\n\t/**\n\t* @private\n\t*/\n\tcontainerOptions: {name: 'container', classes: 'enyo-fill enyo-data-repeater-container'},\n\n\t/**\n\t* @private\n\t*/\n\tbatching: false,\n\n\t/**\n\t* @private\n\t*/\n\t_selection: null\n});\n\n/**\n* @static\n* @private\n*/\nDataRepeater.concat = function (ctor, props) {\n\tvar p = ctor.prototype || ctor;\n\tif (props.childMixins) {\n\t\tp.childMixins = (p.childMixins? utils.merge(p.childMixins, props.childMixins): props.childMixins.slice());\n\t\tdelete props.childMixins;\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\nvar\n\tAnimator = require('../../enyo/lib/Animator'),\n\tControl = require('./Control');\n\n/**\n* Fires when the [drawer]{@link enyo.Drawer} has been opened or closed. The handler can \n* determine whether the drawer was just opened or just closed based on the\n* [open]{@link enyo.Drawer#open} property. If `this.getOpen()` returns `true`,\n* the drawer was opened; if not, it was closed.\n*\n* @event enyo.Drawer#onDrawerAnimationStep\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the [drawer]{@link enyo.Drawer} has been opened or closed. The handler\n* can determine whether the drawer was just opened or just closed based on the\n* [open]{@link enyo.Drawer#open} property. If `this.getOpen()` returns `true`,\n* the drawer was opened; if not, it was closed.\n*\n* @event enyo.Drawer#onDrawerAnimationEnd\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Drawer} is a control that appears or disappears based on its\n* [open]{@link enyo.Drawer#open} property. By default, the drawer appears\n* or disappears with a sliding animation whose direction is determined by the\n* [orient]{@link enyo.Drawer#orient} property.\n*\n* For more information, see the documentation on\n* [Drawers]{@linkplain $dev-guide/building-apps/layout/drawers.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Drawer\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Drawer.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Drawer',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Drawer.prototype */ {\n\t\t\n\t\t/**\n\t\t* The visibility state of the [drawer's]{@link enyo.Drawer} associated control.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\topen : true,\n\n\t\t/**\n\t\t* The direction of the opening/closing animation; will be either `'v'` for vertical\n\t\t* or `'h'` for horizontal.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'v'\n\t\t* @public\n\t\t*/\n\t\torient : 'v',\n\n\t\t/**\n\t\t* If `true`, the opening/closing transition will be animated.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tanimated : true,\n\n\t\t/**\n\t\t* If `true`, the [drawer]{@link enyo.Drawer} will resize its container as it is\n\t\t* animating, which is useful when the drawer is placed inside a\n\t\t* [FittableLayout]{@link enyo.FittableLayout}.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tresizeContainer: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonDrawerAnimationStep: '',\n\t\tonDrawerAnimationEnd: ''\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tstyle: 'overflow: hidden; position: relative;',\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{kind: Animator, onStep: 'animatorStep', onEnd: 'animatorEnd'},\n\t\t{name: 'client', style: 'position: relative;', classes: 'enyo-border-box'}\n\t],\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.animatedChanged();\n\t\t\tthis.openChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.createChrome(this.tools);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tanimatedChanged: function () {\n\t\tif (!this.animated && this.hasNode() && this.$.animator.isAnimating()) {\n\t\t\tthis.$.animator.stop();\n\t\t\tthis.animatorEnd();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\topenChanged: function () {\n\t\tthis.$.client.show();\n\t\tif (this.hasNode()) {\n\t\t\tif (this.$.animator.isAnimating()) {\n\t\t\t\tthis.$.animator.reverse();\n\t\t\t} else {\n\t\t\t\tvar v = this.orient == 'v';\n\t\t\t\tvar d = v ? 'height' : 'width';\n\t\t\t\tvar p = v ? 'top' : 'left';\n\t\t\t\t// unfixing the height/width is needed to properly\n\t\t\t\t// measure the scrollHeight/Width DOM property, but\n\t\t\t\t// can cause a momentary flash of content on some browsers\n\t\t\t\tthis.applyStyle(d, null);\n\t\t\t\tvar s = this.hasNode()[v ? 'scrollHeight' : 'scrollWidth'];\n\t\t\t\tif (this.animated) {\n\t\t\t\t\tthis.$.animator.play({\n\t\t\t\t\t\tstartValue: this.open ? 0 : s,\n\t\t\t\t\t\tendValue: this.open ? s : 0,\n\t\t\t\t\t\tdimension: d,\n\t\t\t\t\t\tposition: p\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// directly run last frame if not animating\n\t\t\t\t\tthis.animatorEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.$.client.setShowing(this.open);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimatorStep: function (sender) {\n\t\t// the actual drawer DOM node adjusts its height\n\t\tif (this.hasNode()) {\n\t\t\tvar d = sender.dimension;\n\t\t\tthis.applyStyle(d, sender.value + 'px');\n\t\t}\n\t\t// while the client inside the drawer adjusts its position to move out of the visible area\n\t\tvar cn = this.$.client.hasNode();\n\t\tif (cn) {\n\t\t\tvar p = sender.position;\n\t\t\tvar o = (this.open ? sender.endValue : sender.startValue);\n\t\t\tthis.$.client.applyStyle(p, (sender.value - o) + 'px');\n\t\t}\n\t\tif (this.container && this.resizeContainer) {\n\t\t\tthis.container.resize();\n\t\t}\n\t\tthis.doDrawerAnimationStep();\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimatorEnd: function () {\n\t\tif (!this.open) {\n\t\t\tthis.$.client.hide();\n\t\t}\n\t\telse {\n\t\t\tvar v = (this.orient == 'v');\n\t\t\tvar d = v ? 'height' : 'width';\n\t\t\tvar p = v ? 'top' : 'left';\n\t\t\tvar cn = this.$.client.hasNode();\n\t\t\t// clear out changes to container position & node dimension\n\t\t\tif (cn) {\n\t\t\t\tthis.$.client.applyStyle(p, null);\n\t\t\t}\n\t\t\tif (this.node) {\n\t\t\t\tthis.applyStyle(d, null);\n\t\t\t}\n\t\t}\n\t\tif (this.container && this.resizeContainer) {\n\t\t\tthis.container.resize();\n\t\t}\n\t\tthis.doDrawerAnimationEnd();\n\t\treturn true;\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control');\n\n/**\n* The extended {@glossary event} [object]{@glossary Object} that is provided when the\n* [onActiveChanged]{@link enyo.Group#onActiveChanged} event is fired.\n*\n* @typedef {Object} enyo.Group~ActiveChangedEvent\n* @property {enyo.Control} active - The active [control]{@link enyo.Control} for the\n*\t[group]{@link enyo.Group}.\n*/\n\n/**\n* Fires when the active control is changed.\n*\n* @event enyo.Group#onActiveChanged\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {enyo.Group~ActiveChangedEvent} event - An [object]{@glossary Object} containing\n*\tevent information.\n* @public\n*/\n\n/**\n* {@link enyo.Group} provides a wrapper around multiple elements. It enables the creation of\n* radio groups from arbitrary [components]{@link enyo.Component} that support the\n* {@link enyo.GroupItem} API.\n*\n* @class enyo.Group\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Group.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Group',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Group.prototype */ {\n\t\t\n\t\t/**\n\t\t* If `true`, only one [GroupItem]{@link enyo.GroupItem} in the \n\t\t* [component]{@link enyo.Component} list may be active at a given time.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\thighlander: true,\n\n\t\t/**\n\t\t* If `true`, an active highlander item may be deactivated.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tallowHighlanderDeactivate: false,\n\n\t\t/**\n\t\t* The [control]{@link enyo.Control} that was last selected.\n\t\t* \n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tactive: null,\n\t\n\t\t/**\n\t\t* This property is used to scope this [group]{@link enyo.Group} to a certain\n\t\t* set of [controls]{@link enyo.Control}.  When this is used, the group only\n\t\t* controls activation of controls that have the same `groupName` property set\n\t\t* on them.\n\t\t* \n\t\t* @type {String}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tgroupName: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonActiveChanged: \"\"\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonActivate: 'activate'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tactivate: function (sender, e) {\n\t\tif ((this.groupName || e.originator.groupName) && (e.originator.groupName != this.groupName)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.highlander) {\n\t\t\t// we can optionally accept an `allowHighlanderDeactivate` property in e without directly \n\t\t\t// specifying it when instatiating the group - used mainly for custom kinds requiring deactivation  \n\t\t\tif (e.allowHighlanderDeactivate !== undefined && e.allowHighlanderDeactivate !== this.allowHighlanderDeactivate) {\n\t\t\t\tthis.setAllowHighlanderDeactivate(e.allowHighlanderDeactivate);\n\t\t\t}\n\t\t\t// deactivation messages are ignored unless it's an attempt\n\t\t\t// to deactivate the highlander\n\t\t\tif (!e.originator.active) {\n\t\t\t\t// this clause prevents deactivating a grouped item once it's been active,\n\t\t\t\t// as long as `allowHighlanderDeactivate` is false. Otherwise, the only\n\t\t\t\t// proper way to deactivate a grouped item is to choose a new highlander.\n\t\t\t\tif (e.originator == this.active) {\n\t\t\t\t\tif (!this.allowHighlanderDeactivate) {\n\t\t\t\t\t\tthis.active.setActive(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setActive(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setActive(e.originator);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.Group#onActiveChanged\n\t* @private\n\t*/\n\tactiveChanged: function (was) {\n\t\tif (was && !was.destroyed) {\n\t\t\twas.setActive(false);\n\t\t\twas.removeClass('active');\n\t\t}\n\t\tif (this.active) {\n\t\t\tthis.active.addClass('active');\n\t\t}\n\t\tthis.doActiveChanged({active: this.active});\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control');\n\n/**\n* Fires when the [active state]{@link enyo.GroupItem#active} has changed.\n*\n* @event enyo.GroupItem#onActivate\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.GroupItem} is the base [kind]{@glossary kind} for the\n* [Grouping]{@link enyo.Group} API. It manages the\n* [active state]{@link enyo.GroupItem#active} of the [component]{@link enyo.Component}\n* (or the [inheriting]{@glossary subkind} component). A subkind may call `setActive()` \n* to set the [active]{@link enyo.GroupItem#active} property to the desired state; this\n* will additionally [bubble]{@link enyo.Component#bubble} an \n* [onActivate]{@link enyo.GroupItem#onActivate} {@glossary event}, which may\n* be handled as needed by the containing components. This is useful for creating\n* groups of items whose state should be managed collectively.\n*\n* For an example of how this works, see the {@link enyo.Group} kind, which enables the\n* creation of radio groups from arbitrary components that\tsupport the Grouping API.\n*\n* @class enyo.GroupItem\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Groupitem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.GroupItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Groupitem.prototype */ {\n\n\t\t/**\n\t\t* Will be `true` if the item is currently selected.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.activeChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @fires enyo.GroupItem#onActivate\n\t* @private\n\t*/\n\tactiveChanged: function () {\n\t\tthis.bubble('onActivate');\n\t}\n});","require('../../../enyo');\n\nvar\n\tkind = require('../kind'),\n\tri = require('../resolution'),\n\tdispatcher = require('../dispatcher'),\n\tpath = require('../pathResolver');\nvar\n\tControl = require('../Control');\n\n/**\n* Fires when the [image]{@link enyo.Image} has loaded.\n*\n* @event enyo.Image#onload\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when there has been an error while loading the [image]{@link enyo.Image}.\n*\n* @event enyo.Image#onerror\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Image} implements an HTML [&lt;img&gt;]{@glossary img} element and, optionally,\n* [bubbles]{@link enyo.Component#bubble} the [onload]{@link enyo.Image#onload} and\n* [onerror]{@link enyo.Image#onerror} [events]{@glossary event}. Image dragging is suppressed by\n* default, so as not to interfere with touch interfaces.\n*\n* {@link enyo.Image} also has support for multi-resolution images. If you are developing assets\n* for specific screen sizes, HD (720p), FHD (1080p), UHD (4k), for example, you may provide\n* specific image assets in a hash/object format to the `src` property, instead of the usual\n* string. The image sources will be used automatically when the screen resolution is less than\n* or equal to those screen types. For more informaton on our resolution support, and how to\n* enable this feature, see our [resolution independence docs]{@link enyo.ri}.\n*\n* ```\n* // Take advantage of the multi-rez mode\n* {kind: 'enyo.Image', src: {\n* \t'hd': 'http://lorempixel.com/64/64/city/1/',\n* \t'fhd': 'http://lorempixel.com/128/128/city/1/',\n* \t'uhd': 'http://lorempixel.com/256/256/city/1/'\n* }, alt: 'Multi-rez'},\n* // Standard string `src`\n* {kind: 'enyo.Image', src: http://lorempixel.com/128/128/city/1/', alt: 'Large'},\n* ```\n*\n* @class enyo.Image\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Image.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Image',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* When `true`, no [onload]{@link enyo.Image#onload} or\n\t* [onerror]{@link enyo.Image#onerror} {@glossary event} handlers will be\n\t* created.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tnoEvents: false,\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.Image.prototype */ {\n\n\t\t/**\n\t\t* Maps to the `src` attribute of an [&lt;img&gt; tag]{@glossary img}. This also supports\n\t\t* a multi-resolution hash object. See\n\t\t* [the above description of enyo.Image]{@link enyo.Image} for more details and examples\n\t\t* or our [resolution independence docs]{@link enyo.ri}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: '',\n\n\t\t/**\n\t\t* Maps to the `alt` attribute of an [&lt;img&gt; tag]{@glossary img}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\talt: '',\n\n\t\t/**\n\t\t* By default, the [image]{@link enyo.Image} is rendered using an `<img>` tag.\n\t\t* When this property is set to `'cover'` or `'constrain'`, the image will be\n\t\t* rendered using a `<div>`, utilizing `background-image` and `background-size`.\n\t\t*\n\t\t* Set this property to `'constrain'` to letterbox the image in the available\n\t\t* space, or `'cover'` to cover the available space with the image (cropping the\n\t\t* larger dimension).  Note that when `sizing` is set, the control must be\n\t\t* explicitly sized.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsizing: '',\n\n\t\t/**\n\t\t* When [sizing]{@link enyo.Image#sizing} is used, this property sets the positioning of\n\t\t* the [image]{@link enyo.Image} within the bounds, corresponding to the\n\t\t* [`background-position`]{@glossary backgroundPosition} CSS property.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'center'\n\t\t* @public\n\t\t*/\n\t\tposition: 'center'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'img',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-image',\n\n\t/**\n\t* @type {Object}\n\t* @property {Boolean} draggable - This attribute will take one of the following\n\t*\t[String]{@glossary String} values: 'true', 'false' (the default), or 'auto'.\n\t* Setting Boolean `false` will remove the attribute.\n\t* @public\n\t*/\n\tattributes: {\n\t\tdraggable: 'false'\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this.noEvents) {\n\t\t\t\tdelete this.attributes.onload;\n\t\t\t\tdelete this.attributes.onerror;\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.altChanged();\n\t\t\tthis.sizingChanged();\n\t\t\tthis.srcChanged();\n\t\t\tthis.positionChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tsrcChanged: function () {\n\t\tvar src = ri.selectSrc(this.src);\n\t\tif (this.sizing) {\n\t\t\tthis.applyStyle('background-image', src ? 'url(' + path.rewrite(src) + ')' : 'none');\n\t\t} else {\n\t\t\tif (!src) {\n\t\t\t\t// allow us to clear the src property\n\t\t\t\tthis.setAttribute('src', '');\n\t\t\t} else {\n\t\t\t\tthis.setAttribute('src', path.rewrite(src));\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\taltChanged: function () {\n\t\tthis.setAttribute('alt', this.alt);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsizingChanged: function (was) {\n\t\tthis.tag = this.sizing ? 'div' : 'img';\n\t\tthis.addRemoveClass('sized', !!this.sizing);\n\t\tif (was) {\n\t\t\tthis.removeClass(was);\n\t\t}\n\t\tif (this.sizing) {\n\t\t\tthis.addClass(this.sizing);\n\t\t}\n\t\tif (this.generated) {\n\t\t\tthis.srcChanged();\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpositionChanged: function () {\n\t\tif (this.sizing) {\n\t\t\tthis.applyStyle('background-position', this.position);\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.Image#onload\n\t* @fires enyo.Image#onerror\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this, 'load', 'error');\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tstatics: {\n\t\t/**\n\t\t\tA globally accessible data URL that describes a simple\n\t\t\tplaceholder image that may be used in samples and applications\n\t\t\tuntil final graphics are provided. As an SVG image, it will\n\t\t\texpand to fill the desired width and height set in the style.\n\t\t*/\n\t\tplaceholder:\n\t\t\t'data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n\t\t\t'9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cmVjdCB3aWR0aD0iMTAw' +\n\t\t\t'JSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0ic3Ryb2tlOiAjNDQ0OyBzdHJva2Utd2lkdGg6IDE7IGZpbGw6ICNhYW' +\n\t\t\t'E7IiAvPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjEwMCUiIHkyPSIxMDAlIiBzdHlsZT0ic3Ryb2tlOiAjNDQ0' +\n\t\t\t'OyBzdHJva2Utd2lkdGg6IDE7IiAvPjxsaW5lIHgxPSIxMDAlIiB5MT0iMCIgeDI9IjAiIHkyPSIxMDAlIiBzdH' +\n\t\t\t'lsZT0ic3Ryb2tlOiAjNDQ0OyBzdHJva2Utd2lkdGg6IDE7IiAvPjwvc3ZnPg=='\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tdispatcher = require('./dispatcher'),\n\tplatform = require('./platform');\nvar\n\tControl = require('./Control');\n\n/**\n* Fires immediately when the text changes.\n*\n* @event enyo.Input#oninput\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the text has changed and the [input]{@link enyo.Input} subsequently loses\n* focus.\n*\n* @event enyo.Input#onchange\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the [input]{@link enyo.Input} is disabled or enabled.\n*\n* @event enyo.Input#onDisabledChange\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Input} implements an HTML [&lt;input&gt;]{@glossary input} element\n* with cross-platform support for change [events]{@glossary event}.\n*\n* You may listen for [oninput]{@link enyo.Input#oninput} and\n* [onchange]{@link enyo.Input#onchange} [DOM events]{@glossary DOMEvent} from\n* this [control]{@link enyo.Control} to know when the text inside has been modified.\n*\n* For more information, see the documentation on\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\n* in the Enyo Developer Guide.\n*\n* @class enyo.Input\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Input.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Input',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.Input.prototype */ {\n\n\t\t/**\n\t\t* Value of the [input]{@link enyo.Input}. Use this property only to initialize the\n\t\t* value. Call `getValue()` and `setValue()` to manipulate the value at runtime.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tvalue: '',\n\n\t\t/**\n\t\t* Text to display when the [input]{@link enyo.Input} is empty\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tplaceholder: '',\n\n\t\t/**\n\t\t* Type of [input]{@link enyo.Input}; if not specified, it's treated as `'text'`.\n\t\t* This may be anything specified for the `type` attribute in the HTML\n\t\t* specification, including `'url'`, `'email'`, `'search'`, or `'number'`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttype: '',\n\n\t\t/**\n\t\t* When `true`, prevents input into the [control]{@link enyo.Control}. This maps\n\t\t* to the `disabled` DOM attribute.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* When `true`, the contents of the [input]{@link enyo.Input} will be selected\n\t\t* when the input gains focus.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tselectOnFocus: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonDisabledChange: ''\n\t},\n\n\t/**\n\t* Set to `true` to focus this [control]{@link enyo.Control} when it is rendered.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tdefaultFocus: false,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'input',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-input',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonfocus: 'focused',\n\t\toninput: 'input',\n\t\tonclear: 'clear',\n\t\tondragstart: 'dragstart'\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tif (platform.ie) {\n\t\t\t\tthis.handlers.onkeyup = 'iekeyup';\n\t\t\t}\n\t\t\tif (platform.windowsPhone) {\n\t\t\t\tthis.handlers.onkeydown = 'iekeydown';\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.placeholderChanged();\n\t\t\t// prevent overriding a custom attribute with null\n\t\t\tif (this.type) {\n\t\t\t\tthis.typeChanged();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\n\t\t\tdispatcher.makeBubble(this, 'focus', 'blur');\n\n\t\t\t//Force onchange event to be bubbled inside Enyo for IE8\n\t\t\tif(platform.ie == 8){\n\t\t\t\tthis.setAttribute('onchange', enyo.bubbler);\n\t\t\t}\n\n\t\t\tthis.disabledChanged();\n\t\t\tif (this.defaultFocus) {\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\ttypeChanged: function () {\n\t\tthis.setAttribute('type', this.type);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tplaceholderChanged: function () {\n\t\tthis.setAttribute('placeholder', this.placeholder);\n\t\tthis.valueChanged();\n\t},\n\n\t/**\n\t* @fires enyo.Input#onDisabledChange\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.setAttribute('disabled', this.disabled);\n\t\tthis.bubble('onDisabledChange');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tvar node = this.hasNode(),\n\t\t\tattrs = this.attributes;\n\t\tif (node) {\n\t\t\tif (node.value !== this.value) {\n\t\t\t\tnode.value = this.value;\n\t\t\t}\n\t\t\t// we manually update the cached value so that the next time the\n\t\t\t// attribute is requested or the control is re-rendered it will\n\t\t\t// have the correct value - this is because calling setAttribute()\n\t\t\t// in some cases does not receive an appropriate response from the\n\t\t\t// browser\n\t\t\tattrs.value = this.value;\n\t\t} else {\n\t\t\tthis.setAttribute('value', this.value);\n\t\t}\n\t\tthis.detectTextDirectionality((this.value || this.value === 0) ? this.value : this.get('placeholder'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tiekeyup: function (sender, e) {\n\t\tvar ie = platform.ie, kc = e.keyCode;\n\t\t// input event missing on ie 8, fails to fire on backspace and delete keys in ie 9\n\t\tif (ie <= 8 || (ie == 9 && (kc == 8 || kc == 46))) {\n\t\t\tthis.bubble('oninput', e);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tiekeydown: function (sender, e) {\n\t\tvar wp = platform.windowsPhone, kc = e.keyCode, dt = e.dispatchTarget;\n\t\t// onchange event fails to fire on enter key for Windows Phone 8, so we force blur\n\t\tif (wp <= 8 && kc == 13 && this.tag == 'input' && dt.hasNode()) {\n\t\t\tdt.node.blur();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclear: function () {\n\t\tthis.setValue('');\n\t},\n\n\t// note: we disallow dragging of an input to allow text selection on all platforms\n\t/**\n\t* @private\n\t*/\n\tdragstart: function () {\n\t\treturn this.hasFocus();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfocused: function () {\n\t\tif (this.selectOnFocus) {\n\t\t\tenyo.asyncMethod(this, 'selectContents');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectContents: function () {\n\t\tvar n = this.hasNode();\n\n\t\tif (n && n.setSelectionRange) {\n\t\t\tn.setSelectionRange(0, n.value.length);\n\t\t} else if (n && n.createTextRange) {\n\t\t\tvar r = n.createTextRange();\n\t\t\tr.expand('textedit');\n\t\t\tr.select();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinput: function () {\n\t\tvar val = this.getNodeProperty('value');\n\t\tthis.setValue(val);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tpath = require('./pathResolver');\nvar\n\tControl = require('./Control');\n\n/**\n* Fires when the `src` or `type` of the {@link enyo.MediaSource} changes.\n*\n* @event enyo.MediaSource#onChangeSource\n* @type {Object}\n* @public\n*/\n\n/**\n* A media source for {@link enyo.Audio} or {@link enyo.Video}.\n*\n* ```\n* {kind: 'Video', components: [\n* \t{src: 'video.mp4', type: 'video/mp4'},\n* \t{src: 'video.ogg', type: 'video/ogg'},\n* \t{src: 'video.webm', type: 'video/webm'}\n* ]}\n* ```\n* \n* @ui\n* @class enyo.MediaSource\n* @extends enyo.Control\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.MediaSource.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.MediaSource',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\t\n\t/**\n\t* @private\n\t*/\n\ttag: 'source',\n\t\n\t/**\n\t* Path to the source.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tsrc: '',\n\t\n\t/**\n\t* MIME Type of the source.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\ttype: '',\n\t\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonChangeSource: ''\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\n\t\t\t// import the value from attributes if it was specified there instead of the property\n\t\t\tthis.syncAttribute('src');\n\t\t\tthis.syncAttribute('type');\n\t\t};\n\t}),\n\t\n\t/**\n\t* @fires enyo.MediaSource#onChangeSource\n\t* @private\n\t*/\n\tsrcChanged: function () {\n\t\tthis.setAttribute('src', path.rewrite(this.src));\n\t\tthis.doChangeSource();\n\t},\n\t\n\t/**\n\t* @fires enyo.MediaSource#onChangeSource\n\t* @private\n\t*/\n\ttypeChanged: function () {\n\t\tthis.setAttribute('type', this.type);\n\t\tthis.doChangeSource();\n\t},\n\t\n\t/**\n\t* Synchronizes initial property values with attributes. If the property is valued, it is set\n\t* on the attribute. If not and the attribute is valued, import it onto the property\n\t* \n\t* @private\n\t*/\n\tsyncAttribute: function (name) {\n\t\tvar attr = this.getAttribute(name);\n\n\t\tif(!this[name] && attr) {\n\t\t\tthis[name] = attr;\n\t\t} else {\n\t\t\tthis.setAttribute(name, this[name]);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\nvar\n\tControl = require('./Control');\n\n/**\n* The extended {@glossary event} [object]{@glossary Object} that is provided\n* when the [onSetupItem]{@link enyo.Repeater#onSetupItem} event is fired.\n*\n* @typedef {Object} enyo.Repeater~SetupItemEvent\n* @property {Number} index - The item's index.\n* @property {Object} item - The item control, for decoration.\n*/\n\n/**\n* Fires when each item is created.\n*\n* @event enyo.Repeater#onSetupItem\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {enyo.Repeater~SetupItemEvent} event - An [object]{@glossary Object} containing\n*\tevent information.\n* @public\n*/\n\t\n/**\n* Sometimes client [controls]{@link enyo.Control} are intermediated with null-controls.\n* These overrides reroute [events]{@glossary event} from such controls to the nominal\n* [delegate]{@glossary delegate}, as would happen in the absence of intermediation.\n* \n* @class enyo.OwnerProxy\n* @extends enyo.Control\n* @private\n*/\nvar OwnerProxy = kind(\n\t/** @lends enyo.OwnerProxy.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\ttag: null,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdecorateEvent: kind.inherit(function (sup) {\n\t\treturn function(inEventName, inEvent, inSender) {\n\t\t\tif (inEvent) {\n\t\t\t\t// preserve an existing index property.\n\t\t\t\tif (utils.exists(inEvent.index)) {\n\t\t\t\t\t// if there are nested indices, store all of them in an array\n\t\t\t\t\t// but leave the innermost one in the index property\n\t\t\t\t\tinEvent.indices = inEvent.indices || [inEvent.index];\n\t\t\t\t\tinEvent.indices.push(this.index);\n\t\t\t\t} else {\n\t\t\t\t\t// for a single level, just decorate the index property\n\t\t\t\t\tinEvent.index = this.index;\n\t\t\t\t}\n\t\t\t\t// update delegate during bubbling to account for proxy\n\t\t\t\t// by moving the delegate up to the repeater level\n\t\t\t\tif (inEvent.delegate && inEvent.delegate.owner === this) {\n\t\t\t\t\tinEvent.delegate = this.owner;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t})\n});\n\n/**\n* {@link enyo.Repeater} is a simple [control]{@link enyo.Control} for making lists of items.\n*\n* The [components]{@link enyo.Component} of a repeater are copied for each item created,\n* and are wrapped in a control that keeps the state of the item index.\n* \n* ```javascript\n* {kind: 'Repeater', count: 2, onSetupItem: 'setImageSource', components: [\n*\t{kind: 'Image'}\n* ]}\n* \n* setImageSource: function(inSender, inEvent) {\n*\tvar index = inEvent.index;\n*\tvar item = inEvent.item;\n*\titem.$.image.setSrc(this.imageSources[index]);\n*\treturn true;\n* }\n* ```\n* \n* Be sure to return `true` from your `onSetupItem` handler to avoid having other \n* {@glossary event} handlers further up the tree try to modify your item control.\n* \n* For more information, see the documentation on\n* [Lists]{@linkplain $dev-guide/building-apps/layout/lists.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Repeater\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Repeater.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Repeater',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Repeater.prototype */ {\n\t\t\n\t\t/**\n\t\t* The number of items to be repeated.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tcount: 0\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonSetupItem: ''\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.countChanged();\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.itemComponents = this.components || this.kindComponents;\n\t\t\tthis.components = this.kindComponents = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcountChanged: function () {\n\t\tthis.build();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\titemAtIndex: function (idx) {\n\t\treturn this.controlAtIndex(idx);\n\t},\n\n\t/** \n\t* Renders the [collection]{@link enyo.Collection} of items. This will delete any\n\t* existing items and recreate the [repeater]{@link enyo.Repeater} if called after\n\t* the repeater has been rendered. This is called automatically when the\n\t* [count]{@link enyo.Repeater#count} property changes. To set the `count` property\n\t* and force a re-render, such as when a [data model]{@link enyo.Model} changes,\n\t* use `set('count', newCount, true)`, where the last parameter forces the change\n\t* handler to be called, even if the `count` remains the same.\n\t*\n\t* @fires enyo.Repeater#onSetupItem\n\t* @public\n\t*/\n\tbuild: function () {\n\t\tthis.destroyClientControls();\n\t\tfor (var i=0, c; i<this.count; i++) {\n\t\t\tc = this.createComponent({kind: OwnerProxy, index: i});\n\t\t\t// do this as a second step so 'c' is the owner of the created components\n\t\t\tc.createComponents(this.itemComponents);\n\t\t\t// invoke user's setup code\n\t\t\tthis.doSetupItem({index: i, item: c});\n\t\t}\n\t\tthis.render();\n\t},\n\t/**\n\t* Renders a specific item in the [collection]{@link enyo.Collection}. This does not\n\t* destroy the item, but just calls the `onSetupItem` {@glossary event} handler again\n\t* for it, so any state stored in the item is preserved.\n\t*\n\t* @param {Number} idx - The index of the item to render.\n\t* @fires enyo.Repeater#onSetupItem\n\t* @public\n\t*/\n\trenderRow: function (idx) {\n\t\tvar c = this.itemAtIndex(idx);\n\t\tthis.doSetupItem({index: idx, item: c});\n\t},\n\n\t/**\n\t* A legacy method that sets the number of items to be repeated and effectively forces a \n\t* rebuild of the [repeater]{@link enyo.Repeater}, regardless of whether or not the count has\n\t* changed.\n\t*\n\t* @param {Number} count - The number of items to be repeated.\n\t* @public\n\t*/\n\tsetCount: function (count) {\n\t\tthis.set('count', count, {force: true});\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils'),\n\tfloatingLayer = require('../floatingLayer');\nvar\n\tControl = require('../Control');\n\n/**\n* {@link enyo.Scrim} provides an overlay that will prevent taps from propagating\n* to the controls that it covers.  A scrim may be \"floating\" or \"non-floating\".\n* A floating scrim will fill the entire viewport, while a non-floating scrim will\n* be constrained by the dimensions of its container.\n*\n* The scrim should have a CSS class of `enyo-scrim-transparent`,\n* `enyo-scrim-translucent`, or any other class that has\n* `pointer-events: auto` in its style properties.\n*\n* You may specify the `z-index` at which you want the scrim to appear by calling\n* [showAtZIndex()]{@link enyo.Scrim#showAtZIndex}. If you do so, you must call\n* [hideAtZIndex()]{@link enyo.Scrim#hideAtZIndex} with the same value to hide the\n* scrim.\n*\n* @class  enyo.Scrim\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar Scrim = module.exports = kind(\n\t/** @lends enyo.Scrim.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Scrim',\n\n\tkind: Control,\n\n\t/**\n\t* Current visibility state\n\t*\n\t* @type {Boolean}\n\t* @private\n\t*/\n\tshowing: false,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-scrim enyo-fit',\n\n\t/**\n\t* If `true`, the scrim is rendered in a floating layer outside of other\n\t* controls. This can be used to guarantee that the scrim will be shown\n\t* on top of other controls.\n\t*\n\t* @type {Boolean}\n\t* @default  false\n\t* @public\n\t*/\n\tfloating: false,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tthis.inherited(arguments);\n\t\tthis.zStack = [];\n\t\tif (this.floating) {\n\t\t\tthis.setParent(floatingLayer);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function () {\n\t\t// auto render when shown.\n\t\tif (this.floating && this.showing && !this.hasNode()) {\n\t\t\tthis.render();\n\t\t}\n\t\tthis.inherited(arguments);\n\t\t//this.addRemoveClass(this.showingClassName, this.showing);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\taddZIndex: function (zIndex) {\n\t\tif (utils.indexOf(zIndex, this.zStack) < 0) {\n\t\t\tthis.zStack.push(zIndex);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveZIndex: function (control) {\n\t\tutils.remove(control, this.zStack);\n\t},\n\n\t/**\n\t* Shows scrim at the specified z-index. Note that if you call\n\t* `showAtZIndex()`, you must call [hideAtZIndex()]{@link enyo.Scrim#hideAtZIndex}\n\t* to properly unwind the z-index stack.\n\t*\n\t* @param  {Number} zIndex - z-index for the scrim\n\t* @public\n\t*/\n\tshowAtZIndex: function (zIndex) {\n\t\tthis.addZIndex(zIndex);\n\t\tif (zIndex !== undefined) {\n\t\t\tthis.setZIndex(zIndex);\n\t\t}\n\t\tthis.show();\n\t},\n\n\t/**\n\t* Hides scrim at the specified z-index.\n\t*\n\t* @param  {Number} zIndex - z-index of the scrim\n\t* @public\n\t*/\n\thideAtZIndex: function (zIndex) {\n\t\tthis.removeZIndex(zIndex);\n\t\tif (!this.zStack.length) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tvar z = this.zStack[this.zStack.length-1];\n\t\t\tthis.setZIndex(z);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetZIndex: function (zIndex) {\n\t\tthis.zIndex = zIndex;\n\t\tthis.applyStyle('z-index', zIndex);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmake: function () {\n\t\treturn this;\n\t}\n});\n\n/**\n* Scrim singleton exposing a subset of the Scrim API;\n* it is replaced with a proper {@link enyo.Scrim} instance.\n*\n* @class  enyo.scrimSingleton\n* @private\n*/\nvar ScrimSingleton = kind(\n\t/** @lends  enyo.scrimSingleton.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (props) {\n\t\tthis.instanceName = name;\n\t\tthis.props = props || {};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmake: function () {\n\t\tvar s = new Scrim(this.props);\n\t\treturn s;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowAtZIndex: function (zIndex) {\n\t\tvar s = this.make();\n\t\ts.showAtZIndex(zIndex);\n\t},\n\n\t/**\n\t* In case somebody does this out of order\n\t*\n\t* @private\n\t*/\n\thideAtZIndex: utils.nop,\n\n\t/**\n\t* @private\n\t*/\n\tshow: function () {\n\t\tvar s = this.make();\n\t\ts.show();\n\t}\n});\n\nScrim.scrim = new ScrimSingleton({floating: true, classes: 'enyo-scrim-translucent'});\nScrim.scrimTransparent = new ScrimSingleton({floating: true, classes: 'enyo-scrim-transparent'});\nScrim.ScrimSingleton = ScrimSingleton;","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tdispatcher = require('./dispatcher');\n\nvar\n\tControl = require('./Control');\n\n/**\n* {@link enyo.ScrollStrategy} is a helper [kind]{@glossary kind} that implements a default \n* scrolling strategy for an {@link enyo.Scroller}.\n* \n* `enyo.ScrollStrategy` is not typically created in application code. Instead, it is specified \n* as the value of the [strategyKind]{@link enyo.Scroller#strategyKind} property of an\n* `enyo.Scroller` or {@link enyo.List}, or is used by the framework implicitly.\n*\n* @class enyo.ScrollStrategy\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ScrollStrategy.prototype */ {\n\n\tname: 'enyo.ScrollStrategy',\n\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\ttag: null,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.ScrollStrategy.prototype */ {\n\t\t\n\t\t/**\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\tvertical: 'default',\n\t\t\n\t\t/**\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\thorizontal: 'default',\n\t\t\n\t\t/**\n\t\t* The horizontal scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollLeft: 0,\n\t\t\n\t\t/**\n\t\t* The vertical scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollTop: 0,\n\t\t\n\t\t/**\n\t\t* Maximum height of the scroll content.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tmaxHeight: null,\n\t\t\n\t\t/**\n\t\t* Indicates whether mouse wheel may be used to move the [scroller]{@link enyo.Scroller}.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuseMouseWheel: true\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonScrollStart: '',\n\t\tonScrollStop: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tondragstart: 'dragstart',\n\t\tondragfinish: 'dragfinish',\n\t\tondown: 'down',\n\t\tonmove: 'move',\n\t\tonmousewheel: 'mousewheel',\n\t\tonscroll: 'domScroll'\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.horizontalChanged();\n\t\t\tthis.verticalChanged();\n\t\t\tthis.maxHeightChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this.container, 'scroll');\n\t\t\tthis.scrollNode = this.calcScrollNode();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tteardownRender: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.scrollNode = null;\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcalcScrollNode: function () {\n\t\treturn this.container.hasNode();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thorizontalChanged: function () {\n\t\tthis.container.applyStyle('overflow-x', this.horizontal == 'default' ? 'auto' : this.horizontal);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverticalChanged: function () {\n\t\tthis.container.applyStyle('overflow-y', this.vertical == 'default' ? 'auto' : this.vertical);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\tthis.container.applyStyle('max-height', this.maxHeight);\n\t},\n\n\t/** \n\t* Scrolls to the specified position.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @public\n\t*/\n\tscrollTo: function (x, y) {\n\t\tif (this.scrollNode) {\n\t\t\tthis.setScrollLeft(x);\n\t\t\tthis.setScrollTop(y);\n\t\t}\n\t},\n\n\t/** \n\t* Ensures that the given node is visible in the [scroller's]{@link enyo.Scroller} viewport.\n\t*\n\t* @param {Node} node - The node to make visible in the [scroller's]{@link enyo.Scroller}\n\t*\tviewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollToNode: function (node, alignWithTop) {\n\t\tif (this.scrollNode) {\n\t\t\tvar sb = this.getScrollBounds();\n\t\t\tvar n = node;\n\t\t\tvar b = {height: n.offsetHeight, width: n.offsetWidth, top: 0, left: 0};\n\t\t\twhile (n && n.parentNode && n.id != this.scrollNode.id) {\n\t\t\t\tb.top += n.offsetTop;\n\t\t\t\tb.left += n.offsetLeft;\n\t\t\t\tn = n.parentNode;\n\t\t\t}\n\t\t\t// By default, the element is scrolled to align with the top of the scroll area.\n\t\t\tthis.setScrollTop(Math.min(sb.maxTop, alignWithTop === false ? b.top - sb.clientHeight + b.height : b.top));\n\t\t\tthis.setScrollLeft(Math.min(sb.maxLeft, alignWithTop === false ? b.left - sb.clientWidth + b.width : b.left));\n\t\t}\n\t},\n\n\t/**\n\t* Scrolls the given [control]{@link enyo.Control} into view.\n\t*\n\t* @param {enyo.Control} ctl - The [control]{@link enyo.Control} to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollIntoView: function (ctl, alignWithTop) {\n\t\tif (ctl.hasNode()) {\n\t\t\tctl.node.scrollIntoView(alignWithTop);\n\t\t}\n\t},\n\tisInView: function(inNode) {\n\t\tvar sb = this.getScrollBounds();\n\t\tvar ot = inNode.offsetTop;\n\t\tvar oh = inNode.offsetHeight;\n\t\tvar ol = inNode.offsetLeft;\n\t\tvar ow = inNode.offsetWidth;\n\t\treturn (ot >= sb.top && ot + oh <= sb.top + sb.clientHeight) && (ol >= sb.left && ol + ow <= sb.left + sb.clientWidth);\n\t},\n\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollTop: function (top) {\n\t\tthis.scrollTop = top;\n\t\tif (this.scrollNode) {\n\t\t\tthis.scrollNode.scrollTop = this.scrollTop;\n\t\t}\n\t},\n\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollLeft: function (left) {\n\t\tthis.scrollLeft = left;\n\t\tif (this.scrollNode) {\n\t\t\tthis.scrollNode.scrollLeft = this.scrollLeft;\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tgetScrollLeft: function () {\n\t\treturn this.scrollNode ? this.scrollNode.scrollLeft : this.scrollLeft;\n\t},\n\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @private\n\t*/\n\tgetScrollTop: function () {\n\t\treturn this.scrollNode ? this.scrollNode.scrollTop : this.scrollTop;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_getScrollBounds: function () {\n\t\tvar s = this.getScrollSize(), cn = this.container.hasNode();\n\t\tvar b = {\n\t\t\tleft: this.getScrollLeft(),\n\t\t\ttop: this.getScrollTop(),\n\t\t\tclientHeight: cn ? cn.clientHeight : 0,\n\t\t\tclientWidth: cn ? cn.clientWidth : 0,\n\t\t\theight: s.height,\n\t\t\twidth: s.width\n\t\t};\n\t\tb.maxLeft = Math.max(0, b.width - b.clientWidth);\n\t\tb.maxTop = Math.max(0, b.height - b.clientHeight);\n\t\treturn b;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrollSize: function () {\n\t\tvar n = this.scrollNode;\n\t\treturn {width: n ? n.scrollWidth : 0, height: n ? n.scrollHeight : 0};\n\t},\n\n\t/**\n\t* Retrieves the scroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t* \n\t* @returns {enyo.Scroller~BoundaryObject} An [object]{@glossary Object} describing the \n\t*\tscroll boundaries.\n\t* @public\n\t*/\n\tgetScrollBounds: function () {\n\t\treturn this._getScrollBounds();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcStartInfo: function () {\n\t\tvar sb = this.getScrollBounds();\n\t\tvar y = this.getScrollTop(), x = this.getScrollLeft();\n\t\tthis.canVertical = sb.maxTop > 0 && this.vertical != 'hidden';\n\t\tthis.canHorizontal = sb.maxLeft > 0 && this.horizontal != 'hidden';\n\t\tthis.startEdges = {\n\t\t\ttop: y === 0,\n\t\t\tbottom: y === sb.maxTop,\n\t\t\tleft: x === 0,\n\t\t\tright: x === sb.maxLeft\n\t\t};\n\t},\n\n\t// NOTE: down, move, and drag handlers are needed only for native touch scrollers\n\n\t/**\n\t* @private\n\t*/\n\tshouldDrag: function (e) {\n\t\tvar requestV = e.vertical;\n\t\treturn (requestV && this.canVertical  || !requestV && this.canHorizontal) /*&& !this.isOobVerticalScroll(event)*/;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragstart: function (sender, e) {\n\t\tthis.dragging = this.shouldDrag(e);\n\t\tif (this.dragging) {\n\t\t\treturn this.preventDragPropagation;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragfinish: function (sender, e) {\n\t\tif (this.dragging) {\n\t\t\tthis.dragging = false;\n\t\t\te.preventTap();\n\t\t}\n\t},\n\n\t/**\n\t* Avoid allowing scroll when starting at a vertical boundary to prevent iOS from window \n\t* scrolling.\n\t* \n\t* @private\n\t*/\n\tdown: function (sender, e) {\n\t\tif (this.isScrolling()) {\n\t\t\te.preventTap();\n\t\t}\n\t\tthis.calcStartInfo();\n\t},\n\n\t/**\n\t* NOTE: Mobile native [scrollers]{@link enyo.Scroller} need `touchmove`. Indicate this by \n\t* setting the `requireTouchmove` property to `true`.\n\t* \n\t* @private\n\t*/\n\tmove: function (sender, e) {\n\t\tif (e.which && (this.canVertical && e.vertical || this.canHorizontal && e.horizontal)) {\n\t\t\te.disablePrevention();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmousewheel: function (sender, e) {\n\t\t//* We disable mouse wheel scrolling by preventing the default\n\t\tif (!this.useMouseWheel) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdomScroll: function(sender, e) {\n\t\tif (!this._scrolling) {\n\t\t\tthis.doScrollStart();\n\t\t}\n\t\tthis._scrolling = true;\n\t\tthis.startJob('stopScrolling', function() {\n\t\t\tthis._scrolling = false;\n\t\t\tthis.doScrollStop();\n\t\t}, 100);\n\t},\n\n\t/**\n\t* @public\n\t*/\n\tisScrolling: function() {\n\t\treturn this._scrolling;\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind');\n\nvar\n\tControl = require('../Control'),\n\tDom = require('../dom');\n\n/**\n* {@link enyo.ScrollThumb} is a helper [kind]{@glossary kind} used by \n* {@link enyo.TouchScrollStrategy} and {@link enyo.TranslateScrollStrategy} to\n* display a small visual scroll indicator.\n* \n* `enyo.ScrollThumb` is not typically created in application code.\n*\n* @class enyo.ScrollThumb\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ScrollThumb.prototype */ {\n\t\n\tname: 'enyo.ScrollThumb',\n\t\n\tkind: Control,\n\n\t/**\n\t* The orientation of the scroll indicator bar; 'v' for vertical or 'h' for horizontal.\n\t* \n\t* @type {String}\n\t* @default 'v'\n\t* @public\n\t*/\n\taxis: 'v',\n\n\t/**\n\t* Minimum size of the indicator.\n\t* \n\t* @private\n\t*/\n\tminSize: 4,\n\n\t/**\n\t* Size of the indicator's corners.\n\t* \n\t* @private\n\t*/\n\tcornerSize: 6,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-thumb',\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar v = this.axis == 'v';\n\t\t\tthis.dimension = v ? 'height' : 'width';\n\t\t\tthis.offset = v ? 'top' : 'left';\n\t\t\tthis.translation = v ? 'translateY' : 'translateX';\n\t\t\tthis.positionMethod = v ? 'getScrollTop' : 'getScrollLeft';\n\t\t\tthis.sizeDimension = v ? 'clientHeight' : 'clientWidth';\n\t\t\tthis.addClass('enyo-' + this.axis + 'thumb');\n\t\t\tthis.transform = Dom.canTransform();\n\t\t\tif (Dom.canAccelerate()) {\n\t\t\t\tDom.transformValue(this, 'translateZ', 0);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/** \n\t* Syncs the scroll indicator bar to the [scroller]{@link enyo.Scroller} size and position,\n\t* as determined by the passed-in scroll strategy.\n\t*\n\t* @param {enyo.ScrollStrategy} strategy - The scroll strategy to be synced with.\n\t* @public\n\t*/\n\tsync: function (strategy) {\n\t\tthis.scrollBounds = strategy._getScrollBounds();\n\t\tthis.update(strategy);\n\t},\n\n\t/**\n\t* Updates the scroll indicator bar based on the scroll bounds of the strategy, the available\n\t* scroll area, and whether there is overscrolling. If the scroll indicator bar is not\n\t* needed, it will be not be displayed.\n\t* \n\t* @param {enyo.ScrollStrategy} strategy - The scroll strategy to update from.\n\t* @public\n\t*/\n\tupdate: function (strategy) {\n\t\tif (this.showing) {\n\t\t\tvar d = this.dimension, o = this.offset;\n\t\t\tvar bd = this.scrollBounds[this.sizeDimension], sbd = this.scrollBounds[d];\n\t\t\tvar overs = 0, overp = 0, over = 0;\n\t\t\tif (bd >= sbd) {\n\t\t\t\tthis.hide();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (strategy.isOverscrolling()) {\n\t\t\t\tover = strategy.getOverScrollBounds()['over' + o];\n\t\t\t\tovers = Math.abs(over);\n\t\t\t\toverp = Math.max(over, 0);\n\t\t\t}\n\t\t\tvar sbo = strategy[this.positionMethod]() - over;\n\t\t\t// calc size & position\n\t\t\tvar bdc = bd - this.cornerSize;\n\t\t\tvar s = Math.floor((bd * bd / sbd) - overs);\n\t\t\ts = Math.max(this.minSize, s);\n\t\t\tvar p = Math.floor((bdc * sbo / sbd) + overp);\n\t\t\tp = Math.max(0, Math.min(bdc - this.minSize, p));\n\t\t\t// apply thumb styling\n\t\t\tthis.needed = s < bd;\n\t\t\tif (this.needed && this.hasNode()) {\n\t\t\t\tif (this._pos !== p) {\n\t\t\t\t\tthis._pos = p;\n\t\t\t\t\tif(!this.transform) {\n\t\t\t\t\t\t//adjust top/left for browsers that don't support translations\n\t\t\t\t\t\tif(this.axis=='v') {\n\t\t\t\t\t\t\tthis.setBounds({top:p + 'px'});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setBounds({left:p + 'px'});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tDom.transformValue(this, this.translation, p + 'px');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this._size !== s) {\n\t\t\t\t\tthis._size = s;\n\t\t\t\t\tthis.applyStyle(d, s + 'px');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* We implement `setShowing()` and cancel the [delayHide()]{@link enyo.ScrollThumb#delayHide} \n\t* because [showing]{@link enyo.Control#showing} is not changed while we execute\n\t* `delayHide()`.\n\t*\n\t* @param {Boolean} showing - If `true`, displays the {@link enyo.ScrollThumb} if appropriate;\n\t*\totherwise, hides the ScrollThumb.\n\t* @public\n\t*/\n\tsetShowing: function (showing) {\n\t\tif (showing && showing != this.showing) {\n\t\t\tif (this.scrollBounds[this.sizeDimension] >= this.scrollBounds[this.dimension]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (this.hasNode()) {\n\t\t\tthis.cancelDelayHide();\n\t\t}\n\t\tif (showing != this.showing) {\n\t\t\tvar last = this.showing;\n\t\t\tthis.showing = showing;\n\t\t\tthis.showingChanged(last);\n\t\t}\n\t},\n\n\t/**\n\t* Delays automatic hiding of the {@link enyo.ScrollThumb}.\n\t*\n\t* @param {Number} delay - The number of milliseconds to delay hiding of the\n\t*\t{@link enyo.ScrollThumb}.\n\t* @public\n\t*/\n\tdelayHide: function (delay) {\n\t\tif (this.showing) {\n\t\t\tthis.startJob('hide', this.hide, delay || 0);\n\t\t}\n\t},\n\n\t/**\n\t* Cancels any pending [delayHide()]{@link enyo.ScrollThumb#delayHide} jobs.\n\t* \n\t* @public\n\t*/\n\tcancelDelayHide: function () {\n\t\tthis.stopJob('hide');\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control');\n\n/**\n* {@link enyo.TableCell} implements an HTML [&lt;td&gt;]{@glossary td} element.\n*\n* @class enyo.TableCell\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.TableCell.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.TableCell',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'td'\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control')\n\tLayout = require('../../../enyo/lib/Layout');\n\nvar detector = document.createElement('div'),\n\tflexAvailable =\n\t\t(detector.style.flexBasis !== undefined) ||\n\t\t(detector.style.webkitFlexBasis !== undefined) ||\n\t\t(detector.style.mozFlexBasis !== undefined) ||\n\t\t(detector.style.msFlexBasis !== undefined);\n\n/**\n* {@link enyo.FittableLayout} provides the base positioning and boundary logic for\n* the fittable layout strategy. The fittable layout strategy is based on\n* laying out items in either a set of rows or a set of columns, with most of\n* the items having natural size, but one item expanding to fill the remaining\n* space. The item that expands is labeled with the attribute `fit: true`.\n*\n* The subkinds {@link enyo.FittableColumnsLayout} and {@link enyo.FittableRowsLayout}\n* (or _their_ subkinds) are used for layout rather than `enyo.FittableLayout` because\n* they specify properties that the framework expects to be available when laying items\n* out.\n*\n* When available on the platform, you can opt-in to have `enyo.FittableLayout` use CSS\n* flexible box (flexbox) to implement fitting behavior on the platform for better\n* performance; Enyo will fall back to JavaScript-based layout on older platforms.\n* Three subtle differences between the flexbox and JavaScript implementations\n* should be noted:\n\n* - When using flexbox, vertical margins (i.e., `margin-top`, `margin-bottom`) will\n* not collapse; when using JavaScript layout, vertical margins will collapse according\n* to static layout rules.\n*\n* - When using flexbox, non-fitting children of the Fittable must not be sized\n* using percentages of the container (even if set to `position: relative`);\n* this is explicitly not supported by the flexbox 2013 spec.\n*\n* - The flexbox-based Fittable implementation will respect multiple children\n* with `fit: true` (the fitting space will be divided equally between them).\n* This is NOT supported by the JavaScript implementation, and you should not rely\n* upon this behavior if you are deploying to platforms without flexbox support.\n*\n* The flexbox implementation was added to Enyo 2.5.0 as an optional performance\n* optimization; to use the optimization, set `useFlex: true` on the Fittable\n* container.  This will cause flexbox to be used when possible.\n*\n* @class  enyo.FittableLayout\n* @extends enyo.Layout\n* @public\n*/\nvar FittableLayout = module.exports = kind(/** @lends  enyo.FittableLayout.prototype */{\n\tname: 'enyo.FittableLayout',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Layout,\n\n\t/**\n\t* @private\n\t*/\n\tnoDefer: true,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: function () {\n\t\tLayout.prototype._constructor.apply(this, arguments);\n\n\t\t// Add the force-ltr class if we're in RTL mode, but this control is set explicitly to NOT be in RTL mode.\n\t\tthis.container.addRemoveClass('force-left-to-right', (Control.prototype.rtl && !this.container.get('rtl')) );\n\n\t\t// Flexbox optimization is determined by global flexAvailable and per-instance opt-in useFlex flag\n\t\tthis.useFlex = flexAvailable && (this.container.useFlex === true);\n\t\tif (this.useFlex) {\n\t\t\tthis.container.addClass(this.flexLayoutClass);\n\t\t} else {\n\t\t\tthis.container.addClass(this.fitLayoutClass);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcFitIndex: function () {\n\t\tvar aChildren = this.container.children,\n\t\t\toChild,\n\t\t\tn;\n\n\t\tfor (n=0; n<aChildren.length; n++) {\n\t\t\toChild = aChildren[n];\n\t\t\tif (oChild.fit && oChild.showing) {\n\t\t\t\treturn n;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetFitControl: function () {\n\t\tvar aChildren = this.container.children,\n\t\t\toFitChild = aChildren[this.fitIndex];\n\n\t\tif (!(oFitChild && oFitChild.fit && oFitChild.showing)) {\n\t\t\tthis.fitIndex = this.calcFitIndex();\n\t\t\toFitChild = aChildren[this.fitIndex];\n\t\t}\n\t\treturn oFitChild;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshouldReverse: function () {\n\t\treturn this.container.rtl && this.orient === 'h';\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\tLayout.prototype.destroy.apply(this, arguments);\n\t\t\n\t\tif (this.container) {\n\t\t\tthis.container.removeClass(this.useFlex ? this.flexLayoutClass : this.fitLayoutClass);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetFirstChild: function() {\n\t\tvar aChildren = this.getShowingChildren();\n\n\t\tif (this.shouldReverse()) {\n\t\t\treturn aChildren[aChildren.length - 1];\n\t\t} else {\n\t\t\treturn aChildren[0];\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetLastChild: function() {\n\t\tvar aChildren = this.getShowingChildren();\n\n\t\tif (this.shouldReverse()) {\n\t\t\treturn aChildren[0];\n\t\t} else {\n\t\t\treturn aChildren[aChildren.length - 1];\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetShowingChildren: function() {\n\t\tvar a = [],\n\t\t\tn = 0,\n\t\t\taChildren = this.container.children,\n\t\t\tnLength   = aChildren.length;\n\n\t\tfor (;n<nLength; n++) {\n\t\t\tif (aChildren[n].showing) {\n\t\t\t\ta.push(aChildren[n]);\n\t\t\t}\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_reflow: function(sMeasureName, sClienMeasure, sAttrBefore, sAttrAfter) {\n\t\tthis.container.addRemoveClass('enyo-stretch', !this.container.noStretch);\n\n\t\tvar oFitChild       = this.getFitControl(),\n\t\t\toContainerNode  = this.container.hasNode(),  // Container node\n\t\t\tnTotalSize     = 0,                          // Total container width or height without padding\n\t\t\tnBeforeOffset   = 0,                         // Offset before fit child\n\t\t\tnAfterOffset    = 0,                         // Offset after fit child\n\t\t\toPadding,                                    // Object containing t,b,r,l paddings\n\t\t\toBounds,                                     // Bounds object of fit control\n\t\t\toLastChild,\n\t\t\toFirstChild,\n\t\t\tnFitSize;\n\n\t\tif (!oFitChild || !oContainerNode) { return; }\n\n\t\toPadding   = dom.calcPaddingExtents(oContainerNode);\n\t\toBounds    = oFitChild.getBounds();\n\t\tnTotalSize = oContainerNode[sClienMeasure] - (oPadding[sAttrBefore] + oPadding[sAttrAfter]);\n\n\t\tif (this.shouldReverse()) {\n\t\t\toFirstChild  = this.getFirstChild();\n\t\t\tnAfterOffset = nTotalSize - (oBounds[sAttrBefore] + oBounds[sMeasureName]);\n\n\t\t\tvar nMarginBeforeFirstChild = dom.getComputedBoxValue(oFirstChild.hasNode(), 'margin', sAttrBefore) || 0;\n\n\t\t\tif (oFirstChild == oFitChild) {\n\t\t\t\tnBeforeOffset = nMarginBeforeFirstChild;\n\t\t\t} else {\n\t\t\t\tvar oFirstChildBounds      = oFirstChild.getBounds(),\n\t\t\t\t\tnSpaceBeforeFirstChild = oFirstChildBounds[sAttrBefore];\n\n\t\t\t\tnBeforeOffset = oBounds[sAttrBefore] + nMarginBeforeFirstChild - nSpaceBeforeFirstChild;\n\t\t\t}\n\t\t} else {\n\t\t\toLastChild    = this.getLastChild();\n\t\t\tnBeforeOffset = oBounds[sAttrBefore] - (oPadding[sAttrBefore] || 0);\n\n\t\t\tvar nMarginAfterLastChild = dom.getComputedBoxValue(oLastChild.hasNode(), 'margin', sAttrAfter) || 0;\n\n\t\t\tif (oLastChild == oFitChild) {\n\t\t\t\tnAfterOffset = nMarginAfterLastChild;\n\t\t\t} else {\n\t\t\t\tvar oLastChildBounds = oLastChild.getBounds(),\n\t\t\t\t\tnFitChildEnd     = oBounds[sAttrBefore] + oBounds[sMeasureName],\n\t\t\t\t\tnLastChildEnd    = oLastChildBounds[sAttrBefore] + oLastChildBounds[sMeasureName] +  nMarginAfterLastChild;\n\n\t\t\t\tnAfterOffset = nLastChildEnd - nFitChildEnd;\n\t\t\t}\n\t\t}\n\n\t\tnFitSize = nTotalSize - (nBeforeOffset + nAfterOffset);\n\t\toFitChild.applyStyle(sMeasureName, nFitSize + 'px');\n\t},\n\n\t/**\n\t* Assigns any static layout properties not dependent on changes to the\n\t* rendered component or container sizes, etc.\n\t* \n\t* @public\n\t*/\n\tflow: function() {\n\t\tif (this.useFlex) {\n\t\t\tvar i,\n\t\t\t\tchildren = this.container.children,\n\t\t\t\tchild;\n\t\t\tthis.container.addClass(this.flexLayoutClass);\n\t\t\tthis.container.addRemoveClass('nostretch', this.container.noStretch);\n\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\tchild = children[i];\n\t\t\t\tchild.addClass('enyo-flex-item');\n\t\t\t\tchild.addRemoveClass('flex', child.fit);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Updates the layout to reflect any changes made to the layout container or\n\t* the contained components.\n\t*\n\t* @public\n\t*/\n\treflow: function() {\n\t\tif (!this.useFlex) {\n\t\t\tif (this.orient == 'h') {\n\t\t\t\tthis._reflow('width', 'clientWidth', 'left', 'right');\n\t\t\t} else {\n\t\t\t\tthis._reflow('height', 'clientHeight', 'top', 'bottom');\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t* @lends  enyo.FittableLayout.prototype\n\t*/\n\tstatics: {\n\t\t/**\n\t\t* Indicates whether flexbox optimization can be used.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default  false\n\t\t* @private\n\t\t*/\n\t\tflexAvailable: flexAvailable\n\t}\n});\n\n/**\n* {@link enyo.FittableColumnsLayout} provides a container in which items are laid\n* out in a set of vertical columns, with most of the items having natural\n* size, but one expanding to fill the remaining space. The one that expands is\n* labeled with the attribute `fit: true`.\n*\n* `enyo.FittableColumnsLayout` is meant to be used as a value for the\n* `layoutKind` property of other kinds. `layoutKind` provides a way to add\n* layout behavior in a pluggable fashion while retaining the ability to use a\n* specific base kind.\n*\n* For more information, see the documentation on\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\n* Enyo Developer Guide.\n*\n* @class  enyo.FittableColumnsLayout\n* @extends enyo.FittableLayout\n* @public\n*/\nFittableLayout.Columns = kind(/** @lends  enyo.FittableColumnsLayout.prototype */{\n\tname        : 'enyo.FittableColumnsLayout',\n\tkind        : FittableLayout,\n\torient      : 'h',\n\tfitLayoutClass : 'enyo-fittable-columns-layout',\n\tflexLayoutClass: 'enyo-flex-container columns'\n});\n\n\n/**\n* {@link enyo.FittableRowsLayout} provides a container in which items are laid out\n* in a set of horizontal rows, with most of the items having natural size, but\n* one expanding to fill the remaining space. The one that expands is labeled\n* with the attribute `fit: true`.\n*\n* `enyo.FittableRowsLayout` is meant to be used as a value for the\n* `layoutKind` property of other kinds. `layoutKind` provides a way to add\n* layout behavior in a pluggable fashion while retaining the ability to use a\n* specific base kind.\n*\n* For more information, see the documentation on\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\n* Enyo Developer Guide.\n*\n* @class  enyo.FittableRowsLayout\n* @extends enyo.FittableLayout\n* @public\n*/\nFittableLayout.Rows = kind(\n\t/** @lends enyo.FittableRowsLayout.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname        : 'enyo.FittableRowsLayout',\n\n\t/**\n\t* @private\n\t*/\n\tkind        : FittableLayout,\n\n\t/**\n\t* Layout CSS class used to fit rows.\n\t*\n\t* @type {String}\n\t* @default 'enyo-fittable-rows-layout'\n\t* @public\n\t*/\n\tfitLayoutClass : 'enyo-fittable-rows-layout',\n\n\t/**\n\t* The orientation of the layout.\n\t*\n\t* @type {String}\n\t* @default 'v'\n\t* @public\n\t*/\n\torient      : 'v',\n\n\t/**\n\t* @private\n\t*/\n\tflexLayoutClass: 'enyo-flex-container rows'\n});","var\n\tkind = require('../../enyo/lib/kind'),\n\tdom = require('../../enyo/lib/dom'),\n\tutils = require('../../enyo/lib/utils'),\n\tControl = require('../../enyo/lib/Control'),\n\tHTMLStringDelegate = require('../../enyo/lib/HTMLStringDelegate'),\n\tSelection = require('../../enyo/lib/Selection');\n\nvar FlyweightRepeaterDelegate = Object.create(HTMLStringDelegate);\n\nFlyweightRepeaterDelegate.generateInnerHtml = function (control) {\n\tvar h = '';\n\tcontrol.index = null;\n\t// note: can supply a rowOffset\n\t// and indicate if rows should be rendered top down or bottomUp\n\tfor (var i=0, r=0; i<control.count; i++) {\n\t\tr = control.rowOffset + (this.bottomUp ? control.count - i-1 : i);\n\t\tcontrol.setupItem(r);\n\t\tcontrol.$.client.setAttribute('data-enyo-index', r);\n\t\tif (control.orient == 'h') {\n\t\t\tcontrol.$.client.setStyle('display:inline-block;');\n\t\t}\n\t\th += HTMLStringDelegate.generateChildHtml(control);\n\t\tcontrol.$.client.teardownRender();\n\t}\n\treturn h;\n};\n\n/**\n* Fires once per row at render time.\n*\n* @event enyo.FlyweightRepeater#onSetupItem\n* @type {Object}\n* @property {Number} index     - The index of the row being rendered.\n* @property {Boolean} selected - `true` if the row is selected; otherwise, `false`.\n* @public\n*/\n\n/**\n* Fires after an individual row has been rendered.\n*\n* @event enyo.FlyweightRepeater#onRenderRow\n* @type {Object}\n* @property {Number} rowIndex - The index of the row that was rendered.\n* @public\n*/\n\n/**\n* {@link enyo.FlyweightRepeater} is a control that displays a repeating list of\n* rows, suitable for displaying medium-sized lists (up to ~100 items). A\n* flyweight strategy is employed to render one set of row controls, as needed,\n* for as many rows as are contained in the repeater.\n*\n* The FlyweightRepeater's `components` block contains the controls to be used\n* for a single row. This set of controls will be rendered for each row. You\n* may customize row rendering by handling the\n* [onSetupItem]{@link enyo.FlyweightRepeater#onSetupItem} event.\n*\n* The controls inside a FlyweightRepeater are non-interactive. This means that\n* calling methods that would normally cause rendering to occur (e.g.,\n* `set('content', <value>)`) will not do so. However, you may force a row to\n* render by calling [renderRow()]{@link enyo.FlyweightRepeater#renderRow}.\n*\n* In addition, you may force a row to be temporarily interactive by calling\n* [prepareRow()]{@link enyo.FlyweightRepeater#prepareRow}. Call\n* [lockRow()]{@link enyo.FlyweightRepeater#lockRow} when the interaction\n* is complete.\n*\n* For more information, see the documentation on\n* [Lists]{@linkplain $dev-guide/building-apps/layout/lists.html} in the\n* Enyo Developer Guide.\n*\n* @ui\n* @class enyo.FlyweightRepeater\n* @extends enyo.Control\n* @public\n*/\nvar FlyweightRepeater = module.exports = kind(\n\t/** @lends enyo.FlyweightRepeater.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.FlyweightRepeater',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @lends enyo.FlyweightRepeater.prototype\n\t* @private\n\t*/\n\tpublished: {\n\t\t/**\n\t\t * The number of rows to render.\n\t\t *\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @public\n\t\t */\n\t\tcount: 0,\n\n\t\t/**\n\t\t* If `true`, the selection mechanism is disabled. Tap events are still\n\t\t* sent, but items won't be automatically re-rendered when tapped.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tnoSelect: false,\n\n\t\t/**\n\t\t * If `true`, multiple selection is allowed.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @public\n\t\t */\n\t\tmultiSelect: false,\n\n\t\t/**\n\t\t * If `true`, the selected item will toggle.\n\t\t *\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @public\n\t\t */\n\t\ttoggleSelected: false,\n\n\t\t/**\n\t\t* Used to specify CSS classes for the repeater's wrapper component (client).\n\t\t* Input is identical to that of {@link enyo.Control#setClasses}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tclientClasses: '',\n\n\t\t/**\n\t\t* Used to specify custom styling for the repeater's wrapper component\n\t\t* (client). Input is identical to that of {@link enyo.Control#setStyle}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tclientStyle: '',\n\n\t\t/**\n\t\t* Numerical offset applied to row number during row generation. Allows items\n\t\t* to have natural indices instead of `0`-based ones. This value must be\n\t\t* positive, as row number `-1` is used to represent undefined rows in the\n\t\t* event system.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\trowOffset: 0,\n\n\t\t/**\n\t\t* Direction in which items will be laid out. Valid values are `'v'` for\n\t\t* vertical or `'h'` for horizontal.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'h'\n\t\t* @public\n\t\t*/\n\t\torient: 'v'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonSetupItem: '',\n\t\tonRenderRow: ''\n\t},\n\n\t/**\n\t* Setting cachePoint: true ensures that events from the repeater's subtree will\n\t* always bubble up through the repeater, allowing the events to be decorated with repeater-\n\t* related metadata and references.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @private\n\t*/\n\tcachePoint: true,\n\n\t/**\n\t* Design-time attribute indicating whether row indices run\n\t* from `0` to [`count`]{@link enyo.FlyweightRepeater#count}`-1` `(false)` or\n\t* from [`count`]{@link enyo.FlyweightRepeater#count}`-1` to `0` `(true)`.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tbottomUp: false,\n\n\t/**\n\t* @private\n\t*/\n\trenderDelegate: FlyweightRepeaterDelegate,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{kind: Selection, onSelect: 'selectDeselect', onDeselect: 'selectDeselect'},\n\t\t{name: 'client'}\n\t],\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.noSelectChanged();\n\t\tthis.multiSelectChanged();\n\t\tthis.clientClassesChanged();\n\t\tthis.clientStyleChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnoSelectChanged: function () {\n\t\tif (this.noSelect) {\n\t\t\tthis.$.selection.clear();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmultiSelectChanged: function () {\n\t\tthis.$.selection.setMulti(this.multiSelect);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclientClassesChanged: function () {\n\t\tthis.$.client.setClasses(this.clientClasses);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclientStyleChanged: function () {\n\t\tthis.$.client.setStyle(this.clientStyle);\n\t},\n\n\t/**\n\t* @fires enyo.FlyweightRepeater#onSetupItem\n\t* @private\n\t*/\n\tsetupItem: function (index) {\n\t\tthis.doSetupItem({index: index, selected: this.isSelected(index)});\n\t},\n\n\t/**\n\t* Renders the list.\n\t*\n\t* @private\n\t*/\n\tgenerateChildHtml: function () {\n\t\treturn this.renderDelegate.generateInnerHtml(this);\n\t},\n\n\t/**\n\t* @todo add link to preview.js\n\t* @private\n\t*/\n\tpreviewDomEvent: function (event) {\n\t\tvar i = this.index = this.rowForEvent(event);\n\t\tevent.rowIndex = event.index = i;\n\t\tevent.flyweight = this;\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdecorateEvent: function (eventName, event, sender) {\n\t\t// decorate event with index found via dom iff event does not already contain an index.\n\t\tvar i = (event && event.index != null) ? event.index : this.index;\n\t\tif (event && i != null) {\n\t\t\tevent.index = i;\n\t\t\tevent.flyweight = this;\n\t\t}\n\t\tControl.prototype.decorateEvent.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function (sender, event) {\n\t\t// ignore taps if selecting is disabled or if they don't target a row\n\t\tif (this.noSelect || event.index === -1) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.toggleSelected) {\n\t\t\tthis.$.selection.toggle(event.index);\n\t\t} else {\n\t\t\tthis.$.selection.select(event.index);\n\t\t}\n\t},\n\n\t/**\n\t* Handler for selection and deselection.\n\t*\n\t* @private\n\t*/\n\tselectDeselect: function (sender, event) {\n\t\tthis.renderRow(event.key);\n\t},\n\n\t/**\n\t* Returns the repeater's [selection]{@link enyo.Selection} component.\n\t*\n\t* @return {enyo.Selection} The repeater's selection component.\n\t* @public\n\t*/\n\tgetSelection: function () {\n\t\treturn this.$.selection;\n\t},\n\n\t/**\n\t* Gets the selection state for the given row index.\n\t*\n\t* @return {Boolean} `true` if the row is currently selected; otherwise, `false`.\n\t* @public\n\t*/\n\tisSelected: function (index) {\n\t\treturn this.getSelection().isSelected(index);\n\t},\n\n\t/**\n\t* Renders the row with the specified index.\n\t*\n\t* @param {Number} index - The index of the row to render.\n\t* @fires enyo.FlyweightRepeater#onRenderRow\n\t* @public\n\t*/\n\trenderRow: function (index) {\n\t\t// do nothing if index is out-of-range\n\t\tif (index < this.rowOffset || index >= this.count + this.rowOffset) {\n\t\t\treturn;\n\t\t}\n\t\t//this.index = null;\n\t\t// always call the setupItem callback, as we may rely on the post-render state\n\t\tthis.setupItem(index);\n\t\tvar node = this.fetchRowNode(index);\n\t\tif (node) {\n\t\t\t// hack to keep this working...\n\t\t\tvar delegate = HTMLStringDelegate;\n\n\t\t\tdom.setInnerHtml(node, delegate.generateChildHtml(this.$.client));\n\t\t\tthis.$.client.teardownChildren();\n\t\t\tthis.doRenderRow({rowIndex: index});\n\t\t}\n\t},\n\n\t/**\n\t* Fetches the DOM node for the given row index.\n\t*\n\t* @param {Number} index - The index of the row whose DOM node is to be fetched.\n\t* @return {Node} The DOM node for the specified row.\n\t* @public\n\t*/\n\tfetchRowNode: function (index) {\n\t\tif (this.hasNode()) {\n\t\t\treturn this.node.querySelector('[data-enyo-index=\"' + index + '\"]');\n\t\t}\n\t},\n\n\t/**\n\t* Fetches the row number corresponding to the target of a given event.\n\t*\n\t* @param {Object} event - Event object.\n\t* @return {Number} The index of the row corresponding to the event's target.\n\t* @public\n\t*/\n\trowForEvent: function (event) {\n\t\tif (!this.hasNode()) {\n\t\t\treturn -1;\n\t\t}\n\t\tvar n = event.target;\n\t\twhile (n && n !== this.node) {\n\t\t\tvar i = n.getAttribute && n.getAttribute('data-enyo-index');\n\t\t\tif (i !== null) {\n\t\t\t\treturn Number(i);\n\t\t\t}\n\t\t\tn = n.parentNode;\n\t\t}\n\t\treturn -1;\n\t},\n\n\t/**\n\t* Prepares the specified row such that changes made to the controls inside\n\t* the repeater will be rendered for the row.\n\t*\n\t* @param {Number} index - The index of the row to be prepared.\n\t* @public\n\t*/\n\tprepareRow: function (index) {\n\t\t// do nothing if index is out-of-range\n\t\tif (index < this.rowOffset || index >= this.count + this.rowOffset) {\n\t\t\treturn;\n\t\t}\n\t\t// update row internals to match model\n\t\tthis.setupItem(index);\n\t\tvar n = this.fetchRowNode(index);\n\t\tFlyweightRepeater.claimNode(this.$.client, n);\n\t},\n\n\t/**\n\t* Prevents rendering of changes made to controls inside the repeater.\n\t*\n\t* @public\n\t*/\n\tlockRow: function () {\n\t\tthis.$.client.teardownChildren();\n\t},\n\n\t/**\n\t* Prepares the specified row such that changes made to the controls in the\n\t* repeater will be rendered in the row; then performs the function `func`\n\t* and, finally, locks the row.\n\t*\n\t* @param {Number} index   - The index of the row to be acted upon.\n\t* @param {Function} func  - The function to perform.\n\t* @param {Object} context - The context to which `func` is bound.\n\t* @private\n\t*/\n\tperformOnRow: function (index, func, context) {\n\t\t// do nothing if index is out-of-range\n\t\tif (index < this.rowOffset || index >= this.count + this.rowOffset) {\n\t\t\treturn;\n\t\t}\n\t\tif (func) {\n\t\t\tthis.prepareRow(index);\n\t\t\tutils.call(context || null, func);\n\t\t\tthis.lockRow();\n\t\t}\n\t},\n\n\t/**\n\t* @lends enyo.FlyweightRepeater\n\t* @private\n\t*/\n\tstatics: {\n\t\t/**\n\t\t* Associates a flyweight rendered control (`control`) with a\n\t\t* rendering context specified by `node`.\n\t\t*\n\t\t* @param {enyo.Control} control - A flyweight-rendered control.\n\t\t* @param {Node} node - The DOM node to be associated with `control`.\n\t\t* @public\n\t\t*/\n\t\tclaimNode: function (control, node) {\n\t\t\tvar n;\n\t\t\tif (node) {\n\t\t\t\tif (node.id !== control.id) {\n\t\t\t\t\tn = node.querySelector('#' + control.id);\n\t\t\t\t} else {\n\t\t\t\t\t// node is already the right node, so just use it\n\t\t\t\t\tn = node;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// FIXME: consider controls generated if we found a node or tag: null, the later so can teardown render\n\t\t\tcontrol.generated = Boolean(n || !control.tag);\n\t\t\tcontrol.node = n;\n\t\t\tif (control.node) {\n\t\t\t\tcontrol.rendered();\n\t\t\t} else {\n\t\t\t\t//enyo.log('Failed to find node for',  control.id, control.generated);\n\t\t\t}\n\t\t\t// update control's class cache based on the node contents\n\t\t\tfor (var i=0, c$=control.children, c; (c=c$[i]); i++) {\n\t\t\t\tthis.claimNode(c, node);\n\t\t\t}\n\t\t}\n\t}\n});","var\n    dispatcher = require('../../enyo/lib/dispatcher'),\n    dom = require('../../enyo/lib/dom'),\n    utils = require('../../enyo/lib/utils'),\n    Control = require('../../enyo/lib/Control');\n\n/**\n* {@link enyo.Spotlight.Util} provides a collection of utility methods for use\n* with Spotlight.\n*\n* @typedef {Object} enyo.Spotlight.Util definition\n*\n* @class enyo.Spotlight.Util\n* @public\n*/\nvar Util = module.exports = function (Spotlight) {\n\n    /**\n    * Attempts to dispatch all Spotlight events through the low-level dispatcher\n    * or directly through the originating control.\n    *\n    * @param  {String} sEvent - The current event to validate.\n    * @param  {Object} oInData - The callback to be executed.\n    * @param  {Object} oControl - The dispatch originator.\n    * @public\n    */\n    this.dispatchEvent = function(sEvent, oInData, oControl) {\n        var oData;\n\n        if (!oControl || oControl.destroyed) {\n            return;\n        }\n\n        if (Spotlight.isFrozen()) {\n            if (sEvent == 'onSpotlightBlur') {\n                return;\n            }\n            oControl = Spotlight.getCurrent();\n        }\n\n        if (oInData) {\n            oData = utils.clone(oInData);\n        } else {\n            oData = {};\n        }\n\n        oData.type = sEvent;\n        oData.originator = oControl;\n        oData.originator.timestamp = oData.timeStamp;\n        oData.target = oControl.hasNode();\n        oData.customEvent = (oData.customEvent === undefined) ? true : oData.customEvent;\n\n        if (oData.target) {\n            // We attempt to dispatch all spotlight events through the low-level dispatcher,\n            // so that they can be filtered through features like the modal/capture feature\n            return dispatcher.dispatch(oData);\n        } else {\n            // However, if a control has been teardownRendered (and has no node) we still\n            // need to ensure it gets lifecycle events like onSpotlightBlur, so we dispatch\n            // directly to the control\n            return dispatcher.dispatchBubble(oData, oControl);\n        }\n    };\n\n    /**\n    * Attaches event hook to capture events coming from within the container.\n    *\n    * @param  {Object} oControl - The dispatch originator.\n    * @param  {Function} fHandler - The event handler function.\n    * @public\n    */\n    this.interceptEvents = function(oControl, fHandler) {\n        var f = oControl.dispatchEvent;\n\n        oControl.dispatchEvent = function(sEventName, oEvent, oEventSender) {\n            // If handler returns true - prevent default\n            if (!oEvent.delegate && fHandler(oControl, oEvent)) {\n                oEvent.type = null;\n                return true;\n            } else {\n                // If handler returns false - call original dispatcher and allow bubbling\n                return f.apply(oControl, [sEventName, oEvent, oEventSender]);\n            }\n        };\n    };\n\n    /**\n    * Determines whether one control is a child of another control.\n    *\n    * @param  {Object} oParent - The parent control.\n    * @param  {Object} oChild - The potential child control.\n    * @return {Boolean} `true` if `oChild` is a child of `oParent`; otherwise,\n    * `false`.\n    * @public\n    */\n    this.isChild = function(oParent, oChild) {\n        if (!oParent) {\n            return false;\n        }\n        if (!oChild) {\n            return false;\n        }\n\n        while (oChild.parent) {\n            oChild = oChild.parent;\n            if (oChild === oParent) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n    * Preserved for backward compatibility; users should instead call\n    * [getAbsoluteBounds()]{@link enyo.Control#getAbsoluteBounds} on the\n    * {@link enyo.Control} instance (or\n    * [enyo.dom.getAbsoluteBounds()]{@link enyo.dom#getAbsoluteBounds} for the\n    * node).\n    *\n    * @param  {Object} oControl - The control to query for bounds.\n    * @public\n    */\n    this.getAbsoluteBounds = function(oControl) {\n        var node = oControl instanceof Control ? oControl.hasNode() : oControl;\n        return dom.getAbsoluteBounds(node);\n    };\n\n    /**\n    * Determines whether a control has a given CSS class applied.\n    *\n    * @param  {enyo.Control} o - The control to query.\n    * @param  {String} s - The name of the CSS class.\n    * @return {Boolean} `true` if the class is applied to the control; otherwise, `false`.\n    * @public\n    */\n    this.hasClass = function(o, s) {\n        if (!o || !o.className) {\n            return;\n        }\n        return (' ' + o.className + ' ').indexOf(' ' + s + ' ') >= 0;\n    };\n\n    /**\n    * Applies a CSS class to a control.\n    *\n    * @param  {enyo.Control} o - The control to be styled.\n    * @param  {String} s - The name of the CSS class to apply.\n    * @public\n    */\n    this.addClass = function(o, s) {\n        if (o && !this.hasClass(o, s)) {\n            var ss = o.className;\n            o.className = (ss + (ss ? ' ' : '') + s);\n        }\n    };\n\n    /**\n    * Removes a CSS class from a control.\n    *\n    * @param  {Object} o - The control from which to remove the class.\n    * @param  {String} s - The name of the CSS class name to remove.\n    * @public\n    */\n    this.removeClass = function(o, s) {\n        if (o && this.hasClass(o, s)) {\n            var ss = o.className;\n            o.className = (' ' + ss + ' ').replace(' ' + s + ' ', ' ').slice(1, -1);\n        }\n    };\n\n    /**\n    * Queries a string for the presence of a given suffix.\n    *\n    * @param  {String} s - The string to query.\n    * @param  {String} sSuffix - The suffix to look for.\n    * @return {Boolean} `true` if the string ends in the specified suffix;\n    * otherwise, `false`.\n    * @public\n    */\n    this.stringEndsWith = function(s, sSuffix) {\n        return s.indexOf(sSuffix, s.length - sSuffix.length) !== -1;\n    };\n\n    /**\n    * Translates a direction to an appropriate Spotlight event.\n    *\n    * @param  {String} sDirection - The direction of acceleration.\n    * @return {String} The name of the corresponding Spotlight event.\n    * @public\n    */\n    this.directionToEvent = function(sDirection) {\n        return 'onSpotlight' + sDirection.charAt(0).toUpperCase() + sDirection.substr(1).toLowerCase();\n    };\n\n    /**\n    * Gets the default control to move to in a particular direction.\n    *\n    * @param  {String} sDirection - The direction of movement.\n    * @param  {Object} oControl - The control from which movement will occur.\n    * @public\n    */\n    this.getDefaultDirectionControl = function(sDirection, oControl) {\n        var sProperty = 'defaultSpotlight' + sDirection.charAt(0).toUpperCase() + sDirection.substr(1).toLowerCase(),\n            oNeighbor;\n        if (typeof oControl[sProperty] == 'string') {\n            oNeighbor = oControl.owner.$[oControl[sProperty]];\n            if (typeof oNeighbor != 'undefined') {\n                return oNeighbor;\n            }\n        }\n        return null;\n    };\n\n    /**\n    * Determines whether the given event is a simulated click.\n    * We use the same check as in dispatcher to know when it's simulated: looking for x/y == 0.\n    *\n    * @param  {Object} oEvent - The current event.\n    * @return {Boolean} `true` if event is a simulated click; otherwise, `false`.\n    * @public\n    */\n    this.isSimulatedClick = function(oEvent) {\n        return (\n            oEvent.clientX === 0 && oEvent.clientY === 0 && !oEvent.detail &&\n            (oEvent.type == 'click' || oEvent.type == 'tap')\n        );\n    };\n};\n\n// use faster classList interface if it exists\nif (document.createElement('div').classList) {\n    Util.hasClass = function(o, s) {\n        if (o) {\n            return o.classList.contains(s);\n        }\n    };\n    Util.addClass = function(o, s) {\n        if (o) {\n            return o.classList.add(s);\n        }\n    };\n    Util.removeClass = function(o, s) {\n        if (o) {\n            return o.classList.remove(s);\n        }\n    };\n}\n","'use strict';\n\nvar\n\tplatform = require('../enyo/lib/platform'),\n\tdispatcher = require('../enyo/lib/dispatcher'),\n\tdrag = require('../enyo/lib/drag');\n\nexports = module.exports = require('./lib/options');\nexports.version = '2.6.0-pre';\n\n// Override the default holdpulse config to account for greater delays between keydown and keyup\n// events in Moonstone with certain input devices.\ndrag.configureHoldPulse({\n\tfrequency: 200,\n\tevents: [{name: 'hold', time: 400}],\n\tresume: false,\n\tmoveTolerance: 16,\n\tendHold: 'onMove'\n});\n\n/**\n* Registers key mappings for webOS-specific device keys related to media control.\n*\n* @private\n*/\nif (platform.webos >= 4) {\n\t// Table of default keyCode mappings for webOS device\n\tdispatcher.registerKeyMap({\n\t\t415 : 'play',\n\t\t413 : 'stop',\n\t\t19  : 'pause',\n\t\t412 : 'rewind',\n\t\t417 : 'fastforward',\n\t\t461 : 'back'\n\t});\n}\n\n// ensure that these are registered\nrequire('./lib/resolution');","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils');\nvar\n\tDataRepeater = require('../DataRepeater'),\n\tEventEmitter = require('../EventEmitter'),\n\tVerticalDelegate = require('../VerticalDelegate'),\n\tHorizontalDelegate = require('../HorizontalDelegate');\n\n/**\n* The {@glossary event} [object]{@glossary Object} that is provided when the\n* [paging]{@link enyo.DataList#paging} event is fired.\n*\n* @typedef {Object} enyo.DataList~PagingEvent\n* @property {Number} start - The lowest active index in the dataset.\n* @property {Number} end - The highest active index.\n* @property {String} action - The action that triggered the paging, either `'scroll'`\n* or `'reset'`.\n*/\n\n/**\n* Fires each time data is paged, on a per-page basis.\n*\n* @event enyo.DataList#paging\n* @type {Object}\n* @property {Object} sender - A reference to the {@link enyo.DataList}.\n* @property {String} nom - The name of the {@glossary event}.\n* @property {enyo.DataList~PagingEvent} event - A [hash]{@glossary Object} with properties\n*\tspecific to this event.\n* @public\n*/\n\n/**\n* When this property is specified, we force the static usage of this value instead of\n* dynamically calculating the number of controls per page based upon the viewport size.\n*\n* @name enyo.DataList#controlsPerPage\n* @type {Number}\n* @default undefined\n* @public\n*/\n\n/**\n* {@link enyo.DataList} is an {@link enyo.DataRepeater} that employs a paginated\n* scrolling scheme to enhance performance with larger datasets. The data is provided\n* to the DataList by an {@link enyo.Collection} set as the value of its\n* `collection` property and accessed by calling [data()]{@link enyo.DataRepeater#data}.\n*\n* Note that care should be taken when deciding how to lay out the list's children. When\n* there are a large number of child [elements]{@link enyo.Control}, the layout process\n* can be taxing and non-performant for the browser. Avoid dynamically-updated\n* [layouts]{@glossary layout} that require lots of calculations each time the data in a\n* view is updated. Try to use CSS whenever possible.\n*\n* While paging through data, `enyo.DataList` emits the\n* [paging]{@link enyo.DataList#paging} event, which allows you to make updates as\n* necessary, on a per-page basis. You may register for this event by calling\n* [addListener()]{@link enyo.EventEmitter#addListener} and specifying the event,\n* along with a callback method.\n*\n* @class enyo.DataList\n* @extends enyo.DataRepeater\n* @ui\n* @public\n*/\nvar DataList = module.exports = kind(\n\t/** @lends enyo.DataList.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.DataList',\n\n\t/**\n\t* @private\n\t*/\n\tkind: DataRepeater,\n\n\t/**\n\t* {@link enyo.DataList} places its rows inside of a [scroller]{@link enyo.Scroller}.\n\t* Any configurable options of {@link enyo.Scroller} may be placed in the\n\t* `scrollerOptions` [hash]{@glossary Object}; their values will be set on the\n\t* DataList's scroller accordingly. If no options are specified, the default\n\t* `enyo.Scroller` settings will be used.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tscrollerOptions: null,\n\n\t/**\n\t* The paging orientation. Valid values are `'vertical'` and `'horizontal'`. This property\n\t* will be mapped to a particular strategy governing how the list will flow.\n\t*\n\t* @type {String}\n\t* @default 'vertical'\n\t* @public\n\t*/\n\torientation: 'vertical',\n\n\t/**\n\t* While page sizing is typically handled automatically, some platforms may benefit from\n\t* having a larger or smaller value set for this property. If a number is specified, it\n\t* will be multiplied by the available viewport size (depending on\n\t* [orientation]{@link enyo.DataList#orientation}) to determine the minimum page size.\n\t* The page size is directly related to the number of [controls]{@link enyo.Control} that\n\t* are generated at any given time (and that subsequently need updating) whenever paging\n\t* occurs. This value may be any rational number greater than `1.2`.\n\t*\n\t* @type {Number}\n\t* @default 1.2\n\t* @public\n\t*/\n\tpageSizeMultiplier: null,\n\n\t/**\n\t* It is helpful for performance if the [DataList]{@link enyo.DataList} doesn't need to\n\t* guess the size of the children. In cases where all children are a fixed height (or\n\t* width, depending on the [orientation]{@link enyo.DataList#orientation} of the list),\n\t* you may explicitly define the size of the fixed dimension and thus allow the list to\n\t* bypass much of its guesswork. This value is a number that will be interpreted in\n\t* pixels and applied to the primary size depending on the list's `orientation` (i.e.,\n\t* it will be applied to `height` when the `orientation` is `'vertical'`, and to `width`\n\t* when the `orientation` is `'horizontal'`). Note that the list does not apply this\n\t* value to the children via CSS.\n\t*\n\t* @type {Number}\n\t* @default null\n\t* @public\n\t*/\n\tfixedChildSize: null,\n\n\t/**\n\t* To disable the default smoothing-transitions (for supported platforms), set this flag to\n\t* `false`.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tallowTransitions: true,\n\n\t/**\n\t* Because some systems perform poorly on initialization, there is a delay when we\n\t* attempt to actually draw the contents of a [DataList]{@link enyo.DataList}. Usually,\n\t* you will not need to adjust this value, which is expressed in milliseconds. If\n\t* `renderDelay` is `null`, there will be no delay and rendering will take place\n\t* synchronously; if `renderDelay` is set to `0`, rendering will be done\n\t* asynchronously.\n\t*\n\t* @type {Number}\n\t* @default 250\n\t* @public\n\t*/\n\trenderDelay: 250,\n\n\t/**\n\t* Percentage (as a number between 0 and 1) of a control that must be visible to be counted\n\t* by {@link enyo.DataList#getVisibleControls}.\n\t*\n\t* @type {Number}\n\t* @default 0.6\n\t* @public\n\t*/\n\tvisibleThreshold: 0.6,\n\n\t/**\n\t* This is an inclusive list of all methods that can be queued,\n\t* and the prefered order they should execute, if a method is\n\t* not listed, it will NOT be called ever.\n\t*\n\t* @private\n\t*/\n\t_absoluteShowingPriority:['reset', 'refresh', 'finish rendering', 'scrollToIndex', 'didResize' , 'select'],\n\n\t/**\n\t* Completely resets the current [list]{@link enyo.DataList} such that it scrolls to the top\n\t* of the scrollable region and regenerates all of its children. This is typically necessary\n\t* only on initialization or if the entire dataset has been swapped out.\n\t*\n\t* @public\n\t*/\n\treset: function () {\n\t\tif (this.get('absoluteShowing')) {\n\t\t\t// we can only reset if we've already rendered\n\t\t\tif (this.generated && this.$.scroller.generated) {\n\t\t\t\tthis.delegate.reset(this);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._addToShowingQueue('reset', this.reset);\n\t\t}\n\t},\n\n\t/**\n\t* Unlike [reset()]{@link enyo.DataList#reset}, which tears down and regenerates the entire\n\t* [list]{@link enyo.DataList}, this method attempts to refresh the pages as they are against\n\t* the current dataset. This is much cheaper to call than `reset()`, but is primarily used\n\t* internally.\n\t*\n\t* @public\n\t*/\n\trefresh: function (c, e) {\n\t\tif (this.get('absoluteShowing')) {\n\t\t\tif (this.hasRendered) {\n\t\t\t\tthis.delegate.refresh(this);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._addToShowingQueue('refresh', this.refresh);\n\t\t}\n\t},\n\n\t/**\n\t* Pass in an integer within the bounds of the [list's]{@link enyo.DataList}\n\t* [collection]{@link enyo.DataRepeater#data} to scroll to the position of that\n\t* index in the list.\n\t*\n\t* @param {Number} idx - The index in the [list's]{@link enyo.DataList}\n\t*\t[collection]{@link enyo.DataRepeater#data} to scroll to.\n\t* @public\n\t*/\n\tscrollToIndex: function (idx) {\n\t\tvar len = this.collection? this.collection.length: 0;\n\t\tif (idx >= 0 && idx < len) {\n\t\t\tif (this.get('absoluteShowing')) {\n\t\t\t\tthis.delegate.scrollToIndex(this, idx);\n\t\t\t} else {\n\t\t\t\tthis._addToShowingQueue('scrollToIndex', function () {\n\t\t\t\t\tthis.delegate.scrollToIndex(this, idx);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Returns the `start` and `end` indices of the visible controls. Partially visible controls\n\t* are included if the amount visible exceeds the {@link enyo.DataList#visibleThreshold}.\n\t*\n\t* This operation is *layout intesive* and should not be called during scrolling.\n\t*\n\t* @return {Object}\n\t* @public\n\t*/\n\tgetVisibleControlRange: function () {\n\t\treturn this.delegate.getVisibleControlRange(this);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.metrics       = {};\n\t\t\tthis.metrics.pages = {};\n\t\t\tif (this.pageSizeMultiplier !== null && !isNaN(this.pageSizeMultiplier)) {\n\t\t\t\tthis.pageSizeMultiplier = Math.max(1.2, this.pageSizeMultiplier);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// if we can, we use transitions\n\t\t\tthis.allowTransitionsChanged();\n\t\t\t// map the selected strategy to the correct delegate for operations\n\t\t\t// on the list, default to _vertical_ if none is provided or if it\n\t\t\t// could not be found\n\t\t\tthis.delegate = this.ctor.delegates[this.orientation] || this.base.delegates.vertical;\n\t\t\t// if the delegate has an initialization routine execute it now before the\n\t\t\t// container and children are rendered\n\t\t\tif (this.delegate.initList) {\n\t\t\t\tthis.delegate.initList(this);\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t\t// initialize the _pages_ array and add the pages to it\n\t\t\tthis.pages = [this.$.page1, this.$.page2];\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trender: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.$.scroller.canGenerate = false;\n\t\t\tthis.$.scroller.teardownRender();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Attempts to perform initialization. There are only a few basic startup paths, but it's\n\t* important to be aware of what they are:\n\t*\n\t* - The view is rendered, it has a collection, and the collection has data.\n\t* - The view is rendered, it has a collection with no data, and data is added\n\t\tlater.\n\t* - The view is rendered, but has no collection.\n\t*\n\t* Once the [list]{@link enyo.DataList} itself is rendered, we check to see if we have a\n\t* [collection]{@link enyo.Collection}; if so, do we have any data to start rendering the\n\t* rest of the list? Ultimately, the implementation decisions are decided by the\n\t* [delegate]{@glossary delegate} strategy.\n\t*\n\t* @private\n\t*/\n\trendered: function () {\n\t\t// Initialize / sync the internal absoluteShowing property when we're rendered\n\t\tthis.absoluteShowing = this.getAbsoluteShowing(true);\n\t\t// actually rendering a datalist can be taxing for some systems so\n\t\t// we arbitrarily delay showing for a fixed amount of time unless delay is\n\t\t// null in which case it will be executed immediately\n\t\tvar finishRendering = function () {\n\t\t\tif (this.get('absoluteShowing')) {\n\t\t\t\t// now that the base list is rendered, we can safely generate our scroller\n\t\t\t\tthis.$.scroller.canGenerate = true;\n\t\t\t\tthis.$.scroller.render();\n\t\t\t\t// and now we hand over the action to our strategy to let it initialize the\n\t\t\t\t// way it needs to\n\t\t\t\tthis.delegate.rendered(this);\n\t\t\t\tthis.hasRendered = true;\n\t\t\t\t// now add our class to adjust visibility (if no overridden)\n\t\t\t\tthis.addClass('rendered');\n\t\t\t\tif (this.didRender) {\n\t\t\t\t\tthis.didRender();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._addToShowingQueue('finish rendering', finishRendering);\n\t\t\t}\n\t\t};\n\t\tif (this.renderDelay === null) {\n\t\t\tfinishRendering.call(this);\n\t\t} else {\n\t\t\tthis.startJob('finish rendering', finishRendering, this.renderDelay);\n\t\t\t// this delay will allow slower systems to keep going and get everything else\n\t\t\t// on screen before worrying about setting up the list\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_absoluteShowingChanged: function () {\n\t\tif (this.get('absoluteShowing') && this._showingQueueMethods) {\n\t\t\tvar methods = this._showingQueueMethods;\n\t\t\tvar fn;\n\t\t\tthis._showingQueueMethods = null;\n\n\t\t\tfor (var i = 0; i < this._absoluteShowingPriority.length; i++) {\n\t\t\t\tfn = methods[this._absoluteShowingPriority[i]];\n\t\t\t\tif(fn) fn.call(this);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Creates a deferred Que of methods to run.\n\t* Methods must be prioritized in [_absoluteShowingPriority]{@link enyo.DataList#_absoluteShowingPriority}\n\t* @private\n\t*/\n\t_addToShowingQueue: function (name, fn) {\n\t\tvar methods = this._showingQueueMethods || (this._showingQueueMethods = {});\n\t\tmethods[name] = fn;\n\t},\n\n\t/**\n\t* This [function]{@glossary Function} is intentionally left blank. In\n\t* [DataRepeater]{@link enyo.DataRepeater}, it removes the [control]{@link enyo.Control}\n\t* at the specified index, but that is handled by the [delegate]{@glossary delegate} here.\n\t*\n\t* @private\n\t*/\n\tremove: function (idx) {},\n\n\t/**\n\t* Async wrapped to work with dynamic paging, when delegate que renders sup _select will then\n\t* be executed.\n\t*\n\t* @private\n\t*/\n\t_select: kind.inherit(function (sup) {\n\t\treturn function (idx, model, select) {\n\n\t\t\tif (this.$.scroller.canGenerate) {\n\t\t\t\tif (this.get('absoluteShowing')) {\n\t\t\t\t\tsup.apply(this, arguments);\n\t\t\t\t} else {\n\t\t\t\t\tthis._addToShowingQueue('select', function () {\n\t\t\t\t\t\tsup.apply(this, [idx, model, select]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* Overloaded to call a method of the [delegate]{@glossary delegate} strategy.\n\t*\n\t* @private\n\t*/\n\tmodelsAdded: function (c, e, props) {\n\t\tif (c === this.collection && this.$.scroller.canGenerate) {\n\t\t\tif (this.get('absoluteShowing')) {\n\t\t\t\tthis.delegate.modelsAdded(this, props);\n\t\t\t} else {\n\t\t\t\tthis._addToShowingQueue('refresh', this.refresh);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t* Overloaded to call a method of the [delegate]{@glossary delegate} strategy.\n\t*\n\t* @private\n\t*/\n\tmodelsRemoved: function (c, e, props) {\n\t\tif (c === this.collection && this.$.scroller.canGenerate) {\n\t\t\tthis.deselectRemovedModels(props.models);\n\t\t\tif (this.get('absoluteShowing')) {\n\t\t\t\tthis.delegate.modelsRemoved(this, props);\n\t\t\t} else {\n\t\t\t\tthis._addToShowingQueue('refresh', this.refresh);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this.delegate && this.delegate.destroyList) {\n\t\t\t\tthis.delegate.destroyList(this);\n\t\t\t}\n\t\t\tthis._showingQueue = null;\n\t\t\tthis._showingQueueMethods = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t/**\n\t* Overloaded from base [kind]{@glossary kind} to ensure that the container options\n\t* correctly apply the [scroller]{@link enyo.Scroller} options before instantiating it.\n\t*\n\t* @private\n\t*/\n\tinitContainer: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar o = utils.clone(this.get('containerOptions')),\n\t\t\t\ts = this.get('scrollerOptions');\n\t\t\tif (s) { utils.mixin(o, s, {exists: true}); }\n\t\t\tthis.set('containerOptions', o);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t/**\n\t* We let the [delegate]{@glossary delegate} strategy manage the {@glossary event},\n\t* but we arbitrarily return `true` because we don't want the event to propagate\n\t* beyond this [kind]{@glossary kind}.\n\t*\n\t* @private\n\t*/\n\tdidScroll: function (sender, e) {\n\t\tif (this.hasRendered && this.collection && this.collection.length > 0) {\n\t\t\tif (this.heightNeedsUpdate || this.widthNeedsUpdate) {\n\t\t\t\t// assign this here so that if for any reason it needs to\n\t\t\t\t// it can reset it\n\t\t\t\tthis.heightNeedsUpdate = this.widthNeedsUpdate = false;\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t\tthis.delegate.didScroll(this, e);\n\t\t}\n\t\treturn true;\n\t},\n\t/**\n\t* Special override to handle resizing in an attempt to minimize the amount of work\n\t* we're doing. We don't want to [waterfall]{@link enyo.Component#waterfall} the\n\t* {@glossary event} to all children, so we hijack the normal handler.\n\t*\n\t* @private\n\t*/\n\tdidResize: function (sender, e) {\n\t\tif (this.get('absoluteShowing')) {\n\t\t\tif (this.hasRendered && this.collection) {\n\t\t\t\tif (this.heightNeedsUpdate || this.widthNeedsUpdate) {\n\t\t\t\t\t// assign this here so that if for any reason it needs to\n\t\t\t\t\t// it can reset it\n\t\t\t\t\tthis.heightNeedsUpdate = this.widthNeedsUpdate = false;\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t\tthis.delegate.didResize(this, e);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._addToShowingQueue('didResize', this.didResize);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChangedHandler: kind.inherit(function (sup) {\n\t\treturn function (sender, e) {\n\t\t\tthis.set('absoluteShowing', this.getAbsoluteShowing(true));\n\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\t/**\n\t* Overload to adjust the root method to be able to find the nested child based on the\n\t* requested index if its page is currently active. Returns `undefined` if the index is out\n\t* of bounds or if the [control]{@link enyo.Control} is not currently available.\n\t*\n\t* Also see [getChildForIndex()]{@link enyo.Repeater#getChildForIndex}, which calls this\n\t* method.\n\t*\n\t* @private\n\t*/\n\tchildForIndex: function (i) {\n\t\tif (this.generated) {\n\t\t\treturn this.delegate.childForIndex(this, i);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tallowTransitionsChanged: function () {\n\t\tthis.addRemoveClass('transitions', this.allowTransitions);\n\t},\n\t/**\n\t* {@link enyo.DataList} uses an overloaded container from its base\n\t* [kind]{@glossary kind}. We set the container to a [scroller]{@link enyo.Scroller}\n\t* and provide a way to modify the scroller options (via the\n\t*[scrollerOptions]{@link enyo.DataList#scrollerOptions} [hash]{@link enyo.Object}).\n\t* All children will reside in one of the two pages owned by the scroller.\n\t*\n\t* @private\n\t*/\n\tcontainerOptions: {name: 'scroller', kind: 'enyo.Scroller', components: [\n\t\t{name: 'active', classes: 'active', components: [\n\t\t\t{name: 'page1', classes: 'page page1'},\n\t\t\t{name: 'page2', classes: 'page page2'},\n\t\t\t{name: 'buffer', classes: 'buffer'}\n\t\t]}\n\t], canGenerate: false, classes: 'enyo-fit enyo-data-list-scroller'},\n\n\t/**\n\t* We access this [kind's]{@glossary kind} [constructor]{@glossary constructor} and\n\t* need it to be undeferred at that time.\n\t*\n\t* @private\n\t*/\n\n\n\t/**\n\t* All of the CSS is relative to this class.\n\t*\n\t* @private\n\t*/\n\tclasses: 'enyo-data-list',\n\n\t/**\n\t* Our initial `controlParent` is us for the flyweight child.\n\t*\n\t* @private\n\t*/\n\tcontrolParentName: '',\n\n\t/**\n\t* Of course we set our container to `'scroller'` as needed by the base\n\t* [kind]{@glossary kind}.\n\t*\n\t* @private\n\t*/\n\tcontainerName: 'scroller',\n\t/**\n\t* We have to trap the Enyo-generated [onScroll]{@link enyo.Scroller#onScroll}\n\t* {@glossary event} and let the [delegate]{@glossary delegate} handle it. We also\n\t* need to catch the `onresize` events so we know when to update our cached sizing.\n\t* We overload the default handler so that we don't\n\t* [waterfall]{@link enyo.Component#waterfall} the resizing; we arbitrarily handle it\n\t* to minimize the amount of work we do.\n\t*\n\t* @private\n\t*/\n\thandlers: {onScroll: 'didScroll', onresize: 'didResize'},\n\n\t/**\n\t* @private\n\t*/\n\tobservers: [\n\t\t{method: '_absoluteShowingChanged', path: 'absoluteShowing'}\n\t],\n\n\t/**\n\t* Adds the [EventEmitter]{@link enyo.EventEmitter} [mixin]{@glossary mixin}\n\t* for the [paging]{@link enyo.DataList#paging} {@glossary event}.\n\t*\n\t* @private\n\t*/\n\tmixins: [EventEmitter],\n\n\t/**\n\t* All [delegates]{@glossary delegate} are named elsewhere but are stored in these\n\t* statics.\n\t*\n\t* @private\n\t*/\n\tstatics: {delegates: {vertical: VerticalDelegate, horizontal: HorizontalDelegate}},\n\n\t/**\n\t* An [array]{@glossary Array} of the actual page references for easier access.\n\t*\n\t* @private\n\t*/\n\tpages: null\n});\n\n/**\n* All subclasses of {@link enyo.DataList} will have their own static\n* [delegates]{@glossary delegate} [hash]{@glossary Object}. This is\n* per-[kind]{@glossary kind}, not per-instance.\n*\n* @private\n*/\nDataList.subclass = function (ctor) {\n\tctor.delegates = utils.clone(ctor.prototype.base.delegates || this.delegates);\n};","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind');\nvar\n\tGroupItem = require('../GroupItem');\n\n/**\n* {@link enyo.ToolDecorator} lines up [components]{@link enyo.Component} in a row,\n* centered vertically.\n*\n* @class enyo.ToolDecorator\n* @extends enyo.GroupItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ToolDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.ToolDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: GroupItem,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-tool-decorator'\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control'),\n\tImage = require('../../../enyo/lib/Image'),\n\tEmptyBinding = require('../../../enyo/lib/EmptyBinding');\n\n/**\n* {@link enyo.GridListImageItem} is a convenience component that may be used inside\n* an {@link enyo.DataGridList} to display an image grid with an optional caption and\n* subcaption.\n*\n* @ui\n* @class enyo.GridListImageItem\n* @extends enyo.Control\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.GridListImageItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.GridListImageItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-gridlist-imageitem',\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'image', kind: Image, classes:'image'},\n\t\t{name: 'caption', kind: Control, classes: 'caption'},\n\t\t{name: 'subCaption', kind: Control, classes: 'sub-caption'}\n\t],\n\n\t/**\n\t* @lends enyo.GridListImageItem.prototype\n\t* @private\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* The absolute URL path to the image.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsource: '',\n\n\t\t/**\n\t\t* The primary caption to be displayed with the image.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tcaption: '',\n\n\t\t/**\n\t\t* The second caption line to be displayed with the image.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsubCaption: '',\n\n\t\t/**\n\t\t* Set to `true` to add the `selected` CSS class to the image tile; set to\n\t\t* `false` to remove the `selected` class.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tselected: false,\n\n\t\t/**\n\t\t* When `true`, the caption and subcaption are centered; otherwise, they are\n\t\t* left-aligned.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tcentered: true,\n\n\t\t/**\n\t\t* By default, the width of the image fits the width of the item, and the\n\t\t* height is sized naturally, based on the image's aspect ratio. Set this\n\t\t* property to `'constrain'` to letterbox the image in the available space,\n\t\t* or `'cover'` to cover the available space with the image (cropping the\n\t\t* larger dimension). Note that when `imageSizing` is explicitly specified,\n\t\t* you must indicate whether the caption and subcaption are used (by setting\n\t\t* the [useCaption]{@link enyo.GridListImageItem#useCaption} and\n\t\t* [useSubCaption]{@link enyo.GridListImageItem#useSubCaption} flags) to\n\t\t* ensure proper sizing.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\timageSizing: '',\n\n\t\t/**\n\t\t* When an [imageSizing]{@link enyo.GridListImageItem#imageSizing} option is\n\t\t* explicitly specified, set this to `false` if the caption space should not\n\t\t* be reserved. This property has no effect when `imageSizing` retains its\n\t\t* default value.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuseCaption: true,\n\n\t\t/**\n\t\t* When an [imageSizing]{@link enyo.GridListImageItem#imageSizing} option is\n\t\t* explicitly specified, set this to `false` if the subcaption space should\n\t\t* not be reserved. This property has no effect when `imageSizing` retains\n\t\t* its default value.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuseSubCaption: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.source', to: '.$.image.src'},\n\t\t{from: '.caption', to: '.$.caption.content'},\n\t\t{from: '.caption', to: '.$.caption.showing', kind: EmptyBinding},\n\t\t{from: '.subCaption', to: '.$.subCaption.content'},\n\t\t{from: '.subCaption', to: '.$.subCaption.showing', kind: EmptyBinding}\n\t],\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.selectedChanged();\n\t\tthis.imageSizingChanged();\n\t\tthis.centeredChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectedChanged: function () {\n\t\tthis.addRemoveClass('selected', this.selected);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.addRemoveClass('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\timageSizingChanged: function () {\n\t\tthis.$.image.setSizing(this.imageSizing);\n\t\tthis.addRemoveClass('sized-image', !!this.imageSizing);\n\t\tif (this.imageSizing) {\n\t\t\tthis.useCaptionChanged();\n\t\t\tthis.useSubCaptionChanged();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuseCaptionChanged: function () {\n\t\tthis.addRemoveClass('use-caption', this.useCaption);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuseSubCaptionChanged: function () {\n\t\tthis.addRemoveClass('use-subcaption', this.useSubCaption);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcenteredChanged: function () {\n\t\tthis.addRemoveClass('centered', this.centered);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\nvar\n\tInput = require('./Input');\n\n/**\n* Fires when checkbox is tapped.\n*\n* @event enyo.Checkbox#onActivate\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Checkbox} implements an HTML checkbox [input]{@glossary input}, with\n* support for grouping using {@link enyo.Group}.\n*\n* @class enyo.Checkbox\n* @extends enyo.Input\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Checkbox.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Checkbox',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Input,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-checkbox',\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonActivate: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Checkbox.prototype */ {\n\t\t\n\t\t/**\n\t\t* Value of the checkbox; will be `true` if checked.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tchecked: false,\n\t\t\n\t\t/**\n\t\t* A [Group API]{@link enyo.Group} requirement for determining the selected item.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false,\n\t\t\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\ttype: 'checkbox'\n\t},\n\t\n\t/**\n\t* Disable classes inherited from {@link enyo.Input}.\n\t* \n\t* @private\n\t*/\n\tkindClasses: \"\",\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonchange: 'change',\n\t\tonclick: 'click'\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.active) {\n\t\t\t\tthis.activeChanged();\n\t\t\t}\n\t\t\tthis.checkedChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcheckedChanged: function () {\n\t\tthis.setNodeProperty('checked', this.checked);\n\t\tthis.setAttribute('checked', this.checked ? 'checked' : '');\n\t\tthis.setActive(this.checked);\n\t},\n\n\t/**\n\t* The [active]{@link enyo.Checkbox#active} property and `onActivate`\n\t* {@glossary event} are part of the [GroupItem]{@link enyo.GroupItem}\n\t* interface supported by this [object]{@glossary Object}.\n\t* \n\t* @private\n\t*/\n\tactiveChanged: function () {\n\t\tthis.active = utils.isTrue(this.active);\n\t\tthis.setChecked(this.active);\n\t\tthis.bubble('onActivate');\n\t},\n\n\t/**\n\t* All [input]{@link enyo.Input} type [controls]{@link enyo.Control} support the \n\t* [value]{@link enyo.Input#value} property.\n\t*\n\t* @param {Boolean} val - Whether or not the [checkbox]{@link enyo.Checkbox} should\n\t* be checked. The value will be treated as `true` if it is truthy; otherwise,\n\t* `false`.\n\t* @public\n\t*/\n\tsetValue: function (val) {\n\t\tthis.setChecked(utils.isTrue(val));\n\t},\n\n\t/**\n\t* Retrieves the current [value]{@link enyo.Input#value} of the\n\t* [checkbox]{@link enyo.Checkbox}.\n\t*\n\t* @returns {Boolean} `true` if the [checkbox]{@link enyo.Checkbox} is checked;\n\t* otherwise, `false`.\n\t* @public\n\t*/\n\tgetValue: function () {\n\t\treturn this.getChecked();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\n\t/**\n\t* @private\n\t*/\n\t// inherited behavior is to set \"value\" attribute and node-property\n\t// which does not apply to checkbox (uses \"checked\") so\n\t// we squelch the inherited method\n\t},\n\tchange: function () {\n\t\tvar nodeChecked = utils.isTrue(this.getNodeProperty('checked'));\n\t\tthis.setActive(nodeChecked);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclick: function (sender, e) {\n\t\t// Various versions of IE (notably IE8) do not fire 'onchange' for\n\t\t// checkboxes, so we discern change via 'click'.\n\t\t// Note: keyboard interaction (e.g. pressing space when focused) fires\n\t\t// a click event.\n\t\tif (platform.ie <= 8) {\n\t\t\tthis.bubble('onchange', e);\n\t\t}\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils'),\n\tplatform = require('../platform');\nvar\n\tInput = require('../Input');\n\n/**\n* The type of change to apply. Possible values are `'move'` and `'extend'`.\n*\n* @typedef {String} enyo.RichText~ModifyType\n*/\n\n/**\n* The direction in which to apply the change. Possible values include: `'forward'`,\n* `'backward'`, `'left'`, and `'right'`.\n*\n* @typedef {String} enyo.RichText~ModifyDirection\n*/\n\n/**\n* The granularity of the change. Possible values include: `'character'`, `'word'`,\n* `'sentence'`, `'line'`, `'paragraph'`, `'lineboundary'`, `'sentenceboundary'`,\n* `'paragraphboundary'`, and `'documentboundary'`.\n*\n* @typedef {String} enyo.RichText~ModifyAmount\n*/\n\n/**\n* {@link enyo.RichText} is a multi-line text [input]{@link enyo.Input} that supports rich\n* formatting, such as bold, italics, and underlining.\n*\n* The content displayed in a RichText may be accessed at runtime via `get('value')`\n* and `set('value')`.\n*\n* For more information, see the documentation on\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\n* in the Enyo Developer Guide.\n*\n* @class enyo.RichText\n* @extends enyo.Input\n* @ui\n* @public\n*/\nvar RichText = module.exports = kind(\n\t/** @lends enyo.RichText.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.RichText',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Input,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-richtext enyo-selectable',\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.RichText.prototype */ {\n\n\t\t/**\n\t\t* This flag is enabled by default in {@link enyo.RichText} to take advantage\n\t\t* of all the rich editing properties. However, this allows for **any** HTML to be\n\t\t* inserted into the RichText, including [&lt;iframe&gt;]{@glossary iframe} and\n\t\t* [&lt;script&gt;]{@glossary script} tags, which can be a security concern in\n\t\t* some situations. If set to `false`, any inserted HTML will be escaped.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tallowHtml: true,\n\n\t\t/**\n\t\t* If `true`, the [RichText]{@link enyo.RichText} will not accept input or generate\n\t\t* [events]{@glossary event}.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* Value of the text field.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tvalue: ''\n\t},\n\n\t/**\n\t* Set to `true` to focus this [control]{@link enyo.Control} when it is rendered.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tdefaultFocus: false,\n\n\t/**\n\t* @private\n\t*/\n\tprotectedStatics: {\n\t\tosInfo: [\n\t\t\t{os: 'android', version: 3},\n\t\t\t{os: 'ios', version: 5}\n\t\t],\n\t\t//* Returns true if the platform has contenteditable attribute.\n\t\thasContentEditable: function() {\n\t\t\tfor (var i=0, t; (t=RichText.osInfo[i]); i++) {\n\t\t\t\tif (platform[t.os] < t.version) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tattributes: {\n\t\tcontenteditable: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonfocus: 'focusHandler',\n\t\tonblur: 'blurHandler',\n\t\tonkeyup: 'updateValue',\n\t\toncut: 'updateValueAsync',\n\t\tonpaste: 'updateValueAsync',\n\t\t// prevent oninput handler from being called lower in the inheritance chain\n\t\toninput: null\n\t},\n\n\t/**\n\t* Creates [RichText]{@link enyo.RichText} as a `<div>` if the platform has the\n\t* `contenteditable` attribute; otherwise, creates it as a `<textarea>`.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.setTag(RichText.hasContentEditable()?'div':'textarea');\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.disabledChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tfocusHandler: function () {\n\t\tthis._value = this.get('value');\n\t},\n\t/**\n\t* Simulates [onchange]{@link enyo.Input#onchange} {@glossary event}\n\t* exposed by [inputs]{@link enyo.Input}.\n\t*\n\t* @fires enyo.Input#onchange\n\t* @private\n\t*/\n\tblurHandler: function () {\n\t\tif (this._value !== this.get('value')) {\n\t\t\tthis.bubble('onchange');\n\t\t}\n\t},\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tvar val = this.get('value');\n\t\tif (this.hasFocus() && val !== this.node.innerHTML) {\n\t\t\tthis.selectAll();\n\t\t\tthis.insertAtCursor(val);\n\t\t} else if(!this.hasFocus()) {\n\t\t\tthis.set('content', val);\n\t\t}\n\t\tthis.detectTextDirectionality((this.value || this.value === 0) ? this.value : '');\n\t},\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tif(this.tag === 'div') {\n\t\t\tthis.setAttribute('contenteditable', this.disabled ? null : 'true');\n\t\t} else {\n\t\t\tthis.setAttribute('disabled', this.disabled);\n\t\t}\n\t\tthis.bubble('onDisabledChange');\n\t},\n\t/**\n\t* @private\n\t*/\n\tupdateValue: function () {\n\t\tvar val = this.node.innerHTML;\n\t\tthis.set('value', val);\n\t},\n\t/**\n\t* @private\n\t*/\n\tupdateValueAsync: function () {\n\t\tutils.asyncMethod(this.bindSafely('updateValue'));\n\t},\n\n\t/**\n\t* Determines whether this [control]{@link enyo.Control} has focus.\n\t*\n\t* @returns {Boolean} `true` if the [RichText]{@link enyo.RichText} is focused;\n\t* otherwise, `false`.\n\t* @public\n\t*/\n\thasFocus: function () {\n\t\tif (this.hasNode()) {\n\t\t\treturn document.activeElement === this.node;\n\t\t}\n\t},\n\t/**\n\t* Retrieves the current [selection]{@glossary Selection} from the\n\t* [RichText]{@link enyo.RichText}.\n\t*\n\t* @returns {Selection} The [selection]{@glossary Selection} [object]{@glossary Object}.\n\t* @public\n\t*/\n\tgetSelection: function () {\n\t\tif (this.hasFocus()) {\n\t\t\treturn global.getSelection();\n\t\t}\n\t},\n\n\t/**\n\t* Removes the [selection]{@glossary Selection} [object]{@glossary Object}.\n\t*\n\t* @param {Boolean} start - If `true`, the [selection]{@glossary Selection} is\n\t*\t[collapsed to the start]{@glossary Selection.collapseToStart} of the\n\t*\t[range]{@glossary Range}; otherwise, it is\n\t*\t[collapsed to the end]{@glossary Selection.collapseToEnd} of the range.\n\t* @public\n\t*/\n\tremoveSelection: function (start) {\n\t\tvar s = this.getSelection();\n\t\tif (s) {\n\t\t\ts[start ? 'collapseToStart' : 'collapseToEnd']();\n\t\t}\n\t},\n\n\t/**\n\t* Modifies the [selection]{@glossary Selection} [object]{@glossary Object}. Please\n\t* see the [Selection.modify]{@glossary Selection.modify} API for more information.\n\t*\n\t* @param {enyo.RichText~ModifyType} type - The type of change to apply.\n\t* @param {enyo.RichText~ModifyDirection} dir - The direction in which to apply the change.\n\t* @param {enyo.RichText~ModifyAmount} amount - The granularity of the change.\n\t* @public\n\t*/\n\tmodifySelection: function (type, dir, amount) {\n\t\tvar s = this.getSelection();\n\t\tif (s) {\n\t\t\ts.modify(type || 'move', dir, amount);\n\t\t}\n\t},\n\n\t/**\n\t* Moves the cursor according to the [Editing API]{@glossary Selection.modify}.\n\t*\n\t* @param {enyo.RichText~ModifyDirection} dir - The direction in which to apply the change.\n\t* @param {enyo.RichText~ModifyAmount} amount - The granularity of the change.\n\t* @public\n\t*/\n\tmoveCursor: function (dir, amount) {\n\t\tthis.modifySelection('move', dir, amount);\n\t},\n\n\t/**\n\t* Moves the cursor to end of text field.\n\t*\n\t* @public\n\t*/\n\tmoveCursorToEnd: function () {\n\t\tthis.moveCursor('forward', 'documentboundary');\n\t},\n\n\t/**\n\t* Moves the cursor to start of text field.\n\t*\n\t* @public\n\t*/\n\tmoveCursorToStart: function () {\n\t\tthis.moveCursor('backward', 'documentboundary');\n\t},\n\n\t/**\n\t* Selects all content in text field.\n\t*\n\t* @public\n\t*/\n\tselectAll: function () {\n\t\tif (this.hasFocus()) {\n\t\t\tdocument.execCommand('selectAll');\n\t\t}\n\t},\n\n\t/**\n\t* Inserts HTML at the cursor position. HTML will be escaped unless the\n\t* [allowHtml]{@link enyo.RichText#allowHtml} property is `true`.\n\t*\n\t* @param {String} val - The HTML to insert at the current cursor position.\n\t* @public\n\t*/\n\tinsertAtCursor: function (val) {\n\t\tif (this.hasFocus()) {\n\t\t\tvar v = this.allowHtml ? val : Control.escapeHtml(val).replace(/\\n/g, '<br/>');\n\t\t\tdocument.execCommand('insertHTML', false, v);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tInput = require('./Input');\n\n/**\n* {@link enyo.TextArea} implements an HTML [&lt;textarea&gt;]{@glossary textarea}\n* element with cross-platform support for change [events]{@glossary event}.\n*\n* For more information, see the documentation on\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\n* in the Enyo Developer Guide.\n*\n* @class enyo.TextArea\n* @extends enyo.Input\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.TextArea.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.TextArea',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Input,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'textarea',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-textarea',\n\n\t/**\n\t* [TextArea]{@link enyo.TextArea} does use the [value]{@link enyo.Input#value} attribute;\n\t* it needs to be kicked when rendered.\n\t*\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.valueChanged();\n\t\t};\n\t})\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tdispatcher = require('./dispatcher'),\n\tpath = require('./path'),\n\tplatform = require('./platform'),\n\tutils = require('./utils');\nvar\n\tControl = require('./Control'),\n\tMediaSource = require('./MediaSource'),\n\tJob = require('./job');\n\n/**\n* Fires when [playbackRate]{@link enyo.Video#playbackRate} is changed to an integer greater than `1`.\n*\n* @event enyo.Video#onFastforward\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when [playbackRate]{@link enyo.Video#playbackRate} is changed to a value between `0` and `1`.\n*\n* @event enyo.Video#onSlowforward\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when [playbackRate]{@link enyo.Video#playbackRate} is changed to an integer less than `-1`.\n*\n* @event enyo.Video#onRewind\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when [playbackRate]{@link enyo.Video#playbackRate} is changed to a value less than `0`\n* but greater than or equal to `-1`.\n*\n* @event enyo.Video#onSlowrewind\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when [jumpForward()]{@link enyo.Video#jumpForward} is called.\n*\n* @event enyo.Video#onJumpForward\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when [jumpBackward()]{@link enyo.Video#jumpBackward} is called.\n*\n* @event enyo.Video#onJumpBackward\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when EventData is changed.\n*\n* @event enyo.Video#onPlay\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the [image]{@link enyo.Image} has loaded.\n*\n* @event enyo.Video#onStart\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Video} is a [control]{@link enyo.Control} that allows you to play video.\n* It is an abstraction of HTML 5 [Video]{@glossary video}.\n*\n* Initialize a video [component]{@link enyo.Component} as follows:\n*\n* ```\n* {kind: 'Video', src: 'http://www.w3schools.com/html/movie.mp4'}\n* ```\n* \n* To play a video, call `this.$.video.play()`.\n* \n* To get a reference to the actual HTML 5 Video element, call `this.$.video.hasNode()`.\n*\n* @class enyo.Video\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Video.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Video',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Video.prototype */ {\n\n\t\t/**\n\t\t* Source URL of the video file; may be relative to the application's HTML file.\n\t\t* \n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: '',\n\n\t\t/**\n\t\t* An [object]{@glossary Object} that may be used to specify multiple sources for the\n\t\t* same video file.\n\t\t* \n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tsourceComponents: null,\n\n\t\t/**\n\t\t* Source of image file to show when video is not available.\n\t\t* \n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tposter: '',\n\n\t\t/**\n\t\t* If `true`, controls for starting and stopping the video player are shown.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tshowControls: false,\n\n\t\t/**\n\t\t* Determines how (or whether) the {@link enyo.Video} object is preloaded.\n\t\t* Possible values:\n\t\t* - `'auto'`: Preload the video data as soon as possible.\n\t\t* - `'metadata'`: Preload only the video metadata.\n\t\t* - `'none'`: Do not preload any video data.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'metadata'\n\t\t* @public\n\t\t*/\n\t\tpreload: 'metadata',\n\n\t\t/**\n\t\t* If `true`, video will automatically start playing.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tautoplay: false,\n\n\t\t/**\n\t\t* If `true`, when playback is finished, the video player will restart from\n\t\t* the beginning.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tloop: false,\n\n\t\t/**\n\t\t* If `true`, video will be stretched to fill the entire window (webOS only).\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tfitToWindow: false,\n\n\t\t/**\n\t\t* The video aspect ratio, expressed as `width:height`.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\taspectRatio: null,\n\n\t\t/**\n\t\t* Number of seconds to jump forward or backward.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 30\n\t\t* @public\n\t\t*/\n\t\tjumpSec: 30,\n\n\t\t/**\n\t\t* Video playback rate.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 1\n\t\t* @public\n\t\t*/\n\t\tplaybackRate: 1,\n\n\t\t/**\n\t\t* Mapping of playback rate names to playback rate values that may be set.\n\t\t* ```\n\t\t* {\n\t\t*\tfastForward: ['2', '4', '8', '16'],\n\t\t*\trewind: ['-2', '-4', '-8', '-16'],\n\t\t*\tslowForward: ['1/4', '1/2', '1'],\n\t\t*\tslowRewind: ['-1/2', '-1']\n\t\t* }\n\t\t* ```\n\t\t* \n\t\t* @type {Object}\n\t\t* @default {\n\t\t*\tfastForward: ['2', '4', '8', '16'],\n\t\t*\trewind: ['-2', '-4', '-8', '-16'],\n\t\t*\tslowForward: ['1/4', '1/2', '1'],\n\t\t*\tslowRewind: ['-1/2', '-1']\n\t\t* }\n\t\t* @public\n\t\t*/\n\t\tplaybackRateHash: {\n\t\t\tfastForward: ['2', '4', '8', '16'],\n\t\t\trewind: ['-2', '-4', '-8', '-16'],\n\t\t\tslowForward: ['1/4', '1/2', '1'],\n\t\t\tslowRewind: ['-1/2', '-1']\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonFastforward: '',\n\t\tonSlowforward: '',\n\t\tonRewind: '',\n\t\tonSlowrewind: '',\n\t\tonJumpForward: '',\n\t\tonJumpBackward: '',\n\t\tonPlay: '',\n\t\tonStart: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\t//* Catch video _loadedmetadata_ event\n\t\tonloadedmetadata: 'metadataLoaded',\n\t\tontimeupdate: 'timeupdate',\n\t\tonratechange: 'ratechange',\n\t\tonplay: '_play',\n\t\tonChangeSource: 'load'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tobservers: {\n\t\tupdateSource: ['src', 'sourceComponents']\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'video',\n\n\tdefaultKind: MediaSource,\n\n\t/**\n\t* @private\n\t*/\n\t_playbackRateArray: null,\n\n\t/**\n\t* @private\n\t*/\n\t_speedIndex: 0,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.posterChanged();\n\t\t\tthis.showControlsChanged();\n\t\t\tthis.preloadChanged();\n\t\t\tthis.autoplayChanged();\n\t\t\tthis.loopChanged();\n\t\t\t// If no source has be specified, <source> elements may have been added directly\n\t\t\t// to the components block so skip updating sources to avoid erasing those\n\t\t\t// components.\n\t\t\tif(this.src || this.sourceComponents) {\n\t\t\t\tthis.updateSource();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.hookupVideoEvents();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tupdateSource: function (old, value, source) {\n\t\tvar src = this.get('src');\n\t\tvar sources = this.get('sourceComponents');\n\n\t\t// if called due to a property change, clear the other property\n\t\tif(source === 'src' || (!source && src)) {\n\t\t\tthis.sourceComponents = null;\n\t\t\tsources = [{src: src}];\n\t\t} else if(source === 'sourceComponents' || (!source && sources)) {\n\t\t\tsrc = this.src = '';\n\t\t\tif (!!this.getAttribute('src')) {\n\t\t\t\tthis.setAttribute('src', '');\n\t\t\t}\n\t\t}\n\n\t\t// Always wipe out any previous sources before setting src or new sources\n\t\tthis.destroyClientControls();\n\t\tif(sources) {\n\t\t\tthis.createComponents(sources);\n\t\t\tif(this.hasNode()) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\n\t\tthis.load();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tposterChanged: function () {\n\t\tif (this.poster) {\n\t\t\tvar p = path.rewrite(this.poster);\n\t\t\tthis.setAttribute('poster', p);\n\t\t}\n\t\telse {\n\t\t\tthis.setAttribute('poster', null);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowControlsChanged: function () {\n\t\tthis.setAttribute('controls', this.showControls ? 'controls' : null);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpreloadChanged: function () {\n\t\tthis.setAttribute('preload', this.preload ? this.preload : null);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoplayChanged: function () {\n\t\tthis.setAttribute('autoplay', this.autoplay ? 'autoplay' : null);\n\t\tthis._prevCommand = this.autoplay ? 'play' : 'pause';\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tloopChanged: function () {\n\t\tthis.setAttribute('loop', this.loop ? 'loop' : null);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfitToWindowChanged: function () {\n\t\tif (!this.hasNode()) {\n\t\t\treturn;\n\t\t}\n\t},\n\t\n\t/**\n\t* Loads the current video [source]{@link enyo.Video#src}.\n\t* \n\t* @public\n\t*/\n\tload: function () {\n\t\tif(this.hasNode()) { this.hasNode().load(); }\n\t},\n\n\t/**\n\t* Unloads the current video [source]{@link enyo.Video#src}, stopping all\n\t* playback and buffering.\n\t* \n\t* @public\n\t*/\n\tunload: function() {\n\t\tthis.src ='';\n\t\tthis.sourceComponents = null;\n\t\tthis.setAttribute('src', '');\n\t\tthis.destroyClientControls();\n\t\tthis.load();\n\t},\n\n\t/**\n\t* Initiates playback of the video data.\n\t* \n\t* @public\n\t*/\n\tplay: function () {\n\t\tif (!this.hasNode()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._speedIndex = 0;\n\t\tthis.setPlaybackRate(1);\n\t\tthis.node.play();\n\t\tthis._prevCommand = 'play';\n\t},\n\n\t/**\n\t* Pauses video playback.\n\t* \n\t* @public\n\t*/\n\tpause: function () {\n\t\tif (!this.hasNode()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._speedIndex = 0;\n\t\tthis.setPlaybackRate(1);\n\t\tthis.node.pause();\n\t\tthis._prevCommand = 'pause';\n\t},\n\n\t/**\n\t* Changes the playback speed via [selectPlaybackRate()]{@link enyo.Video#selectPlaybackRate}.\n\t*\n\t* @public\n\t*/\n\tfastForward: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (this._prevCommand) {\n\t\tcase 'slowForward':\n\t\t\tif (this._speedIndex == this._playbackRateArray.length - 1) {\n\t\t\t\t// reached to the end of array => go to fastforward\n\t\t\t\tthis.selectPlaybackRateArray('fastForward');\n\t\t\t\tthis._speedIndex = 0;\n\t\t\t\tthis._prevCommand = 'fastForward';\n\t\t\t} else {\n\t\t\t\tthis._speedIndex = this.clampPlaybackRate(this._speedIndex+1);\n\t\t\t\tthis._prevCommand = 'slowForward';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'pause':\n\t\t\tthis.selectPlaybackRateArray('slowForward');\n\t\t\tthis._speedIndex = 0;\n\t\t\tif (this.isPaused()) {\n\t\t\t\tnode.play();\n\t\t\t}\n\t\t\tthis._prevCommand = 'slowForward';\n\t\t\tbreak;\n\t\tcase 'rewind':\n\t\t\tvar pbNumber = this.calcNumberValueOfPlaybackRate(this.playbackRate);\n\t\t\tif (pbNumber < 0) {\n\t\t\t\tthis.selectPlaybackRateArray('slowForward');\n\t\t\t\tthis._prevCommand = 'slowForward';\n\t\t\t} else {\n\t\t\t\tthis.selectPlaybackRateArray('fastForward');\n\t\t\t\tthis._prevCommand = 'fastForward';\n\t\t\t}\n\t\t\tthis._speedIndex = 0;\n\t\t\tbreak;\n\t\tcase 'fastForward':\n\t\t\tthis._speedIndex = this.clampPlaybackRate(this._speedIndex+1);\n\t\t\tthis._prevCommand = 'fastForward';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.selectPlaybackRateArray('fastForward');\n\t\t\tthis._speedIndex = 0;\n\t\t\tthis._prevCommand = 'fastForward';\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.setPlaybackRate(this.selectPlaybackRate(this._speedIndex));\n\n\t},\n\n\t/**\n\t* Changes the playback speed via [selectPlaybackRate()]{@link enyo.Video#selectPlaybackRate}.\n\t* \n\t* @public\n\t*/\n\trewind: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (this._prevCommand) {\n\t\tcase 'slowRewind':\n\t\t\tif (this._speedIndex == this._playbackRateArray.length - 1) {\n\t\t\t\t// reached to the end of array => go to rewind\n\t\t\t\tthis.selectPlaybackRateArray('rewind');\n\t\t\t\tthis._speedIndex = 0;\n\t\t\t\tthis._prevCommand = 'rewind';\n\t\t\t} else {\n\t\t\t\tthis._speedIndex = this.clampPlaybackRate(this._speedIndex+1);\n\t\t\t\tthis._prevCommand = 'slowRewind';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'pause':\n\t\t\tthis.selectPlaybackRateArray('slowRewind');\n\t\t\tthis._speedIndex = 0;\n\t\t\tif (this.isPaused() && this.node.duration > this.node.currentTime) {\n\t\t\t\tnode.play();\n\t\t\t}\n\t\t\tthis._prevCommand = 'slowRewind';\n\t\t\tbreak;\n\t\tcase 'rewind':\n\t\t\tthis._speedIndex = this.clampPlaybackRate(this._speedIndex+1);\n\t\t\tthis._prevCommand = 'rewind';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.selectPlaybackRateArray('rewind');\n\t\t\tthis._speedIndex = 0;\n\t\t\tthis._prevCommand = 'rewind';\n\t\t\tbreak;\n\t\t}\n\n\n\t\tthis.setPlaybackRate(this.selectPlaybackRate(this._speedIndex));\n\t},\n\n\t/**\n\t* Jumps backward [jumpSec]{@link enyo.Video#jumpSec} seconds from the current time.\n\t*\n\t* @fires enyo.Video#doJumpBackward\n\t* @public\n\t*/\n\tjumpBackward: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setPlaybackRate(1);\n\t\tnode.currentTime -= this.jumpSec;\n\t\tthis._prevCommand = 'jumpBackward';\n\n\t\tthis.doJumpBackward(utils.mixin(this.createEventData(), {jumpSize: this.jumpSec}));\n\t},\n\n\t/**\n\t* Jumps forward [jumpSec]{@link enyo.Video#jumpSec} seconds from the current time.\n\t*\n\t* @fires enyo.Video#doJumpForward\n\t* @public\n\t*/\n\tjumpForward: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setPlaybackRate(1);\n\t\tnode.currentTime += parseInt(this.jumpSec, 10);\n\t\tthis._prevCommand = 'jumpForward';\n\n\t\tthis.doJumpForward(utils.mixin(this.createEventData(), {jumpSize: this.jumpSec}));\n\t},\n\n\t/**\n\t* Jumps to beginning of media [source]{@link enyo.Video#src} and sets \n\t* [playbackRate]{@link enyo.Video#playbackRate} to `1`.\n\t* \n\t* @public\n\t*/\n\tjumpToStart: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setPlaybackRate(1);\n\t\tnode.pause();\n\t\tnode.currentTime = 0;\n\t\tthis._prevCommand = 'jumpToStart';\n\t},\n\n\t/**\n\t* Jumps to end of media [source]{@link enyo.Video#src} and sets \n\t* [playbackRate]{@link enyo.Video#playbackRate} to `1`.\n\t* \n\t* @public\n\t*/\n\tjumpToEnd: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setPlaybackRate(1);\n\t\tnode.pause();\n\t\tnode.currentTime = this.node.duration;\n\t\tthis._prevCommand = 'jumpToEnd';\n\t},\n\n\t/**\n\t* Sets the playback rate type (from the [keys]{@glossary Object.keys} of \n\t* [playbackRateHash]{@link enyo.Video#playbackRateHash}).\n\t*\n\t* @param {String} cmd - Key of the playback rate type.\n\t* @public\n\t*/\n\tselectPlaybackRateArray: function (cmd) {\n\t\tthis._playbackRateArray = this.playbackRateHash[cmd];\n\t},\n\n\t/**\n\t* Changes [playbackRate]{@link enyo.Video#playbackRate} to a valid value when initiating \n\t* fast forward or rewind.\n\t*\n\t* @param {Number} idx - The index of the desired playback rate.\n\t* @public\n\t*/\n\tclampPlaybackRate: function (idx) {\n\t\tif (!this._playbackRateArray) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn idx % this._playbackRateArray.length;\n\t},\n\n\t/**\n\t* Retrieves the playback rate name.\n\t*\n\t* @param {Number} idx - The index of the desired playback rate.\n\t* @returns {String} The playback rate name.\n\t* @public\n\t*/\n\tselectPlaybackRate: function (idx) {\n\t\treturn this._playbackRateArray[idx];\n\t},\n\n\t/**\n\t* Sets [playbackRate]{@link enyo.Video#playbackRate}.\n\t* \n\t* @param {String} rate - The desired playback rate.\n\t* @public\n\t*/\n\tsetPlaybackRate: function (rate) {\n\t\tvar node = this.hasNode(),\n\t\t\tpbNumber\n\t\t;\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop rewind (if happenning)\n\t\tthis.stopRewindJob();\n\n\t\t// Make sure rate is a string\n\t\tthis.playbackRate = rate = String(rate);\n\t\tpbNumber = this.calcNumberValueOfPlaybackRate(rate);\n\n\t\t// Set native playback rate\n\t\tnode.playbackRate = pbNumber;\n\n\t\tif (!(platform.webos || global.PalmSystem)) {\n\t\t\t// For supporting cross browser behavior\n\t\t\tif (pbNumber < 0) {\n\t\t\t\tthis.beginRewind();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Determines whether playback is in the paused state.\n\t*\n\t* @returns {Boolean} `true` if paused; otherwise, `false`.\n\t* @public\n\t*/\n\tisPaused: function () {\n\t\treturn this.hasNode() ? this.hasNode().paused : true;\n\t},\n\n\t/**\n\t* Determines the current player position in the video.\n\t*\n\t* @returns {Number} The current player position in seconds.\n\t* @public\n\t*/\n\tgetCurrentTime: function () {\n\t\treturn this.hasNode() ? this.hasNode().currentTime : 0;\n\t},\n\n\t/**\n\t* Determines the buffered [time range]{@glossary TimeRanges}.\n\t*\n\t* @returns {TimeRanges} The buffered [time range]{@glossary TimeRanges}.\n\t* @public\n\t*/\n\tgetBufferedTimeRange: function () {\n\t\treturn this.hasNode() ? this.hasNode().buffered : 0;\n\t},\n\n\t/**\n\t* Sets the current player position in the video.\n\t*\n\t* @param {Number} time - The position (in seconds) to which the player should be set.\n\t* @public\n\t*/\n\tsetCurrentTime: function (time) {\n\t\tif ((typeof time === 'number') && this.hasNode()) {\n\t\t\tthis.node.currentTime = time;\n\t\t}\n\t},\n\n\t/**\n\t* Determines the play duration in the video.\n\t*\n\t* @returns {Number} The play duration in seconds.\n\t* @public\n\t*/\n\tgetDuration: function () {\n\t\treturn this.hasNode() ? this.hasNode().duration : 0;\n\t},\n\n\t/**\n\t* Determines the [readyState]{@glossary readyState} of the video.\n\t*\n\t* @returns {ReadyState} The [readyState]{@glossary readyState} of the video.\n\t* @public\n\t*/\n\tgetReadyState: function () {\n\t\treturn this.hasNode() ? this.hasNode().readyState : -1;\n\t},\n\n\t/**\n\t* Determines the seeking status of the player.\n\t*\n\t* @returns {Boolean} `true` if currently seeking; otherwise, `false`.\n\t* @public\n\t*/\n\tgetSeeking: function () {\n\t\treturn this.hasNode() ? this.hasNode().seeking : -1;\n\t},\n\n\t/**\n\t* Implements custom rewind functionality (until browsers support negative playback rate).\n\t* \n\t* @private\n\t*/\n\tbeginRewind: function () {\n\t\tthis.node.pause();\n\t\tthis.startRewindJob();\n\t},\n\n\t/**\n\t* Calculates the time that has elapsed since\n\t* \n\t* @private\n\t*/\n\t_rewind: function () {\n\t\tvar now = utils.perfNow(),\n\t\t\tdistance = now - this.rewindBeginTime,\n\t\t\tpbRate = this.calcNumberValueOfPlaybackRate(this.playbackRate),\n\t\t\tadjustedDistance = Math.abs(distance * pbRate) / 1000,\n\t\t\tnewTime = this.getCurrentTime() - adjustedDistance\n\t\t;\n\n\t\tthis.setCurrentTime(newTime);\n\t\tthis.startRewindJob();\n\t},\n\n\t/**\n\t* Starts rewind job.\n\t* \n\t* @private\n\t*/\n\tstartRewindJob: function () {\n\t\tthis.rewindBeginTime = utils.perfNow();\n\t\tJob(this.id + 'rewind', this.bindSafely('_rewind'), 100);\n\t},\n\n\t/**\n\t* Stops rewind job.\n\t* \n\t* @private\n\t*/\n\tstopRewindJob: function () {\n\t\tJob.stop(this.id + 'rewind');\n\t},\n\n\t/**\n\t* Calculates numeric value of playback rate (with support for fractions).\n\t* \n\t* @private\n\t*/\n\tcalcNumberValueOfPlaybackRate: function (rate) {\n\t\tvar pbArray = String(rate).split('/');\n\t\treturn (pbArray.length > 1) ? parseInt(pbArray[0], 10) / parseInt(pbArray[1], 10) : parseInt(rate, 10);\n\t},\n\n\t/**\n\t* \n\t* Updates the [aspectRatio]{@link enyo.Video#aspectRatio} property when the\n\t* video's metadata is received.\n\t*\n\t* @private\n\t*/\n\tmetadataLoaded: function (sender, e) {\n\t\tvar node = this.hasNode();\n\t\tthis.setAspectRatio('none');\n\t\tif (!node || !node.videoWidth || !node.videoHeight) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setAspectRatio(node.videoWidth/node.videoHeight+':1');\n\t\te = utils.mixin(e, this.createEventData());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttimeupdate: function (sender, e) {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\te = utils.mixin(e, this.createEventData());\n\t},\n\n\t/**\n\t* @fires enyo.Video#doSlowforward\n\t* @fires enyo.Video#doFastforward\n\t* @fires enyo.Video#doSlowrewind\n\t* @fires enyo.Video#doRewind\n\t* @fires enyo.Video#doPlay\n\t* @private\n\t*/\n\tratechange: function (sender, e) {\n\t\tvar node = this.hasNode(),\n\t\t\tinfo,\n\t\t\tpbNumber;\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tinfo = this.createEventData();\n\t\tutils.mixin(e, utils.clone(info, true));\n\t\tinfo.originalEvent = utils.clone(e, true);\n\n\t\tpbNumber = this.calcNumberValueOfPlaybackRate(info.playbackRate);\n\n\t\tif (pbNumber > 0 && pbNumber < 1) {\n\t\t\tthis.doSlowforward(info);\n\t\t} else if (pbNumber > 1) {\n\t\t\tthis.doFastforward(info);\n\t\t} else if (pbNumber < 0 && pbNumber >= -1) {\n\t\t\tthis.doSlowrewind(info);\n\t\t} else if (pbNumber < -1) {\n\t\t\tthis.doRewind(info);\n\t\t} else if (pbNumber == 1) {\n\t\t\tthis.doPlay(info);\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.Video#doStart\n\t* @private\n\t*/\n\tcreateEventData: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn {};\n\t\t}\n\t\tif (node.currentTime === 0) {\n\t\t\tthis.doStart();\n\t\t}\n\t\treturn {\n\t\t\tsrcElement: node,\n\t\t\tduration: node.duration,\n\t\t\tcurrentTime: node.currentTime,\n\t\t\tplaybackRate: this.getPlaybackRate()\n\t\t};\n\t},\n\n\t/**\n\t* Normalizes Enyo-generated `onPlay` [events]{@glossary event}.\n\t* \n\t* @fires enyo.Video#doPlay\n\t* @private\n\t*/\n\t_play: function (sender, e) {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\te = utils.mixin(e, this.createEventData());\n\n\t\tthis.doPlay(e);\n\t},\n\n\t/**\n\t* All HTML5 [video]{@glossary video} [events]{@glossary event}.\n\t* \n\t* @private\n\t*/\n\thookupVideoEvents: function () {\n\t\tdispatcher.makeBubble(this,\n\t\t\t'loadstart',\n\t\t\t'emptied',\n\t\t\t'canplaythrough',\n\t\t\t'ended',\n\t\t\t'ratechange',\n\t\t\t'progress',\n\t\t\t'stalled',\n\t\t\t'playing',\n\t\t\t'durationchange',\n\t\t\t'volumechange',\n\t\t\t'suspend',\n\t\t\t'loadedmetadata',\n\t\t\t'waiting',\n\t\t\t'timeupdate',\n\t\t\t'abort',\n\t\t\t'loadeddata',\n\t\t\t'seeking',\n\t\t\t'play',\n\t\t\t'error',\n\t\t\t'canplay',\n\t\t\t'seeked',\n\t\t\t'pause'\n\t\t);\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils'),\n\tdispatcher = require('../dispatcher');\nvar\n\tControl = require('../Control'),\n\tSignals = require('../Signals'),\n\tScrim = require('../Scrim'),\n\tDom = require('../dom');\n\n/**\n* Fires after the [popup]{@link enyo.Popup} is shown.\n*\n* @event enyo.Popup#onShow\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires after the [popup]{@link enyo.Popup} is hidden.\n*\n* @event enyo.Popup#onHide\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Popup} is a [control]{@link enyo.Control} used to display certain content\n* on top of other content.\n*\n* Popups are initially hidden on creation; they may be shown by calling the\n* [show()]{@link enyo.Control#show} method and re-hidden by calling\n* [hide()]{@link enyo.Control#hide}. Popups may be centered using the\n* [centered]{@link enyo.Popup#centered} property; if not centered, they should\n* be given a specific position.\n*\n* A popup may be optionally floated above all\n* [application]{@link enyo.Application} content by setting its\n* [floating]{@link enyo.Popup#floating} property to `true`. This has the\n* advantage of guaranteeing that the popup will be displayed on top of other\n* content. This usage is appropriate when the popup does not need to scroll\n* along with other content.\n*\n* To avoid obscuring popup contents, scrims require the dialog to be floating;\n* otherwise, they won't render. A modal popup will get a transparent scrim\n* unless the popup isn't floating. To get a translucent scrim when modal,\n* specify `[scrim]{@link enyo.Popup#scrim}: true` and\n* `[scrimWhenModal]{@link enyo.Popup#scrimWhenModal}: false`.\n*\n* Finally, there is a WebKit bug affecting the behavior of popups that are\n* displayed on top of text input controls.  For more information, including a\n* workaround, see the documentation on\n* [Popups]{@linkplain $dev-guide/building-apps/controls/popups.html}\n* in the Enyo Developer Guide.\n*\n* @class enyo.Popup\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar Popup = module.exports = kind(\n\t/** @lends enyo.Popup.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Popup',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-popup enyo-no-touch-action',\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.Popup.prototype */ {\n\n\t\t/**\n\t\t* Set to `true` to prevent [controls]{@link enyo.Control} outside the\n\t\t* [popup]{@link enyo.Popup} from receiving [events]{@glossary event} while the\n\t\t* popup is showing.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tmodal: false,\n\n\t\t/**\n\t\t* By default, the [popup]{@link enyo.Popup} will hide when the user taps outside it or\n\t\t* presses `ESC`.  Set to `false` to prevent this behavior.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoDismiss: true,\n\n\t\t/**\n\t\t* Set to `true` to render the [popup]{@link enyo.Popup} in a\n\t\t* [floating layer]{@link enyo.FloatingLayer} outside of other\n\t\t* [controls]{@link enyo.Control}.  This may be used to guarantee that the\n\t\t* popup will be shown on top of other controls.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tfloating: false,\n\n\t\t/**\n\t\t* Set to `true` to automatically center the [popup]{@link enyo.Popup} in\n\t\t* the middle of the viewport.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tcentered: false,\n\n\t\t/**\n\t\t* Set to `true` to be able to show transition on the style modifications;\n\t\t* otherwise the transition is invisible `(visibility: hidden)`.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tshowTransitions: false,\n\n\t\t/**\n\t\t* Set to `true` to stop `preventDefault()` from being called on captured\n\t\t* [events]{@glossary event}.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tallowDefault: false,\n\n\t\t/**\n\t\t* Boolean that controls whether a scrim will appear when the dialog is\n\t\t* modal. Note that modal scrims are transparent, so you won't see them.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tscrimWhenModal: true,\n\n\t\t/**\n\t\t* Boolean that controls whether or not a scrim will be displayed. Scrims are\n\t\t* only displayed when the dialog is floating.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default  false\n\t\t* @public\n\t\t*/\n\t\tscrim: false,\n\n\t\t/**\n\t\t* Optional class name to apply to the scrim. Be aware that the scrim\n\t\t* is a singleton and you will be modifying the scrim instance used for\n\t\t* other popups.\n\t\t*\n\t\t* @type {String}\n\t\t* @default  ''\n\t\t* @public\n\t\t*/\n\t\tscrimClassName: '',\n\n\t\t/**\n\t\t* Lowest z-index that may be applied to a popup\n\t\t*\n\t\t* @type {Number}\n\t\t* @default  120\n\t\t* @public\n\t\t*/\n\t\tdefaultZ: 120\n\t},\n\n\t/**\n\t* @lends  enyo.Popup\n\t* @private\n\t*/\n\tprotectedStatics: {\n\t\t/**\n\t\t* Count of currently showing popups\n\t\t* @type {Number}\n\t\t* @static\n\t\t* @private\n\t\t*/\n\t\tcount: 0,\n\n\t\t/**\n\t\t* Highest possible z-index for a popup\n\t\t* @type {Number}\n\t\t* @static\n\t\t* @private\n\t\t*/\n\t\thighestZ: 120\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowing: false,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonkeydown: 'keydown',\n\t\tondragstart: 'dragstart',\n\t\tonfocus: 'focus',\n\t\tonblur: 'blur',\n\t\tonRequestShow: 'requestShow',\n\t\tonRequestHide: 'requestHide'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcaptureEvents: true,\n\n\t/**\n\t* @private\n\t*/\n\teventsToCapture: {\n\t\tondown: 'capturedDown',\n\t\tontap: 'capturedTap'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonShow: '',\n\t\tonHide: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{kind: Signals, onKeydown: 'keydown'}\n\t],\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tvar showing = this.showing;\n\t\t\tthis.showing = false;\n\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.canGenerate = !this.floating;\n\n\t\t\t// if the showing flag was true we know the intent was to automatically show the\n\t\t\t// popup on render...but it can't be rendered in the normal flow...but the rendered\n\t\t\t// method won't be called because it wasn't generated...SO...we arbitrarily flag\n\t\t\t// it as generated even though it wasn't to ensure that its rendered method will\n\t\t\t// be called and we then check for this scenario in rendered\n\t\t\tthis.generated = showing;\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trender: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tif (this.floating) {\n\t\t\t\tif (!Control.floatingLayer.hasNode()) {\n\t\t\t\t\tControl.floatingLayer.render();\n\t\t\t\t}\n\t\t\t\tthis.parentNode = Control.floatingLayer.hasNode();\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tteardownRender: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// if this is a rendered floating popup, remove the node from the\n\t\t\t// floating layer because it won't be removed otherwise\n\t\t\tvar node = this.hasNode();\n\t\t\tif(this.floating && node) {\n\t\t\t\tthis.node.remove();\n\t\t\t}\n\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.release();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\treflow: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.updatePosition();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcalcViewportSize: function () {\n\t\tif (global.innerWidth) {\n\t\t\treturn {\n\t\t\t\twidth: global.innerWidth,\n\t\t\t\theight: global.innerHeight\n\t\t\t};\n\t\t} else {\n\t\t\tvar e = document.documentElement;\n\t\t\treturn {\n\t\t\t\twidth: e.offsetWidth,\n\t\t\t\theight: e.offsetHeight\n\t\t\t};\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePosition: function () {\n\t\tvar d = this.calcViewportSize(),\n\t\t\tb = this.getBounds();\n\n\t\tif (this.targetPosition) {\n\t\t\t// For brevity's sake...\n\t\t\tvar p = this.targetPosition;\n\n\t\t\t// Test and optionally adjust our target bounds (only first is commented, because logic is effectively identical for all scenarios)\n\t\t\tif (typeof p.left == 'number') {\n\t\t\t\t// If popup will be outside global bounds, switch anchor\n\t\t\t\tif (p.left + b.width > d.width) {\n\t\t\t\t\tif (p.left - b.width >= 0) {\n\t\t\t\t\t\t// Switching to right corner will fit in global\n\t\t\t\t\t\tp.right = d.width - p.left;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Neither corner will work; stick at side of global\n\t\t\t\t\t\tp.right = 0;\n\t\t\t\t\t}\n\t\t\t\t\tp.left = null;\n\t\t\t\t} else {\n\t\t\t\t\tp.right = null;\n\t\t\t\t}\n\t\t\t} else if (typeof p.right == 'number') {\n\t\t\t\tif (p.right + b.width > d.width) {\n\t\t\t\t\tif (p.right - b.width >= 0) {\n\t\t\t\t\t\tp.left = d.width - p.right;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tp.left = 0;\n\t\t\t\t\t}\n\t\t\t\t\tp.right = null;\n\t\t\t\t} else {\n\t\t\t\t\tp.left = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof p.top == 'number') {\n\t\t\t\tif (p.top + b.height > d.height) {\n\t\t\t\t\tif (p.top - b.height >= 0) {\n\t\t\t\t\t\tp.bottom = d.height - p.top;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tp.bottom = 0;\n\t\t\t\t\t}\n\t\t\t\t\tp.top = null;\n\t\t\t\t} else {\n\t\t\t\t\tp.bottom = null;\n\t\t\t\t}\n\t\t\t} else if (typeof p.bottom == 'number') {\n\t\t\t\tif (p.bottom + b.height > d.height) {\n\t\t\t\t\tif (p.bottom - b.height >= 0) {\n\t\t\t\t\t\tp.top = d.height - p.bottom;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tp.top = 0;\n\t\t\t\t\t}\n\t\t\t\t\tp.bottom = null;\n\t\t\t\t} else {\n\t\t\t\t\tp.top = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 'initial' values are necessary to override positioning rules in the CSS\n\t\t\tthis.addStyles('left: ' + (p.left !== null ? p.left + 'px' : 'initial') + '; right: ' + (p.right !== null ? p.right + 'px' : 'initial') + '; top: ' + (p.top !== null ? p.top + 'px' : 'initial') + '; bottom: ' + (p.bottom !== null ? p.bottom + 'px' : 'initial') + ';');\n\t\t} else if (this.centered) {\n\t\t\tvar o = this.floating ? d : this.getInstanceOwner().getBounds();\n\t\t\tthis.addStyles( 'top: ' + Math.max( ( ( o.height - b.height ) / 2 ), 0 ) + 'px; left: ' + Math.max( ( ( o.width - b.width ) / 2 ), 0 ) + 'px;' );\n\t\t}\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// generated won't be true when this method is called with showing false unless\n\t\t\t// we set it that way so we need to go ahead and do our actual render now that the container (parent)\n\t\t\t// has been rendered and the floating layer can be rendered and we should be able to carry on normally\n\t\t\tif (this.generated && !this.showing && !this.hasNode()) {\n\t\t\t\tthis.generated = false;\n\t\t\t\tthis.showing = true;\n\t\t\t\tthis.showingChanged();\n\t\t\t} else sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @fires enyo.Popup#onShow\n\t* @fires enyo.Popup#onHide\n\t* @private\n\t*/\n\tshowingChanged: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\t// auto render when shown.\n\t\t\tif (this.floating && this.showing && !this.hasNode()) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\t// hide while sizing, and move to top corner for accurate sizing\n\t\t\tif (this.centered || this.targetPosition) {\n\t\t\t\tif (!this.showTransitions) {\n\t\t\t\t\tthis.applyStyle('visibility', 'hidden');\n\t\t\t\t}\n\t\t\t\tthis.addStyles('top: 0px; left: 0px; right: initial; bottom: initial;');\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.showing) {\n\t\t\t\tthis.resize();\n\t\t\t\tPopup.count++;\n\t\t\t\tthis.applyZIndex();\n\t\t\t\tif (this.captureEvents) {\n\t\t\t\t\tthis.capture();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(Popup.count > 0) {\n\t\t\t\t\tPopup.count--;\n\t\t\t\t}\n\t\t\t\tif (this.captureEvents) {\n\t\t\t\t\tthis.release();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.showHideScrim(this.showing);\n\t\t\t// show after sizing\n\t\t\tif (this.centered || this.targetPosition && !this.showTransitions) {\n\t\t\t\tthis.applyStyle('visibility', null);\n\t\t\t}\n\t\t\t// events desired due to programmatic show/hide\n\t\t\tif (this.hasNode()) {\n\t\t\t\tthis[this.showing ? 'doShow' : 'doHide']();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcapture: function () {\n\t\tdispatcher.capture(this, this.eventsToCapture);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trelease: function () {\n\t\tdispatcher.release(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedDown: function (sender, e) {\n\t\t//record the down event to verify in tap\n\t\tthis.downEvent = e;\n\n\t\t// prevent focus from shifting outside the popup when modal.\n\t\tif (this.modal && !this.allowDefault) {\n\t\t\te.preventDefault();\n\t\t}\n\t\treturn this.modal;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedTap: function (sender, e) {\n\t\t// dismiss on tap if property is set and click started & ended outside the popup\n\t\tif (this.autoDismiss && (!e.dispatchTarget.isDescendantOf(this)) && this.downEvent &&\n\t\t\t(!this.downEvent.dispatchTarget.isDescendantOf(this))) {\n\t\t\tthis.downEvent = null;\n\t\t\tthis.hide();\n\t\t}\n\t\treturn this.modal;\n\t},\n\n\t/**\n\t* If a drag event occurs outside a [popup]{@link enyo.Popup}, hide.\n\t*\n\t* @private\n\t*/\n\tdragstart: function (sender, e) {\n\t\tvar inScope = (e.dispatchTarget === this || e.dispatchTarget.isDescendantOf(this));\n\t\tif (sender.autoDismiss && !inScope) {\n\t\t\tsender.setShowing(false);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tkeydown: function (sender, e) {\n\t\tif (this.showing && this.autoDismiss && e.keyCode == 27 /* escape */) {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\t/**\n\t* If something inside the [popup]{@link enyo.Popup} blurred, keep track of it.\n\t*\n\t* @private\n\t*/\n\tblur: function (sender, e) {\n\t\tif (e.dispatchTarget.isDescendantOf(this)) {\n\t\t\tthis.lastFocus = e.originator;\n\t\t}\n\t},\n\n\t/**\n\t* When something outside the [popup]{@link enyo.Popup} focuses (e.g., due to tab key), focus\n\t* our last focused [control]{@link enyo.Control}.\n\t*\n\t* @private\n\t*/\n\tfocus: function (sender, e) {\n\t\tvar dt = e.dispatchTarget;\n\t\tif (this.modal && !dt.isDescendantOf(this)) {\n\t\t\tif (dt.hasNode()) {\n\t\t\t\tdt.node.blur();\n\t\t\t}\n\t\t\tvar n = (this.lastFocus && this.lastFocus.hasNode()) || this.hasNode();\n\t\t\tif (n) {\n\t\t\t\tn.focus();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestShow: function () {\n\t\tthis.show();\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestHide: function () {\n\t\tthis.hide();\n\t\treturn true;\n\t},\n\n\t/**\n\t* Opens the [popup]{@link enyo.Popup} at the location of a mouse\n\t* {@glossary event}. The popup's position is automatically constrained so\n\t* that it does not display outside the viewport, and defaults to anchoring\n\t* the top left corner of the popup to the position of the mouse event.\n\t*\n\t* @param {Object} e - The mouse {@glossary event} that initiated this call.\n\t* @param {Object} [offset] - An optional [object]{@glossary Object} that may\n\t* contain `left` and `top` properties to specify an offset relative to the\n\t* location where the [popup]{@link enyo.Popup} would otherwise be positioned.\n\t* @public\n\t*/\n\tshowAtEvent: function (e, offset) {\n\t\t// Calculate our ideal target based on the event position and offset\n\t\tvar p = {\n\t\t\tleft: e.centerX || e.clientX || e.pageX,\n\t\t\ttop: e.centerY || e.clientY || e.pageY\n\t\t};\n\t\tif (offset) {\n\t\t\tp.left += offset.left || 0;\n\t\t\tp.top += offset.top || 0;\n\t\t}\n\n\t\tthis.showAtPosition(p);\n\t},\n\n\t/**\n\t* Opens the [popup]{@link enyo.Popup} at a specific position. The final\n\t* location of the popup will be automatically constrained so that it does\n\t* not display outside the viewport.\n\t*\n\t* @param {Object} pos An [object]{@glossary Object} that may contain `left`,\n\t* `top`, `bottom`, and `right` properties to specify where the\n\t* [popup]{@link enyo.Popup} will be anchored. If both `left` and `right` are\n\t* included, the preference will be to anchor on the left; similarly, if both\n\t* `top` and `bottom` are specified, the preference will be to anchor at the\n\t* top.\n\t* @public\n\t*/\n\tshowAtPosition: function (pos) {\n\t\t// Save our target position for later processing\n\t\tthis.targetPosition = pos;\n\n\t\t// Show the dialog\n\t\tthis.show();\n\t},\n\n\t/**\n\t* Toggles the display of the scrim\n\t*\n\t* @param  {Boolean} show - Show the scrim\n\t* @private\n\t*/\n\tshowHideScrim: function (show) {\n\t\tif (this.floating && (this.scrim || (this.modal && this.scrimWhenModal))) {\n\t\t\tvar scrim = this.getScrim();\n\t\t\tif (show) {\n\t\t\t\t// move scrim to just under the popup to obscure rest of screen\n\t\t\t\tvar i = this.getScrimZIndex();\n\t\t\t\tthis._scrimZ = i;\n\t\t\t\tscrim.showAtZIndex(i);\n\t\t\t} else {\n\t\t\t\tscrim.hideAtZIndex(this._scrimZ);\n\t\t\t}\n\t\t\tutils.call(scrim, 'addRemoveClass', [this.scrimClassName, scrim.showing]);\n\t\t}\n\t},\n\n\t/**\n\t* Calculates the z-index for the scrim so it's directly below the popup\n\t*\n\t* @private\n\t*/\n\tgetScrimZIndex: function () {\n\t\treturn Popup.highestZ >= this._zIndex ? this._zIndex - 1 : Popup.highestZ;\n\t},\n\n\t/**\n\t* Show a transparent scrim for modal popups if {@link enyo.Popup#scrimWhenModal} is `true`\n\t* if {@link enyo.Popup#scrim} is `true`, then show a regular scrim.\n\t*\n\t* @return {enyo.Scrim}\n\t* @private\n\t*/\n\tgetScrim: function () {\n\t\t//\n\t\tif (this.modal && this.scrimWhenModal && !this.scrim) {\n\t\t\treturn Scrim.scrimTransparent.make();\n\t\t}\n\t\treturn Scrim.scrim.make();\n\t},\n\n\t/**\n\t* Adjust the zIndex so that popups will properly stack on each other.\n\t*\n\t* @private\n\t*/\n\tapplyZIndex: function () {\n\t\tthis._zIndex = (Popup.count * 2) + this.findZIndex() + 1;\n\t\tif (this._zIndex <= Popup.highestZ) {\n\t\t\tthis._zIndex = Popup.highestZ + 1;\n\t\t}\n\t\tif (this._zIndex > Popup.highestZ) {\n\t\t\tPopup.highestZ = this._zIndex;\n\t\t}\n\t\t// leave room for scrim\n\t\tthis.applyStyle('z-index', this._zIndex);\n\t},\n\n\t/**\n\t* Find the z-index for this popup, clamped by {@link enyo.Popup#defaultZ}\n\t*\n\t* @return {Number} z-index value\n\t* @private\n\t*/\n\tfindZIndex: function () {\n\t\t// a default z value\n\t\tvar z = this.defaultZ;\n\t\tif (this._zIndex) {\n\t\t\tz = this._zIndex;\n\t\t} else if (this.hasNode()) {\n\t\t\t// Re-use existing zIndex if it has one\n\t\t\tz = Number(Dom.getComputedStyleValue(this.node, 'z-index')) || z;\n\t\t}\n\t\tif (z < this.defaultZ) {\n\t\t\tz = this.defaultZ;\n\t\t}\n\t\tthis._zIndex = z;\n\t\treturn this._zIndex;\n\t}\n});\n\n/**\n* By default, we capture `ondown` and `ontap` to implement the [popup's]{@link enyo.Popup}\n* modal behavior, but in certain circumstances it may be necessary to capture other\n* [events]{@glossary event} as well, so we provide this hook to extend. (We are currently\n* using this in Moonstone to capture `onSpotlightFocus` [events]{@glossary event}).\n*\n* @private\n*/\nPopup.concat = function (ctor, props, instance) {\n\tvar proto = ctor.prototype || ctor,\n\t\tevts = proto.eventsToCapture;\n\tproto.eventsToCapture = evts ? utils.mixin({}, [evts, props.eventsToCapture]) : props.eventsToCapture;\n\tdelete props.eventsToCapture;\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tdispatcher = require('./dispatcher'),\n\tplatform = require('./platform');\n\nvar\n\tScrollMath = require('./ScrollMath'),\n\tScrollStrategy = require('./ScrollStrategy'),\n\tScrollThumb = require('./ScrollThumb'),\n\tDom = require('./dom');\n\n/**\n* Fires when dragging has started, allowing drags to propagate to parent\n* [scrollers]{@link enyo.Scroller}.\n*\n* @event enyo.TouchScrollStrategy#onShouldDrag\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing\n*\tevent information.\n* @private\n*/\n\n/**\n* {@link enyo.TouchScrollStrategy} is a helper [kind]{@glossary kind} for implementing a\n* touch-based [scroller]{@link enyo.Scroller}. It integrates the scrolling simulation provided\n* by {@link enyo.ScrollMath} into an `enyo.Scroller`.\n*\n* `enyo.TouchScrollStrategy` is not typically created in application code. Instead, it is\n* specified as the value of the [strategyKind]{@link enyo.Scroller#strategyKind} property\n* of an `enyo.Scroller` or {@link enyo.List}, or is used by the framework implicitly.\n*\n* @class enyo.TouchScrollStrategy\n* @extends enyo.ScrollStrategy\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.TouchScrollStrategy.prototype */ {\n\n\tname: 'enyo.TouchScrollStrategy',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ScrollStrategy,\n\n\t/**\n\t\tIf `true` (the default), the scroller will overscroll and bounce back at the edges.\n\t*/\n\toverscroll: true,\n\n\t/**\n\t\tIf `true` (the default), the scroller will not propagate `dragstart`\n\t\tevents that cause it to start scrolling.\n\t*/\n\tpreventDragPropagation: true,\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.TouchScrollStrategy.prototype */ {\n\n\t\t/**\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\tvertical: 'default',\n\n\t\t/**\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\thorizontal: 'default',\n\n\t\t/**\n\t\t* Set to `true` to display a scroll thumb.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tthumb: true,\n\n\t\t/**\n\t\t* Set to `true` to display a transparent overlay while scrolling. This can help improve\n\t\t* performance of complex, large scroll regions on some platforms (e.g., Android).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tscrim: false,\n\n\t\t/**\n\t\t* Indicates whether to allow drag [events]{@glossary event} to be sent while gesture\n\t\t* events are happening simultaneously.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tdragDuringGesture: true,\n\n\t\t/**\n\t\t* Facades animation time step from [ScrollMath]{@link enyo.ScrollMath}.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 20\n\t\t* @public\n\t\t*/\n\t\tinterval: 20,\n\n\t\t/**\n\t\t* Facades animation interval type from [ScrollMath]{@link enyo.ScrollMath}.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tfixedTime: true,\n\n\t\t/**\n\t\t* Facades one unit of time for simulation from [ScrollMath]{@link enyo.ScrollMath}.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 10\n\t\t* @public\n\t\t*/\n\t\tframe: 10,\n\n\t\t/**\n\t\t* Indicates whether default [events]{@glossary event} (e.g., native scrolling\n\t\t* events) should be suppressed.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tpreventDefault: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonShouldDrag: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonflick: 'flick',\n\t\tonShouldDrag: 'shouldDrag',\n\t\tondrag: 'drag'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{kind: ScrollMath, onScrollStart: 'scrollMathStart', onScroll: 'scrollMathScroll', onScrollStop: 'scrollMathStop', onStabilize: 'scrollMathStabilize'},\n\t\t{name: 'vthumb', kind: ScrollThumb, axis: 'v', showing: false},\n\t\t{name: 'hthumb', kind: ScrollThumb, axis: 'h', showing: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tscrimTools: [{name: 'scrim', classes: 'enyo-fit', style: 'z-index: 1;', showing: false}],\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'client', classes: 'enyo-touch-scroller'}\n\t],\n\n\t/**\n\t* Flag indicating whether the list is currently reordering.\n\t*\n\t* @readonly\n\t* @public\n\t*/\n\tlistReordering: false,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.transform = Dom.canTransform();\n\t\t\tif(!this.transform) {\n\t\t\t\tif(this.overscroll) {\n\t\t\t\t\t//so we can adjust top/left if browser can't handle translations\n\t\t\t\t\tthis.$.client.applyStyle('position', 'relative');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.accel = Dom.canAccelerate();\n\t\t\tvar containerClasses = 'enyo-touch-strategy-container';\n\t\t\t// note: needed for ios to avoid incorrect clipping of thumb\n\t\t\t// and need to avoid on Android as it causes problems hiding the thumb\n\t\t\tif (platform.ios && this.accel) {\n\t\t\t\tcontainerClasses += ' enyo-composite';\n\t\t\t}\n\t\t\tthis.scrimChanged();\n\t\t\tthis.intervalChanged();\n\t\t\tthis.fixedTimeChanged();\n\t\t\tthis.frameChanged();\n\t\t\tthis.container.addClass(containerClasses);\n\t\t\tthis.translation = this.accel ? 'translate3d' : 'translate';\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.createChrome(this.tools);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.container.removeClass('enyo-touch-strategy-container');\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this.$.client, 'scroll');\n\t\t\tthis.calcBoundaries();\n\t\t\tthis.syncScrollMath();\n\t\t\tif (this.thumb) {\n\t\t\t\tthis.alertThumbs();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tscrimChanged: function () {\n\t\tif (this.scrim && !this.$.scrim) {\n\t\t\tthis.makeScrim();\n\t\t}\n\t\tif (!this.scrim && this.$.scrim) {\n\t\t\tthis.$.scrim.destroy();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeScrim: function () {\n\t\t// reset control parent so scrim doesn't go into client.\n\t\tvar cp = this.controlParent;\n\t\tthis.controlParent = null;\n\t\tthis.createChrome(this.scrimTools);\n\t\tthis.controlParent = cp;\n\t\tvar cn = this.container.hasNode();\n\t\t// render scrim in container, strategy has no dom.\n\t\tif (cn) {\n\t\t\tthis.$.scrim.parentNode = cn;\n\t\t\tthis.$.scrim.render();\n\t\t}\n\t},\n\n\t/**\n\t* Determines whether or not the scroller is actively moving.\n\t*\n\t* @return {Boolean} `true` if actively moving; otherwise, `false`.\n\t* @public\n\t*/\n\tisScrolling: function () {\n\t\tvar m = this.$.scrollMath;\n\t\treturn m ? m.isScrolling() : this.scrolling;\n\t},\n\n\t/**\n\t* Determines whether or not the scroller is in overscroll.\n\t*\n\t* @return {Boolean} `true` if in overscroll; otherwise, `false`.\n\t* @public\n\t*/\n\tisOverscrolling: function () {\n\t\tvar m = this.$.scrollMath || this;\n\t\treturn (this.overscroll) ? Boolean(m.isInOverScroll()) : false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdomScroll: function () {\n\t\tif (!this.isScrolling()) {\n\t\t\tthis.calcBoundaries();\n\t\t\tthis.syncScrollMath();\n\t\t\tif (this.thumb) {\n\t\t\t\tthis.alertThumbs();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thorizontalChanged: function () {\n\t\tthis.$.scrollMath.horizontal = (this.horizontal != 'hidden');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverticalChanged: function () {\n\t\tthis.$.scrollMath.vertical = (this.vertical != 'hidden');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\n\t\t// note: previously used enyo-fit here but IE would reset scroll position when the scroll thumb\n\t\t// was hidden; in general IE resets scrollTop when there are 2 abs position siblings, one has\n\t\t// scrollTop and the other is hidden.\n\t\tthis.$.client.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tthumbChanged: function () {\n\t\tthis.hideThumbs();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tintervalChanged: function () {\n\t\tif (this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.interval = this.interval;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfixedTimeChanged: function () {\n\t\tif (this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.fixedTime = this.fixedTime;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tframeChanged: function () {\n\t\tif (this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.frame = this.frame;\n\t\t}\n\t},\n\n\t/**\n\t* Stops any active scroll movement.\n\t*\n\t* @todo Doc update made while merging, need official documentation update!\n\t*\n\t* @param {Boolean} emit - Whether or not to fire the `onScrollStop` event.\n\t* @public\n\t*/\n\tstop: function (emit) {\n\t\tif (this.isScrolling()) {\n\t\t\tthis.$.scrollMath.stop(emit);\n\t\t}\n\t},\n\n\t/**\n\t* Adjusts the scroll position to be valid, if necessary (e.g., after the scroll contents\n\t* have changed).\n\t*\n\t* @public\n\t*/\n\tstabilize: function () {\n\t\tif(this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.stabilize();\n\t\t}\n\t},\n\n\t/**\n\t* Scrolls to a specific position within the scroll area.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @public\n\t*/\n\tscrollTo: function (x, y) {\n\t\tthis.stop(true);\n\t\tthis.$.scrollMath.scrollTo(x, y || y === 0 ? y : null);\n\t},\n\n\t/**\n\t* Scrolls the given [control]{@link enyo.Control} into view.\n\t*\n\t* @param {enyo.Control} ctl - The [control]{@link enyo.Control} to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @method\n\t* @public\n\t*/\n\tscrollIntoView: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop(true);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop(true);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollTop: kind.inherit(function (sup) {\n\t\treturn function(top) {\n\t\t\tthis.stop(true);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tgetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this.isScrolling() ? this.scrollLeft : sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tgetScrollTop: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this.isScrolling() ? this.scrollTop : sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcalcScrollNode: function () {\n\t\treturn this.$.client.hasNode();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcAutoScrolling: function () {\n\t\tvar v = (this.vertical == 'auto');\n\t\tvar h = (this.horizontal == 'auto') || (this.horizontal == 'default');\n\t\tif ((v || h) && this.scrollNode) {\n\t\t\tvar b = this.getScrollBounds();\n\t\t\tif (v) {\n\t\t\t\tthis.$.scrollMath.vertical = b.height > b.clientHeight;\n\t\t\t}\n\t\t\tif (h) {\n\t\t\t\tthis.$.scrollMath.horizontal = b.width > b.clientWidth;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshouldDrag: function (sender, e) {\n\t\tthis.calcAutoScrolling();\n\t\tvar requestV = e.vertical;\n\t\tvar canH = this.$.scrollMath.horizontal && !requestV;\n\t\tvar canV = this.$.scrollMath.vertical && requestV;\n\t\tvar down = e.dy < 0, right = e.dx < 0;\n\t\tvar oobV = (!down && this.startEdges.top || down && this.startEdges.bottom);\n\t\tvar oobH = (!right && this.startEdges.left || right && this.startEdges.right);\n\t\t// we would scroll if not at a boundary\n\t\tif (!e.boundaryDragger && (canH || canV)) {\n\t\t\te.boundaryDragger = this;\n\t\t}\n\t\t// include boundary exclusion\n\t\tif ((!oobV && canV) || (!oobH && canH)) {\n\t\t\te.dragger = this;\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflick: function (sender, e) {\n\t\tvar onAxis = Math.abs(e.xVelocity) > Math.abs(e.yVelocity) ? this.$.scrollMath.horizontal : this.$.scrollMath.vertical;\n\t\tif (onAxis && this.dragging) {\n\t\t\tthis.$.scrollMath.flick(e);\n\t\t\treturn this.preventDragPropagation;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdown: kind.inherit(function (sup) {\n\t\treturn function (sender, e) {\n\t\t\tif (!this.isOverscrolling()) {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tmove: function (sender, e) {\n\t},\n\n\t// Special synthetic DOM events served up by the Gesture system\n\n\t/**\n\t* @fires enyo.TouchScrollStrategy#onShouldDrag\n\t* @private\n\t*/\n\tdragstart: function (sender, e) {\n\t\t// Ignore drags sent from multi-touch events\n\t\tif(!this.dragDuringGesture && e.srcEvent.touches && e.srcEvent.touches.length > 1) {\n\t\t\treturn true;\n\t\t}\n\t\t// note: allow drags to propagate to parent scrollers via data returned in the shouldDrag event.\n\t\tthis.doShouldDrag(e);\n\t\tthis.dragging = (e.dragger == this || (!e.dragger && e.boundaryDragger == this));\n\t\tif (this.dragging) {\n\t\t\tif(this.preventDefault){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t// note: needed because show/hide changes\n\t\t\t// the position so sync'ing is required when\n\t\t\t// dragging begins (needed because show/hide does not trigger onscroll)\n\t\t\tthis.syncScrollMath();\n\t\t\tthis.$.scrollMath.startDrag(e);\n\t\t\tif (this.preventDragPropagation) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrag: function (sender, e) {\n\t\t// if the list is doing a reorder, don't scroll\n\t\tif(this.listReordering) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.dragging) {\n\t\t\tif(this.preventDefault){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthis.$.scrollMath.drag(e);\n\t\t\tif (this.scrim) {\n\t\t\t\tthis.$.scrim.show();\n\t\t\t}\n\t\t}\n\t},\n\tdragfinish: function (sender, e) {\n\t\tif (this.dragging) {\n\t\t\te.preventTap();\n\t\t\tthis.$.scrollMath.dragFinish();\n\t\t\tthis.dragging = false;\n\t\t\tif (this.scrim) {\n\t\t\t\tthis.$.scrim.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmousewheel: function (sender, e) {\n\t\tif (!this.dragging && this.useMouseWheel) {\n\t\t\tthis.calcBoundaries();\n\t\t\tthis.syncScrollMath();\n\t\t\tthis.stabilize();\n\t\t\tif (this.$.scrollMath.mousewheel(e)) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStart: function () {\n\t\tif (this.scrollNode && !this.isScrolling()) {\n\t\t\tthis.scrolling = true;\n\t\t\tif (!this.isOverscrolling()) {\n\t\t\t\tthis.calcBoundaries();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathScroll: function (sender) {\n\t\tif(!this.overscroll) {\n\t\t\t//don't overscroll past edges\n\t\t\tthis.effectScroll(-Math.min(sender.leftBoundary, Math.max(sender.rightBoundary, sender.x)),\n\t\t\t\t\t-Math.min(sender.topBoundary, Math.max(sender.bottomBoundary, sender.y)));\n\t\t} else {\n\t\t\tthis.effectScroll(-sender.x, -sender.y);\n\t\t}\n\t\tif (this.thumb) {\n\t\t\tthis.showThumbs();\n\t\t\tthis.delayHideThumbs(100);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStop: function () {\n\t\tthis.scrolling = false;\n\t\tthis.effectScrollStop();\n\t\tif (this.thumb) {\n\t\t\tthis.delayHideThumbs(100);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStabilize: function (sender) {\n\t\tthis.effectScroll(-sender.x, -sender.y);\n\t\tif (this.thumb) {\n\t\t\tthis.showThumbs();\n\t\t\tthis.delayHideThumbs(100);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcBoundaries: function () {\n\t\tvar s = this.$.scrollMath || this, b = this._getScrollBounds();\n\t\ts.bottomBoundary = b.clientHeight - b.height;\n\t\ts.rightBoundary = b.clientWidth - b.width;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsyncScrollMath: function () {\n\t\tvar m = this.$.scrollMath;\n\t\tif(m) {\n\t\t\tm.setScrollX(-this.getScrollLeft());\n\t\t\tm.setScrollY(-this.getScrollTop());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectScroll: function (x, y) {\n\t\tif (this.scrollNode) {\n\t\t\tthis.scrollLeft = this.scrollNode.scrollLeft = x;\n\t\t\tthis.scrollTop = this.scrollNode.scrollTop = y;\n\t\t\tthis.effectOverscroll(x !== null? Math.round(x): x, y !== null? Math.round(y): y);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectScrollStop: function () {\n\t\tthis.effectOverscroll(null, null);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectOverscroll: function (x, y) {\n\t\tvar n = this.scrollNode;\n\t\tvar xt = '0', yt = '0', zt = this.accel ? ',0' : '';\n\t\tif (y !== null && Math.abs(y - n.scrollTop) > 1) {\n\t\t\tyt = (n.scrollTop - y);\n\t\t}\n\t\tif (x !== null && Math.abs(x - n.scrollLeft) > 1) {\n\t\t\txt = (n.scrollLeft - x);\n\t\t}\n\t\tif(!this.transform) {\n\t\t\t//adjust top/left if browser can't handle translations\n\t\t\tthis.$.client.setBounds({left:xt + 'px', top:yt + 'px'});\n\t\t} else {\n\t\t\tDom.transformValue(this.$.client, this.translation, xt + 'px, ' + yt + 'px' + zt);\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves the overscroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t*\n\t* @returns {enyo.Scroller~OverscrollBoundaryObject} An [object]{@glossary Object}\n\t*\tdescribing the overscroll boundaries.\n\t* @public\n\t*/\n\tgetOverScrollBounds: function () {\n\t\tvar m = this.$.scrollMath || this;\n\t\treturn {\n\t\t\toverleft: Math.min(m.leftBoundary - m.x, 0) || Math.max(m.rightBoundary - m.x, 0),\n\t\t\tovertop: Math.min(m.topBoundary - m.y, 0) || Math.max(m.bottomBoundary - m.y, 0)\n\t\t};\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\t_getScrollBounds: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tvar r = sup.apply(this, arguments);\n\t\t\tutils.mixin(r, this.getOverScrollBounds());\n\t\t\treturn r;\n\t\t};\n\t}),\n\n\t/**\n\t* Retrieves the scroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t*\n\t* @returns {enyo.Scroller~BoundaryObject} An [object]{@glossary Object} describing the\n\t*\tscroll boundaries.\n\t* @method\n\t* @public\n\t*/\n\tgetScrollBounds: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop(true);\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* This method exists primarily to support an internal use case for\n\t* [enyo.DataList]{@link enyo.DataList}. It is intended to be called by the\n\t* [scroller]{@link enyo.Scroller} that owns this strategy.\n\t*\n\t* Triggers a remeasurement of the scroller's metrics (specifically, the\n\t* size of its viewport, the size of its contents and the difference between\n\t* the two, which determines the extent to which the scroller may scroll).\n\t*\n\t* @public\n\t*/\n\tremeasure: function () {\n\t\tthis.calcBoundaries();\n\t\tif (this.thumb) {\n\t\t\tthis.syncThumbs();\n\t\t}\n\t\tthis.stabilize();\n\t},\n\n\t/**\n\t* Displays the scroll indicators and sets the auto-hide timeout.\n\t*\n\t* @public\n\t*/\n\talertThumbs: function () {\n\t\tthis.showThumbs();\n\t\tthis.delayHideThumbs(500);\n\t},\n\n\t/**\n\t* Syncs the vertical and horizontal scroll indicators.\n\t*\n\t* @public\n\t*/\n\tsyncThumbs: function () {\n\t\tthis.$.vthumb.sync(this);\n\t\tthis.$.hthumb.sync(this);\n\t},\n\tupdateThumbs: function () {\n\t\tthis.$.vthumb.update(this);\n\t\tthis.$.hthumb.update(this);\n\t},\n\n\t/**\n\t* Syncs and shows both the vertical and horizontal scroll indicators. We only sync after we\n\t* have checked if the vertical and/or horizontal scroll indicators are to be shown, so that\n\t* {@link enyo.ScrollThumb#update} accurately makes calculations when the indicators are\n\t* visible.\n\t*\n\t* @public\n\t*/\n\tshowThumbs: function () {\n\t\tif (this.horizontal != 'hidden') {\n\t\t\tthis.$.hthumb.show();\n\t\t}\n\t\tif (this.vertical != 'hidden') {\n\t\t\tthis.$.vthumb.show();\n\t\t}\n\t\tthis.syncThumbs();\n\t},\n\n\t/**\n\t* Hides the vertical and horizontal scroll indicators.\n\t*\n\t* @public\n\t*/\n\thideThumbs: function () {\n\t\tthis.$.vthumb.hide();\n\t\tthis.$.hthumb.hide();\n\t},\n\n\t/**\n\t* Hides the vertical and horizontal scroll indicators asynchronously.\n\t*\n\t* @public\n\t*/\n\tdelayHideThumbs: function (delay) {\n\t\tthis.$.vthumb.delayHide(delay);\n\t\tthis.$.hthumb.delayHide(delay);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control'),\n\tTableCell = require('./TableCell');\n\n/**\n* {@link enyo.TableRow} implements an HTML [&lt;tr&gt;]{@glossary tr} element.\n*\n* @class enyo.TableRow\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.TableRow.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.TableRow',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'tr',\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: TableCell\n});","var\n\tkind = require('../../enyo/lib/kind');\n\nvar\n\tFittableLayout = require('./FittableLayout'),\n\tFittableColumnsLayout = FittableLayout.Columns;\n\n/**\n* {@link enyo.FittableColumns} provides a container in which items are laid out in a\n* set of vertical columns, with most items having natural size, but one\n* expanding to fill the remaining space. The one that expands is labeled with\n* the attribute `fit: true`.\n*\n* For more information, see the documentation on\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\n* Enyo Developer Guide.\n*\n* @ui\n* @class  enyo.FittableColumns\n* @extends enyo.Control\n* @public\n*/\nmodule.exports = kind(/** @lends  enyo.FittableColumns.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.FittableColumns',\n\n\t/**\n\t* A {@glossary kind} used to manage the size and placement of child\n\t* [components]{@link enyo.Component}.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @private\n\t*/\n\tlayoutKind: FittableColumnsLayout,\n\n\t/**\n\t* By default, items in columns stretch to fit vertically; set to `true` to\n\t* avoid this behavior.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tnoStretch: false\n});","var\n\tkind = require('../../enyo/lib/kind')\t;\n\nvar\n\tFittableLayout = require('./FittableLayout'),\n\tFittableRowsLayout = FittableLayout.Rows;\n\n/**\n* {@link enyo.FittableRows} provides a container in which items are laid out in a\n* set\tof horizontal rows, with most of the items having natural size, but one\n* expanding to fill the remaining space. The one that expands is labeled with\n* the attribute `fit: true`.\n*\n* For more information, see the documentation on\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\n* Enyo Developer Guide.\n*\n* @ui\n* @class  enyo.FittableRows\n* @extends enyo.Control\n* @public\n*/\nmodule.exports = kind(/** @lends  enyo.FittableRows.prototype */{\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.FittableRows',\n\n\t/**\n\t* A {@glossary kind} used to manage the size and placement of child\n\t* [components]{@link enyo.Component}.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @private\n\t*/\n\tlayoutKind: FittableRowsLayout,\n\n\t/**\n\t* By default, items in columns stretch to fit horizontally; set to `true` to\n\t* avoid this behavior.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tnoStretch: false\n});","var\n    dispatcher = require('../../enyo/lib/dispatcher'),\n    dom = require('../../enyo/lib/dom'),\n    gesture = require('../../enyo/lib/gesture'),\n    logger = require('../../enyo/lib/logger'),\n    master = require('../../enyo/lib/master'),\n    platform = require('../../enyo/lib/platform'),\n    roots = require('../../enyo/lib/roots'),\n    utils = require('../../enyo/lib/utils'),\n    Component = require('../../enyo/lib/Component'),\n    Control = require('../../enyo/lib/Control'),\n    Signals = require('../../enyo/lib/Signals');\n\nvar\n    Accelerator = require('./accelerator'),\n    Container = require('./container'),\n    Muter = require('./muter'),\n    NearestNeighbor = require('./neighbor'),\n    Scrolling = require('./scrolling'),\n    TestMode = require('./testmode'),\n    Util = require('./util');\n\n/**\n* Spotlight is an extensible utility that enables users to navigate\n* Enyo applications using a keyboard or television remote control.\n*\n* @namespace enyo.Spotlight\n*/\nvar Spotlight = module.exports = new function () {\n\n    /**\n    * Reference to this to be inherited by private closures below.\n    * @type {Object}\n    * @private\n    */\n    var _oThis = this,\n\n        /**\n        * Topmost component instance where Spotlight events are caught.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oRoot = null,\n\n        /**\n        * Is set by `spot()` if it is called before `initialize()`, will be\n        * spotted in `initialize()`.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oDefaultControl = null,\n\n        /**\n        * Whether Spotlight is in pointer mode (as opposed to 5-way mode).\n        * @type {Boolean}\n        * @default true\n        * @private\n        */\n        _bPointerMode = true,\n\n        /**\n        * Whether Spotlight has `_oCurrent`.\n        * @type {Boolean}\n        * @default false\n        * @private\n        */\n        _bInitialized = false,\n\n        /**\n        * State variable allowing us to suppress Spotlight select on\n        * keyup in the specific case where a press of the [Enter] key\n        * has just triggered a switch from pointer mode to 5-way mode\n        * (since we only want to switch modes in this case, not perform\n        * a selection)\n        * @type {Boolean}\n        * @default false\n        * @private\n        */\n        _bSuppressSelectOnNextKeyUp = false,\n\n        /**\n        * The currently spotted element.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oCurrent = null,\n\n        /**\n        * The last event received by Spotlight.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oLastEvent = null,\n\n        /**\n        * The last 5-way event received by Spotlight.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oLast5WayEvent = null,\n\n        /**\n        * The last non-container `(spotlight: true)` control that was `_oCurrent`.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oLastControl = null,\n\n        /**\n        * For things like input boxes, we need a way to disable pointer mode while\n        * cursor is inside.\n        * @type {Boolean}\n        * @default true\n        * @private\n        */\n        _bEnablePointerMode = true,\n\n        /**\n        * For keeping state consistency between `onMouseDown()` and `onMouseUp()`,\n        * if focus has been moved in between.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oDepressedControl = null,\n\n        /**\n        * In verbose mode, Spotlight prints 1) Current 2) Pointer mode change to `enyo.log`.\n        * @type {Boolean}\n        * @default false\n        * @private\n        */\n        _bVerbose = false,\n\n        /**\n        * While frozen, current cannot change and all events are directed to it.\n        * @type {Boolean}\n        * @default false\n        * @private\n        */\n        _bFrozen = false,\n\n        /**\n        * Contains the control specified in `defaultSpotlightDisappear` property of\n        * `_oCurrent`.\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oDefaultDisappear = null,\n\n        /**\n        * Whether focus is currently visible onscreen `(hasCurrent && !pointingAway)`.\n        * @type {Boolean}\n        * @default false\n        * @private\n        */\n        _bFocusOnScreen = false,\n\n        /**\n        * Number of consecutive mousemoves; `>1` is required to switch to pointer mode.\n        * @type {Number}\n        * @default 0\n        * @private\n        */\n        _nMouseMoveCount = 0,\n\n        /**\n        * @type {Number}\n        * @default null\n        * @private\n        */\n        _nPrevClientX = null,\n\n        /**\n        * @type {Number}\n        * @default null\n        * @private\n        */\n        _nPrevClientY = null,\n\n        /**\n        * @type {Object}\n        * @default null\n        * @private\n        */\n        _oLastMouseMoveTarget = null,\n\n        /**\n        * Timestamp at the last point the pointer was hidden.\n        * @type {Number}\n        * @default 0\n        * @private\n        */\n        _nPointerHiddenTime = 0,\n\n        /**\n        * Length of time in milliseconds required after hiding pointer before 5-way keys\n        * are processed.\n        * @type {Number}\n        * @default 300\n        * @private\n        */\n        _nPointerHiddenToKeyTimeout = 300,\n\n        /**\n        * If a key down was ignored, be sure to ignore the following key up. Specifically, this\n        * works around the different target keyup for Enter for inputs (input on down, body on up).\n        *\n        * @type {Number}\n        * @default 0\n        * @private\n        */\n        _nIgnoredKeyDown = 0;\n\n        /**\n        * @constant\n        * @type {Number}\n        * @default 1536\n        */\n    var KEY_POINTER_SHOW = 1536,\n\n        /**\n        * @constant\n        * @type {Number}\n        * @default 1537\n        */\n        KEY_POINTER_HIDE = 1537;\n\n\n    var\n        /**\n        * Event hook to the owner to catch Spotlight events.\n        *\n        * @private\n        */\n        _interceptEvents = function() {\n            _oThis.rootDispatchFunction = master.dispatchEvent;\n            master.dispatchEvent = function(sEventName, oEvent, oSender) {\n                if (_oThis.rootDispatchFunction.apply(master, [sEventName, oEvent, oSender])) {\n                    return true;\n                }\n                if (!oEvent.delegate) {\n                    return _oThis.onSpotlightEvent(oEvent);\n                }\n            };\n        },\n\n        /**\n        * Creates control-specific Spotlight state storage.\n        *\n        * @param {Object} oControl - The control to be initialized.\n        * @private\n        */\n        _initializeControl = function(oControl) {\n            if (typeof oControl._spotlight == 'undefined') {\n                oControl._spotlight = {};\n            }\n        },\n\n        /**\n        * Gets control specified in `defaultSpotlightDisappear` property\n        * of `_oCurrent`. Gotta get it before it disappears :)\n        *\n        * @param {Object} oControl\n        * @private\n        */\n        _setDefaultDisappearControl = function() {\n            _oDefaultDisappear = _oThis.Util.getDefaultDirectionControl(\n                'disappear',\n                _oCurrent\n            );\n        },\n\n        /**\n        * Observer\n        *\n        * @param {Object} oControl\n        * @private\n        */\n        _onDisappear = function() {\n\n            // Only handle disappearance once\n            if (_onDisappear.isOff) {\n                return;\n            }\n\n            // Ignore if control is still spotable\n            if (_oThis.isSpottable(_oCurrent)) {\n                return;\n            }\n            _onDisappear.isOff = true;\n            var oControl = _oDefaultDisappear;\n\n            // Nothing is set in defaultSpotlightDisappear\n            if (!oControl || !_oThis.isSpottable(oControl)) {\n\n                // Find first spottable in the app\n                oControl = _oThis.getFirstChild(_oRoot);\n                if (!oControl) {\n                    _unhighlight(_oLastControl);\n                    _oLastControl = null;\n                    \n                    _observeDisappearance(false, _oCurrent);\n                    // NULL CASE :(, just like when no spottable children found on init\n                    _oCurrent = null;\n                    return;\n                }\n\n                // Prevent unmanageable case when _oCurrent is undefined\n                // if (!oControl) { throw 'SPOTLIGHT: No spottable controls found'; }\n            }\n\n            // Spot first child of the app\n            _oThis.spot(oControl);\n        },\n\n        /**\n        * Adds observers on control's parent chain.\n        *\n        * @param {Boolean} bObserve\n        * @param {Object} oControl\n        * @param {Boolean} bInAncestor\n        * @private\n        */\n        _observeDisappearance = function(bObserve, oControl, bInAncestor) {\n\n            // Terminal case\n            if (!oControl) {\n                return;\n            }\n            var sMethod = bObserve ? 'addObserver' : 'removeObserver';\n\n            // When processing _oCurrent itself\n            if (!bInAncestor) {\n\n                // When adding observer to _oCurrent itself\n                if (bObserve) {\n\n                    // Set one-time-call flag of _onDisappear function\n                    _onDisappear.isOff = false;\n\n                    // Capture defaultSpotlightDisappear control\n                    _setDefaultDisappearControl();\n                }\n\n                // Enough to check in _oCurrent only, no ancestors\n                oControl[sMethod]('disabled', _onDisappear);\n\n                // Enough to check in _oCurrent only, no ancestors\n                oControl[sMethod]('destroyed', _onDisappear);\n\n                // Enough to check in _oCurrent only, no ancestors\n                oControl[sMethod]('spotlight', _onDisappear);\n\n                // Enough to check in _oCurrent only, no ancestors\n                oControl[sMethod]('generated', _onDisappear);\n            }\n\n            // Have to add-remove hadler to all ancestors for showing\n            oControl[sMethod]('showing', _onDisappear);\n\n            _observeDisappearance(bObserve, oControl.parent, true);\n        },\n\n        /**\n        * Sets currently spotted control.\n        *\n        * @param {Object} oControl - The control to be spotted.\n        * @private\n        */\n        _setCurrent = function(oControl) {\n            _initializeControl(oControl);\n\n            if (!_oThis.isSpottable(oControl)) {\n                throw 'Attempting to spot not-spottable control: ' + oControl.toString();\n            }\n\n            var oExCurrent = _oCurrent;\n\n            // Remove spotlight class and Blur\n            _oThis.unspot();\n\n            // Add spotlight class\n            _highlight(oControl);\n\n            _oCurrent = oControl;\n\n            // Set observers asynchronously to allow painti to happen faster\n            setTimeout(function() {\n                _observeDisappearance(false, oExCurrent);\n                _observeDisappearance(true, _oCurrent);\n            }, 1);\n\n            _oThis.Container.fireContainerEvents(oExCurrent || _oLastControl, _oCurrent);\n\n            _log('CURRENT =', _oCurrent.toString());\n            Signals.send('onSpotlightCurrentChanged', {\n                current: oControl\n            });\n\n            if (oControl.spotlight === true) {\n                _oLastControl = oControl;\n            }\n\n            _dispatchEvent('onSpotlightFocused');\n\n            _oThis.TestMode.highlight();\n\n            return true;\n        },\n\n        /**\n        * Artificially triggers events (e.g., `click`) on current control.\n        *\n        * @private\n        */\n        _dispatchEvent = function(sEvent, oData, oControl) {\n            oControl = oControl || _oThis.getCurrent();\n            return _oThis.Util.dispatchEvent(sEvent, oData, oControl);\n        },\n\n        /**\n        * Moves to nearest neighbor based on 5-way Spotlight event.\n        *\n        * @param {Object} oEvent - The current 5-way event.\n        * @private\n        */\n        _5WayMove = function(oEvent) {\n            var sDirection = oEvent.type.replace('onSpotlight', '').toUpperCase(),\n                leave = oEvent.requestLeaveContainer,\n                oControl = !leave && _oThis.NearestNeighbor.getNearestNeighbor(sDirection);\n\n\n            // If oEvent.allowDomDefault() was not called\n            // this will preventDefault on dom keydown event\n            _preventDomDefault(oEvent);\n            _oLast5WayEvent = oEvent;\n\n            if (oControl) {\n                _oThis.spot(oControl, sDirection);\n            } else {\n                if (_oThis.Accelerator.isAccelerating()) {\n                    _oThis.Accelerator.cancel();\n                } else {\n                    var oParent = _oThis.getParent();\n\n                    // Reached the end of spottable world\n                    if (!oParent || oParent.spotlightModal) {\n                        _oThis.spot(_oLastControl);\n                    } else {\n                        _oThis.spot(oParent, sDirection);\n                    }\n                }\n            }\n        },\n\n        /**\n        * Determines whether `oEvent.keyCode` represents a 5-way key.\n        *\n        * @param {Object} oEvent - The current 5-way event.\n        * @return {Boolean} `true` if `keyCode` is a 5-way key (i.e., a directional arrow\n        * or Enter); otherwise, `false`.\n        * @private\n        */\n        _is5WayKey = function(oEvent) {\n\n            // 13==Enter, 16777221==KeypadEnter\n            return (utils.indexOf(oEvent.keyCode, [37, 38, 39, 40, 13, 16777221]) > -1);\n        },\n\n        /**\n        * Determines whether the key that was pressed is supposed to be ignored by the\n        * event's originator.  Checks whether the originator of the event had any keyCodes\n        * specified as ones to ignore, returning `true` if it was supposed to ignore the\n        * `oEvent.keyCode`, or `false` if not.\n        *\n        * @param {Object} oEvent - The current 5-way event.\n        * @return {Boolean} `true` if the keyCode should be ignored; otherwise, `false`.\n        * @private\n        */\n        _isIgnoredKey = function(oEvent) {\n            var oOriginator = dispatcher.$[oEvent.target.id];\n            if (oOriginator && oOriginator.spotlightIgnoredKeys) {\n                var aKeys = oOriginator.spotlightIgnoredKeys;\n                if (!utils.isArray(aKeys)) {\n                    aKeys = [aKeys];\n                }\n                if (utils.indexOf(oEvent.keyCode, aKeys) > -1) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        /**\n        * Prevents default on DOM event associated with Spotlight event.\n        * This is only for 5-way keydown events.\n        *\n        * @param {Object} oEvent - The current 5-way event.\n        * @private\n        */\n        _preventDomDefault = function(oSpotlightEvent) {\n\n            // Prevent default to keep the browser from scrolling the page, etc.,\n            if (_is5WayKey(oSpotlightEvent)) {\n\n                // unless Event.allowDomDefault is explicitly called on the event\n                oSpotlightEvent.domEvent.preventDefault();\n            }\n        },\n\n        /**\n        * If originator is container, delegates processing of event\n        * to `enyo.Spotlight.Container.onSpotlight*`. If delegate method is\n        * found, its return value is returned; otherwise, `true` is returned.\n        *\n        * @param {Object} oEvent - The current 5-way event.\n        * @return {Boolean}\n        * @private\n        */\n        _delegateContainerEvent = function(oEvent) {\n            if (oEvent.type && oEvent.type.indexOf('onSpotlight') === 0) {\n                if (_oThis.isContainer(oEvent.originator)) {\n                    if (typeof _oThis.Container[oEvent.type] == 'function') {\n                        return _oThis.Container[oEvent.type](oEvent.originator, oEvent);\n                    }\n                }\n            }\n            return false;\n        },\n\n        /**\n        * Gets spottable target by id for pointer events.\n        *\n        * @param {String} sId - String ID of target.\n        * @return {Object} - The spottable target.\n        * @private\n        */\n        _getTarget = function(sId) {\n            var oTarget = dispatcher.$[sId];\n            if (typeof oTarget != 'undefined') {\n                if (_oThis.isSpottable(oTarget)) {\n                    return oTarget;\n                } else {\n                    return _oThis.getParent(oTarget);\n                }\n            }\n        },\n\n        /**\n        * Highlights the specified control.\n        *\n        * @param {Object} oControl - The control to be highlighted.\n        * @param {Boolean} bIgnoreMute - Whether muting should be ignored.\n        * @private\n        */\n        _highlight = function(oControl, bIgnoreMute) {\n\n            // Not highlighting when muted\n            if (_oThis.isMuted() && !bIgnoreMute) {\n                return;\n            }\n\n            // Not highlighting containers\n            if (_oThis.isContainer(oControl)) {\n                return;\n            }\n\n            // Not highlighting first non-container control - see this.initialize()\n            if (!_oThis.isInitialized()) {\n                return;\n            }\n\n            // enyo.Spotlight.bench.stop();\n            oControl.addClass('spotlight');\n            _bFocusOnScreen = true;\n        },\n\n        /**\n        * Unhighlights a control.\n        *\n        * @param {Object} oControl - The control to be unhighlighted.\n        * @private\n        */\n        _unhighlight = function(oControl) {\n            oControl.removeClass('spotlight');\n            _bFocusOnScreen = false;\n        },\n\n        /**\n        * Determines whether pointer is pointing away.\n        *\n        * @return {Boolean} `true` if pointer is pointing away; otherwise, `false`.\n        * @private\n        */\n        _isPointingAway = function() {\n            return _oThis.getPointerMode() && !_oLastMouseMoveTarget;\n        },\n\n        /**\n        * Determines whether timestamp is expired.\n        *\n        * @return {Boolean} `true` if timestamp is expired; otherwise, `false`.\n        * @private\n        */\n        _isTimestampExpired = function() {\n            return utils.perfNow() >= (_nPointerHiddenTime + _nPointerHiddenToKeyTimeout);\n        },\n\n        /**\n        * Sets the timestamp.\n        *\n        * @private\n        */\n        _setTimestamp = function() {\n            _nPointerHiddenTime = utils.perfNow();\n        },\n\n        /**\n        * Logs messages if verbose mode is enabled.\n        *\n        * @private\n        */\n        _log = function() {\n            if (_bVerbose) {\n                logger.log('SPOTLIGHT: ' + Array.prototype.slice.call(arguments, 0).join(' '));\n            }\n        },\n\n        /**\n        * Emits warning messages.\n        *\n        * @name Spotlight#_warn\n        * @type {Function}\n        * @private\n        */\n        _warn = function() {\n            logger.warn('SPOTLIGHT: ' + Array.prototype.slice.call(arguments, 0).join(' '));\n        },\n\n        /**\n        * Spots the last control.\n        *\n        * @private\n        */\n        _spotLastControl = function() {\n            if (_oThis.isSpottable(_oLastControl)) {\n                _oThis.spot(_oLastControl);\n            } else {\n                _oThis.spot(_oThis.getFirstChild(_oRoot));\n            }\n        },\n\n        /**\n        * Attempts to spot the control nearest the current pointer position.\n        * If no nearest control is found, the previous control is spotted.\n        *\n        * @param {Object} oEvent - The current event.\n        * @private\n        */\n        _spotNearestToPointer = function(oEvent) {\n            var oNearest = _oThis.\n            NearestNeighbor.\n            getNearestPointerNeighbor(_oRoot,\n                _getSpotDirection(oEvent),\n                _nPrevClientX,\n                _nPrevClientY);\n            if (oNearest) {\n                _oThis.spot(oNearest);\n            } else {\n                _spotLastControl();\n            }\n        },\n\n        /**\n        * Determines the intended direction of a keypress, given a keydown event.\n        *\n        * @param {Object} oEvent - The event whose direction is to be determined.\n        * @private\n        */\n        _getSpotDirection = function(oEvent) {\n            switch (oEvent.keyCode) {\n                case 37:\n                    return \"LEFT\";\n                case 38:\n                    return \"UP\";\n                case 39:\n                    return \"RIGHT\";\n                case 40:\n                    return \"DOWN\";\n            }\n        };\n\n    //* Generic event handlers\n    /***************************************************/\n\n    // Events dispatched to the spotlighted controls\n    this.onEvent = function(oEvent) {\n\n        // Events only processed when Spotlight initialized with a root\n        if (this.isInitialized()) {\n            switch (oEvent.type) {\n                case 'focus':\n                    if (oEvent.target === window) {\n                        // Update pointer mode from cursor visibility platform API\n                        if (window.PalmSystem && window.PalmSystem.cursor) {\n                            this.setPointerMode( window.PalmSystem.cursor.visibility );\n                        }\n                        // Whenever app goes to foreground, refocus on last focused control\n                        this.spot(this.getLastControl());\n                    }\n                    break;\n                case 'blur':\n                    if (oEvent.target === window) {\n                        // Whenever app goes to background, unspot focus\n                        this.unspot();\n                    }\n                    break;\n                case 'move':\n\n                    // Only register mousemove if the x/y actually changed,\n                    // avoid mousemove while scrolling, etc.\n                    // We require two mousemove events to switch to pointer\n                    // mode, since the device can send an errant mousemove\n                    // when pressing a 5-way key for the first time\n                    if (this.clientXYChanged(oEvent) && (_nMouseMoveCount++ > 1)) {\n                        return this.onMouseMove(oEvent);\n                    }\n                    break;\n                case 'mousedown':\n                    return this.onMouseDown(oEvent);\n                case 'mouseup':\n                    return this.onMouseUp(oEvent);\n                case 'click':\n                case 'tap':\n                case 'ontap':\n                    return this.onClick(oEvent);\n                case 'mousewheel':\n                    // Don't dispatch spotlight mousewheel events if pointing away\n                    if (_isPointingAway()) {\n                        return false;\n                    }\n                    return this.Scrolling.processMouseWheel(oEvent, this.onScroll, this);\n                case 'keydown':\n                    return this.onKeyDown(oEvent);\n                case 'keyup':\n                    return this.onKeyUp(oEvent);\n            }\n        }\n        return false; // Because we like to be explicit\n    };\n\n    /**\n    * Receives accelerated keyup and keydown from accelerator.\n    *\n    * @method\n    * @name Spotlight#onAcceleratedKey\n    * @param {Object} oEvent - The event to interpret.\n    * @public\n    */\n    this.onAcceleratedKey = function(oEvent) {\n        oEvent.domEvent = oEvent;\n        oEvent.allowDomDefault = function() {\n            oEvent.preventDefault = function() {\n                //logger.log('Dummy function');\n            };\n        };\n        gesture.drag.prepareHold(oEvent);\n        switch (oEvent.type) {\n            case 'keydown':\n                return _dispatchEvent('onSpotlightKeyDown', oEvent);\n            case 'keyup':\n                return _dispatchEvent('onSpotlightKeyUp', oEvent);\n        }\n\n        return true; // Should never get here\n    };\n\n    // Spotlight events bubbled back up to the App\n    this.onSpotlightEvent = function(oEvent) {\n        _oLastEvent = oEvent;\n\n        if (!_delegateContainerEvent(oEvent)) {\n            switch (oEvent.type) {\n\n                /**\n                * @event Spotlight#onSpotlightKeyUp\n                * @public\n                */\n                case 'onSpotlightKeyUp':\n                    return this.onSpotlightKeyUp(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightKeyDown\n                * @public\n                */\n                case 'onSpotlightKeyDown':\n                    return this.onSpotlightKeyDown(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightFocus\n                * @public\n                */\n                case 'onSpotlightFocus':\n                    return this.onSpotlightFocus(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightFocused\n                * @public\n                */\n                case 'onSpotlightFocused':\n                    return this.onSpotlightFocused(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightBlur\n                * @public\n                */\n                case 'onSpotlightBlur':\n                    return this.onSpotlightBlur(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightLeft\n                * @public\n                */\n                case 'onSpotlightLeft':\n                    return this.onSpotlightLeft(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightRight\n                * @public\n                */\n                case 'onSpotlightRight':\n                    return this.onSpotlightRight(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightUp\n                * @public\n                */\n                case 'onSpotlightUp':\n                    return this.onSpotlightUp(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightDown\n                * @public\n                */\n                case 'onSpotlightDown':\n                    return this.onSpotlightDown(oEvent);\n\n                /**\n                * @event Spotlight#onSpotlightSelect\n                * @public\n                */\n                case 'onSpotlightSelect':\n                    return this.onSpotlightSelect(oEvent);\n            }\n        }\n    };\n\n    /**\n    * Called by `onEvent()` (via Spotlight scrolling) to process scroll events.\n    *\n    * @method\n    * @name Spotlight#onScroll\n    * @param {Object} oEvent - The current event.\n    * @param {Boolean} bUp - Whether scroll is in upward direction.\n    * @public\n    */\n    this.onScroll = function(oEvent, bUp) {\n        var sEventName = 'onSpotlightScroll' + (bUp ? 'Up' : 'Down');\n        return _dispatchEvent(sEventName, {\n            domEvent: oEvent\n        });\n    };\n\n    // Called by `onEvent()` to process mousemove events.\n    this.onMouseMove = function(oEvent) {\n        if (!_bEnablePointerMode) {\n            return;\n        }\n\n        // Preserving explicit setting of mode for future features\n        this.setPointerMode(true);\n        if (this.getPointerMode()) {\n            var oTarget = _getTarget(oEvent.target.id);\n            if (oTarget && !this.isContainer(oTarget)) {\n\n                if (\n                    oTarget === _oLastMouseMoveTarget && (\n                        oEvent.index === undefined ||\n                        oEvent.index === _oLastMouseMoveTarget._nCurrentSpotlightItem\n                    )\n                ) {\n                    return;\n                } // ignore consecutive mouse moves on same target\n                this.spot(oTarget, null, true);\n                _oLastMouseMoveTarget = oTarget;\n\n            } else {\n                _oLastMouseMoveTarget = null;\n                this.unspot();\n            }\n        }\n    };\n\n    // Called by `onEvent()` to process mousedown events.\n    this.onMouseDown = function(oEvent) {\n\n        // Run mousemove logic first, in case content beneath cursor changed since\n        // last mousemove, e.g. animating controls\n        this.onMouseMove(oEvent);\n\n        // Logic to exit frozen mode when depressing control other than current\n        // And transfer spotlight directly to it\n        if (this.isFrozen()) {\n            var oTarget = _getTarget(oEvent.target.id);\n            if (oTarget != _oCurrent && !oEvent.defaultPrevented) {\n                this.unfreeze();\n                this.unspot();\n                if (oTarget) {\n                    this.spot(oTarget, null, true);\n                }\n                return true;\n            }\n        }\n\n        if (this.getPointerMode()) {\n            return false;\n        } // Allow mousedown to bubble\n\n        // Simulate an Enter key from Magic Remote click in 5Way mode\n        oEvent.preventDefault();\n\n        var oEventClone = utils.clone(oEvent);\n        oEventClone.keyCode = 13;\n        oEventClone.domEvent = oEvent;\n        oEventClone.allowDomDefault = utils.nop;\n\n        _oDepressedControl = this.getCurrent();\n        _dispatchEvent('onSpotlightKeyDown', oEventClone, _oDepressedControl);\n\n        // Because we should never see mouse events in 5way mode\n        return true;\n    };\n\n    // Called by `onEvent()` to process mouseup events.\n    this.onMouseUp = function(oEvent) {\n        if (this.getPointerMode()) {\n            return false;\n        } // Allow mouseup to bubble\n\n        // Simulate an Enter key from Magic Remote click in 5Way mode\n        oEvent.preventDefault();\n\n        var oEventClone = utils.clone(oEvent);\n        oEventClone.keyCode = 13;\n        oEventClone.domEvent = oEvent;\n\n        _dispatchEvent('onSpotlightKeyUp', oEventClone, _oDepressedControl);\n        return true; // Because we should never see mouse events in 5way mode\n    };\n\n    // Called by `onEvent()` to process tap and click events.\n    this.onClick = function(oEvent) {\n        // Prevent browser-simulated \"click\" events when pressing enter\n        // on a focused form control from being processed;\n\n        // Prevent browser-simulated \"click\" events when pressing enter\n        // on a focused form control\n        if (this.Util.isSimulatedClick(oEvent)) {\n            return true;\n        }\n\n        // Allow click to bubble\n        if (this.getPointerMode()) {\n            return false;\n        }\n\n        // In 5Way mode we are simulating enter key down/up based\n        // on mousedown/up, so suppress click\n        oEvent.preventDefault();\n\n        // Because we should never see mouse events in 5way mode unles we simulated them\n        return !oEvent.fromSpotlight;\n    };\n\n    // Called by `onEvent()` to process keydown.\n    this.onKeyDown = function(oEvent) {\n\n        _bSuppressSelectOnNextKeyUp = false;\n\n        if (_isIgnoredKey(oEvent)) {\n            _nIgnoredKeyDown = oEvent.which;\n            return false;\n        } else {\n            _nIgnoredKeyDown = 0;\n        }\n\n        // Update pointer mode based on special keycode from\n        // Input Manager for magic remote show/hide\n        switch (oEvent.keyCode) {\n\n            // Pointer shown event; set pointer mode true\n            case KEY_POINTER_SHOW:\n                this.setPointerMode(true);\n                return false;\n\n                // Pointer hidden event; set pointer mode false\n            case KEY_POINTER_HIDE:\n                setTimeout(function() {\n                    if (this.getPointerMode()) {\n                        this.setPointerMode(false);\n\n                        // Spot last 5-way control, only if there's not already focus on screen\n                        if (!_oLastMouseMoveTarget) {\n                            utils.asyncMethod(this, function() {\n                                _spotLastControl();\n                            });\n                        }\n                        _setTimestamp();\n                    }\n                }.bind(this), 30);\n                return false;\n        }\n\n        // Arrow keys immediately switch to 5-way mode, and\n        // re-spot focus on screen if it wasn't already\n        if (_is5WayKey(oEvent)) {\n            var bWasPointerMode = this.getPointerMode();\n            this.setPointerMode(false);\n\n            // Spot first available control on bootstrap\n            if (!this.isSpottable(this.getCurrent()) ||\n                // Or does this immediately follow KEY_POINTER_HIDE\n                (!_isTimestampExpired() && !_oLastMouseMoveTarget) || \n                // Or spot last 5-way control, only if there's not already focus on screen\n                (bWasPointerMode && !_oLastMouseMoveTarget && !this.isFrozen())) {\n\n                _spotNearestToPointer(oEvent);\n                _bSuppressSelectOnNextKeyUp = oEvent.keyCode == 13;\n                return false;\n            }\n        }\n\n        // Don't dispatch spotlight key events if we're in pointer\n        // mode and not currently spotting something\n        if (_isPointingAway()) {\n            return false;\n        }\n        this.Accelerator.processKey(oEvent, this.onAcceleratedKey, this);\n\n        // Always allow key events to bubble regardless of what onSpotlight** handlers return\n        return false;\n    };\n\n    this.onKeyUp = function(oEvent) {\n        if (_nIgnoredKeyDown === oEvent.which || _isIgnoredKey(oEvent)) {\n            return false;\n        }\n\n        if (_bSuppressSelectOnNextKeyUp) {\n            _bSuppressSelectOnNextKeyUp = false;\n            return true;\n        }\n\n        this.Accelerator.processKey(oEvent, this.onAcceleratedKey, this);\n\n        // Always allow key events to bubble regardless of what onSpotlight** handlers return\n        return false;\n    };\n\n    //* Spotlight event handlers\n    /************************************************************/\n\n    this.onSpotlightRight = function(oEvent) {\n        _5WayMove(oEvent);\n    };\n    this.onSpotlightLeft = function(oEvent) {\n        _5WayMove(oEvent);\n    };\n    this.onSpotlightDown = function(oEvent) {\n        _5WayMove(oEvent);\n    };\n    this.onSpotlightUp = function(oEvent) {\n        _5WayMove(oEvent);\n    };\n\n    this.onSpotlightKeyUp = function(oEvent) {\n        var ret = true;\n        switch (oEvent.keyCode) {\n            case 13:\n                ret = _dispatchEvent('onSpotlightSelect', oEvent);\n                gesture.drag.endHold();\n        }\n\n        // Should never get here\n        return ret;\n    };\n    this.onSpotlightKeyDown = function(oEvent) {\n\n        switch (oEvent.keyCode) {\n            case 13:\n                if (!this.Accelerator.isAccelerating()) {\n                    gesture.drag.beginHold(oEvent);\n                }\n                return true;\n            case 37:\n                return _dispatchEvent('onSpotlightLeft', oEvent);\n            case 38:\n                return _dispatchEvent('onSpotlightUp', oEvent);\n            case 39:\n                return _dispatchEvent('onSpotlightRight', oEvent);\n            case 40:\n                return _dispatchEvent('onSpotlightDown', oEvent);\n        }\n\n        // Should never get here\n        return true;\n    };\n\n    this.onSpotlightSelect = function(oEvent) {\n\n        // If oEvent.allowDomDefault() was not called\n        // this will preventDefault on dom keydown event\n        _preventDomDefault(oEvent);\n        var aChildren,\n            oNeighbor = this.Util.getDefaultDirectionControl('SELECT', this.getCurrent());\n\n        // clear last 5way event\n        _oLast5WayEvent = null;\n\n        if (oNeighbor) {\n            return this.spot(oNeighbor);\n        }\n\n        aChildren = this.getChildren(oEvent.originator);\n        if (aChildren.length === 0) {\n            return _dispatchEvent('tap', {\n                    customEvent: false,\n                    preventDefault: utils.nop,\n                    fromSpotlight: true\n                },\n                oEvent.originator);\n        } else {\n            return this.spot(aChildren[0]);\n        }\n    };\n\n    /**\n    * Called when Spotlight is focusing on a control.\n    *\n    * @method\n    * @name Spotlight#onSpotlightFocus\n    * @param {Object} oEvent - The current event.\n    * @public\n    */\n    this.onSpotlightFocus = function(oEvent) {\n        _setCurrent(oEvent.originator);\n    };\n\n    /**\n    * Called after Spotlight has focused on a control.\n    *\n    * @method\n    * @name Spotlight#onSpotlightFocused\n    * @param {Object} oEvent - The current event.\n    * @public\n    */\n    this.onSpotlightFocused = function(oEvent) {};\n\n    /**\n    * Called when control's focus is blurred.\n    *\n    * @method\n    * @name Spotlight#onSpotlightBlur\n    * @param {Object} oEvent - The current event.\n    * @public\n    */\n    this.onSpotlightBlur = function(oEvent) {};\n\n    /**\n    * Initializes Spotlight's flags and root.\n    *\n    * @method\n    * @name Spotlight#initialize\n    * @param {Object} oRoot - The root container.\n    * @public\n    */\n    this.initialize = function(oRoot) {\n\n        // Prevent double init'ion, for example, it\n        // may be init'd in app.rendered before enyo.rendered.\n        if (this.isInitialized()) {\n            return false;\n        }\n\n        // Set root\n        _oRoot = oRoot;\n\n        // Capture spotlight events at root level of the app\n        _interceptEvents();\n\n        // From this point on, isInitialized() returns true.\n        // Need it to be true for spot() to spot\n        _bInitialized = true;\n\n        if (_oDefaultControl) {\n            if (this.spot(_oDefaultControl)) {\n                return true;\n            }\n        }\n\n        if (this.spot(this.getFirstChild(_oRoot))) {\n            return true;\n        }\n        //_warn('Spotlight initialization failed.\n        // No spottable children found in ' + _oRoot.toString());\n    };\n\n    /**\n    * Determines whether Spotlight has been initialized (i.e., it has `_oCurrent` and\n    * `last5waycontrol`).\n    *\n    * @method\n    * @name Spotlight#isInitialized\n    * @return {Boolean} `true` if Spotlight has been initialized; otherwise, `false`.\n    * @public\n    */\n    this.isInitialized = function() {\n        return _bInitialized;\n    };\n\n    /**\n    * Sets pointer mode.\n    *\n    * @method\n    * @name Spotlight#setPointerMode\n    * @param {Boolean} bPointerMode - Whether pointer mode should be enabled.\n    * @public\n    */\n    this.setPointerMode = function(bPointerMode) {\n        if ((_bPointerMode != bPointerMode) && (!platform.touch)) {\n            _bPointerMode = bPointerMode;\n            _log('Pointer mode', _bPointerMode);\n            _nMouseMoveCount = 0;\n            Signals.send('onSpotlightModeChanged', {\n                pointerMode: bPointerMode\n            });\n        }\n    };\n\n    this.getPointerMode = function() {\n        return _bPointerMode;\n    };\n    this.getCurrent = function() {\n        return _oCurrent;\n    };\n    this.setCurrent = function(oControl) {\n        return _setCurrent(oControl);\n    };\n    this.hasCurrent = function() {\n        return _oCurrent !== null;\n    };\n    this.getLastEvent = function() {\n        return _oLastEvent;\n    };\n    this.getLastControl = function() {\n        return _oLastControl;\n    };\n    this.getLast5WayEvent = function() {\n        return _oLast5WayEvent;\n    };\n\n    // Deprecated; provided for backward-compatibility.\n    this.setLast5WayControl = function(oControl) {\n        _oLastControl = oControl;\n    };\n\n    this.isSpottable = function(oControl, bSkipContainers) {\n        oControl = oControl || this.getCurrent();\n        if (!oControl) {\n            return false;\n        }\n        var bSpottable = false;\n\n        if (this.isContainer(oControl)) {\n            if (!bSkipContainers) {\n\n                // Are there spotlight=true descendants?\n                bSpottable = this.hasChildren(oControl);\n            }\n        } else {\n            bSpottable = (\n\n                // Control has been destroyed, but not yet garbage collected\n                !oControl.destroyed &&\n\n                // Control has spotlight property set\n                typeof oControl.spotlight != 'undefined' &&\n\n                // Control has spotlight=true or 'container'\n                oControl.spotlight &&\n\n                // Control is visible\n                oControl.getAbsoluteShowing(true) &&\n\n                // Control is not disabled\n                !oControl.disabled &&\n\n                // Control is rendered\n                oControl.generated &&\n\n                // Control does not have spotlight disabled\n                !oControl.spotlightDisabled\n            );\n        }\n        return bSpottable;\n    };\n\n    // Is oControl.spotlight == \"container\"\n    this.isContainer = function(oControl) {\n        if (!oControl) {\n            return false;\n        }\n        return oControl.spotlight == 'container';\n    };\n\n    // Is there at least one descendant of oControl\n    // (or oControl itself) that has spotlight = \"true\"\n    this.hasChildren = function(oControl) {\n        if (!oControl || oControl.spotlightDisabled) {\n            return false;\n        }\n        if (!this.isContainer(oControl) && this.isSpottable(oControl)) {\n            return true;\n        }\n        var n, aChildren = oControl.children;\n        for (n = 0; n < aChildren.length; n++) {\n            if (this.hasChildren(aChildren[n])) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n    * Returns spottable children along with position of self.\n    *\n    * @param {Object} oControl - The control whose siblings are to be retrieved.\n    * @private\n    */\n    this.getSiblings = function(oControl) {\n        oControl = oControl || this.getCurrent();\n        if (!oControl) {\n            return;\n        }\n        var n,\n            o = {},\n            oParent = this.getParent(oControl) || _oRoot;\n\n        o.siblings = this.getChildren(oParent);\n\n        for (n = 0; n < o.siblings.length; n++) {\n            if (oControl === o.siblings[n]) {\n                o.selfPosition = n;\n            }\n        }\n\n        return o;\n    };\n\n    /**\n    * Dispatches focus event to the control or its first spottable child.\n    *\n    * @param {Object} oControl - The control whose children are to be retrieved.\n    * @param {Boolean} bSpotlightTrueOnly - Whether to retrieve only spottable children.\n    * @private\n    */\n    this.getChildren = function(oControl, bSpotlightTrueOnly) {\n        oControl = oControl || this.getCurrent();\n        if (!oControl) {\n            return;\n        }\n        var n,\n            aChildren = [],\n            oNext;\n\n        if (!oControl.spotlightDisabled) {\n            for (n = 0; n < oControl.children.length; n++) {\n                oNext = oControl.children[n];\n                if (this.isSpottable(oNext, bSpotlightTrueOnly)) {\n                    aChildren.push(oNext);\n                } else {\n                    aChildren = aChildren.concat(this.getChildren(oNext, bSpotlightTrueOnly));\n                }\n            }\n        }\n        return aChildren;\n    };\n\n    /**\n    * Returns closest spottable parent, or `null` if there is none.\n    *\n    * @param {Object} oControl - The control whose parent is to be retrieved.\n    * @return {enyo.Control} - The control's closest spottable parent.\n    * @private\n    */\n    this.getParent = function(oControl) {\n        oControl = oControl || this.getCurrent();\n        if (!oControl) {\n            return;\n        }\n        var oSpottableParent = null;\n        while (oControl.parent) {\n            oControl = oControl.parent;\n            if (this.isSpottable(oControl)) {\n                oSpottableParent = oControl;\n                break;\n            }\n        }\n        return oSpottableParent;\n    };\n\n    /**\n    * Dispatches focus event to the control or its first spottable child.\n    *\n    * @param {Object} oControl - The control to be focused.\n    * @return {Boolean} - `true` if control was focused successfully; otherwise, `false`.\n    * @private\n    */\n    this.spot = function(oControl, sDirection, bWasPoint) {\n\n        // If spotlight is not yet initialized\n        // Preserve control to be spotted on initialize\n        if (!this.isInitialized()) {\n            _oDefaultControl = oControl;\n            return true;\n        }\n\n        // Cannot spot falsy values\n        if (!oControl) {\n            return false;\n        }\n\n        // Can only spot enyo.Controls\n        if (!(oControl instanceof Control)) {\n            _warn('argument is not enyo.Control');\n            return false;\n        }\n\n        // Current cannot change while in frozen mode\n        if (this.isFrozen()) {\n            _warn('can\\'t spot in frozen mode');\n            return false;\n        }\n\n        // If control is not spottable, find its spottable child\n        var oOriginal = oControl;\n        if (!this.isSpottable(oControl)) {\n            oControl = this.getFirstChild(oControl);\n        }\n\n        // If already spotted, nothing to do\n        if (oControl) {\n            if (_oCurrent === oControl) {\n                return true;\n            }\n\n            // When the user calls spot programmatically in pointer mode, we don't actually\n            if (this.getPointerMode() && !bWasPoint) {\n                this.unspot();\n\n                // spot; instead we just unspot and set up the _oLastControl\n                _oLastControl = oControl;\n\n                // used when resuming 5-way focus on an arrow key press\n                _oLastMouseMoveTarget = null;\n                _log(\"Spot called in pointer mode; 5-way will resume from: \" + oControl.id);\n            } else {\n\n                // Dispatch focus to new control\n                _dispatchEvent('onSpotlightFocus', {\n                    dir: sDirection\n                }, oControl);\n            }\n            return true;\n        }\n        _warn('can\\'t spot: ' + oOriginal.toString() +\n            ' is not spottable and has no spottable descendants');\n\n        return false;\n    };\n\n    /**\n    * Dispatches Spotlight blur event to current control.\n    *\n    * @param {Object} oControl - The control to be blurred.\n    * @return {Boolean} - `true` if control was successfully blurred; otherwise, `false`.\n    * @private\n    */\n    this.unspot = function() {\n\n        // Current cannot change while in frozen mode\n        if (this.isFrozen()) {\n            return false;\n        }\n\n        if (this.hasCurrent() && _bFocusOnScreen) {\n            _unhighlight(_oCurrent);\n            _oLastMouseMoveTarget = null;\n            _dispatchEvent('onSpotlightBlur', null, _oCurrent);\n            _observeDisappearance(false, _oCurrent);\n            _oCurrent = null;\n            return true;\n        }\n        return false;\n    };\n\n    /**\n    * Gets first spottable child of a control.\n    *\n    * @param {Object} oControl - The control whose child is to be retrieved.\n    * @return {enyo.Control} - The first spottable child.\n    * @private\n    */\n    this.getFirstChild = function(oControl) {\n        oControl = oControl || this.getCurrent();\n        if (!oControl) {\n            return null;\n        }\n        return this.getChildren(oControl)[0];\n    };\n\n    /**\n    * Determines whether X or Y value has changed since last mousemove event.\n    *\n    * @name Spotlight#clientXYChanged\n    * @param {Object} oEvent - The current event.\n    * @return {Boolean} - `true` if either X or Y has changed; otherwise, `false`.\n    * @private\n    */\n    this.clientXYChanged = function(oEvent) {\n        var bChanged = (\n            _nPrevClientX !== oEvent.clientX ||\n            _nPrevClientY !== oEvent.clientY\n        );\n\n        if (this.getPointerMode()) {\n            _nPrevClientX = oEvent.clientX;\n            _nPrevClientY = oEvent.clientY;\n        }\n\n        return bChanged;\n    };\n\n    /**\n    * Disables pointer mode.\n    *\n    * @private\n    */\n    this.disablePointerMode = function() {\n        _bEnablePointerMode = false;\n    };\n\n    /**\n    * Enables pointer mode.\n    *\n    * @private\n    */\n    this.enablePointerMode = function() {\n        _bEnablePointerMode = true;\n    };\n\n    /**\n    * Switches to muted mode (no `'spotlight'` CSS class set in DOM).\n    *\n    * @private\n    */\n    this.mute = function(oSender) {\n        this.Muter.addMuteReason(oSender);\n    };\n    this.unmute = function(oSender) {\n        this.Muter.removeMuteReason(oSender);\n    };\n    this.isMuted = function() {\n        return this.Muter.isMuted();\n    };\n\n    /**\n    * Sets verbose mode.\n    *\n    * @name Spotlight#verbose\n    * @param {Boolean} bVerbose - Whether verbose mode should be enabled.\n    * @return {String} Feedback message for logging.\n    * @private\n    */\n    this.verbose = function(bVerbose) {\n        _bVerbose = (typeof bVerbose == 'undefined') ? !_bVerbose : bVerbose;\n        return 'SPOTLIGHT: Verbose mode set to ' + _bVerbose;\n    };\n\n    /**\n    * Switches to frozen mode (current cannot change while frozen).\n    *\n    * @private\n    */\n    this.freeze = function() {\n\t\tif (this.hasCurrent()) {\n\t\t\t_bFrozen = true;\n\t\t} else {\n\t\t\t_warn('Can not enter frozen mode until something is spotted');\n\t\t}\n    };\n\n    /**\n    * Switches to unfrozen mode.\n    *\n    * @private\n    */\n    this.unfreeze = function() { \n\t\t_bFrozen = false;\n\t};\n\n    /**\n    * Determines whether frozen mode is currently enabled.\n    *\n    * @return {Boolean} `true` if frozen mode is currently enabled; otherwise, `false`.\n    * @private\n    */\n    this.isFrozen = function() {\n        return _bFrozen;\n    };\n\n    /**\n    * Highlights the specified control.\n    *\n    * @param {enyo.Control} oControl - The control to highlight.\n    * @param {Boolean} bIgnoreMute - Whether to ignore muting.\n    * @private\n    */\n    this.highlight = function(oControl, bIgnoreMute) {\n        _highlight(oControl, bIgnoreMute);\n    };\n\n    /**\n    * Unhighlights the specified control.\n    *\n    * @param {enyo.Control} oControl - The control to unhighlight.\n    * @private\n    */\n    this.unhighlight = function(oControl) {\n        _unhighlight(oControl);\n    };\n\n    this.Accelerator = new Accelerator(this);\n    this.Container = new Container(this);\n    this.Muter = new Muter(this);\n    this.NearestNeighbor = new NearestNeighbor(this);\n    this.Scrolling = new Scrolling(this);\n    this.TestMode = new TestMode(this);\n    this.Util = new Util(this);\n};\n\n// Event hook to all system events to catch keypress and mouse events.\ndispatcher.features.push(function(oEvent) {\n    return Spotlight.onEvent(oEvent);\n});\n\n// Initialization\nroots.rendered(function(oRoot) {\n    // Spotlight.verbose();\n    Spotlight.initialize(oRoot);\n});\n\n\n// Spotlight.bench = new function() {\n// \tvar _oBench = null;\n//\n// \tthis.start = function() {\n// \t\tif (!_oBench) {\n// \t\t\t_oBench = enyo.dev.bench({name: 'bench1', average: true});\n// \t\t}\n// \t\t_oBench.start();\n// \t}\n//\n// \tthis.stop = function() {\n// \t\t_oBench.stop();\n// \t}\n// }\n","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n/**\n* {@link moon.BodyText} is a simple control for displaying body text in an app.\n* It is designed to align with other text-based controls.\n*\n* @class moon.BodyText\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.BodyText.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.BodyText',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-body-text moon-body-text-spacing moon-body-text-control',\n\n\t/**\n\t*\n\t* When `true`, HTML tags are allowed in the control's content.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tallowHtml: true,\n\n\t/**\n\t* @private\n\t* @lends moon.BodyText.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* If `true`, text content is centered; otherwise, it is left-aligned.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tcentered: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.centeredChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tControl.prototype.contentChanged.apply(this, arguments);\n\t\tthis.detectTextDirectionality();\n\t\tif (this.hasNode()) { this.bubble('onRequestSetupBounds'); }\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcenteredChanged: function () {\n\t\tthis.applyStyle('text-align', this.centered ? 'center' : null);\n\t}\n});\n","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tlog = require('../../../enyo/lib/logger'),\n\tri = require('../../../enyo/lib/resolution');\n\nvar\n\tDockRightArranger = require('../../../layout/lib/DockRightArranger');\n\n/**\n* @typedef {Object} moon.BreadcrumbArranger~PanelInfoObject\n* @property {Boolean} breadcrumb - Whether panel is in breadcrumb (collapsed) form.\n* @property {Boolean} offscreen - Whether panel is offscreen.\n* @public\n*/\n\n/**\n* {@link moon.BreadcrumbArranger} is an {@link enyo.Arranger} that displays the active\n* control, along with some number of breadcrumbs on the right side. This is the default\n* arranger for both the \"Always Viewing\" and \"Activity\" patterns; if you are using\n* {@link moon.Panel} with either of these patterns, you don't need to specify an arranger\n* explicitly.\n*\n* The breadcrumbs reflect the sequence of panels that the user has already seen.\n*\n* Transitions between arrangements are handled by sliding the new control in from the\n* right. If the old controls can fit within the width of the container, they will slide\n* to the left; if not, they will collapse to the left.\n*\n* The control's child components may be of any kind; by default, they are instances of\n* {@link moon.Panel}.\n*\n* ```\n* {name: 'panels', kind: 'moon.Panels', pattern: 'alwaysviewing', classes: 'enyo-fit', components: [\n* \t{title: 'First', components: [\n* \t{kind: 'moon.Item', style: 'margin-top:20px;', content: 'Item One'},\n* \t\t{kind: 'moon.Item', content: 'Item Two'},\n* \t\t{kind: 'moon.Item', content: 'Item Three'},\n* \t\t{kind: 'moon.Item', content: 'Item Four'},\n* \t\t{kind: 'moon.Item', content: 'Item Five'}\n* \t]},\n* \t{title: 'Second', joinToPrev: true, components: [\n* \t\t{kind: 'moon.Item', style: 'margin-top:20px;', content: 'Item One'},\n* \t\t{kind: 'moon.Item', content: 'Item Two'},\n* \t\t{kind: 'moon.Item', content: 'Item Three'},\n* \t\t{kind: 'moon.Item', content: 'Item Four'},\n* \t\t{kind: 'moon.Item', content: 'Item Five'}\n* \t]}\n* ]}\n* ```\n*\n* @class moon.BreadcrumbArranger\n* @extends enyo.DockRightArranger\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.BreadcrumbArranger.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.BreadcrumbArranger',\n\n\t/**\n\t* @private\n\t*/\n\tkind: DockRightArranger,\n\n\t/**\n\t* Returns an object containing information about the state of a given panel (identified by\n\t* `panelIndex`) within a given arrangement (identified by `activeIndex`).\n\t*\n\t* Specifically, {@link moon.BreadcrumbArranger} reports whether a panel is offscreen, and\n\t* whether it is in breadcrumb (collapsed) form.\n\t*\n\t* @param {Number} panelIndex - Index of the panel for which to get info.\n\t* @param {Number} activeIndex - Index of the arranger the panel is in.\n\t* @returns {moon.BreadcrumbArranger~PanelInfoObject}\n\t* @public\n\t*/\n\tgetPanelInfo: function (panelIndex, activeIndex) {\n\t\treturn {\n\t\t\tbreadcrumb: this.isBreadcrumb(panelIndex, activeIndex),\n\t\t\toffscreen: this.isOffscreen(panelIndex, activeIndex)\n\t\t};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbreadcrumbWidth: 234,\n\n\t/**\n\t* @private\n\t*/\n\tdebug: false,\n\n\t/**\n\t* @private\n\t*/\n\tsize: function() {\n\t\tvar containerWidth = this.getContainerWidth(),\n\t\t\tpanels = this.container.getPanels(),\n\t\t\ti;\n\n\t\t// Set up default widths for each panel\n\t\tfor (i = 0; i < panels.length; i++) {\n\t\t\t// If panels have already been stretched, unstretch them before doing calculations\n\t\t\tif (panels[i].actualWidth) {\n\t\t\t\tpanels[i].applyStyle('width', dom.unit(panels[i].width, 'rem'));\n\t\t\t}\n\n\t\t\tpanels[i].set('animate', this.container.animate);\n\t\t\tpanels[i].actualWidth = null;\n\t\t\tpanels[i].width = panels[i].getBounds().width;\n\t\t}\n\n\t\t// Calculate which panels will be joined\n\t\tthis.joinedPanels = this.calculateJoinedPanels(containerWidth);\n\n\t\t// Stretch all panels to fit vertically\n\t\tthis.applyVerticalFit();\n\n\t\t// Reset panel arrangement positions\n\t\tthis.container.transitionPositions = this.calculateTransitionPositions(containerWidth, this.joinedPanels);\n\t\tthis.adjustTransitionPositionsForJoinedPanels(this.joinedPanels);\n\n\t\t// Update individual panel widths to account for _joinedPanels_\n\t\tthis.updateWidths(containerWidth, this.joinedPanels);\n\t\tthis.applyUpdatedWidths();\n\n\t\t// Calculate _this.breadcrumbPositions_\n\t\tthis.calcBreadcrumbPositions(this.joinedPanels);\n\n\t\tif (this.debug) {\n\t\t\tlog('transitionPositions:', this.container.transitionPositions);\n\t\t\tlog('breadcrumbPositions:', this.breadcrumbPositions);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalculateJoinedPanels: function (containerWidth) {\n\t\tcontainerWidth = containerWidth || this.getContainerWidth();\n\n\t\tvar panels = this.container.getPanels(),\n\t\t\tjoinedPanels = {};\n\n\t\tfor (var panelIndex = 0; panelIndex < panels.length; panelIndex++) {\n\t\t\tfor (var index = 0; index < panels.length; index++) {\n\t\t\t\tif (panelIndex > index) {\n\t\t\t\t\tjoinedPanels[panelIndex + '.' + index] = this.isPanelJoined(panelIndex, index, containerWidth);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.formatJoinedPanels(joinedPanels);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tisPanelJoined: function (panelIndex, index, containerWidth) {\n\t\tcontainerWidth = containerWidth || this.getContainerWidth();\n\n\t\tvar panels = this.container.getPanels(),\n\t\t\txPos = this.getBreadcrumbEdge(index),\n\t\t\ti = panelIndex;\n\n\t\twhile(i > index) {\n\t\t\tif (!panels[i].joinToPrev) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\txPos += panels[i].width;\n\t\t\ti--;\n\t\t}\n\n\t\tif(xPos + panels[index].width > containerWidth) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tformatJoinedPanels: function (joinedPanels) {\n\t\tvar panels = this.container.getPanels(),\n\t\t\tret = [], i, j;\n\n\t\tfor (i = 0; i < panels.length; i++) {\n\t\t\tfor (j = 0; j < panels.length; j++) {\n\t\t\t\tif (!joinedPanels[i+'.'+j]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tret[i] = ret[i] || [];\n\t\t\t\tret[i].push(j);\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalculateTransitionPositions: function (containerWidth, joinedPanels) {\n\t\tvar panels = this.container.getPanels(),\n\t\t\ttp = {};\n\n\t\tfor (var panelIndex = 0; panelIndex < panels.length; panelIndex++) {\n\t\t\tfor (var index = 0; index < panels.length; index++) {\n\t\t\t\ttp[panelIndex + '.' + index] = this.calculateXPos(panelIndex, index, containerWidth, joinedPanels);\n\t\t\t}\n\t\t}\n\n\t\treturn tp;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalculateXPos: function (panelIndex, index, containerWidth, joinedPanels) {\n\t\tvar breadcrumbEdge = this.getBreadcrumbEdge(index),\n\t\t\tbreadcrumbWidth = ri.scale(this.breadcrumbWidth),\n\t\t\tpanels = this.container.getPanels(),\n\t\t\txPos,\n\t\t\ti,\n\t\t\tpatternOffset = 0;\n\n\t\tif (this.container.pattern == 'activity') {\n\t\t\t// add some positional sugar just for the activity breadcrumbs\n\t\t\tif (index === 0) {\n\t\t\t\tpatternOffset = breadcrumbEdge;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpatternOffset = breadcrumbEdge - breadcrumbWidth;\n\t\t\t}\n\t\t\tpatternOffset/= 2;\n\t\t}\n\n\t\t// each active item should be at _breadcrumbEdge_\n\t\tif (index === panelIndex) {\n\t\t\treturn breadcrumbEdge + this.getBreadcrumbGap()/2 - patternOffset;\n\n\t\t// breadcrumbed panels should be positioned to the left\n\t\t} else if (index > panelIndex) {\n\t\t\treturn breadcrumbEdge - (index - panelIndex) * breadcrumbWidth - this.getBreadcrumbGap()/2 - patternOffset;\n\n\t\t// upcoming panels should be layed out to the right if _joinToPrev_ is true\n\t\t} else {\n\t\t\t// If this panel is not joined at this index, put it off the screen to the right\n\t\t\tif (!joinedPanels[panelIndex] || joinedPanels[panelIndex].indexOf(index) === -1) {\n\t\t\t\treturn containerWidth;\n\t\t\t}\n\n\t\t\txPos = breadcrumbEdge;\n\n\t\t\ti = panelIndex;\n\t\t\twhile (i > index) {\n\t\t\t\tif (panels[i - 1]) {\n\t\t\t\t\txPos += panels[i - 1].width - patternOffset;\n\t\t\t\t}\n\t\t\t\ti--;\n\t\t\t}\n\n\t\t\treturn xPos;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trecalculatePanelTransitionPositions: function (panelIndex, containerWidth, joinedPanels) {\n\t\tvar panels = this.container.getPanels();\n\t\tfor (var i = 0; i < panels.length; i++) {\n\t\t\tthis.container.transitionPositions[panelIndex + '.' + i] = dom.unit(this.calculateXPos(panelIndex, i, containerWidth, joinedPanels), 'rem');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tadjustTransitionPositionsForJoinedPanels: function (joinedPanels) {\n\t\tvar tp = this.container.transitionPositions,\n\t\t\tpanels = this.container.getPanels();\n\n\t\tfor (var i = panels.length; i >= 0; i--) {\n\t\t\tif (!joinedPanels[i]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (var j = joinedPanels[i].length - 1; j >= 0; j--) {\n\t\t\t\tfor (var k = 0; k < panels.length; k++) {\n\t\t\t\t\ttp[k+'.'+i] = tp[k+'.'+joinedPanels[i][j]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateWidths: function (containerWidth, joinedPanels) {\n\t\tvar panels = this.container.getPanels(),\n\t\t\tdiff,\n\t\t\ti, j;\n\n\t\t// Calculate stretched widths for panels at the end of given index\n\t\tfor (i = 0; i < joinedPanels.length; i++) {\n\t\t\tif (!joinedPanels[i]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar totalWidth = panels[i].width +\n\t\t\t\tthis.getBreadcrumbEdge(joinedPanels[i][0]) +\n\t\t\t\tthis.getBreadcrumbGap();\n\n\t\t\t// Add the width of each additional panel that is visible at this index\n\t\t\tfor (j = 0; j < joinedPanels[i].length; j++) {\n\t\t\t\t// If this panel is joined with another one that has already been stretched, reposition\n\t\t\t\t// it so everything is kosher. TODO - this is a strange edge case, needs to be discussed.\n\t\t\t\tif (panels[joinedPanels[i][j]].actualWidth) {\n\t\t\t\t\ttotalWidth += panels[joinedPanels[i][j]].actualWidth;\n\t\t\t\t\t// TODO - this.recalculatePanelTransitionPositions(i, containerWidth, joinedPanels);\n\t\t\t\t} else {\n\t\t\t\t\ttotalWidth += panels[joinedPanels[i][j]].width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdiff = containerWidth - totalWidth;\n\t\t\tpanels[i].actualWidth = panels[i].width + diff;\n\n\t\t\tif (this.debug) {\n\t\t\t\tlog(i, panels[i].width, '-->', panels[i].actualWidth);\n\t\t\t}\n\t\t}\n\n\t\t// Stretch all panels that should fill the whole width\n\t\tfor (i = 0; i < panels.length; i++) {\n\t\t\tif (!panels[i].actualWidth) {\n\t\t\t\tvar match = false;\n\t\t\t\tfor (j = 0; j < joinedPanels.length; j++) {\n\t\t\t\t\tif (joinedPanels[j] && joinedPanels[j].indexOf(i) >= 0) {\n\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpanels[i].actualWidth = (match) ?\n\t\t\t\t\tpanels[i].width :\n\t\t\t\t\tcontainerWidth - this.getBreadcrumbEdge(i) - this.getBreadcrumbGap();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyUpdatedWidths: function () {\n\t\tvar panels = this.container.getPanels();\n\t\tfor (var i = 0; i < panels.length; i++) {\n\t\t\tpanels[i].applyStyle('width', dom.unit(panels[i].actualWidth, 'rem'));\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcBreadcrumbPositions: function (joinedPanels) {\n\t\tvar panels = this.container.getPanels(),\n\t\t\tisBreadcrumb,\n\t\t\tindex,\n\t\t\ti;\n\n\t\tthis.breadcrumbPositions = {};\n\n\t\tfor (i = 0; i < panels.length; i++) {\n\t\t\tfor (index = 0; index < panels.length; index++) {\n\t\t\t\tisBreadcrumb = false;\n\n\t\t\t\tif (index > i) {\n\t\t\t\t\tisBreadcrumb = !(joinedPanels[index] && joinedPanels[index].indexOf(i) > -1);\n\t\t\t\t}\n\n\t\t\t\tthis.breadcrumbPositions[i+'.'+index] = isBreadcrumb;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstart: function () {\n\t\tthis.inherited(arguments);\n\n\t\tvar tp = this.container.transitionPositions;\n\t\tvar panels = this.container.getPanels();\n\t\tvar panel;\n\t\tvar hiding = [];\n\t\tfor(var i=0;(panel = panels[i]);i++) {\n\t\t\tif (tp[i+'.'+this.container.toIndex] === 0) {\n\t\t\t\tvar width = panel.getBounds().width;\n\t\t\t\tvar nextTp = tp[i+1+'.'+this.container.toIndex];\n\t\t\t\tif (width > nextTp) {\n\t\t\t\t\thiding.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.container.hiddenPanels = hiding;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tarrange: function (inC, inName) {\n\t\tvar c$ = this.container.getPanels();\n\t\tvar s = this.container.clamp(inName);\n\t\tvar i, c, xPos;\n\n\t\tfor (i=0; (c=c$[i]); i++) {\n\t\t\txPos = this.container.transitionPositions[i + '.' + s];\n\t\t\t// If the panel is even a little off the screen,\n\t\t\tif (xPos < 0) {\n\t\t\t\t// lets check if its fully off.\n\t\t\t\tvar containerPadding = this.getContainerPadding();\n\t\t\t\tif (xPos <= ((ri.scale(this.breadcrumbWidth) - containerPadding.left) * -1)) {\n\t\t\t\t\t// Its visible portion is, so lets nudge it off entirely so it can't be\n\t\t\t\t\t// highlighted using just its non-visible edge\n\t\t\t\t\txPos -= containerPadding.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.arrangeControl(c, {left: xPos});\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tisOffscreen: function (panelIndex, activeIndex) {\n\t\tif (!this.container.transitionPositions) {\n\t\t\treturn;\n\t\t}\n\t\tvar transitionPosition = this.container.transitionPositions[panelIndex + '.' + activeIndex];\n\t\tvar screenEdge = this.container.panelCoverRatio == 1 ? this.getBreadcrumbEdge(panelIndex) : 0;\n\t\tif (transitionPosition < 0) {\n\t\t\treturn transitionPosition + ri.scale(this.breadcrumbWidth) <= screenEdge;\n\t\t} else {\n\t\t\treturn transitionPosition >= this.containerBounds.width;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tisBreadcrumb: function (panelIndex, activeIndex) {\n\t\treturn this.breadcrumbPositions && this.breadcrumbPositions[panelIndex + '.' + activeIndex];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcBreadcrumbEdges: function () {\n\t\tthis.breadcrumbEdges = [];\n\t\tfor (var i = 0, panel; (panel = this.container.getPanels()[i]); i++) {\n\t\t\tthis.breadcrumbEdges[i] = (i === 0) ? 0 : ri.scale(this.breadcrumbWidth);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetContainerWidth: function () {\n\t\treturn this.containerBounds.width;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetBreadcrumbGap: function () {\n\t\treturn this.container.breadcrumbGap || 0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetBreadcrumbEdge: function (index) {\n\t\tvar leftMargin = this.getContainerWidth() * (1 - this.container.panelCoverRatio);\n\t\tif (this.container.panelCoverRatio == 1) {\n\t\t\tvar containerPadding = this.getContainerPadding();\n\t\t\tleftMargin += containerPadding.left + containerPadding.right;\n\t\t}\n\t\tif (this.container.showFirstBreadcrumb && index !== 0) {\n\t\t\tleftMargin += ri.scale(this.breadcrumbWidth);\n\t\t}\n\t\treturn leftMargin;\n\t},\n\n\t/**\n\t* Sets bounds for each panel to fit vertically.\n\t* @private\n\t*/\n\tapplyVerticalFit: function () {\n\t\tvar panels = this.container.getPanels(),\n\t\t\tpadding = this.getContainerPadding();\n\n\t\tfor (var i = 0, panel; (panel = panels[i]); i++) {\n\t\t\tpanel.setBounds({top: dom.unit(padding.top, 'rem'), bottom: dom.unit(padding.bottom, 'rem')});\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetContainerPadding: function () {\n\t\treturn this.container.hasNode() ? dom.calcPaddingExtents(this.container.node) : {};\n\t},\n\n\t/**\n\t* Returns `true` if any panels will move in the transition from `fromIndex` to `toIndex`.\n\t* @private\n\t*/\n\tshouldArrange: function (fromIndex, toIndex) {\n\t\tif (!(fromIndex >= 0 && toIndex >= 0)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar transitionPositions = this.container.transitionPositions,\n\t\t\tpanelCount = this.container.getPanels().length,\n\t\t\tpanelIndex,\n\t\t\tfrom,\n\t\t\tto;\n\n\t\tfor (panelIndex = 0; panelIndex < panelCount; panelIndex++) {\n\t\t\tfrom = transitionPositions[panelIndex + '.' + fromIndex];\n\t\t\tto = transitionPositions[panelIndex + '.' + toIndex];\n\n\t\t\tif (from !== to) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind')\n\tdom = require('../../../enyo/lib/dom'),\n\tutils = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control');\n\n/**\n* {@link moon.CaptionDecorator} wraps a control with a caption. The position of the\n* caption is defined via the [side]{@link moon.CaptionDecorator#side} property.\n*\n* ```\n* \t{kind: 'moon.CaptionDecorator', side: 'top', content: 'Top Label', components: [\n* \t\t{kind: 'moon.Button', content: 'My Button', ontap: 'buttonTapped'},\n* \t]}\n* ```\n*\n* @class moon.CaptionDecorator\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.CaptionDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.CaptionDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightFocus: 'spotFocus',\n\t\tonSpotlightBlur:  'spotBlur'\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.CaptionDecorator.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* The position of the caption with respect to the wrapped control; valid\n\t\t* values are `'top'`, `'bottom'`, `'left'`, and `'right'`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'top'\n\t\t* @public\n\t\t*/\n\t\tside: 'top',\n\n\t\t/**\n\t\t* If `true`, the caption is only shown when the wrapped control has Spotlight\n\t\t* focus; otherwise, it is always visible.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tshowOnFocus: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcaptionPositioned: false,\n\n\t/**\n\t* @private\n\t*/\n\tclientBounds: null,\n\n\t/**\n\t* @private\n\t*/\n\tcaptionBounds: null,\n\n\t/**\n\t* @private\n\t*/\n\tdecoratorBounds: null,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-button-caption-decorator',\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{kind: Control, name: 'leftCaption',     classes: 'moon-divider-text moon-caption left',   canGenerate: false},\n\t\t{kind: Control, name: 'topCaption',      classes: 'moon-divider-text moon-caption top',    canGenerate: false},\n\t\t{kind: Control, name: 'client',          classes: 'moon-divider-text moon-caption-client'},\n\t\t{kind: Control, name: 'rightCaption',    classes: 'moon-divider-text moon-caption right',  canGenerate: false},\n\t\t{kind: Control, name: 'bottomCaption',   classes: 'moon-divider-text moon-caption bottom', canGenerate: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.sideChanged();\n\t\tthis.showOnFocusChanged();\n\t},\n\n\t/**\n\t* If [showOnFocus]{@link moon.CaptionDecorator#showOnFocus} is `true`, caption\n\t* position is reset on reflow.\n\t*\n\t* @private\n\t*/\n\treflow: function () {\n\t\tControl.prototype.reflow.apply(this, arguments);\n\n\t\tif (this.getShowOnFocus()) {\n\t\t\tthis.resetCaptionPosition();\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves [side]{@link moon.CaptionDecorator#side} value.\n\t*\n\t* @private\n\t*/\n\tgetSide: function () {\n\t\treturn this.side || 'top';\n\t},\n\n\t// Change handlers\n\n\t/**\n\t* @private\n\t*/\n\tsideChanged: function () {\n\t\tvar side = this.getSide();\n\n\t\tthis.$.topCaption.canGenerate =     (side === 'top');\n\t\tthis.$.rightCaption.canGenerate =   (side === 'right');\n\t\tthis.$.bottomCaption.canGenerate =  (side === 'bottom');\n\t\tthis.$.leftCaption.canGenerate =    (side === 'left');\n\n\t\t// Update the content, including position if needed\n\t\tthis.contentChanged();\n\n\t\t// If this control has already been rendered, re-render to update caption side\n\t\tif (this.hasNode()) {\n\t\t\t// Re-render to display caption on proper side\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowOnFocusChanged: function () {\n\t\tthis.addRemoveClass('showOnFocus', this.getShowOnFocus());\n\n\t\t// If `showOnFocus` is `true`, reset caption position\n\t\tif (this.hasNode() && this.getShowOnFocus()) {\n\t\t\tthis.resetCaptionPosition();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tthis.$[this.getSide()+'Caption'].setContent(this.getContent());\n\n\t\t// If `showOnFocus` is `true`, reset caption position\n\t\tif (this.hasNode() && this.getShowOnFocus()) {\n\t\t\tthis.resetCaptionPosition();\n\t\t}\n\t},\n\n\t// Event handlers\n\n\t/**\n\t* Adds `spotlight` class when button is focused, and calculates caption position\n\t* if required.\n\t*\n\t* @private\n\t*/\n\tspotFocus: function () {\n\t\tthis.addClass('spotlight');\n\n\t\tif (this.hasNode() && this.getShowOnFocus()) {\n\t\t\tthis.positionCaption();\n\t\t}\n\t},\n\n\t/**\n\t* Removes `spotlight` class when button is blurred.\n\t*\n\t* @private\n\t*/\n\tspotBlur: function () {\n\t\tthis.removeClass('spotlight');\n\t},\n\n\t// Caption positioning\n\n\t/**\n\t* Returns current caption control.\n\t*\n\t* @private\n\t*/\n\tgetCaptionControl: function () {\n\t\treturn this.$[this.getSide()+'Caption'];\n\t},\n\n\t/**\n\t* Resets cached position values and repositions caption if currently spotted.\n\t*\n\t* @private\n\t*/\n\tresetCaptionPosition: function () {\n\t\tthis.resetCachedBounds();\n\t\tthis.captionPositioned = false;\n\n\t\tif (this.hasNode() && this.hasClass('spotlight')) {\n\t\t\tthis.positionCaption();\n\t\t}\n\t},\n\n\t/**\n\t* Positions caption based on the value of [side]{@link moon.CaptionDecorator#side}.\n\t*\n\t* @private\n\t*/\n\tpositionCaption: function () {\n\t\tif (this.captionPositioned) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar bounds = this.getDecoratorBounds(),\n\t\t\tclientBounds = this.getClientBounds(),\n\t\t\tcaptionBounds = this.getCaptionBounds();\n\n\t\tswitch (this.getSide()) {\n\t\tcase 'left':\n\t\t\tthis.centerCaptionVertically(bounds, captionBounds);\n\t\t\tthis.positionCaptionAtLeftEdge(bounds, clientBounds, captionBounds);\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tthis.centerCaptionVertically(bounds, captionBounds);\n\t\t\tthis.positionCaptionAtRightEdge(bounds, clientBounds, captionBounds);\n\t\t\tbreak;\n\t\tcase 'top':\n\t\t\tthis.centerCaptionHorizontally(bounds, captionBounds);\n\t\t\tthis.positionCaptionAtTopEdge(bounds, clientBounds, captionBounds);\n\t\t\tbreak;\n\t\tcase 'bottom':\n\t\t\tthis.centerCaptionHorizontally(bounds, captionBounds);\n\t\t\tthis.positionCaptionAtBottomEdge(bounds, clientBounds, captionBounds);\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.captionPositioned = true;\n\t},\n\n\t/**\n\t* Centers caption control vertically, relative to `this.decoratorBounds.height`.\n\t*\n\t* @private\n\t*/\n\tcenterCaptionVertically: function (inBounds, inCaptionBounds) {\n\t\tthis.getCaptionControl().applyStyle('top', dom.unit((inBounds.height - inCaptionBounds.height) / 2, 'rem'));\n\t},\n\n\t/**\n\t* Centers caption control horizontally, relative to `this.decoratorBounds.width`.\n\t*\n\t* @private\n\t*/\n\tcenterCaptionHorizontally: function (inBounds, inCaptionBounds) {\n\t\tthis.getCaptionControl().applyStyle('left', dom.unit((inBounds.width - inCaptionBounds.width) / 2, 'rem'));\n\t},\n\n\t/**\n\t* Positions caption at left edge of `this.$.client`.\n\t*\n\t* @private\n\t*/\n\tpositionCaptionAtLeftEdge: function (inBounds, inClientBounds, inCaptionBounds) {\n\t\tvar position = (-1 * inCaptionBounds.width) + ((inBounds.width - inClientBounds.width)/2) - inCaptionBounds.marginRight;\n\t\tthis.getCaptionControl().applyStyle('left', dom.unit(position, 'rem'));\n\t},\n\n\t/**\n\t* Positions caption at right edge of `this.$.client`.\n\t*\n\t* @private\n\t*/\n\tpositionCaptionAtRightEdge: function (inBounds, inClientBounds, inCaptionBounds) {\n\t\tvar position = inBounds.width - ((inBounds.width - inClientBounds.width)/2);\n\t\tthis.getCaptionControl().applyStyle('left', dom.unit(position, 'rem'));\n\t},\n\n\t/**\n\t* Positions caption at top edge of `this.$.client`.\n\t*\n\t* @private\n\t*/\n\tpositionCaptionAtTopEdge: function (inBounds, inClientBounds, inCaptionBounds) {\n\t\tvar position = (-1 * this.getCaptionBounds().height) + ((inBounds.height - inClientBounds.height)/2) - inCaptionBounds.marginBottom;\n\t\tthis.getCaptionControl().applyStyle('top', dom.unit(position, 'rem'));\n\t},\n\n\t/**\n\t* Positions caption at bottom edge of `this.$.client`.\n\t*\n\t* @private\n\t*/\n\tpositionCaptionAtBottomEdge: function (inBounds, inClientBounds, inCaptionBounds) {\n\t\tvar position = inBounds.height - ((inBounds.height - inClientBounds.height)/2);\n\t\tthis.getCaptionControl().applyStyle('top', dom.unit(position, 'rem'));\n\t},\n\n\t/**\n\t* Caches result from `this.getBounds()` call, saving in `this.decoratorBounds`.\n\t*\n\t* @private\n\t*/\n\tgetDecoratorBounds: function () {\n\t\tthis.decoratorBounds = this.decoratorBounds || this.getBounds();\n\t\treturn this.decoratorBounds;\n\t},\n\n\t/**\n\t* Caches caption bounds, saving in `this.captionBounds`.\n\t*\n\t* @private\n\t*/\n\tgetCaptionBounds: function () {\n\t\tthis.captionBounds = this.captionBounds || utils.mixin(this.getCaptionControl().getBounds(), this.getCaptionMarginBounds());\n\t\treturn this.captionBounds;\n\t},\n\n\t/**\n\t* Caches client bounds, saving in `this.clientBounds`.\n\t*\n\t* @private\n\t*/\n\tgetClientBounds: function () {\n\t\tthis.clientBounds = this.clientBounds || this.$.client.getBounds();\n\t\treturn this.clientBounds;\n\t},\n\n\t/**\n\t* Clears cached bounds.\n\t*\n\t* @private\n\t*/\n\tresetCachedBounds: function () {\n\t\tthis.clientBounds = null;\n\t\tthis.captionBounds = null;\n\t\tthis.decoratorBounds = null;\n\t},\n\n\t/**\n\t* Returns margins of caption control.\n\t*\n\t* @private\n\t*/\n\tgetCaptionMarginBounds: function () {\n\t\tvar margins = dom.calcMarginExtents(this.getCaptionControl().hasNode());\n\t\treturn {\n\t\t\tmarginTop:      margins.top,\n\t\t\tmarginRight:    margins.right,\n\t\t\tmarginBottom:   margins.bottom,\n\t\t\tmarginLeft:     margins.left\n\t\t};\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control'),\n\tSignals = require('../../../enyo/lib/Signals');\n\n/**\n* Used to set a static time for {@link moon.Clock} to display.\n*\n* @typedef {Object} moon.Clock~DateTimeObject\n* @property {Number} year - The year to display.\n* @property {Number} month - The month to display.\n* @property {Number} day - The day to display.\n* @property {Number} hour - The hour to display.\n* @property {Number} minute - The minute to display.\n* @property {Number} second - The second to display.\n* @public\n*/\n\n/**\n* {@link moon.Clock} is a control that displays clock information.\n*\n* Example:\n*\n* ```\n*\t\t{kind: 'moon.Clock'}\n* ```\n*\n* @class moon.Clock\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Clock.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Clock',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-clock',\n\n\t/**\n\t* @private\n\t* @lends moon.Clock.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Refresh time in milliseconds.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1000\n\t\t* @public\n\t\t*/\n\t\trefresh: 1000,\n\n\t\t/**\n\t\t* A user-provided date; if `undefined`, system date is used. May be either a\n\t\t* JavaScript {@glossary Date} object or a {@link moon.Clock~DateTimeObject}\n\t\t* describing a static date/time to be displayed.\n\t\t*\n\t\t* @type {Date|moon.Clock~DateTimeObject}\n\t\t* @default undefined\n\t\t* @public\n\t\t*/\n\t\tdate: undefined,\n\n\t\t/**\n\t\t* Current locale used for formatting. May be set after the control is\n\t\t* created, in which case the control will be updated to reflect the\n\t\t* new value.  Only valid if [iLib]{@glossary ilib} is loaded.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tlocale: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tobservers: {\n\t\tmodeChanged: ['mode']\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'clock', kind: Control, classes: 'moon-bold-text'},\n\t\t{kind: Signals, onlocalechange: 'handleLocaleChangeEvent'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\t_timeDiff: 0,\n\n\t/**\n\t* [iLib]{@glossary ilib} locale info instance; it contains information about the\n\t* particular locale.\n\t*\n\t* @private\n\t*/\n\tilibLocaleInfo: null,\n\n\t/**\n\t* Defines clock mode.\n\t* If `date` is assigned with JavaScript Date object or `null`, it will be `'normal'`.\n\t* If `date` is assigned with JavaScript object that indicates the exact time components\n\t* to be formatted into the clock, it will be `'static'`.\n\t*\n\t* @private\n\t*/\n\tmode: 'normal',\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.initDefaults();\n\t\tthis.refreshJob();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitILib: function () {\n\t\tthis.ilibLocaleInfo = new ilib.LocaleInfo(this.locale || undefined);\n\t\tvar clockPref = this.ilibLocaleInfo.getClock();\n\t\tvar clock = clockPref !== 'locale' ? clockPref : undefined;\n\n\t\tvar fmtParams = {\n\t\t\tlocale: this.locale,\n\t\t\ttype: 'time',\n\t\t\ttime: 'hma',\n\t\t\tuseNative: false,\n\t\t\tclock: clock,\n\t\t\ttimezone: (this.mode === 'normal') ? 'local' : 'Etc/UTC'\n\t\t};\n\n\t\tthis._tf = new ilib.DateFmt(fmtParams);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitDefaults: function () {\n\t\t// Attempt to use the ilib lib\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis.initILib();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trefreshChanged: function () {\n\t\tthis.startJob('refresh', this.bindSafely('refreshJob'), this.getRefresh());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdateChanged: function () {\n\t\tif (this.date && !(this.date instanceof Date)) {\n\t\t\tthis.set('mode', 'static');\n\t\t} else if(this.date && this.date instanceof Date) {\n\t\t\tthis.set('mode', 'normal');\n\t\t\tthis._timeDiff = (this.date.getTime() - Date.now()) || 0;\n\t\t} else {\n\t\t\tthis.set('mode', 'normal');\n\t\t\tthis._timeDiff = 0;\n\t\t}\n\t\tthis.refreshJob();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trefreshJob: function () {\n\t\tthis.updateDate();\n\t\tif (this.mode === 'normal') {\n\t\t\tthis.startJob('refresh', this.bindSafely('refreshJob'), this.getRefresh());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlocaleChanged: function () {\n\t\tthis._refresh();\n\t\tthis.updateDate();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmodeChanged: function () {\n\t\tthis._refresh();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_refresh: function () {\n\t\tif (this._tf) {\n\t\t\tdelete this._tf;\n\t\t}\n\t\tthis.initDefaults();\n\t},\n\n\t/**\n\t* If user sets time without using a JavaScript Date object, this method\n\t* parses the object into an array for an `iLib.Date` object.\n\t*\n\t* @private\n\t*/\n\tparseStaticDate: function (date) {\n\t\treturn {\n\t\t\tyear: (date.year !== undefined) ? date.year : 0,\n\t\t\tmonth: (date.month !== undefined) ? date.month : 1,\n\t\t\tday: (date.day !== undefined) ? date.day : 0,\n\t\t\thour: (date.hour !== undefined) ? date.hour : 0,\n\t\t\tminute: (date.min !== undefined) ? date.min : 0,\n\t\t\tsecond: (date.sec !== undefined) ? date.sec : 0,\n\t\t\ttimezone: 'Etc/UTC'\n\t\t};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateDate: function () {\n\t\tvar d, h;\n\t\tif (this.mode === 'normal') {\n\t\t\td = new Date(Date.now() + this._timeDiff);\n\t\t\th = d.getHours();\n\t\t} else {\n\t\t\td = this.date;\n\t\t\th = (this.date.hour) ? this.date.hour : 0;\n\t\t}\n\t\tthis.updateTime(d, h);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateTime: function (inDate, inHour) {\n\t\tvar time = '';\n\t\tif (this._tf) {\n\t\t\ttime = this._tf.format((this.mode === 'normal')\t? ilib.Date.newInstance({unixtime: inDate.getTime(), timezone:'Etc/UTC'})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ilib.Date.newInstance(this.parseStaticDate(inDate)));\n\t\t} else {\n\t\t\ttime += (inHour > 12 ? inHour-12: inHour) || 12;\n\t\t\ttime += ':' + ('00' + inDate.getMinutes()).slice(-2);\n\t\t\ttime += inHour > 11 ? 'pm' : 'am';\n\t\t}\n\t\tthis.$.clock.setContent(time);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleLocaleChangeEvent: function () {\n\t\tthis._refresh();\n\t\tthis.updateDate();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\t$L = require('../moon-ilib');\n\n\n/**\n* {@link moon.ExpandableTextButton} is a control used inside of {@link moon.ExpandableText}.\n*\n* @class moon.ExpandableTextButton\n* @extends enyo.Control\n* @ui\n* @private\n*/\nvar ExpandableTextButton = kind(\n\t/** @lends moon.ExpandableTextButton.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ExpandableTextButton',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t* @lends moon.ExpandableTextButton.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Button text when [collapsed]{@link moon.ExpandableTextButton#collapsed} is `true`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'more'\n\t\t* @public\n\t\t*/\n\t\tmoreContent: $L('more'),\t\t// i18n 'MORE' label in moon.ExpandableTextButton widget\n\n\t\t/**\n\t\t* Button text when [collapsed]{@link moon.ExpandableTextButton#collapsed} is `false`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'less'\n\t\t* @public\n\t\t*/\n\t\tlessContent: $L('less'),\t\t// i18n 'LESS' label in moon.ExpandableTextButton widget\n\n\t\t/**\n\t\t* Boolean value that causes content/class changes.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tcollapsed: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\n\t\t/**\n\t\t* {@link enyo.Spotlight#onSpotlightFocus}, the handler bubbles a\n\t\t* [requestScrollIntoView]{@link moon.Scroller#requestScrollIntoView} event.\n\t\t*/\n\t\tonSpotlightFocused\t: 'spotFocused'\n\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-body-text moon-expandable-text-button',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.updateContent();\n\t},\n\n\t/**\n\t* Bubbles a [requestScrollIntoView]{@link moon.Scroller#requestScrollIntoView}\n\t* event.\n\t*\n\t* @fires moon.Scroller#requestScrollIntoView\n\t* @private\n\t*/\n\tspotFocused: function (inSender, inEvent) {\n\t\tif (inEvent.originator === this) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmoreContentChanged: function () {\n\t\tthis.updateContent();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlessContentChanged: function () {\n\t\tthis.updateContent();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcollapsedChanged: function () {\n\t\tthis.updateContent();\n\t},\n\n\t/**\n\t* If control is collapsed, sets [content]{@link moon.ExpandableTextButton#content} to \n\t* [moreContent]{@link moon.ExpandableTextButton#moreContent} and adds `collapsed` CSS class;\n\t* otherwise, sets content to [lessContent]{@link moon.ExpandableTextButton#lessContent} and\n\t* removes `collapsed` CSS class.\n\t*\n\t* @private\n\t*/\n\tupdateContent: function () {\n\t\tif (this.collapsed) {\n\t\t\tthis.setContent(this.moreContent);\n\t\t\tthis.addClass('collapsed');\n\t\t} else {\n\t\t\tthis.setContent(this.lessContent);\n\t\t\tthis.removeClass('collapsed');\n\t\t}\n\t}\n});\n\n/**\n* Fires when this control expands or collapses.\n*\n* @event moon.ExpandableText#onExpandCollapse\n* @type {Object}\n* @property {Boolean} collapsed - Whether the control is currently collapsed.\n* @public\n*/\n\n/**\n* {@link moon.ExpandableText} is a control that allows long bodies of text to be\n* expanded and collapsed.\n*\n* ```\n* {kind: 'moon.ExpandableText', collapsed: true, maxLines: 3,\n* content: 'I left my heart in San Francisco.'}\n* ```\n*\n* The [onExpandCollapse]{@link moon.ExpandableText#onExpandCollapse} event is fired\n* when the control is either expanded or collapsed.\n*\n* @class moon.ExpandableText\n* @extends enyo.Control\n* @ui\n* @public\n*/\n\nvar ExpandableText = module.exports = kind(\n\t/** @lends moon.ExpandableText.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ExpandableText',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t//* @protected\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-expandable-text',\n\n\t/**\n\t* @private\n\t* @lends moon.ExpandableText.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* When `true`, content is collapsed.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tcollapsed: true,\n\n\t\t/**\n\t\t* Maximum number of lines of content to show in collapsed state.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 3\n\t\t* @public\n\t\t*/\n\t\tmaxLines: 3,\n\n\t\t/**\n\t\t* Button text when content is collapsed (i.e., 'more' label). Default is\n\t\t* locale-aware.\n\t\t* @type {String}\n\t\t* @default 'more'\n\t\t* @public\n\t\t*/\n\t\tmoreContent: $L('more'),\n\n\t\t/**\n\t\t* Button text when content is expanded (i.e., 'less' label). Default is\n\t\t* locale-aware.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'less'\n\t\t* @public\n\t\t*/\n\t\tlessContent: $L('less')\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.ExpandableText#onExpandCollapse}\n\t\t*/\n\t\tonExpandCollapse: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents:[\n\t\t{name: 'client', kind: Control, classes: 'moon-body-text moon-expandable-text-content'},\n\t\t{name: 'button', kind: ExpandableTextButton, ontap: 'expandContract'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tlineHeight: 32,\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeight: 96,\n\n\t/**\n\t* @private\n\t*/\n\tcontentHeight: -1,\n\n\t/**\n\t* @private\n\t*/\n\tcanCollapse: true,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.moreContentChanged();\n\t\tthis.lessContentChanged();\n\t\tthis.collapsedChanged();\n\t},\n\n\t/**\n\t* Updates [lineHeight]{@link moon.ExpandableText#lineHeight} after render.\n\t*\n\t* @private\n\t*/\n\trendered: function () {\n\t\tControl.prototype.rendered.apply(this, arguments);\n\t\tthis.calcLineHeight();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleResize: function () {\n\t\tthis.reflow();\n\t},\n\n\t/**\n\t* Updates [contentHeight]{@link moon.ExpandableText#contentHeight} on reflow.\n\t*\n\t* @private\n\t*/\n\treflow: function () {\n\t\tthis.calcContentHeight();\n\t},\n\n\t/**\n\t* Toggles value of [collapsed]{@link moon.ExpandableText#collapsed} when\n\t* `this.$.button` is tapped.\n\t*\n\t* @private\n\t*/\n\texpandContract: function () {\n\t\tthis.set('collapsed', !this.collapsed);\n\t},\n\n\t/**\n\t* Facades `this.$.client.content`.\n\t*\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tthis.$.client.setContent(this.content);\n\n\t\tif (this.hasNode()) {\n\t\t\tthis.reflow();\n\t\t}\n\t},\n\n\t/**\n\t* Facades `this.$.button.moreContent`.\n\t*\n\t* @private\n\t*/\n\tmoreContentChanged: function () {\n\t\tthis.$.button.setMoreContent(this.moreContent);\n\t},\n\n\t/**\n\t* Facades `this.$.button.lessContent`.\n\t*\n\t* @private\n\t*/\n\tlessContentChanged: function () {\n\t\tthis.$.button.setLessContent(this.lessContent);\n\t},\n\n\t/**\n\t* Recalculates [maxHeight]{@link moon.ExpandableText#maxHeight} when\n\t* [lineHeight]{@link moon.ExpandableText#lineHeight} changes.\n\t*\n\t* @private\n\t*/\n\tlineHeightChanged: function () {\n\t\tthis.calcMaxHeight();\n\t},\n\n\t/**\n\t* Recalculates [maxHeight]{@link moon.ExpandableText#maxHeight} when\n\t* [maxLines]{@link moon.ExpandableText#maxLines} changes.\n\t*\n\t* @private\n\t*/\n\tmaxLinesChanged: function () {\n\t\tthis.calcMaxHeight();\n\t},\n\n\t/**\n\t* When [collapsed]{@link moon.ExpandableText#collapsed} changes, adds/removes the\n\t* line clamp, and pushes state to `this.$.button`. If the node has rendered, bubbles\n\t* [onExpandCollapse]{@link moon.ExpandableText#onExpandCollapse} event.\n\t*\n\t* @fires moon.ExpandableText#onExpandCollapse\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tcollapsedChanged: function () {\n\t\tthis.addRemoveLineClamp(this.collapsed);\n\t\tthis.$.button.setCollapsed(this.collapsed);\n\t\tif (this.hasNode()) {\n\t\t\tthis.doExpandCollapse({collapsed: this.collapsed});\n\t\t}\n\t\tthis.bubble('onRequestScrollIntoView', {scrollInPointerMode: true});\n\t},\n\n\t/**\n\t* Updates [canCollapse]{@link moon.ExpandableText#canCollapse} when\n\t* [maxHeight]{@link moon.ExpandableText#maxHeight} changes.\n\t*\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\tthis.calcCanCollapse();\n\t\tthis.addRemoveLineClamp(this.collapsed);\n\t},\n\n\t/**\n\t* Updates [canCollpase]{@link moon.ExpandableText#canCollapse} when\n\t* [contentHeight]{@link moon.ExpandableText#contentHeight} changes.\n\t*\n\t* @private\n\t*/\n\tcontentHeightChanged: function () {\n\t\tthis.calcCanCollapse();\n\t},\n\n\t/**\n\t* Updates `this.$.button.showing` when\n\t* [canCollapse]{@link moon.ExpandableText#canCollapse} changes.\n\t*\n\t* @private\n\t*/\n\tcanCollapseChanged: function () {\n\t\tthis.$.button.setShowing(this.canCollapse);\n\t},\n\n\t/**\n\t* Updates [maxHeight]{@link moon.ExpandableText#maxHeight}.\n\t*\n\t* @private\n\t*/\n\tcalcMaxHeight: function () {\n\t\tthis.set('maxHeight', this.maxLines * this.lineHeight);\n\t},\n\n\t/**\n\t* Calculates line height of content and sets\n\t* [lineHeight]{@link moon.ExpandableText#lineHeight}.\n\t*\n\t* @private\n\t*/\n\tcalcLineHeight: function () {\n\t\tvar lineHeight = parseInt(dom.getComputedStyleValue(this.$.client.hasNode(), 'line-height'), 10);\n\t\tthis.set('lineHeight', (lineHeight > 0) ? lineHeight : null);\n\t},\n\n\t/**\n\t* Updates [contentHeight]{@link moon.ExpandableText#contentHeight} by unclamping\n\t* `this.$.client` and measuring it, before returning it to its previous state.\n\t*\n\t* @private\n\t*/\n\tcalcContentHeight: function () {\n\t\tvar contentHeight;\n\t\tthis.addRemoveLineClamp(false);\n\t\tcontentHeight = (this.$.client.hasNode()) ? this.$.client.hasNode().getBoundingClientRect().height : 0;\n\t\tthis.addRemoveLineClamp(this.collapsed);\n\t\tthis.set('contentHeight', contentHeight);\n\t},\n\n\t/**\n\t* Determines whether this control has enough content to collapse.\n\t*\n\t* @private\n\t*/\n\tcalcCanCollapse: function () {\n\t\tthis.set('canCollapse', this.contentHeight > this.maxHeight);\n\t},\n\n\t/**\n\t* @param {Boolean} inAdd Whether to add or remove `webkit-line-clamp` style.\n\t* @private\n\t*/\n\taddRemoveLineClamp: function (inAdd) {\n\t\tthis.$.client.applyStyle('-webkit-line-clamp', (inAdd) ? this.maxLines : null);\n\t}\n});\n\nExpandableText.ExpandableTextButton = ExpandableTextButton;","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control'),\n\tHTMLStringDelegate = require('../../../enyo/lib/HTMLStringDelegate');\n\n/**\n* Event sent to {@link moon.HighlightText} to turn on highlighting.\n*\n* @event moon.HighlightText#onHighlight\n* @type {Object}\n* @property {String|RegExp} highlight - String or regular expression specifying the text or\n*\tpattern to highlight.\n* @public\n*/\n\n/**\n* Event sent to {@link moon.HighlightText} to turn off highlighting. No additional data\n* is sent with this event.\n*\n* @event moon.HighlightText#onUnHighlight\n* @type {Object}\n* @public\n*/\n\nvar HighlightTextDelegate = Object.create(HTMLStringDelegate);\n\nHighlightTextDelegate.generateInnerHtml = function (control) {\n\tvar i = 0, child;\n\t// flow can alter the way that html content is rendered inside\n\t// the container regardless of whether there are children.\n\tcontrol.flow();\n\tif (control.children.length) {\n\t\t// If marqueeText is created inside of highlightText then it needs to pass search keyword to children\n\t\tfor (; (child = control.children[i]); ++i) {\n\t\t\tchild.search = control.search;\n\t\t\tchild.highlightClasses = control.highlightClasses; // this is not included in search, so passing it\n\t\t}\n\t\treturn this.generateChildHtml(control);\n\t}\n\telse {\n\t\tif (control.search && control.content) {\n\t\t\treturn control.content.replace(control.search, control.bindSafely(function (s) {\n\t\t\t\treturn '<span style=\\'pointer-events:none;\\' class=\\'' + this.highlightClasses + '\\'>' + dom.escape(s) + '</span>';\n\t\t\t}));\n\t\t} else {\n\t\t\treturn dom.escape(control.get('content'));\n\t\t}\n\t}\n};\n\n/**\n* {@link moon.HighlightText} is a control that displays highlighted text.  When\n* the [highlight]{@link moon.HighlightText#highlight} property is set or an\n* [onHighlight]{@link moon.HighlightText#onHighlight} event is received,\n* it will highlight a specified string if that string is found within the\n* control's content.\n*\n* For example, let's say we have the following control:\n*\n* ```\n* {kind: 'moon.HighlightText', name: 'myHT', content: 'Hello World!'}\n* ```\n* In response to the event\n*\n* ```\n* this.waterfall('onHighlight', {highlight: 'Hello'});\n* ```\n* or the direct API call\n*\n* ```\n* this.$.myHT.set('highlight', 'Hello');\n* ```\n*\n* the word 'Hello' will be highlighted.\n*\n* The highlighting will be turned off when an\n* [onUnHighlight]{@link moon.HighlightText#onUnHighlight} event is received.\n*\n* ```\n* this.waterfall('onUnHighlight');\n* ```\n* or when [highlight]{@link moon.HighlightText#highlight} is set to a **falsy** value.\n*\n* ```\n* this.$.myHT.set('highlight', '');\n* ```\n*\n* @class moon.HighlightText\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.HighlightText.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.HighlightText',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t* @lends moon.HighlightText.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* String or regular expression specifying the text or pattern to highlight.\n\t\t* Setting this to an empty string, a **falsy** value, or an empty regex\n\t\t* will disable highlighting.\n\t\t*\n\t\t* @type {String|RegExp}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\thighlight: '',\n\n\t\t/**\n\t\t* If `true`, only case-sensitive matches of the string to highlight will be\n\t\t* highlighted.  This property will be ignored if the\n\t\t* [highlight]{@link moon.HighlightText#highlight} property is set to a regular\n\t\t* expression (you may use the `'i'` modifier to create a case-insensitive regex).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tcaseSensitive: false,\n\n\t\t/**\n\t\t* The default CSS class to apply to highlighted content.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-highlight-text-highlighted'\n\t\t* @public\n\t\t*/\n\t\thighlightClasses: 'moon-highlight-text-highlighted'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trenderDelegate: HighlightTextDelegate,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonHighlight: 'onHighlightHandler',\n\t\tonUnHighlight: 'unHighlightHandler'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.highlightChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thighlightChanged: function () {\n\t\tif (this.highlight) {\n\t\t\tif (this.highlight instanceof RegExp) {\n\t\t\t\t// Make sure the regex isn't empty\n\t\t\t\tthis.search = (''.match(this.highlight)) ? null : this.highlight;\n\t\t\t} else {\n\t\t\t\t// Escape string for use in regex (standard regex escape from google)\n\t\t\t\tvar escaped = this.highlight.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n\t\t\t\tthis.search = new RegExp(escaped, this.caseSensitive ? 'g' : 'ig');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.search = false;\n\t\t}\n\t\tif (this.hasNode()) {\n\t\t\tthis.contentChanged();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcaseSensitiveChanged: function () {\n\t\tthis.highlightChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonHighlightHandler: function (inSender, inEvent) {\n\t\tthis.setHighlight(inEvent.highlight);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tunHighlightHandler: function (inSender, inEvent) {\n\t\tthis.setHighlight('');\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tready = require('../../../enyo/lib/ready'),\n\tutil = require('../../../enyo/lib/utils'),\n\tSignals = require('../../../enyo/lib/Signals');\n\n/**\n* The `moon.History` singleton provides an abstract way of handling historical state in an app,\n* working in tandem with the native window.history mechanism. The current implementation has\n* built-in support for handling \"back\" actions.\n*\n* @name moon.History\n* @public\n*/\nvar History = module.exports = kind.singleton({\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.History',\n\n\t/**\n\t* The stack of \"back\" action targets and handlers.\n\t*\n\t* @private\n\t*/\n\t_backHistoryStack: [],\n\n\t/**\n\t* If pushstate() is called during popstate is in progress,\n\t* we pushed it into this queue.\n\t*\n\t* @private\n\t*/\n\t_pushBackQueue: [],\n\n\t/**\n\t* Represents whether or not we handle \"back\" actions with respect to history. If the value\n\t* of \"disableBackHistoryAPI\" in appinfo.json is set to `true`, this property will be set to\n\t* `false`.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tenableBackHistoryAPI: true,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{kind: Signals,  onkeyup: 'remoteBackKeyHandler'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tlunaServiceComponents: [\n\t\t{\n\t\t\tname:       'getAppID',\n\t\t\tkind:       'enyo.LunaService',\n\t\t\tservice:    'palm://com.webos.applicationManager/',\n\t\t\tmethod:     'getForegroundAppInfo',\n\t\t\tsubscribe:  true,\n\t\t\tonComplete: '_getAppIDHandler'\n\t\t},\n\t\t{\n\t\t\tname:       'getAppInfo',\n\t\t\tkind:       'enyo.LunaService',\n\t\t\tservice:    'luna://com.webos.applicationManager/',\n\t\t\tmethod:     'getAppInfo',\n\t\t\tsubscribe:  true,\n\t\t\tonComplete: '_getAppInfoHandler'\n\t\t}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tinit: function() {\n\t\twindow.onpopstate = util.bind(this, function(inEvent) {this.popStateHandler();});\n\t\t// if (enyo.LunaService) {\n\t\t// \tthis.createChrome(this.lunaServiceComponents);\n\t\t// \tthis._getAppID();\n\t\t// }\n\t},\n\n\t/**\n\t* When our platform is \"PalmSystem\", we need the appID to access the proper appinfo.json.\n\t*\n\t* @private\n\t*/\n\t_getAppID: function () {\n\t\t// if(scope.PalmSystem) {\n\t\t// \tvar param = {'extraInfo': true};\n\t\t// \tthis.$.getAppID.send(param);\n\t\t// }\n\t},\n\n\t/**\n\t* After LunaService returns the appId, we can retrieve the necessary app information.\n\t*\n\t* @private\n\t*/\n\t_getAppIDHandler: function (inSender, inResponse) {\n\t\tif(inResponse.foregroundAppInfo != null && inResponse.foregroundAppInfo !== undefined) {\n\t\t\tvar foregroundAppInfo = inResponse.foregroundAppInfo;\n\t\t\tvar appID = '';\n\t\t\tfor(var i=0; i<foregroundAppInfo.length; i++) {\n\t\t\t\tif(foregroundAppInfo[i].appId !== undefined && foregroundAppInfo[i].windowType === '_WEBOS_WINDOW_TYPE_CARD') {\n\t\t\t\t\tappID = foregroundAppInfo[i].appId;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(appID !== ''){\n\t\t\t\tthis._getAppInfo(appID);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Retrieve properties from appinfo.json.\n\t*\n\t* @private\n\t*/\n\t_getAppInfo: function (appID) {\n\t\tif(scope.PalmSystem) {\n\t\t\tvar param = {};\n\t\t\tparam.id = appID;\n\t\t\tthis.$.getAppInfo.send(param);\n\t\t}\n\t},\n\n\t/**\n\t* Determine the appropriate value of `enableBackHistoryAPI` from the app information.\n\t*\n\t* @private\n\t*/\n\t_getAppInfoHandler: function (inSender, inResponse) {\n\t\tif(inResponse.appInfo !== undefined) {\n\t\t\tthis.enableBackHistoryAPI = !inResponse.appInfo.disableBackHistoryAPI;\n\t\t}\n\t},\n\n\t/**\n\t* Retrieve the [control]{@link enyo.Control} for the current \"back\" action.\n\t*\n\t* @returns {Object} - The current control whose \"back\" actions we are handling.\n\t* @public\n\t*/\n\tgetCurrentObj: function() {\n\t\treturn this._currentObj;\n\t},\n\n\t/**\n\t* Sets the target object and handler for the current \"back\" action.\n\t*\n\t* @param {Object} ctx - The current control that the \"back\" action should be applied to.\n\t* @param {Function} fn - Handler for the \"back\" action.\n\t* @private\n\t*/\n\t_pushBackHistory: function(ctx, fn) {\n\t\tif (this.enableBackHistoryAPI) {\n\t\t\thistory.pushState({currentObjId: ctx.id}, '', '');\n\t\t}\n\t\tthis._backHistoryStack.push({currentObj: ctx, handler: fn});\n\t\tthis._currentObj = ctx;\n\t\tthis._handler = fn;\n\t},\n\n\t/**\n\t* Store the \"back\" action request to our history. If we are currently handling a `popstate`\n\t* event, we wait until the current event handling is complete.\n\t*\n\t* @param {Object} ctx - The current control that the \"back\" action should be applied to.\n\t* @param {function} fn - Handler for the \"back\" action.\n\t* @public\n\t*/\n\tpushBackHistory: function(ctx, fn) {\n\t\tif (this._isPopStateInProgress) {\n\t\t\tthis._pushBackQueue.push({currentObj: ctx, handler: fn});\n\t\t} else {\n\t\t\tthis._pushBackHistory(ctx, fn);\n\t\t}\n\t},\n\n\t/**\n\t* When we press the \"back\" key, `window.history` should be back 1 step. In synchronizing\n\t* `window.history` and `_backHistoryStack`, we do not want to trigger the \"back\" key\n\t* handler.\n\t*\n\t* @public\n\t*/\n\tignorePopState: function() {\n\t\tif (this.enableBackHistoryAPI) {\n\t\t\tthis._ignorePopState = true;\n\t\t\tthis._isPopStateInProgress = true;\n\t\t\thistory.go(-1);\n\t\t}\n\t},\n\n\t/**\n\t* If our current control has a custom \"back\" key handler, we execute this handler at the\n\t* appropriate time.\n\t*\n\t* @private\n\t*/\n\t_callBackKeyHandler: function() {\n\t\tthis._handlingBackAction = true;\n\t\tif (this._currentObj && this._handler) {\n\t\t\tvar fn = this._handler;\n\t\t\tif (typeof fn == 'function') {\n\t\t\t\tfn = fn.bind(this._currentObj);\n\t\t\t}\n\t\t\tfn();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_popBackHistory: function() {\n\t\tvar bStack = this._backHistoryStack;\n\t\tbStack.pop();\n\t\tif (bStack.length) {\n\t\t\tthis._currentObj = bStack[bStack.length - 1].currentObj;\n\t\t\tthis._handler = bStack[bStack.length - 1].handler;\n\t\t} else {\n\t\t\tthis._currentObj = this._handler = null;\n\t\t}\n\n\t\tthis._handlingBackAction = false;\n\t},\n\n\t/**\n\t* Any calls to `pushstate()` are pushed into a queue when the `popstate` event is currently\n\t* being handled. After the event has been handled, we can dequeue `_pushBackQueue`.\n\t*\n\t* @private\n\t*/\n\t_dequeuePushBack: function() {\n\t\tvar queue = this._pushBackQueue,\n\t\t\tlength = queue.length,\n\t\t\titem;\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\titem = queue.pop();\n\t\t\tthis._pushBackHistory(item.currentObj, item.handler);\n\t\t}\n\t},\n\n\t/**\n\t* There are 3 kinds of `popstate` event triggers: `history.back()`, `history.forward()`, and\n\t* `history.go()`. For our purposes, we only want {@link moon.History} to only handle\n\t* `history.back()` and ignore the other triggers.\n\t*\n\t* @public\n\t*/\n\tpopStateHandler: function() {\n\t\tthis._isPopStateInProgress = false;\n\t\t// TODO: We cannot prevent popstate event triggerd from history.go() or history.forward()\n\t\t// If user call those event directly, moonstone controls may have unexpected behavior.\n\t\tvar state = !this._currentObj ? 'empty'\n\t\t\t\t\t: (this._ignorePopState || window.ignoreFirstPopupEvent) ? 'silence'\n\t\t\t\t\t: !this._currentObj.getShowing() ? 'invisible'\n\t\t\t\t\t: 'active';\n\n\t\tswitch (state) {\n\t\tcase 'empty':\n\t\t\tbreak;\n\t\tcase 'silence':\n\t\t//Popstate event should be ignored on following 2 conditions.\n\t\t//1. When App is loaded, onpopstate event fired with null state.\n\t\t//2. history.go(-1) triggers onpopstate event but it should be ignored.\n\t\t\twindow.ignoreFirstPopupEvent = false;\n\t\t\tthis._ignorePopState = false;\n\t\t\tthis._popBackHistory();\n\t\t\tbreak;\n\t\tcase 'invisible':\n\t\t//Current back key target is on history and have handler too.\n\t\t//However it is invisible.\n\t\t//At this point, we should skip calling back key hanlder and restore history.\n\t\t\thistory.pushState({currentObjId: this._backHistoryStack[this._backHistoryStack.length - 1].currentObj.id}, '', '');\n\t\t\tbreak;\n\t\tcase 'active':\n\t\t\tthis._callBackKeyHandler();\n\t\t\tthis._popBackHistory();\n\t\t\tbreak;\n\t\t}\n\n\t\tthis._dequeuePushBack();\n\t\treturn;\n\t},\n\n\t/**\n\t* Determines whether or not we are currently handling a \"back\" action.\n\t*\n\t* @returns {Boolean} Is `true` if we are currently handling a \"back\" action, and `false`\n\t*\totherwise.\n\t* @public\n\t*/\n\tisHandlingBackAction: function () {\n\t\treturn this._handlingBackAction;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoteBackKeyHandler: function (inSender, inEvent) {\n\t\tif (inEvent.keySymbol == 'back' && this._currentObj && this._currentObj.getShowing()) {\n\t\t\tthis._callBackKeyHandler();\n\t\t\tthis.ignorePopState();\n\t\t}\n\t\treturn true;\n\t}\n});\n\n\n/**\n* {@link moon.History} is a {@glossary mixin} that enables support for custom history. In its\n* current implementation, \"back\" actions are implemented, which allows for controls to override\n* and customize the behavior that occurs when the back key is pressed or the `window.history` is\n* utilized.\n*\n* @mixin moon.HistorySupport\n* @public\n*/\n\n/** @lends moon.HistorySupport.prototype */\nHistory.HistorySupport = {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'HistorySupport',\n\n\t/**\n\t* @private\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* When `true`, pressing the back key will result in control-specific behavior that\n\t\t* corresponds to a \"back\" action.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tallowBackKey: true\n\t},\n\n\t/**\n\t* Pushes a default state to the back history, consisting of a reference to our handler for\n\t* any \"back\" actions.\n\t*\n\t* If the default `pushBackHistory` behavior is to be overridden, ensure that the control's\n\t* implementation of `pushBackHistory` signifies it has handled the necessary behavior by\n\t* returning `true`.\n\t*\n\t* @example\n\t* pushBackHistory: function() {\n\t*\t// perform custom operations here\n\t*\treturn true;\n\t* }\n\t*\n\t* @method\n\t* @public\n\t*/\n\tpushBackHistory: kind.inherit(function (sup) {\n\t\t// When you use a mixin, it will override existing properties and methods. If a control,\n\t\t// which uses `moon.HistorySupport`, has implemented the `pushBackHistory` method, the\n\t\t// method will be replaced with the following method. To ensure that the control's\n\t\t// implementation of `pushBackHistory` is executed, we allow it to run and subsequently\n\t\t// examine its return value.\n\t\treturn function() {\n\t\t\t// check whether this control's `pushBackHistroy` method has effectively handled\n\t\t\t// the call, or whether it wants the inherited method to execute\n\t\t\tif (!sup.apply(this, arguments)) {\n\t\t\t\tHistory.pushBackHistory(this, this.backKeyHandler);\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t}),\n\n\t/**\n\t* Handler for whenever a \"back\" action is triggered. The default behavior is to hide the\n\t* control if it is showing.\n\t*\n\t* Most controls will want to override this behavior. If the default behavior should not be\n\t* executed, ensure that the `backKeyHandler` method in the control signifies it has handled\n\t* the necessary behavior by returning `true`.\n\t*\n\t* @method\n\t* @public\n\t*/\n\tbackKeyHandler: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tif (!sup.apply(this, arguments)) {\n\t\t\t\tif (this.showing) this.hide();\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t})\n};\n\nready(function() {\n\tHistory.init();\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tri = require('../../../enyo/lib/resolution'),\n\tpath = require('../../../enyo/lib/pathResolver'),\n\tControl = require('../../../enyo/lib/Control');\n\n// Static private hash of all of the valid moonstone icons\nvar icons = {\n\tdrawer            : '&#983040;',  // \\0F0000\n\tarrowlargedown    : '&#983041;',  // \\0F0001\n\tarrowlargeup      : '&#983042;',  // \\0F0002\n\tarrowlargeleft    : '&#983043;',  // \\0F0003\n\tarrowlargeright   : '&#983044;',  // \\0F0004\n\tarrowsmallup      : '&#983045;',  // \\0F0005\n\tarrowsmalldown    : '&#983046;',  // \\0F0006\n\tarrowsmallleft    : '&#983047;',  // \\0F0007\n\tarrowsmallright   : '&#983048;',  // \\0F0008\n\tclosex            : '&#983049;',  // \\0F0009\n\tcheck             : '&#983050;',  // \\0F000A\n\tsearch            : '&#983051;',  // \\0F000B\n\texitfullscreen    : '&#983057;',  // \\0F0011\n\tfullscreen        : '&#983058;',  // \\0F0012\n\tcircle            : '&#983059;',  // \\0F0013\n\tstop              : '&#983060;',  // \\0F0014\n\tplay              : '&#983061;',  // \\0F0015\n\tpause             : '&#983062;',  // \\0F0016\n\tforward           : '&#983063;',  // \\0F0017\n\tbackward          : '&#983064;',  // \\0F0018\n\tskipforward       : '&#983065;',  // \\0F0019\n\tskipbackward      : '&#983066;',  // \\0F001A\n\tpauseforward      : '&#983067;',  // \\0F001B\n\tpausebackward     : '&#983068;',  // \\0F001C\n\tpausejumpforward  : '&#983069;',  // \\0F001D\n\tpausejumpbackward : '&#983070;',  // \\0F001E\n\tjumpforward       : '&#983071;',  // \\0F001F\n\tjumpbackward      : '&#983072;',  // \\0F0020\n\tarrowextend       : '&#983073;',  // \\0F0021\n\tarrowshrink       : '&#983074;'   // \\0F0022\n};\n\n/**\n* {@link moon.Icon} is a control that displays an icon image. You may specify the\n* image by setting the [src]{@link moon.Icon#src} property to a URL indicating the\n* image file's location.\n*\n* ```\n* {kind: 'moon.Icon', src: 'images/search.png'}\n* ```\n*\n* Moonstone also supports a second method for displaying icons; in addition to\n* using traditional image assets specified in `src`, you may use icons that are\n* stored as single characters in a special symbol font. To do this, set the\n* value of the [icon]{@link moon.Icon#icon} property to a string representing an\n* icon name, e.g.:\n*\n* ```\n* {kind: 'moon.Icon', icon: 'closex'}\n* ```\n*\n* For image-based icons, two sizes are supported: large (45x45 pixels) and small\n* (32x32 pixels). Icons are small by default. To specify a large icon, set the\n* [small]{@link moon.Icon#small} property to `false`:\n*\n* ```\n* {kind: 'moon.Icon', src: 'images/search.png', small: false}\n*\n* {kind: 'moon.Icon', icon: 'closex', small: false}\n* ```\n*\n* In addition, both icon sizes support two states: a default (resting) state,\n* and a pressed (active) state. Both states need to be included in the icon's\n* associated image asset, with the resting state on top and the active state on\n* the bottom.\n*\n* Image assets for large icons should be 75px wide and 150px high. This allows\n* room for the two states, along with 15 pixels of transparent padding on all\n* four sides of each 45x45 icon.\n*\n* Assets for small icons should be 50px wide and 100px high. This allows room\n* for the two states, along with 9 pixels of transparent padding on all four\n* sides of each 32x32 icon.\n*\n* Since asset-based icon images are applied as CSS backgrounds, the height and\n* width of an icon must be set if an image of a non-standard size is used.\n*\n* For situations in which an icon should act like a button, use\n* {@link moon.IconButton}.\n*\n* @class moon.Icon\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Icon.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Icon',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tallowHtml: true,\n\n\t/**\n\t* @private\n\t* @lends moon.Icon.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* This property serves two purposes. One, it accepts one of the below Moonstone icon\n\t\t* names. Two, it also supports standard ascii characters or HTML entities, to directly\n\t\t* represent a glyph. By default, the font used when you specify a\n\t\t* character/entity/glyph, the font \"LG Display_Dingbat\" will be used. It is applied via\n\t\t* a `class`: \"font-lg-icons\". To apply your own dingbat font, override this class's\n\t\t* `font-family` property in your CSS.\n\t\t*\n\t\t* The following icon names are valid:\n\t\t*\n\t\t* `drawer`\n\t\t* `arrowlargedown`\n\t\t* `arrowlargeup`\n\t\t* `arrowlargeleft`\n\t\t* `arrowlargeright`\n\t\t* `arrowsmallup`\n\t\t* `arrowsmalldown`\n\t\t* `arrowsmallleft`\n\t\t* `arrowsmallright`\n\t\t* `closex`\n\t\t* `check`\n\t\t* `search`\n\t\t* `exitfullscreen`\n\t\t* `fullscreen`\n\t\t* `circle`\n\t\t* `stop`\n\t\t* `play`\n\t\t* `pause`\n\t\t* `forward`\n\t\t* `backward`\n\t\t* `skipforward`\n\t\t* `skipbackward`\n\t\t* `pauseforward`\n\t\t* `pausebackward`\n\t\t* `pausejumpforward`\n\t\t* `pausejumpbackward`\n\t\t* `jumpforward`\n\t\t* `jumpbackward`\n\t\t* `arrowextend`\n\t\t* `arrowshrink`\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ticon: '',\n\n\t\t/**\n\t\t* URL specifying path to icon image.\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: '',\n\n\t\t/**\n\t\t* If `true`, icon is shown as disabled.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* A boolean parameter affecting the size of the icon.\n\t\t* If `true`, the icon will be 32px by 32px. If `false`, the icon will be 45px\n\t\t* by 45px. When `small` is `true`, a larger, invisible tap area will be applied\n\t\t* around the icon.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tsmall: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\t/**\n\t\t* This is a horrible hack to prevent event bubble caching from messing up\n\t\t* moon.Tooltip positioning (BHV-13377). In short, we don't need to do anything\n\t\t* with onenter ourselves, but we need it to pass through us on the way to\n\t\t* moon.TooltipDecorator, which uses inSender to figure out who the tooltip\n\t\t* activator should be.\n\t\t*\n\t\t* TODO: Something better.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tonenter: 'doNothing'\n\t},\n\n\t/**\n\t* @returns {String} The value of the [src]{@link moon.Icon#src} property.\n\t* @public\n\t*/\n\tgetSrc: function () {\n\t\treturn this.src;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-icon',\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\n\t\tthis.smallChanged();\n\t\tif (this.src) {\n\t\t\tthis.srcChanged();\n\t\t}\n\t\tthis.disabledChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetIconClass: function (inIconName) {\n\t\treturn 'moon-icon-' + (inIconName || this.icon);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.addRemoveClass('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsrcChanged: function () {\n\t\tvar src = this.src || null;\n\t\tsrc = ri.selectSrc(src);\n\t\tif (src) {\n\t\t\tif (src != 'none' && src != 'inherit' && src != 'initial') {\n\t\t\t\tsrc = 'url(' + path.rewrite(src) + ')';\n\t\t\t}\n\t\t}\n\t\tthis.applyStyle('background-image', src);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ticonChanged: function (old) {\n\t\tvar icon = this.get('icon') || '',\n\t\t\ticonEntity = icons[icon] || icon;\n\n\t\t// If the icon isn't in our known set, apply our custom font class\n\t\tthis.addRemoveClass('font-lg-icons', !icons[icon]);\n\n\t\tif (this.get('small')) {\n\t\t\tthis.$.tapArea.set('content', iconEntity);\n\t\t} else {\n\t\t\tthis.set('content', iconEntity);\n\t\t}\n\n\t\tif (icons[old]) {\n\t\t\tthis.removeClass(this.getIconClass(old));\n\t\t}\n\t\tif (icons[icon]) {\n\t\t\tthis.addClass(this.getIconClass());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsmallChanged: function () {\n\t\tif (this.small) {\n\t\t\tvar ta = this.createComponent({name: 'tapArea', classes: 'small-icon-tap-area', allowHtml: this.allowHtml, isChrome: true});\n\n\t\t\tif (this.generated) {\n\t\t\t\tta.render();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.$.tapArea) {\n\t\t\t\tthis.$.tapArea.destroy();\n\t\t\t}\n\t\t}\n\t\tthis.addRemoveClass('small', this.small);\n\t\t// Now that our content area is ready, assign the icon\n\t\tthis.iconChanged();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\tControl = require('../../../enyo/lib/Control');\n\n/**\n* {@link moon.ObjectActionDecorator} is a decorator that wraps a spotlightable object.\n* When the object is focused, additional controls are displayed, allowing the user to\n* act on the object.\n*\n* The decorator supports two orientations: `'vertical'`, with object actions placed\n* below the wrapped components, and `'horizontal'`, with object actions placed next to\n* the components.\n*\n* The following is a vertical example:\n* ```javascript\n* {\n* \tkind: 'moon.ObjectActionDecorator',\n* \torientation: 'vertical',\n* \tcomponents: [\n* \t\t{kind: 'moon.Item', components: [\n* \t\t\t{name: 'image', kind: 'enyo.Image', src: 'assets/default-music.png'}\n* \t\t]}\n* \t],\n* \tactionComponents: [\n* \t\t{kind: 'moon.Button', name: 'Play', small: true, content: 'PLAY'},\n* \t\t{kind: 'moon.Button', name: 'Favorite', small: true, content: 'FAVORITE'},\n* \t\t{kind: 'moon.Button', name: 'Share', small: true, content: 'SHARE'}\n* \t]\n* }\n* ```\n*\n* @class moon.ObjectActionDecorator\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ObjectActionDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ObjectActionDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-objaction',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightFocused: 'spotFocused',\n\t\tonSpotlightBlur: 'spotBlur',\n\t\tonenter: 'enter',\n\t\tonleave: 'leave'\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.ObjectActionDecorator.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Orientation of object actions in relation to focused components; `'vertical'` places\n\t\t* the object actions below the components, while `'horizontal'` places them next to the\n\t\t* components.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'vertical'\n\t\t* @public\n\t\t*/\n\t\torientation: 'vertical',\n\n\t\t/**\n\t\t* When [orientation]{@link moon.ObjectActionDecorator} is `'vertical'`, setting\n\t\t* `noStretch: false` causes the object actions to be stretched to fit the width of the\n\t\t* components above.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tnoStretch: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name:'client', kind: Control, classes: 'moon-objaction-client'},\n\t\t{name:'actions', kind: Control, classes: 'moon-objaction-actions'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\torientationChanged: function () {\n\t\tvar vertical = this.getOrientation() == 'vertical';\n\t\tthis.addRemoveClass('vertical', vertical);\n\t\tthis.addRemoveClass('horizontal', !vertical);\n\t\tthis.$.actions.addRemoveClass('moon-vspacing', vertical);\n\t\tthis.$.actions.addRemoveClass('moon-hspacing', !vertical);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnoStretchChanged: function() {\n\t\tthis.$.actions.addRemoveClass('stretch', !this.noStretch);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function() {\n\t\tControl.prototype.initComponents.apply(this, arguments);\n\t\tif (this.actionComponents) {\n\t\t\tvar owner = this.hasOwnProperty('actionComponents') ? this.getInstanceOwner() : this;\n\t\t\tthis.$.actions.createComponents(this.actionComponents, {owner: owner});\n\t\t}\n\t\tthis.orientationChanged();\n\t\tthis.noStretchChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotFocused: function(inSender, inEvent) {\n\t\tthis.focused = true;\n\t\tthis.updateActionsVisibility();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotBlur: function(inSender, inEvent) {\n\t\tthis.focused = false;\n\t\tthis.entered = false;\n\t\tthis.updateActionsVisibility();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tenter: function(inSender, inEvent) {\n\t\tthis.entered = true;\n\t\tthis.updateActionsVisibility();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tleave: function(inSender, inEvent) {\n\t\tthis.entered = false;\n\t\tthis.updateActionsVisibility();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateActionsVisibility: function() {\n\t\tthis.$.actions.applyStyle('opacity', (this.focused || this.entered) ? 1 : 0);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control'),\n\tAnimator = require('../../../enyo/lib/Animator');\n\n/**\n* Fires when progress bar finishes animating to a position. No event-specific data\n* is sent with this event.\n*\n* @event moon.ProgressBar#onAnimateProgressFinish\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.ProgressBar} is a [control]{@link enyo.Control} that shows the current\n* progress of a process in a horizontal bar.\n*\n* ```\n* {kind: 'moon.ProgressBar', progress: 10}\n* ```\n*\n* To animate a progress change, call the\n* [animateProgressTo()]{@link moon.ProgressBar#animateProgressTo} method:\n*\n* ```\n* this.$.progressBar.animateProgressTo(50);\n* ```\n*\n* You may customize the color of the bar by applying a style via the\n* [barClasses]{@link moon.ProgressBar#barClasses} property, e.g.:\n*\n* ```\n* {kind: 'moon.ProgressBar', barClasses: 'class-name'}\n* ```\n*\n* For more information, see the documentation on [Progress\n* Indicators]{@linkplain $dev-guide/building-apps/controls/progress-indicators.html}\n* in the Enyo Developer Guide.\n*\n* @class moon.ProgressBar\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ProgressBar.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ProgressBar',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-progress-bar',\n\n\t/**\n\t* @private\n\t* @lends moon.ProgressBar.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Current position of progress bar.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tprogress: 0,\n\n\t\t/**\n\t\t* Minimum progress value (i.e., no progress made).\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tmin: 0,\n\n\t\t/**\n\t\t* Maximum progress value (i.e., process complete).\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 100\n\t\t* @public\n\t\t*/\n\t\tmax: 100,\n\n\t\t/**\n\t\t* CSS classes to apply to progress bar.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-progress-bar-bar'\n\t\t* @public\n\t\t*/\n\t\tbarClasses: 'moon-progress-bar-bar',\n\n\t\t/**\n\t\t* CSS classes to apply to background progress bar.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-progress-bg-bar'\n\t\t* @public\n\t\t*/\n\t\tbgBarClasses: 'moon-progress-bg-bar',\n\n\t\t/**\n\t\t* Completion percentage for background process.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tbgProgress: 0\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.ProgressBar#onAnimateProgressFinish}\n\t\t*/\n\t\tonAnimateProgressFinish: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'progressAnimator', kind: Animator, onStep: 'progressAnimatorStep', onEnd: 'progressAnimatorComplete'},\n\t\t{name: 'bgbar', kind: Control},\n\t\t{name: 'bar', kind: Control}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.progressChanged();\n\t\tthis.barClassesChanged();\n\t\tthis.bgBarClassesChanged();\n\t\tthis.bgProgressChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbarClassesChanged: function (inOld) {\n\t\tthis.$.bar.removeClass(inOld);\n\t\tthis.$.bar.addClass(this.barClasses);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbgBarClassesChanged: function (inOld) {\n\t\tthis.$.bgbar.removeClass(inOld);\n\t\tthis.$.bgbar.addClass(this.bgBarClasses);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbgProgressChanged: function () {\n\t\tthis.bgProgress = this.clampValue(this.min, this.max, this.bgProgress);\n\t\tvar p = this.calcPercent(this.bgProgress);\n\t\tthis.updateBgBarPosition(p);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprogressChanged: function () {\n\t\tthis.progress = this.clampValue(this.min, this.max, this.progress);\n\t\tvar p = this.calcPercent(this.progress);\n\t\tthis.updateBarPosition(p);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclampValue: function (inMin, inMax, inValue) {\n\t\treturn Math.max(inMin, Math.min(inValue, inMax));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcRatio: function (inValue) {\n\t\treturn (inValue - this.min) / (this.max - this.min);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcPercent: function (inValue) {\n\t\treturn this.calcRatio(inValue) * 100;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateBarPosition: function (inPercent) {\n\t\tthis.$.bar.applyStyle('width', inPercent + '%');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateBgBarPosition: function (inPercent) {\n\t\tthis.$.bgbar.applyStyle('width', inPercent + '%');\n\t},\n\n\t/**\n\t* Animates progress to the passed-in value.\n\t*\n\t* @param {Number} inValue  The destination number\n\t* @public\n\t*/\n\tanimateProgressTo: function (inValue) {\n\t\tthis.$.progressAnimator.play({\n\t\t\tstartValue: this.progress,\n\t\t\tendValue: inValue,\n\t\t\tnode: this.hasNode()\n\t\t});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprogressAnimatorStep: function (inSender) {\n\t\tthis.setProgress(inSender.value);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @fires moon.ProgressBar#onAnimateProgressFinish\n\t* @private\n\t*/\n\tprogressAnimatorComplete: function (inSender) {\n\t\tthis.doAnimateProgressFinish();\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tScrim = require('../../../enyo/lib/Scrim');\n\n/**\n* `moon.Scrim` is a Moonstone-styled {@link enyo.Scrim}\n*\n* @class moon.Scrim\n* @extends enyo.Scrim\n* @ui\n* @public\n*/\nvar MoonScrim = module.exports = kind(\n\t/** @lends  moon.Scrim.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Scrim',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Scrim,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-scrim'\n});\n\nMoonScrim.scrim = new Scrim.ScrimSingleton('moon.scrim', {floating: true, classes: 'moon-scrim moon-scrim-translucent'});\nMoonScrim.scrimTransparent = new Scrim.ScrimSingleton('moon.scrimTransparent', {floating: true, classes: 'moon-scrim moon-scrim-transparent'});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tScrollThumb = require('../../../enyo/lib/ScrollThumb');\n\n/**\n* {@link moon.ScrollThumb}, which extends {@link enyo.ScrollThumb}, is\n* used to display a small visual scroll indicator.\n*\n* `moon.ScrollThumb` is not typically created in application code.\n*\n* @class moon.ScrollThumb\n* @extends enyo.ScrollThumb\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends  moon.ScrollThumb.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ScrollThumb',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ScrollThumb,\n\n\t/**\n\t* @private\n\t* @lends moon.ScrollThumb.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* Ratio of size and position of thumb with respect to scroll bounds.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1\n\t\t* @public\n\t\t*/\n\t\tsizeRatio: 1\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-thumb matrix3dsurface',\n\n\t/**\n\t* @private\n\t*/\n\tminSize: 20,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tScrollThumb.prototype.create.apply(this, arguments);\n\t\tvar v = this.axis == 'v';\n\t\tthis.offset = v ? 'top' : 'left';\n\t\tthis.transform = dom.canTransform();\n\t\tthis.accel = dom.canAccelerate();\n\t\tthis.translation = this.accel ? 'matrix3d' : 'matrix';\n\t\tthis.positionMethod = v ? 'getScrollTop' : 'getScrollLeft';\n\t\tthis.sizeDimension = v ? 'clientHeight' : 'clientWidth';\n\t\tthis.addClass('enyo-' + this.axis + 'thumb');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdate: function (inStrategy) {\n\t\tif (this.showing && this.scrollBounds) {\n\t\t\tvar d = this.dimension;\n\t\t\tvar bd = this.scrollBounds[this.sizeDimension], sbd = this.scrollBounds[d];\n\t\t\tvar overs = 0, overp = 0, over = 0;\n\t\t\tvar ratio = this.getSizeRatio();\n\t\t\tif (bd > sbd) {\n\t\t\t\tthis.hide();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (inStrategy.isOverscrolling()) {\n\t\t\t\tover = inStrategy.getOverScrollBounds()['over' + this.offset];\n\t\t\t\tovers = Math.abs(over);\n\t\t\t\toverp = Math.max(over, 0);\n\t\t\t}\n\t\t\tvar sbo = inStrategy[this.positionMethod]() - over;\n\t\t\t// calc size & position\n\t\t\tvar bdc = bd - this.cornerSize;\n\t\t\tvar s = Math.floor((bd * bd / sbd) - overs);\n\t\t\ts = Math.max(this.minSize, s);\n\t\t\tvar p = Math.floor((bdc * sbo / sbd) + overp);\n\t\t\tp = Math.max(0, Math.min(bdc - this.minSize, p));\n\n\t\t\tp *= ratio;\n\t\t\ts *= ratio;\n\n\t\t\t// apply thumb styling if needed\n\t\t\tthis.needed = s < bd;\n\t\t\tif (this.needed && this.hasNode()) {\n\t\t\t\tdom.transformValue(this, this.translation, this.generateMatrix(p, s));\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgenerateMatrix: function (inPosition, inSize) {\n\t\tvar x, y, w, h, node = this.hasNode();\n\n\t\tif (!node) {\n\t\t\tx = 0;\n\t\t\ty = 0;\n\t\t\tw = 1;\n\t\t\th = 1;\n\t\t}\n\t\telse if (this.axis === 'v') {\n\t\t\tx = 0;\n\t\t\ty = inPosition;\n\t\t\tw = 1;\n\t\t\th = inSize/node.offsetHeight;\n\t\t}\n\t\telse {\n\t\t\tx = inPosition;\n\t\t\ty = 0;\n\t\t\tw = inSize/node.offsetWidth;\n\t\t\th = 1;\n\t\t}\n\n\t\treturn (this.accel) ? this.assemble3dMatrix(x, y, w, h) : this.assemle2dMatrix(x, y, w, h);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tassemle2dMatrix: function (inX, inY, inWidth, inHeight) {\n\t\treturn inWidth + ', 0, 0, ' + inHeight + ', ' + inX + ', ' + inY;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tassemble3dMatrix: function (inX, inY, inWidth, inHeight) {\n\t\treturn inWidth + ', 0, 0, 0, 0, ' + inHeight + ', 0, 0, 0, 0, 1, 0, ' + inX + ', ' + inY + ', 1, 1';\n\t},\n\n\t/**\n\t* Override `show()` to give fade effect.\n\t* \n\t* @private\n\t*/\n\tshow: function () {\n\t\tthis.cancelDelayHide();\n\t\tthis.removeClass('hidden');\n\t},\n\n\t/**\n\t* Hides the control.\n\t*\n\t* @private\n\t*/\n\thide: function () {\n\t\tthis.addClass('hidden');\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tlog = require('../../../enyo/lib/logger'),\n\tutils = require('../../../enyo/lib/utils'),\n\tComponent = require('../../../enyo/lib/Component');\n\n/**\n* @typedef {Object} enyo.StyleAnimator~AnimationDefinitionObject\n* @property {String} name - An optional name for the animation. If not specified,\n* a name will be generated.\n* @property {Number} duration - An optional duration. If not specified, the\n*\t[default duration]{@link enyo.StyleAnimator#defaultDuration} will be used.\n* @property {Object} timingFunction - An optional timing function. If not specified, the\n*\t[default timing function]{@link enyo.StyleAnimator#deafultTimingFunction} will be used.\n* @property {String} direction - `'forward'` or `'backward'`. Currently unused.\n* @property {Object[]} keyframes - Animation keyframes.\n* @public\n*/\n\n/**\n* Fires when an animation step occurs.\n*\n* @event enyo.StyleAnimator#onStep\n* @type {Object}\n* @property {Object} animation - A reference to the animation that generated the event.\n* @public\n*/\n\n/**\n* Fires when the animation completes.\n*\n* @event enyo.StyleAnimator#onComplete\n* @type {Object}\n* @property {Object} animation - A reference to the animation that completed.\n* @public\n*/\n\n/**\n* {@link enyo.StyleAnimator} is a basic animation component.  Call\n* [play()]{@link enyo.StyleAnimator#play} to start the animation.  The animation will run for\n* the period of time (in milliseconds) specified by its `duration`, subject to its\n* `timingFunction` and `direction` (See: {@link enyo.StyleAnimator~AnimationDefinitionObject}).\n*\n* @class enyo.StyleAnimator\n* @extends enyo.Component\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends  enyo.StyleAnimator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.StyleAnimator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonStep: '',\n\t\tonComplete: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends enyo.StyleAnimator.prototype\n\t*/\n\tpublished: {\n\t\t//* Default value used if the animation has no `duration` specified.\n\t\tdefaultDuration: 1000,\n\t\t//* Default value used if the animation has no `timingFunction` specified.\n\t\tdefaultTimingFunction: 'linear',\n\t\t//* Default value used if the animation has no `direction` specified.\n\t\tdefaultDirection: 'forward'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttransitionProperty: dom.transition,\n\n\t/**\n\t* @private\n\t*/\n\tinstructions: null,\n\n\t/**\n\t* @private\n\t*/\n\tstepInterval: null,\n\n\t/**\n\t* @private\n\t*/\n\tstepIntervalMS: 50,\n\n\t/**\n\t* @private\n\t*/\n\tstartTime: null,\n\n\t/**\n\t* @private\n\t*/\n\tanimations: null,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tComponent.prototype.create.apply(this, arguments);\n\t\tthis.animations = [];\n\t},\n\n\t/**\n\t* Returns animation object reflecting the passed-in properties, while also adding it to the\n\t* `animations` array.\n\t*\n\t* @param {enyo.StyleAnimator~AnimationDefinitionObject} props - An animation definition hash.\n\t* @public\n\t*/\n\tnewAnimation: function (props) {\n\t\t// TODO: Add documentation for the generated animation object\n\t\tif (this.animations && props.name && this.getAnimation(props.name)) {\n\t\t\tthis.deleteAnimation(props.name);\n\t\t}\n\n\t\tprops.keyframes = this.formatKeyframes(props.keyframes);\n\t\tprops.instructions = this.generateInstructions(props.keyframes);\n\n\t\tvar animation = {\n\t\t\tname:           props.name || this.generateAnimationName(),\n\t\t\tduration:       props.duration || this.defaultDuration,\n\t\t\ttimingFunction: props.timingFunction ? this.updateTimingFunction (props.timingFunction) : this.updateTimingFunction (this.defaultTimingFunction),\n\t\t\tdirection:      props.direction || this.defaultDirection,\n\t\t\ttimeElapsed:    0,\n\t\t\tkeyframes:      props.keyframes,\n\t\t\tinstructions:   props.instructions,\n\t\t\tstate:          'paused'\n\t\t};\n\n\t\tthis.animations.push(animation);\n\n\t\treturn animation;\n\t},\n\n\t/**\n\t* Resets transition properties to their pre-transition state for the specified animation.\n\t*\n\t* @param {String} name - Name of the animation.\n\t* @public\n\t*/\n\treset: function (name) {\n\t\tthis.getAnimation(name);\n\t\tthis._reset(name);\n\t},\n\n\t/**\n\t* Plays the animation according to its properties.\n\t*\n\t* @param {String} name - Name of the animation.\n\t* @public\n\t*/\n\tplay: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\n\t\tif (!animation) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.findStartAndEndValues(animation);\n\t\tthis.applyValues(animation.startValues);\n\t\tthis.cacheStartValues(animation.startValues);\n\n\t\tutils.asyncMethod(this.bindSafely(function () { this._play(name); }));\n\t},\n\n\t/**\n\t* Jumps directly to the end state of a given animation (without animating).\n\t*\n\t* @param {String} name - Name of the animation.\n\t* @public\n\t*/\n\tjumpToEnd: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\n\t\tif (!animation) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.findStartAndEndValues(animation);\n\t\tthis.applyValues(animation.endValues);\n\t},\n\n\t/**\n\t* Pauses the animation, if it is currently playing.\n\t*\n\t* @param {String} name - Name of the animation.\n\t* @public\n\t*/\n\tpause: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\t\tif (animation.state === 'playing') {\n\t\t\tthis._pause(name);\n\t\t}\n\t},\n\n\t/**\n\t* Looks up an animation by name in the animation list.\n\t*\n\t* @param {String} name - Name of the animation.\n\t* @public\n\t*/\n\tgetAnimation: function (name) {\n\t\tvar animation = null;\n\t\tfor (var i = 0; i < this.animations.length; i++) {\n\t\t\tif (this.animations[i].name === name) {\n\t\t\t\tanimation = this.animations[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn animation;\n\t},\n\n\t/**\n\t* Removes an existing animation from `this.animations`, stopping it first, if necessary.\n\t*\n\t* @param {String} name - Name of the animation.\n\t* @public\n\t*/\n\tdeleteAnimation: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\n\t\tif (!animation) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Pause animation if necessary\n\t\tthis._pause(name);\n\n\t\t// Splice out this animation\n\t\tthis.animations.splice(this.animations.indexOf(animation), 1);\n\t},\n\n\t/**\n\t* Begins stepping through the animation.\n\t*\n\t* @public\n\t*/\n\tstart: function () {\n\t\tthis.beginStepping();\n\t},\n\n\t/**\n\t* Stops stepping through the animation.\n\t*\n\t* @public\n\t*/\n\tstop: function () {\n\t\tthis.stopStepping();\n\t},\n\n\t/**\n\t* Generates a unique name based on the length of `this.animations`.\n\t*\n\t* @private\n\t*/\n\tgenerateAnimationName: function () {\n\t\tvar count = this.animations.length,\n\t\t\tname = this.getName()+'_animation_'+count;\n\t\twhile (this.getAnimation(name)) {\n\t\t\tname = this.getName()+'_animation_'+count;\n\t\t}\n\t\treturn name;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tformatKeyframes: function (inKeyframes) {\n\t\tvar frames = [];\n\t\tfor (var index in inKeyframes) {\n\t\t\tframes.push({index: index, controls: inKeyframes[index]});\n\t\t}\n\t\treturn frames;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateTimingFunction: function (inTimingFunction) {\n\t\treturn inTimingFunction.match(/\\bcubic-bezier/i) ? inTimingFunction : this.convertTimingFunctionToBezier(inTimingFunction);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tconvertTimingFunctionToBezier: function (timing) {\n\t\tswitch (timing) {\n\t\tcase 'linear':\n\t\t\treturn 'cubic-bezier(0, 0, 1, 1)';\n\t\tcase 'ease':\n\t\t\treturn 'cubic-bezier(0.25, 0.1, 0.25, 1.0)';\n\t\tcase 'ease-in':\n\t\t\treturn 'cubic-bezier(.42, 0, 1, 1)';\n\t\tcase 'ease-out':\n\t\t\treturn 'cubic-bezier(0, 0, .58, 1)';\n\t\tcase 'ease-in-out':\n\t\t\treturn 'cubic-bezier(.42, 0, .58, 1)';\n\t\t}\n\t\tlog.warn('Unknown timing function: ', timing);\n\t\treturn timing;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgenerateInstructions: function (inKeyframes) {\n\t\tvar frames = inKeyframes,\n\t\t\tinstructions = [],\n\t\t\tinstruction,\n\t\t\tendValues;\n\n\t\tfor (var i = 0; i < frames.length-1; i++) {\n\t\t\tfor (var j = 0, control; (control = frames[i].controls[j]); j++) {\n\t\t\t\tfor (var prop in control.properties) {\n\n\t\t\t\t\tinstruction = {\n\t\t\t\t\t\tcontrol: control.control,\n\t\t\t\t\t\tproperty: prop,\n\t\t\t\t\t\tstartValue: control.properties[prop],\n\t\t\t\t\t\tstartTime: frames[i].index\n\t\t\t\t\t};\n\n\t\t\t\t\tendValues = this.findInstructionEndValues(instruction, i+1, frames);\n\n\t\t\t\t\t// If no end values, skip this rule   TODO - is this right?\n\t\t\t\t\tif (!endValues) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Mix in end values\n\t\t\t\t\tinstructions.push(utils.mixin(instruction, endValues));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn instructions;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfindStartAndEndValues: function (inAnimation) {\n\t\tvar frames = inAnimation.keyframes,\n\t\t\tstartValues = {},\n\t\t\tendValues = {},\n\t\t\tc,\n\t\t\tcID;\n\n\t\tfor (var i = 0; i < frames.length; i++) {\n\t\t\tfor (var j = 0, control; (control = frames[i].controls[j]); j++) {\n\t\t\t\tc = control.control;\n\t\t\t\tcID = c.id;\n\n\t\t\t\tif (!startValues[cID]) {\n\t\t\t\t\tstartValues[cID] = {\n\t\t\t\t\t\tcontrol: c,\n\t\t\t\t\t\tproperties: {}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (!endValues[cID]) {\n\t\t\t\t\tendValues[cID] = {\n\t\t\t\t\t\tcontrol: c,\n\t\t\t\t\t\tproperties: {}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tfor (var prop in control.properties) {\n\t\t\t\t\t// If value is set to _current_, grab the computed value\n\t\t\t\t\tif (control.properties[prop] === 'current') {\n\t\t\t\t\t\tcontrol.properties[prop] = dom.getComputedStyle(c.hasNode())[prop];\n\t\t\t\t\t}\n\t\t\t\t\t// at zero, every prop is a startvalue\n\t\t\t\t\tif (i === 0 || typeof startValues[cID]['properties'][prop] === 'undefined') {\n\t\t\t\t\t\tstartValues[cID]['properties'][prop] = control.properties[prop];\n\t\t\t\t\t}\n\n\t\t\t\t\tendValues[cID]['properties'][prop] = control.properties[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinAnimation.startValues = startValues;\n\t\tinAnimation.endValues = endValues;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfindInstructionEndValues: function (inInstruction, inFrameIndex, inFrames) {\n\t\tfor (var i = inFrameIndex; i < inFrames.length; i++) {\n\t\t\tfor (var j = 0, control; (control = inFrames[i].controls[j]); j++) {\n\t\t\t\tif (control.control !== inInstruction.control) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (var prop in control.properties) {\n\t\t\t\t\tif (prop === inInstruction.property) {\n\t\t\t\t\t\treturn {endValue: control.properties[prop], endTime: inFrames[i].index};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_play: function (name) {\n\t\tthis.startAnimation(name);\n\t\tthis.beginStepping();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstartAnimation: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\n\t\tthis.applyTransitions(name, 0);\n\t\tanimation.state = 'playing';\n\t\tanimation.timeElapsed = 0;\n\t\tanimation.startTime = utils.perfNow();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyValues: function (inValues) {\n\t\tvar item, prop, control;\n\n\t\tfor(item in inValues) {\n\t\t\tcontrol = inValues[item].control;\n\n\t\t\tfor (prop in inValues[item].properties) {\n\t\t\t\tcontrol.applyStyle(prop, inValues[item].properties[prop]);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcacheStartValues: function (inStartValues) {\n\t\tvar item, control;\n\t\tthis.startValues = inStartValues;\n\n\t\tfor(item in inStartValues) {\n\t\t\tcontrol = inStartValues[item].control;\n\t\t\tinStartValues[item].properties[this.transitionProperty] = control[this.transitionProperty];\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyTransitions: function (name, inStartTime) {\n\t\tvar animation = this.getAnimation(name),\n\t\t\tinstructions = animation.instructions;\n\t\tfor (var i = 0; i < instructions.length; i++) {\n\t\t\tif (instructions[i].startTime <= inStartTime && !instructions[i].started) {\n\t\t\t\tthis.applyTransition(name, instructions[i]);\n\t\t\t\tinstructions[i].started = true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyTransition: function (name, inInstruction) {\n\t\tvar animation = this.getAnimation(name),\n\t\t\tcurrentStyle = inInstruction.control[this.transitionProperty],\n\t\t\ttransitionTime = (inInstruction.endTime - inInstruction.startTime)*animation.duration/(100*1000),\n\t\t\tnewStyle = currentStyle ? currentStyle + ', ' : '',\n\t\t\ttransitionProperty = this.transitionProperty;\n\n\t\tnewStyle += inInstruction.property + ' ' + transitionTime + 's ' + animation.timingFunction + ' 0s';\n\n\t\tinInstruction.control.applyStyle(transitionProperty, newStyle);\n\n\t\t// we arbitrarily cache this value for cheaper lookup later\n\t\tinInstruction.control[transitionProperty] = newStyle;\n\n\t\tinInstruction.control.applyStyle(inInstruction.property, inInstruction.endValue);\n\n\t\t//  this.log(inInstruction.control.id+'.applyStyle('+transitionProperty+', '+newStyle+')');\n\t\t//  this.log(inInstruction.control.id+'.applyStyle('+inInstruction.property+', '+inInstruction.endValue+')');\n\t},\n\n\t/**\n\t* Begins stepping.\n\t*\n\t* @private\n\t*/\n\tbeginStepping: function () {\n\t\tif (!this.stepInterval) {\n\t\t\tthis.stepInterval = setInterval(this.bindSafely('_step'), this.stepIntervalMS);\n\t\t}\n\t},\n\n\t/**\n\t* Stops stepping.\n\t*\n\t* @private\n\t*/\n\tstopStepping: function () {\n\t\tif (this.stepInterval) {\n\t\t\tclearInterval(this.stepInterval);\n\t\t\tthis.stepInterval = null;\n\t\t}\n\t},\n\n\t/**\n\t* Steps through each playing animation.\n\t*\n\t* @private\n\t*/\n\t_step: function () {\n\t\tvar playingAnimations = false,\n\t\t\tnow = utils.perfNow(),\n\t\t\tanimation,\n\t\t\telapsed,\n\t\t\ti;\n\n\t\tfor (i = 0; (animation = this.animations[i]); i++) {\n\t\t\tif (animation.state === 'paused') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\telapsed = now - animation.startTime;\n\n\t\t\t// If complete, bail\n\t\t\tif (elapsed > animation.duration) {\n\t\t\t\tif (animation.percentElapsed != 100) {\n\t\t\t\t\tthis.applyTransitions(animation.name, 100);\n\t\t\t\t}\n\t\t\t\tanimation.percentElapsed = 100;\n\t\t\t\tthis.doStep({animation: animation});\n\t\t\t\tthis.completeAnimation(animation.name);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tanimation.timeElapsed = elapsed;\n\t\t\tanimation.percentElapsed = Math.round(elapsed*100/animation.duration);\n\t\t\tthis.applyTransitions(animation.name, animation.percentElapsed);\n\t\t\tplayingAnimations = true;\n\n\t\t\t// Bubble step event\n\t\t\tthis.doStep({animation: animation});\n\t\t}\n\n\t\tif (!playingAnimations) {\n\t\t\tthis.stop();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcompleteAnimation: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\n\t\tthis._pause(name);\n\t\tthis._reset(name);\n\t\tthis.doComplete({animation: animation});\n\t},\n\n\t/**\n\t* Resets transition properties to their pre-transition values.\n\t*\n\t* @private\n\t*/\n\t_reset: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\t\tfor(var item in animation.startValues) {\n\t\t\tanimation.startValues[item].control.applyStyle(this.transitionProperty, animation.startValues[item].properties[this.transitionProperty]);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_pause: function (name) {\n\t\tvar animation = this.getAnimation(name);\n\t\tanimation.state = 'paused';\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\n/**\n* {@link moon.VideoInfoBackground} is a [control]{@link enyo.Control} that provides a\n* stylized background for [components]{@link enyo.Component} placed in the\n* [infoComponents]{@link moon.VideoPlayer#infoComponents} block of a {@link moon.VideoPlayer}.\n* It is designed as a decorator, wrapping the components inside with the stylized background.\n* \n* Use the [orient]{@link moon.VideoInfoBackground#orient} property to set the orientation \n* (`'left'` or `'right'`).\n* \n* For more details, see {@link moon.VideoPlayer}.\n*\n* @class moon.VideoInfoBackground\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.VideoInfoBackground.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.VideoInfoBackground',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\t\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-background-wrapper',\n\t\n\t/**\n\t* @private\n\t* @lends moon.VideoInfoBackground.prototype\n\t*/\n\tpublished: {\n\t\t\n\t\t/** \n\t\t* Orientation of the control; valid values are `'left'` and `'right'`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'left'\n\t\t* @public\n\t\t*/\n\t\torient: 'left',\n\n\t\t/**\n\t\t* When `true`, background color is set to black; otherwise, background is transparent.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tbackground: true\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'client', kind: Control, classes: 'moon-background-wrapper-client-content'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function() {\n\t\tControl.prototype.initComponents.apply(this, arguments);\n\t\tthis.orientChanged();\n\t\tthis.backgroundChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\torientChanged: function() {\n\t\tthis.$.client.addRemoveClass('right', this.orient != 'left');\n\t\tthis.$.client.addRemoveClass('left', this.orient == 'left');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackgroundChanged: function() {\n\t\tthis.$.client.addRemoveClass('bg', this.background);\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind');\nvar\n\tDataList = require('../DataList'),\n\tVerticalGridDelegate = require('../VerticalGridDelegate');\n\n/**\n* {@link enyo.DataGridList} is a paginated {@link enyo.DataList} designed to lay out\n* its children in a grid. Like `enyo.DataList`, it links its children directly to the\n* underlying records in the collection specified as its collection.\n*\n* Because the layout is arbitrarily handled, spacing of children must be set using\n* the kind's available API (e.g., with the [spacing]{@link enyo.DataGridList#spacing},\n* [minWidth]{@link enyo.DataGridList#minWidth}, and\n* [minHeight]{@link enyo.DataGridList#minHeight} properties).\n* \n* Note that `enyo.DataGridList` will attempt to grow or shrink the size of its\n* children in order to keep them evenly spaced.\n*\n* @class enyo.DataGridList\n* @extends enyo.DataList\n* @ui\n* @public\n*/\nvar DataGridList = module.exports = kind(\n\t/** @lends enyo.DataGridList.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.DataGridList',\n\n\t/**\n\t* @private\n\t*/\n\tkind: DataList,\n\n\t/**\n\t* The spacing (in pixels) between elements in the [grid list]{@link enyo.DataGridList}. It \n\t* should be an even number, or else it will be coerced into one for consistency. This is the\n\t* exact spacing to be allocated on all sides of each item.\n\t*\n\t* @type {Number}\n\t* @default 10\n\t* @public\n\t*/\n\tspacing: 10,\n\n\t/**\n\t* The minimum width (in pixels) for each [grid]{@link enyo.DataGridList} item. \n\t* Grid items will not be collapsed beyond this size, but they may be proportionally\n\t* expanded.\n\t*\n\t* @type {Number}\n\t* @default 100\n\t* @public\n\t*/\n\tminWidth: 100,\n\n\t/**\n\t* The minimum height (in pixels) for each [grid]{@link enyo.DataGridList} item. \n\t* Grid items will not be collapsed beyond this size, but they may be proportionally\n\t* expanded.\n\t*/\n\tminHeight: 100,\n\n\t/**\n\t* While {@link enyo.DataList} provides some generic [delegates]{@glossary delegate} for\n\t* handling [objects]{@glossary Object}, we have to arbitrarily lay out our children, so\n\t* we have our own. We add these and ensure that the appropriate delegate is selected\n\t* depending on the request.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar o = this.orientation;\n\t\t\t// this will only remap _vertical_ and _horizontal_ meaning it is still possible to\n\t\t\t// add others easily\n\t\t\tthis.orientation = (o == 'vertical'? 'verticalGrid': (o == 'horizontal'? 'horizontalGrid': o));\n\t\t\tvar s = this.spacing;\n\t\t\t// ensure that spacing is set to an even number or zero\n\t\t\tthis.spacing = (s % 2 === 0? s: Math.max(s-1, 0));\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\t/**\n\t* Ensures that each item being created for the [DataGridList]{@link enyo.DataGridList}\n\t* has the correct CSS classes so it will display properly (and be movable, since the items\n\t* must be absolutely positioned).\n\t*\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// note we wait until after the container and its children have been created\n\t\t\t// so these default properties will only apply to the real children of the grid\n\t\t\tvar d = this.defaultProps,\n\t\t\t\tc = ' item';\n\t\t\td.classes = (d.classes || '') + c;\n\t\t};\n\t}),\n\t/**\n\t* We don't want to worry about the normal required handling when `showing` changes\n\t* unless we're actually visible and the list has been fully rendered and we actually\n\t* have some data.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tshowingChanged: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar len = this.collection? this.collection.length: 0;\n\t\t\tif (this.$.scroller.generated && len && this.showing) {\n\t\t\t\t// avoid the default handler and call the event handler method\n\t\t\t\t// designated by `enyo.DataList`\n\t\t\t\tthis.didResize();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/** \n\t* We access this [kind's]{@glossary kind} [constructor]{@glossary constructor}\n\t* and need it to be undeferred at that time.\n\t*\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* All of the CSS is relative to this class.\n\t*\n\t* @private\n\t*/\n\tclasses: 'enyo-data-grid-list'\n});\n\nDataGridList.delegates.vertical = VerticalGridDelegate;","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind');\nvar\n\tToolDecorator = require('../ToolDecorator');\n\n/**\n* {@link enyo.Button} implements an HTML [button]{@glossary button}, with support\n* for grouping using {@link enyo.Group}.\n*\n* For more information, see the documentation on\n* [Buttons]{@linkplain $dev-guide/building-apps/controls/buttons.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Button\n* @extends enyo.ToolDecorator\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Button.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Button',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: ToolDecorator,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'button',\n\n\t/**\n\t* @private\n\t*/\n\tattributes: {\n\t\t/**\n\t\t * Set to `'button'`; otherwise, the default value would be `'submit'`, which\n\t\t * can cause unexpected problems when [controls]{@link enyo.Control} are used\n\t\t * inside of a [form]{@glossary form}.\n\t\t * \n\t\t * @type {String}\n\t\t * @private\n\t\t */\n\t\ttype: 'button'\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Button.prototype */ {\n\t\t\n\t\t/**\n\t\t * When `true`, the [button]{@glossary button} is shown as disabled and does not \n\t\t * generate tap [events]{@glossary event}.\n\t\t * \n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @public\n\t\t */\n\t\tdisabled: false\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.disabledChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.setAttribute('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function () {\n\t\tif (this.disabled) {\n\t\t\t// work around for platforms like Chrome on Android or Opera that send\n\t\t\t// mouseup to disabled form controls\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.setActive(true);\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tRichText = require('../../../enyo/lib/RichText');\n\n/**\n* {@link moon.RichText} is a Moonstone-styled text input field with support for\n* rich text formatting such as bold, italics, and underlining, derived from\n* {@link enyo.RichText}. Typically, a `moon.RichText` is placed inside a\n* {@link moon.InputDecorator}, which provides styling, e.g.:\n*\n* ```\n* {kind: 'moon.InputDecorator', components: [\n*\t{kind: 'moon.RichText', style: 'width: 240px;', onchange: 'inputChange'}\n* ]}\n* ```\n*\n* For more information, see the documentation on\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\n* in the Enyo Developer Guide.\n*\n* @class moon.RichText\n* @extends enyo.RichText\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.RichText.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.RichText',\n\n\t/**\n\t* @private\n\t*/\n\tkind: RichText,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-body-text moon-richtext',\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tRichText.prototype.create.apply(this, arguments);\n\t\tthis.disabledChanged();\n\t},\n\n\t/**\n\t* Sets the focus on the RichText.\n\t*\n\t* @public\n\t*/\n\tfocus: function () {\n\t\tRichText.prototype.focus.apply(this, arguments);\n\t\tvar node = this.hasNode();\n\t\t// We move the cursor to the end, because in 5-way\n\t\t// mode there is no way (other than backspacing) for\n\t\t// the user to move the caret within the text field\n\t\tthis.moveCursorToEnd();\n\t\tnode.scrollTop = node.scrollHeight;\n\t},\n\n\t/**\n\t* Removes focus from the RichText.\n\t*\n\t* @public\n\t*/\n\tblur: function () {\n\t\tif (this.hasNode()) {\n\t\t\tthis.node.blur();\n\t\t}\n\t},\n\n\t/**\n\t* Piggyback onto enyo.RichText blurHandler.\n\t*\n\t* @private\n\t* @method\n\t*/\n\tblurHandler: function () {\n\t\tRichText.prototype.blurHandler.apply(this, arguments);\n\t\tthis.hasNode().scrollTop = 0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tRichText.prototype.disabledChanged.apply(this, arguments);\n\t\tif (this.disabled) {\n\t\t\tthis.attributes.contenteditable = false;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tleft: function () {\n\t\tvar sel = this.getSelection();\n\t\tif (sel.rangeCount) {\n\t\t\tvar selRange = sel.getRangeAt(0);\n\t\t\tvar testRange = selRange.cloneRange();\n\n\t\t\ttestRange.selectNodeContents(this.node);\n\t\t\ttestRange.setEnd(selRange.startContainer, selRange.startOffset);\n\n\t\t\tif (testRange.toString() === '') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tright: function () {\n\t\tvar sel = this.getSelection();\n\t\tif (sel.rangeCount) {\n\t\t\tvar selRange = sel.getRangeAt(0);\n\t\t\tvar testRange = selRange.cloneRange();\n\n\t\t\ttestRange.selectNodeContents(this.node);\n\t\t\ttestRange.setStart(selRange.endContainer, selRange.endOffset);\n\n\t\t\tif (testRange.toString() === '') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tup: function (inEvent) {\n\t\treturn this.left();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdown: function (inEvent) {\n\t\treturn this.right();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tTextArea = require('../../../enyo/lib/TextArea');\n\n/**\n* {@link moon.TextArea} is a Moonstone-styled text input field, derived from\n* {@link enyo.TextArea}. Typically, a `moon.TextArea` is placed inside\n* a {@link moon.InputDecorator}, which provides styling, e.g.:\n*\n* ```\n* {kind: 'moon.InputDecorator', components: [\n*\t{kind: 'moon.TextArea', onchange: 'inputChange'}\n* ]}\n* ```\n*\n* For more information, see the documentation on\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\n* in the Enyo Developer Guide.\n*\n* @class moon.TextArea\n* @extends enyo.TextArea\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends  moon.TextArea.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.TextArea',\n\n\t/**\n\t* @private\n\t*/\n\tkind: TextArea,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-body-text moon-textarea',\n\n\t/**\n\t* @private\n\t*/\n\tspotlightIgnoredKeys: [13, 16777221],\t// 13==Enter, 16777221==KeypadEnter\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonblur: 'blurred'\n\t},\n\n\t/**\n\t* Sets the focus on the TextArea.\n\t*\n\t* @public\n\t*/\n\tfocus: function () {\n\t\tTextArea.prototype.focus.apply(this, arguments);\n\t\tvar node = this.hasNode();\n\t\t// We move the cursor to the end, because in 5-way\n\t\t// mode there is no way (other than backspacing) for\n\t\t// the user to move the caret within the text field\n\t\tnode.selectionStart = this.value.length;\n\t\tnode.scrollTop = node.scrollHeight;\n\t},\n\n\t/**\n\t* Removes focus from the TextArea.\n\t*\n\t* @public\n\t*/\n\tblur: function () {\n\t\tif (this.hasNode()) {\n\t\t\tthis.node.blur();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tblurred: function () {\n\t\tthis.hasNode().scrollTop = 0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tleft: function (inEvent) {\n\t\tif (!this.hasNode() || this.node.selectionStart === 0) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tright: function (inEvent) {\n\t\tif (!this.hasNode() || this.node.selectionStart == this.node.value.length) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tup: function (inEvent) {\n\t\treturn this.left(inEvent);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdown: function (inEvent) {\n\t\treturn this.right(inEvent);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tPopup = require('../../../enyo/lib/Popup'),\n\tComponent = require('../../../enyo/lib/Component'),\n\tSignals = require('../../../enyo/lib/Signals');\n\n// To prevent lingering tooltips, we're monitoring spotlight changes and tooltip display\n// to ensure that only 1 tooltip is active.\n// see BHV-14524, ENYO-247\nvar observer = new Component({\n\n\t/**\n\t* Last active tooltip\n\t* @private\n\t*/\n\tactive: null,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{kind: Signals, onSpotlightCurrentChanged: 'spotChanged'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tactiveChanged: function (was) {\n\t\tif(was) {\n\t\t\twas.waterfall('onRequestHideTooltip');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotChanged: function (sender, event) {\n\t\tthis.set('active', null);\n\t}\n});\n\n/**\n* {@link moon.Tooltip} is a popup that works in conjunction with\n* {@link moon.TooltipDecorator}. The tooltip is automatically displayed when the\n* user hovers over the decorator for a given period of time. The tooltip is\n* positioned around the decorator where there is available window space.\n*\n* ```\n* {kind: 'moon.TooltipDecorator', components: [\n*\t{kind: 'moon.Button', content: 'Tooltip'},\n*\t{kind: 'moon.Tooltip', content: 'I am a tooltip for a button.'}\n* ]}\n* ```\n*\n* You may force the tooltip to appear by calling its [show()]{@link enyo.Control#show} method.\n*\n* @class moon.Tooltip\n* @extends enyo.Popup\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Tooltip.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Tooltip',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Popup,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-tooltip below left-arrow',\n\n\t/**\n\t* @private\n\t* @lends moon.Tooltip.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* This value overrides the default value of\n\t\t* [autoDismiss]{@link enyo.Popup#autoDismiss} inherited from {@link enyo.Popup}.\n\t\t* If `true`, the tooltip will hide when the user taps outside of it or presses\n\t\t* ESC. Note that this property only affects behavior when the tooltip is used\n\t\t* independently, not when it is used with\n\t\t* [TooltipDecorator]{@link moon.TooltipDecorator}.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tautoDismiss: false,\n\n\t\t/**\n\t\t* Hovering over the decorator for this length of time (in milliseconds) causes the\n\t\t* tooltip to appear.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 500\n\t\t* @public\n\t\t*/\n\t\tshowDelay: 500,\n\n\t\t/**\n\t\t* Position of the tooltip with respect to the activating control. Valid values are\n\t\t* `'above'`, `'below'`, and `'auto'`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'auto'\n\t\t* @public\n\t\t*/\n\t\tposition: 'auto',\n\n\t\t/**\n\t\t* Default `margin-left` value.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tdefaultLeft: 0,\n\n\t\t/**\n\t\t* When `true`, the content will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercase: true,\n\n\t\t/**\n\t\t* @deprecated Replaced by [uppercase]{@link moon.Tooltip#uppercase}.\n\t\t*\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\n\t\t* an effect when explicitly set (for complete backward compatibility).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcontentUpperCase: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcaptureEvents: false,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonRequestShowTooltip: 'requestShow',\n\t\tonRequestHideTooltip: 'requestHide'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{name: 'client', kind: Control, classes: 'moon-tooltip-label moon-header-font'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tthis.createChrome(this.tools);\n\t\tPopup.prototype.initComponents.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tPopup.prototype.create.apply(this, arguments);\n\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// the contentUpperCase property is fully deprecated and removed. The legacy\n\t\t// property takes precedence if it exists.\n\t\tif (this.contentUpperCase !== null) this.uppercase = this.contentUpperCase;\n\n\t\tthis.contentChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tthis.detectTextDirectionality();\n\t\tvar content = this.getContent();\n\t\tthis.$.client.setContent( this.get('uppercase') ? util.toUpperCase(content) : content);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuppercaseChanged: function () {\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// contentUpperCase is fully deprecated and removed.\n\t\tif (this.contentUpperCase != this.uppercase) this.contentUpperCase = this.uppercase;\n\t\tthis.contentChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentUpperCaseChanged: function () {\n\t\tif (this.uppercase != this.contentUpperCase) this.uppercase = this.contentUpperCase;\n\t\tthis.uppercaseChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpositionChanged:function () {\n\t\tPopup.prototype.positionChanged.apply(this, arguments);\n\t\tthis.adjustPosition(true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestShow: function (inSender, inEvent) {\n\t\tobserver.set('active', this);\n\t\tthis.activator = inEvent.originator;\n\t\tthis.startJob('showJob', 'show', this.showDelay);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcancelShow: function () {\n\t\tthis.stopJob('showJob');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestHide: function () {\n\t\tthis.cancelShow();\n\t\treturn Popup.prototype.requestHide.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function () {\n\t\tthis.cancelShow();\n\t\tPopup.prototype.showingChanged.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyPosition: function (inRect) {\n\t\tvar s = '';\n\t\tfor (var n in inRect) {\n\t\t\ts += (n + ':' + inRect[n] + (isNaN(inRect[n]) ? '; ' : 'px; '));\n\t\t}\n\t\tthis.addStyles(s);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tadjustPosition: function (belowActivator) {\n\t\tif (this.showing && this.hasNode()) {\n\t\t\tvar b = this.node.getBoundingClientRect(),\n\t\t\t\tmoonDefaultPadding = 20,\n\t\t\t\tpBounds = this.parent.getAbsoluteBounds(),\n\t\t\t\tacBounds =null;\n\n\t\t\tacBounds = this.activator.getAbsoluteBounds();\n\n\t\t\t//* Calculate the difference between decorator and activating\n\t\t\t//* control's top, left, right differences, position tooltip against\n\t\t\t//* the activating control instead of the decorator accordingly.\n\t\t\tvar paTopDiff = pBounds.top - acBounds.top,\n\t\t\t\tpaLeftDiff =  acBounds.left - pBounds.left,\n\t\t\t\tpaRightDiff = pBounds.left + pBounds.width - acBounds.left - acBounds.width,\n\t\t\t\tacRight = window.innerWidth - moonDefaultPadding - acBounds.left - acBounds.width;\n\n\t\t\t//* When there is not enough room in the bottom, move it above the\n\t\t\t//* decorator; when the tooltip bottom is within window height but\n\t\t\t//* set programmatically above, move it above\n\t\t\tif ((window.innerHeight - moonDefaultPadding) - (pBounds.top + pBounds.height) < b.height + 5 || (this.position == 'above')) {\n\t\t\t\tthis.removeClass('below');\n\t\t\t\tthis.addClass('above');\n\t\t\t\tif (this.get('floating')) {\n\t\t\t\t\tthis.applyPosition({'top': dom.unit((acBounds.top - b.height - 5),'rem'), 'left': dom.unit(acBounds.left + acBounds.width / 2, 'rem'), 'right': 'auto'});\n\t\t\t\t} else {\n\t\t\t\t\tthis.applyPosition({'top': dom.unit(-(b.height + 5 + paTopDiff), 'rem'), 'left': dom.unit(acBounds.width / 2 + paLeftDiff, 'rem'), 'right': 'auto'});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//* When there is not enough space above the parent container, move\n\t\t\t//* it below the decorator; when there is enough space above the\n\t\t\t//* parent container but is set programmatically, leave it below\n\t\t\tif (pBounds.top < (b.height + 5) || (this.position == 'below') || this.hasClass('below')) {\n\t\t\t\tthis.removeClass('above');\n\t\t\t\tthis.addClass('below');\n\t\t\t\tif (this.get('floating')) {\n\t\t\t\t\tthis.applyPosition({'top': acBounds.top + acBounds.height + 5 + 'px', 'left': acBounds.left + acBounds.width / 2 + 'px', 'right': 'auto'});\n\t\t\t\t} else {\n\t\t\t\t\tthis.applyPosition({'top': pBounds.height + 5 + paTopDiff + 'px', 'left': acBounds.width / 2 + paLeftDiff + 'px', 'right': 'auto'});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//* When there is not enough room on the left, using right-arrow for the tooltip\n\t\t\tif (window.innerWidth - moonDefaultPadding - pBounds.left - pBounds.width / 2 < b.width){\n\t\t\t\t//* use the right-arrow\n\t\t\t\tthis.removeClass('left-arrow');\n\t\t\t\tthis.addClass('right-arrow');\n\t\t\t\tthis.applyPosition({'margin-left': dom.unit(- b.width, 'rem'), 'left': 'auto'});\n\t\t\t\tif (this.floating) {\n\t\t\t\t\tthis.applyStyle('right', dom.unit(acBounds.width / 2 + acRight + moonDefaultPadding, 'rem'));\n\t\t\t\t} else {\n\t\t\t\t\tthis.applyStyle('right', dom.unit(acBounds.width / 2 + paRightDiff, 'rem'));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.removeClass('right-arrow');\n\t\t\t\tthis.addClass('left-arrow');\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleResize: function () {\n\t\tthis.applyPosition({'margin-left': this.defaultLeft, 'bottom': 'auto'});\n\t\tthis.adjustPosition(true);\n\t\tPopup.prototype.handleResize.apply(this, arguments);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tdispatcher = require('./dispatcher');\n\nvar\n\tTouchScrollStrategy = require('./TouchScrollStrategy'),\n\tDom = require('./dom');\n\n/**\n* {@link enyo.TranslateScrollStrategy} is a helper [kind]{@glossary kind} that extends\n* {@link enyo.TouchScrollStrategy}, optimizing it for scrolling environments in which effecting \n* scroll changes with transforms using CSS translations is fastest.\n* \n* `enyo.TranslateScrollStrategy` is not typically created in application code. Instead, it is \n* specified as the value of the [strategyKind]{@link enyo.Scroller#strategyKind} property of \n* an {@link enyo.Scroller} or {@link enyo.List}, or is used by the framework implicitly.\n*\n* @class enyo.TranslateScrollStrategy\n* @extends enyo.TouchScrollStrategy\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.TranslateScrollStrategy.prototype */ {\n\n\tname: 'enyo.TranslateScrollStrategy',\n\n\t/**\n\t* @private\n\t*/\n\tkind: TouchScrollStrategy,\n\n\t/** \n\t* Set to `true` to optimize the strategy to only use translation to scroll; this increases \n\t* fluidity of scrolling animation. It should not be used when the \n\t* [scroller]{@link enyo.Scroller} contains [controls]{@link enyo.Control} that require \n\t* keyboard input. This is because when `translateOptimized` is `true`, it is possible to \n\t* position inputs such that they will not become visible when focused.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\ttranslateOptimized: false,\n\t\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'clientContainer', classes: 'enyo-touch-scroller', components: [\n\t\t\t{name: 'client'}\n\t\t]}\n\t],\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this.$.clientContainer, 'scroll');\n\t\t\tif (this.translateOptimized) {\n\t\t\t\tthis.setStartPosition();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tsetStartPosition: function() {\n\t\tthis.startX = this.getScrollLeft();\n\t\tthis.startY = this.getScrollTop();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrollSize: function () {\n\t\tvar n = this.$.client.hasNode();\n\t\treturn {width: n ? n.scrollWidth : 0, height: n ? n.scrollHeight : 0};\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// apply initial transform so we're always composited\n\t\t\tDom.transformValue(this.$.client, this.translation, '0,0,0');\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tcalcScrollNode: function () {\n\t\treturn this.$.clientContainer.hasNode();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\t// content should cover scroller at a minimum if there's no max-height.\n\t\tthis.$.client.applyStyle('min-height', this.maxHeight ? null : '100%');\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\n\t\tthis.$.clientContainer.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tshouldDrag: kind.inherit(function (sup) {\n\t\treturn function(inEvent) {\n\t\t\t// stop and update drag info before checking drag status\n\t\t\tthis.stop();\n\t\t\tthis.calcStartInfo();\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tsyncScrollMath: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tif (!this._translated) {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function(inLeft) {\n\t\t\tvar m, p;\n\t\t\tif (this.translateOptimized) {\n\t\t\t\tp = this.scrollLeft;\n\t\t\t\tm = this.$.scrollMath;\n\t\t\t\tthis.stop(true);\n\t\t\t\tm.setScrollX(-inLeft);\n\t\t\t\tm.stabilize();\n\t\t\t\tif (p != -m.x) {\n\t\t\t\t\t// We won't get a native scroll event,\n\t\t\t\t\t// so need to make one ourselves\n\t\t\t\t\tm.doScroll();\n\t\t\t\t\tthis.delayHideThumbs(100);\n\t\t\t\t} \n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollTop: kind.inherit(function (sup) {\n\t\treturn function(inTop) {\n\t\t\tvar m, p;\n\t\t\tif (this.translateOptimized) {\n\t\t\t\tp = this.scrollTop;\n\t\t\t\tm = this.$.scrollMath;\n\t\t\t\tthis.stop(true);\n\t\t\t\tm.setScrollY(-inTop);\n\t\t\t\tm.stabilize();\n\t\t\t\tif (p != -m.y) {\n\t\t\t\t\t// We won't get a native scroll event,\n\t\t\t\t\t// so need to make one ourselves\n\t\t\t\t\tm.doScroll();\n\t\t\t\t\tthis.delayHideThumbs(100);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tgetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this._translated ? this.scrollLeft: sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tgetScrollTop: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this._translated ? this.scrollTop : sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcalcBoundaries: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.translateOptimized && !this.isScrolling()) this.stabilize();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\thandleResize: function() {\n\t\tif (this.translateOptimized) {\n\t\t\tthis.stabilize();\n\t\t}\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tscrollMathStart: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (!this._translated) {\n\t\t\t\tthis.setStartPosition();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathScroll: function (sender) {\n\t\tif(!this.overscroll) { //don't overscroll past edges\n\t\t\tthis.scrollLeft = -Math.min(sender.leftBoundary, Math.max(sender.rightBoundary, sender.x));\n\t\t\tthis.scrollTop = -Math.min(sender.topBoundary, Math.max(sender.bottomBoundary, sender.y));\n\t\t} else {\n\t\t\tthis.scrollLeft = -sender.x;\n\t\t\tthis.scrollTop = -sender.y;\n\t\t}\n\t\tthis.effectScroll(this.scrollLeft, this.scrollTop);\n\t\tif (this.thumb) {\n\t\t\tthis.showThumbs();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStabilize: kind.inherit(function (sup) {\n\t\treturn function (sender) {\n\t\t\tif (this._translated) {\n\t\t\t\tthis.scrollLeft = -sender.x;\n\t\t\t\tthis.scrollTop = -sender.y;\n\t\t\t\tthis.effectScroll(-sender.x, -sender.y);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn sup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* While moving, scroller uses translate.\n\t* \n\t* @private\n\t*/\n\teffectScroll: kind.inherit(function (sup) {\n\t\treturn function (x, y) {\n\t\t\tvar o;\n\t\t\tif (this.translateOptimized || this.isScrolling()) {\n\t\t\t\tx = this.startX - x;\n\t\t\t\ty = this.startY - y;\n\t\t\t\to = x + 'px, ' + y + 'px' + (this.accel ? ',0' : '');\n\t\t\t\tDom.transformValue(this.$.client, this.translation, o);\n\t\t\t\tthis._translated = true;\n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* When stopped, we use `scrollLeft/scrollTop` (makes cursor positioning automagic).\n\t* \n\t* @private\n\t*/\n\teffectScrollStop: function () {\n\t\tif (!this.translateOptimized) {\n\t\t\tvar t = '0,0' + (this.accel ? ',0' : '');\n\t\t\t// FIXME: normally translate3d changes not effect scrollHeight; however\n\t\t\t// there appear to be some dom changes (e.g. showing a node inside the scroller,\n\t\t\t// which do cause the scrollHeight to be changed from the translate3d.\n\t\t\t// In this case setting the translate3d back to 0 does not restore scrollHeight.\n\t\t\t// This causes a problem because setting scrollTop can produced an unexpected result if\n\t\t\t// scrollHeight is less than expected.\n\t\t\t// We detect this fault by validating scroll bounds and (1) un-apply the translate3d,\n\t\t\t// (2) update scrollTop/Left, and (3) re-apply a 0,0,0 translate3d to ensure compositing.\n\t\t\t// Luckily this corrects the problem (which appears to be a webkit bug). Note that\n\t\t\t// it's important to maintain a composited state (translate3d 0,0,0) or Android 4 is\n\t\t\t// slow to start scrolling.\n\t\t\tvar m = this.$.scrollMath, sb = this._getScrollBounds();\n\t\t\tvar needsBoundsFix = Boolean((sb.maxTop + m.bottomBoundary) || (sb.maxLeft + m.rightBoundary));\n\t\t\tDom.transformValue(this.$.client, this.translation, needsBoundsFix ? null : t);\n\t\t\t// note: this asynchronously triggers dom scroll event\n\t\t\tthis.setScrollLeft(this.scrollLeft);\n\t\t\tthis.setScrollTop(this.scrollTop);\n\t\t\tif (needsBoundsFix) {\n\t\t\t\tDom.transformValue(this.$.client, this.translation, t);\n\t\t\t}\n\t\t\tthis._translated = false;\n\t\t}\n\t},\n\n\t/**\n\t* FIXME: we can fix scrolling artifacts BUGS on Android 4.04 with this heinous incantation.\n\t* \n\t* @private\n\t*/\n\ttwiddle: function () {\n\t\tif (this.translateOptimized && this.scrollNode) { // this.scrollNode is not always defined and makes Motorola XOOM crash\n\t\t\tthis.scrollNode.scrollTop = 1;\n\t\t\tthis.scrollNode.scrollTop = 0;\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control'),\n\tTableRow = require('./TableRow');\n\n/*\n* TODO: Won't work in IE8 because we can't set innerHTML on table elements. We'll need to fall \n* back to divs with table display styles applied.\n* \n* Should also facade certain useful table functionality (specific set TBD).\n*/\n\n/**\n* {@link enyo.Table} implements an HTML [&lt;table&gt;]{@glossary table} element.\n* This is a work in progress.\n*\n* @class enyo.Table\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Table.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Table',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'table',\n\n\t/**\n\t* @private\n\t*/\n\tattributes: {\n\t\tcellpadding: '0',\n\t\tcellspacing: '0'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: TableRow\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tInput = require('../../../enyo/lib/Input');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\n/**\n* {@link moon.Input} is a Moonstone-styled input control, derived from\n* {@link enyo.Input}. Typically, a `moon.Input` is placed inside a\n* {@link moon.InputDecorator}, which provides styling, e.g.:\n*\n* ```\n* {kind: 'moon.InputDecorator', components: [\n*\t{kind: 'moon.Input', placeholder: 'Enter some text...', onchange: 'inputChange'}\n* ]}\n* ```\n*\n* For more information, see the documentation on\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\n* in the Enyo Developer Guide.\n*\n* @class moon.Input\n* @extends enyo.Input\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Input.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Input',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Input,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-body-text moon-input',\n\n\t/**\n\t* 13==Enter, 16777221==KeypadEnter\n\t*\n\t* @private\n\t*/\n\tspotlightIgnoredKeys: [13, 16777221],\n\n\t/**\n\t* @private\n\t* @lends moon.Input.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* When `true`, input blurs on Enter keypress (if focused).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdismissOnEnter: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonkeyup : 'onKeyUp',\n\t\tonblur     : 'onBlur',\n\t\tonfocus    : 'onFocus'\n\t},\n\n\t/**\n\t* Used only for [dismissOnEnter]{@link moon.Input#dismissOnEnter} feature;\n\t* we cannot rely on `hasFocus()` in this case due to race condition.\n\t*\n\t* @private\n\t*/\n\t_bFocused: false,\n\n\t/**\n\t* @private\n\t*/\n\tonFocus: function () {\n\t\tif (this.dismissOnEnter) {\n\t\t\tvar oThis = this;\n\t\t\tutil.asyncMethod(this, function () {oThis._bFocused = true;});\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonBlur: function () {\n\t\tif (this.dismissOnEnter) {\n\t\t\tthis._bFocused = false;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonKeyUp: function (oSender, oEvent) {\n\t\tif (this.dismissOnEnter) {\n\t\t\tif (oEvent.keyCode == 13 && this._bFocused) {\n\t\t\t\tthis.blur();\n\t\t\t\tif (Spotlight.getPointerMode()) {\n\t\t\t\t\tSpotlight.unspot();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tblur: function () {\n\t\tif (this.hasNode()) {\n\t\t\tthis.node.blur();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tleft: function () {\n\t\tif (!this.hasNode() || this.node.selectionStart === 0) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tright: function () {\n\t\tif (!this.hasNode() || this.node.selectionStart == this.node.value.length) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tup: function () {\n\t\treturn false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdown: function () {\n\t\treturn false;\n\t}\n});","require('../../../moonstone');\n\nvar kind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tplatform = require('../../../enyo/lib/platform'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tComponent = require('../../../enyo/lib/Component'),\n\tSignals = require('../../../enyo/lib/Signals');\n\nvar\n\toptions = require('../options'),\n\tHighlightText = require('../HighlightText');\n\nvar exports = module.exports = {};\n\n/**\n* There are a couple scenarios (window blurs and changing from pointer mode to 5-way) in which\n* we'd like to stop an actively on-hover marqueeing control. This private instance manages\n* those events centrally to minimize unnecessary Signal's subscribers.\n*\n* @private\n*/\nvar observer = new Component({\n\n\t/**\n\t* @private\n\t*/\n\thoverControl: null,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{kind: Signals, onSpotlightModeChanged: 'handleModeChanged', onblur: 'handleBlur'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\t_setMarqueeOnHoverControl: function(oControl) {\n\t\tthis.hoverControl = oControl;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_getMarqueeOnHoverControl: function() {\n\t\treturn this.hoverControl;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleModeChanged: function (sender, event) {\n\t\tif (!event.pointerMode && this.hoverControl) {\n\t\t\tthis.hoverControl._marquee_leave();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleBlur: function (sender, event) {\n\t\tif (this.hoverControl) {\n\t\t\tthis.hoverControl._marquee_leave();\n\t\t}\n\t}\n});\n\n/**\n* Fires to queue up a list of child animations.\n*\n* @event moon.MarqueeSupport#onRequestMarquee\n* @type {Object}\n* @property {Object} originator - A reference to the originator of this event.\n* @property {Boolean} marqueePause - The desired duration in milliseconds that the\n* marquee will pause at the end of the animation, before resetting to the beginning.\n* @property {Number} marqueeSpeed - The desired speed for the marquee animation,\n* in pixels per second.\n* @private\n*/\n\n/**\n* Fires to start marquee animation in a child marquee.\n*\n* @event moon.MarqueeSupport#onRequestMarqueeStart\n* @type {Object}\n* @property {Object} originator - A reference to the originator of this event.\n* @private\n*/\n\n/**\n* Fires to halt marquee animation in a child marquee.\n*\n* @event moon.MarqueeSupport#onRequestMarqueeStop\n* @type {Object}\n* @property {Object} originator - A reference to the originator of this event.\n* @private\n*/\n\n/**\n* Fires to enable animation in a child marquee. No additional data is sent with this event.\n*\n* @event moon.MarqueeSupport#onRequestMarqueeEnable\n* @type {Object}\n* @private\n*/\n\n/**\n* Fires to disable animation in a child marquee. No additional data is sent with this event.\n*\n* @event moon.MarqueeSupport#onRequestMarqueeDisable\n* @type {Object}\n* @private\n*/\n\n/**\n* Fires when marquee ends. No additional data is sent with this event.\n*\n* @event moon.MarqueeItem#onMarqueeEnded\n* @type {Object}\n* @private\n*/\n\n/**\n* The {@link moon.MarqueeSupport} [mixin]{@glossary mixin} should be used with controls\n* that contain multiple marquees whose animation behavior should be synchronized. Calling\n* [this.startMarquee()]{@link moon.MarqueeSupport#startMarquee} or\n* [this.stopMarquee()]{@link moon.MarqueeSupport#stopMarquee} will start or stop all\n* contained marquees.\n*\n* The following properties, defined on the base kind to which the mixin is applied,\n* control the marquee behavior:\n*\n* [marqueeOnSpotlight]{@link moon.MarqueeSupport#marqueeOnSpotlight}: When `true`, marquee\n* starts when control is spotlight focused and ends when it is spotlight blurred.\n*\n* [marqueeOnHover]{@link moon.MarqueeSupport#marqueeOnHover}: When `true`, marquee runs\n* while control is hovered over with the mouse. This property is ignored if\n* `marqueeOnSpotlight` is `true`.\n*\n* [marqueeOnRender]{@link moon.MarqueeSupport#marqueeOnRender}: When `true`, marquee starts\n* running as soon as control is rendered, and runs continuously.\n*\n* [marqueeSpeed]{@link moon.MarqueeSupport#marqueeSpeed}: The speed of the marquee animation,\n* in pixels per second.\n*\n* [marqueeDelay]{@link moon.MarqueeSupport#marqueeDelay}: The delay between spotlight\n* focus/hover and the start of the animation. (This is only used when either\n* `marqueeOnSpotlight` or `marqueeOnHover` is `true`).\n*\n* [marqueeOnRenderDelay]{@link moon.MarqueeSupport#marqueeOnRenderDelay}: Used when you want\n* the marquee to run on render, after a specified delay.\n*\n* [marqueePause]{@link moon.MarqueeSupport#marqueePause}: The duration in milliseconds that\n* the marquee will pause at the end of the animation, before resetting to the beginning.\n*\n* @mixin moon.MarqueeSupport\n* @public\n*/\n\n/** @lends moon.MarqueeSupport.prototype */\nvar MarqueeSupport = exports.Support = {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'MarqueeSupport',\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_Handlers: {\n\t\tonRequestStartMarquee: '_marquee_requestStartMarquee',\n\t\tonSpotlightFocused: '_marquee_spotlightFocused',\n\t\tonSpotlightBlur: '_marquee_spotlightBlur',\n\t\tonenter: '_marquee_enter',\n\t\tonleave: '_marquee_leave',\n\t\tonMarqueeEnded: '_marquee_marqueeEnded',\n\t\tonresize: '_marquee_resize',\n\n\t\t// Stop propagation of requests coming from parent MarqueeSupport's, since\n\t\t// only this MarqueeSupport should be controlling its subordinate children\n\t\tonRequestMarquee: '_marquee_stopPropagation',\n\t\tonRequestMarqueeStart: '_marquee_stopPropagation',\n\t\tonRequestMarqueeStop: '_marquee_stopPropagation'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_active: false,\n\n\t/**\n\t* When `true`, marquee starts when the control is {@link Spotlight} focused and ends\n\t* when it is spotlight blurred.\n\t*\n\t* @type {Boolean}\n\t* @default undefined\n\t* @public\n\t*/\n\tmarqueeOnSpotlight: undefined,\n\n\t/**\n\t* When `true`, marquee runs while the control is hovered over with the mouse. This\n\t* property is ignored if [marqueeOnSpotlight]{@link moon.MarqueeSupport#marqueeOnSpotlight}\n\t* is `true`.\n\t*\n\t* @type {Boolean}\n\t* @default undefined\n\t* @public\n\t*/\n\tmarqueeOnHover: undefined,\n\n\t/**\n\t* When `true`, marquee starts running as soon as the control is rendered, and runs\n\t* continuously.\n\t*\n\t* @type {Boolean}\n\t* @default undefined\n\t* @public\n\t*/\n\tmarqueeOnRender: undefined,\n\n\t/**\n\t* The speed of the marquee animation, in pixels per second.\n\t*\n\t* @type {Number}\n\t* @default undefined\n\t* @public\n\t*/\n\tmarqueeSpeed: undefined,\n\n\t/**\n\t* The delay between spotlight focus/hover and the start of the animation. (This is only\n\t* used when either [marqueeOnSpotlight]{@link moon.MarqueeSupport#marqueeOnSpotlight} or\n\t* [marqueeOnHover]{@link moon.MarqueeSupport#marqueeOnHover} is `true`.)\n\t*\n\t* @type {Number}\n\t* @default undefined\n\t* @public\n\t*/\n\tmarqueeDelay: undefined,\n\n\t/**\n\t* Used when you want the marquee to run on render, after a specified delay.\n\t*\n\t* @type {Number}\n\t* @default undefined\n\t* @public\n\t*/\n\tmarqueeOnRenderDelay: undefined,\n\n\t/**\n\t* The duration in milliseconds that the marquee will pause at the end of the\n\t* animation, before resetting to the beginning.\n\t*\n\t* @type {Number}\n\t* @default undefined\n\t* @public\n\t*/\n\tmarqueePause: undefined,\n\n\t/**\n\t* Initializes marquee timings.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.marqueeOnSpotlight = (this.marqueeOnSpotlight === undefined) ? true : this.marqueeOnSpotlight;\n\t\t\tthis.marqueeOnHover =  (this.marqueeOnHover ===   undefined) ? false :  this.marqueeOnHover;\n\t\t\tthis.marqueeSpeed =    (this.marqueeSpeed ===     undefined) ? 60 :    this.marqueeSpeed;\n\t\t\tthis.marqueeDelay =    (this.marqueeDelay ===     undefined) ? 1000 :  this.marqueeDelay;\n\t\t\tthis.marqueePause =    (this.marqueePause ===     undefined) ? 1000 :  this.marqueePause;\n\t\t\tthis.marqueeHold  =    (this.marqueeHold  ===     undefined) ? 2000 :  this.marqueeHold;\n\t\t\tthis.marqueeOnRender = (this.marqueeOnRender  === undefined) ? false : this.marqueeOnRender;\n\t\t\tthis.marqueeOnRenderDelay = (this.marqueeOnRenderDelay === undefined) ? this.marqueeDelay : this.marqueeOnRenderDelay;\n\t\t};\n\t}),\n\n\t/**\n\t* If {@link moon.MarqueeSupport#marqueeOnRender} is `true`, kicks off marquee animation.\n\t*\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.marqueeOnRender && !this.disabled) {\n\t\t\t\tthis.startMarqueeCustomDelay(this.marqueeOnRenderDelay);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this === observer._getMarqueeOnHoverControl()) {\n\t\t\t\tobserver._setMarqueeOnHoverControl(null);\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdispatchEvent: kind.inherit(function (sup) {\n\t\treturn function (sEventName, oEvent, oSender) {\n\t\t\t// Needed for proper onenter/onleave handling\n\t\t\tif (this.strictlyInternalEvents[sEventName] && this.isInternalEvent(oEvent)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// FIXME: not sure why events can arrive without event objects, but we guard here for safety\n\t\t\tif (oEvent && !oEvent.delegate) {\n\t\t\t\tvar handler = this._marquee_Handlers[sEventName];\n\t\t\t\tif (handler){\n\t\t\t\t\tthis.cachePoint = true;\n\t\t\t\t\tif(this[handler](oSender, oEvent)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Handles external requests to kick off {@link moon.MarqueeSupport#marqueeStart}.\n\t*\n\t* @private\n\t*/\n\t_marquee_requestStartMarquee: function () {\n\t\tif (this.marqueeOnRender) {\n\t\t\tthis.stopMarquee();\n\t\t\tthis.startMarquee();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* On focus, starts child marquees.\n\t*\n\t* @private\n\t*/\n\t_marquee_spotlightFocused: function (sender, ev) {\n\t\tthis._marquee_isFocused = true;\n\t\tif (this.marqueeOnSpotlight) {\n\t\t\tthis.startMarquee();\n\t\t}\n\t},\n\n\t/**\n\t* On blur, halts child marquees.\n\t*\n\t* @private\n\t*/\n\t_marquee_spotlightBlur: function (sender, ev) {\n\t\tthis._marquee_isFocused = false;\n\t\tif (this.marqueeOnSpotlight) {\n\t\t\tthis.stopMarquee();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_enter: function (sender, ev) {\n\t\tthis._marquee_isHovered = true;\n\t\tif ((this.marqueeOnHover && !this.marqueeOnSpotlight) ||\n\t\t(this.disabled && this.marqueeOnSpotlight)) {\n\t\t\tif (this.marqueeOnHover) {\n\t\t\t\tobserver._setMarqueeOnHoverControl(this);\n\t\t\t}\n\t\t\tthis.startMarquee();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_leave: function (sender, ev) {\n\t\tthis._marquee_isHovered = false;\n\t\tif ((this.marqueeOnHover && !this.marqueeOnSpotlight) || (this.disabled && this.marqueeOnSpotlight)) {\n\t\t\tif (this.marqueeOnHover) {\n\t\t\t\tobserver._setMarqueeOnHoverControl(null);\n\t\t\t}\n\t\t\tthis.stopMarquee();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_stopPropagation: function (sender, ev) {\n\t\tif (ev.originator != this) {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* When a child marquee animation completes, removes the child from\n\t* [marqueeWaitList]{@link moon.MarqueeSupport#marqueeWaitList}.\n\t*\n\t* @private\n\t*/\n\t_marquee_marqueeEnded: function (sender, ev) {\n\t\tif (this._marquee_active) {\n\t\t\tutil.remove(ev.originator, this.marqueeWaitList);\n\t\t\tif (this.marqueeWaitList.length === 0) {\n\t\t\t\tthis._marquee_startHold();\n\t\t\t\tthis._marquee_active = false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_resize: function (sender, ev) {\n\t\tif (this.marqueeOnSpotlight && this._marquee_active) {\n\t\t\tthis._marquee_active = false;\n\t\t\tthis._marquee_startHold();\n\t\t}\n\t},\n\n\t/**\n\t* Starts timer to waterfall an\n\t* [onRequestMarqueeStart]{@link moon.MarqueeSupport#onRequestMarqueeStart} event\n\t* that kicks off marquee animation on all child marquees.\n\t*\n\t* @public\n\t*/\n\tstartMarquee: function () {\n\t\tthis.startMarqueeCustomDelay(this.marqueeDelay);\n\t},\n\n\t/**\n\t* Waterfalls an [onRequestMarqueeStop]{@link moon.MarqueeSupport#onRequestMarqueeStop}\n\t* event to halt all running child marquees.\n\t*\n\t* @public\n\t*/\n\tstopMarquee: function () {\n\t\tthis.stopJob('marqueeSupportJob');\n\t\tthis.stopJob('resetMarquee');\n\t\tthis._marquee_active = false;\n\t\tthis._marquee_stopChildMarquees();\n\t},\n\n\t/**\n\t* @public\n\t*/\n\tenableMarquee: function () {\n\t\tthis._marquee_enableChildMarquees();\n\t},\n\n\t/**\n\t* @public\n\t*/\n\tdisableMarquee: function () {\n\t\tthis.stopMarquee();\n\t\tthis._marquee_disableChildMarquees();\n\t},\n\n\t/**\n\t* Adds the passed-in [control]{@link enyo.Control} to the list of marquee items.\n\t*\n\t* @param {Object} control  The [control]{@link enyo.Control} to add.\n\t* @public\n\t*/\n\taddMarqueeItem: function (control) {\n\t\tthis.marqueeWaitList.push(control);\n\t},\n\n\t/**\n\t* Restarts marquee if needed (depending on the\n\t* [marqueeOnSpotlight]{@link moon.MarqueeSupport#marqueeOnSpotlight} and\n\t* [marqueeOnRender]{@link moon.MarqueeSupport#marqueeOnRender} settings).\n\t*\n\t* @public\n\t*/\n\tresetMarquee: function () {\n\t\tif ((this.marqueeOnSpotlight && this._marquee_isFocused) ||\n\t\t\t(this.marqueeOnHover && this._marquee_isHovered) ||\n\t\t\tthis.marqueeOnRender) {\n\t\t\t// Batch multiple requests to reset from children being hidden/shown\n\t\t\tthis.startJob('resetMarquee', '_resetMarquee', 10);\n\t\t}\n\t},\n\n\t/**\n\t* Starts Marquee after a specified delay. Used to provide different delays for `onRender`\n\t* and `onSpotlight/Hover`.\n\t*\n\t* @param {Number} delay  Length of delay in milliseconds\n\t* @public\n\t*/\n\tstartMarqueeCustomDelay: function (delay) {\n\t\tthis._marquee_buildWaitList();\n\n\t\tif (this.marqueeWaitList.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._marquee_active = true;\n\t\tthis.startJob('marqueeSupportJob', '_marquee_startChildMarquees', delay);\n\t},\n\n\t/**\n\t* Stops and restarts the marquee animations.\n\t*\n\t* @private\n\t*/\n\t_resetMarquee: function () {\n\t\tthis.stopMarquee();\n\t\tif (this.marqueeOnRender) { this.startMarqueeCustomDelay(this.marqueeOnRenderDelay); }\n\t\telse { this.startMarquee(); }\n\t},\n\n\t/**\n\t* Waterfalls request for child animations to build up\n\t* [marqueeWaitList]{@link moon.MarqueeSupport#marqueeWaitList}.\n\t*\n\t* @fires moon.MarqueeSupport#onRequestMarquee\n\t* @private\n\t*/\n\t_marquee_buildWaitList: function () {\n\t\tthis.marqueeWaitList = [];\n\t\tthis.waterfall('onRequestMarquee', {originator: this, marqueePause: this.marqueePause, marqueeSpeed: this.marqueeSpeed});\n\t},\n\n\t/**\n\t* Waterfalls event to kick off child marquee animations.\n\t*\n\t* @fires moon.MarqueeSupport#onRequestMarqueeStart\n\t* @private\n\t*/\n\t_marquee_startChildMarquees: function () {\n\t\tthis.waterfall('onRequestMarqueeStart', {originator: this});\n\t},\n\n\t/**\n\t* Waterfalls event to halt child marquee animations.\n\t*\n\t* @fires moon.MarqueeSupport#onRequestMarqueeStop\n\t* @private\n\t*/\n\t_marquee_stopChildMarquees: function () {\n\t\tthis.waterfall('onRequestMarqueeStop', {originator: this});\n\t},\n\n\t/**\n\t* Waterfalls event to enable child marquee animations.\n\t*\n\t* @fires moon.MarqueeSupport#onRequestMarqueeEnable\n\t* @private\n\t*/\n\t_marquee_enableChildMarquees: function () {\n\t\tthis.waterfall('onRequestMarqueeEnable');\n\t},\n\n\t/**\n\t* Waterfalls event to disable child marquee animations.\n\t*\n\t* @fires moon.MarqueeSupport#onRequestMarqueeDisable\n\t* @private\n\t*/\n\t_marquee_disableChildMarquees: function () {\n\t\tthis.waterfall('onRequestMarqueeDisable');\n\t},\n\n\t/**\n\t* Begins delayed restart of child marquee animations.\n\t*\n\t* @private\n\t*/\n\t_marquee_startHold: function () {\n\t\tthis.startJob('marqueeSupportJob', 'startMarquee', this.marqueeHold);\n\t}\n};\n\n/**\n* The {@link moon.MarqueeItem} mixin is used to add marquee animation functionality\n* to a control.\n*\n* @mixin moon.MarqueeItem\n* @public\n*/\nvar MarqueeItem = exports.Item = /** @lends moon.MarqueeItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.MarqueeItem#onMarqueeEnded}\n\t\t*/\n\t\tonMarqueeEnded:''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marqueeItem_Handlers: {\n\t\tonRequestMarquee: '_marquee_requestMarquee',\n\t\tonRequestMarqueeStart: '_marquee_startAnimation',\n\t\tonRequestMarqueeStop: '_marquee_stopAnimation',\n\t\tonRequestMarqueeEnable: '_marquee_enable',\n\t\tonRequestMarqueeDisable: '_marquee_disable',\n\t\tontransitionend: '_marquee_animationEnded'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tobservers: {\n\t\t_marquee_contentChanged: ['content'],\n\t\t_marquee_centeredChanged: ['centered'],\n\t\t_marquee_wrapInsteadOfMarqueeChanged: ['wrapInsteadOfMarquee']\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.allowHtml', to:'.$.marqueeText.allowHtml'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-marquee',\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdispatchEvent: kind.inherit(function (sup) {\n\t\treturn function (sEventName, oEvent, oSender) {\n\t\t\tif (sup.apply(this, arguments)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (oEvent && !oEvent.delegate) {\n\t\t\t\tvar handler = this._marqueeItem_Handlers[sEventName];\n\t\t\t\tif (handler && this[handler](oSender, oEvent)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_enabled: true,\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_distance: null,\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_fits: null,\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_puppetMaster: null,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.detectTextDirectionality();\n\t\t\tthis._marquee_wrapInsteadOfMarqueeChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// There is a known issue where a parent control that modifies the layout will\n\t\t\t// invalidate the measurements used to detect the proper alignment, which can\n\t\t\t// result in the appropriate text-align rule not being applied. For example, this\n\t\t\t// can occur with a moon.Header that is located inside a moon.Scroller which has\n\t\t\t// vertical scrollbars visible.\n\t\t\tthis._marquee_detectAlignment();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\treflow: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis._marquee_invalidateMetrics();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tshowingChangedHandler: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis._marquee_reset();\n\t\t};\n\t}),\n\n\t/**\n\t* We must measure the content (after render) to determine if it's marqueeable, then to set\n\t* its alignment to left if the content was explicitly set to LTR earlier. This happens when\n\t* the locale is set to a RTL language, but your string contains no RTL characters in it.\n\t* Therefore it's LTR, and if it's marqueeable, should be left aligned, so it marquees in the\n\t* natural marqueeing direction.\n\t*\n\t* @param {Boolean} [forceAnimate]  Override the animation check (only accepts `true`). Use\n\t*\tthis if you know already, because you've already measured that you will need to marquee.\n\t* @param {Boolean} [forceRtl]  Override the internal RTL property, in case you know better.\n\t* @private\n\t*/\n\t_marquee_detectAlignment: function (forceAnimate, forceRtl) {\n\t\tvar alignment = null,\n\t\t\trtl = forceRtl || this.rtl;\n\n\t\t// We only attempt to set the alignment of this control if the locale's directionality\n\t\t// differs from the directionality of our current marqueeable control (as determined by\n\t\t// the control's content or is explicitly specified).\n\t\tif (Control.prototype.rtl != rtl || this.centered) {\n\t\t\t// If we will be marqueeing, we know the alignment needs to be set based on directionality.\n\t\t\tif (forceAnimate || this._marquee_shouldAnimate()) {\n\t\t\t\tif (rtl) {\n\t\t\t\t\talignment = 'right';\n\t\t\t\t} else {\n\t\t\t\t\talignment = 'left';\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Alignment wasn't set yet, so we know we don't need to animate. Now we can center the text if we're supposed to.\n\t\t\tif (!alignment && this.centered) {\n\t\t\t\talignment = 'center';\n\t\t\t}\n\t\t}\n\n\t\tthis.set('_marquee_alignment', alignment);\n\t},\n\n\t/**\n\t* Reset the marquee distance if the alignment changes, since now we'll have to calculate the\n\t* size again.\n\t*\n\t* @private\n\t*/\n\t_marquee_alignmentChanged: function () {\n\t\tthis.applyStyle('text-align', this._marquee_alignment);\n\t\tthis._marquee_invalidateMetrics();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_invalidateMetrics: function () {\n\t\tthis._marquee_distance = null;\n\t\tthis._marquee_fits = null;\n\t},\n\n\t/**\n\t* When the content of this control changes, updates the content of\n\t* `this.$.marqueeText` (if it exists).\n\t*\n\t* @private\n\t*/\n\t_marquee_contentChanged: function () {\n\t\tthis.detectTextDirectionality();\n\t\tif (this.$.marqueeText) {\n\t\t\tthis.$.marqueeText.setContent(this.content);\n\t\t}\n\t\tif (this.generated) {\n\t\t\tthis._marquee_invalidateMetrics();\n\t\t\tthis._marquee_detectAlignment();\n\t\t}\n\t\tthis._marquee_reset();\n\t},\n\n\t/**\n\t* If this control needs to marquee, lets the event originator know.\n\t*\n\t* @private\n\t*/\n\t_marquee_requestMarquee: function (sender, ev) {\n\t\tif (!ev || !this.showing || this._marquee_fits) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._marquee_puppetMaster = ev.originator;\n\t\tev.originator.addMarqueeItem(this);\n\n\t\tthis.marqueePause = ev.marqueePause || 1000;\n\t\tthis.marqueeSpeed = ev.marqueeSpeed || 60;\n\t},\n\n\t/**\n\t* Starts marquee animation.\n\t*\n\t* @private\n\t*/\n\t_marquee_startAnimation: function (sender, ev) {\n\t\t// if this control hasn't been generated, there's no need to follow through on\n\t\t// marquee requests as we'll be unable to correctly measure the distance delta yet\n\t\tif (!this.generated) return;\n\n\t\tvar distance = this._marquee_calcDistance();\n\n\t\t// If there is no need to animate, return early\n\t\tif (!this._marquee_shouldAnimate(distance)) {\n\t\t\tthis._marquee_fits = true;\n\t\t\tthis.doMarqueeEnded();\n\t\t\treturn;\n\t\t}\n\n\t\t// Lazy creation of _this.$.marqueeText_\n\t\tif (!this.$.marqueeText) {\n\t\t\tthis._marquee_createMarquee();\n\t\t}\n\n\t\tthis._marquee_addAnimationStyles(distance);\n\n\t\tif (this.$.marqueeText) { return true; }\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_enable: function () {\n\t\tthis.set('_marquee_enabled', true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_disable: function () {\n\t\tthis.set('_marquee_enabled', false);\n\t\tthis._marquee_stopAnimation();\n\t},\n\n\t/**\n\t* Stops marquee animation.\n\t*\n\t* @fires moon.MarqueeItem#onMarqueeEnded\n\t* @private\n\t*/\n\t_marquee_stopAnimation: function (sender, ev) {\n\t\tthis.stopJob('stopMarquee');\n\t\tthis._marquee_removeAnimationStyles();\n\t\tthis.doMarqueeEnded();\n\t},\n\n\t/**\n\t* When animation ends, starts `this.stopMarquee` job.\n\t*\n\t* @private\n\t*/\n\t_marquee_animationEnded: function (sender, ev) {\n\t\tif (ev.originator !== this.$.marqueeText) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.startJob('stopMarquee', '_marquee_stopAnimation', this.marqueePause);\n\t\treturn true;\n\t},\n\n\t/**\n\t* Returns `true` if this control has enough content to animate.\n\t*\n\t* @private\n\t*/\n\t_marquee_shouldAnimate: function (distance) {\n\t\tdistance = (distance && distance >= 0) ? distance : this._marquee_calcDistance();\n\t\treturn (distance > 0);\n\t},\n\n\t/**\n\t* Determines how far the marquee needs to scroll.\n\t*\n\t* @private\n\t*/\n\t_marquee_calcDistance: function () {\n\t\tvar node, rect;\n\n\t\tif (this._marquee_distance == null) {\n\t\t\tnode = this.$.marqueeText ? this.$.marqueeText.hasNode() : this.hasNode();\n\t\t\trect = node.getBoundingClientRect();\n\t\t\tthis._marquee_distance = Math.floor(Math.abs(node.scrollWidth - rect.width));\n\t\t}\n\n\t\treturn this._marquee_distance;\n\t},\n\n\t/**\n\t* Returns duration based on `distance` and `this.marqueeSpeed`.\n\t*\n\t* @private\n\t*/\n\t_marquee_calcDuration: function (distance) {\n\t\treturn distance / this.marqueeSpeed;\n\t},\n\n\t/**\n\t* Creates a marquee-able `div` inside of `this`.\n\t*\n\t* @private\n\t*/\n\t_marquee_createMarquee: function () {\n\t\t// Do not create marqueeText when there is components block,\n\t\t// because we don't know what should be the controlParent\n\t\tif (this.components && this.components.length > 0) return;\n\t\tvar marqueeText = {name: 'marqueeText', kind: Control, classes: 'moon-marquee-text', allowHtml: this.allowHtml, content: this.content},\n\t\t\thighlightText = null;\n\n\t\tif (this instanceof HighlightText) {\n\t\t\tdom.setInnerHtml(this.hasNode(), '');\n\t\t\thighlightText = {renderDelegate: this.renderDelegate, highlightClasses: this.highlightClasses, search: this.search};\n\t\t\tmarqueeText = util.mixin(marqueeText, highlightText);\n\t\t}\n\t\tthis.createComponent({name: 'marqueeTextWrapper', kind: Control, classes: 'moon-marquee-text-wrapper', components: [marqueeText]});\n\t\tthis.render();\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_addAnimationStyles: function (distance) {\n\t\tif (!this.$.marqueeText) return;\n\t\tvar duration = this._marquee_calcDuration(distance);\n\n\t\tthis.$.marqueeText.addClass('animate-marquee');\n\n\t\tif (options.accelerate) {\n\t\t\tdom.transform(this, {translateZ: 0});\n\t\t\tthis.$.marqueeText.applyStyle('transition', 'transform ' + duration + 's linear');\n\t\t\tthis.$.marqueeText.applyStyle('-webkit-transition', '-webkit-transform ' + duration + 's linear');\n\t\t} else {\n\t\t\tthis.$.marqueeText.applyStyle('transition', 'left ' + duration + 's linear');\n\t\t\tthis.$.marqueeText.applyStyle('-webkit-transition', 'left ' + duration + 's linear');\t\n\t\t}\n\n\t\t// Need this timeout for FF!\n\t\tsetTimeout(this.bindSafely(function () {\n\t\t\tif (options.accelerate) {\n\t\t\t\tdom.transform(this.$.marqueeText, {translateX: this._marquee_adjustDistanceForRTL(distance) + 'px'});\n\t\t\t} else {\n\t\t\t\tthis.$.marqueeText.applyStyle('left', this._marquee_adjustDistanceForRTL(distance) + 'px');\n\t\t\t}\n\t\t}), platform.firefox ? 100 : 16);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_removeAnimationStyles: function () {\n\t\tif (!this.$.marqueeText) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$.marqueeText.applyStyle('transition-duration', '0s');\n\t\tthis.$.marqueeText.applyStyle('-webkit-transition-duration', '0s');\n\n\t\t// Need this timeout for FF!\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tsetTimeout(this.bindSafely(function () {\n\t\t\tthis.$.marqueeText.removeClass('animate-marquee');\n\t\t\tif (options.accelerate) {\n\t\t\t\tdom.transform(this.$.marqueeText, {translateX: null});\n\t\t\t\tdom.transform(this, {translateZ: null});\n\t\t\t} else {\n\t\t\t\tthis.$.marqueeText.applyStyle('left', null);\n\t\t\t}\n\t\t}), platform.firefox ? 100 : 0);\n\t},\n\n\t/**\n\t* Flips distance value for RTL support.\n\t*\n\t* @private\n\t*/\n\t_marquee_adjustDistanceForRTL: function (distance) {\n\t\treturn this.rtl ? distance : distance * -1;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_reset: function () {\n\t\tthis._marquee_invalidateMetrics();\n\t\tif (this._marquee_puppetMaster) {\n\t\t\tthis._marquee_puppetMaster.resetMarquee();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_centeredChanged: function () {\n\t\tthis._marquee_detectAlignment();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_marquee_wrapInsteadOfMarqueeChanged: function(old) {\n\t\tif (this.wrapInsteadOfMarquee) {\n\t\t\tthis.addClass('allow-wrap');\n\t\t\tif (this.$.marqueeText) {\n\t\t\t\tthis.$.marqueeTextWrapper.destroy();\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t\tif (old && !this.wrapInsteadOfMarquee) {\n\t\t\tthis.removeClass('allow-wrap');\n\t\t\t// FIXME: Performing creation here to workaround potential WebKit measuring issue\n\t\t\t// with scrollWidth (under-measures by 10px when marquee components are destroyed\n\t\t\t// when we switch wrapInsteadofMarquee from `false` to `true`, and back to `false`).\n\t\t\tthis._marquee_createMarquee();\n\t\t}\n\t}\n};\n\n/**\n* {@link moon.MarqueeText} is a basic text control that supports marquee animation.\n* When `moon.MarqueeText` objects are used inside a\n* [moon.MarqueeDecorator]{@link moon.MarqueeDecorator}, the decorator synchronizes\n* their start times; the user may start a marquee programmatically by calling\n* [startMarquee()]{@link moon.MarqueeSupport#startMarquee}.\n*\n* ```\n* enyo.kind({\n* \tname: 'moon.Header',\n* \tmixins: ['moon.MarqueeSupport'],\n* \tmarqueeSpeed: 100,\n* \tcomponents: [\n* \t\t{kind: 'moon.MarqueeText', content: 'longText+longText'},\n* \t\t{kind: 'moon.MarqueeText', content: 'longText'}\n* \t],\n* \trendered: function () {\n* \t\tthis.startMarquee();\n* \t}\n* });\n* ```\n*\n* To add the marquee feature to a kind, simply use the\n* [MarqueeSupport]{@link moon.MarqueeSupport} mixin:\n*\n* ```\n* enyo.kind({\n* \tname: 'moon.MarqueeButton',\n* \tkind: 'enyo.Button',\n* \tmixins: ['moon.MarqueeSupport'],\n* \tcomponents: [\n* \t\t{kind:'moon.MarqueeText'}\n* \t],\n* \tcontentChanged: function () {\n* \t\tthis.$.marqueeText.setContent(this.content);\n* \t}\n* });\n* ```\n*\n* @class moon.MarqueeText\n* @extends enyo.Control\n* @mixes moon.MarqueeItem\n* @ui\n* @public\n*/\nvar MarqueeText = exports.Text = kind(\n\t/** @lends moon.MarqueeText.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.MarqueeText',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeItem],\n\n\t/**\n\t* @private\n\t* @lends moon.MarqueeText.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* The speed of the marquee animation, in pixels per second.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 60\n\t\t* @public\n\t\t*/\n\t\tmarqueeSpeed: 60,\n\n\t\t/**\n\t\t* The duration in milliseconds that the marquee will pause at the end of the\n\t\t* animation, before resetting to the beginning.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1000\n\t\t* @public\n\t\t*/\n\t\tmarqueePause: 1000,\n\n\t\t/**\n\t\t* When `true`, marqueeing will not occur.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* When `true`, text is centered; otherwise, it is left-aligned.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tcentered: false,\n\n\t\t/**\n\t\t* When `true`, element wraps instead of marqueeing.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\twrapInsteadOfMarquee: false\n\t}\n});\n\n/**\n* {@link moon.MarqueeDecorator} is a wrapper for {@link moon.MarqueeText} objects.\n*\n* @class moon.MarqueeDecorator\n* @extends enyo.Control\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nvar MarqueeDecorator = exports.Decorator = kind(\n\t/** @lends moon.MarqueeDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.MarqueeDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\t/**\n\t* @private\n\t*/\n\tstyle: 'overflow: hidden;'\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control'),\n\tDrawer = require('../../../enyo/lib/Drawer');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tMoonHistory = require('../History'),\n\tHistorySupport = MoonHistory.HistorySupport;\n\n\n/**\n* {@link moon.FullScreenDrawer} is a content-free drawer that fills the client's\n* full screen area.  It is only intended for use inside of {@link moon.Drawer}.\n* Users should not instantiate `moon.FullScreenDrawer` directly.\n*\n* @class moon.FullScreenDrawer\n* @extends enyo.Drawer\n* @ui\n* @protected\n*/\nvar FullScreenDrawer = kind({\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.FullScreenDrawer',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Drawer,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonResizeDrawer: 'resizeDrawer'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\topen: false,\n\n\t/**\n\t* @private\n\t* @lends moon.FullScreenDrawer.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* An object containing the client dimensions for the fullscreen drawer,\n\t\t* e.g.:\n\t\t* ```\n\t\t* drawer.setDrawerProps({height: 100px});\n\t\t* ```\n\t\t* This property is only intended to be used internally by {@link moon.Drawer}.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tdrawerProps: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tDrawer.prototype.initComponents.apply(this, arguments);\n\t\tthis.$.client.setShowing(true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\topenChanged: function () {\n\t\tthis.$.client.show();\n\t\tif (this.hasNode()) {\n\t\t\tif (this.$.animator.isAnimating()) {\n\t\t\t\tthis.$.animator.reverse();\n\t\t\t} else {\n\t\t\t\tvar v = this.orient == 'v';\n\t\t\t\tvar d = v ? 'height' : 'width';\n\t\t\t\tvar p = v ? 'top' : 'left';\n\t\t\t\tvar s = this.drawerProps.height;\n\t\t\t\t// unfixing the height/width is needed to properly\n\t\t\t\t// measure the scrollHeight/Width DOM property, but\n\t\t\t\t// can cause a momentary flash of content on some browsers\n\t\t\t\tthis.applyStyle(d, null);\n\n\t\t\t\tif (this.animated) {\n\t\t\t\t\tthis.$.animator.play({\n\t\t\t\t\t\tstartValue: this.open ? 0 : s,\n\t\t\t\t\t\tendValue: this.open ? s : 0,\n\t\t\t\t\t\tdimension: d,\n\t\t\t\t\t\tposition: p\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// directly run last frame if not animating\n\t\t\t\t\tthis.animatorEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimatorEnd: function () {\n\t\tif (!this.open) {\n\t\t\tthis.$.client.hide();\n\t\t}\n\t\tif (this.container) {\n\t\t\tthis.container.resize();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresizeDrawer: function (inSender, inProps) {\n\t\tthis.drawerProps = inProps;\n\t\tif ((this.open) && (!this.$.animator.isAnimating())) {\n\t\t\tthis.applyStyle('height', dom.unit(inProps.height, 'rem'));\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawerPropsChanged: function (){\n\t\tthis.$.client.applyStyle('height', dom.unit(this.drawerProps.height, 'rem'));\n\t\tthis.$.client.resize();\n\t\tthis.$.client.setShowing(this.open);\n\t}\n});\n\n/**\n* Fires when either the main drawer or the control drawer is activated. No event-specific\n* data is sent with this event.\n*\n* @event moon.Drawer#onActivate\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when either the main drawer or the control drawer is deactivated. No event-specific\n* data is sent with this event.\n*\n* @event moon.Drawer#onDeactivate\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.Drawer}, a control designed for use with {@link moon.Drawers},\n* consists of two drawers and a handle.\n* The main drawer is populated with any child components that are specified in\n* the constructor; the optional second drawer (control drawer) is populated\n* with components passed into the\n* [controlDrawerComponents]{@link moon.Drawer#controlDrawerComponents} property.\n*\n* If the second drawer has no components, the main drawer will take up the full\n* height of the containing view; otherwise, its height will be equal to the\n* height of the containing view minus the height of the `controlDrawerComponents`.\n*\n* A call to [toggleDrawer()]{@link moon.Drawer#toggleDrawer} will open or close\n* the control drawer if `controlDrawerComponents` is non-empty; otherwise, it will\n* open or close the main drawer.\n*\n* The control's child components may be of any kind.\n*\n* ```\n*\t\t{\n*\t\t\tname: 'musicDrawer',\n*\t\t\tkind: 'moon.Drawer',\n*\t\t\thandle: {name: 'handleButton', content: 'Handle'},\n*\t\t\tcomponents: [\n*\t\t\t\t{content: 'Drawer Content'}\n*\t\t\t],\n*\t\t\tcontrolDrawerComponents: [\n*\t\t\t\t{content: 'Controls'}\n*\t\t\t]\n*\t\t}\n* ```\n*\n* @class moon.Drawer\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar MoonDrawer = module.exports = kind(\n\t/** @lends moon.Drawer.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Drawer',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tmixins : [HistorySupport],\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-drawer moon-neutral',\n\n\t/**\n\t* @private\n\t* @lends moon.Drawer.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Components that are to be placed in the control drawer.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcontrolDrawerComponents: null,\n\n\t\t/**\n\t\t* Control that acts a \"handle\" for the drawer.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\thandle: null,\n\n\t\t/**\n\t\t* Visibility state of the main drawer.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\topen: false,\n\n\t\t/**\n\t\t* Visibility state of the control drawer.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tcontrolsOpen: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.Drawer#onActivate}\n\t\t*/\n\t\tonActivate: '',\n\n\t\t/**\n\t\t* {@link moon.Drawer#onDeactivate}\n\t\t*/\n\t\tonDeactivate: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\n\t\t/**\n\t\t* Handler for initial rendering event.\n\t\t*/\n\t\tonDrawersRendered: 'drawersRendered',\n\n\t\t/**\n\t\t* Handler for initial resizing event to size drawers to fullscreen.\n\t\t*/\n\t\tonDrawersResized: 'drawersResized'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'client', kind: FullScreenDrawer, spotlightDisabled: true, resizeContainer:false},\n\t\t{name: 'controlDrawer', kind: Drawer, spotlightDisabled: true, resizeContainer:false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.$.controlDrawer.createComponents(this.controlDrawerComponents, {owner: this.owner});\n\t\t//* Todo: remove padding on client\n\t\tthis.$.client.$.client.addClass('moon-drawer-client');\n\t\tthis.$.controlDrawer.$.client.addClass('moon-drawer-partial-client');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawersRendered: function (inSender, inEvent) {\n\t\tthis.$.client.setDrawerProps({height: this.calcDrawerHeight(inEvent.drawersHeight)});\n\t\tthis.openChanged();\n\t\tif (!this.controlsOpen) {\n\t\t\tthis.$.controlDrawer.setAnimated(false);\n\t\t\tthis.$.controlDrawer.setOpen(this.controlsOpen);\n\t\t\tthis.$.controlDrawer.setAnimated(true);\n\t\t} else {\n\t\t\tthis.controlsOpenChanged();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcDrawerHeight: function (drawersHeight) {\n\t\tvar clientHeight = drawersHeight;\n\t\tif (this.controlDrawerComponents == null) {\n\t\t\treturn clientHeight;\n\t\t} else {\n\t\t\tthis.controlDrawerHeight = (this.controlDrawerHeight) ? this.controlDrawerHeight : this.$.controlDrawer.hasNode().getBoundingClientRect().height;\n\t\t\treturn (clientHeight - this.controlDrawerHeight);\n\t\t}\n\t},\n\n\t/**\n\t* If [controlDrawerComponents]{@link moon.Drawer#controlDrawerComponents} is\n\t* non-empty, toggles the visibility state of the control drawer; otherwise,\n\t* toggles the visibility state of the main drawer.\n\t*\n\t* @public\n\t*/\n\ttoggleDrawer: function () {\n\t\tif (this.controlDrawerComponents == null) {\n\t\t\tthis.setOpen(!this.open);\n\t\t} else {\n\t\t\tthis.setControlsOpen(!this.controlsOpen);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @fires moon.Drawer#onActivate\n\t* @fires moon.Drawer#onDeactivate\n\t* @private\n\t*/\n\topenChanged: function () {\n\t\tthis.$.client.setOpen(this.open);\n\t\tif (this.open) {\n\t\t\tthis.doActivate();\n\t\t\tthis.$.client.spotlightDisabled = false;\n\t\t\tSpotlight.spot(this.$.client);\n\t\t\tif (this.allowBackKey) {\n\t\t\t\tthis.pushBackHistory();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.$.client.spotlightDisabled = true;\n\t\t\tthis.doDeactivate();\n\t\t}\n\t},\n\n\t/**\n\t* @fires moon.Drawer#onActivate\n\t* @fires moon.Drawer#onDeactivate\n\t* @private\n\t*/\n\tcontrolsOpenChanged: function () {\n\t\tthis.$.controlDrawer.setOpen(this.controlsOpen);\n\t\tif (this.controlsOpen) {\n\t\t\tthis.doActivate();\n\t\t\tthis.$.controlDrawer.spotlightDisabled = false;\n\t\t\tSpotlight.spot(this.$.controlDrawer);\n\t\t\tif (this.allowBackKey) {\n\t\t\t\tthis.pushBackHistory();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.$.client.getOpen()) {\n\t\t\t\tthis.$.client.setOpen(false);\n\t\t\t}\n\t\t\tthis.$.controlDrawer.spotlightDisabled = true;\n\t\t\tthis.doDeactivate();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawersResized: function (inSender, inEvent) {\n\t\tthis.$.client.setDrawerProps({height: this.calcDrawerHeight(inEvent.drawersHeight)});\n\t\tthis.setOpen(false);\n\t\tthis.setControlsOpen(false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackKeyHandler: function () {\n\t\tif (this.open) {\n\t\t\tthis.setOpen(false);\n\t\t} else if (this.controlsOpen) {\n\t\t\tthis.setControlsOpen(false);\n\t\t}\n\t\treturn true;\n\t}\n});\n\nMoonDrawer.FullScreenDrawer = FullScreenDrawer;","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tri = require('../../../enyo/lib/resolution'),\n\tCheckbox = require('../../../enyo/lib/Checkbox');\n\nvar\n\tIcon = require('../Icon');\n\n/**\n* {@link moon.Checkbox} is a box that, when tapped, shows or hides a checkmark\n* and fires an [onChange]{@link enyo.Checkbox#onChange} event. It derives from\n* {@link enyo.Checkbox} and is designed to be used with {@link moon.CheckboxItem}.\n*\n* @class moon.Checkbox\n* @extends enyo.Checkbox\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Checkbox.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Checkbox',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Checkbox,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-checkbox',\n\n\t/**\n\t* @private\n\t* @lends moon.Checkbox.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* If `true`, the `checked` property cannot be changed through user input.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tlocked: false,\n\n\t\t/**\n\t\t* Name of a font-based icon to use when displaying the checkbox. Consult\n\t\t* {@link moon.Icon} for valid values.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'check'\n\t\t* @public\n\t\t*/\n\t\ticon: 'check',\n\n\t\t/**\n\t\t* Optional path to an image asset. May be used to customize checkbox appearance.\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'div',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\n\t\t/**\n\t\t* prevent double onchange bubble in IE\n\t\t* @private\n\t\t*/\n\t\tonclick: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'checkboxIcon', kind: Icon, icon: 'check'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\trendered: function () {\n\t\tCheckbox.prototype.rendered.apply(this, arguments);\n\t\tthis.srcChanged();\n\t\tthis.iconChanged();\n\t},\n\n\t/**\n\t* @fires enyo.Checkbox#onChange\n\t* @private\n\t*/\n\ttap: function (inSender, e) {\n\t\tif (!this.disabled && !this.locked) {\n\t\t\tthis.setChecked(!this.getChecked());\n\t\t\tthis.bubble('onchange');\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragstart: function () {\n\t\t// Override enyo.Input dragstart handler, to allow drags to propagate for Checkbox\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ticonChanged: function() {\n\t\tthis.$.checkboxIcon.setIcon(this.icon);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsrcChanged: function() {\n\t\tthis.$.checkboxIcon.setSrc(ri.selectSrc(this.src));\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tIcon = require('../Icon');\n\n/**\n* {@link moon.IconButton} is a {@link moon.Icon} that acts like a button. Specify\n* the icon image by setting the [src]{@link moon.Icon#src} property to a URL\n* indicating the image file's location.\n*\n* ```\n* {kind: 'moon.IconButton', src: 'images/search.png'}\n* ```\n*\n* If you want to combine an icon with text inside of a button, use a\n* `moon.Icon` inside a {@link moon.Button}.\n*\n* Moonstone supports two methods for displaying icons; in addition to specifying\n* traditional image assets in `src`, you may use icons that are stored as single\n* characters in a special symbol font. To do this, set the value of the\n* [icon]{@link moon.Icon#icon} property to a string representing an icon name,\n* e.g.:\n*\n* ```\n* {kind: 'moon.IconButton', icon: 'closex'}\n* ```\n*\n* See {@link moon.Icon} for more information on the available font-based icons,\n* as well as specifications for icon image assets.\n*\n* @class moon.IconButton\n* @extends moon.Icon\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.IconButton.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.IconButton',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Icon,\n\n\t/**\n\t* @private\n\t* @lends moon.IconButton.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Used when the IconButton is part of an {@link enyo.Group}. A value of `true`\n\t\t* indicates that this is the active button of the group; `false`, that it is not\n\t\t* the active button.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false,\n\n\t\t/**\n\t\t* A boolean parameter affecting the size of the button.\n\t\t* If `true`, the button will have a diameter of 60px.\n\t\t* However, the button's tap target will still have a diameter of 78px, with\n\t\t* invisible DOM wrapping the small button to provide the larger tap zone.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tsmall: true,\n\n\t\t/**\n\t\t* If `true`, the button will have no rounded background color/border.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tnoBackground: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-icon-button',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\n\t\t/**\n\t\t* Simulates mousedown.\n\t\t*/\n\t\tonSpotlightKeyDown: 'depress',\n\n\t\t/**\n\t\t* Simulates mouseup.\n\t\t*/\n\t\tonSpotlightKeyUp: 'undepress',\n\n\t\t/**\n\t\t* Used to request it is in view in scrollers.\n\t\t*/\n\t\tonSpotlightFocused: 'spotlightFocused',\n\n\t\tonSpotlightBlur: 'undepress'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tIcon.prototype.create.apply(this, arguments);\n\t\tthis.noBackgroundChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function () {\n\t\tIcon.prototype.rendered.apply(this, arguments);\n\t\tthis.activeChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnoBackgroundChanged: function () {\n\t\tthis.addRemoveClass('no-background', this.noBackground);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function () {\n\t\tif (this.disabled) {\n\t\t\treturn true;\n\t\t}\n\t\tthis.setActive(true);\n\t},\n\n\t/**\n\t* @fires enyo.GroupItem#onActivate\n\t* @private\n\t*/\n\tactiveChanged: function () {\n\t\tthis.bubble('onActivate');\n\t},\n\n\t/**\n\t* Adds `pressed` CSS class.\n\t* @private\n\t*/\n\tdepress: function (inSender, inEvent) {\n\t\tif (inEvent.keyCode === 13) {\n\t\t\tthis.addClass('pressed');\n\t\t}\n\t},\n\n\t/**\n\t* Removes `pressed` CSS class.\n\t* @private\n\t*/\n\tundepress: function () {\n\t\tthis.removeClass('pressed');\n\t},\n\n\t/**\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tspotlightFocused: function (inSender, inEvent) {\n\t\tif (inEvent.originator === this) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tIcon = require('../Icon');\n\n/**\n* {@link moon.ImageBadge}, which derives from {@link moon.Icon}, is a simple\n* control designed for use inside of {@link moon.Image}.\n*\n* @class moon.ImageBadge\n* @extends moon.Icon\n* @ui\n* @public\n*/\n\nmodule.exports = kind(\n\t/** @lends moon.ImageBadge.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ImageBadge',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Icon,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-image-badge'\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tIcon = require('../Icon');\n\n/**\n* {@link moon.SelectionOverlaySupport} is a [mixin]{@glossary mixin} that may be applied\n* to any {@link moon.DataList} or {@link moon.DataGridList} item to provide an overlay\n* that is activated when the list is in selection mode.\n*\n* The selection overlay has three visual states: focused but not selected, focused and\n* selected, and selected but not focused.\n*\n* The item may define a\n* [selectionScrimIcon]{@link moon.SelectionOverlaySupport#selectionScrimIcon} URL to\n* override the default icon.\n*\n* ```javascript\n* {name: 'list', selection: true, kind: 'moon.DataList', components: [\n*\t{mixins: ['moon.SelectionOverlaySupport'], selectionScrimIcon: 'assets/my-icon.png',\n*\t\tkind: 'moon.ImageItem', bindings: [\n*\t\t\t{from: '.model.title', to: '.label'},\n*\t\t\t{from: '.model.description', to: '.text'},\n*\t\t\t{from: '.model.coverSource', to: '.source'}\n*\t\t]\n*\t}\n* ]}\n* ```\n*\n* By default, the overlay icon is centered horizontally and vertically over the item, but you\n* can override the default by specifying percentage values for\n* [selectionOverlayHorizontalOffset]{@link moon.SelectionOverlaySupport#selectionOverlayHorizontalOffset}\n* and [selectionOverlayVerticalOffset]{@link moon.SelectionOverlaySupport#selectionOverlayVerticalOffset}.\n* The horizontal offset is measured from the left in left-to-right locales, and from the right\n* in right-to-left locales.\n*\n* ```javascript\n* {name: 'gridList', selection: true, kind: 'moon.DataGridList', components: [\n*\t{mixins: ['moon.SelectionOverlaySupport'], kind: 'moon.GridListImageItem',\n*\t\tselectionOverlayVerticalOffset: 35, bindings: [\n*\t\t\t{from: '.model.text', to: '.caption'},\n*\t\t\t{from: '.model.subText', to: '.subCaption'},\n*\t\t\t{from: '.model.url', to: '.source'}\n*\t\t]\n*\t}\n* ]}\n* ```\n*\n* @mixin moon.SelectionOverlaySupport\n* @protected\n*/\nmodule.exports = {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.SelectionOverlaySupport',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-selection-overlay-support',\n\n\t/**\n\t* URL for icon to be used in place of default icon.\n\t*\n\t* @name moon.SelectionOverlaySupport#selectionScrimIcon\n\t* @type {String}\n\t* @default undefined\n\t* @public\n\t*/\n\n\t/**\n\t* Vertical offset for the overlay icon, expressed as percent from the top. Will default\n\t* to `50` if undefined.\n\t*\n\t* @name moon.SelectionOverlaySupport#selectionOverlayVerticalOffset\n\t* @type {Number}\n\t* @default undefined\n\t* @public\n\t*/\n\n\t/**\n\t* Horizontal offset for the overlay icon, expressed as percent from the left or right edge.\n\t* The offset is measured from the left edge in left-to-right locales, and from the right in\n\t* right-to-left locales.\n\t*\n\t* @name moon.SelectionOverlaySupport#selectionOverlayHorizontalOffset\n\t* @type {Number}\n\t* @default undefined\n\t* @public\n\t*/\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.createChrome(this._selectionScrim);\n\t\t\tthis.selectionOverlayHorizontalOffset = this.selectionOverlayHorizontalOffset === undefined ? 50 : this.selectionOverlayHorizontalOffset;\n\t\t\tthis.selectionOverlayVerticalOffset = this.selectionOverlayVerticalOffset === undefined ? 50 : this.selectionOverlayVerticalOffset;\n\t\t\tthis.selectionOverlayHorizontalOffsetChanged();\n\t\t\tthis.selectionOverlayVerticalOffsetChanged();\n\t\t\t// Allow the icon to be modified by user\n\t\t\tif (this.selectionScrimIcon) {\n\t\t\t\tthis.$.selectionScrimIcon.set('icon','');\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.selectionScrimIcon', to: '.$.selectionScrimIcon.src'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\t_selectionScrim: [\n\t\t{classes: 'enyo-fit moon-selection-overlay-support-scrim', kind: Control, components: [\n\t\t\t{name:'selectionScrimIcon', kind: Icon, small: false, icon: 'check', spotlight: false}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tselectionOverlayVerticalOffsetChanged: function () {\n\t\tthis.$.selectionScrimIcon.applyStyle('top', this.selectionOverlayVerticalOffset + '%');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectionOverlayHorizontalOffsetChanged: function () {\n\t\tthis.$.selectionScrimIcon.applyStyle((this.rtl ? 'right' : 'left'), this.selectionOverlayHorizontalOffset + '%');\n\t}\n};","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tjob = require('../../../enyo/lib/job'),\n\tpath = require('../../../enyo/lib/pathResolver'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\t$L = require('../moon-ilib'),\n\tIcon = require('../Icon');\n\n/**\n* {@link moon.VideoFeedback} is a control used by {@link moon.VideoPlayer} to display\n* feedback in response to input from video playback controls. It may also be used to\n* display custom messages. The {@link moon.VideoTransportSlider} control typically\n* communicates directly with this one.\n*\n* @class moon.VideoFeedback\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.VideoFeedback */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.VideoFeedback',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-video-player-feedback',\n\n\t/**\n\t* @private\n\t* @lends enyo.VideoFeedback.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Length of time (in milliseconds) after which the on-screen feedback will automatically\n\t\t* disappear.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 2000\n\t\t* @public\n\t\t*/\n\t\tautoTimeoutMS: 2000,\n\n\t\t/**\n\t\t* When `true`, the content will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercase: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_showingFeedback: false,\n\n\t/**\n\t* @private\n\t*/\n\t_imagePath:\t\t\t\t'$lib/moonstone/images/video-player/',\n\n\t/**\n\t* @private\n\t*/\n\t_jumpBackImg:\t\t\t'jumpbackward',\n\n\t/**\n\t* @private\n\t*/\n\t_rewindImg:\t\t\t\t'backward',\n\n\t/**\n\t* @private\n\t*/\n\t_playImg:\t\t\t\t'play',\n\n\t/**\n\t* @private\n\t*/\n\t_pauseImg:\t\t\t\t'pause',\n\n\t/**\n\t* @private\n\t*/\n\t_fastForwardImg:\t\t'forward',\n\n\t/**\n\t* @private\n\t*/\n\t_jumpForwardImg:\t\t'jumpforward',\n\n\t/**\n\t* @private\n\t*/\n\t_pauseBackImg:\t\t\t'pausebackward',\n\n\t/**\n\t* @private\n\t*/\n\t_pauseForwardImg:\t\t'pauseforward',\n\n\t/**\n\t* @private\n\t*/\n\t_pauseJumpBackImg:\t\t'pausejumpbackward',\n\n\t/**\n\t* @private\n\t*/\n\t_pauseJumpForwardImg:\t'pausejumpforward',\n\n\t/**\n\t* @private\n\t*/\n\t_autoTimer: null,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'leftIcon', kind: Icon, classes: 'moon-video-feedback-icon-left', allowHtml: true, showing: false},\n\t\t{name: 'feedText', kind: Control, classes: 'moon-video-feedback-text', allowHtml: true, showing: false},\n\t\t{name: 'rightIcon', kind: Icon, classes: 'moon-video-feedback-icon-right', allowHtml: true, showing: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tif (window.ilib) {\n\t\t\tthis.df = new ilib.DurFmt({length: 'medium', useNative: false});\n\t\t}\n\t},\n\n\t/**\n\t* Updates [IconButton]{@link moon.IconButton} image and [Slider]{@link moon.Slider}\n\t* message with current state and playback rate when any of the playback controls are\n\t* triggered.\n\t*\n\t* Playback states are mapped to `playbackRate` values according to the following hash:\n\t*\n\t* ```javascript\n\t* {\n\t*\t'fastForward': ['2', '4', '8', '16'],\n\t*\t'rewind': ['-2', '-4', '-8', '-16'],\n\t*\t'slowForward': ['1/4', '1/2'],\n\t*\t'slowRewind': ['-1/2', '-1']\n\t* }\n\t* ```\n\t*\n\t* @private\n\t*/\n\tcheckIconType: function(icon) {\n\t\tvar imagesrcRegex = /\\.(jpg|jpeg|png|gif)$/i;\n\t\treturn imagesrcRegex.test(icon) ? 'image' : 'iconfont';\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tretriveImgOrIconPath:function(icon){\n\t\tif (this.checkIconType(icon) == 'image') {\n\t\t\treturn path.rewrite(this._imagePath + icon);\n\t\t} else {\n\t\t\treturn path.rewrite(icon);\n\t\t}\n\t},\n\n\t/**\n\t* Sets the current state for a {@link moon.VideoFeedback} control.\n\t*\n\t* @param {String} msg - The string to display.\n\t* @param {moon.VideoTransportSlider~FeedbackParameterObject} params - A\n\t*\t[hash]{@glossary Object} of parameters accompanying the message.\n\t* @param {Boolean} persist - If `true`, the [feedback]{@link moon.VideoFeedback}\n\t* control will not be automatically hidden.\n\t* @param {String} leftSrc - The source url for the image displayed on the left side\n\t*\tof the feedback control.\n\t* @param {String} rightSrc - The source url for the image displayed on the right\n\t*\tside of the feedback control.\n\t* @param {Boolean} preview - Specify `true` to put the\n\t* [video player]{@link moon.VideoPlayer} in preview mode; otherwise, `false`.\n\t* @public\n\t*/\n\tfeedback: function(msg, params, persist, leftSrc, rightSrc, preview) {\n\t\tvar customMessage = false;\n\t\tmsg = msg || '';\n\t\tparams = params || {};\n\n\t\tif (msg !== '') { this.$.feedText.show(); }\n\n\t\tswitch (msg) {\n\t\tcase 'Play':\n\t\t\tmsg = $L('PLAY'); // i18n \"PLAY\" feedback text in moon.VideoPlayer widget, should be translated to ALL CAPS in all languages\n\t\t\trightSrc = this.retriveImgOrIconPath(this._playImg);\n\t\t\tbreak;\n\n\t\tcase 'Pause':\n\t\t\tmsg = $L('PAUSE'); // i18n \"PAUSE\" feedback text in moon.VideoPlayer widget, should be translated to ALL CAPS in all languages\n\t\t\trightSrc = this.retriveImgOrIconPath(this._pauseImg);\n\t\t\tbreak;\n\n\t\tcase 'Rewind':\n\t\t\tmsg = Math.abs(params.playbackRate) + 'x';\n\t\t\tleftSrc = this.retriveImgOrIconPath(this._rewindImg);\n\t\t\tbreak;\n\n\t\tcase 'Slowrewind':\n\t\t\tmsg = params.playbackRate + 'x';\n\t\t\tleftSrc = this.retriveImgOrIconPath(this._pauseBackImg);\n\t\t\tbreak;\n\n\t\tcase 'Fastforward':\n\t\t\tmsg = Math.abs(params.playbackRate) + 'x';\n\t\t\trightSrc = this.retriveImgOrIconPath(this._fastForwardImg);\n\t\t\tbreak;\n\n\t\tcase 'Slowforward':\n\t\t\tmsg = params.playbackRate + 'x';\n\t\t\trightSrc = this.retriveImgOrIconPath(this._pauseForwardImg);\n\t\t\tbreak;\n\n\t\tcase 'JumpBackward':\n\t\t\tmsg = this.df ? this.df.format({second: params.jumpSize}) : params.jumpSize + ' Sec';\n\t\t\tleftSrc = this.retriveImgOrIconPath(this._pauseJumpBackImg);\n\t\t\tbreak;\n\n\t\tcase 'JumpForward':\n\t\t\tmsg = this.df ? this.df.format({second: params.jumpSize}) : params.jumpSize + ' Sec';\n\t\t\trightSrc = this.retriveImgOrIconPath(this._pauseJumpForwardImg);\n\t\t\tbreak;\n\n\t\tcase 'JumpToStart':\n\t\t\tmsg = '';\n\t\t\tleftSrc = this.retriveImgOrIconPath(this._pauseJumpBackImg);\n\t\t\tbreak;\n\n\t\tcase 'JumpToEnd':\n\t\t\tmsg = '';\n\t\t\trightSrc = this.retriveImgOrIconPath(this._pauseJumpForwardImg);\n\t\t\tbreak;\n\n\t\tcase 'Stop':\n\t\t\tmsg = $L('STOP'); // i18n \"STOP\" feedback text in moon.VideoPlayer widget, should be translated to ALL CAPS in all languages\n\t\t\trightSrc = '';\n\t\t\tbreak;\n\n\t\t// If the user sends in a custom message, block other messages until it's hidden\n\t\tdefault:\n\t\t\tcustomMessage = true;\n\t\t\tthis._showingFeedback = true;\n\t\t\tbreak;\n\t\t}\n\n\t\t// Don't show feedback if we are showing custom feedback already, unless this is a new custom message\n\t\tif (!customMessage && this._showingFeedback) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set content as _inMessage_\n\t\tthis.$.feedText.setContent( this.get('uppercase') ? util.toUpperCase(msg) : msg);\n\n\t\t// Show output controls when video player is not preview mode\n\t\tif (!preview) {\n\t\t\tthis.showFeedback();\n\t\t}\n\n\t\t// Show icons as appropriate\n\t\tthis.updateIcons(leftSrc, rightSrc);\n\n\t\t//* Don't set up hide timer if _inPersistShowing_ is true\n\t\tif (persist) {\n\t\t\tthis.resetAutoTimer();\n\t\t} else {\n\t\t\tthis.setAutoTimer();\n\t\t}\n\t\tthis.inPersistShowing = persist;\n\t},\n\n\t/**\n\t* Determines whether the current feedback message is persistent (i.e., it has no\n\t* timeout).\n\t*\n\t* @returns {Boolean} `true` if the current feedback message has no timeout;\n\t* otherwise, `false`, meaning that the feedback message has a timeout and is not\n\t* persistent.\n\t* @public\n\t*/\n\tisPersistShowing: function() {\n\t\treturn this.inPersistShowing;\n\t},\n\n\t/**\n\t* Shows this control.\n\t*\n\t* @public\n\t*/\n\tshowFeedback: function() {\n\t\tthis.setShowing(true);\n\t},\n\n\t/**\n\t* Hides this control and sets internal `_showingFeedback` flag to `false`.\n\t*\n\t* @public\n\t*/\n\thideFeedback: function() {\n\t\tthis.setShowing(false);\n\t\tthis._showingFeedback = false;\n\t},\n\n\t/**\n\t* Starts job that will hide this control.\n\t*\n\t* @private\n\t*/\n\tsetAutoTimer: function() {\n\t\tthis.hideJob = job(this.id + 'hide', this.bindSafely('hideFeedback'), this.getAutoTimeoutMS());\n\t},\n\n\t/**\n\t* Clears job that will hide this control.\n\t*\n\t* @private\n\t*/\n\tresetAutoTimer: function() {\n\t\tjob.stop(this.id + 'hide');\n\t},\n\n\t/**\n\t* Shows or hides icons, and sets sources.\n\t*\n\t* @private\n\t*/\n\tupdateIcons: function(leftSrc, rightSrc) {\n\t\tif (leftSrc) {\n\t\t\tthis.$.leftIcon.show();\n\t\t\tthis.displayIconSrcOrFont(this.$.leftIcon, leftSrc);\n\t\t} else {\n\t\t\tthis.$.leftIcon.hide();\n\t\t}\n\n\t\tif (rightSrc) {\n\t\t\tthis.$.rightIcon.show();\n\t\t\tthis.displayIconSrcOrFont(this.$.rightIcon, rightSrc);\n\t\t} else {\n\t\t\tthis.$.rightIcon.hide();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisplayIconSrcOrFont: function(iconKind, icon) {\n\t\tif (this.checkIconType(icon) == 'image') {\n\t\t\ticonKind.set('icon', '');\n\t\t\ticonKind.set('src', icon);\n\t\t} else {\n\t\t\ticonKind.set('src', '');\n\t\t\ticonKind.set('icon', icon);\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tlog = require('../../../enyo/lib/logger'),\n\tri = require('../../../enyo/lib/resolution'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tPopup = require('../../../enyo/lib/Popup'),\n\tAnimator = require('../../../enyo/lib/Animator');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tProgressBar = require('../ProgressBar');\n\n/**\n* Fires when bar position is set.\n*\n* @event moon.Slider#onChange\n* @type {Object}\n* @property {Number} value - The value of the current position.\n* @public\n*/\n\n/**\n* Fires while control knob is being dragged.\n*\n* @event moon.Slider#onChanging\n* @type {Object}\n* @property {Number} value - The value of the current position.\n* @public\n*/\n\n/**\n* Fires when animation to a position finishes. No additional information is passed with this\n* event.\n*\n* @event moon.Slider#onAnimateFinish\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.Slider} is a [control]{@link enyo.Control} that presents a range of selection\n* options in the form of a horizontal slider with a control knob. The knob may be tapped and\n* dragged to the desired location.\n*\n* ```javascript\n* {kind: \"moon.Slider\", value: 30}\n* ```\n*\n* @class moon.Slider\n* @extends moon.ProgressBar\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Slider.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Slider',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ProgressBar,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-slider',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t* @lends moon.Slider.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Position of slider, expressed as an integer between `0` and `100`, inclusive.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tvalue: 0,\n\n\t\t/**\n\t\t* Sliders may \"snap\" to multiples of this value in either direction.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tincrement: 0,\n\n\t\t/**\n\t\t* When `true`, current progress is styled differently from rest of bar.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tlockBar: true,\n\n\t\t/**\n\t\t* When `true`, tapping on bar will change current position.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\ttappable: true,\n\n\t\t/**\n\t\t* CSS classes to apply to the knob.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-slider-knob'\n\t\t* @public\n\t\t*/\n\t\tknobClasses: 'moon-slider-knob',\n\n\t\t/**\n\t\t* CSS classes to apply to the popup label.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-slider-popup-label'\n\t\t* @public\n\t\t*/\n\t\tpopupLabelClasses: 'moon-large-button-text moon-slider-popup-label',\n\n\t\t/**\n\t\t* CSS classes to apply to the tap area.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-slider-taparea'\n\t\t* @public\n\t\t*/\n\t\ttapAreaClasses: 'moon-slider-taparea',\n\n\t\t/**\n\t\t* Color value of the popup.\n\t\t*\n\t\t* @type {String}\n\t\t* @default '#4d4d4d'\n\t\t* @public\n\t\t*/\n\t\tpopupColor: '#4d4d4d',\n\n\t\t/**\n\t\t* If set to `true`, button is shown as disabled and does not generate tap events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* When `true`, knob and progress move with animation when left or right direction\n\t\t* key is pressed, or when bar is tapped.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tanimate: true,\n\n\t\t/**\n\t\t* When `false`, the slider's popup bubble is displayed while the slider is being\n\t\t* adjusted.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tnoPopup: false,\n\n\t\t/**\n\t\t* When `true`, the popup displays a percentage value (rather than an absolute value).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowPercentage: true,\n\n\t\t/**\n\t\t* Popup width in pixels.\n\t\t*\n\t\t* @type {Number|String}\n\t\t* @default 'auto'\n\t\t* @public\n\t\t*/\n\t\tpopupWidth: 'auto',\n\n\t\t/**\n\t\t* Popup height in pixels; value should be less than `72`.\n\t\t*\n\t\t* @type {Number|String}\n\t\t* @default 67\n\t\t* @public\n\t\t*/\n\t\tpopupHeight: 67,\n\n\t\t/**\n\t\t* Popup offset in pixels.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 8\n\t\t* @public\n\t\t*/\n\t\tpopupOffset: 8,\n\n\t\t/**\n\t\t* When `false`, knob may be moved past the\n\t\t* [bgProgress]{@link moon.ProgressBar#bgProgress} value.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tconstrainToBgProgress: false,\n\n\t\t/**\n\t\t* If set to `true`, an elastic visual effect is seen when the knob is dragged past\n\t\t* the [bgProgress]{@link moon.ProgressBar#bgProgress} value.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\telasticEffect: false,\n\n\t\t/**\n\t\t* Custom popup content (ignored if `null`).\n\t\t*\n\t\t* @type {String|null}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tpopupContent: null,\n\n\t\t/**\n\t\t* When `true`, popup content will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercase: true,\n\n\t\t/**\n\t\t* @deprecated Replaced by [uppercase]{@link moon.Slider#uppercase}.\n\t\t*\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\n\t\t* an effect when explicitly set (for complete backward compatibility).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tpopupContentUpperCase: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonChange: '',\n\t\tonChanging: '',\n\t\tonAnimateFinish: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tondragstart: 'dragstart',\n\t\tondrag: 'drag',\n\t\tondragfinish: 'dragfinish',\n\t\tonSpotlightFocused: 'spotFocused',\n\t\tonSpotlightSelect: 'spotSelect',\n\t\tonSpotlightBlur: 'spotBlur',\n\t\tonSpotlightLeft: 'spotLeft',\n\t\tonSpotlightRight: 'spotRight'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmoreComponents: [\n\t\t{kind: Animator, onStep: 'animatorStep', onEnd: 'animatorComplete'},\n\t\t{name: 'tapArea', kind: Control},\n\t\t{name: 'knob', kind: Control, ondown: 'showKnobStatus', onup: 'hideKnobStatus', components: [\n\t\t\t{name: 'popup', kind: Popup, classes: 'moon-slider-popup above', components: [\n\t\t\t\t{name: 'drawingLeft', kind: Control, tag: 'canvas', classes: 'moon-slider-popup-left'},\n\t\t\t\t{name: 'popupLabel', kind: Control, classes: 'moon-slider-popup-center' },\n\t\t\t\t{name: 'drawingRight', kind: Control, tag: 'canvas', classes: 'moon-slider-popup-right'}\n\t\t\t]}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tanimatingTo: null,\n\n\t/**\n\t* @private\n\t*/\n\tpopupLeftCanvasWidth: 27, // Popup left canvas width in pixel\n\n\t/**\n\t* @private\n\t*/\n\tpopupRightCanvasWidth: 27, // Popup right canvas width in pixel\n\n\t/**\n\t* @private\n\t*/\n\tselected: false,\n\n\t/**\n\t* Animates to the given value.\n\t*\n\t* @param {Number} start - The start position, as an integer between `0` and `100`.\n\t* @param {Number} end - The end position, as an integer between `0` and `100`.\n\t* @public\n\t*/\n\tanimateTo: function(start, end) {\n\t\tstart = this.clampValue(this.min, this.max, start);\n\t\tend = this.clampValue(this.min, this.max, end); // Moved from animatorStep\n\t\tthis.animatingTo = end;\n\n\t\tthis.$.animator.play({\n\t\t\tstartValue: start,\n\t\t\tendValue: end,\n\t\t\tnode: this.hasNode()\n\t\t});\n\t},\n\n\t/**\n\t* Determines whether the slider is currently being dragged.\n\t*\n\t* @returns {Boolean} `true` if the slider is currently being dragged; otherwise, `false`.\n\t* @public\n\t*/\n\tisDragging: function() {\n\t\treturn this.dragging;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tProgressBar.prototype.create.apply(this, arguments);\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis._nf = new ilib.NumFmt({type: 'percentage', useNative: false});\n\t\t}\n\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// the popupContentUpperCase property is fully deprecated and removed. The legacy\n\t\t// property takes precedence if it exists.\n\t\tif (this.popupContentUpperCase !== null) this.uppercase = this.popupContentUpperCase;\n\n\t\tthis.createComponents(this.moreComponents);\n\t\tthis.initValue();\n\t\tthis.disabledChanged();\n\t\tthis.knobClassesChanged();\n\t\tthis.popupLabelClassesChanged();\n\t\tthis.popupContentChanged();\n\t\tthis.tapAreaClassesChanged();\n\t\tthis.initSliderStyles();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: function() {\n\t\tif (this._nf) {\n\t\t\tdelete this._nf;\n\t\t}\n\t\tProgressBar.prototype.destroy.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function() {\n\t\tProgressBar.prototype.rendered.apply(this, arguments);\n\t\tthis.drawToCanvas(this.popupColor);\n\t\tthis._setValue(this.value);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitSliderStyles: function() {\n\t\tthis.updatePopupLabelColor();\n\t\tthis.updatePopupHeight();\n\t\tthis.updatePopupOffset();\n\t\tthis.popupWidthChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function() {\n\t\tthis.addRemoveClass('disabled', this.disabled);\n\t\tthis.$.knob.addRemoveClass('disabled', this.disabled);\n\t\tthis.setTappable(!this.disabled);\n\t\tif (this.disabled) {\n\t\t\tthis.hideKnobStatus();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tknobClassesChanged: function(was) {\n\t\tthis.$.knob.removeClass(was);\n\t\tthis.$.knob.addClass(this.knobClasses);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpopupLabelClassesChanged: function(was) {\n\t\tthis.$.popupLabel.removeClass(was);\n\t\tthis.$.popupLabel.addClass(this.popupLabelClasses);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttapAreaClassesChanged: function(was) {\n\t\tthis.$.tapArea.removeClass(was);\n\t\tthis.$.tapArea.addClass(this.tapAreaClasses);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePopupOffset: function() {\n\t\t// console.log(\"updatePopupOffset:\", this.getPopupHeight(), this.getPopupOffset(), ri.scale(this.getPopupHeight() + this.getPopupOffset() + 5));\n\t\tthis.$.popup.applyStyle('top', dom.unit(-(ri.scale(this.getPopupHeight() + this.getPopupOffset() + 5)), 'rem'));\n\t},\n\n\t/**\n\t* Updates popup offset.\n\t*\n\t* @private\n\t*/\n\tpopupOffsetChanged: function() {\n\t\tthis.updatePopupOffset();\n\t\tthis.drawToCanvas(this.popupColor);\n\t},\n\n\t/**\n\t* Updates popup width.\n\t*\n\t* @private\n\t*/\n\tpopupWidthChanged: function() {\n\t\tif (this.popupWidth != 'auto') {\n\t\t\tthis.$.popupLabel.applyStyle('width', dom.unit( this.getPopupWidth() - (this.popupLeftCanvasWidth + this.popupRightCanvasWidth) , 'rem'));\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePopupHeight: function() {\n\t\tvar h = this.getPopupHeight(),\n\t\t\thRem = ri.scale(h);\n\n\t\tthis.$.drawingLeft.setAttribute('height', hRem);\n\t\tthis.$.drawingRight.setAttribute('height', hRem);\n\t\tthis.$.popupLabel.applyStyle('height', dom.unit(ri.scale(h - 7), 'rem'));\n\t\tthis.$.popup.applyStyle('height', dom.unit(ri.scale(h), 'rem'));\n\t\tthis.$.popup.applyStyle('line-height', dom.unit(ri.scale(h - 6), 'rem'));\n\t},\n\n\t/**\n\t* Updates popup height.\n\t*\n\t* @private\n\t*/\n\tpopupHeightChanged: function() {\n\t\tif (this.getPopupHeight() >= 72) {\n\t\t\tlog.warn('This popupHeight API is designed for under 72 pixels.');\n\t\t}\n\n\t\tthis.updatePopupHeight();\n\t\tthis.popupOffsetChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePopupLabelColor: function() {\n\t\tthis.$.popupLabel.applyStyle('background-color', this.popupColor);\n\t},\n\n\t/**\n\t* Updates popup color.\n\t*\n\t* @private\n\t*/\n\tpopupColorChanged: function() {\n\t\tthis.drawToCanvas(this.popupColor);\n\t\tthis.updatePopupLabelColor();\n\t},\n\n\t/**\n\t* Updates popup content.\n\t*\n\t* @private\n\t*/\n\tpopupContentChanged: function() {\n\t\tvar content = this.getPopupContent();\n\t\tthis._popupContent = this.get('uppercase') ? util.toUpperCase(content) : content;\n\t\tif (this._popupContent !== null) {\n\t\t\tthis.$.popupLabel.setContent(this._popupContent);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuppercaseChanged: function() {\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// popupContentUpperCase is fully deprecated and removed.\n\t\tif (this.popupContentUpperCase != this.uppercase) this.popupContentUpperCase = this.uppercase;\n\t\tthis.popupContentChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpopupContentUpperCaseChanged: function() {\n\t\tif (this.uppercase != this.popupContentUpperCase) this.uppercase = this.popupContentUpperCase;\n\t\tthis.uppercaseChanged();\n\t},\n\n\t/**\n\t* Slider will snap to multiples of this value.\n\t*\n\t* @private\n\t*/\n\tcalcIncrement: function(val) {\n\t\treturn (Math.round(val / this.increment) * this.increment);\n\t},\n\n\t/**\n\t* Called only when [constrainToBgProgress]{@link moon.Slider#constrainToBgProgress} is\n\t* `true`.\n\t*\n\t* @private\n\t*/\n\tcalcConstrainedIncrement: function(val) {\n\t\treturn (Math.floor(val / this.increment) * this.increment);\n\t},\n\n\t/**\n\t* Initializes [value]{@link moon.Slider#value} at creation time.\n\t*\n\t* @private\n\t*/\n\tinitValue: function() {\n\t\tif (this.constrainToBgProgress) {\n\t\t\tthis.value = this.clampValue(this.min, this.bgProgress, this.value);\n\t\t\tthis.value = (this.increment) ? this.calcConstrainedIncrement(this.value) : this.value;\n\t\t}\n\n\t\tthis.updateKnobPosition(this.getValue());\n\n\t\tif (this.lockBar) {\n\t\t\tthis.setProgress(this.getValue());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged : function(was, is){\n\t\tif (!this.dragging) {\n\t\t\tvar allowAnimation = this.constrainToBgProgress && is <= this.bgProgress || !this.constrainToBgProgress;\n\t\t\tif (this.constrainToBgProgress) {\n\t\t\t\tis = this.clampValue(this.min, this.bgProgress, is); // Moved from animatorStep\n\t\t\t\tis = (this.increment) ? this.calcConstrainedIncrement(is) : is;\n\t\t\t}\n\t\t\tif (this.animate && allowAnimation) {\n\t\t\t\tthis.animateTo(was, is);\n\t\t\t} else {\n\t\t\t\tthis._setValue(is);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tminChanged: function (was, is) {\n\t\tthis.initValue();\n\t\tthis.progressChanged();\n\t\tthis.bgProgressChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxChanged: function (was, is) {\n\t\tthis.initValue();\n\t\tthis.progressChanged();\n\t\tthis.bgProgressChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_setValue: function(val) {\n\t\tvar v = this.clampValue(this.min, this.max, val);\n\n\t\tthis.value = v;\n\t\tthis.updateKnobPosition(v);\n\n\t\tif (this.lockBar) {\n\t\t\tthis.setProgress(this.value);\n\t\t}\n\n\t\tthis.sendChangeEvent({value: this.getValue()});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetValue: function() {\n\t\treturn (this.animatingTo !== null) ? this.animatingTo : this.value;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateKnobPosition: function(val) {\n\t\tvar percent = this.calcPercent(val),\n\t\t\tknobValue = (this.showPercentage && this.popupContent === null) ? percent : val\n\t\t;\n\n\t\tthis.$.knob.applyStyle('left', percent + '%');\n\t\tthis.$.popup.addRemoveClass('moon-slider-popup-flip-h', percent > 50);\n\t\tthis.$.popupLabel.addRemoveClass('moon-slider-popup-flip-h', percent > 50);\n\n\t\tthis.updatePopupLabel(knobValue);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePopupLabel: function(val) {\n\t\tvar label = this._popupContent || this.calcPopupLabel(val);\n\t\tthis.$.popupLabel.setContent(label);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcPopupLabel: function(val) {\n\t\tif (this.showPercentage) {\n\t\t\tif (typeof ilib !== 'undefined') {\n\t\t\t\tval = this._nf.format(Math.round(val));\n\t\t\t} else {\n\t\t\t\tval = Math.round(val) + '%';\n\t\t\t}\n\t\t}\n\t\treturn val;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcKnobPosition: function(e) {\n\t\tvar x = e.clientX - this.hasNode().getBoundingClientRect().left,\n\t\t\tpos = (x / this.getBounds().width) * (this.max - this.min) + this.min;\n\t\treturn pos;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragstart: function(sender, e) {\n\t\tif (this.disabled) {\n\t\t\treturn; // return nothing\n\t\t}\n\t\tif (e.horizontal) {\n\t\t\te.preventDefault();\n\t\t\tthis.dragging = true;\n\t\t\tSpotlight.freeze();\n\t\t\tthis.$.knob.addClass('active');\n\t\t\tthis.showKnobStatus();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrag: function(sender, e) {\n\t\tif (this.dragging) {\n\t\t\tvar v = this.calcKnobPosition(e), ev;\n\n\t\t\tif (this.constrainToBgProgress === true) {\n\t\t\t\tv = (this.increment) ? this.calcConstrainedIncrement(v) : v;\n\t\t\t\tev = this.bgProgress + (v-this.bgProgress)*0.4;\n\t\t\t\tv = this.clampValue(this.min, this.bgProgress, v);\n\t\t\t\tthis.elasticFrom = (this.elasticEffect === false || this.bgProgress > v) ? v : ev;\n\t\t\t\tthis.elasticTo = v;\n\t\t\t} else {\n\t\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\n\t\t\t\tv = this.clampValue(this.min, this.max, v);\n\t\t\t\tthis.elasticFrom = this.elasticTo = v;\n\t\t\t}\n\n\t\t\tthis.updateKnobPosition(this.elasticFrom);\n\t\t\tthis.set('value',this.elasticFrom);\n\n\t\t\tif (this.lockBar) {\n\t\t\t\tthis.setProgress(v);\n\t\t\t}\n\n\t\t\tthis.sendChangingEvent({value: v});\n\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragfinish: function(sender, e) {\n\t\tif (this.disabled) {\n\t\t\treturn; // return nothing\n\t\t}\n\n\t\tvar v = this.elasticTo;\n\t\tif (this.constrainToBgProgress === true) {\n\t\t\tv = (this.increment) ? this.calcConstrainedIncrement(v) : v;\n\t\t} else {\n\t\t\tv = this.calcKnobPosition(e);\n\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\n\t\t\tv = this.clampValue(this.min, this.max, v);\n\t\t}\n\n\t\tthis.dragging = false;\n\t\tSpotlight.unfreeze();\n\t\tthis.set('value',v);\n\t\tthis.sendChangeEvent({value: this.getValue()});\n\t\te.preventTap();\n\t\tthis.$.knob.removeClass('active');\n\t\tthis.hideKnobStatus();\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function(sender, e) {\n\t\tif (this.tappable && !this.disabled) {\n\t\t\tvar v = this.calcKnobPosition(e);\n\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\n\t\t\tv = (this.constrainToBgProgress && v>this.bgProgress) ? this.bgProgress : v;\n\t\t\tthis.set('value',v);\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimatorStep: function(sender) {\n\t\tvar\tv = sender.value;\n\n\t\tthis.updateKnobPosition(v);\n\n\t\tif (this.lockBar) {\n\t\t\tthis.setProgress(v);\n\t\t}\n\n\t\tthis.sendChangingEvent({value: v});\n\t\treturn true;\n\t},\n\n\t/**\n\t* @fires moon.Slider#onAnimateFinish\n\t* @private\n\t*/\n\tanimatorComplete: function(sender) {\n\t\tthis._setValue(sender.value);\n\t\tthis.animatingTo = null;\n\t\tthis.doAnimateFinish(sender);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotFocused: function(sender, e) {\n\t\tif (e.originator === this) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotSelect: function() {\n\t\tthis.selected = !this.selected;\n\t\tif (!this.noPopup) {\n\t\t\tthis.$.popup.setShowing(this.selected);\n\t\t\tthis.updateKnobPosition(this.getValue());\n\t\t}\n\t\tthis.$.knob.addRemoveClass('spotselect', this.selected);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotBlur: function() {\n\t\tif (!this.dragging) {\n\t\t\tif (this.$.knob) {\n\t\t\t\tthis.$.knob.removeClass('spotselect');\n\t\t\t}\n\t\t\tif (this.$.popup) {\n\t\t\t\tthis.$.popup.hide();\n\t\t\t}\n\t\t\tthis.selected = false;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotLeft: function(sender, e) {\n\t\tif (this.selected) {\n\t\t\t// If in the process of animating, work from the previously set value\n\t\t\tvar v = this.getValue() - (this.increment || 1);\n\n\t\t\tthis.set('value',v);\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotRight: function(sender, e) {\n\t\tif (this.selected) {\n\t\t\tvar v = this.getValue() + (this.increment || 1);\n\n\t\t\tthis.set('value',v);\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowKnobStatus: function(sender, e) {\n\t\tif ((!this.disabled) && (!this.noPopup)) {\n\t\t\tthis.$.popup.show();\n\t\t\tthis.updateKnobPosition(this.getValue());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thideKnobStatus: function(sender, e) {\n\t\tif (!this.noPopup) {\n\t\t\tthis.$.popup.hide();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawToCanvas: function(bgColor) {\n\t\tbgColor = bgColor  || dom.getComputedStyleValue(this.$.knob.hasNode(), 'background-color');\n\t\tvar h = ri.scale( this.getPopupHeight()+1 ), // height total\n\t\t\thb = h - ri.scale(8), // height bubble\n\t\t\thbc = (hb)/2, // height of bubble's center\n\t\t\twre = ri.scale(26), // width's edge\n\t\t\tr = hbc, // radius is half the bubble height\n\t\t\tbcr = ri.scale(50), // bottom curve radius 50\n\t\t\tbcy = hb + bcr, //calculate the height of the center of the circle plus the radius to get the y coordinate of the circle to draw the bottom irregular arc\n\t\t\tlw = 1, // line width that will be tucked under the neighboring dom element's edge\n\n\t\t\tctxLeft = this.$.drawingLeft.hasNode().getContext('2d'),\n\t\t\tctxRight = this.$.drawingRight.hasNode().getContext('2d');\n\n\t\tthis.$.drawingLeft.setAttribute('width', ri.scale( this.popupLeftCanvasWidth) );\n\t\tthis.$.drawingRight.setAttribute('width', ri.scale( this.popupRightCanvasWidth) );\n\n\t\t// Set styles. Default color is knob's color\n\t\tctxLeft.fillStyle = bgColor;\n\t\t// Draw shape with arrow on left\n\t\tctxLeft.moveTo(0, h);\n \t\t// arc(x, y, radius, startAngle, endAngle, counterClockwise);\n\t\tctxLeft.arc(wre, bcy, bcr, 1.35 * Math.PI, 1.485 * Math.PI, false);\n\t\tctxLeft.lineTo(wre, hb);\n\t\tctxLeft.lineTo(wre, 0);\n\t\tctxLeft.arcTo(0, 0, 0, hbc, r);\n\t\tctxLeft.lineTo(0, h);\n\t\tctxLeft.fill();\n\t\t// Add a spacer line\n\t\tctxLeft.beginPath();\n\t\tctxLeft.lineWidth = lw+1;\n\t\tctxLeft.strokeStyle = bgColor;\n\t\tctxLeft.moveTo(wre+lw, 0);\n\t\tctxLeft.lineTo(wre+lw, hb);\n\t\tctxLeft.stroke();\n\n\t\t// Set styles. Default color is knob's color\n\t\tctxRight.fillStyle = bgColor;\n\t\t// Draw shape with arrow on right\n\t\tctxRight.moveTo(lw, hb);\n\t\tctxRight.arcTo(wre+lw, hb, wre+lw, hbc, r);\n\n\t\tctxRight.arcTo(wre+lw, 0, lw, 0, r);\n\t\tctxRight.lineTo(0, 0);\n\t\tctxRight.fill();\n\t\t// Add a spacer line\n\t\tctxRight.beginPath();\n\t\tctxRight.lineWidth = lw+1;\n\t\tctxRight.strokeStyle = bgColor;\n\t\tctxRight.moveTo(0, 0);\n\t\tctxRight.lineTo(0, hb);\n\t\tctxRight.stroke();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tchangeDelayMS: 50,\n\n\t/**\n\t* @fires moon.Slider#onChange\n\t* @private\n\t*/\n\tsendChangeEvent: function(data) {\n\t\tthis.throttleJob('sliderChange', function() { this.doChange(data); }, this.changeDelayMS);\n\t},\n\n\t/**\n\t* @fires moon.Slider#onChanging\n\t* @private\n\t*/\n\tsendChangingEvent: function(data) {\n\t\tthis.throttleJob('sliderChanging', function() { this.doChanging(data); }, this.changeDelayMS);\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils'),\n\tplatform = require('../platform');\n\nvar\n\tControl = require('../Control'),\n\tScrollStrategy = require('../ScrollStrategy'),\n\tTouchScrollStrategy = require('../TouchScrollStrategy'),\n\tTranslateScrollStrategy = require('../TranslateScrollStrategy');\n\n/**\n* An [object]{@glossary Object} representing the scroll boundaries.\n*\n* @typedef {Object} enyo.Scroller~BoundaryObject\n* @property {Number} left - The left scroll position.\n* @property {Number} top - The top scroll position.\n* @property {Number} maxLeft - Maximum value for the left scroll position (minimum is always 0).\n* @property {Number} maxTop - Maximum value for the top scroll position (minimum is always 0).\n* @property {Number} clientHeight - The vertical size of the [scroller]{@link enyo.Scroller} on\n*\tscreen.\n* @property {Number} clientWidth - The horizontal size of the [scroller]{@link enyo.Scroller} on\n*\tscreen.\n* @property {Number} width - The horizontal size of the full area of the scrolled region.\n* @property {Number} height - The vertical size of the full area of the scrolled region.\n* @property {Number} xDir - Either `1`, `-1`, or `0`, indicating positive movement along the\n*\tx-axis, negative movement, or no movement, respectively.\n* @property {Number} yDir - Either `1`, `-1`, or `0`, indicating positive movement along the\n*\ty-axis, negative movement, or no movement, respectively.\n*/\n\n\n/**\n* An [object]{@glossary Object} representing the overscroll boundaries.\n*\n* @typedef {Object} enyo.Scroller~OverscrollBoundaryObject\n* @property {Number} overleft - The left overscroll position.\n* @property {Number} overtop - The top overscroll position.\n*/\n\n/**\n* The extended {@glossary event} [object]{@glossary Object} that is provided \n* when a scroll event is fired.\n*\n* @typedef {Object} enyo.Scroller~ScrollEvent\n* @property {enyo.Scroller~BoundaryObject} bounds Current values of scroller bounds.\n*/\n\n/**\n* Fires when a scrolling action starts.\n*\n* @event enyo.Scroller#onScrollStart\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @public\n*/\n\n/**\n* Fires while a scrolling action is in progress.\n*\n* @event enyo.Scroller#onScroll\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @public\n*/\n\n/**\n* Fires when a scrolling action stops.\n*\n* @event enyo.Scroller#onScrollStop\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @public\n*/\n\n/**\n* {@link enyo.Scroller} is a scroller suitable for use in both desktop and mobile\n* applications.\n* \n* In some mobile environments, a default scrolling solution is not implemented for\n* DOM elements. In such cases, `enyo.Scroller` implements a touch-based scrolling\n* solution, which may be opted into either globally (by setting\n* [touchScrolling]{@link enyo.Scroller#touchScrolling} to `true`) or on a\n* per-instance basis (by specifying a [strategyKind]{@link enyo.Scroller#strategyKind}\n* of `\"TouchScrollStrategy\"`).\n* \n* For more information, see the documentation on\n* [Scrollers]{@linkplain $dev-guide/building-apps/layout/scrollers.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Scroller\n* @public\n*/\nvar Scroller = module.exports = kind(\n\t/** @lends enyo.Scroller.prototype */ {\n\t\n\tname: 'enyo.Scroller',\n\t\n\tkind: Control,\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Scroller.prototype */ {\n\n\t\t/**\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\thorizontal: 'default',\n\n\t\t/**\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\tvertical: 'default',\n\n\t\t/**\n\t\t* The vertical scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollTop: 0,\n\n\t\t/**\n\t\t* The horizontal scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollLeft: 0,\n\n\t\t/**\n\t\t* Maximum height of the scroll content.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default null\n\t\t* @memberof enyo.Scroller.prototype\n\t\t* @public\n\t\t*/\n\t\tmaxHeight: null,\n\n\t\t/**\n\t\t* Set to `true` to make this [scroller]{@link enyo.Scroller} select a \n\t\t* platform-appropriate touch-based scrolling strategy. Note that if you specify a value \n\t\t* for [strategyKind]{@link enyo.Scroller#strategyKind}, that will take precedence over\n\t\t* this setting.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\ttouch: false,\n\t\t/**\n\t\t* Specifies a type of scrolling. The [scroller]{@link enyo.Scroller} will attempt to \n\t\t* automatically select a strategy compatible with the runtime environment. Alternatively,\n\t\t* you may choose to use a specific strategy:\n\t\t* \n\t\t* - [ScrollStrategy]{@link enyo.ScrollStrategy} is the default and implements no \n\t\t*\tscrolling, relying instead on the environment to scroll properly.\n\t\t* - [TouchScrollStrategy]{@link enyo.TouchScrollStrategy} implements a touch scrolling \n\t\t*\tmechanism.\n\t\t* - [TranslateScrollStrategy]{@link enyo.TranslateScrollStrategy} implements a touch \n\t\t*\tscrolling mechanism using translations; it is currently recommended only for Android\n\t\t*\t3 and 4, and Windows Phone 8.\n\t\t* - [TransitionScrollStrategy]{@link enyo.TransitionScrollStrategy} implements a touch \n\t\t*\tscrolling mechanism using CSS transitions; it is currently recommended only for iOS \n\t\t*\t5 and later.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'ScrollStrategy'\n\t\t* @public\n\t\t*/\n\t\tstrategyKind: ScrollStrategy,\n\n\t\t/**\n\t\t* Set to `true` to display a scroll thumb in touch [scrollers]{@link enyo.Scroller}.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tthumb: true,\n\n\t\t/**\n\t\t* If `true`, mouse wheel may be used to move the [scroller]{@link enyo.Scroller}.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuseMouseWheel: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonScrollStart: '',\n\t\tonScroll: '',\n\t\tonScrollStop: ''\n\t},\n\n\t/**\n\t* If `true`, enables touch scrolling globally.\n\t*\n\t* @name touchScrolling\n\t* @type {Boolean}\n\t* @default undefined\n\t* @memberof enyo.Scroller.prototype\n\t* @public\n\t*/\n\n\t/**\n\t* If `true` and this is a touch [scroller]{@link enyo.Scroller}, the scroller\n\t* will overscroll and bounce back at the edges.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\ttouchOverscroll: true,\n\n\t/**\n\t* If `true`, the [scroller]{@link enyo.Scroller} will not propagate `dragstart` \n\t* [events]{@glossary event} that cause it to start scrolling.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tpreventDragPropagation: true,\n\n\t/**\n\t* If `true`, the [scroller]{@link enyo.Scroller} will not propagate scroll \n\t* [events]{@glossary event}.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tpreventScrollPropagation: true,\n\n\t/**\n\t* Needed to allow global mods to `enyo.Scroller.touchScrolling`.\n\t* \n\t* @private\n\t*/\n\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonscroll: 'domScroll',\n\t\tonScrollStart: 'scrollStart',\n\t\tonScroll: 'scroll',\n\t\tonScrollStop: 'scrollStop'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-scroller',\n\n\t/**\n\t* @private\n\t*/\n\tstatics: {\n\t\tosInfo: [\n\t\t\t{os: 'android', version: 3},\n\t\t\t{os: 'androidChrome', version: 18},\n\t\t\t{os: 'androidFirefox', version: 16},\n\t\t\t{os: 'firefoxOS', version: 16},\n\t\t\t{os: 'ios', version: 5},\n\t\t\t{os: 'webos', version: 1e9},\n\t\t\t{os: 'blackberry', version:1e9},\n\t\t\t{os: 'tizen', version: 2}\n\t\t],\n\t\t//* Returns true if platform should have touch events.\n\t\thasTouchScrolling: function() {\n\t\t\tfor (var i=0, t; (t=this.osInfo[i]); i++) {\n\t\t\t\tif (platform[t.os]) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// special detection for IE10+ on touch devices\n\t\t\tif ((platform.ie >= 10 || platform.windowsPhone >= 8) && platform.touch) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t\tReturns true if the platform has native div scrollers (desktop\n\t\t\tbrowsers always have them).\n\t\t*/\n\t\thasNativeScrolling: function() {\n\t\t\tfor (var i=0, t; (t=this.osInfo[i]); i++) {\n\t\t\t\tif (platform[t.os] < t.version) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tgetTouchStrategy: function() {\n\t\t\treturn (platform.androidChrome >= 27) || (platform.android >= 3) || (platform.windowsPhone === 8) || (platform.webos >= 4)\n\t\t\t\t? TranslateScrollStrategy\n\t\t\t\t: TouchScrollStrategy;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontrolParentName: 'strategy',\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.horizontalChanged();\n\t\t\tthis.verticalChanged();\n\t\t\tthis.useMouseWheelChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\timportProps: kind.inherit(function (sup) {\n\t\treturn function(inProps) {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// allow global overriding of strategy kind\n\t\t\tif (inProps && inProps.strategyKind === undefined && (Scroller.touchScrolling || this.touch)) {\n\t\t\t\tthis.strategyKind = Scroller.getTouchStrategy();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.strategyKindChanged();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.syncStrategy();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tsyncStrategy: function() {\n\t\tthis.$.strategy.setScrollLeft(this.scrollLeft);\n\t\tthis.$.strategy.setScrollTop(this.scrollTop);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstrategyKindChanged: function () {\n\t\tif (this.$.strategy) {\n\t\t\tthis.$.strategy.destroy();\n\t\t\tthis.controlParent = null;\n\t\t}\n\t\t// note: createComponents automatically updates controlParent.\n\t\tthis.createStrategy();\n\t\tif (this.hasNode()) {\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateStrategy: function () {\n\t\tthis.createComponents([{name: 'strategy', maxHeight: this.maxHeight,\n\t\t\tkind: this.strategyKind, thumb: this.thumb,\n\t\t\tpreventDragPropagation: this.preventDragPropagation,\n\t\t\toverscroll:this.touchOverscroll, isChrome: true}]);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetStrategy: function () {\n\t\treturn this.$.strategy;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\tthis.$.strategy.setMaxHeight(this.maxHeight);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tshowingChanged: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.showing) {\n\t\t\t\tthis.syncStrategy();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tshowingChangedHandler: kind.inherit(function(sup) {\n\t\treturn function(sender, event) {\n\t\t\tif (this.showing && event.showing) {\n\t\t\t\tthis.syncStrategy();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tthumbChanged: function () {\n\t\tthis.$.strategy.setThumb(this.thumb);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thorizontalChanged: function () {\n\t\tthis.$.strategy.setHorizontal(this.horizontal);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverticalChanged: function () {\n\t\tthis.$.strategy.setVertical(this.vertical);\n\t},\n\n\t// FIXME: these properties are virtual; property changed methods are fired only if\n\t// property value changes, not if getter changes.\n\t\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollLeft: function (left) {\n\t\tthis.$.strategy.setScrollLeft(left);\n\t},\n\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollTop: function (top) {\n\t\tthis.$.strategy.setScrollTop(top);\n\t},\n\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tgetScrollLeft: function () {\n\t\t// sync our internal property\n\t\tthis.scrollLeft = this.$.strategy.getScrollLeft();\n\t\treturn this.scrollLeft;\n\t},\n\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @public\n\t*/\n\tgetScrollTop: function () {\n\t\t// sync our internal property\n\t\tthis.scrollTop = this.$.strategy.getScrollTop();\n\t\treturn this.scrollTop;\n\t},\n\n\t/**\n\t* Retrieves the scroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t* \n\t* @returns {enyo.Scroller~BoundaryObject} An [object]{@glossary Object} describing the \n\t*\tscroll boundaries.\n\t* @public\n\t*/\n\tgetScrollBounds: function () {\n\t\tvar bounds  = this.$.strategy.getScrollBounds();\n\t\tif (\n\t\t\t(bounds.xDir !== -1 && bounds.xDir !== 0 && bounds.xDir !== 1) ||\n\t\t\t(bounds.yDir !== -1 && bounds.yDir !== 0 && bounds.yDir !== 1)\n\t\t) {\n\t\t\tthis.decorateBounds(bounds);\n\t\t}\n\t\t// keep our properties synchronized always and without extra calls\n\t\tthis.scrollTop  = bounds.top;\n\t\tthis.scrollLeft = bounds.left;\n\t\treturn bounds;\n\t},\n\n\t/** \n\t* Trigger a remeasurement of the scroller's metrics (specifically, the\n\t* size of its viewport, the size of its contents and the difference between\n\t* the two, which determines the extent to which the scroller may scroll).\n\t* \n\t* You should generally not need to call this from application code, as the\n\t* scroller usually remeasures automatically whenever needed. This method\n\t* exists primarily to support an internal use case for\n\t* [enyo.DataList]{@link enyo.DataList}.\n\t*\n\t* @public\n\t*/\n\tremeasure: function() {\n\t\tvar s = this.$.strategy;\n\t\tif (s.remeasure) s.remeasure();\n\t},\n\n\t/**\n\t* Scrolls the given [control]{@link enyo.Control} into view.\n\t*\n\t* @param {enyo.Control} ctl - The control to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top\n\t* of the scroller.\n\t* @public\n\t*/\n\tscrollIntoView: function (ctl, alignWithTop) {\n\t\tthis.$.strategy.scrollIntoView(ctl, alignWithTop);\n\t},\n\n\t/** \n\t* Scrolls to the specified position.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @public\n\t*/\n\tscrollTo: function (x, y) {\n\t\tthis.$.strategy.scrollTo(x, y);\n\t},\n\n\t/**\n\t* Ensures that the given [control]{@link enyo.Control} is visible in the \n\t* [scroller's]{@link enyo.Scroller} viewport. Unlike \n\t* [scrollIntoView()]{@link enyo.Scroller#scrollIntoView}, which uses DOM's \n\t* [scrollIntoView()]{@glossary scrollIntoView}, this only affects the current \n\t* scroller.\n\t*\n\t* @param {enyo.Control} ctl - The [control]{@link enyo.Control} to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollToControl: function (ctl, alignWithTop) {\n\t\tthis.scrollToNode(ctl.hasNode(), alignWithTop);\n\t},\n\n\t/** \n\t* Ensures that the given node is visible in the [scroller's]{@link enyo.Scroller} viewport.\n\t*\n\t* @param {Node} node - The node to make visible in the [scroller's]{@link enyo.Scroller}\n\t*\tviewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollToNode: function (node, alignWithTop) {\n\t\tthis.$.strategy.scrollToNode(node, alignWithTop);\n\t},\n\n\t/** \n\t* Stops the scroller if it is currently animating.\n\t* \n\t* @public\n\t*/\n\tstop: function() {\n\t\tif (typeof this.$.strategy.stop == 'function') {\n\t\t\tthis.$.strategy.stop(true);\n\t\t}\n\t},\n\n\t/** \n\t* Adds current values of `getScrollBounds()` to {@glossary event}.\n\t* \n\t* @private\n\t*/\n\tdecorateScrollEvent: function (e) {\n\t\tvar bounds = e.scrollBounds = e.scrollBounds || this.$.strategy._getScrollBounds();\n\t\t// in the off chance that the event already had scrollBounds then we need\n\t\t// to make sure they are decorated\n\t\tif (\n\t\t\t(bounds.xDir !== -1 && bounds.xDir !== 0 && bounds.xDir !== 1) ||\n\t\t\t(bounds.yDir !== -1 && bounds.yDir !== 0 && bounds.yDir !== 1)\n\t\t) {\n\t\t\tthis.decorateBounds(bounds);\n\t\t}\n\t\t// keep our properties synchronized always and without extra calls\n\t\tthis.scrollTop  = bounds.top;\n\t\tthis.scrollLeft = bounds.left;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdecorateBounds: function (bounds) {\n\t\tvar x       = this.scrollLeft - bounds.left,\n\t\t\ty       = this.scrollTop  - bounds.top;\n\t\tbounds.xDir = (x < 0? 1: x > 0? -1: 0);\n\t\tbounds.yDir = (y < 0? 1: y > 0? -1: 0);\n\t\t// we update our current bounds properties so we don't have to unnecessarily\n\t\t// call getScrollTop/getScrollLeft because we already have the current data\n\t\tthis.scrollLeft = bounds.left;\n\t\tthis.scrollTop  = bounds.top;\n\t},\n\n\t/** \n\t* Normalizes scroll {@glossary event} to `onScroll`.\n\t*\n\t* @fires enyo.Scroller#onScroll\n\t* @private\n\t*/\n\tdomScroll: function (sender, e) {\n\t\t// if a scroll event originated here, pass it to our strategy to handle\n\t\tif (this.$.strategy.domScroll && e.originator == this) {\n\t\t\tthis.$.strategy.domScroll(sender, e);\n\t\t}\n\t\tthis.decorateScrollEvent(e);\n\t\tthis.doScroll(e);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @returns {Boolean} `true` if the current scroll {@glossary event} should\n\t* be stopped; `false` if it should be allowed to propagate.\n\t* @private\n\t*/\n\tshouldStopScrollEvent: function (e) {\n\t\treturn (this.preventScrollPropagation &&\n\t\t\te.originator.owner != this.$.strategy);\n\t},\n\n\t/**\n\t* Calls [shouldStopScrollEvent()]{@link enyo.Scroller#shouldStopScrollEvent} to\n\t* determine whether current scroll {@glossary event} should be stopped.\n\t*\n\t* @private\n\t*/\n\tscrollStart: function (sender, e) {\n\t\tif (!this.shouldStopScrollEvent(e)) {\n\t\t\tthis.decorateScrollEvent(e);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/** \n\t* Either propagates or stops the current scroll {@glossary event}.\n\t*\n\t* @private\n\t*/\n\tscroll: function (sender, e) {\n\t\t// note: scroll event can be native dom or generated.\n\t\tvar stop;\n\t\tif (e.dispatchTarget) {\n\t\t\t// allow a dom event if it orignated with this scroller or its strategy\n\t\t\tstop = this.preventScrollPropagation && !(e.originator == this ||\n\t\t\t\te.originator.owner == this.$.strategy);\n\t\t} else {\n\t\t\tstop = this.shouldStopScrollEvent(e);\n\t\t}\n\t\tif (!stop) {\n\t\t\tthis.decorateScrollEvent(e);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* Calls [shouldStopScrollEvent()]{@link enyo.Scroller#shouldStopScrollEvent} to\n\t* determine whether current scroll {@glossary event} should be stopped.\n\t*\n\t* @private\n\t*/\n\tscrollStop: function (sender, e) {\n\t\tif (!this.shouldStopScrollEvent(e)) {\n\t\t\tthis.decorateScrollEvent(e);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* Scrolls to the top of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToTop: function () {\n\t\tthis.setScrollTop(0);\n\t},\n\n\t/**\n\t* Scrolls to the bottom of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToBottom: function () {\n\t\tthis.setScrollTop(this.getScrollBounds().maxTop);\n\t},\n\n\t/**\n\t* Scrolls to the right edge of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToRight: function () {\n\t\tthis.setScrollLeft(this.getScrollBounds().maxLeft);\n\t},\n\n\t/**\n\t* Scrolls to the left edge of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToLeft: function () {\n\t\tthis.setScrollLeft(0);\n\t},\n\n\t/**\n\t* Ensures scroll position is in bounds.\n\t*\n\t* @public\n\t*/\n\tstabilize: function () {\n\t\tvar s = this.getStrategy();\n\t\tif (s.stabilize) {\n\t\t\ts.stabilize();\n\t\t}\n\t},\n\n\t/**\n\t* Sends the [useMouseWheel]{@link enyo.Scroller#useMouseWheel} property to the scroll \n\t* strategy.\n\t*\n\t* @private\n\t*/\n\tuseMouseWheelChanged: function () {\n\t\tthis.$.strategy.setUseMouseWheel(this.useMouseWheel);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresize: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this.getAbsoluteShowing(true)) {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t})\n});\n\n// provide a touch scrolling solution by default when the environment is mobile\nif (Scroller.hasTouchScrolling()) {\n\tScroller.prototype.strategyKind = Scroller.getTouchStrategy();\n}","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tTable = require('../../../enyo/lib/Table'),\n\tTableRow = require('../../../enyo/lib/TableRow'),\n\tTableCell = require('../../../enyo/lib/TableCell');\n\n/**\n* {@link moon.TableCell} extends {@link enyo.TableCell}, adding Moonstone visual\n* styling.\n*\n* @class moon.TableCell\n* @extends enyo.TableCell\n* @ui\n* @public\n*/\nvar TableCell = kind(\n\t/** @lends moon.TableCell.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.TableCell',\n\n\t/**\n\t* @private\n\t*/\n\tkind: TableCell,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-table-cell'\n});\n\n/**\n* {@link moon.TableRow} extends {@link enyo.TableRow}, adding Moonstone visual\n* styling.\n*\n* @class moon.TableRow\n* @extends enyo.TableRow\n* @ui\n* @public\n*/\nvar TableRow = kind(\n\t/** @lends moon.TableRow.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.TableRow',\n\n\t/**\n\t* @private\n\t*/\n\tkind: TableRow,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-table-row',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: TableCell\n});\n\n/**\n* {@link moon.Table} extends {@link enyo.Table}, adding Moonstone visual styling.\n*\n* @class moon.Table\n* @extends enyo.Table\n* @ui\n* @public\n*/\nvar Table = module.exports = kind(\n\t/** @lends moon.Table.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Table',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Table,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-table',\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: TableRow\n});\n\nTable.Row = TableRow;\nTable.Cell = TableCell;","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tToolDecorator = require('../../../enyo/lib/ToolDecorator');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tInput = require('../Input'),\n\tRichText = require('../RichText'),\n\tTextArea = require('../TextArea');\n\n/**\n* {@link moon.InputDecorator} is a control that provides input styling. Any controls\n* in the InputDecorator will appear to be inside an area styled as an input. Usually,\n* an InputDecorator surrounds a [moon.Input]{@link moon.Input}:\n*\n* ```\n* {kind: 'moon.InputDecorator', components: [\n* \t{kind: 'moon.Input'}\n* ]}\n* ```\n*\n* Other controls, such as buttons, may be placed to the right or left of the\n* input control, e.g.:\n*\n* ```\n* {kind: 'moon.InputDecorator', components: [\n* \t{kind: 'moon.IconButton', src: 'search.png'},\n* \t{kind: 'moon.Input'},\n* \t{kind: 'moon.IconButton', src: 'cancel.png'}\n* ]}\n* ```\n*\n* Note that the InputDecorator fits around the content inside it. If the\n* decorator is sized, then its contents will likely need to be sized as well.\n*\n* ```\n* {kind: 'moon.InputDecorator', style: 'width: 500px;', components: [\n* \t{kind: 'moon.Input', style: 'width: 100%;'}\n* ]}\n* ```\n*\n* @class moon.InputDecorator\n* @extends enyo.ToolDecorator\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.InputDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.InputDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ToolDecorator,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'label',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tspotlightDecorate: false,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonDisabledChange  : 'disabledChangeHandler',\n\t\tonfocus           : 'focusHandler',\n\t\tonblur            : 'blurHandler',\n\t\tonSpotlightFocus  : 'spotlightFocusHandler',\n\t\tonSpotlightSelect : 'spotlightSelectHandler',\n\t\tonSpotlightBlur   : 'spotlightBlurHandler',\n\t\tonSpotlightLeft   : 'spotlightLeftHandler',\n\t\tonSpotlightRight  : 'spotlightRightHandler',\n\t\tonSpotlightUp     : 'spotlightUpHandler',\n\t\tonSpotlightDown   : 'spotlightDownHandler'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_oInputControl: null,\n\n\t/**\n\t* Returns boolean indicating whether passed-in control is an input field.\n\t*\n\t* @private\n\t*/\n\t_isInput: function (oControl) {\n\t\treturn (\n\t\t\toControl instanceof Input\t\t||\n\t\t\toControl instanceof RichText\t||\n\t\t\toControl instanceof TextArea\n\t\t);\n\t},\n\n\t/**\n\t* Traverses tree of children to find input control.\n\t*\n\t* @private\n\t*/\n\t_findInputControl: function (oControl) {\n\t\toControl = oControl || this;\n\n\t\tvar oInputControl = null;\n\n\t\tfor (var n=0; n<oControl.children.length; n++) {\n\t\t\tif (this._isInput(oControl.children[n])) {\n\t\t\t\treturn oControl.children[n];\n\t\t\t}\n\t\t\tif ((oInputControl = this._findInputControl(oControl.children[n]))) {\n\t\t\t\treturn oInputControl;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tToolDecorator.prototype.create.apply(this, arguments);\n\t\tthis.updateFocus(false);\n\t\tthis._oInputControl = this._findInputControl();\n\t\tif (this._oInputControl instanceof Input) {\n\t\t\tthis.addClass('moon-divider-text moon-input-decorator');\n\t\t}\n\t\tif (this._oInputControl instanceof TextArea || this._oInputControl instanceof RichText) {\n\t\t\tthis.addClass('moon-divider-text moon-textarea-decorator');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateComponent: function () {\n\t\tToolDecorator.prototype.createComponent.apply(this, arguments);\n\t\tthis._oInputControl = this._findInputControl();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateComponents: function () {\n\t\tToolDecorator.prototype.createComponents.apply(this, arguments);\n\t\tthis._oInputControl = this._findInputControl();\n\t},\n\n\t/**\n\t* Updates styling based on focus state.\n\t*\n\t* @param {Boolean} bFocus - Whether to add/remove `moon-focused` class.\n\t* @public\n\t*/\n\tupdateFocus: function (bFocus) {\n\t\tthis.focused = bFocus;\n\t\tthis.addRemoveClass('moon-focused', this.alwaysLooksFocused || this.focused);\n\t},\n\n\t/**\n\t* Retrieves the child input control.\n\t*\n\t* @returns {Object} A reference to the child input control.\n\t* @public\n\t*/\n\tgetInputControl: function () {\n\t\treturn this._oInputControl;\n\t},\n\n\t// Event handlers:\n\t/**************************************************/\n\n\t/**\n\t* @private\n\t*/\n\tfocusHandler: function (oSender, oEvent) {\n\t\tif (Spotlight.getCurrent() != this) {\n\t\t\t// Force a spot here, even when we're in pointer mode,\n\t\t\t// to ensure that clicks inside us (e.g. to position\n\t\t\t// the cursor) don't cause Spotlight to unfreeze\n\t\t\tSpotlight.spot(this, null, true);\n\t\t}\n\t\tSpotlight.freeze();\n\t\tthis.updateFocus(true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tblurHandler: function () {\n\t\tSpotlight.unfreeze();\n\t\tthis.updateFocus(false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChangeHandler: function (oSender, oEvent) {\n\t\tthis.addRemoveClass('moon-disabled', oEvent.originator.disabled);\n\t},\n\n\t// Spotlight Event handlers:\n\t/**************************************************/\n\n\t/**\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tspotlightFocusHandler: function () {\n\t\tthis.bubble('onRequestScrollIntoView');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightSelectHandler: function (oSender, oEvent) {\n\t\tvar oInput = this.getInputControl();\n\t\tif (oInput) {\n\t\t\tif (oInput.hasFocus() && oEvent) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\toInput.focus();\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightBlurHandler: function (oSender, oEvent) {\n\t\tthis.blur();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightLeftHandler: function (oSender, oEvent) {\n\t\tvar oInput = this.getInputControl();\n\t\tif (oInput && oInput.hasFocus() && oInput.left) {\n\t\t\tif (oInput.left()) {\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\n\t\t\t\treturn true;                    // Prevent onSpotlightLeft to bubble\n\t\t\t} else {\n\t\t\t\tthis.blur();\n\t\t\t\toInput.blur();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightRightHandler: function (oSender, oEvent) {\n\t\tvar oInput = this.getInputControl();\n\t\tif (oInput && oInput.hasFocus() && oInput.right) {\n\t\t\tif (oInput.right()) {\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\n\t\t\t\treturn true;                    // Prevent onSpotlightRight to bubble\n\t\t\t} else {\n\t\t\t\tthis.blur();\n\t\t\t\toInput.blur();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightUpHandler: function (oSender, oEvent) {\n\t\tvar oInput = this.getInputControl();\n\t\tif (oInput && oInput.hasFocus() && oInput.up) {\n\t\t\tif (oInput.up()) {\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\n\t\t\t\treturn true;                    // Prevent onSpotlightUp to bubble\n\t\t\t} else {\n\t\t\t\tthis.blur();\n\t\t\t\toInput.blur();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightDownHandler: function (oSender, oEvent) {\n\t\tvar oInput = this.getInputControl();\n\t\tif (oInput && oInput.hasFocus() && oInput.down) {\n\t\t\tif (oInput.down()) {\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\n\t\t\t\treturn true;                    // Prevent onSpotlightLeft to bubble\n\t\t\t} else {\n\t\t\t\tthis.blur();\n\t\t\t\toInput.blur();\n\t\t\t}\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tButton = require('../../../enyo/lib/Button');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeText = Marquee.Text;\n\n/**\n* {@link moon.Button} is an {@link enyo.Button} with Moonstone styling applied.\n* The color of the button may be customized by specifying a background color.\n*\n* For more information, see the documentation on\n* [Buttons]{@linkplain $dev-guide/building-apps/controls/buttons.html} in the\n* Enyo Developer Guide.\n*\n* @class moon.Button\n* @extends enyo.Button\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Button.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Button',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Button,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\t/**\n\t* @private\n\t* @lends moon.Button.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* A boolean parameter affecting the size of the button. If `true`, the\n\t\t* button's diameter will be set to 60px. However, the button's tap target\n\t\t* will still have a diameter of 78px, with an invisible DOM element\n\t\t* wrapping the small button to provide the larger tap zone.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tsmall: false,\n\n\t\t/**\n\t\t* A boolean parameter affecting the minimum width of the button. When `true`,\n\t\t* the minimum width will be set to 180px (or 130px if [small]{@link moon.Button#small}\n\t\t* is `true`). If `false`, the minimum width will be set to the current value of\n\t\t* `@moon-button-height` (thus forcing the button to be no smaller than a circle with\n\t\t* diameter `@moon-button-height`).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tminWidth: true,\n\n\t\t/**\n\t\t* When `true`, the content will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercase: true,\n\n\t\t/**\n\t\t* @deprecated Replaced by [uppercase]{@link moon.Button#uppercase}.\n\t\t*\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\n\t\t* an effect when explicitly set (for complete backward compatibility).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcontentUpperCase: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-large-button-text moon-button enyo-unselectable',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\n\t\t/**\n\t\t* `onSpotlightSelect` simulates `mousedown`.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tonSpotlightKeyDown\t: 'depress',\n\n\t\t/**\n\t\t* `onSpotlightKeyUp` simulates `mouseup`.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tonSpotlightKeyUp\t: 'undepress',\n\n\t\t/**\n\t\t* Also make sure we remove the pressed class if focus is removed from\n\t\t* this item before it receives a keyup.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tonSpotlightBlur\t\t: 'undepress',\n\n\t\t/**\n\t\t* The handler for `onSpotlightFocused` bubbles a `requestScrollIntoView` event.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tonSpotlightFocused\t: 'spotFocused'\n\t},\n\n\t/**\n\t* On creation, updates based on value of `this.small`.\n\t*\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tif (!(this.components && this.components.length > 0)) {\n\t\t\tthis.createComponent({name: 'client', kind: MarqueeText, isChrome: true});\n\t\t\tthis.createComponent({name: 'tapArea', kind: Control, classes: 'button-tap-area', isChrome: true});\n\t\t}\n\t\tif (this.small) this.smallChanged();\n\t\tif (this.minWidth) this.minWidthChanged();\n\t\t\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// the contentUpperCase property is fully deprecated and removed. The legacy\n\t\t// property takes precedence if it exists.\n\t\tif (this.contentUpperCase !== null) this.uppercase = this.contentUpperCase;\n\n\t\tthis.contentChanged();\n\t\tButton.prototype.initComponents.apply(this, arguments);\n\t},\n\n\t/**\n\t* Adds `pressed` CSS class.\n\t*\n\t* @private\n\t*/\n\tdepress: function (inSender, inEvent) {\n\t\tif (inEvent.keyCode === 13) {\n\t\t\tthis.addClass('pressed');\n\t\t}\n\t},\n\n\t/**\n\t* Bubbles `requestScrollIntoView` event.\n\t*\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tspotFocused: function (inSender, inEvent) {\n\t\tif (inEvent.originator === this) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t},\n\n\t/**\n\t* Removes `pressed` CSS class.\n\t*\n\t* @private\n\t*/\n\tundepress: function () {\n\t\tthis.removeClass('pressed');\n\t},\n\n\t/**\n\t* If `this.small` is `true`, `taparea` dimensions are increased.\n\t*\n\t* @private\n\t*/\n\tsmallChanged: function () {\n\t\tif (this.small) {\n\t\t\tthis.addClass('small');\n\t\t\tthis.addClass('moon-small-button-text');\n\t\t} else {\n\t\t\tthis.removeClass('small');\n\t\t\tthis.removeClass('moon-small-button-text');\n\t\t}\n\t},\n\n\t/**\n\t* Override to handle potential child components.\n\t*\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tvar content = this.getContent();\n\t\tif (this.$.client) {\n\t\t\tthis.$.client.setContent( this.get('uppercase') ? util.toUpperCase(content) : content );\n\t\t} else {\n\t\t\tButton.prototype.contentChanged.apply(this, arguments);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuppercaseChanged: function () {\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// contentUpperCase is fully deprecated and removed.\n\t\tif (this.contentUpperCase != this.uppercase) this.contentUpperCase = this.uppercase;\n\t\tthis.contentChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentUpperCaseChanged: function () {\n\t\tif (this.uppercase != this.contentUpperCase) this.uppercase = this.contentUpperCase;\n\t\tthis.uppercaseChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tminWidthChanged: function () {\n\t\tif (this.minWidth) {\n\t\t\tthis.addClass('min-width');\n\t\t} else {\n\t\t\tthis.removeClass('min-width');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function () {\n\t\tButton.prototype.showingChanged.apply(this, arguments);\n\t\tif (!this.showing && this.hasClass('pressed')) {\n\t\t\tthis.undepress();\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text,\n\tMarqueeSupport = Marquee.Support;\n\n\n/**\n* {@link moon.ChannelInfoBadge} is a simple kind used to display a badge\n* containing channel information. It is the default kind for components added\n* to {@link moon.ChannelInfo}.\n*\n* @class moon.ChannelInfoBadge\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar ChannelInfoBadge = kind(\n\t/** @lends moon.ChannelInfoBadge.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ChannelInfoBadge',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-video-badge-text moon-video-player-info-icon'\n});\n\n/**\n* {@link moon.ChannelInfo} is a control that displays channel information.  It is\n* designed to be used within the [infoComponents]{@link moon.VideoPlayer#infoComponents}\n* block of a {@link moon.VideoPlayer}.\n*\n* Example:\n* ```\n* \t{\n* \t\tkind: 'moon.ChannelInfo',\n* \t\tno: 36,\n* \t\tname: 'AMC',\n* \t\tcomponents: [\n* \t\t\t{content: '3D'},\n* \t\t\t{content: 'Live'},\n* \t\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon'}\n* \t\t]\n* \t}\n* ```\n*\n* @class moon.ChannelInfo\n* @extends enyo.Control\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ChannelInfo.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ChannelInfo',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-channelinfo',\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnSpotlight: false,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnHover: true,\n\n\t/**\n\t* @private\n\t* @lends moon.ChannelInfo.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* The channel number.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tchannelNo: '',\n\n\t\t/**\n\t\t* The name of the channel.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tchannelName: '',\n\n\t\t/**\n\t\t* When `true`, [channelNo]{@link moon.ChannelInfo#channelNo} will have locale-safe\n\t\t* uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercaseChannelNo: true,\n\n\t\t/**\n\t\t* @deprecated Replaced by [uppercaseChannelNo]{@link moon.ChannelInfo#uppercaseChannelNo}.\n\t\t*\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\n\t\t* an effect when explicitly set (for complete backward compatibility).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tchannelNoUpperCase: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: ChannelInfoBadge,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{kind: MarqueeText, name: 'channelNo', classes: 'moon-header-font moon-video-player-channel-info-no'},\n\t\t{kind: MarqueeText, name: 'channelName', classes: 'moon-video-player-channel-info-name'},\n\t\t{kind: Control, name: 'client', classes: 'moon-video-player-channel-info-badges'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: 'channelName', to: '$.channelName.content'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// the channelNoUpperCase property is fully deprecated and removed. The legacy\n\t\t// property takes precedence if it exists.\n\t\tif (this.channelNoUpperCase !== null) this.uppercaseChannelNo = this.channelNoUpperCase;\n\n\t\tthis.channelNoChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tchannelNoChanged: function () {\n\t\tvar channelNo = this.getChannelNo();\n\t\tthis.$.channelNo.setContent(this.get('uppercaseChannelNo') ? util.toUpperCase(channelNo) : channelNo);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuppercaseChannelNoChanged: function () {\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// channelNoUpperCase is fully deprecated and removed.\n\t\tif (this.channelNoUpperCase != this.uppercaseChannelNo) this.channelNoUpperCase = this.uppercaseChannelNo;\n\t\tthis.channelNoChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tchannelNoUpperCaseChanged: function () {\n\t\tif (this.uppercaseChannelNo != this.channelNoUpperCase) this.uppercaseChannelNo = this.channelNoUpperCase;\n\t\tthis.uppercaseChannelNoChanged();\n\t}\n});\n\nmodule.exports.ChannelInfoBadge = ChannelInfoBadge;","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutils = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeItem = Marquee.Item,\n\tMarqueeSupport = Marquee.Support;\n\n/**\n* {@link moon.Divider} is a simply styled component that may be used as a separator\n* between groups of components.\n*\n* @class moon.Divider\n* @mixes moon.MarqueeSupport\n* @mixes moon.MarqueeItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Divider.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Divider',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-divider moon-divider-text',\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport, MarqueeItem],\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnSpotlight: false,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnRender: true,\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tthis.content = this.content.split(' ').map(utils.cap).join(' ');\n\t\tControl.prototype.contentChanged.apply(this, arguments);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tGridListImageItem = require('../../../layout/lib/GridListImageItem');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeText = Marquee.Text;\n\n/**\n* {@link moon.GridListImageItem} extends {@link enyo.GridListImageItem}, adding\n* Moonstone-specific configuration, styling, decorators, and focus-state management.\n*\n* You may create an image grid by adding instances of this kind as components of a\n* {@link moon.DataGridList}.\n*\n* @class moon.GridListImageItem\n* @extends enyo.GridListImageItem\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.GridListImageItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.GridListImageItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: GridListImageItem,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tcentered: true,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-gridlist-imageitem',\n\n\t/**\n\t* @private\n\t*/\n\tcomponentOverrides: {\n\t\tcaption: {kind: MarqueeText},\n\t\tsubCaption: {kind: MarqueeText}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.allowHtml', to: '.$.caption.allowHtml'},\n\t\t{from: '.allowHtml', to: '.$.subCaption.allowHtml'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightFocus: 'focused'\n\t},\n\n\t/**\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tfocused: function (inSender, inEvent) {\n\t\tif (inEvent.originator === this) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeItem = Marquee.Item;\n\n/**\n* {@link moon.Item} is a focusable Moonstone-styled control that can display\n* simple text or a set of controls.\n*\n* @class moon.Item\n* @extends enyo.Control\n* @mixes moon.MarqueeSupport\n* @mixes moon.MarqueeItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Item.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Item',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-item',\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport, MarqueeItem],\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightFocused: 'spotlightFocused'\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.Item.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* If `true`, the control is shown as disabled and does not generate tap events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.disabledChanged();\n\t\tif (this.children.length) {\n\t\t\tthis.addClass('allow-wrap');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function (inOld) {\n\t\tthis.addRemoveClass('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tspotlightFocused: function (inSender, inEvent) {\n\t\tif (inEvent.originator === this) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function () {\n\t\treturn this.disabled;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text,\n\tMarqueeItem = Marquee.Item;\n\n/**\n* {@link moon.ItemOverlay} is a supplementary control that helps to manage\n* layout within a {@link moon.Item}.\n*\n* ```\n* {kind: \"moon.Item\", components: [\n* \t{kind: \"moon.ItemOverlay\", autoHide: false, right: true, components:[\n* \t\t{kind: \"moon.Icon\", icon: \"arrowlargeup\", small: true},\n* \t\t{kind: \"moon.Icon\", icon: \"arrowlargedown\", small: true}\n* \t]},\n* \t{kind: \"moon.MarqueeText\", content: \"Item   with   icons   auto   hides\"}\n* ]}\n* ```\n*\n* @ui\n* @class moon.ItemOverlay\n* @extends enyo.Control\n* @public\n*/\nvar ItemOverlay = module.exports = kind(\n\t/** @lends moon.ItemOverlay.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ItemOverlay',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n \t* @private\n \t*/\n\tclasses: 'moon-item-overlay',\n\n\t/**\n\t* @private\n\t*/\n\tpublished: /** @lends moon.ItemOverlay.prototype */ {\n\n\t\t/**\n\t\t* When `true`, the controls in the overlay are only shown on focus; in\n\t\t* other words, if the overlay is not focused, the controls will be hidden.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tautoHide: false,\n\n\t\t/**\n\t\t* When `true`, the controls in the overlay are right-aligned.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tright: false\n\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.autoHideChanged();\n\t\tthis.rightChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoHideChanged: function() {\n\t\tthis.addRemoveClass('auto-hide', this.get('autoHide'));\n\t},\n\n\n\t/**\n\t* @private\n\t*/\n\trightChanged: function() {\n\t\tthis.addRemoveClass('right', this.get('right'));\n\t}\n\n});\n\n/**\n* Provides a overlay layout support to moon.Item {@link moon.Item}.\n*\n* ```\n* {kind: \"moon.Item\", mixins: [\"moon.ItemOverlaySupport\"], beginningComponents: [\n* \t{kind: \"moon.Icon\", icon: \"arrowlargeup\", small: true},\n* \t{kind: \"moon.Icon\", icon: \"arrowlargedown\", small: true}\n* ],\n* components: [\n* \t{kind: \"moon.MarqueeText\", content: \"Item   with   icons   auto   hides\"}\n* ]}\n* ```\n*\n* @mixin moon.ItemOverlaySupport\n* @public\n*/\nItemOverlay.ItemOverlaySupport = {\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ItemOverlaySupport',\n\n\t/**\n\t* The components block to create left overlay. Only created in creation time.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tbeginningComponents: null,\n\n\t/**\n\t* The components block to create right overlay. Only created in creation time.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tendingComponents: null,\n\n\t/**\n\t* When `true`, the beginning controls in the overlay are only shown on focus; in\n\t* other words, if the overlay is not focused, the controls will be hidden.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tautoHideBeginning: false,\n\n\t/**\n\t* When `true`, the ending controls in the overlay are only shown on focus; in\n\t* other words, if the overlay is not focused, the controls will be hidden.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tautoHideEnding: false,\n\n\tbindings: [\n\t\t{from: 'autoHideBeginning', to: '$.beginning.autoHide'},\n\t\t{from: 'autoHideEnding', to: '$.ending.autoHide'}\n\t],\n\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (!this.components || this.components.length === 0) {\n\t\t\t\tthis.components = [{name: 'client', content: this.content}];\n\t\t\t\tif (this._mixins && this._mixins.indexOf('moon.MarqueeItem')) {\n\t\t\t\t\tthis.components[0].mixins = [MarqueeItem];\n\t\t\t\t}\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.createComponents([{\n\t\t\t\tname: 'beginning', kind: ItemOverlay,\n\t\t\t\tclasses: 'beginning', right: false, addBefore: this.controlParentName,\n\t\t\t\tcomponents: this.beginningComponents\n\t\t\t},{\n\t\t\t\tname: 'ending', kind: ItemOverlay,\n\t\t\t\tclasses: 'ending', right: true, addBefore: this.controlParentName,\n\t\t\t\tcomponents: this.endingComponents\n\t\t\t}]);\n\t\t};\n\t})\n};","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text,\n\tMarqueeSupport = Marquee.Support;\n\n/**\n* {@link moon.Spinner} is a [control]{@link enyo.Control} that shows a spinning animation\n* to indicate that activity is taking place. By default, the spinner is light-colored and\n* suitable for displaying against a dark background. If you need a dark spinner (to be\n* shown on a lighter background), apply the `moon-light` CSS class:\n*\n* ```javascript\n* // Normal\n* {kind: 'moon.Spinner'}\n* // Light\n* {kind: 'moon.Spinner', classes: 'moon-light'}\n* // Normal with a message\n* {kind: 'moon.Spinner', content: 'Loading...'}\n* // Transparent background\n* {kind: 'moon.Spinner', transparent: true}\n* ```\n*\n* Typically, a spinner is shown to indicate activity and hidden to indicate that the activity\n* has ended. The animation automatically starts when the spinner is shown. If you wish, you\n* may control the animation directly by calling the [start()]{@link moon.Spinner#start},\n* [stop()]{@link moon.Spinner#stop}, and [toggle()]{@link moon.Spinner#toggle} methods.\n*\n* `moon.Spinner` supports both `content` text and a `components` block. Note that you\n* may only use one of these at a time. Using a `components` block may be desirable if,\n* for example, the text in the content section needs [marquee]{@link moon.MarqueeSupport}\n* functionality or you'd like to include an [icon]{@link moon.Icon} in the message.\n*\n* @class moon.Spinner\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Spinner.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Spinner',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-spinner',\n\n\t/**\n\t* Determines whether spinner's background is transparent.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\ttransparent: false,\n\n\t/**\n\t* Sets the spinner to be horizontally centered, relative to its containing control. Use in\n\t* combination with [moon.Spinner#center]{@link moon.Spinner#middle} to center this spinner\n\t* both horizontally and vertically, or just horizontally.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tcenter: false,\n\n\t/**\n\t* When `true`, sets the spinner to be vertically centered inside its container. This option\n\t* has no effect if [moon.Spinner#center]{@link moon.Spinner#center} is `false`. Setting this\n\t* to false allows the spinner to only be horizontally centered, and not vertically centered.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tmiddle: true,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'decorator', kind: Control, classes: 'moon-spinner-ball-decorator spin-ball-animation', components: [\n\t\t\t{kind: Control, classes: 'moon-spinner-ball moon-spinner-ball1'},\n\t\t\t{kind: Control, classes: 'moon-spinner-ball moon-spinner-ball2'},\n\t\t\t{kind: Control, classes: 'moon-spinner-ball moon-spinner-ball3'}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tspinnerTools: [\n\t\t{name: 'client', kind: Control, classes: 'moon-spinner-client'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function() {\n\t\tControl.prototype.initComponents.apply(this, arguments);\n\t\tthis.createTools();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateTools: function() {\n\t\t// This allows for the spinner instances with child components to not have\n\t\t// MarqueeText kind on the client container.\n\t\tvar tools = util.clone(this.spinnerTools);\n\t\tif (!(this.components && this.components.length > 0)) {\n\t\t\t// If there are no components in the spinner, convert its client area to a MarqueeText kind\n\t\t\tutil.mixin(tools[0], {\n\t\t\t\tkind: MarqueeText,\n\t\t\t\tmixins: [MarqueeSupport],\n\t\t\t\tmarqueeOnSpotlight: false,\n\t\t\t\tmarqueeOnHover: true,\n\t\t\t\tmarqueeOnRender: true,\n\t\t\t\tmarqueeOnRenderDelay: 1000\n\t\t\t});\n\t\t}\n\t\tthis.createChrome(tools);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.contentChanged();\n\t\tthis.transparentChanged();\n\t\tthis.centerChanged();\n\t\tthis.middleChanged();\n\t\tthis.addClass('running');\n\t},\n\n\t/**\n\t* Hides the animating spinner.\n\t*\n\t* @public\n\t*/\n\tstop: function() {\n\t\tthis.set('showing', false);\n\t},\n\n\t/**\n\t* Shows the spinner with animation.\n\t*\n\t* @public\n\t*/\n\tstart: function() {\n\t\tthis.set('showing', true);\n\t},\n\n\t/**\n\t* Toggles the spinner's visibility state.\n\t*\n\t* @public\n\t*/\n\ttoggle: function() {\n\t\tthis.set('showing', !this.get('showing'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thasContent: function() {\n\t\t// true if this.content is set to something OR if there are more than zero components\n\t\treturn (!!this.content || (this.components && this.components.length > 0));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function(old) {\n\t\tControl.prototype.contentChanged.apply(this, arguments);\n\t\tif (this.content || old) {\n\t\t\tthis.$.client.set('content', this.content);\n\t\t}\n\t\tthis.$.client.set('showing', !!this.content);\n\t\tthis.addRemoveClass('content', this.hasContent());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcenterChanged: function(old) {\n\t\tthis.addRemoveClass('center',this.get('center'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmiddleChanged: function(old) {\n\t\tthis.addRemoveClass('middle',this.get('middle'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttransparentChanged: function() {\n\t\tthis.addRemoveClass('moon-spinner-transparent-background', !!this.get('transparent'));\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeText = Marquee.Text;\n\n/**\n* {@link moon.VideoInfoHeader} is a [control]{@link enyo.Control} that displays\n* various information about a video. It is designed to be used within the\n* [infoComponents]{@link moon.VideoPlayer#infoComponents} block of a {@link moon.VideoPlayer}.\n*\n* Example:\n* ```javascript\n* {\n*\tkind: 'moon.VideoInfoHeader',\n*\ttitle: 'Breaking Bad - Live Free Or Die',\n*\tsubTitle: 'AMC (301) 7:00 PM - 8:00 PM',\n*\tdescription: 'As Walt deals with the aftermath of the Casa Tranquila explosion, '\n*\t\t+ 'Hank works to wrap up his investigation of Gus\\' empire.',\n*\tcomponents: [\n*\t\t{content: '3D'},\n*\t\t{content: 'Live'},\n*\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon'}\n*\t]\n* }\n* ```\n*\n* @class moon.VideoInfoHeader\n* @extends enyo.Control\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.VideoInfoHeader.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.VideoInfoHeader',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-video-info-header',\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnSpotlight: false,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnRender: true,\n\n\t/**\n\t* @private\n\t* @lends moon.VideoInfoHeader.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Title of the `VideoInfoHeader`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitle: '',\n\n\t\t/**\n\t\t* Subtitle of the `VideoInfoHeader`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsubTitle: '',\n\n\t\t/**\n\t\t* Text below subtitle of the `VideoInfoHeader`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsubSubTitle: '',\n\n\t\t/**\n\t\t* Main content of the `VideoInfoHeader`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tdescription: '',\n\n\t\t/**\n\t\t* When `true`, the title text will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercase: true,\n\n\t\t/**\n\t\t* @deprecated Replaced by [uppercase]{@link moon.VideoInfoHeader#uppercase}.\n\t\t*\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\n\t\t* an effect when explicitly set (for complete backward compatibility).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\ttitleUpperCase: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'title', kind: MarqueeText, classes: 'moon-header-font moon-video-player-info-title'},\n\t\t{name: 'subTitle', kind: Control, classes: 'moon-video-player-info-subtitle'},\n\t\t{name: 'subSubTitle', kind: Control, classes: 'moon-video-player-info-subsubtitle'},\n\t\t{name: 'client', kind: Control, classes: 'moon-video-player-info-client'},\n\t\t{kind: Control, components: [\n\t\t\t{name: 'description', kind: Control, classes: 'moon-video-player-info-description'}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.subTitle',\t\tto: '.$.subTitle.content'},\n\t\t{from: '.subSubTitle',\tto: '.$.subSubTitle.content'},\n\t\t{from: '.description',\tto: '.$.description.content'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tControl.prototype.create.apply(this, arguments);\n\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// the contentUpperCase property is fully deprecated and removed. The legacy\n\t\t// property takes precedence if it exists.\n\t\tif (this.titleUpperCase !== null) this.uppercase = this.titleUpperCase;\n\n\t\tthis.titleChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleChanged: function() {\n\t\tthis.$.title.set('content', this.get('uppercase') ? util.toUpperCase(this.get('title')) : this.get('title') );\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuppercaseChanged: function() {\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// titleUpperCase is fully deprecated and removed.\n\t\tif (this.titleUpperCase != this.uppercase) this.titleUpperCase = this.uppercase;\n\t\tthis.titleChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleUpperCaseChanged: function() {\n\t\tif (this.uppercase != this.titleUpperCase) this.uppercase = this.titleUpperCase;\n\t\tthis.uppercaseChanged();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tCheckbox = require('../Checkbox'),\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeItem = Marquee.Item;\n\n/**\n* Fires when the control is either checked or unchecked.\n*\n* @event moon.CheckboxItem#onActivate\n* @type {Object}\n* @property {Boolean} checked - Whether the checkbox is currently checked.\n* @property {Object} toggledControl - A reference to the {@link moon.CheckboxItem}\n*\twhose state changed. (Note that the originator of this event is actually the\n*\t{@link moon.Checkbox} contained within the CheckboxItem, so use this property\n* to reference the CheckboxItem itself.)\n*\n* @public\n*/\n\n/**\n* {@link moon.CheckboxItem} is a control that combines a {@link moon.Checkbox} with\n* a text label. The label text may be set via the [content]{@link enyo.Control#content}\n* property. The state of the checkbox may be retrieved by querying the\n* [checked]{@link moon.CheckboxItem#checked} property.\n*\n* ```\n*\t\t{kind: 'moon.CheckboxItem', content: 'San Francisco',\n*\t\t\tonchange: 'checkedChanged'},\n*\t\t...\n*\t\tcheckedChanged: function (inSender, inEvent) {\n*\t\t\tvar checked = inSender.get('checked');\n*\t\t}\n* ```\n*\n* You may place CheckboxItem objects inside an {@link enyo.Group} to create a group\n* of checkboxes in which only one may be checked at any given time (similar to how a\n* [RadioItemGroup]{@link moon.RadioItemGroup} behaves):\n*\n* ```\n*\t\t{kind: 'Group', components: [\n*\t\t\t{kind: 'moon.CheckboxItem', content: 'New York'},\n*\t\t\t{kind: 'moon.CheckboxItem', content: 'London'},\n*\t\t\t{kind: 'moon.CheckboxItem', content: 'San Francisco'},\n*\t\t\t{kind: 'moon.CheckboxItem', content: 'Beijing'}\n*\t\t]}\n* ```\n*\n* @class moon.CheckboxItem\n* @extends enyo.Control\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.CheckboxItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.CheckboxItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\n\t/**\n\t* @private\n\t* @lends moon.CheckboxItem.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Boolean value indicating whether checkbox is currently checked.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tchecked: false,\n\n\t\t/**\n\t\t* Boolean value indicating whether checkbox is currently active item in group.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false,\n\n\t\t/**\n\t\t* If `true`, checkbox will be displayed on the right side of the checkbox item;\n\t\t* otherwise, it will be displayed on the left side.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tcheckboxOnRight: false,\n\n\t\t/**\n\t\t* If `true`, checkbox is shown as disabled and does not generate tap events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* If `true`, the value of the [checked]{@link moon.CheckboxItem#checked} property\n\t\t* cannot be changed through user input.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tlocked: false,\n\n\t\t/**\n\t\t* Name of a font-based icon to use when displaying the checkbox. Consult\n\t\t* {@link moon.Icon} for valid values.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'check'\n\t\t* @public\n\t\t*/\n\t\ticon: 'check',\n\n\t\t/**\n\t\t* Optional path to an image asset. May be used to customize checkbox appearance.\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: '',\n\n\t\t/**\n\t\t* If used as the base control within a {@link moon.DataList} or {@glossary subkind},\n\t\t* this should be set to `false` so that selection support can be synchronized to the\n\t\t* checked state of this control.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\thandleTapEvent: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.CheckboxItem#onActivate}\n\t\t*/\n\t\tonActivate: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-item moon-checkbox-item',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tontap: 'tap',\n\t\tonActivate: 'decorateActivateEvent',\n\t\tonSpotlightFocused: 'spotlightFocused'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'client', mixins: [MarqueeItem], classes: 'moon-checkbox-item-label-wrapper'},\n\t\t{name: 'input', kind: Checkbox, spotlight: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: 'allowHtml', to: '$.client.allowHtml'},\n\t\t{from: 'active', to: '$.input.active', oneWay: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.disabledChanged();\n\t\tthis.checkboxOnRightChanged();\n\t\tthis.lockedChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function () {\n\t\tControl.prototype.rendered.apply(this, arguments);\n\t\tif (this.get('src') != null || this.get('icon') != null) {\n\t\t\tthis.srcChanged();\n\t\t\tthis.iconChanged();\n\t\t}\n\t\tthis.checkedChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.addRemoveClass('disabled', this.disabled);\n\t\tthis.$.input.setDisabled(this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcheckedChanged: function () {\n\t\tthis.$.input.setChecked(this.getChecked());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcheckboxOnRightChanged: function () {\n\t\tthis.addRemoveClass('left-handed', !this.getCheckboxOnRight());\n\t},\n\n\t/**\n\t* waterfall event\n\t* @fires enyo.Control#ontap\n\t* @private\n\t*/\n\ttap: function (inSender, inEvent) {\n\t\tif (this.handleTapEvent) {\n\t\t\tif (inSender != this.$.input) {\n\t\t\t\tthis.waterfallDown('ontap', inEvent, inSender);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @fires moon.CheckboxItem#onActivate\n\t* @private\n\t*/\n\tdecorateActivateEvent: function (inSender, inEvent) {\n\t\tinEvent.toggledControl = this;\n\t\tthis.setChecked(this.$.input.getChecked());\n\t\tinEvent.checked = this.checked;\n\t},\n\n\t/**\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tspotlightFocused: function (inSender, inEvent) {\n\t\tif (inEvent.originator === this) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tthis.$.client.setContent(this.getContent());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlockedChanged: function() {\n\t\tthis.$.input.setLocked(this.locked);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ticonChanged: function() {\n\t\tthis.$.input.setIcon(this.icon);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsrcChanged: function() {\n\t\tthis.$.input.setSrc(this.src);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils');\n\nvar\n\tCheckbox = require('../Checkbox');\n\n/**\n* {@link moon.ToggleSwitch}, which extends {@link moon.Checkbox}, is a control\n* that looks like a switch with 'on' and 'off' states. When the toggle switch is\n* tapped, it switches its state and fires an\n* [onChange]{@link enyo.Checkbox#onChange} event.\n*\n* @class moon.ToggleSwitch\n* @extends moon.Checkbox\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ToggleSwitch.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ToggleSwitch',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Checkbox,\n\n\t/**\n\t* @private\n\t*/\n\ticon: 'circle',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-toggle-switch',\n\n\t/**\n\t* @private\n\t*/\n\trendered: function () {\n\t\tCheckbox.prototype.rendered.apply(this, arguments);\n\t\t// wait until after we're rendered to allow animation.\n\t\tutil.asyncMethod(this, function () {\n\t\t\tthis.addClass('animated');\n\t\t});\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tri = require('../../../enyo/lib/resolution'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tPopup = require('../../../enyo/lib/Popup');\n\nvar\n\tContextualLayout = require('../../../layout/lib/ContextualLayout');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tIconButton = require('../IconButton'),\n\tMoonHistory = require('../History'),\n\tScrim = require('../../../moonstone/lib/Scrim'),\n\tHistorySupport = MoonHistory.HistorySupport;\n\n/**\n* Fires when the contextual popup is to be shown.\n*\n* @event moon.ContextualPopup#onRequestShowPopup\n* @type {Object}\n* @property {Object} activator - A reference to the activating object.\n* @public\n*/\n\n/**\n* Fires when the contextual popup is to be hidden. No additional data is included\n* with this event.\n*\n* @event moon.ContextualPopup#onRequestHidePopup\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when the contextual popup is activated. Extends {@link enyo.Popup#onActivate}.\n*\n* @event moon.ContextualPopup#onActivate\n* @type {Object}\n* @property {Object} sentFromPopup - A reference to the popup.\n* @public\n*/\n\n/**\n* {@link moon.ContextualPopup} is a popup window control with Moonstone visual\n* styling applied. It extends {@link enyo.Popup} and is designed to be used with\n* {@link moon.ContextualPopupDecorator}.\n*\n* @class moon.ContextualPopup\n* @extends enyo.Popup\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ContextualPopup.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ContextualPopup',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Popup,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [HistorySupport],\n\n\t/**\n\t* @private\n\t*/\n\tlayoutKind: ContextualLayout,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-body-text moon-contextual-popup',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonRequestShowPopup: 'requestShow',\n\t\tonRequestHidePopup: 'requestHide',\n\t\tonActivate: 'decorateActivateEvent',\n\t\tonRequestScrollIntoView: '_preventEventBubble',\n\t\tonSpotlightContainerLeave: 'onLeave'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teventsToCapture: {\n\t\tonSpotlightKeyDown: 'capturedKeyDown',\n\t\tonSpotlightFocus: 'capturedFocus'\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.ContextualPopup.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* If `true`, focus cannot leave the constraints of the popup unless the\n\t\t* popup is explicitly closed.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tspotlightModal: false,\n\n\t\t/**\n\t\t* If `false`, the close button is hidden; if `true`, it is shown. When this\n\t\t* property is set to `'auto'` (the default), the close button is shown when\n\t\t* [spotlightModal]{@link moon.ContextualPopup#spotlightModal} is `true`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'auto'\n\t\t* @public\n\t\t*/\n\t\tshowCloseButton: 'auto'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: 'container',\n\n\t/**\n\t* @private\n\t*/\n\tfloating: true,\n\n\t/**\n\t* Determines whether a scrim will appear when the popup is modal.\n\t* Note that modal scrims are transparent, so you won't see them.\n\t*\n\t* @private\n\t*/\n\tscrimWhenModal: true,\n\n\t// Layout parameters\n\n\t/**\n\t* Vertical flush layout margin.\n\t*\n\t* @private\n\t*/\n\tvertFlushMargin:0,\n\n\t/**\n\t* Horizontal flush layout margin.\n\t*\n\t* @private\n\t*/\n\thorizFlushMargin:0,\n\n\t/**\n\t* Popups wider than this value are considered wide (for layout purposes).\n\t*\n\t* @private\n\t*/\n\twidePopup: ri.scale(210),\n\n\t/**\n\t* Popups longer than this value are considered long (for layout purposes).\n\t*\n\t* @private\n\t*/\n\tlongPopup: ri.scale(210),\n\n\t/**\n\t* Do not allow horizontal flush popups past spec'd amount of buffer space on left/right\n\t* screen edge.\n\t*\n\t* @private\n\t*/\n\thorizBuffer: ri.scale(15),\n\n\t/**\n\t* @private\n\t*/\n\tactivator: null,\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{name: 'client', kind: Control, classes: 'moon-neutral moon-contextual-popup-client'},\n\t\t{name: 'closeButton', kind: IconButton, icon: 'closex', classes: 'moon-popup-close', ontap: 'closePopup', spotlight: false}\n\t],\n\n\t/**\n\t* Creates chrome components.\n\t*\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tthis.createChrome(this.tools);\n\t\tPopup.prototype.initComponents.apply(this, arguments);\n\t},\n\n\t/**\n\t* Renders the contextual popup.\n\t*\n\t* @private\n\t*/\n\trender: function () {\n\t\tthis.allowHtmlChanged();\n\t\tthis.contentChanged();\n\t\tPopup.prototype.render.apply(this, arguments);\n\t},\n\n\t/**\n\tFixMe: overriding the control's default hide method to support the existing sequential tapping\n\tand the dependent decorator code inorder to handle some special cases.\n\t*/\n\thide: function(inSender, e) {\n\n\t\tif (this.tapCaptured) {\n\t\t\tthis.tapCaptured = false;\n\t\t} else {\n\t\t\tthis.popupActivated = false;\n\t\t}\n\t\tPopup.prototype.hide.apply(this, arguments);\n\n\t},\n\n\t/**\n\t* Performs control-specific tasks before/after showing {@link moon.ContextualPopup}.\n\t*\n\t* @private\n\t*/\n\trequestShow: function (inSender, inEvent) {\n\t\tvar n = inEvent.activator.hasNode();\n\t\tthis.activator = inEvent.activator;\n\t\tif (n) {\n\t\t\tthis.activatorOffset = this.getPageOffset(n);\n\t\t}\n\t\tthis.show();\n\t\tthis.configCloseButton();\n\t\tif (Spotlight.isSpottable(this)) {\n\t\t\tSpotlight.spot(this);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @fires enyo.Popup#onActivate\n\t* @private\n\t*/\n\tdecorateActivateEvent: function (inSender, inEvent) {\n\t\tinEvent.sentFromPopup = this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetPageOffset: function (inNode) {\n\t\t// getBoundingClientRect returns top/left values which are relative to the viewport and\n\t\t// not absolute\n\t\tvar r = inNode.getBoundingClientRect();\n\n\t\tvar pageYOffset = (window.pageYOffset === undefined) ? document.documentElement.scrollTop : window.pageYOffset;\n\t\tvar pageXOffset = (window.pageXOffset === undefined) ? document.documentElement.scrollLeft : window.pageXOffset;\n\t\tvar rHeight = (r.height === undefined) ? (r.bottom - r.top) : r.height;\n\t\tvar rWidth = (r.width === undefined) ? (r.right - r.left) : r.width;\n\n\t\treturn {top: r.top + pageYOffset, left: r.left + pageXOffset, height: rHeight, width: rWidth, bottom: r.top + pageYOffset + rHeight, right: r.left + pageXOffset + rWidth};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresetDirection: function () {\n\t\tthis.removeClass('right');\n\t\tthis.removeClass('left');\n\t\tthis.removeClass('high');\n\t\tthis.removeClass('low');\n\t\tthis.removeClass('below');\n\t\tthis.removeClass('above');\n\t},\n\n\t/**\n\t* Alters the direction of the popup.\n\t*\n\t* @private\n\t*/\n\talterDirection: function () {\n\t\tif (this.showing) {\n\t\t\tvar clientRect = this.getBoundingRect(this.node);\n\t\t\tvar viewPortHeight = dom.getWindowHeight();\n\t\t\tvar viewPortWidth = dom.getWindowWidth();\n\t\t\tvar offsetHeight = (clientRect.height - this.activatorOffset.height) / 2;\n\t\t\tvar offsetWidth = (clientRect.width - this.activatorOffset.width) / 2;\n\t\t\tvar popupMargin = 20;\n\n\t\t\tvar bounds = {top: null, left: null};\n\n\t\t\tif(this.direction === 'left') {\n\t\t\t\tif(clientRect.width + popupMargin < this.activatorOffset.left) {\n\t\t\t\t\tthis.resetDirection();\n\t\t\t\t\tthis.addClass('right');\n\n\t\t\t\t\tif(this.activatorOffset.top < offsetHeight) {\n\t\t\t\t\t\tthis.addClass('high');\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top;\n\t\t\t\t\t} else if(viewPortHeight - this.activatorOffset.bottom < offsetHeight) {\n\t\t\t\t\t\tthis.addClass('low');\n\t\t\t\t\t\tbounds.top = this.activatorOffset.bottom - clientRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top - offsetHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tbounds.left = this.activatorOffset.left - clientRect.width;\n\t\t\t\t}\n\t\t\t} else if(this.direction === 'right') {\n\t\t\t\tif(viewPortWidth > this.activatorOffset.right + clientRect.width + popupMargin) {\n\t\t\t\t\tthis.resetDirection();\n\t\t\t\t\tthis.addClass('left');\n\n\t\t\t\t\tif(this.activatorOffset.top < offsetHeight) {\n\t\t\t\t\t\tthis.addClass('high');\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top;\n\t\t\t\t\t} else if(viewPortHeight - this.activatorOffset.bottom < offsetHeight) {\n\t\t\t\t\t\tthis.addClass('low');\n\t\t\t\t\t\tbounds.top = this.activatorOffset.bottom - clientRect.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top - offsetHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tbounds.left = this.activatorOffset.right;\n\t\t\t\t}\n\t\t\t} else if(this.direction === 'top') {\n\t\t\t\tif(clientRect.height + popupMargin < this.activatorOffset.top) {\n\t\t\t\t\tthis.resetDirection();\n\t\t\t\t\tthis.addClass('above');\n\n\t\t\t\t\tif(this.activatorOffset.left < offsetWidth) {\n\t\t\t\t\t\tthis.addClass('right');\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left;\n\t\t\t\t\t} else if(viewPortWidth - this.activatorOffset.right < offsetWidth) {\n\t\t\t\t\t\tthis.addClass('left');\n\t\t\t\t\t\tbounds.left = this.activatorOffset.right - clientRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left - offsetWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tbounds.top = this.activatorOffset.top - clientRect.height;\n\t\t\t\t}\n\t\t\t} else if(this.direction === 'bottom') {\n\t\t\t\tif(viewPortHeight > this.activatorOffset.bottom + clientRect.height + popupMargin) {\n\t\t\t\t\tthis.resetDirection();\n\t\t\t\t\tthis.addClass('below');\n\n\t\t\t\t\tif(this.activatorOffset.left < offsetWidth) {\n\t\t\t\t\t\tthis.addClass('right');\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left;\n\t\t\t\t\t} else if(viewPortWidth - this.activatorOffset.right < offsetWidth) {\n\t\t\t\t\t\tthis.addClass('left');\n\t\t\t\t\t\tbounds.left = this.activatorOffset.right - clientRect.width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left - offsetWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tbounds.top = this.activatorOffset.bottom;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setBounds(bounds);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetBoundingRect: function (node) {\n\t\t// getBoundingClientRect returns top/left values which are relative to the viewport and not absolute\n\t\tvar o = node.getBoundingClientRect();\n\t\tif (!o.width || !o.height) {\n\t\t\treturn {\n\t\t\t\tleft: o.left,\n\t\t\t\tright: o.right,\n\t\t\t\ttop: o.top,\n\t\t\t\tbottom: o.bottom,\n\t\t\t\twidth: o.right - o.left,\n\t\t\t\theight: o.bottom - o.top\n\t\t\t};\n\t\t}\n\t\treturn o;\n\t},\n\n\t/**\n\t* Dismisses popup if Escape keypress is detected.\n\t*\n\t* @private\n\t*/\n\tkeydown: function (inSender, inEvent) {\n\t\tif (this.showing && this.autoDismiss && inEvent.keyCode == 27 /* escape */) {\n\t\t\tthis.hide();\n\t\t\tSpotlight.spot(this.activator);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclosePopup: function (inSender, inEvent) {\n\t\tthis.$.closeButton.removeClass('pressed');\n\t\tthis.hide();\n\t\tSpotlight.spot(this.activator);\n\t},\n\n\t/**\n\t* Determines whether to display close button.\n\t*\n\t* @private\n\t*/\n\tconfigCloseButton: function () {\n\t\tif (this.showCloseButton === true || (this.spotlightModal && this.showCloseButton !== false)) {\n\t\t\tthis.$.closeButton.show();\n\t\t\tthis.$.closeButton.spotlight = true;\n\t\t\tthis.addClass('reserve-close');\n\t\t} else {\n\t\t\tthis.$.closeButton.hide();\n\t\t\tthis.$.closeButton.spotlight = false;\n\t\t\tthis.removeClass('reserve-close');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tthis.$.client.setContent(this.content);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tallowHtmlChanged: function () {\n\t\tthis.$.client.setAllowHtml(this.allowHtml);\n\t},\n\n\t/**\n\t* Called when [spotlightModal]{@link moon.ContextualPopup#spotlightModal} changes.\n\t*\n\t* @private\n\t*/\n\tspotlightModalChanged: function () {\n\t\tthis.configCloseButton();\n\t},\n\n\t/**\n\t* Called when [showCloseButton]{@link moon.ContextualPopup#showCloseButton} changes.\n\t*\n\t* @private\n\t*/\n\tshowCloseButtonChanged: function () {\n\t\tthis.configCloseButton();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedKeyDown: function (inSender, inEvent) {\n\t\tif (inEvent.keyCode == 13) {\n\t\t\tthis.downEvent = inEvent;\n\t\t}\n\t\treturn this.modal && this.spotlightModal;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedFocus: function(inSender, inEvent) {\n\t\tif(this.modal && this.spotlightModal) {\n\t\t\tSpotlight.spot(this);\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedTap: function (inSender, inEvent) {\n\t\t// If same activator tapped sequentially, we notice that this popup is already activeted.\n\t\tif (inEvent.dispatchTarget.isDescendantOf(this.activator)) {\n\t\t\tthis.popupActivated = true;\n\t\t\tthis.tapCaptured = true;\n\t\t} else {\n\t\t\tthis.popupActivated = false;\n\t\t}\n\t\tPopup.prototype.capturedTap.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonLeave: function (oSender, oEvent) {\n\t\tif (oEvent.originator == this && !Spotlight.getPointerMode()) {\n\t\t\tthis.popupActivated = false;\n\t\t\tthis.hide();\n\t\t\tSpotlight.spot(this.activator);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_preventEventBubble: function (inSender, inEvent) {\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowHideScrim: function (inShow) {\n\t\tif (this.floating && (this.scrim || (this.modal && this.scrimWhenModal))) {\n\t\t\tvar scrim = this.getScrim();\n\t\t\tif (inShow && this.modal && this.scrimWhenModal) {\n\t\t\t\t// move scrim to just under the popup to obscure rest of screen\n\t\t\t\tvar i = this.getScrimZIndex();\n\t\t\t\tthis._scrimZ = i;\n\t\t\t\tscrim.showAtZIndex(i);\n\t\t\t} else {\n\t\t\t\tscrim.hideAtZIndex(this._scrimZ);\n\t\t\t}\n\t\t\tutil.call(scrim, 'addRemoveClass', [this.scrimClassName, scrim.showing]);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrimZIndex: function () {\n\t\t// Position scrim directly below popup\n\t\treturn this.findZIndex()-1;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrim: function () {\n\t\t// show a transparent scrim for modal popups if\n\t\t// {@link moon.ContextualPopup#scrimWhenModal} is `true`, else show a\n\t\t// regular scrim.\n\t\tif (this.modal && this.scrimWhenModal) {\n\t\t\treturn Scrim.scrimTransparent.make();\n\t\t}\n\t\treturn Scrim.make();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function () {\n\t\tPopup.prototype.showingChanged.apply(this, arguments);\n\t\tthis.alterDirection();\n\t\tthis.showHideScrim(this.showing);\n\n\t\tif (this.allowBackKey) {\n\t\t\tif (this.showing) {\n\t\t\t\tthis.pushBackHistory();\n\t\t\t} else if(!this.showing && !moon.History.isHandlingBackAction()) {\n\t\t\t\tmoon.History.ignorePopState();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdirectionChanged: function () {\n\t\tthis.alterDirection();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdev = require('../../../enyo/lib/dev'),\n\tanimation = require('../../../enyo/lib/animation');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tIconButton = require('../IconButton');\n\n/**\n* Fires when page boundary is reached.\n*\n* @event moon.PagingControl#onPaginate\n* @type {Object}\n* @property {Number} scrollDelta - The distance of the scroll.\n* @public\n*/\n\n/**\n* Fires when we've determined how large the bounceback effect should be.\n*\n* @event moon.PagingControl#onPaginateScroll\n* @type {Object}\n* @property {Number} scrollDelta - The magnitude of the scroll bounceback.\n* @public\n*/\n\n/**\n* {@link moon.PagingControl} is a paging control button derived from\n* {@link moon.IconButton}. This control is not intended for use outside of\n* {@link moon.Scroller}.\n*\n* @class moon.PagingControl\n* @extends moon.IconButton\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.PagingControl.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.PagingControl',\n\n\t/**\n\t* @private\n\t*/\n\tkind: IconButton,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-paging-button no-background',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t* @lends moon.PagingControl.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* The side of the control where the button will be.\n\t\t*\n\t\t* Supported values are `'top'`, `'right'`, `'bottom'`, and `'left'`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tside: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnoBackground: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightFocused: 'noop',\n\t\tonSpotlightKeyDown: 'depress',\n\t\tonSpotlightKeyUp: 'undepress',\n\t\tondown: 'down',\n\t\tonup: 'endHold',\n\t\tonleave: 'endHold',\n\t\tonhold: 'hold',\n\t\tonActivate: 'noop'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\t/**\n\t\t* {@link moon.PagingControl#onPaginate}\n\t\t*/\n\t\tonPaginate: '',\n\n\t\t/**\n\t\t* {@link moon.PagingControl#onPaginateScroll}\n\t\t*/\n\t\tonPaginateScroll: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdownTime: 0,\n\n\t/**\n\t* @private\n\t*/\n\tinitialDelta: 2.5,\n\n\t/**\n\t* @private\n\t*/\n\tdelta: 0,\n\n\t/**\n\t* @private\n\t*/\n\tmaxDelta: 45,\n\n\t/**\n\t* @private\n\t*/\n\ttapDelta: 15,\n\n\t/**\n\t* @private\n\t*/\n\tbumpDeltaMultiplier: 3,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tIconButton.prototype.create.apply(this, arguments);\n\t\tthis.sideChanged();\n\t},\n\n\t/**\n\t* Stops scrolling animation and triggers\n\t* [onPaginate]{@link moon.PagingControl#onPaginate} event with a delta\n\t* value for the bounceback effect.\n\t*\n\t* @fires moon.PagingControl#onPaginate\n\t* @public\n\t*/\n\thitBoundary: function() {\n\t\tthis.stopHoldJob();\n\t\tthis.downTime = null;\n\t\tthis.doPaginate({scrollDelta: this.delta * this.bumpDeltaMultiplier});\n\t\tSpotlight.Accelerator.cancel();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_iconMappings: {\n\t\t'top': 'arrowlargeup',\n\t\t'bottom': 'arrowlargedown',\n\t\t'left': 'arrowlargeleft',\n\t\t'right': 'arrowlargeright'\n\t},\n\n\t/**\n\t* Set this control's CSS class based on its [side]{@link moon.PagingControl#side}\n\t* value.\n\t*\n\t* @private\n\t*/\n\tsideChanged: function(old) {\n\t\tvar s = this.side;\n\t\tif(old) {\n\t\t\tthis.removeClass(old);\n\t\t}\n\t\tthis.addClass(s);\n\t\tthis.setIcon(this._iconMappings[s]);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdown: function(sender, event) {\n\t\tif (this.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.downTime = dev.bench();\n\t\tthis.delta = this.initialDelta;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thold: function(sender, event) {\n\t\tif (this.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.startHoldJob();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdepress: function(sender, event) {\n\t\tIconButton.prototype.depress.apply(this, arguments);\n\t\t// keydown events repeat (while mousedown/hold does not); simulate\n\t\t// hold behavior with mouse by catching the second keydown event\n\t\tif (event.keyCode === 13) {\n\t\t\tif (!this.downCount) {\n\t\t\t\tthis.down();\n\t\t\t\tthis.downCount = 1;\n\t\t\t} else {\n\t\t\t\tthis.downCount++;\n\t\t\t}\n\t\t\tif (this.downCount == 2) {\n\t\t\t\tthis.hold();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tundepress: function(sender, event) {\n\t\tIconButton.prototype.undepress.apply(this, arguments);\n\t\tthis.downCount = 0;\n\t\tthis.endHold(sender, event);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tendHold: function(sender, event) {\n\t\tif (!this.downTime) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stopHoldJob();\n\t\tthis.sendPaginateEvent();\n\t\tthis.downTime = null;\n\t},\n\n\t/**\n\t* @fires moon.PagingControl#onPaginateScroll\n\t* @private\n\t*/\n\tstartHoldJob: function() {\n\t\tthis.stopHoldJob();\n\n\t\tvar t0 = dev.bench(),\n\t\t\tt = 0\n\t\t;\n\n\t\tvar fn = this.bindSafely(function() {\n\t\t\tthis.job = animation.requestAnimationFrame(fn);\n\n\t\t\tt = (dev.bench() - t0)/1000;\n\t\t\tthis.delta = Math.min(this.maxDelta, this.delta + (0.1 * Math.pow(t, 1.1)));\n\n\t\t\tthis.doPaginateScroll({scrollDelta: this.delta});\n\t\t});\n\n\t\tthis.job = animation.requestAnimationFrame(fn);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopHoldJob: function() {\n\t\tthis.job = animation.cancelRequestAnimationFrame(this.job);\n\t},\n\n\t/**\n\t* @fires moon.PagingControl#onPaginate\n\t* @private\n\t*/\n\tsendPaginateEvent: function() {\n\t\tvar tapThreshold = 200,\n\t\t\ttimeElapsed = dev.bench() - this.downTime,\n\t\t\tdelta = (timeElapsed <= tapThreshold) ? this.tapDelta : this.delta;\n\n\t\tthis.doPaginate({scrollDelta: delta});\n\t},\n\n\t/**\n\t* Overrides default focused handling to make sure scroller doesn't scroll to\n\t* this button.\n\t*\n\t* @private\n\t*/\n\tnoop: function() { return true; }\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tIconButton = require('../IconButton'),\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeText\t= Marquee.Text;\n\n/**\n* Fires when the currently selected item changes.\n* \n* @event moon.SimplePicker#onChange\n* @type {Object}\n* @property {enyo.Control} selected - A reference to the currently selected item.\n* @property {String} content - The content of the currently selected item.\n* @property {Number} index - The index of the currently selected item.\n* @public\n*/\n\n/**\n* {@link moon.SimplePicker} is a [control]{@link enyo.Control} that solicits a\n* choice from the user by cycling through a list of options. The picker's child\n* [components]{@link enyo.Component}, {@link moon.MarqueeText}\n* [objects]{@glossary Object} by default, become the options for the picker.\n*\n* ```javascript\n* {kind: 'moon.SimplePicker', onChange: 'changed', selectedIndex: 1, components: [\n*\t{content: 'San Francisco'},\n*\t{content: 'Boston'},\n*\t{content: 'Tokyo'}\n* ]}\n* ```\n* \n* The picker may be changed programmatically by calling\n* [previous()]{@link moon.SimplePicker#previous} or [next()]{@link moon.SimplePicker#next}, \n* or by modifying the [selectedIndex]{@link moon.SimplePicker#selectedIndex} published \n* property by calling `set('selectedIndex', <value>)`.\n*\n* The picker options may be modified programmatically in the standard manner, by calling\n* `createComponent().render()` or `destroy()`.\n*\n* ```javascript\n* // Add new items to picker\n* this.$.picker.createComponent({'New York'}).render();\n* this.$.picker.createComponent({'London'}).render();\n*\n* // Remove currently selected item from picker\n* this.$.picker.getSelected().destroy();\n* ```\n*\n* @class moon.SimplePicker\n* @extends enyo.Control\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.SimplePicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.SimplePicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-simple-picker',\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonChange: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.SimplePicker.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Reference to currently selected item, if any.\n\t\t*\n\t\t* @type {enyo.Control}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tselected: '',\n\n\t\t/**\n\t\t* Index of currently selected item, if any.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tselectedIndex: 0,\n\n\t\t/**\n\t\t* When `true`, picker transitions animate left/right.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tanimate: true,\n\n\t\t/**\n\t\t* When `true`, buttons are shown as disabled and do not generate tap events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* When `true`, picker will wrap around from last item to first.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\twrap: false,\n\n\t\t/**\n\t\t* By default, {@link moon.SimplePicker} is an inline-block element;\n\t\t* setting `block: true` makes it a block element.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tblock: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: MarqueeText,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightFocused: 'scrollIntoView'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'buttonLeft',  kind: IconButton, noBackground:true, classes: 'moon-simple-picker-button left', icon:'arrowlargeleft', onSpotlightKeyDown:'configureSpotlightHoldPulse', onSpotlightSelect: 'left', ondown: 'downLeft', onholdpulse:'left', defaultSpotlightDisappear: 'buttonRight'},\n\t\t{name: 'clientWrapper', kind: Control, classes:'moon-simple-picker-client-wrapper', components: [\n\t\t\t{name: 'client', kind: Control, classes: 'moon-simple-picker-client'}\n\t\t]},\n\t\t{name: 'buttonRight', kind: IconButton, noBackground:true, classes: 'moon-simple-picker-button right', icon:'arrowlargeright', onSpotlightKeyDown:'configureSpotlightHoldPulse', onSpotlightSelect: 'right', ondown: 'downRight', onholdpulse:'right', defaultSpotlightDisappear: 'buttonLeft'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.animateChanged();\n\t\tthis.initializeActiveItem();\n\t\tthis.disabledChanged();\n\t\tthis.selectedIndexChanged();\n\t\tthis.updateMarqueeDisable();\n\t\tthis.blockChanged();\n\t\tthis.showHideNavButtons();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollIntoView: function() {\n\t\tthis.bubble('onRequestScrollIntoView');\n\t},\n\n\t/**\n\t* @fires moon.SimplePicker#onChange\n\t* @private\n\t*/\n\tfireChangedEvent: function() {\n\t\tif (!this.generated) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.doChange({\n\t\t\tselected:   this.selected,\n\t\t\tcontent:    this.selected && this.selected.content,\n\t\t\tindex:      this.selected && this.selectedIndex\n\t\t});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tblockChanged: function() {\n\t\tthis.addRemoveClass('block', this.block);\n\t},\n\n\t/**\n\t* Shows/hides previous/next buttons based on current index.\n\t*\n\t* @private\n\t*/\n\tshowHideNavButtons: function() {\n\t\tvar index = this.getSelectedIndex(),\n\t\t\tmaxIndex = this.getClientControls().length - 1;\n\t\tvar prevButton = this.$.buttonLeft;\n\t\tvar nextButton = this.$.buttonRight;\n\n\t\tif (this.disabled) {\n\t\t\tthis.hideNavButton(prevButton);\n\t\t\tthis.hideNavButton(nextButton);\n\t\t// Always show buttons if _this.wrap_ is _true_\n\t\t} else if (this.wrap) {\n\t\t\tthis.showNavButton(prevButton);\n\t\t\tthis.showNavButton(nextButton);\n\t\t// If we have one or less options, always show no buttons\n\t\t} else if (maxIndex <= 0) {\n\t\t\tthis.hideNavButton(prevButton);\n\t\t\tthis.hideNavButton(nextButton);\n\t\t// If we are on the first option, hide the left button\n\t\t} else if (index <= 0) {\n\t\t\tthis.showNavButton(nextButton);\n\t\t\tthis.hideNavButton(prevButton);\n\t\t// If we are on the last item, hide the right button\n\t\t} else if (index >= maxIndex) {\n\t\t\tthis.showNavButton(prevButton);\n\t\t\tthis.hideNavButton(nextButton);\n\t\t// Otherwise show both buttons\n\t\t} else {\n\t\t\tthis.showNavButton(prevButton);\n\t\t\tthis.showNavButton(nextButton);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: function() {\n\t\tthis.destroying = true;\n\t\tControl.prototype.destroy.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\taddControl: function(ctl) {\n\t\tControl.prototype.addControl.apply(this, arguments);\n\t\tvar addedIdx = this.getClientControls().indexOf(ctl),\n\t\t\tselectedIdx = this.selectedIndex;\n\t\tif (this.generated) {\n\t\t\tif ((selectedIdx < 0) || (addedIdx < selectedIdx)) {\n\t\t\t\tthis.setSelectedIndex(selectedIdx + 1);\n\t\t\t} else if (selectedIdx == addedIdx) {\n\t\t\t\t// Force change handler, since the currently selected item actually changed\n\t\t\t\tthis.selectedIndexChanged();\n\t\t\t}\n\t\t\tthis.showHideNavButtons();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveControl: function(ctl) {\n\t\tif (!this.destroying) {\n\t\t\tvar removedIdx = this.getClientControls().indexOf(ctl),\n\t\t\t\tselectedIdx = this.selectedIndex,\n\t\t\t\twasLast = (removedIdx == this.getClientControls().length-1);\n\n\t\t\tControl.prototype.removeControl.apply(this, arguments);\n\n\t\t\t// If removedIdx is -1, that means that the Control being removed is\n\t\t\t// not one of our picker items, so we don't need to update our state.\n\t\t\t// Probably, we're being torn down.\n\t\t\tif (removedIdx !== -1) {\n\t\t\t\tif ((removedIdx < selectedIdx) || ((selectedIdx == removedIdx) && wasLast)) {\n\t\t\t\t\tthis.setSelectedIndex(selectedIdx - 1);\n\t\t\t\t} else if (selectedIdx == removedIdx) {\n\t\t\t\t\t// Force change handler, since the currently selected item actually changed\n\t\t\t\t\tthis.selectedIndexChanged();\n\t\t\t\t}\n\t\t\t\tthis.showHideNavButtons();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.inherited(arguments);\n\t\t}\n\t},\n\n\t/**\n\t* Hides passed-in [control]{@link enyo.Control} and disables {@glossary Spotlight}\n\t* functionality.\n\t*\n\t* @private\n\t*/\n\thideNavButton: function(ctl) {\n\t\tctl.setDisabled(true);\n\t},\n\n\t/**\n\t* Shows passed-in [control]{@link enyo.Control} and enables {@glossary Spotlight}\n\t* functionality.\n\t*\n\t* @private\n\t*/\n\tshowNavButton: function(ctl) {\n\t\tctl.setDisabled(false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function() {\n\t\tthis.$.client.addRemoveClass('disabled', this.disabled);\n\t\tif (this.generated) {\n\t\t\tthis.showHideNavButtons();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimateChanged: function() {\n\t\tthis.$.client.addRemoveClass('animated', this.animate);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectedChanged: function() {\n\t\tvar idx = this.getClientControls().indexOf(this.selected);\n\t\tif (idx >= 0) {\n\t\t\tthis.setSelectedIndex(idx);\n\t\t}\n\t},\n\t/*\n\t* When the picker is initialized, looks for any items with the `active` flag set to\n\t* `true`; if one is found, it is set as the currently selected item. This is done\n\t* without triggering an [onChange]{@link moon.SimplePicker#onChange} event, as\n\t* it happens during initialization.\n\t*\n\t* @private\n\t*/\n\tinitializeActiveItem: function() {\n\t\tvar i,\n\t\t\tcontrols = this.getClientControls();\n\t\tfor (i = 0; i < controls.length; i++) {\n\t\t\tif (controls[i].active) {\n\t\t\t\tthis.selectedIndex = i;\n\t\t\t\tthis.selected = controls[i];\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectedIndexChanged: function() {\n\t\tdom.transform(this.$.client, {translateX: (this.selectedIndex * -100) + '%'});\n\t\tthis.updateMarqueeDisable();\n\t\tthis.setSelected(this.getClientControls()[this.selectedIndex]);\n\t\tthis.fireChangedEvent();\n\t\tthis.showHideNavButtons();\n\t\tthis.startMarquee();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateMarqueeDisable: function() {\n\t\tthis.stopMarquee();\n\t\tvar i,\n\t\t\tc = this.getClientControls();\n\t\tfor (i = 0; i < c.length; i++) {\n\t\t\tif (i == this.selectedIndex) {\n\t\t\t\tc[i].disabled = false;\n\t\t\t} else {\n\t\t\t\tc[i].disabled = true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tleft: function(sender, e) {\n\t\tif (e && e.sentHold) { return; }\n\t\tthis.previous(sender, e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tright: function(sender, e) {\n\t\tif (e && e.sentHold) { return; }\n\t\tthis.next(sender, e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdownLeft: function(sender, e) {\n\t\te.configureHoldPulse({endHold: 'onLeave', delay: 300});\n\t\tthis.left(sender, e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdownRight: function(sender, e) {\n\t\te.configureHoldPulse({endHold: 'onLeave', delay: 300});\n\t\tthis.right(sender, e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tconfigureSpotlightHoldPulse: function(sender, e) {\n\t\tif (e.keyCode === 13) {\n\t\t\te.configureHoldPulse({endHold: 'onLeave', delay: 300});\n\t\t}\n\t},\n\n\t/** \n\t* Cycles the selected item to the one before the currently selected item. If chained from\n\t* an event, {@link Spotlight} hold pulse events will be canceled once the first item is\n\t* reached, unless [wrap]{@link moon.SimplePicker#wrap} is `true`. When calling this method\n\t* directly, no arguments are required.\n\t*\n\t* @param {Object} sender - (unused) Sender, if chained from event.\n\t* @param {Object} e - Event object, if chained from event.\n\t* @public\n\t*/\n\tprevious: function(sender, e) {\n\t\tif (!this.disabled) {\n\t\t\tvar idx = this.selectedIndex - 1;\n\t\t\tif (idx < 0) {\n\t\t\t\tidx = this.wrap ? this.getClientControls().length - 1 : 0;\n\t\t\t}\n\t\t\tif (!this.wrap && idx === 0 && e && e.cancelHoldPulse) {\n\t\t\t\te.cancelHoldPulse();\n\t\t\t}\n\t\t\tthis.setSelectedIndex(idx);\n\t\t}\n\t},\n\n\t/** \n\t* Cycles the selected item to the one after the currently selected item. If chained from\n\t* an event, {@link Spotlight} hold pulse events will be canceled once the last item is\n\t* reached, unless [wrap]{@link moon.SimplePicker#wrap} is `true`. When calling this method\n\t* directly, no arguments are required.\n\t*\n\t* @param {Object} sender - (unused) Sender, if chained from event.\n\t* @param {Object} e - Event object, if chained from event.\n\t* @public\n\t*/\n\tnext: function(sender, e) {\n\t\tif (!this.disabled) {\n\t\t\tvar idx = this.selectedIndex + 1;\n\t\t\tif (idx > this.getClientControls().length - 1) {\n\t\t\t\tidx = this.wrap ? 0 : this.getClientControls().length - 1;\n\t\t\t}\n\t\t\tif (!this.wrap && idx === this.getClientControls().length - 1\n\t\t\t\t&& e && e.cancelHoldPulse) {\n\t\t\t\te.cancelHoldPulse();\n\t\t\t}\n\t\t\tthis.setSelectedIndex(idx);\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tIconButton = require('../IconButton');\n\n/**\n* {@link moon.VideoFullscreenToggleButton} is a specialized {@link moon.IconButton};\n* when placed inside a {@link moon.VideoPlayer}, the button may be tapped to toggle\n* the video player's fullscreen state.\n*\n* @class moon.VideoFullscreenToggleButton\n* @extends moon.IconButton\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.VideoFullscreenToggleButton */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.VideoFullscreenToggleButton',\n\n\t/**\n\t* @private\n\t*/\n\tkind: IconButton,\n\t\n\t/**\n\t* @private\n\t*/\n\ticon : 'exitfullscreen',\n\n\t/**\n\t* @private\n\t*/\n\tsmall: false,\n\n\t/**\n\t* @private\n\t*/\n\tclasses : 'moon-icon-video-round-controls-style moon-icon-exitfullscreen-font-style',\n\t\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\t/**\n\t\t* {@link moon.VideoPlayer#onRequestToggleFullscreen}\n\t\t*/\n\t\tonRequestToggleFullscreen:''\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\t/**\n\t\t* @fires moon.VideoPlayer#onRequestToggleFullscreen\n\t\t*/\n\t\tontap: 'doRequestToggleFullscreen'\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control'),\n\tImage = require('../../../enyo/lib/Image');\n\nvar\n\tImageBadge = require('../ImageBadge');\n\n/**\n* {@link moon.Image} is a simple control that wraps an {@link enyo.Image} to provide proper\n* alignment with text-based controls.\n*\n* In addition, `moon.Image` accepts optional {@link moon.ImageBadge} client components\n* (ImageBadge being the default kind of Image), which are placed inside a container positioned\n* over the image.  These badges are normally persistent, but may be shown or hidden based on\n* {@glossary Spotlight} focus, using the\n* [showBadgesOnSpotlight]{@link moon.Image#showBadgesOnSpotlight} property.\n*\n* ```\n* {kind: 'moon.Image', src: 'assets/movie.png', showBadgesOnSpotlight: true, components: [\n* \t{src: 'assets/icon-recommended.png'},\n* \t{src: 'assets/icon-favorite.png'},\n* \t{src: 'assets/icon-new/png', classes: 'float-right'}\n* ]}\n* ```\n*\n* @class moon.Image\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Image.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Image',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-image',\n\n\t/**\n\t* @private\n\t* @lends moon.Image.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* The URL of the image.\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: '',\n\n\t\t/**\n\t\t* The `alt` text for the image.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\talt: '',\n\n\t\t/**\n\t\t* If `true`, badges will only be shown when the image is within a\n\t\t* spotlightable component that has focus.  Otherwise, any badges provided\n\t\t* will always be shown.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tshowBadgesOnSpotlight: false,\n\n\t\t/**\n\t\t* The image sizing strategy. See {@link enyo.Image} for details.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsizing: '',\n\n\t\t/**\n\t\t* The image position when [sizing]{@link moon.Image#sizing} is used.  See\n\t\t* {@link enyo.Image} for details.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tposition: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: ImageBadge,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'image', kind: Image},\n\t\t{name: 'client', kind: Control, canGenerate: false, classes: 'moon-image-client'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.src', to: '.$.image.src'},\n\t\t{from: '.alt', to: '.$.image.alt'},\n\t\t{from: '.sizing', to: '.$.image.sizing'},\n\t\t{from: '.position', to: '.$.image.position'}\n\t],\n\n\t/**\n\t* Only generate `this.$.client` if the instance has components.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tif (this.getClientControls().length > 0) {\n\t\t\tthis.$.client.canGenerate = true;\n\t\t\tthis.addClass('has-children');\n\t\t}\n\n\t\tthis.showBadgesOnSpotlightChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowBadgesOnSpotlightChanged: function () {\n\t\tthis.addRemoveClass('show-on-spotlight', this.getShowBadgesOnSpotlight());\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tSlider = require('../Slider'),\n\tVideoFeedback = require('../VideoFeedback');\n\n/**\n* The parameter [object]{@glossary Object} used when displaying a {@link moon.VideoFeedback}\n* control.\n*\n* @typedef {Object} moon.VideoTransportSlider~FeedbackParameterObject\n* @property {Number} [playbackRate] - The playback rate.\n* @property {Number} [jumpSize] - The jump size.\n* @public\n*/\n\n/**\n* Fires when user starts dragging the video position knob. No additional data is\n* provided in this event.\n*\n* @event moon.VideoTransportSlider#onSeekStart\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when user changes the video position by tapping the bar.\n*\n* @event moon.VideoTransportSlider#onSeek\n* @type {Object}\n* @property {Number} value - The position to seek to.\n* @public\n*/\n\n/**\n* Fires when user stops dragging the video position knob.\n*\n* @event moon.VideoTransportSlider#onSeekFinish\n* @type {Object}\n* @property {Number} value - The position to seek to.\n* @public\n*/\n\n/**\n* Fires when cursor enters the tap area.\n*\n* @event moon.VideoTransportSlider#onEnterTapArea\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when cursor leaves the tap area.\n*\n* @event moon.VideoTransportSlider#onLeaveTapArea\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.VideoTransportSlider} extends {@link moon.Slider}, adding specialized\n* behavior related to video playback.\n*\n* ```javascript\n* {kind: 'moon.VideoTransportSlider', value: 30}\n* ```\n*\n* The [onSeekStart]{@link moon.VideoTransportSlider#onSeekStart} event is fired while\n* the control knob is being dragged, the\n* [onSeekFinish]{@link moon.VideoTransportSlider#onSeekFinish} event is fired when the\n* drag finishes, and the [onSeek]{@link moon.VideoTransportSlider#onSeek} event is fired\n* when the position is set by tapping the bar.\n*\n* @class moon.VideoTransportSlider\n* @extends moon.Slider\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.VideoTransportSlider.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.VideoTransportSlider',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Slider,\n\t\n\t/**\n\t* @private\n\t*/\n\tspotlight: false,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-video-transport-slider',\n\t\n\t/**\n\t* @private\n\t* @lends moon.VideoTransportSlider.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Starting point of slider.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\trangeStart: 0,\n\n\t\t/**\n\t\t* Ending point of slider.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 100\n\t\t* @public\n\t\t*/\n\t\trangeEnd: 100,\n\t\t\n\t\t/**\n\t\t* The position where the slider begins, expressed as a number between `0` and `1`.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0.0625\n\t\t* @public\n\t\t*/\n\t\tbeginPosition: 0.0625,\n\t\t\n\t\t/**\n\t\t* The position where the slider ends, expressed as a number between `0` and `1`.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0.9375\n\t\t* @public\n\t\t*/\n\t\tendPosition: 0.9375,\n\t\t\n\t\t/**\n\t\t* Controls the slider draw.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tsyncTick: true,\n\t\t\n\t\t/**\n\t\t* Determines whether the dummy area is shown.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowDummyArea: true,\n\t\t\n\t\t/**\n\t\t* When `true`, label is shown at the start and end positions.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowTickText: true,\n\t\t\n\t\t/**\n\t\t* When `true`, tick bar is shown at the start and end positions.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowTickBar: true,\n\t\t\n\t\t/**\n\t\t* When `true`, progress may extend past the hour markers.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tliveMode: false,\n\n\t\t/**\n\t\t* CSS classes to apply to background progress bar.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-video-transport-slider-bg-bar'\n\t\t* @public\n\t\t*/\n\t\tbgBarClasses: 'moon-video-transport-slider-bg-bar',\n\t\t\n\t\t/**\n\t\t* CSS classes to apply to progress bar.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-video-transport-slider-bar-bar'\n\t\t* @public\n\t\t*/\n\t\tbarClasses: 'moon-video-transport-slider-bar-bar',\n\t\t\n\t\t/**\n\t\t* CSS classes to apply to popup label.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-video-transport-slider-popup-label'\n\t\t* @public\n\t\t*/\n\t\tpopupLabelClasses: 'moon-video-transport-slider-popup-label',\n\t\t\n\t\t/**\n\t\t* CSS classes to apply to knob.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-video-transport-slider-knob'\n\t\t* @public\n\t\t*/\n\t\tknobClasses: 'moon-video-transport-slider-knob',\n\t\t\n\t\t/**\n\t\t* CSS classes to apply to tap area.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon-video-transport-slider-taparea'\n\t\t* @public\n\t\t*/\n\t\ttapAreaClasses: 'moon-video-transport-slider-taparea',\n\t\t\n\t\t/**\n\t\t* Color of value popup\n\t\t*\n\t\t* @type {String}\n\t\t* @default '#fff'\n\t\t* @public\n\t\t*/\n\t\tpopupColor: '#fff',\n\t\t\n\t\t/**\n\t\t* Popup offset in pixels.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 25\n\t\t* @public\n\t\t*/\n\t\tpopupOffset: 25,\n\t\t\n\t\t/**\n\t\t* Threshold value (percentage) for using animation effect on slider progress change.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1\n\t\t* @public\n\t\t*/\n\t\tsmallVariation: 1,\n\t\t\n\t\t/**\n\t\t* Popup height in pixels.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 67\n\t\t* @public\n\t\t*/\n\t\tpopupHeight: 67\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonTimeupdate: 'timeUpdate',\n\t\tonresize: 'handleResize'\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonSeekStart: '',\n\t\tonSeek: '',\n\t\tonSeekFinish: '',\n\t\tonEnterTapArea: '',\n\t\tonLeaveTapArea: ''\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\ttickComponents: [\n\t\t{name: 'startWrapper', kind: Control, classes: 'moon-video-transport-slider-indicator-wrapper start', components: [\n\t\t\t{name: 'beginTickBar', kind: Control, classes: 'moon-video-transport-slider-indicator-bar-left'},\n\t\t\t{name: 'beginTickText', kind: Control, classes: 'moon-video-transport-slider-indicator-text', content: '00:00'}\n\t\t]},\n\t\t{name: 'endWrapper', kind: Control, classes: 'moon-video-transport-slider-indicator-wrapper end', components: [\n\t\t\t{name: 'endTickBar', kind: Control, classes: 'moon-video-transport-slider-indicator-bar-right'},\n\t\t\t{name: 'endTickText', kind: Control, classes: 'moon-video-transport-slider-indicator-text', content: '00:00'}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tpopupLabelComponents: [\n\t\t{name: 'feedback', kind: VideoFeedback},\n\t\t{name: 'popupLabelText', kind: Control}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\t_previewMode: false,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tSlider.prototype.create.apply(this, arguments);\n\t\tthis.$.popup.setAutoDismiss(false);\t\t//* Always showing popup\n\t\tthis.$.popup.captureEvents = false;\t\t//* Hot fix for bad originator on tap, drag ...\n\t\tthis.$.tapArea.onmove = 'preview';\n\t\tthis.$.tapArea.onenter = 'enterTapArea';\n\t\tthis.$.tapArea.onleave = 'leaveTapArea';\n\t\t//* Extend components\n\t\tthis.createTickComponents();\n\t\tthis.createPopupLabelComponents();\n\t\tthis.showTickTextChanged();\n\t\tthis.showTickBarChanged();\n\n\t\tif (window.ilib) {\n\t\t\tthis.durfmt = new ilib.DurFmt({length: 'medium', style: 'clock', useNative: false});\n\t\t\tthis.$.beginTickText.setContent(this.formatTime(0));\n\n\t\t\tvar loc = new ilib.Locale(),\n\t\t\t\tlanguage = loc.getLanguage(),\n\t\t\t\t// Hash of languages and the additional % widths they'll need to not run off the edge.\n\t\t\t\tlangWidths = {\n\t\t\t\t\tja: 0.05,\n\t\t\t\t\tpt: 0.05\n\t\t\t\t};\n\n\t\t\tif (langWidths[language]) {\n\t\t\t\tthis.set('beginPosition', this.get('beginPosition') + langWidths[language] );\n\t\t\t\tthis.set('endPosition', this.get('endPosition') - langWidths[language] );\n\t\t\t}\n\t\t}\n\n\t\tthis.beginPositionChanged();\n\t\tthis.endPositionChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateTickComponents: function() {\n\t\tthis.createComponents(this.tickComponents, {owner: this, addBefore: this.$.tapArea});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreatePopupLabelComponents: function() {\n\t\tthis.$.popupLabel.createComponents(this.popupLabelComponents, {owner: this});\n\t\tthis.currentTime = 0;\n\t},\n\n\t/**\n\t* @fires enyo.VideoTransportSlider#onEnterTapArea\n\t* @private\n\t*/\n\tenterTapArea: function(sender, e) {\n\t\tif (!this.disabled) {\n\t\t\tthis.addClass('visible');\n\t\t\tthis.startPreview();\n\t\t\tthis.doEnterTapArea();\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.VideoTransportSlider#onLeaveTapArea\n\t* @private\n\t*/\n\tleaveTapArea: function(sender, e) {\n\t\tthis.removeClass('visible');\n\t\tthis.endPreview();\n\t\tthis.doLeaveTapArea();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpreview: function(sender, e) {\n\t\tif (!this.disabled && !this.dragging) {\n\t\t\tvar v = this.calcKnobPosition(e);\n\t\t\tthis.currentTime = this.transformToVideo(v);\n\t\t\tthis._updateKnobPosition(this.currentTime);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstartPreview: function(sender, e) {\n\t\tthis._previewMode = true;\n\t\tthis.$.feedback.setShowing(false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tendPreview: function(sender, e) {\n\t\tthis._previewMode = false;\n\t\tthis.currentTime = this._currentTime;\n\t\tthis._updateKnobPosition(this.currentTime);\n\t\tif (this.$.feedback.isPersistShowing()) {\n\t\t\tthis.$.feedback.setShowing(true);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tisInPreview: function(sender, e) {\n\t\treturn this._previewMode;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleResize: function() {\n\t\tSlider.prototype.handleResize.apply(this, arguments);\n\t\tthis.updateSliderRange();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateSliderRange: function() {\n\t\tthis.beginTickPos = (this.max-this.min) * this.get('beginPosition');\n\t\tthis.endTickPos = (this.max-this.min) * this.get('endPosition');\n\n\t\tif(this.showDummyArea) {\n\t\t\tthis.setRangeStart(this.beginTickPos);\n\t\t\tthis.setRangeEnd(this.endTickPos);\n\t\t} else {\n\t\t\tthis.setRangeStart(this.min);\n\t\t\tthis.setRangeEnd(this.max);\n\t\t}\n\t\tthis.updateKnobPosition(this.value);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetMin: function() {\n\t\tSlider.prototype.setMin.apply(this, arguments);\n\t\tthis.updateSliderRange();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetMax: function() {\n\t\tSlider.prototype.setMax.apply(this, arguments);\n\t\tthis.updateSliderRange();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetRangeStart: function(val) {\n\t\tthis.rangeStart = this.clampValue(this.getMin(), this.getMax(), val);\n\t\tthis.rangeStartChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetRangeEnd: function(val) {\n\t\tthis.rangeEnd = this.clampValue(this.getMin(), this.getMax(), val);\n\t\tthis.rangeEndChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbeginPositionChanged: function() {\n\t\t// Set the width of the wrapper to twice the amount of it's position from the start.\n\t\tthis.$.startWrapper.applyStyle('width', (this.get('beginPosition') * 200) + '%');\n\t\tthis.updateSliderRange();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tendPositionChanged: function() {\n\t\t// Set the width of the wrapper to twice the amount of it's position from the end.\n\t\tthis.$.endWrapper.applyStyle('width', ((this.get('endPosition') - 1) * -200) + '%');\n\t\tthis.updateSliderRange();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowTickTextChanged: function() {\n\t\tthis.$.beginTickText.setShowing(this.getShowTickText());\n\t\tthis.$.endTickText.setShowing(this.getShowTickText());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowTickBarChanged: function() {\n\t\tif(this.showDummyArea) {\n\t\t\tthis.showTickBar = true;\n\t\t}\n\t\tthis.$.beginTickBar.setShowing(this.getShowTickBar());\n\t\tthis.$.endTickBar.setShowing(this.getShowTickBar());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trangeStartChanged: function() {\n\t\tthis.updateInternalProperty();\n\t\tvar p = this._calcPercent(this.rangeStart),\n\t\t\tproperty = 'margin-left';\n\t\tif (this.liveMode) {\n\t\t\tproperty = 'padding-left';\n\t\t}\n\t\tthis.$.bar.applyStyle(property, p + '%');\n\t\tthis.$.bgbar.applyStyle(property, p + '%');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trangeEndChanged: function() {\n\t\tthis.updateInternalProperty();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateInternalProperty: function() {\n\t\tthis.updateScale();\n\t\tthis.progressChanged();\n\t\tthis.bgProgressChanged();\n\t},\n\t//* Sets value of hidden variable, _scaleFactor_.\n\tupdateScale: function() {\n\t\tthis.scaleFactor = (this.rangeEnd-this.rangeStart)/(this.max-this.min);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcPercent: function(val) {\n\t\treturn (this.calcRatio(val) * 100) * this.scaleFactor;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_calcPercent: function(val) {\n\t\treturn this.calcRatio(val) * 100;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcVariationRatio: function(val) {\n\t\treturn (val - this.value) / (this.max - this.min);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcVariationPercent: function(val) {\n\t\treturn this.calcVariationRatio(val) * 100;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateKnobPosition: function(val) {\n\t\tif (!this.dragging && this.isInPreview()) { return; }\n\t\tthis._updateKnobPosition(val);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_updateKnobPosition: function(val) {\n\t\tvar p = this.clampValue(this.min, this.max, val);\n\t\tp = this._calcPercent(p);\n\t\tvar slider = this.inverseToSlider(p);\n\t\tthis.$.knob.applyStyle('left', slider + '%');\n\t\tthis.$.popup.addRemoveClass('moon-slider-popup-flip-h', slider > 50);\n\t\tthis.$.popupLabel.addRemoveClass('moon-slider-popup-flip-h', slider > 50);\n\t\tif(this.currentTime !== undefined) {\n\t\t\tthis.$.popupLabelText.setContent(this.formatTime(this.currentTime));\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinverseToSlider: function(percent) {\n\t\tvar val = this.scaleFactor * percent + this._calcPercent(this.rangeStart);\n\t\treturn val;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttransformToVideo: function(val) {\n\t\tif (this.showDummyArea && (val < this.beginTickPos)) {\n\t\t\tval = this.rangeStart;\n\t\t}\n\t\tif (this.showDummyArea && (val > this.endTickPos)) {\n\t\t\tval = this.rangeEnd;\n\t\t}\n\t\treturn (val - this.rangeStart) / this.scaleFactor;\n\t},\n\t\n\t/**\n\t* If user presses `this.$.tapArea`, seeks to that point.\n\t*\n\t* @private\n\t*/\n\ttap: function(sender, e) {\n\t\tif (this.tappable && !this.disabled) {\n\t\t\tvar v = this.calcKnobPosition(e);\n\n\t\t\tv = this.transformToVideo(v);\n\t\t\tthis.sendSeekEvent(v);\n\n\t\t\tif (this.isInPreview()) {\n\t\t\t\t//* This will move popup position to playing time when preview move is end\n\t\t\t\tthis._currentTime = v;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetValue: function(val) {\n\t\tthis.currentTime = val;\n\t\tif(Math.abs(this.calcVariationPercent(val)) > this.smallVariation) {\n\t\t\tSlider.prototype.setValue.apply(this, arguments);\n\t\t} else {\n\t\t\tthis._setValue(val);\n\t\t}\n\t},\n\n\t/**\n\t* If `dragstart`, bubbles [onSeekStart]{@link moon.VideoTransportSlider#onSeekStart}\n\t* event.\n\t*\n\t* @fires moon.VideoTransportSlider#onSeekStart\n\t* @private\n\t*/\n\tdragstart: function(sender, e) {\n\t\tif (this.disabled) {\n\t\t\treturn; // return nothing\n\t\t}\n\t\tif (e.horizontal) {\n\t\t\tvar v = this.calcKnobPosition(e);\n\t\t\tif( this.showDummyArea && (v < this.beginTickPos || v > this.endTickPos) ) {\n\t\t\t\t// TODO : action in dummy area\n\t\t\t\tthis.dummyAction = true;\n\t\t\t} else {\n\t\t\t\t// the call to the super class freezes spotlight, so it needs to be unfrozen in dragfinish\n\t\t\t\tvar dragstart = Slider.prototype.dragstart.apply(this, arguments);\n\t\t\t\tif (dragstart) {\n\t\t\t\t\tthis.doSeekStart();\n\t\t\t\t}\n\t\t\t\tthis.dummyAction = false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn true;\n\t},\n\t\n\t/**\n\t* If `drag`, bubbles [onSeek]{@link moon.VideoTransportSlider#onSeek} event and\n\t* overrides parent `drag` handler.\n\t*\n\t* @private\n\t*/\n\tdrag: function(sender, e) {\n\t\tif (this.dragging) {\n\t\t\tvar v = this.calcKnobPosition(e);\n\n\t\t\t//* Default behavior to support elastic effect\n\t\t\tv = this.transformToVideo(v);\n\t\t\tif (this.constrainToBgProgress === true) {\n\t\t\t\tv = (this.increment) ? this.calcConstrainedIncrement(v) : v;\n\t\t\t\tvar ev = this.bgProgress + (v-this.bgProgress)*0.4;\n\t\t\t\tv = this.clampValue(this.min, this.bgProgress, v);\n\t\t\t\tthis.elasticFrom = (this.elasticEffect === false || this.bgProgress > v) ? v : ev;\n\t\t\t\tthis.elasticTo = v;\n\t\t\t} else {\n\t\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\n\t\t\t\tv = this.clampValue(this.min, this.max, v);\n\t\t\t\tthis.elasticFrom = this.elasticTo = v;\n\t\t\t}\n\t\t\tthis.currentTime = v;\n\t\t\tthis.updateKnobPosition(this.elasticFrom);\n\n\t\t\tif (this.lockBar) {\n\t\t\t\tthis.setProgress(this.elasticFrom);\n\t\t\t\tthis.sendChangingEvent({value: this.elasticFrom});\n\t\t\t\tthis.sendSeekEvent(this.elasticFrom);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* If `dragfinish`, bubbles\n\t* [onSeekFinish]{@link moon.VideoTransportSlider#onSeekFinish} event and overrides\n\t* parent `dragfinish` handler.\n\t*\n\t* @fires moon.VideoTransportSlider#onSeekFinish\n\t* @private\n\t*/\n\tdragfinish: function(sender, e) {\n\t\tif (this.disabled) {\n\t\t\treturn;\n\t\t}\n\t\tif(!this.dummyAction) {\n\t\t\tvar v = this.calcKnobPosition(e);\n\t\t\tv = this.transformToVideo(v);\n\t\t\tvar z = this.elasticTo;\n\t\t\tif (this.constrainToBgProgress === true) {\n\t\t\t\tz = (this.increment) ? this.calcConstrainedIncrement(z) : z;\n\t\t\t\tthis.animateTo(this.elasticFrom, z);\n\t\t\t\tv = z;\n\t\t\t} else {\n\t\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\n\t\t\t\tthis._setValue(v);\n\t\t\t}\n\t\t\te.preventTap();\n\t\t\t// this.hideKnobStatus();\n\t\t\tthis.doSeekFinish({value: v});\n\t\t\tSpotlight.unfreeze();\n\t\t}\n\t\tthis.$.knob.removeClass('active');\n\t\tthis.dummyAction = false;\n\t\tthis.dragging = false;\n\t\treturn true;\n\t},\n\n\t/**\n\t* Sends [onSeek]{@link moon.VideoTransportSlider#onSeek} event.\n\t*\n\t* @fires moon.VideoTransportSlider#onSeek\n\t* @private\n\t*/\n\tsendSeekEvent: function(val) {\n\t\tthis.doSeek({value: val});\n\t},\n\n\t/**\n\t* During time update, updates buffered progress, canvas, video currentTime, and duration.\n\t*\n\t* @private\n\t*/\n\ttimeUpdate: function(sender, e) {\n\t\tthis._currentTime = sender._currentTime;\n\t\tif (!this.dragging && this.isInPreview()) { return; }\n\t\tthis._duration = sender.duration;\n\t\tthis.currentTime = this._currentTime;\n\t\tthis.duration = this._duration;\n\t\tthis.$.endTickText.setContent(this.formatTime(this.duration));\n\t},\n\n\t/**\n\t* Properly formats time.\n\t*\n\t* @private\n\t*/\n\tformatTime: function(val) {\n\t\tvar hour = Math.floor(val / (60*60));\n\t\tvar min = Math.floor((val / 60) % 60);\n\t\tvar sec = Math.floor(val % 60);\n\t\tif (this.durfmt) {\n\t\t\tvar time = {minute: min, second: sec};\n\t\t\tif (hour) {\n\t\t\t\ttime.hour = hour;\n\t\t\t}\n\t\t\treturn this.durfmt.format(time);\n\t\t} else {\n\t\t\treturn (hour ? this.padDigit(hour) + ':' : '') + this.padDigit(min) + ':' + this.padDigit(sec);\n\t\t}\n\t},\n\n\t/**\n\t* Time formatting helper.\n\t*\n\t* @private\n\t*/\n\tpadDigit: function(val) {\n\t\treturn (val) ? (String(val).length < 2) ? '0'+val : val : '00';\n\t},\n\t\n\t/**\n\t* Sends current status to [feedback]{@link moon.VideoFeedback} control in response to\n\t* user input.\n\t*\n\t* @param {String} - msg The string to display.\n\t* @param {moon.VideoTransportSlider~FeedbackParameterObject} params - A\n\t*\t[hash]{@glossary Object} of parameters that accompany the message.\n\t* @param {Boolean} persist - If `true`, the [feedback]{@link moon.VideoFeedback} control will\n\t*\tnot be automatically hidden.\n\t* @param {String} leftSrc - The source url for the image displayed on the left side of\n\t*\tthe feedback control.\n\t* @param {String} rightSrc - The source url for the image displayed on the right side\n\t*\tof the feedback control.\n\t* @public\n\t*/\n\tfeedback: function(msg, params, persist, leftSrc, rightSrc) {\n\t\tthis.showKnobStatus();\n\t\tthis.$.feedback.feedback(msg, params, persist, leftSrc, rightSrc, this.isInPreview());\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tri = require('../../../enyo/lib/resolution'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tInput = require('../Input'),\n\tInputDecorator = require('../InputDecorator'),\n\tStyleAnimator = require('../StyleAnimator'),\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeText = Marquee.Text;\n\nvar _delayedMeasurementFinished;\n\n/**\n* Custom input event to allow apps to distinguish header inputs from regular inputs.\n*\n* @event moon.Header#onInputHeaderInput\n* @type {Object}\n* @property {Object} originalEvent - The original event fired from the input. See\n*\t{@link enyo.Input#oninput} for more event information.\n* @public\n*/\n\n/**\n* Custom input change event to allow apps to distinguish header input changes from\n* regular input changes.\n*\n* @event moon.Header#onInputHeaderChange\n* @type {Object}\n* @property {Object} originalEvent - The original event fired from the input. See\n*\t{@link enyo.Input#onchange} for more event information.\n* @public\n*/\n\n/**\n* {@link moon.Header} is a Moonstone-styled control with a large title and an area for\n* additional controls.\n*\n* @class moon.Header\n* @extends enyo.Control\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Header.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Header',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-header',\n\n\t/**\n\t* @private\n\t* @lends moon.Header.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Title of the header.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitle: '',\n\n\t\t/**\n\t\t* Text above the header.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitleAbove: '',\n\n\t\t/**\n\t\t* Text below the header.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitleBelow: '',\n\n\t\t/**\n\t\t* Sub-text below the header.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsubTitleBelow: '',\n\n\t\t/**\n\t\t* Size of the header, for styling purposes. Will be one of `'large'` (the default),\n\t\t* `'medium'`, or `'small'`. If `'large'`, the `moon-header` CSS class will be applied\n\t\t* to this header; if `'medium'`, the `moon-medium-header` class will be applied; if\n\t\t* `'small'`, the `moon-small-header` class will be applied.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'large'\n\t\t* @public\n\t\t*/\n\t\ttype: 'large',\n\n\t\t/**\n\t\t* If `true`, the `moon-medium-header` CSS class will be applied to this header.\n\t\t*\n\t\t* Note that this property will be deprecated soon. For now, it is being left in\n\t\t* for backward compatibility. Until it is removed, `small: true` refers to the\n\t\t* historical header size, which is now equivalent to `type: 'medium'`.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tsmall: false,\n\n\t\t/**\n\t\t* URL(s) of background image(s).\n\t\t* This may be a string referring a single background image, or an array of strings\n\t\t* referring to multiple background images. To support multiple background-images at\n\t\t* multiple resolutions, this property can accept several formats:\n\t\t* 1) A string src,\n\t\t* 2) An array of string srcs,\n\t\t* 3) A [MultiRes Hash]{@link moon.ri.selectSrc~src}\n\t\t* 4) An array of [MultiRes Hashs]{@link moon.ri.selectSrc~src}\n\t\t*\n\t\t* @type {(String|String[]|moon.ri.selectSrc~src|moon.ri.selectSrc~src[])}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tbackgroundSrc: null,\n\n\t\t/**\n\t\t* Position of background image, defined as a string of the form\n\t\t* `'<vertical> <horizontal>'`, with a space separating the `<vertical>`\n\t\t* and `<horizontal>` values (e.g., `'top right'`). If no second property\n\t\t* is specified, the `<horizontal>` value will default to `'right'`. As\n\t\t* with [backgroundSrc]{@link moon.Header#backgroundSrc}, an array of strings\n\t\t* may be supplied to position multiple background images. The order of items\n\t\t* should be the same as in `backgroundSrc`.\n\t\t*\n\t\t* @type {(String|String[])}\n\t\t* @default 'top right'\n\t\t* @public\n\t\t*/\n\t\tbackgroundPosition: 'top right',\n\n\t\t/**\n\t\t* When using a full-bleed background image, set this property to `true` to indent\n\t\t* the header text/controls and remove the header lines.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tfullBleedBackground: false,\n\n\t\t/**\n\t\t* If `true`, title will be an input.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tinputMode: false,\n\n\t\t/**\n\t\t* When `true`, input will be blurred on Enter keypress, if it was previously\n\t\t* focused.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdismissOnEnter: false,\n\n\t\t/**\n\t\t* Text to display when the input is empty.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tplaceholder: '',\n\n\t\t/**\n\t\t* The value of the input.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tvalue: '',\n\n\t\t/**\n\t\t* When `true`, the title text will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercase: true,\n\n\t\t/**\n\t\t* @deprecated Replaced by [uppercase]{@link moon.Header#uppercase}.\n\t\t*\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\n\t\t* an effect when explicitly set (for complete backward compatibility).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\ttitleUpperCase: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport],\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnSpotlight: false,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnHover: true,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnRender: true,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnRenderDelay: 10000,\n\n\t/**\n\t* Described in .moon-header class\n\t*\n\t* @private\n\t*/\n\tstandardHeight: 360,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\toninput: 'handleInput',\n\t\tonchange: 'handleChange',\n\t\tonRequestCreateListActions: 'handleRequestCreateComponents',\n\t\tonListActionOpenChanged: 'handleListActionOpenChanged'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* Custom input event to allow apps to distinguish header inputs from regular inputs.\n\t\t*/\n\t\tonInputHeaderInput: '',\n\n\t\t/**\n\t\t* Custom input change event to allow apps to distinguish header input changes from\n\t\t* regular input changes.\n\t\t*/\n\t\tonInputHeaderChange: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'titleAbove', kind: Control, classes: 'moon-super-header-text moon-header-title-above'},\n\t\t{name: 'titleWrapper', kind: Control, classes: 'moon-header-title-wrapper', components: [\n\t\t\t{name: 'title', kind: MarqueeText, classes: 'moon-header-text moon-header-title', canGenerate: false},\n\t\t\t{name: 'inputDecorator', kind: InputDecorator, classes: 'moon-input-header-input-decorator',canGenerate: false, components: [\n\t\t\t\t{name: 'titleInput', kind: Input, classes: 'moon-header-text moon-header-title'}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'titleBelow', kind: MarqueeText, classes: 'moon-sub-header-text moon-header-title-below'},\n\t\t{name: 'subTitleBelow', kind: MarqueeText, classes: 'moon-body-text moon-header-sub-title-below'},\n\t\t{name: 'client', kind: Control, classes: 'moon-hspacing moon-header-client'},\n\t\t{name: 'animator', kind: StyleAnimator, onComplete: 'animationComplete'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.value', to: '.$.titleInput.value', oneWay: false},\n\t\t{from: '.dismissOnEnter', to: '.$.titleInput.dismissOnEnter'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tthis.inherited(arguments);\n\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// the titleUpperCase property is fully deprecated and removed. The legacy\n\t\t// property takes precedence if it exists.\n\t\tif (this.titleUpperCase !== null) this.uppercase = this.titleUpperCase;\n\n\t\t// Note: This smallchanged() line will be deprecated soon. For backward compatiblity, I leave it for a\n\t\t// while.\n\t\tthis.smallChanged();\n\t\tthis.typeChanged();\n\t\tthis.titleChanged();\n\t\tthis.titleAboveChanged();\n\t\tthis.titleBelowChanged();\n\t\tthis.subTitleBelowChanged();\n\t\tthis.allowHtmlChanged();\n\t\tthis.backgroundSrcChanged();\n\t\tthis.backgroundPositionChanged();\n\t\tthis.inputModeChanged();\n\t\tthis.placeholderChanged();\n\t\tthis.fullBleedBackgroundChanged();\n\t},\n\n\trendered: function() {\n\t\tthis.inherited(arguments);\n\t\t// At the first render, the fonts may not have finished loading yet. We delay the first\n\t\t// time using an async method, and set a flag so we know the deed is done at subsequent calls.\n\t\tif (_delayedMeasurementFinished) {\n\t\t\tthis.adjustTitleWidth();\n\t\t} else {\n\t\t\tutil.asyncMethod(this, function () {\n\t\t\t\tthis.adjustTitleWidth();\n\t\t\t\t_delayedMeasurementFinished = true;\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tallowHtmlChanged: function () {\n\t\tthis.$.title.setAllowHtml( this.get('type') == 'small' ? true : this.allowHtml );\n\t\tthis.$.titleBelow.setAllowHtml(this.allowHtml);\n\t\tthis.$.subTitleBelow.setAllowHtml(this.allowHtml);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackgroundSrcChanged: function () {\n\t\tvar bgs = (util.isArray(this.backgroundSrc)) ? this.backgroundSrc : [this.backgroundSrc];\n\t\tbgs = util.map(bgs, this.bindSafely(function (inBackgroundSource) {\n\t\t\t\treturn inBackgroundSource ? 'url(' + ri.selectSrc(inBackgroundSource) + ')' : null;\n\t\t\t}));\n\t\tthis.applyStyle('background-image', (bgs.length) ? bgs.join(', ') : null);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackgroundPositionChanged: function () {\n\t\tvar bgp = this.backgroundPosition;\n\t\tif (util.isArray(bgp)) {\n\t\t\tbgp = (bgp.length) ? bgp.join(', ') : null;\n\t\t}\n\t\t// If `this.backgroundPosition` is set explicitly to inherit or initial, apply that\n\t\t// instead of assuming a position.\n\t\tif (bgp == 'inherit' || bgp == 'initial') {\n\t\t\tthis.applyStyle('background-position', bgp);\n\t\t\treturn;\n\t\t}\n\t\tvar posArray = bgp && bgp.split(' ') || [],\n\t\t\tposStr = (posArray.length === 0) ? 'top right'\n\t\t\t\t\t: (posArray.length === 1) ? posArray[0] + ' right' : bgp;\n\t\tthis.applyStyle('background-position', posStr);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfullBleedBackgroundChanged: function () {\n\t\tthis.addRemoveClass('full-bleed', this.fullBleedBackground);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleRequestCreateComponents: function (inSender, inEvent) {\n\t\tthis.controlParent = null;\n\t\tthis.createComponents(inEvent.components, {owner: inEvent.originator});\n\t\tthis.discoverControlParent();\n\t},\n\n\t/**\n\t* Collapses the drawer, hiding its contents.\n\t*\n\t* @public\n\t*/\n\tcollapseToSmall: function () {\n\t\tif (this.collapsed) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar myStyle = dom.getComputedStyle(this.hasNode());\n\t\tvar titleWrapperStyle = dom.getComputedStyle(this.$.titleWrapper.hasNode());\n\t\tvar titleBelowStyle = dom.getComputedStyle(this.$.titleBelow.hasNode());\n\t\tvar subTitleBelowStyle = dom.getComputedStyle(this.$.subTitleBelow.hasNode());\n\t\tvar titleAboveStyle = dom.getComputedStyle(this.$.titleAbove.hasNode());\n\n\t\t// TODO - animator should track initial positions so we don't have to store these if we\n\t\t// want to reverse the animation\n\t\tthis.smallAnimProps = {\n\t\t\t'height': myStyle['height']\n\t\t};\n\t\tthis.$.titleWrapper.smallAnimProps = {\n\t\t\t'padding-left': titleWrapperStyle['padding-left'],\n\t\t\t'top': titleWrapperStyle['top']\n\t\t};\n\t\tthis.$.title.smallAnimProps = {};\n\t\tthis.$.titleAbove.smallAnimProps = {\n\t\t\t'height': titleAboveStyle['height'],\n\t\t\t'opacity': titleAboveStyle['opacity']\n\t\t};\n\t\tthis.$.titleBelow.smallAnimProps = {\n\t\t\t'top': titleBelowStyle['top']\n\t\t};\n\t\tthis.$.subTitleBelow.smallAnimProps = {\n\t\t\t'top': subTitleBelowStyle['top']\n\t\t};\n\n\t\tthis.$.animator.newAnimation({\n\t\t\tname: 'collapseToSmall',\n\t\t\tduration: 200,\n\t\t\ttimingFunction: 'linear',\n\t\t\tkeyframes: {\n\t\t\t\t0: [{\n\t\t\t\t\tcontrol: this,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleWrapper,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'padding-left': 'current',\n\t\t\t\t\t\t'top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleAbove,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': 'current',\n\t\t\t\t\t\t'opacity': 'current',\n\t\t\t\t\t\t'margin-top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.title,\n\t\t\t\t\tproperties: {}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleBelow,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\t70: [],\n\t\t\t\t100: [{\n\t\t\t\t\tcontrol: this,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': dom.unit(ri.scale(260), 'rem')\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleWrapper,\n\t\t\t\t\tproperties: {}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleAbove,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': 0,\n\t\t\t\t\t\t'opacity': 0,\n\t\t\t\t\t\t'margin-top': 0\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.title,\n\t\t\t\t\tproperties: {}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleBelow,\n\t\t\t\t\tproperties: {}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\n\t\t\t\t\tproperties: {}\n\t\t\t\t}]\n\n\t\t\t}\n\t\t});\n\t\tthis.$.animator.play('collapseToSmall');\n\t\tthis.collapsed = true;\n\t},\n\n\t/**\n\t* Expands the drawer, showing its contents.\n\t*\n\t* @public\n\t*/\n\texpandToLarge: function () {\n\t\tif (!this.collapsed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$.animator.newAnimation({\n\t\t\tname: 'expandToLarge',\n\t\t\tduration: 200,\n\t\t\ttimingFunction: 'linear',\n\t\t\tkeyframes: {\n\t\t\t\t0: [{\n\t\t\t\t\tcontrol: this,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleWrapper,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'padding-left': 'current',\n\t\t\t\t\t\t'top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleAbove,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': 'current',\n\t\t\t\t\t\t'opacity': 'current',\n\t\t\t\t\t\t'margin-top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.title,\n\t\t\t\t\tproperties: {}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleBelow,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'top': 'current'\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\t30: [],\n\t\t\t\t100: [{\n\t\t\t\t\tcontrol: this,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': this.smallAnimProps.height\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleWrapper,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'padding-left': this.$.titleWrapper.smallAnimProps['padding-left'],\n\t\t\t\t\t\t'top': this.$.titleWrapper.smallAnimProps['top']\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleAbove,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'height': this.$.titleAbove.smallAnimProps['height'],\n\t\t\t\t\t\t'opacity': this.$.titleAbove.smallAnimProps['opacity'],\n\t\t\t\t\t\t'margin-top': this.$.titleAbove.smallAnimProps['margin-top']\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.title,\n\t\t\t\t\tproperties: {}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.titleBelow,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'top': this.$.titleBelow.smallAnimProps['top']\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'top': this.$.subTitleBelow.smallAnimProps['top']\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}\n\t\t});\n\t\tthis.$.animator.play('expandToLarge');\n\t\tthis.collapsed = false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttypeChanged: function () {\n\t\tthis.addRemoveClass('moon-medium-header', this.get('type') == 'medium');\n\t\tthis.addRemoveClass('moon-small-header', this.get('type') == 'small');\n\t\tthis.contentChanged();\n\t\tif (this.generated) this.adjustTitleWidth();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tthis.$.titleInput.detectTextDirectionality((this.$.titleInput.value || this.$.titleInput.value === 0 || this.$.titleInput.value === '0') ? this.$.titleInput.value : this.$.titleInput.get('placeholder'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tadjustTitleWidth: function() {\n\t\tvar type = this.get('type'),\n\t\t\t// Measure client area's width + 40px of spacing\n\t\t\tclient = this.$.client ? this.$.client.hasNode() : null,\n\t\t\tclientWidth = client ? client.offsetWidth : null,\n\t\t\tclientSpace = dom.unit(clientWidth + ri.scale(36), 'rem'),\n\t\t\trtl = this.rtl;\n\n\t\tif (client) {\n\t\t\t// Set the margin on the correct side for the correct control, otherwise set it to nothing\n\t\t\tthis.$.title.applyStyle('margin-right', (type == 'small' && !rtl && clientWidth) ? clientSpace : null);\n\t\t\tthis.$.title.applyStyle('margin-left', (type == 'small' && rtl && clientWidth) ? clientSpace : null);\n\n\t\t\tthis.$.titleBelow.applyStyle('margin-right', (type == 'medium' && !rtl && clientWidth) ? clientSpace : null);\n\t\t\tthis.$.titleBelow.applyStyle('margin-left', (type == 'medium' && rtl && clientWidth) ? clientSpace : null);\n\n\t\t\tthis.$.subTitleBelow.applyStyle('margin-right', (type == 'medium' && !rtl && clientWidth) ? clientSpace : null);\n\t\t\tthis.$.subTitleBelow.applyStyle('margin-left', (type == 'medium' && rtl && clientWidth) ? clientSpace : null);\n\t\t}\n\t},\n\n\t/**\n\t* Note that this method will be deprecated soon. For now, it is being left in for\n\t* backward compatibility.\n\t*\n\t* @private\n\t*/\n\tsmallChanged: function () {\n\t\tthis.addRemoveClass('moon-medium-header', this.get('small'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tvar title = this.get('uppercase')\n\t\t\t\t\t? util.toUpperCase(this.get('title') || this.get('content'))\n\t\t\t\t\t: (this.get('title') || this.get('content')),\n\t\t\tsubtitle = this.get('titleBelow');\n\t\tif ((this.get('type') == 'small') && subtitle) {\n\t\t\tthis.$.title.set('allowHtml', true);\n\t\t\tthis.$.title.set('content', Control.prototype.rtl && !util.isRtl(subtitle + title) ?\n\t\t\t\t'<span class=\"moon-sub-header-text moon-header-sub-title\">' + subtitle + '</span>' + '   ' + title :\n\t\t\t\ttitle + '   ' + '<span class=\"moon-sub-header-text moon-header-sub-title\">' + subtitle + '</span>');\n\t\t} else {\n\t\t\tthis.$.title.set('allowHtml', this.get('allowHtml') );\n\t\t\tthis.$.title.set('content', title);\n\t\t}\n\t\tthis.placeholderChanged();\n\t},\n\n\t/**\n\t* For backward-compatibility with original API.\n\t*\n\t* @private\n\t*/\n\ttitleChanged: function () {\n\t\tthis.contentChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tplaceholderChanged: function () {\n\t\t// For backward-compatibility with original API\n\t\tthis.$.titleInput.set('placeholder', this.getTitleUpperCase()\n\t\t\t\t? util.toUpperCase(this.placeholder || this.title || this.content)\n\t\t\t\t: (this.placeholder || this.title || this.content) );\n\t\tthis.valueChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuppercaseChanged: function () {\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// titleUpperCase is fully deprecated and removed.\n\t\tif (this.titleUpperCase != this.uppercase) this.titleUpperCase = this.uppercase;\n\t\tthis.titleChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleUpperCaseChanged: function () {\n\t\tif (this.uppercase != this.titleUpperCase) this.uppercase = this.titleUpperCase;\n\t\tthis.uppercaseChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleAboveChanged: function () {\n\t\tthis.$.titleAbove.addRemoveClass('no-border', this.titleAbove === '');\n\t\tthis.$.titleAbove.set('content', this.titleAbove);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleBelowChanged: function () {\n\t\tthis.$.titleBelow.set('content', this.titleBelow || '');\n\t\tthis.contentChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsubTitleBelowChanged: function () {\n\t\tthis.$.subTitleBelow.set('content', this.subTitleBelow || '');\n\t},\n\n\t/**\n\t* Placeholder\n\t*\n\t* @private\n\t*/\n\t// animationComplete: function (inSender, inEvent) {\n\t\t// Do something?\n\t// },\n\n\t/**\n\t* @private\n\t*/\n\tinputModeChanged: function () {\n\t\tthis.$.title.canGenerate = !this.inputMode;\n\t\tthis.$.title.setShowing(!this.inputMode);\n\t\tthis.$.inputDecorator.canGenerate = this.inputMode;\n\t\tthis.$.inputDecorator.setShowing(this.inputMode);\n\n\t\tif (!this.inputMode) {\n\t\t\tif (!this.$.title.hasNode()) {\n\t\t\t\tthis.$.title.render();\n\t\t\t}\n\t\t\t// Reset marquees when coming back to static text\n\t\t\tif (this.generated) {\n\t\t\t\tthis.stopMarquee();\n\t\t\t\tthis.startMarquee();\n\t\t\t}\n\t\t}\n\t\tif (this.inputMode && !this.$.inputDecorator.hasNode()) {\n\t\t\tthis.$.inputDecorator.render();\n\t\t}\n\t\tthis.addRemoveClass('moon-input-header', this.inputMode);\n\t},\n\n\t/**\n\t* Handles `input` event, firing custom\n\t* [onInputHeaderInput]{@link moon.Header#onInputHeaderInput} event.\n\t*\n\t* @fires moon.Header#onInputHeaderInput\n\t* @private\n\t*/\n\thandleInput: function (inSender, inEvent) {\n\t\tthis.doInputHeaderInput({originalEvent: util.clone(inEvent, true)});\n\t},\n\n\t/**\n\t* Handles `change` event, firing custom\n\t* [onInputHeaderChange]{@link moon.Header#onInputHeaderChange} event.\n\t*\n\t* @fires moon.Header#onInputHeaderChange\n\t* @private\n\t*/\n\thandleChange: function (inSender, inEvent) {\n\t\tthis.doInputHeaderChange({originalEvent: util.clone(inEvent, true)});\n\t},\n\n\n\t/**\n\t* Enlarges listActionDrawer's height to large type's height.\n\t*\n\t* @private\n\t*/\n\thandleListActionOpenChanged: function (inSender, inEvent) {\n\t\tif (!inEvent.open) {\n\t\t\treturn;\n\t\t}\n\t\tinEvent.originator.beforeOpenDrawer(this.standardHeight, this.get('type'));\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../Button');\n\n/**\n* {@link moon.ContextualPopupButton} is a {@link moon.Button} with additional\n* styling applied.\n*\n* For more information, see the documentation on\n* [Buttons]{@linkplain $dev-guide/building-apps/controls/buttons.html} in the\n* Enyo Developer Guide.\n*\n* @class moon.ContextualPopupButton\n* @extends moon.Button\n* @ui\n* @public\n*/\n\nmodule.exports = kind(\n\t/** @lends moon.ContextualPopupButton.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ContextualPopupButton',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Button,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'contextual-popup-button'\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tPopup = require('../../../enyo/lib/Popup');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tScrim = require('../Scrim'),\n\tButton = require('../Button'),\n\tIconButton = require('../IconButton'),\n\tMoonHistory = require('../History'),\n\tHistorySupport = MoonHistory.HistorySupport;\n\n/**\n* {@link moon.Popup} is an {@link enyo.Popup} that appears at the bottom of the\n* screen and takes up the full screen width.\n*\n* @class moon.Popup\n* @extends enyo.Popup\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Popup.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Popup',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Popup,\n\n\t/**\n\t* @private\n\t*/\n\tmixins : [HistorySupport],\n\n\t/**\n\t* @private\n\t*/\n\tmodal: true,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon moon-neutral enyo-unselectable moon-popup',\n\n\t/**\n\t* @private\n\t*/\n\tfloating: true,\n\n\t/**\n\t* @private\n\t*/\n\t_bounds: null,\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: 'container',\n\n\t/**\n\t* @private\n\t*/\n\tallowDefault: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonRequestScrollIntoView   : '_preventEventBubble',\n\t\tontransitionend           : 'animationEnd',\n\t\tonSpotlightSelect         : 'handleSpotlightSelect'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teventsToCapture: {\n\t\tonSpotlightFocus: 'capturedFocus',\n\t\tonkeydown: 'captureKeyDown'\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.Popup.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* Determines whether a scrim will appear when the dialog is modal. If `true`,\n\t\t* a transparent (i.e., invisible) overlay prevents the propagation of tap events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tscrimWhenModal: true,\n\n\t\t/**\n\t\t* Determines whether or not to display a scrim. Only displays scrims when floating. When\n\t\t* the scrim is in the floating state (`floating: true`), it covers the entire viewport\n\t\t* (i.e., it is displayed on top of other controls).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tscrim: true,\n\n\t\t/**\n\t\t* Optional class name to apply to the scrim. Be aware that the scrim is a singleton and\n\t\t* you will be modifying the scrim instance used for other popups.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tscrimClassName: '',\n\n\t\t/**\n\t\t* If `true`, {@glossary Spotlight} (focus) cannot leave the area of the popup unless the\n\t\t* popup is explicitly closed; if `false`, spotlight may be moved anywhere within the\n\t\t* viewport.  Note that setting the value of `spotlightModal` will have no effect on\n\t\t* spotlight behavior unless the [autoDismiss]{@link enyo.Popup#autoDismiss} property\n\t\t* inherited from {@link enyo.Popup} is set to `false` (default is `true`).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tspotlightModal: false,\n\n\t\t/**\n\t\t* When `false`, the close button is hidden; when `true`, it is shown. When\n\t\t* `showCloseButton` is set to `'auto'` (the default), the close button is shown when\n\t\t* [spotlightModal]{@link moon.Popup#spotlightModal} is `true`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'auto'\n\t\t* @public\n\t\t*/\n\t\tshowCloseButton: 'auto',\n\n\t\t/**\n\t\t* When `true`, popups will animate on/off screen.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tanimate: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{name: 'client', kind: Control, classes:'enyo-fill'},\n\t\t{name: 'closeButton', kind: IconButton, icon: 'closex', classes: 'moon-popup-close', ontap: 'closePopup', showing:false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tstatics: { count: 0 },\n\n\t/**\n\t* @private\n\t*/\n\tdefaultZ: 120,\n\n\t/**\n\t* @private\n\t*/\n\tactivator: null,\n\n\t/**\n\t* @private\n\t*/\n\tdirectShowHide: false,\n\n\t/**\n\t* @private\n\t*/\n\tinitialDuration: null,\n\n\t/**\n\t* Creates chrome components.\n\t*\n\t* @private\n\t*/\n\tinitComponents: function() {\n\t\tthis.createComponents(this.tools, {owner: this});\n\t\tPopup.prototype.initComponents.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tthis.inherited(arguments);\n\t\tthis.animateChanged();\n\t\tthis.initialDuration = this.getComputedStyleValue('-webkit-transition-duration', '0.4s');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimateChanged: function() {\n\t\tthis.addRemoveClass('animate', this.animate);\n\t\tif (!this.animate) {\n\t\t\tthis.applyStyle('bottom', null);\n\t\t}\n\t},\n\n\t/**\n\t* Renders `moon.Popup`, extending enyo.Popup\n\t*\n\t* @private\n\t*/\n\trender: function() {\n\t\tthis.allowHtmlChanged();\n\t\tthis.contentChanged();\n\t\tPopup.prototype.render.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function() {\n\t\tthis.$.client.setContent(this.content);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tallowHtmlChanged: function() {\n\t\tthis.$.client.setAllowHtml(this.allowHtml);\n\t},\n\n\t/**\n\t* Sets `this.downEvent` on `onSpotlightSelect` event.\n\t*\n\t* @private\n\t*/\n\thandleSpotlightSelect: function(sender, event) {\n\t\tthis.downEvent = event;\n\t},\n\n\t/**\n\t* If `this.downEvent` is set to a {@glossary Spotlight} event, skips normal popup\n\t* `capturedTap()` code.\n\t*\n\t* @private\n\t*/\n\tcapturedTap: function(sender, event) {\n\t\tif (!this.downEvent || (this.downEvent.type != 'onSpotlightSelect')) {\n\t\t\tPopup.prototype.capturedTap.apply(this, arguments);\n\t\t}\n\t},\n\n\t/**\n\t* If the popup has no spottable children, an [Enter] key down will cause it to be hidden\n\t* because Spotlight will try to spot the nearest or last control for a 5-way key down.\n\t* Since there isn't a spottable child, a control outside the popup is focused which triggers\n\t* `capturedFocus` which hides the Popup.\n\t*\n\t* @private\n\t*/\n\tcaptureKeyDown: function (sender, event) {\n\t\tthis.preventHide = (event.keyCode == 13 || event.keyCode == 16777221) && !Spotlight.isSpottable(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedFocus: function (sender, event) {\n\t\t// While we're open, we hijack Spotlight focus events. In all cases, we want\n\t\t// to prevent the default 5-way behavior (which is to focus on the control nearest\n\t\t// to the pointer in the chosen direction)...\n\t\tvar last = Spotlight.getLastControl(),\n\t\t\tcur = Spotlight.getCurrent(),\n\t\t\tfocusCapturedControl = event.originator;\n\t\t// There are two cases where we want to focus back on ourselves...\n\t\t// NOTE: The logic used here to detect these cases is highly dependent on certain\n\t\t// nuances of how Spotlight currently tracks the \"last\" and \"current\" focus. It will\n\t\t// probably need to be updated if / when Spotlight gets some love in this area.\n\t\tif (\n\t\t\t// Case 1: We were probably just opened in pointer mode. The pointer is outside\n\t\t\t// the popup, which means a 5-way press will likely focus some control outside the\n\t\t\t// popup, unless we prevent it by re-spotting ourselves.\n\t\t\t//(last === this && !cur.isDescendantOf(this)) ||\n\t\t\t(last === this && !focusCapturedControl.isDescendantOf(this)) ||\n\t\t\t// Case 2: We were probably opened in 5-way mode and then the pointer was moved\n\t\t\t// (likely due to incidental movement of the magic remote). It's possible that the\n\t\t\t// user actually wants to exit the popup by focusing on something outside, but more\n\t\t\t// likely that they have accidentally wiggled the remote and intend to be moving\n\t\t\t// around within the popup -- so, again, we re-spot ourselves.\n\t\t\t(last.isDescendantOf(this) && cur !== this)\n\n\t\t) {\n\t\t\tSpotlight.spot(this);\n\t\t}\n\t\t// In all other cases, the user probably means to exit the popup by moving out, so we\n\t\t// close ourselves.\n\t\telse if (!this.preventHide) {\n\t\t\tthis.hide();\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* Determines whether to display close button.\n\t*\n\t* @private\n\t*/\n\tconfigCloseButton: function() {\n\t\tif (!this.$.closeButton) { return; }\n\n\t\tvar shouldShow = (this.showCloseButton === true || (this.spotlightModal === true && this.showCloseButton !== false));\n\n\t\tif (shouldShow != this.$.closeButton.getShowing()) {\n\t\t\tthis.$.closeButton.setShowing(shouldShow);\n\t\t\tthis.addRemoveClass('reserve-close', shouldShow);\n\t\t\tif (this.generated) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Called if [spotlightModal]{@link moon.Popup#spotlightModal} changes.\n\t*\n\t* @private\n\t*/\n\tspotlightModalChanged: function() {\n\t\tthis.configCloseButton();\n\t},\n\n\t/**\n\t* Called if [showCloseButton]{@link moon.Popup#showCloseButton} changes.\n\t*\n\t* @private\n\t*/\n\tshowCloseButtonChanged: function() {\n\t\tthis.configCloseButton();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function() {\n\t\t// reset flag to prevent hiding popup when Enter pressed on unspottable popup\n\t\tthis.preventHide = false;\n\n\t\tif (this.showing) {\n\t\t\tif (this.isAnimatingHide) {\n\t\t\t\t// need to call this early to prevent race condition where animationEnd\n\t\t\t\t// originated from a \"hide\" context but we are already in a \"show\" context\n\t\t\t\tthis.animationEnd = util.nop;\n\t\t\t\tPopup.count--;\n\t\t\t\t// if we are currently animating the hide transition, release\n\t\t\t\t// the events captured when popup was initially shown\n\t\t\t\tif (this.captureEvents) {\n\t\t\t\t\tthis.release();\n\t\t\t\t}\n\t\t\t\tthis.isAnimatingHide = false;\n\t\t\t}\n\t\t\tthis.activator = Spotlight.getCurrent();\n\t\t}\n\t\telse {\n\t\t\tif (this.generated) {\n\t\t\t\tthis.respotActivator();\n\t\t\t}\n\t\t}\n\n\t\tif (this.showing) {\n\t\t\t// Run inherited immediately\n\t\t\tPopup.prototype.showingChanged.apply(this, arguments);\n\t\t\tthis.show();\n\t\t} else {\n\t\t\tthis.hide();\n\t\t\tif (this.animate) {\n\t\t\t\tthis.isAnimatingHide = true;\n\t\t\t\t// Instead of hiding the scrim with the inherited enyo method, when the\n\t\t\t\t// animation is finished, fire it now, so interactive control is returned to the\n\t\t\t\t// applicaiton while our popup is animating to the closed position.\n\t\t\t\tthis.showHideScrim(this.showing);\n\t\t\t\tvar args = arguments;\n\t\t\t\tthis.animationEnd = this.bindSafely(function (sender, ev) {\n\t\t\t\t\tif (ev.originator === this) {\n\t\t\t\t\t\t// Delay inherited until animationEnd\n\t\t\t\t\t\tPopup.prototype.showingChanged.apply(this, args);\n\t\t\t\t\t\tthis.animationEnd = util.nop;\n\t\t\t\t\t\tthis.isAnimatingHide = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Run inherited immediately\n\t\t\t\tPopup.prototype.showingChanged.apply(this, arguments);\n\t\t\t}\n\t\t}\n\n\t\tif (this.showing) {\n\t\t\tthis.configCloseButton();\n\t\t\t// Spot ourselves, unless we're already spotted\n\t\t\tvar current = Spotlight.getCurrent();\n\t\t\tif (!current || !current.isDescendantOf(this)) {\n\t\t\t\tif (Spotlight.isSpottable(this)) {\n\t\t\t\t\tSpotlight.spot(this);\n\t\t\t\t}\n\t\t\t\t// If we're not spottable, just unspot whatever was previously spotted\n\t\t\t\telse {\n\t\t\t\t\tSpotlight.unspot();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.allowBackKey) {\n\t\t\tif (this.showing) {\n\t\t\t\tthis.pushBackHistory();\n\t\t\t} else if(!this.showing && !MoonHistory.isHandlingBackAction()) {\n\t\t\t\tMoonHistory.ignorePopState();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Show the popup. This respects the current state of the\n\t* [animate]{@link moon.Popup#animate} property, showing with or without animation.\n\t*\n\t* @public\n\t*/\n\tshow: function() {\n\t\tPopup.prototype.show.apply(this, arguments);\n\t\tthis.addClass('showing');\n\t},\n\n\t/**\n\t* Hide the popup. This respects the current state of the\n\t* [animate]{@link moon.Popup#animate} property, hiding with or without animation.\n\t*\n\t* @public\n\t*/\n\thide: function() {\n\t\tPopup.prototype.hide.apply(this, arguments);\n\t\tthis.removeClass('showing');\n\t},\n\n\t/**\n\t* Overrides the default `getShowing()` behavior to avoid setting `this.showing` based on the\n\t* CSS `display` property.\n\t*\n\t* @private\n\t*/\n\tgetShowing: function() {\n\t\tif (this.animate) {\n\t\t\treturn this.showing;\n\t\t} else {\n\t\t\tPopup.prototype.getShowing.apply(this, arguments);\n\t\t}\n\t},\n\n\t/**\n\t* Skips animation and jumps to the final shown state.\n\t*\n\t* @public\n\t*/\n\tshowDirect: function() {\n\t\tvar anim = this.animate;\n\t\tif (anim) {\n\t\t\tthis.set('animate', false);\n\t\t}\n\t\tthis.show();\n\t\tif (anim) {\n\t\t\t// getComputedStyleValue forces the browser to update the style rules before\n\t\t\t// proceeding. Otherwise the removal and addition of the \"animate\" class happens in\n\t\t\t// one rendering-pass, which will have no visual difference.\n\t\t\tthis.getComputedStyleValue('display');\n\t\t\tthis.set('animate', anim);\n\t\t}\n\t},\n\n\t/**\n\t* Skips animation and jumps to the final hidden state.\n\t*\n\t* @public\n\t*/\n\thideDirect: function() {\n\t\tvar anim = this.animate;\n\t\tif (anim) {\n\t\t\tthis.set('animate', false);\n\t\t}\n\t\tthis.hide();\n\t\tif (anim) {\n\t\t\tthis.set('animate', anim);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdirectShowHideChanged: function (old, val) {\n\t\tthis.set('animate', !val);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowHideScrim: function(show) {\n\t\tif (this.floating && (this.scrim || (this.modal && this.scrimWhenModal))) {\n\t\t\tvar scrim = this.getScrim();\n\t\t\tif (show && this.modal && this.scrimWhenModal) {\n\t\t\t\t// move scrim to just under the popup to obscure rest of screen\n\t\t\t\tvar i = this.getScrimZIndex();\n\t\t\t\tthis._scrimZ = i;\n\t\t\t\tscrim.showAtZIndex(i);\n\t\t\t} else {\n\t\t\t\tscrim.hideAtZIndex(this._scrimZ);\n\t\t\t}\n\t\t\tscrim.addRemoveClass(this.scrimClassName, scrim.showing);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrimZIndex: function() {\n\t\t// Position scrim directly below popup\n\t\treturn this.findZIndex()-1;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrim: function() {\n\t\t// show a transparent scrim for modal popups if scrimWhenModal is true\n\t\t// if scrim is true, then show a regular scrim.\n\t\tif (this.modal && this.scrimWhenModal && !this.scrim) {\n\t\t\treturn Scrim.scrimTransparent.make();\n\t\t}\n\t\treturn Scrim.scrim.make();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\n\t/**\n\t* Removes focused style from close button and hides the popup.\n\t*\n\t* @private\n\t*/\n\tclosePopup: function(sender, event) {\n\t\tif (this.$.closeButton) {\n\t\t\tthis.$.closeButton.removeClass('pressed');\n\t\t}\n\t\tthis.hide();\n\t},\n\n\t/**\n\t* Attempts to respot the activating control when the popup is hidden.\n\t*\n\t* @private\n\t*/\n\trespotActivator: function() {\n\t\tvar a = this.activator;\n\t\t// We're about to spot something, so we first call release() to avoid capturing\n\t\t// (and preventing) the resulting SpotlightFocus event.\n\t\tthis.release();\n\t\t// Attempt to identify and re-spot the activator if present\n\t\tif (a && !a.destroyed) {\n\t\t\tSpotlight.spot(a);\n\t\t\tif (a instanceof Button) {\n\t\t\t\ta.removeClass('pressed');\n\t\t\t}\n\t\t} else {\n\t\t\t// As a failsafe, attempt to spot the container if no activator is present\n\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.container));\n\t\t}\n\t\tthis.activator = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_preventEventBubble: function(sender, event) {\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: function() {\n\t\tthis.showHideScrim(false);\n\t\tPopup.prototype.destroy.apply(this, arguments);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tAnimator = require('../../../enyo/lib/Animator');\n\nvar\n\tButton = require('../Button');\n\n/**\n* Fires when progress button finishes animating to a position. No event-specific data is sent \n* with this event.\n*\n* @event moon.ProgressButton#onButtonProgressFinish\n* @type {Object}\n* @public\n*/\n\n/**\n* `moon.ProgressButton` is an animated button to show progress from one state to another.\n*\n* ```\n* {kind: 'moon.ProgressButton', progress: 10, content: 'Download', postContent: 'Launch'}\n* ```\n*\n* To animate progress changes, call the {@link moon.ProgressButton#animateProgressTo} method:\n*\n* ```\n* this.$.progressButton.animateProgressTo(50);\n* ```\n*\n* You may customize the color of the bar by applying a style via the\n* {@link moon.ProgressButton#barClasses} property, e.g.:\n*\n* ```\n* {kind: 'moon.ProgressButton', barClasses: 'class-name'}\n* ```\n*\n* For more information, see the documentation on [Progress Button\n* Indicators](building-apps/controls/progress-button-indicators.html) in the Enyo\n* Developer Guide\n*\n* @class moon.ProgressButton\n* @extends moon.Button\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ProgressButton.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ProgressButton',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Button,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-progress-button',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t* @lends moon.ProgressButton.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Current position of progress button.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tprogress: 0,\n\n\t\t/**\n\t\t* Minimum progress value (i.e., no progress made).\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tmin: 0,\n\n\t\t/**\n\t\t* Maximum progress value (i.e., process complete).\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 100\n\t\t* @public\n\t\t*/\n\t\tmax: 100,\n\n\t\t/**\n\t\t* Optional CSS classes to apply to progress button bar.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tbarClasses: '',\n\n\t\t/**\n\t\t* The text to display after the progress has been completed.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'Completed'\n\t\t* @public\n\t\t*/\n\t\tpostContent: 'Completed',\n\n\t\t/**\n\t\t* Toggle whether there will be animation on the progress updates\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tanimated: true,\n\n\t\t/**\n\t\t* The amount of fixed-steps the progress bar should increment to. 4 steps would step to\n\t\t* 25%, 50%, 75%, and 100%. 5 steps would step to 20%, 40%, 60%, 80%, and 100%. etc.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 4\n\t\t* @public\n\t\t*/\n\t\tsteps: 4\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.ProgressButton#onButtonProgressFinish}\n\t\t*/\n\t\tonButtonProgressFinish: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'progressAnimator', kind: Animator, onStep: 'progressAnimatorStep', onEnd: 'progressAnimatorComplete'},\n\t\t{name: 'bar', kind: Control, classes: 'moon-progress-button-bar'},\n\t\t{name: 'progressPercent', kind: Control, classes: 'moon-progress-button-progresspercent'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tButton.prototype.create.apply(this, arguments);\n\t\tthis.preContent = this.content;\n\t\tthis.addRemoveClass('moon-progress-button-rtl', this.rtl);\n\t\tthis.progressChanged();\n\t\tthis.animatedChanged();\n\t\tthis.barClassesChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbarClassesChanged: function (old) {\n\t\tthis.$.bar.removeClass(old);\n\t\tthis.$.bar.addClass(this.barClasses);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprogressChanged: function () {\n\t\tthis.progress = this.clampValue(this.min, this.max, this.progress);\n\n\t\tvar progress,\n\t\t\tpercent = this.calcPercent(this.progress),\n\t\t\toffset = -10,\n\t\t\tminimumVisibleProgress = 10,\n\t\t\tincrement = parseInt(100 / this.get('steps'), 10);\n\t\tif (percent < 100) {\n\t\t\tthis.removeClass('completed');\n\t\t}\n\t\tif (percent < 5) {\n\t\t\tif (percent === 0) {\n\t\t\t\tthis._inProgress(false);\n\t\t\t\tthis.set('content', this.preContent);\n\t\t\t\tthis.$.progressPercent.set('content', '');\n\t\t\t\tthis.removeClass('in-progress');\n\t\t\t} else {\n\t\t\t\tthis._inProgress(true);\n\t\t\t\tthis.updateProgressPercent(percent);\n\t\t\t}\n\t\t\t// The value is so small that it should not be visible.\n\t\t\tthis.$.bar.applyStyle('transform', 'translateX(-100%)');\n\t\t\tthis.$.bar.applyStyle('-webkit-transform', 'translateX(-100%)');\n\t\t\tprogress = 0;\n\t\t} else if (percent >= 5 && percent < 100) {\n\t\t\t// Disable spotlight: you can't click a button once it's in progress\n\t\t\tthis._inProgress(true);\n\t\t\tif (percent < increment) {\n\t\t\t\t// Statically set the size of the progress bar if it's less than 1 increment.\n\t\t\t\tprogress = minimumVisibleProgress;\n\t\t\t} else {\n\t\t\t\t// Calculate how many increments we should use\n\t\t\t\tprogress = parseInt(percent / increment, 10) * increment;\n\t\t\t}\n\t\t\tthis.updateProgressPercent(percent);\n\t\t\t// Only change the progress bar if it's different from the last time this was run\n\t\t\tif (progress != this._visibleProgress) {\n\t\t\t\tthis.$.bar.applyStyle('transform', 'translateX(-' + (100 + offset - progress) + '%)');\n\t\t\t\tthis.$.bar.applyStyle('-webkit-transform', 'translateX(-' + (100 + offset - progress) + '%)');\n\t\t\t}\n\t\t} else if (percent >= 100) {\n\t\t\t// Make it spottable again, now that it's finished.\n\t\t\tthis.$.bar.applyStyle('transform', null);\n\t\t\tthis.$.bar.applyStyle('-webkit-transform', null);\n\t\t\tthis.setPostContent();\n\t\t\tprogress = 100;\n\t\t}\n\t\t// Remember the last progress state\n\t\tthis._visibleProgress = progress;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_inProgress: function (state) {\n\t\tthis.addRemoveClass('in-progress', state);\n\t\tthis.set('spotlight', !state);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclampValue: function (min, max, value) {\n\t\treturn Math.max(min, Math.min(value, max));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimatedChanged: function () {\n\t\tthis.addRemoveClass('animated', this.get('animated'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcRatio: function (value) {\n\t\treturn (value - this.min) / (this.max - this.min);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcPercent: function (value) {\n\t\treturn this.calcRatio(value) * 100;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateBarPosition: function (percent) {\n\t\tthis.$.bar.applyStyle('width', percent + '%');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateProgressPercent: function(percent) {\n\t\tthis.set('content', '');\n\t\tthis.$.progressPercent.set('content', Math.round(percent) + '%');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetPostContent: function(){\n\t\tthis.startJob('completeProgress', function () {\n\t\t\tthis.$.progressPercent.set('content', '');\n\t\t\tthis.addClass('completed');\n\t\t\tthis.set('content', this.get('postContent'));\n\n\t\t\t// When the animation is done, we are finally no longer in-progress.\n\t\t\tthis.startJob('completeProgressDone', function () {\n\t\t\t\tthis._inProgress(false);\n\t\t\t}, 200); // Same as the CSS transition duration\n\t\t}, 1000);\n\t},\n\n\t/**\n\t* Animates progress to the passed-in value.\n\t*\n\t* @param {Number} value  The destination number\n\t* @public\n\t*/\n\tanimateProgressTo: function (value) {\n\t\tthis.$.progressAnimator.play({\n\t\t\tstartValue: this.progress,\n\t\t\tendValue: value,\n\t\t\tnode: this.hasNode()\n\t\t});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprogressAnimatorStep: function (sender) {\n\t\tthis.setProgress(sender.value);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @fires moon.ProgressBar#onButtonProgressFinish\n\t* @private\n\t*/\n\tprogressAnimatorComplete: function (sender) {\n\t\tthis.doButtonProgressFinish();\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils');\n\nvar\n\tButton = require('../Button');\n\n/**\n* Fires when the value of the toggle button changes.\n*\n* @event moon.ToggleButton:onChange\n* @type {Object}\n* @property {Boolean} value - Current state of the ToggleButton.\n* @public\n*/\n\n/**\n* {@link moon.ToggleButton}, which extends {@link moon.Button}, is a button with two\n* states, 'on' and 'off'. When the toggle button is tapped, it switches its state\n* and fires an [onChange]{@link moon.ToggleButton#onChange} event.\n*\n* You may show the same text for both toggle states (via the\n* [content]{@link enyo.Control#content} property), or different text for each state,\n* using the [toggleOnLabel]{@link moon.ToggleButton#toggleOnLabel} and\n* [toggleOffLabel]{@link moon.ToggleButton#toggleOffLabel} properties. Note that both\n* `toggleOnLabel` and `toggleOffLabel` must be set in order to display different labels;\n* otherwise, the `content` property will be used.\n*\n* @class moon.ToggleButton\n* @extends moon.Button\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ToggleButton.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ToggleButton',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Button,\n\n\t/**\n\t* @private\n\t* @lends moon.ToggleButton.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Boolean indicating whether toggle button is currently in the 'on' state.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tvalue: false,\n\n\t\t/**\n\t\t* Button text displayed in the 'on' state. If not specified, the\n\t\t* [content]{@link enyo.Control#content} property will be used as button text.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttoggleOnLabel: '',\n\n\t\t/**\n\t\t* Button text displayed in the 'off' state. If not specified, the\n\t\t* [content]{@link enyo.Control#content} property will be used as button text.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttoggleOffLabel: ''\n\t},\n\n\t/*\n\t* @private\n\t*/\n\tevents: {\n\t\tonChange: ''\n\t},\n\n\t/*\n\t* @private\n\t*/\n\t_rendered: false,\n\n\t/*\n\t* @private\n\t*/\n\tclasses: 'moon-toggle-button',\n\n\t/*\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tButton.prototype.create.apply(this, arguments);\n\t\tthis.updateContent();\n\t\tthis.updateVisualState();\n\t},\n\n\t/*\n\t* @private\n\t*/\n\trendered: function () {\n\t\tButton.prototype.rendered.apply(this, arguments);\n\t\tthis.setActive(this.value);\n\t\tthis.fireChangeEvent();\n\t\tthis._rendered = true;\n\t},\n\n\t/*\n\t* @private\n\t*/\n\tupdateVisualState: function () {\n\t\tthis.addRemoveClass('moon-toggle-button-on', this.value && !this.disabled);\n\t},\n\n\t/*\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tButton.prototype.disabledChanged.apply(this, arguments);\n\t\tthis.updateVisualState();\n\t},\n\n\t/*\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tthis.updateContent();\n\t\tthis.updateVisualState();\n\t\tthis.setActive(this.value);\n\t\tthis.fireChangeEvent();\n\t},\n\n\t/*\n\t* @private\n\t*/\n\ttoggleOnLabelChanged: function () {\n\t\tthis.updateContent();\n\t},\n\n\t/*\n\t* @private\n\t*/\n\ttoggleOffLabelChanged: function () {\n\t\tthis.updateContent();\n\t},\n\n\t/*\n\t* We override the inherited `activeChanged()` method.\n\t*\n\t* @private\n\t*/\n\tactiveChanged: function () {\n\t\tif (this._rendered) {\n\t\t\tthis.active = util.isTrue(this.active);\n\t\t\tthis.setValue(this.active);\n\t\t}\n\t\tthis.bubble('onActivate');\n\t},\n\n\t/*\n\t* we override the inherited `tap()` method.\n\t*\n\t* @private\n\t*/\n\ttap: function () {\n\t\tif (this.disabled) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.setValue(!this.value);\n\t\t}\n\t},\n\n\t/*\n\t* @private\n\t*/\n\tupdateContent: function () {\n\t\tif (!this.toggleOnLabel || !this.toggleOffLabel) {\n\t\t\tthis.setContent(this.content);\n\t\t} else {\n\t\t\tthis.setContent(this.value ? this.toggleOnLabel : this.toggleOffLabel);\n\t\t}\n\t},\n\n\t/*\n\t* @private\n\t*/\n\tfireChangeEvent: function () {\n\t\tthis.doChange({value: this.value});\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tButton = require('../Button');\n\n/**\n* Bubble this event from a contained [control]{@link enyo.Control} to mute tooltips. No data\n* needs be passed with this event.\n*\n* @event moon.TooltipDecorator#onRequestMuteTooltip\n* @type {Object}\n* @public\n*/\n\n/**\n* Bubble this event from a contained [control]{@link enyo.Control} to unmute tooltips. No data\n* needs be passed with this event.\n*\n* @event moon.TooltipDecorator#onRequestUnmuteTooltip\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.TooltipDecorator} is a control that activates a {@link moon.Tooltip}. It\n* surrounds a control such as a button and displays the tooltip when the control generates\n* an `onenter` event:\n*\n* ```\n* {kind: 'moon.TooltipDecorator', components: [\n*\t{kind: 'moon.Button', content: 'Tooltip'},\n*\t{kind: 'moon.Tooltip', content: 'I am a tooltip for a button.'}\n* ]}\n* ```\n*\n* Here is an example with a {@link moon.Input} control and a decorator around the input:\n*\n* ```\n* {kind: 'moon.TooltipDecorator', components: [\n*\t{kind: 'moon.InputDecorator', components: [\n*\t\t{kind: 'moon.Input', placeholder: 'Just an input...'}\n*\t]},\n*\t{kind: 'moon.Tooltip', content: 'I am just a tooltip for an input.'}\n* ]}\n* ```\n*\n* Automatic hiding and showing of tooltips may be disabled by calling\n* [mute()]{@link moon.TooltipDecorator#mute} or by bubbling the\n* [onRequestMuteTooltip]{@link moon.TooltipDecorator#onRequestMuteTooltip} event;\n* it may be re-enabled by calling [unmute()]{@link moon.TooltipDecorator#unmute}\n* or by bubbling the\n* [onRequestUnmuteTooltip]{@link moon.TooltipDecorator#onRequestUnmuteTooltip} event.\n*\n* @class moon.TooltipDecorator\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends  moon.TooltipDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.TooltipDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: Button,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-contextual-popup-decorator',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonenter: 'requestShowTooltip',\n\t\tonleave: 'requestHideTooltip',\n\t\tonSpotlightFocused: 'requestShowTooltip',\n\t\tonSpotlightBlur: 'requestHideTooltip',\n\t\tonRequestMuteTooltip: 'mute',\n\t\tonRequestUnmuteTooltip: 'unmute'\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.TooltipDecorator.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* Boolean indicating whether tooltips are automatically shown when the activator is\n\t\t* hovered over.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoShow: true\n\t},\n\n\t/**\n\t* Disables automatic tooltip showing and hiding.\n\t*\n\t* @public\n\t*/\n\tmute: function () {\n\t\tthis.setAutoShow(false);\n\t},\n\n\t/**\n\t* Re-enables automatic tooltip showing and hiding after being muted.\n\t*\n\t* @public\n\t*/\n\tunmute: function () {\n\t\tthis.setAutoShow(true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoShowChanged: function () {\n\t\tif (!this.autoShow) {\n\t\t\tthis.requestHideTooltip();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function () {\n\t\tthis.requestHideTooltip();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestShowTooltip: function (inSender, inEvent) {\n\t\tif (this.autoShow && !Spotlight.isFrozen()) {\n\t\t\tif (inEvent.type == 'onSpotlightFocused' || Spotlight.getPointerMode()) {\n\t\t\t\tthis.waterfallDown('onRequestShowTooltip', {originator: inSender}, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestHideTooltip: function () {\n\t\tthis.waterfallDown('onRequestHideTooltip');\n\t},\n\n\t/**\n\t* Cancel any pending tooltip showing if the decorator or one of its ancestors is hidden\n\t*\n\t* @private\n\t*/\n\tshowingChangedHandler: function (sender, event) {\n\t\tControl.prototype.showingChangedHandler.apply(this, arguments);\n\t\tif (!event.showing) {\n\t\t\tthis.requestHideTooltip();\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tutils = require('../../../enyo/lib/utils')\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tTable = require('../../../moonstone/lib/Table');\n\nmodule.exports = kind({\n\tname: 'moon.sample.TableSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Divider, content: 'Static Table'},\n\t\t{kind: Table, components: [\n\t\t\t{classes: 'header', components: [\n\t\t\t\t{content: 'Question'},\n\t\t\t\t{content: 'Agree'},\n\t\t\t\t{content: 'Indifferent'},\n\t\t\t\t{content: 'Disagree'}\n\t\t\t]},\n\t\t\t{classes: 'moon-body-text', components: [\n\t\t\t\t{content: 'When should tables be used?'},\n\t\t\t\t{content: 'Always'},\n\t\t\t\t{content: 'Sometimes'},\n\t\t\t\t{content: 'Never'}\n\t\t\t]},\n\t\t\t{classes: 'moon-body-text', components: [\n\t\t\t\t{content: 'How cool are tables?'},\n\t\t\t\t{content: 'Very'},\n\t\t\t\t{content: 'A little'},\n\t\t\t\t{content: 'Not at all'}\n\t\t\t]}\n\t\t]},\n\t\t{tag: 'br'},\n\t\t{kind: Divider, content: 'Generated Table'},\n\t\t{name: 'month', classes: 'section'},\n\t\t{name: 'calendarTable', kind: Table, components: [\n\t\t\t{classes: 'header', components: [\n\t\t\t\t{content: 'Sun'},\n\t\t\t\t{content: 'Mon'},\n\t\t\t\t{content: 'Tue'},\n\t\t\t\t{content: 'Wed'},\n\t\t\t\t{content: 'Thu'},\n\t\t\t\t{content: 'Fri'},\n\t\t\t\t{content: 'Sat'}\n\t\t\t]}\n\t\t]}\n\t],\n\tmonthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\n\t\tvar currentRow,\n\t\t\tdateObj = new Date();\n\n\t\t// calculate current date\n\t\tvar currentDate = dateObj.getDate();\n\n\t\t// calculate date of first day of the month\n\t\tdateObj.setDate(1);\n\t\tvar offset = dateObj.getDay();\n\n\t\t// calculate date of last day of the month\n\t\tvar lastDate = this.getDaysInMonth(dateObj.getMonth(), dateObj.getYear());\n\n\t\t// this calculation can probably be simplified, but allows for padding blank spaces in\n\t\t// the calendar to display a \"full\" table\n\t\tfor (var i=0; i<lastDate+offset+(((lastDate+offset)%7)?7-((lastDate+offset)%7):0); i++) {\n\t\t\tif (i%7 === 0) {\n\t\t\t\tcurrentRow = this.$.calendarTable.createComponent({});\n\t\t\t}\n\t\t\tif (i<offset || i>=lastDate+offset) {\n\t\t\t\tcurrentRow.createComponent({});\n\t\t\t} else {\n\t\t\t\tvar cellDay = {content: (i-offset+1)};\n\t\t\t\tif ((i-offset+1) === currentDate) {\n\t\t\t\t\tcellDay = utils.mixin(cellDay, {classes: 'current'});\n\t\t\t\t}\n\t\t\t\tcurrentRow.createComponent(cellDay);\n\t\t\t}\n\t\t}\n\n\t\t// set month display\n\t\tthis.$.month.setContent(this.monthNames[dateObj.getMonth()] + ' ' + dateObj.getFullYear());\n\t},\n\t// adapted from http://stackoverflow.com/questions/1810984/number-of-days-in-any-month\n\tgetDaysInMonth: function (m, y) {\n\t\treturn (/8|3|5|10/).test(m)?30:m==1?((y%4===0)&&y%100)||(y%400===0)?29:28:31;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdispatcher = require('../../../enyo/lib/dispatcher'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tDrawer = require('../../../enyo/lib/Drawer');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tHistory = require('../History'),\n\tIcon = require('../Icon'),\n\tItem = require('../Item'),\n\tMoonDrawer = require('../Drawer'),\n\tHistorySupport = History.HistorySupport;\n\n/**\n* Handler for initial rendering event.\n*\n* @event moon.Drawers#onDrawersRendered\n* @type {Object}\n* @property {Number} drawersHeight - The height of the drawer.\n* @public\n*/\n\n/**\n* Handler for initial resizing event to size drawers to fullscreen.\n*\n* @event moon.Drawers#onDrawersResized\n* @type {Object}\n* @property {Number} drawersHeight - The height of the drawer.\n* @public\n*/\n\n\n/**\n* {@link moon.Drawers} is a container kind designed to hold a set of {@link moon.Drawer}\n* objects and client content. The [drawers]{@link moon.Drawers#drawers} property accepts\n* an array of Drawer controls. The associated handles are positioned in their own small\n* drawer, centered at the top of the \"dresser\" (the region containing the array of Drawer\n* controls and the activator nub).\n*\n* When a handle is selected, it opens the corresponding Drawer object's main drawer or\n* control drawer, depending on how the Drawer object is configured. The control's child\n* components may be of any kind.\n*\n* ```\n* {\n*\tkind: 'moon.Drawers',\n*\tdrawers: [\n*\t\t{\n*\t\t\tname: 'musicDrawer',\n*\t\t\tkind: 'moon.Drawer',\n*\t\t\thandle: {kind: 'moon.DrawerHandle', content: 'Handle'},\n*\t\t\tcomponents: [\n*\t\t\t\t{content: 'Drawer Content'}\n*\t\t\t],\n*\t\t\tcontrolDrawerComponents: [\n*\t\t\t\t{content: 'Controls'}\n*\t\t\t]\n*\t\t}\n*\t],\n*\tcomponents: [\n*\t\t{content: 'Content Area'}\n*\t]\n* }\n* ```\n*\n* @class moon.Drawers\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Drawers.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Drawers',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tmixins : [HistorySupport],\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-drawers enyo-fit',\n\n\t/**\n\t* @private\n\t* @lends moon.Drawers.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Populate with an array of {@link moon.Drawer} components.\n\t\t*\n\t\t* @type {Object[]}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tdrawers: null,\n\n\t\t/**\n\t\t* When using a font-based icon, the name of the icon to be used.\n\t\t* The following icon names are valid:\n\t\t*\n\t\t* 'drawer'\n\t\t* 'arrowlargeup'\n\t\t* 'arrowlargedown'\n\t\t* 'arrowlargeleft'\n\t\t* 'arrowlargeright'\n\t\t* 'arrowsmallup'\n\t\t* 'arrowsmalldown'\n\t\t* 'arrowsmallleft'\n\t\t* 'arrowsmallright'\n\t\t* 'closex'\n\t\t* 'check'\n\t\t* 'search'\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ticon: '',\n\n\t\t/**\n\t\t* URL specifying path to icon image.\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ticonClosed: 'arrowsmalldown',\n\n\t/**\n\t* @private\n\t*/\n\ticonOpen: 'arrowsmallup',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\t//* Handlers to update the activator when the state of the contained drawers changes\n\t\tonActivate: 'drawerActivated',\n\t\tonDeactivate: 'drawerDeactivated',\n\t\tonSpotlightDown:'spotDown',\n\t\tonSpotlightUp:'spotUp'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'activator', kind: Control, classes: 'moon-drawers-activator', spotlight: true, ontap: 'activatorHandler', components: [\n\t\t\t{name: 'activatorIcon', kind: Icon, classes: 'moon-drawers-activator-icon', small: false}\n\t\t]},\n\t\t{name: 'handleContainer', kind: Drawer, classes: 'moon-drawers-handle-container', resizeContainer: false, open: false, spotlightDisabled: true, onpostresize: 'resizeHandleContainer', components: [\n\t\t\t{name: 'handles', kind: Control, classes: 'moon-neutral moon-drawers-handles'}\n\t\t]},\n\t\t{name: 'drawers', kind: Control, classes: 'moon-drawers-drawer-container'},\n\t\t{name: 'client', kind: Control, classes: 'moon-drawers-client'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\teventsToCapture: {\n\t\tontap: 'captureTapSelect',\n\t\tonSpotlightFocus: 'captureSpotFocus',\n\t\tonSpotlightSelect: 'captureTapSelect'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.$.drawers.createComponents(this.drawers, {kind: MoonDrawer, owner: this.owner});\n\t\tthis.setupHandles();\n\t\tthis.updateActivator();\n\t},\n\n\t/**\n\t* Event waterfalls down.\n\t* @fires moon.Drawers#onDrawersRendered\n\t* @private\n\t*/\n\trendered: function () {\n\t\tControl.prototype.rendered.apply(this, arguments);\n\t\tvar dh = document.body.getBoundingClientRect().height;\n\t\tthis.waterfall('onDrawersRendered', {drawersHeight: dh});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsrcChanged: function () {\n\t\tthis.updateActivator();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ticonChanged: function () {\n\t\tthis.updateActivator();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupHandles: function () {\n\t\tvar controls, index,\n\t\t\thandles = [];\n\n\t\t// cover the case where one is not defined\n\t\tif (this.drawers) {\n\t\t\tfor (index = 0; index < this.drawers.length; ++index) {\n\t\t\t\thandles.push(this.drawers[index].handle || {});\n\t\t\t}\n\t\t\tthis.$.handles.createComponents(handles, {kind: Item, owner:this});\n\t\t\tcontrols = this.$.handles.getControls();\n\t\t\thandles.forEach(function (handle, idx) {\n\t\t\t\tcontrols[idx].addClass('moon-drawers-handle');\n\t\t\t\tcontrols[idx].tap = this.bindSafely(this.handleTapped);\n\t\t\t}, this);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tactivatorHandler: function () {\n\t\tif (this.drawerOpen()) {\n\t\t\tthis.closeDrawers();\n\t\t} else {\n\t\t\tif (this.$.handles.getControls().length == 1) {\n\t\t\t\tthis.openDrawer(this.$.handles.getControls()[0]);\n\t\t\t\tthis.updateActivator(true);\n\t\t\t} else {\n\t\t\t\tif (this.$.handleContainer.getOpen()) {\n\t\t\t\t\tthis.closeHandleContainer();\n\t\t\t\t} else {\n\t\t\t\t\tthis.openHandleContainer();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\topenHandleContainer: function () {\n\t\tthis.$.handleContainer.spotlightDisabled = false;\n\t\tthis.$.handleContainer.setOpen(true);\n\t\tthis.updateActivator(true);\n\t\tdispatcher.capture(this.$.handleContainer, this.eventsToCapture, this);\n\t\tif (this.allowBackKey) {\n\t\t\tthis.pushBackHistory();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcloseHandleContainer: function () {\n\t\tdispatcher.release(this.$.handleContainer);\n\t\tthis.$.handleContainer.spotlightDisabled = true;\n\t\tthis.$.handleContainer.setOpen(false);\n\t\tthis.updateActivator(this.drawerOpen());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleTapped: function (sender, ev) {\n\t\tthis.openDrawer(ev.originator);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\topenDrawer: function (drawer) {\n\t\tvar handles = this.$.handles.getControls();\n\t\tfor (var index = 0; index < handles.length; ++index) {\n\t\t\tif (handles[index] == drawer || Spotlight.Util.isChild(handles[index],drawer)) {\n\t\t\t\tdrawer = this.$.drawers.getControls()[index];\n\t\t\t\tdrawer.toggleDrawer();\n\t\t\t\tthis.closeHandleContainer();\n\t\t\t\tdispatcher.capture(drawer, this.eventsToCapture, this);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawerOpen: function () {\n\t\tvar drawers = this.$.drawers.getControls();\n\t\tfor (var index = 0; index < drawers.length; ++index) {\n\t\t\tif (drawers[index].getOpen() || drawers[index].getControlsOpen()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcloseDrawers: function () {\n\t\tvar drawers = this.$.drawers.getControls();\n\t\tfor (var index = 0; index < drawers.length; ++index) {\n\t\t\tvar drawer = drawers[index];\n\t\t\tif (drawer.getOpen() || drawer.getControlsOpen()) {\n\t\t\t\tdispatcher.release(drawer);\n\t\t\t\tdrawer.setOpen(false);\n\t\t\t\tdrawer.setControlsOpen(false);\n\t\t\t}\n\t\t}\n\t\tthis.updateActivator(false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcaptureSpotFocus: function (sender, ev) {\n\t\t// Only close drawers on 5-way focus in the client (not pointer focus)\n\t\tif (ev.dir && ev.dispatchTarget.isDescendantOf(this.$.client)) {\n\t\t\tthis.closeDrawers();\n\t\t\tthis.closeHandleContainer();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcaptureTapSelect: function (sender, ev) {\n\t\t// Any tap or select in the client area closes the dresser/drawer\n\t\tif (ev.dispatchTarget.isDescendantOf(this.$.client)) {\n\t\t\tthis.closeDrawers();\n\t\t\tthis.closeHandleContainer();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawerActivated: function (sender, ev) {\n\t\tif (ev.originator instanceof MoonDrawer) {\n\t\t\tthis.updateActivator(true);\n\t\t\t// Hide client when fullscreen drawer is open so it is not focusable\n\t\t\tif (ev.originator.getOpen()) {\n\t\t\t\tthis.$.client.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawerDeactivated: function (sender, ev) {\n\t\tif (ev.originator instanceof MoonDrawer) {\n\t\t\tif (!ev.originator.getOpen() && !ev.originator.getControlsOpen()) {\n\t\t\t\tthis.updateActivator(false);\n\t\t\t}\n\t\t\t// Re-show client when closing fullscreen drawer\n\t\t\tif (!ev.originator.getOpen()) {\n\t\t\t\tthis.$.client.show();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateActivator: function (up) {\n\t\tvar icon = this.get('icon'),\n\t\t\tsrc = this.get('src');\n\t\tthis.$.activator.addRemoveClass('open', up);\n\t\tif (up) {\n\t\t\t// Drawer is open\n\t\t\tthis.$.activatorIcon.set('src', '');\n\t\t\tthis.$.activatorIcon.set('icon', this.iconOpen);\n\t\t} else {\n\t\t\tthis.$.activatorIcon.set('src', src);\n\t\t\t// If there is a src, but no icon, set icon to ''.\n\t\t\t// Otherwise fall back to assigned icon or the default closed icon\n\t\t\tthis.$.activatorIcon.set('icon', (src && !icon) ? '' : (icon || this.iconClosed));\n\t\t}\n\t},\n\n\t/**\n\t* @fires moon.Drawers#onDrawersResized\n\t* @private\n\t*/\n\thandleResize: function () {\n\t\tControl.prototype.handleResize.apply(this, arguments);\n\t\tvar dh = document.body.getBoundingClientRect().height;\n\t\tthis.waterfall('onDrawersResized', {drawersHeight: dh});\n\t\tthis.updateActivator(false);\n\t},\n\n\t/**\n\t* Updates the activator's style only if it is not animating, so that there\n\t* are no visual artifacts.\n\t*\n\t* @private\n\t*/\n\tresizeHandleContainer: function (sender, ev) {\n\t\tutil.asyncMethod(ev.delegate.bindSafely(function () {\n\t\t\tif (!this.$.animator.isAnimating()) {\n\t\t\t\tthis.parent.$.activator.addRemoveClass('drawer-open', this.parent.drawerOpen() ? true : false);\n\t\t\t}\n\t\t}));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleAtIndex: function (index) {\n\t\treturn this.$.handles.getControls()[index];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\tdispatcher.release(this.$.handleContainer);\n\t\tfor (var i=0, c$=this.$.drawers.getControls(); i<c$.length; i++) {\n\t\t\tdispatcher.release(c$[i]);\n\t\t}\n\t\tControl.prototype.destroy.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackKeyHandler: function () {\n\t\tthis.closeHandleContainer();\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control')\n\tDrawer = require('../../../enyo/lib/Drawer')\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tItem = require('../Item'),\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text;\n\n/**\n* {@link moon.ExpandableListItem}, which extends {@link moon.Item}, displays a header\n* while also allowing additional content to be stored in an {@link enyo.Drawer}. When\n* the header is selected, the drawer opens below. To close the drawer, tap on the\n* header text or navigate (via 5-way) back to the top of the drawer.\n*\n* The control's child components may be of any kind; by default, they are\n* instances of `moon.Item`.\n*\n* ```\n* \t\t{kind: 'moon.ExpandableListItem', content: 'A Countries', components: [\n* \t\t\t{content: 'Algeria'},\n* \t\t\t{content: 'Argentina'},\n* \t\t\t{content: 'Australia'}\n* \t\t]},\n* \t\t{kind: 'moon.ExpandableListItem', content: 'B Countries', components: [\n* \t\t\t{content: 'Belgium'},\n* \t\t\t{content: 'Bolivia'},\n* \t\t\t{content: 'Brazil'}\n* \t\t]}\n*\n* When multiple ExpandableListItems are used in a group, only one may be open at\n* a given time.\n*\n* ```\n* \t\t{kind: 'enyo.Group', highlander: true, components: [\n* \t\t\t{kind: 'moon.ExpandableListItem',  open: true,\n* \t\t\tcontent: 'This is a grouped ExpandableListItem', components: [\n* \t\t\t\t{content: 'Item One'},\n* \t\t\t\t{content: 'Item Two'}\n* \t\t\t]},\n* \t\t\t{kind: 'moon.ExpandableListItem',\n* \t\t\t\tcontent: 'This is another grouped ExpandableListItem', components: [\n* \t\t\t\t\t{content: 'Item Three'},\n* \t\t\t\t\t{content: 'Item Four'}\n* \t\t\t\t]\n* \t\t\t},\n* \t\t\t{kind: 'moon.ExpandableListItem',\n* \t\t\t\tcontent: 'This is yet another grouped ExpandableListItem', components: [\n* \t\t\t\t\t{content: 'Item Five'},\n* \t\t\t\t\t{content: 'Item Six'}\n* \t\t\t\t]\n* \t\t\t}\n* \t\t]}\n* ```\n*\n* @class moon.ExpandableListItem\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ExpandableListItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ExpandableListItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t* @lends moon.ExpandableListItem.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* If `true`, the drawer automatically closes when the user navigates to the top of the\n\t\t* control; if `false`, the user must select/tap the header to close the drawer.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tautoCollapse: false,\n\n\t\t/**\n\t\t* If `true`, the drawer is expanded, showing this item's contents. Use this property\n\t\t* (rather than [active]{@link moon.ExpandableListItem#active}) to set the item's\n\t\t* initial state.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\topen: false,\n\n\t\t/**\n\t\t* Boolean that reflects the value of the [open]{@link moon.ExpandableListItem#open}\n\t\t* property; it is used to support the {@link enyo.Group} API for grouping a set of\n\t\t* ExpandableListItems in which only one is expanded at a time. Note that the `open`\n\t\t* property (not the `active` property) controls the initial state of the picker.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false,\n\n\t\t/**\n\t\t* If `true`, the user is prevented from moving {@glossary Spotlight} past the bottom\n\t\t* of the drawer (when open) using 5-way controls.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tlockBottom: false,\n\n\t\t/**\n\t\t* If `true`, item is shown as disabled and does not generate tap events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-expandable-list-item',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: false,\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: Item,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightDown: 'spotlightDown',\n\t\tonDrawerAnimationEnd: 'drawerAnimationEnd'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t// headerContainer required to avoid bad scrollWidth returned in RTL for certain text\n\t\t// widths (webkit bug)\n\t\t{name: 'headerContainer', kind: Control, classes: 'moon-expandable-list-item-header moon-expandable-picker-header moon-expandable-list-header', onSpotlightFocus: 'headerFocus', ontap: 'expandContract', components: [\n\t\t\t{name: 'header', kind: MarqueeText}\n\t\t]},\n\t\t{name: 'drawer', kind: Drawer, resizeContainer:false, classes: 'moon-expandable-list-item-client', components: [\n\t\t\t{name: 'client', kind: Group, tag: null}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.allowHtml', to: '.$.header.allowHtml'},\n\t\t{from: '.disabled', to: '.$.headerContainer.disabled'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.openChanged();\n\t\tthis.setActive(this.open);\n\t\tthis.disabledChanged();\n\t},\n\n\t/**\n\t* Facade for header content.\n\t*\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tthis.$.header.setContent(this.getContent());\n\t},\n\n\t/**\n\t* Facade for drawer.\n\t*\n\t* @private\n\t*/\n\topenChanged: function () {\n\t\tvar open = this.getOpen();\n\t\tthis.addRemoveClass('open', open);\n\t\tthis.$.drawer.setOpen(open);\n\t\tthis.$.drawer.spotlightDisabled = !open;\n\t\tthis.setActive(open);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tvar disabled = this.getDisabled();\n\n\t\tthis.addRemoveClass('disabled', disabled);\n\t\tif (disabled) {\n\t\t\tthis.setActive(false);\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.GroupItem#onActivate\n\t* @private\n\t*/\n\tactiveChanged: function () {\n\t\tthis.bubble('onActivate', {allowHighlanderDeactivate:true});\n\t\tthis.setOpen(this.active);\n\t},\n\n\t/**\n\t* If closed, opens drawer and highlights first spottable child.\n\t*\n\t* @private\n\t*/\n\texpandContract: function (inSender, inEvent) {\n\t\tthis.toggleActive();\n\n\t\tif (this.getActive() && !Spotlight.getPointerMode()) {\n\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.$.drawer));\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttoggleActive: function () {\n\t\tif (this.getOpen()) {\n\t\t\tthis.setActive(false);\n\t\t} else {\n\t\t\tthis.setActive(true);\n\t\t}\n\t},\n\n\t/**\n\t* If drawer is currently open, and event was sent via keypress (i.e., it has a direction),\n\t* process header focus.\n\t*\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\theaderFocus: function (inSender, inEvent) {\n\t\tvar direction = inEvent && inEvent.dir;\n\n\t\tif (this.getOpen() && this.getAutoCollapse() && direction === 'UP') {\n\t\t\tthis.setActive(false);\n\t\t}\n\n\t\tif (inEvent.originator === this.$.header) {\n\t\t\tthis.bubble('onRequestScrollIntoView');\n\t\t}\n\t},\n\n\t/**\n\t* Check for the last item in the client area, and prevent 5-way focus movement below it,\n\t* per UX specs.\n\t*\n\t* @private\n\t*/\n\tspotlightDown: function (inSender, inEvent) {\n\t\tvar children = Spotlight.getChildren(this.$.client);\n\t\tif (this.getLockBottom() && this.getOpen() && children.length && inEvent.originator == children[children.length - 1]) {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tdrawerAnimationEnd: function () {\n\t\tthis.bubble('onRequestScrollIntoView', {scrollInPointerMode: true});\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tItem = require('../Item');\n\n/**\n* {@link moon.LabeledTextItem}, which extends {@link moon.Item}, is a\n* [control]{@link enyo.Control} that combines text content with a text label.\n*\n* @class moon.LabeledTextItem\n* @extends moon.Item\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.LabeledTextItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.LabeledTextItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Item,\n\t\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-labeledtextitem',\n\n\t/**\n\t* @private\n\t*/\n\tcomponents:[\n\t\t{name: 'label', classes: 'label'},\n\t\t{name: 'text', classes: 'text'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tItem.prototype.create.apply(this, arguments);\n\t\tthis.labelChanged();\n\t\tthis.textChanged();\n\t},\n\t\n\t/**\n\t* @private\n\t* @lends moon.LabeledTextItem.prototype\n\t*/\n\tpublished: {\n\n\t\t/** \n\t\t* The label to be displayed along with the text.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tlabel: '',\n\t\t\n\t\t/** \n\t\t* The text to be displayed in the item.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttext: ''\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.allowHtml', to: '.$.label.allowHtml'},\n\t\t{from: '.allowHtml', to: '.$.text.allowHtml'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tlabelChanged: function() {\n\t\tthis.$.label.setContent(this.label);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\ttextChanged: function() {\n\t\tthis.$.text.setContent(this.text);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutils = require('../../../enyo/lib/utils');\n\nvar\n\tItem = require('../Item');\n\n/**\n* Fires when the item is tapped. No event-specific data is sent with this event.\n*\n* @event moon.SelectableItem#onActivate\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.SelectableItem} is a {@link moon.Item} with a flag to track\n* selection state.  It is particularly useful within the context of the\n* [Enyo Group API]{@link enyo.Group}.\n*\n* When selected, the item appears as underlined.\n*\n* If multiple SelectableItem objects are used in a group, only one of them\n* may be in the selected state at a given time.\n*\n* @class moon.SelectableItem\n* @extends moon.Item\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.SelectableItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.SelectableItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Item,\n\t\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-selectable-item',\n\t\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonActivate: ''\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\t// Prevents double bubbling of _onchange_ in IE.\n\t\tonclick: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.SelectableItem.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Will be `true` if this item is currently selected; otherwise, `false`.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tselected: false,\n\n\t\t/**\n\t\t* For use with the [Enyo Group API]{@link enyo.Group}. Will be `true` if this item\n\t\t* is the selected item in the group. Within this kind, the\n\t\t* [selected]{@link moon.SelectableItem#selected} and `active` properties appear to\n\t\t* behave similarly; however, `active` is meant to be used by {@link enyo.Group},\n\t\t* while `selected` is to be used for changing selection state.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false,\n\t\t\n\t\t/**\n\t\t* If used as the base control within a {@link moon.DataList} or {@glossary subkind},\n\t\t* this should be set to `false` so that selection support can be synchronized to the\n\t\t* checked state of this control.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\thandleTapEvent: true\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tItem.prototype.create.apply(this, arguments);\n\t\tthis.contentChanged();\n\t\tthis.updateSelectedValue();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function() {\n\t\tItem.prototype.rendered.apply(this, arguments);\n\t\tthis.updateActiveValue();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshouldDoTransition: function(selected) {\n\t\treturn selected === true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function(sender, e) {\n\t\tif (this.disabled) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.handleTapEvent) {\n\t\t\tthis.setActive(!this.getActive());\n\t\t\tthis.bubble('onchange');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateSelectedValue: function() {\n\t\tvar selected = this.getSelected();\n\t\tthis.addRemoveClass('selected', selected);\n\t\tthis.setNodeProperty('selected', selected);\n\t\tthis.setAttribute('selected', selected ? 'selected' : '');\n\t\tthis.reflow();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateActiveValue: function() {\n\t\tthis.setActive(this.getSelected());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectedChanged: function() {\n\t\tthis.updateSelectedValue();\n\t\tthis.updateActiveValue();\n\t},\n\n\t/**\n\t* For use with the [Enyo Group API]{@link enyo.Group}, which is supported by this object.\n\t* Called when the active item within the group changes. The\n\t* [active]{@link moon.SelectableItem#active} property and\n\t* [onActivate]{@link moon.SelectableItem#onActivate} event are both part of the\n\t* Group API.\n\t*\n\t* @private\n\t*/\n\tactiveChanged: function() {\n\t\tthis.active = utils.isTrue(this.active);\n\t\tthis.setSelected(this.active);\n\t\tthis.resetMarquee();\n\t\tthis.bubble('onActivate');\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tItem = require('../../../moonstone/lib/Item');\n\nmodule.exports = kind({\n\tname: 'moon.sample.DividerSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{classes:'moon-4h', components: [\n\t\t\t{kind: Divider, content: 'Divider 1'},\n\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t{kind: Item, content: 'Item 2'},\n\t\t\t{kind: Item, content: 'Item 3'},\n\t\t\t{kind: Item, content: 'Item 4'},\n\n\t\t\t{classes:'moon-1v'}, // Spacer\n\n\t\t\t{kind: Divider, content: 'Divider 2'},\n\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t{kind: Item, content: 'Item 2'},\n\n\t\t\t{classes:'moon-1v'}, // Spacer\n\n\t\t\t{kind: Divider, content: 'Very Long Divider with truncation'},\n\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t{kind: Item, content: 'Item 2'}\n\t\t]}\n\t]\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tCheckboxItem = require('../CheckboxItem');\n\n/**\n* {@link moon.FormCheckbox} is a labeled checkbox designed for use in form layouts.\n* Unlike {@link moon.CheckboxItem}, which it extends, `moon.FormCheckbox` provides\n* a circular 'hit target' that is always visible, regardless of whether the checkbox\n* is currently checked.\n*\n* @class moon.FormCheckbox\n* @extends moon.CheckboxItem\n* @ui\n* @public\n*/\n\nmodule.exports = kind(\n\t/** @lends moon.FormCheckbox.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.FormCheckbox',\n\n\t/**\n\t* @private\n\t*/\n\tkind: CheckboxItem,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-formcheckbox-item'\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tProgressBar = require('../../../moonstone/lib/ProgressBar');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ProgressSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Divider, content: 'Progress Bars'},\n\t\t{kind: ProgressBar, progress: 25},\n\t\t{kind: ProgressBar, progress: 25, bgProgress: 75},\n\t\t{kind: ProgressBar, progress: 50, barClasses: 'moon-sample-green'},\n\t\t{kind: ProgressBar, progress: 50, barClasses: 'moon-sample-red'},\n\t\t{tag: 'br'},\n\t\t{kind: InputDecorator, style: 'margin-right:10px;', components: [\n\t\t\t{kind: Input, placeholder: 'Value'}\n\t\t]},\n\t\t{kind: Button, content: 'Set', small: true, classes: 'moon-sample-spaced-button', ontap: 'changeValue'},\n\t\t{kind: Button, content: '-', small: true, classes: 'moon-sample-spaced-button', ontap: 'decValue'},\n\t\t{kind: Button, content: '+', small: true, classes: 'moon-sample-spaced-button', ontap: 'incValue'},\n\t\t{tag: 'br'},\n\t\t{tag: 'br'},\n\t\t{style: 'width:240px;', components: [\n\t\t\t{name: 'animateSetting', kind: CheckboxItem, checked: true, content: 'Animated'}\n\t\t]}\n\t],\n\tchangeValue: function (sender, event) {\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == ProgressBar) {\n\t\t\t\tif (this.$.animateSetting.getChecked()) {\n\t\t\t\t\tthis.$[i].animateProgressTo(this.$.input.getValue());\n\t\t\t\t} else {\n\t\t\t\t\tthis.$[i].setProgress(this.$.input.getValue());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tincValue: function () {\n\t\tthis.$.input.setValue(Math.min(parseInt(this.$.input.getValue() || 0, 10) + 10, 100));\n\t\tthis.changeValue();\n\t},\n\tdecValue: function () {\n\t\tthis.$.input.setValue(Math.max(parseInt(this.$.input.getValue() || 0, 10) - 10, 0));\n\t\tthis.changeValue();\n\t}\n});\n","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tCheckboxItem = require('../CheckboxItem'),\n\tToggleSwitch = require('../ToggleSwitch');\n\n/**\n* {@link moon.ToggleItem} is a control that combines a {@link moon.ToggleSwitch}\n* with a text label.\n*\n* @class moon.ToggleItem\n* @extends moon.CheckboxItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ToggleItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ToggleItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: CheckboxItem,\n\n\t/**\n\t* @private\n\t*/\n\ticon: 'circle',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-toggle-item',\n\n\t/**\n\t* @private\n\t*/\n\tcheckboxOnRight: true,\n\n\t/**\n\t* @private\n\t*/\n\tcomponentOverrides: {\n\t\tclient: {classes: 'moon-toggle-item-label-wrapper'},\n\t\tinput: {kind: ToggleSwitch, spotlight: false}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdispatcher = require('../../../enyo/lib/dispatcher'),\n\tdom = require('../../../enyo/lib/dom'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tScrollStrategy = require('../../../enyo/lib/ScrollStrategy'),\n\tTouchScrollStrategy = require('../../../enyo/lib/TouchScrollStrategy'),\n\tScrollMath = require('../../../enyo/lib/ScrollMath'),\n\tSignals = require('../../../enyo/lib/Signals');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tconfig = require('../options'),\n\tPagingControl = require('../PagingControl'),\n\tScrollThumb = require('../ScrollThumb');\n\n/**\n* {@link moon.ScrollStrategy} inherits from {@link enyo.TouchScrollStrategy}.\n* Its main purpose is to handle scroller paging for {@link moon.Scroller} and\n* {@link moon.DataList}.\n*\n* @class moon.ScrollStrategy\n* @extends enyo.TouchScrollStrategy\n* @public\n*/\nvar MoonScrollStrategy = module.exports = kind(\n\t/** @lends moon.ScrollStrategy.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ScrollStrategy',\n\n\t/**\n\t* @private\n\t*/\n\tkind: TouchScrollStrategy,\n\n\t/**\n\t* @private\n\t* @lends moon.ScrollStrategy.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* The ratio of mousewheel \"delta\" units to pixels scrolled. Increase this value to\n\t\t* increase the distance scrolled by the scroll wheel. Note that mice/trackpads do not\n\t\t* emit the same delta units per \"notch\" or flick of the scroll wheel/trackpad; that\n\t\t* can vary based on intensity and momentum.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 2\n\t\t* @public\n\t\t*/\n\t\tscrollWheelMultiplier: 2,\n\n\t\t/**\n\t\t* The ratio of the maximum distance scrolled by each scroll wheel event to the\n\t\t* height/width of the viewport. Setting a value larger than `1` is not advised since,\n\t\t* in that scenario, a single scroll event could potentially move more than one\n\t\t* viewport's worth of content (depending on the delta received), resulting in skipped\n\t\t* content.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0.2\n\t\t* @public\n\t\t*/\n\t\tscrollWheelPageMultiplier: 0.2,\n\n\t\t/**\n\t\t* The ratio of the distance scrolled per tap of the paging button to the height/width\n\t\t* of the viewport. Setting a value larger than `1` is not advised since, in that\n\t\t* scenario, a single paging button tap would move more than one viewport's worth of\n\t\t* content, resulting in skipped content.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0.8\n\t\t* @public\n\t\t*/\n\t\tpaginationPageMultiplier: 0.8,\n\n\t\t/**\n\t\t* The ratio of continuous-scrolling \"delta\" units to pixels scrolled. Increase this\n\t\t* value to increase the distance scrolled when the pagination buttons are held.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 8\n\t\t* @public\n\t\t*/\n\t\tpaginationScrollMultiplier: 8,\n\n\t\t/**\n\t\t* If 'true', paging controls are hidden when content fit in scroller\n\t\t* even when spotlightPagingControls is true.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\thideScrollColumnsWhenFit: false\n\t},\n\n\t/**\n\t* If `true`, measure the size of the scroll columns on initial render.\n\t* See {@link moon.ScrollStrategy#measureScrollColumns} for details.\n\t*\n\t* @private\n\t*/\n\tmeasureScrollColumns: false,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonRequestScrollIntoView : 'requestScrollIntoView',\n\t\tonRequestSetupBounds\t: 'requestSetupBounds',\n\t\tonenter                 : 'enter',\n\t\tonleave                 : 'leave',\n\t\tonSpotlightFocused      : 'manageSpotlightFocus',\n\t\tonSpotlightBlur         : 'manageSpotlightFocus'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{kind: ScrollMath, onScrollStart: 'scrollMathStart', onScroll: 'scrollMathScroll', onScrollStop: 'scrollMathStop', onStabilize: 'scrollMathStabilize'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'clientContainer', kind: Control, classes: 'moon-scroller-client-wrapper', components: [\n\t\t\t{name: 'viewport', kind: Control, classes:'moon-scroller-viewport', components: [\n\t\t\t\t{name: 'client', kind: Control, classes: 'enyo-touch-scroller matrix-scroll-client matrix3dsurface'}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'vColumn', kind: Control, classes: 'moon-scroller-v-column', components: [\n\t\t\t{name: 'pageUpControl', kind: PagingControl, defaultSpotlightDisappear: 'pageDownControl', defaultSpotlightDown: 'pageDownControl', side: 'top', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightUp: 'spotPaging'},\n\t\t\t{name: 'vthumbContainer', kind: Control, classes: 'moon-scroller-thumb-container moon-scroller-vthumb-container', components: [\n\t\t\t\t{name: 'vthumb', kind: ScrollThumb, classes: 'moon-scroller-vthumb hidden', axis: 'v'}\n\t\t\t]},\n\t\t\t{name: 'pageDownControl', kind: PagingControl, defaultSpotlightDisappear: 'pageUpControl', defaultSpotlightUp: 'pageUpControl', side: 'bottom', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightDown: 'spotPaging'}\n\t\t]},\n\t\t{name: 'hColumn', kind: Control, classes: 'moon-scroller-h-column', components: [\n\t\t\t{name: 'pageLeftControl', kind: PagingControl, defaultSpotlightDisappear: 'pageRightControl', defaultSpotlightRight: 'pageRightControl', side: 'left', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightLeft: 'spotPaging'},\n\t\t\t{name: 'hthumbContainer', kind: Control, classes: 'moon-scroller-thumb-container moon-scroller-hthumb-container', components: [\n\t\t\t\t{name: 'hthumb', kind: ScrollThumb, classes: 'moon-scroller-hthumb hidden', axis: 'h'}\n\t\t\t]},\n\t\t\t{name: 'pageRightControl', kind: PagingControl, defaultSpotlightDisappear: 'pageLeftControl', defaultSpotlightLeft: 'pageLeftControl', side: 'right', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightRight: 'spotPaging'}\n\t\t]},\n\t\t{kind: Signals, onSpotlightModeChanged: 'spotlightModeChanged', isChrome: true}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tTouchScrollStrategy.prototype.create.apply(this, arguments);\n\t\tthis.transform = dom.canTransform();\n\t\tthis.accel = dom.canAccelerate();\n\t\tthis.container.addClass('enyo-touch-strategy-container');\n\t\tthis.translation = this.accel ? 'matrix3d' : 'matrix';\n\t\tthis.showHideScrollColumns(this.spotlightPagingControls);\n\t},\n\n\t/**\n\t* Calls super-super-inherited (i.e., skips {@link enyo.TouchScrollStrategy}'s) `rendered()`\n\t* function to avoid thumb flicker at render time. Then shows or hides page controls.\n\t*\n\t* @private\n\t*/\n\trendered: function() {\n\t\tvar measure = this.measureScrollColumns && !ScrollStrategy._scrollColumnsMeasured;\n\n\t\tif (measure) {\n\t\t\t// We temporarily add the v-scroll-enabled class so that\n\t\t\t// we can measure the width of the vertical scroll column\n\t\t\t// after rendering and store it as a static property -- see\n\t\t\t// _measureScrollColumns().\n\t\t\t//\n\t\t\t// The v-scroll-enabled class will automatically be removed\n\t\t\t// after we measure, when we call setupBounds() (which in\n\t\t\t// turn calls enableDisableScrollColumns()).\n\t\t\tthis.$.clientContainer.addClass('v-scroll-enabled');\n\t\t}\n\n\t\tScrollStrategy.prototype.rendered.apply(this, arguments);\n\t\t\n\t\tif (measure) {\n\t\t\tthis._measureScrollColumns();\n\t\t}\n\t\tthis.setupBounds();\n\t\tthis.spotlightPagingControlsChanged();\n\t},\n\n\t/**\n\t* Moonstone's data grid list delegate uses scroll column metrics to calculate\n\t* available space for list controls. These metrics are derived via some LESS\n\t* calculations, so to avoid brittleness we choose to measure them from the DOM\n\t* rather than mirror the calculations in JavaScript.\n\t* \n\t* Upon request, we do the measurement here (the first time a scroller is rendered)\n\t* and cache the values in static properties, to avoid re-measuring each time we need\n\t* the metrics.\n\t* \n\t* @private\n\t*/\n\t_measureScrollColumns: function() {\n\t\tvar cs;\n\t\tcs = dom.getComputedStyle(this.$.clientContainer.hasNode());\n\t\tMoonScrollStrategy.vScrollColumnSize =\n\t\t\tparseInt(cs['padding-left'], 10) +\n\t\t\tparseInt(cs['padding-right'], 10);\n\t\tMoonScrollStrategy.hScrollColumnSize = this.$.hColumn.hasNode().offsetHeight;\n\t\tMoonScrollStrategy._scrollColumnsMeasured = true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleResize: function() {\n\t\tthis.resizing = true;\n\t\tthis.resetCachedValues();\n\t\tthis.setupBounds();\n\t\tthis.resizing = false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupBounds: function() {\n\t\tthis.calcBoundaries();\n\t\tthis.syncScrollMath();\n\t\tthis.enableDisableScrollColumns();\n\t\tthis.setThumbSizeRatio();\n\t\tthis.clampScrollPosition();\n\t},\n\n\t/**\n\t* Gets the left scroll position within the scroller.\n\t*\n\t* @returns {Number} The left scroll position.\n\t* @public\n\t*/\n\tgetScrollLeft: function() {\n\t\treturn this.scrollLeft;\n\t},\n\n\t/**\n\t* Gets the top scroll position within the scroller.\n\t*\n\t* @returns {Number} The top scroll position.\n\t* @public\n\t*/\n\tgetScrollTop: function() {\n\t\treturn this.scrollTop;\n\t},\n\n\t/**\n\t* Sets the left scroll position within the scroller.\n\t*\n\t* @param {Number} left - The desired scroll-left measurement (in pixels).\n\t* @public\n\t*/\n\tsetScrollLeft: function(left) {\n\t\tvar m = this.$.scrollMath,\n\t\t\tp = this.scrollLeft;\n\t\tm.setScrollX(-left);\n\t\tm.stabilize();\n\t\tif (p != -m.x) {\n\t\t\t// We won't get a native scroll event,\n\t\t\t// so need to make one ourselves\n\t\t\tm.doScroll();\n\t\t}\n\t},\n\n\t/**\n\t* Sets the top scroll position within the scroller.\n\t*\n\t* @param {Number} top - The desired scroll-top measurement (in pixels).\n\t* @public\n\t*/\n\tsetScrollTop: function(top) {\n\t\tvar m = this.$.scrollMath,\n\t\t\tp = this.scrollTop;\n\t\tm.setScrollY(-top);\n\t\tm.stabilize();\n\t\tif (p != -m.y) {\n\t\t\t// We won't get a native scroll event,\n\t\t\t// so need to make one ourselves\n\t\t\tm.doScroll();\n\t\t}\n\t},\n\n\t/**\n\t* Scrolls to specific x/y positions within the scroll area.\n\t*\n\t* @param {Number} x - The horizontal position.\n\t* @param {Number} y - The vertical position.\n\t* @param {Boolean} [animate=true] - Whether to animate to the new scroll position.\n\t* @public\n\t*/\n\tscrollTo: function(x, y, animate) {\n\t\tthis.stop();\n\t\tif (this.resizing || animate === false) {\n\t\t\tvar b = this.getScrollBounds();\n\t\t\tx = Math.max(Math.min(x, b.maxLeft), 0);\n\t\t\ty = Math.max(Math.min(y, b.maxTop),  0);\n\t\t\tthis.effectScroll(x, y);\n\t\t\tthis.syncScrollMath();\n\t\t\tthis.bubble('onScroll');\n\t\t} else {\n\t\t\tthis._scrollTo(x, y);\n\t\t}\n\t},\n\n\t/**\n\t* Overrides {@link enyo.TouchScrollStrategy#maxHeightChanged}.\n\t*\n\t* @private\n\t*/\n\tmaxHeightChanged: function() {\n\t\t// content should cover scroller at a minimum if there's no max-height.\n\t\tthis.$.client.applyStyle('min-height', this.maxHeight ? null : '100%');\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\n\t\tthis.$.clientContainer.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\n\t},\n\n\t// Event handling\n\n\t/**\n\t* Disables dragging.\n\t*\n\t* @private\n\t*/\n\tshouldDrag: function(sender, event) { return true; },\n\n\t/**\n\t* On `hold` event, stops scrolling.\n\t*\n\t* @private\n\t*/\n\thold: function(sender, event) {\n\t\tif (!this.isPageControl(event.originator)) {\n\t\t\tTouchScrollStrategy.prototype.hold.apply(this, arguments);\n\t\t}\n\t},\n\n\t/**\n\t* On `down` event, stops scrolling.\n\t*\n\t* @private\n\t*/\n\tdown: function(sender, event) {\n\t\tif (!this.isPageControl(event.originator) && this.isScrolling() && !this.isOverscrolling()) {\n\t\t\tevent.preventTap();\n\t\t\tthis.stop();\n\t\t}\n\t},\n\n\t/**\n\t* On `mousewheel` event, scrolls a fixed amount.\n\t*\n\t* @private\n\t*/\n\tmousewheel: function(sender, event) {\n\t\tif (this.useMouseWheel) {\n\t\t\tvar isScrolling = this.isScrolling();\n\t\t\tthis.scrollBounds = this._getScrollBounds();\n\t\t\tthis.setupBounds();\n\n\t\t\tvar x = null,\n\t\t\t\ty = null,\n\t\t\t\tshowVertical = this.showVertical(),\n\t\t\t\tshowHorizontal = this.showHorizontal(),\n\t\t\t\tdir = null,\n\t\t\t\tval = null,\n\t\t\t\tmax = null,\n\t\t\t\tdelta = null\n\t\t\t;\n\n\t\t\t//* If we don't have to scroll, allow mousewheel event to bubble\n\t\t\tif (!showVertical && !showHorizontal) {\n\t\t\t\tthis.scrollBounds = null;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (showVertical) {\n\t\t\t\tdir = event.wheelDeltaY >= 0 ? 1 : -1;\n\t\t\t\tval = Math.abs(event.wheelDeltaY * this.scrollWheelMultiplier);\n\t\t\t\tmax = this.scrollBounds.clientHeight * this.scrollWheelPageMultiplier;\n\t\t\t\tdelta = Math.min(val, max);\n\t\t\t\ty = (isScrolling ? this.lastScrollToY : this.scrollTop) + -dir * delta;\n\t\t\t}\n\n\t\t\tif (showHorizontal) {\n\t\t\t\tvar intDirection = 1;\n\t\t\t\t// Reverse the direction for RTL\n\t\t\t\tif (this.$.pageLeftControl.rtl) {\n\t\t\t\t\tintDirection = -1;\n\t\t\t\t}\n\t\t\t\tif (event.wheelDeltaX) {\n\t\t\t\t\tdir = (event.wheelDeltaX >= 0 ? 1 : -1) * intDirection;\n\t\t\t\t\tval = Math.abs(event.wheelDeltaX * this.scrollWheelMultiplier);\n\t\t\t\t\tmax = this.scrollBounds.clientWidth * this.scrollWheelPageMultiplier;\n\t\t\t\t\tdelta = Math.min(val, max);\n\t\t\t\t\tx = (isScrolling ? this.lastScrollToX : this.scrollLeft) + -dir * delta;\n\t\t\t\t} else if (!showVertical) {\n\t\t\t\t\t// only use vertical wheel for horizontal scrolling when no vertical bars shown\n\t\t\t\t\tdir = (event.wheelDeltaY >= 0 ? 1 : -1) * intDirection;\n\t\t\t\t\tval = Math.abs(event.wheelDeltaY * this.scrollWheelMultiplier);\n\t\t\t\t\tmax = this.scrollBounds.clientWidth * this.scrollWheelPageMultiplier;\n\t\t\t\t\tdelta = Math.min(val, max);\n\t\t\t\t\tx = (isScrolling ? this.lastScrollToX : this.scrollLeft) + -dir * delta;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.scrollTo(x, y);\n\t\t\tevent.preventDefault();\n\t\t\tthis.scrollBounds = null;\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* On `enter` event, sets `this.hovering` to `true` and shows pagination controls.\n\t*\n\t* @private\n\t*/\n\tenter: function(sender, event) {\n\t\tthis.hovering = true;\n\t\tthis.calcBoundaries();\n\t\tthis.enableDisableScrollColumns();\n\t\tthis.showHideScrollColumns(true);\n\t\tthis.updateHoverOnPagingControls(true);\n\t},\n\n\t/**\n\t* On `leave` event, sets `this.hovering` to `false` and hides pagination controls.\n\t*\n\t* @private\n\t*/\n\tleave: function(sender, event) {\n\t\tthis.hovering = false;\n\t\tthis.showHideScrollColumns(false);\n\t},\n\n\t/**\n\t* Show / hide pagination controls in response to 5-way focus / blur events.\n\t*\n\t* @private\n\t*/\n\tmanageSpotlightFocus: function(sender, event) {\n\t\tif (!Spotlight.getPointerMode()) {\n\t\t\tthis.showHideScrollColumns(event.type == 'onSpotlightFocused');\n\t\t}\n\t},\n\n\t/**\n\t* Handles `paginate` events sent from [paging control]{@link moon.PagingControl} buttons.\n\t*\n\t* @private\n\t*/\n\tpaginate: function(sender, event) {\n\t\tvar sb = this.getScrollBounds(),\n\t\t\tscrollYDelta = sb.clientHeight * this.paginationPageMultiplier,\n\t\t\tscrollXDelta = sb.clientWidth * this.paginationPageMultiplier,\n\t\t\tside = event.originator.side,\n\t\t\tx = this.getScrollLeft(),\n\t\t\ty = this.getScrollTop()\n\t\t;\n\n\t\tswitch (side) {\n\t\tcase 'left':\n\t\t\tx -= scrollXDelta;\n\t\t\tbreak;\n\t\tcase 'top':\n\t\t\ty -= scrollYDelta;\n\t\t\tbreak;\n\t\tcase 'right':\n\t\t\tx += scrollXDelta;\n\t\t\tbreak;\n\t\tcase 'bottom':\n\t\t\ty += scrollYDelta;\n\t\t\tbreak;\n\t\t}\n\n\t\tx = Math.max(0, Math.min(x, sb.maxLeft));\n\t\ty = Math.max(0, Math.min(y, sb.maxTop));\n\n\t\tthis._scrollTo(x, y);\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* Handles `paginateScroll` events sent from [paging control]{@link moon.PagingControl}\n\t* buttons.\n\t*\n\t* @private\n\t*/\n\tpaginateScroll: function(sender, event) {\n\t\tif (!event || !event.scrollDelta) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar delta = event.scrollDelta * this.paginationScrollMultiplier,\n\t\t\tside = event.originator.side,\n\t\t\tval\n\t\t;\n\n\t\tswitch (side) {\n\t\t\tcase 'left':\n\t\t\t\tval = this.scrollLeft - delta;\n\t\t\t\t// When we hit the left, bounce and end scrolling\n\t\t\t\tif (val <= -this.$.scrollMath.leftBoundary) {\n\t\t\t\t\tthis.setScrollLeft(-this.$.scrollMath.leftBoundary);\n\t\t\t\t\tthis.$.pageLeftControl.hitBoundary();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setScrollLeft(val);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'top':\n\t\t\t\tval = this.scrollTop - delta;\n\t\t\t\t// When we hit the top, bounce and end scrolling\n\t\t\t\tif (val <= -this.$.scrollMath.topBoundary) {\n\t\t\t\t\tthis.setScrollTop(-this.$.scrollMath.topBoundary);\n\t\t\t\t\tthis.$.pageUpControl.hitBoundary();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setScrollTop(val);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tval = this.scrollLeft + delta;\n\t\t\t\t// When we hit the right, bounce and end scrolling\n\t\t\t\tif (val >= -this.$.scrollMath.rightBoundary) {\n\t\t\t\t\tthis.setScrollLeft(-this.$.scrollMath.rightBoundary);\n\t\t\t\t\tthis.$.pageRightControl.hitBoundary();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setScrollLeft(val);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'bottom':\n\t\t\t\tval = this.scrollTop + delta;\n\t\t\t\t// When we hit the bottom, bounce and end scrolling\n\t\t\t\tif (val >= -this.$.scrollMath.bottomBoundary) {\n\t\t\t\t\tthis.setScrollTop(-this.$.scrollMath.bottomBoundary);\n\t\t\t\t\tthis.$.pageDownControl.hitBoundary();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setScrollTop(val);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* Scrolls to specific x/y positions within the scroll area.\n\t*\n\t* @private\n\t*/\n\t_scrollTo: function(x, y) {\n\t\tthis.lastScrollToX = x;\n\t\tthis.lastScrollToY = y;\n\t\tthis.$.scrollMath.scrollTo(x, y);\n\t},\n\n\t/**\n\t* Returns `true` if passed-in [control]{@link enyo.Control} is one of four page controls.\n\t*\n\t* @private\n\t*/\n\tisPageControl: function(control) {\n\t\treturn (\n\t\t\tcontrol === this.$.pageUpControl ||\n\t\t\tcontrol === this.$.pageDownControl ||\n\t\t\tcontrol === this.$.pageLeftControl ||\n\t\t\tcontrol === this.$.pageRightControl\n\t\t);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcBoundaries: function() {\n\t\tvar s = this.$.scrollMath || this,\n\t\t\tb = this._getScrollBounds()\n\t\t;\n\t\ts.bottomBoundary = -1 * b.maxTop;\n\t\ts.rightBoundary = -1 * b.maxLeft;\n\n\t\tthis.updatePagingControlState();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectScroll: function(x, y) {\n\t\tthis.scrollLeft = (x !== null && !isNaN(x))? x: (this.scrollLeft || 0);\n\t\tthis.scrollTop  = (y !== null && !isNaN(y))? y: (this.scrollTop  || 0);\n\t\tdom.transformValue(this.$.client, this.translation, this.generateMatrix());\n\n\t\t// since effectScroll will happen frequently but paging control status changes\n\t\t// infrequently, fire it immediately and then throttle the next update\n\t\tif (!this._updatePagingJob) {\n\t\t\tthis.updatePagingControlState();\n\t\t} else {\n\t\t\tclearTimeout(this._updatePagingJob);\n\t\t}\n\n\t\tthis._updatePagingJob = setTimeout(this.bindSafely(function () {\n\t\t\tthis.updatePagingControlState();\n\t\t\tthis._updatePagingJob = null;\n\t\t}), 32);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgenerateMatrix: function() {\n\t\tvar x = -1 * this.scrollLeft,\n\t\t\ty = -1 * this.scrollTop\n\t\t;\n\n\t\t/// Reverse the direction for RTL\n\t\tif (this.$.pageLeftControl.rtl) {\n\t\t\tx*= -1;\n\t\t}\n\n\t\treturn (this.accel)\n\t\t\t?   '1,         0,     0,  0, '\n\t\t\t+   '0,         1,     0,  0, '\n\t\t\t+   '0,         0,     1,  0, '\n\t\t\t+    x + ', ' + y + ', 0,  1'\n\n\t\t\t:   '1, 0, 0, 1, ' + x + ', ' + y\n\t\t;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectScrollStop: function() { },\n\n\t/**\n\t* @private\n\t*/\n\teffectOverscroll: function() { },\n\n\t/**\n\t* @private\n\t*/\n\tspotlightPagingControlsChanged: function() {\n\t\tthis.updateHoverOnPagingControls(!this.spotlightPagingControls);\n\t\tthis.showHideScrollColumns(this.spotlightPagingControls);\n\t\tif (this.generated) {\n\t\t\tthis.setupBounds();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateHoverOnPagingControls: function(hover) {\n\t\tthis.$.pageLeftControl.addRemoveClass('hover', hover);\n\t\tthis.$.pageRightControl.addRemoveClass('hover', hover);\n\t\tthis.$.pageUpControl.addRemoveClass('hover', hover);\n\t\tthis.$.pageDownControl.addRemoveClass('hover', hover);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePagingControlState: function () {\n\t\t// Update disabled state of paging controls based on bounds\n\t\tvar m = this.$.scrollMath,\n\t\t\tb = this._getScrollBounds(),\n\t\t\tcanVScroll = b.height > b.clientHeight,\n\t\t\tcanHScroll = b.width > b.clientWidth,\n\t\t\tdisablePageUp = (b.top <= 0) || !canVScroll,\n\t\t\tdisablePageDown = (b.top >= -1 * m.bottomBoundary) || !canVScroll,\n\t\t\tdisablePageLeft = (b.left <= 0) || !canHScroll,\n\t\t\tdisablePageRight = (b.left >= -1 * m.rightBoundary) || !canHScroll;\n\n\t\t// Enable all of the paging controls (which are not already enabled) first, so that we\n\t\t// are not beholden to any ordering issues that can cause erratic Spotlight behavior.\n\t\tif (!disablePageUp) this.$.pageUpControl.set('disabled', false);\n\t\tif (!disablePageDown) this.$.pageDownControl.set('disabled', false);\n\t\tif (!disablePageLeft) this.$.pageLeftControl.set('disabled', false);\n\t\tif (!disablePageRight) this.$.pageRightControl.set('disabled', false);\n\n\t\tif (disablePageUp) this.$.pageUpControl.set('disabled', true);\n\t\tif (disablePageDown) this.$.pageDownControl.set('disabled', true);\n\t\tif (disablePageLeft) this.$.pageLeftControl.set('disabled', true);\n\t\tif (disablePageRight) this.$.pageRightControl.set('disabled', true);\n\t},\n\n\t/**\n\t* Decorate spotlight events from paging controls so user can 5-way out of container\n\t* \n\t* @private\n\t*/\n\tspotPaging: function (sender, event) {\n\t\tevent.requestLeaveContainer = true;\n\t},\n\n\t/**\n\t* Because the thumb columns are a fixed size that impacts the scroll bounds, we capture\n\t* the difference for use in thumb rendering math.\n\t*\n\t* @private\n\t*/\n\tsetThumbSizeRatio: function() {\n\t\tvar scrollBounds = this.getScrollBounds();\n\t\tthis.$.vthumb.setSizeRatio(this.getVerticalThumbBounds().height/scrollBounds.clientHeight);\n\t\tthis.$.hthumb.setSizeRatio(this.getHorizontalThumbBounds().width/scrollBounds.clientWidth);\n\t},\n\n\t/**\n\t* Responds to child components' requests to be scrolled into view.\n\t*\n\t* @private\n\t*/\n\trequestScrollIntoView: function(sender, event) {\n\t\tvar showVertical, showHorizontal,\n\t\t\tbubble = false;\n\t\tif (!Spotlight.getPointerMode() || event.scrollInPointerMode === true) {\n\t\t\tshowVertical = this.showVertical();\n\t\t\tshowHorizontal = this.showHorizontal();\n\t\t\tthis.scrollBounds = this._getScrollBounds();\n\t\t\tthis.setupBounds();\n\t\t\tthis.scrollBounds = null;\n\t\t\tif (showVertical || showHorizontal) {\n\t\t\t\tthis.animateToControl(event.originator, event.scrollFullPage, event.scrollInPointerMode || false);\n\t\t\t\tif ((showVertical && this.$.scrollMath.bottomBoundary) || (showHorizontal && this.$.scrollMath.rightBoundary)) {\n\t\t\t\t\tthis.alertThumbs();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Scrollers that don't need to scroll bubble their onRequestScrollIntoView,\n\t\t\t\t// to allow items in nested scrollers to be scrolled\n\t\t\t\tbubble = true;\n\t\t\t}\n\t\t}\n\t\treturn !bubble;\n\t},\n\n\t/**\n\t* Responds to child components' requests to update scroll bounds without\n\t* scrolling into view.\n\t*\n\t* @private\n\t*/\n\trequestSetupBounds: function(sender, event) {\n\t\tif (this.generated) {\n\t\t\tthis.scrollBounds = this._getScrollBounds();\n\t\t\tthis.setupBounds();\n\t\t\tthis.scrollBounds = null;\n\t\t\tif ((this.showVertical() && this.$.scrollMath.bottomBoundary) || (this.showHorizontal() && this.$.scrollMath.rightBoundary)) {\n\t\t\t\tthis.alertThumbs();\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightModeChanged: function(sender, event) {\n\t\tvar activatePageControls = this.shouldShowPageControls();\n\t\tthis.showHideScrollColumns(activatePageControls);\n\t\tthis.updateHoverOnPagingControls(activatePageControls);\n\t},\n\n\t/**\n\t* Enables or disables scroll columns.\n\t*\n\t* @private\n\t*/\n\tenableDisableScrollColumns: function() {\n\t\tthis.enableDisableVerticalScrollControls(this.showVertical());\n\t\tthis.enableDisableHorizontalScrollControls(this.showHorizontal());\n\t},\n\n\t/**\n\t* Enables or disables vertical scroll column.\n\t*\n\t* @private\n\t*/\n\tenableDisableVerticalScrollControls: function(enabled) {\n\t\tthis.$.clientContainer.addRemoveClass('v-scroll-enabled', enabled);\n\t\tthis.$.vColumn.addRemoveClass('v-scroll-enabled', enabled);\n\t\tthis.$.hColumn.addRemoveClass('v-scroll-enabled', enabled);\n\t\tthis.$.pageUpControl.spotlight = enabled && this.spotlightPagingControls;\n\t\tthis.$.pageDownControl.spotlight = enabled && this.spotlightPagingControls;\n\t},\n\n\t/**\n\t* Enables or disables horizontal scroll column.\n\t*\n\t* @private\n\t*/\n\tenableDisableHorizontalScrollControls: function(enabled) {\n\t\tthis.$.clientContainer.addRemoveClass('h-scroll-enabled', enabled);\n\t\tthis.$.vColumn.addRemoveClass('h-scroll-enabled', enabled);\n\t\tthis.$.hColumn.addRemoveClass('h-scroll-enabled', enabled);\n\t\tthis.$.pageLeftControl.spotlight = enabled && this.spotlightPagingControls;\n\t\tthis.$.pageRightControl.spotlight = enabled && this.spotlightPagingControls;\n\t},\n\n\t/**\n\t* Shows or hides scroll columns.\n\t*\n\t* @private\n\t*/\n\tshowHideScrollColumns: function(show) {\n\t\tthis.showHideVerticalScrollColumns(show);\n\t\tthis.showHideHorizontalScrollColumns(show);\n\t},\n\n\t/**\n\t* Shows or hides vertical scroll columns.\n\t*\n\t* @private\n\t*/\n\tshowHideVerticalScrollColumns: function(show) {\n\t\tthis.$.vColumn.addRemoveClass('visible', show || this.spotlightPagingControls);\n\t},\n\n\t/**\n\t* Shows or hides horizontal scroll columns.\n\t*\n\t* @private\n\t*/\n\tshowHideHorizontalScrollColumns: function(show) {\n\t\tthis.$.hColumn.addRemoveClass('visible', show || this.spotlightPagingControls);\n\t},\n\n\t/**\n\t* Returns boolean indicating whether page controls should be shown at all for this scroller.\n\t*\n\t* @private\n\t*/\n\tshouldShowPageControls: function() {\n\t\treturn (Spotlight.getPointerMode() && this.hovering && !this.spotlightPagingControls);\n\t},\n\n\t/**\n\t* Determines whether we should be showing the vertical scroll column.\n\t*\n\t* @private\n\t*/\n\tshowVertical: function() {\n\t\treturn (this.getVertical() == 'scroll' ||\n\t\t\t\t(this.getVertical() !== 'hidden' &&\n\t\t\t\t((-1 * this.$.scrollMath.bottomBoundary > 0) ||\n\t\t\t\t(this.spotlightPagingControls && !this.hideScrollColumnsWhenFit))));\n\t},\n\n\t/**\n\t* Determines whether we should be showing the horizontal scroll column.\n\t*\n\t* @private\n\t*/\n\tshowHorizontal: function() {\n\t\treturn (this.getHorizontal() == 'scroll' ||\n\t\t\t\t(this.getHorizontal() !== 'hidden' &&\n\t\t\t\t((-1 * this.$.scrollMath.rightBoundary > 0) ||\n\t\t\t\t(this.spotlightPagingControls && !this.hideScrollColumnsWhenFit))));\n\t},\n\n\t/**\n\t* Update bounds after change hideScrollColumnsWhenFit option changes.\n\t*\n\t* @private\n\t*/\n\thideScrollColumnsWhenFitChanged: function(old) {\n\t\tthis.requestSetupBounds();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_getScrollBounds: function() {\n\t\tif (this.scrollBounds) {\n\t\t\treturn this.scrollBounds;\n\t\t}\n\t\tvar containerBounds = this.getContainerBounds(),\n\t\t\ts = this.getScrollSize(),\n\t\t\tb = {\n\t\t\t\ttop: this.getScrollTop(),\n\t\t\t\tleft: this.getScrollLeft(),\n\t\t\t\tclientHeight: containerBounds.height,\n\t\t\t\tclientWidth: containerBounds.width,\n\t\t\t\theight: s.height,\n\t\t\t\twidth: s.width\n\t\t\t};\n\n\t\tb.maxLeft = Math.max(0, b.width - b.clientWidth);\n\t\tb.maxTop = Math.max(0, b.height - b.clientHeight);\n\n\t\tutil.mixin(b, this.getOverScrollBounds());\n\n\t\treturn b;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetContainerBounds: function() {\n\t\tvar containerBounds = this.$.clientContainer.getBounds();\n\t\tif(containerBounds) {\n\t\t\tvar paddingExtents = dom.calcPaddingExtents(this.$.clientContainer.hasNode());\n\t\t\tcontainerBounds.width  -= (paddingExtents.left + paddingExtents.right);\n\t\t\tcontainerBounds.height -= (paddingExtents.top  + paddingExtents.bottom);\n\t\t}\n\t\treturn containerBounds;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetVerticalThumbBounds: function() {\n\t\treturn this.vBounds ? this.vBounds : this.$.vthumbContainer.getBounds();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetHorizontalThumbBounds: function() {\n\t\treturn this.hBounds ? this.hBounds : this.$.hthumbContainer.getBounds();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresetCachedValues: function() {\n\t\tthis.vBounds = null;\n\t\tthis.hBounds = null;\n\t\tthis.scrollBounds = null;\n\t},\n\t/**\n\t* Scrolls until the passed-in [control]{@link enyo.Control} is in view.\n\t* If `scrollFullPage` is set, scrolls until the edge of `control` is aligned\n\t* with the edge of the visible scroll area.\n\t*\n\t* @param {Control} control - The [control]{@link enyo.Control} to scroll into view.\n\t* @param {Boolean} [scrollFullPage] - If `true`, scrolls until the edge of `control` is\n\t*\taligned with the edge of the visible scroll area. If `undefined`, the value in the\n\t*\tcontainer's `scrollFullPage` property is used.\n\t* @param {Boolean} [animate=true] - Set to `false` to prevent animation.\n\t* @private\n\t*/\n\tanimateToControl: function(control, scrollFullPage, animate) {\n\t\tvar controlBounds  = control.getAbsoluteBounds(),\n\t\t\tabsoluteBounds = this.$.viewport.getAbsoluteBounds(),\n\t\t\tscrollBounds   = this._getScrollBounds(),\n\t\t\toffsetTop,\n\t\t\toffsetLeft,\n\t\t\toffsetHeight,\n\t\t\toffsetWidth,\n\t\t\txDir,\n\t\t\tyDir,\n\t\t\tx,\n\t\t\ty\n\t\t;\n\n\t\t// Make absolute controlBounds relative to scroll position\n\t\tcontrolBounds.top += scrollBounds.top;\n\t\tif (this.rtl) {\n\t\t\tcontrolBounds.right += scrollBounds.left;\n\t\t} else {\n\t\t\tcontrolBounds.left += scrollBounds.left;\n\t\t}\n\n\t\toffsetTop      = controlBounds.top - absoluteBounds.top;\n\t\toffsetLeft     = (this.rtl ? controlBounds.right : controlBounds.left) - (this.rtl ? absoluteBounds.right : absoluteBounds.left);\n\t\toffsetHeight   = controlBounds.height;\n\t\toffsetWidth    = controlBounds.width;\n\n\t\t// Allow local scrollFullPage param to override scroller property\n\t\tscrollFullPage = (typeof scrollFullPage === 'undefined') ? this.container.getScrollFullPage() : scrollFullPage;\n\n\t\t// 0: currently visible, 1: right of viewport, -1: left of viewport\n\t\txDir = (offsetLeft >= scrollBounds.left && offsetLeft + offsetWidth <= scrollBounds.left + scrollBounds.clientWidth)\n\t\t\t? 0\n\t\t\t: offsetLeft - scrollBounds.left > 0\n\t\t\t\t? 1\n\t\t\t\t: offsetLeft - scrollBounds.left < 0\n\t\t\t\t\t? -1\n\t\t\t\t\t: 0;\n\n\t\t// 0: currently visible, 1: below viewport, -1: above viewport\n\t\tyDir = (offsetTop >= scrollBounds.top && offsetTop + offsetHeight <= scrollBounds.top + scrollBounds.clientHeight)\n\t\t\t? 0\n\t\t\t: offsetTop - scrollBounds.top > 0\n\t\t\t\t? 1\n\t\t\t\t: offsetTop - scrollBounds.top < 0\n\t\t\t\t\t? -1\n\t\t\t\t\t: 0;\n\n\t\tscrollBounds.xDir = xDir;\n\t\tscrollBounds.yDir = yDir;\n\n\t\tswitch (xDir) {\n\t\t\tcase 0:\n\t\t\t\tx = this.getScrollLeft();\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's left, or if the control\n\t\t\t\t// is larger than the viewport, scroll to the control's left edge. Otherwise, scroll just\n\t\t\t\t// far enough to get the control into view.\n\t\t\t\tif (scrollFullPage || offsetWidth > scrollBounds.clientWidth) {\n\t\t\t\t\tx = offsetLeft;\n\t\t\t\t} else {\n\t\t\t\t\tx = offsetLeft - scrollBounds.clientWidth + offsetWidth;\n\t\t\t\t\t// If nodeStyle exists, add the _marginRight_ to the scroll value.\n\t\t\t\t\tx += dom.getComputedBoxValue(control.hasNode(), 'margin', 'right');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase -1:\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's right, or if the control\n\t\t\t\t// is larger than the viewport, scroll to the control's right edge. Otherwise, scroll just\n\t\t\t\t// far enough to get the control into view.\n\t\t\t\tif (scrollFullPage || offsetWidth > scrollBounds.clientWidth) {\n\t\t\t\t\tx = offsetLeft - scrollBounds.clientWidth + offsetWidth;\n\t\t\t\t} else {\n\t\t\t\t\tx = offsetLeft;\n\t\t\t\t\t// If nodeStyle exists, subtract the _marginLeft_ to the scroll value.\n\t\t\t\t\tx -= dom.getComputedBoxValue(control.hasNode(), 'margin', 'left');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (yDir) {\n\t\t\tcase 0:\n\t\t\t\ty = this.getScrollTop();\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's top, or if the control\n\t\t\t\t// is larger than the viewport, scroll to the control's top edge. Otherwise, scroll just\n\t\t\t\t// far enough to get the control into view.\n\t\t\t\tif (scrollFullPage || offsetHeight > scrollBounds.clientHeight) {\n\t\t\t\t\ty = offsetTop;\n\t\t\t\t\t// If nodeStyle exists, add the _marginBottom_ to the scroll value.\n\t\t\t\t\ty -= dom.getComputedBoxValue(control.hasNode(), 'margin', 'top');\n\t\t\t\t} else {\n\t\t\t\t\ty = offsetTop - scrollBounds.clientHeight + offsetHeight;\n\t\t\t\t\t// If nodeStyle exists, add the _marginBottom_ to the scroll value.\n\t\t\t\t\ty += dom.getComputedBoxValue(control.hasNode(), 'margin', 'bottom');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase -1:\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's bottom, or if the control\n\t\t\t\t// is larger than the viewport, scroll to the control's bottom edge. Otherwise, scroll just\n\t\t\t\t// far enough to get the control into view.\n\t\t\t\tif (scrollFullPage || offsetHeight > scrollBounds.clientHeight) {\n\t\t\t\t\ty = offsetTop - scrollBounds.clientHeight + offsetHeight;\n\t\t\t\t} else {\n\t\t\t\t\ty = offsetTop;\n\t\t\t\t\t// If nodeStyle exists, subtract the _marginTop_ to the scroll value.\n\t\t\t\t\ty -= dom.getComputedBoxValue(control.hasNode(), 'margin', 'bottom');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// If x or y changed, scroll to new position\n\t\tif (x !== this.getScrollLeft() || y !== this.getScrollTop()) {\n\t\t\tthis.scrollTo(x, y, animate);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclampScrollPosition: function() {\n\t\tvar x = this.clampX(),\n\t\t\ty = this.clampY();\n\n\t\tif (x !== this.getScrollLeft() || y !== this.getScrollTop()) {\n\t\t\tthis.scrollTo(x, y);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclampX: function() {\n\t\tvar m = this.$.scrollMath;\n\t\treturn Math.min(Math.max(this.getScrollLeft(), -1*m.leftBoundary), -1*m.rightBoundary);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclampY: function() {\n\t\tvar m = this.$.scrollMath;\n\t\treturn Math.min(Math.max(this.getScrollTop(), -1*m.topBoundary), -1*m.bottomBoundary);\n\t}\n});\n\n// FIXME: Webkit will change the scrollTop value of the scroller viewport to keep the current\n// tab-focused control onscreen if we allow it to handle tabs itself, so we defeat native\n// TAB focus movement here.\ndispatcher.features.push(function(e) {\n\tif ((e.type == 'keydown') && (e.keyCode == 9)) {\n\t\te.preventDefault();\n\t}\n});\n\nMoonScrollStrategy.Touch = kind({\n\tname: 'moon.TouchScrollStrategy',\n\tkind: TouchScrollStrategy,\n\tcreate: function () {\n\t\tTouchScrollStrategy.prototype.create.apply(this, arguments);\n\t\tif (!config.accelerate) {\n\t\t\tthis.transform = false;\n\t\t\tthis.accel = false;\n\n\t\t\tif(this.overscroll) {\n\t\t\t\t//so we can adjust top/left if browser can't handle translations\n\t\t\t\tthis.$.client.applyStyle('position', 'relative');\n\t\t\t}\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tSimplePicker = require('../SimplePicker');\n\n/**\n* Fires when a date is selected. No additional data is passed in this event.\n*\n* @event moon.CalendarDate#onDateSelected\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when [value]{@link moon.Calendar#value} changes.\n*\n* @event moon.Calendar#onChange\n* @type {Object}\n* @property {Date} value - A standard JavaScript {@glossary Date} object\n* @public\n*/\n\n/**\n* {@link moon.CalendarDate} implements a control representing a single day, used by\n* the monthly calendar kind {@link moon.Calendar}.\n*\n* @class moon.CalendarDate\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar CalendarDate = kind(\n\t/** @lends moon.CalendarDate.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.CalendarDate',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t* @lends moon.CalendarDate.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* {@glossary Date} object\n\t\t*\n\t\t* @type {Date}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tvalue: null,\n\n\t\t/**\n\t\t* Whether this date's coloring should be different from normal.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tcolor: false,\n\n\t\t/**\n\t\t* Used when the CalendarDate is part of an {@link enyo.Group}. A value of\n\t\t* `true` indicates that this is the active button of the group; false,\n\t\t* that it is not the active button.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonDateSelected:''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tsmall: true,\n\n\t/**\n\t* @private\n\t*/\n\tmarquee: false,\n\n\t/**\n\t* @private\n\t*/\n\tminWidth: false,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-calendar-picker-date enyo-unselectable',\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tif (typeof ilib !== 'undefined' && arguments.length > 0 && typeof(arguments[0].formatter) !== 'undefined') {\n\t\t\t// re-use this formatter to avoid creating a new one for each calendar date instance\n\t\t\tthis._dateFmt = arguments[0].formatter;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcolorChanged: function () {\n\t\tthis.addRemoveClass('moon-calendar-picker-date-shadow', this.color);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tif (this.value) {\n\t\t\tif (typeof ilib !== 'undefined') {\n\t\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\t\tunixtime: this.value.getTime(),\n\t\t\t\t\ttimezone: 'local'\n\t\t\t\t});\n\t\t\t\tthis.setContent(this._dateFmt.format(this.localeValue));\n\t\t\t} else {\n\t\t\t\tthis.setContent(this.value.getDate());\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Only called when [iLib]{@glossary ilib} is available. Allows the same\n\t* formatter to be shared across all calendar date instances, which is more\n\t* efficient than having each one make its own formatter.\n\t* @private\n\t*/\n\tsetDateFormatter: function (formatter) {\n\t\t// need to recreate the local value because\n\t\t// the new locale may have a different time\n\t\t// zone or calendar, so the date components\n\t\t// (year/month/day) may be different than before\n\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\tunixtime: this.value.getTime(),\n\t\t\ttimezone: 'local'\n\t\t});\n\n\t\t// reformat the number with the new timezone/calendar/locale\n\t\tthis._dateFmt = formatter;\n\t\tthis.setContent(this._dateFmt.format(this.localeValue));\n\t},\n\n\t/**\n\t* @private\n\t* @fires moon.CalendarDate#onDateSelected\n\t*/\n\ttap: function () {\n\t\tthis.doDateSelected();\n\t}\n});\n\n/**\n* {@link moon.SimpleMonthPicker} implements a control representing the month picker,\n* used by the monthly calendar kind {@link moon.Calendar}, which can represent\n* internationalized months when [iLib]{@glossary iLib} is available.\n*\n* @ui\n* @class moon.SimpleMonthPicker\n* @extends moon.SimplePicker\n* @public\n*/\nvar SimpleMonthPicker = kind(\n\t/** @lends moon.SimpleMonthPicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.SimpleMonthPicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: SimplePicker,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: /** @lends moon.SimpleMonthPicker.prototype */ {\n\n\t\t/**\n\t\t* How many months to show. A few international calendars\n\t\t* have more than 12 months in some years, but by default,\n\t\t* we will use the Gregorian calendar with 12 months.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 12\n\t\t* @public\n\t\t*/\n\t\tmonths: 12\n\t},\n\n\t/**\n\t* Shows/hides previous/next buttons based on current index.\n\t*\n\t* @private\n\t* @override\n\t*/\n\tshowHideNavButtons: function() {\n\t\tvar index = this.getSelectedIndex(),\n\t\t\tmaxIndex = Math.max(this.months, this.getClientControls().filter(function(val, idx, arr) { return val.content; }).length) - 1;\n\t\tvar prevButton = this.rtl ? this.$.buttonRight : this.$.buttonLeft;\n\t\tvar nextButton = this.rtl ? this.$.buttonLeft : this.$.buttonRight;\n\n\t\tif (this.disabled) {\n\t\t\tthis.hideNavButton(prevButton);\n\t\t\tthis.hideNavButton(nextButton);\n\t\t// Always show buttons if _this.wrap_ is _true_\n\t\t} else if (this.wrap) {\n\t\t\tthis.showNavButton(prevButton);\n\t\t\tthis.showNavButton(nextButton);\n\t\t// If we have one or less options, always show no buttons\n\t\t} else if (maxIndex <= 0) {\n\t\t\tthis.hideNavButton(prevButton);\n\t\t\tthis.hideNavButton(nextButton);\n\t\t// If we are on the first option, hide the left button\n\t\t} else if (index <= 0) {\n\t\t\tthis.showNavButton(nextButton);\n\t\t\tthis.hideNavButton(prevButton);\n\t\t// If we are on the last item, hide the right button\n\t\t} else if (index >= maxIndex) {\n\t\t\tthis.showNavButton(prevButton);\n\t\t\tthis.hideNavButton(nextButton);\n\t\t// Otherwise show both buttons\n\t\t} else {\n\t\t\tthis.showNavButton(prevButton);\n\t\t\tthis.showNavButton(nextButton);\n\t\t}\n\t},\n\n\t/**\n\t* Cycles the selected item to the one after the currently selected item.\n\t* Make sure not to cycle past the last month in the picker for this\n\t* calendar.\n\t*\n\t* @public\n\t* @override\n\t*/\n\tnext: function(sender, e) {\n\t\tif (!this.disabled) {\n\t\t\tvar idx = this.selectedIndex + 1;\n\t\t\tvar max = Math.min(this.getClientControls().length, this.months);\n\t\t\tif (idx > max - 1) {\n\t\t\t\tidx = this.wrap ? 0 : max - 1;\n\t\t\t}\n\t\t\tif (!this.wrap && idx === max - 1\n\t\t\t\t&& e && e.cancelHoldPulse) {\n\t\t\t\te.cancelHoldPulse();\n\t\t\t}\n\t\t\tthis.setSelectedIndex(idx);\n\t\t}\n\t}\n\n});\n\n/**\n* {@link moon.Calendar} is a control that displays a monthly calendar, with the\n* month name at the top and a grid of days, grouped into rows by week, below.\n*\n* The header buttons are used to navigate to the desired month; the desired day\n* is selected by tapping on it.\n*\n* ```\n* {kind: 'moon.Calendar', content: 'Calendar Title'}\n* ```\n*\n* @class moon.Calendar\n* @ui\n* @public\n*/\nvar Calendar = module.exports = kind(\n\t/** @lends moon.Calendar.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Calendar',\n\n\n\t/**\n\t* @private\n\t* @lends moon.Calendar.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t*\n\t\t* Current locale used for formatting. May be set after the control is\n\t\t* created, in which case the control will be updated to reflect the\n\t\t* new value.  Only valid if [iLib]{@glossary ilib} is loaded.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tlocale: '',\n\n\t\t/**\n\t\t*\n\t\t* The current {@glossary Date} object.\n\t\t*\n\t\t* @type {Date}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tvalue: null,\n\n\t\t/**\n\t\t*\n\t\t* The first day of the week in the current locale.\n\t\t* Valid values are `0` (i.e., Sunday) through `6` (Saturday). Default is `0`.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tfirstDayOfWeek: 0,\n\n\t\t/**\n\t\t*\n\t\t* Maximum number of weeks to display on a screen.\n\t\t* If this value is greater than `9`, dates two months in the future may be\n\t\t* shown. Unexpected input may result in errors.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 6\n\t\t* @public\n\t\t*/\n\t\tmaxWeeks: 6,\n\n\t\t/**\n\t\t*\n\t\t* Start value for range of years displayed in year picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1900\n\t\t* @public\n\t\t*/\n\t\tstartYear: 1900,\n\n\t\t/**\n\t\t*\n\t\t* End value for range of years displayed in year picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 2200\n\t\t* @public\n\t\t*/\n\t\tendYear: 2200,\n\n\t\t/**\n\t\t* When `true`, the days will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercaseDays: true,\n\n\t\t/**\n\t\t*\n\t\t* CSS classes used to decorate day labels (e.g., `'moon-divider'`).\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tdayOfWeekClasses: '',\n\n\t\t/**\n\t\t*\n\t\t* Length of abbreviation to use for day of the week.\n\t\t* Accepted values are `'short'`, `'medium'`, `'long'`, and `'full'`.\n\t\t* Or you can use the first char of it because ilib stores its first char only.\n\t\t* Only valid if [iLib]{@glossary ilib} is loaded.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'short' || 's'\n\t\t* @public\n\t\t*/\n\t\tdayOfWeekLength: 's'\t//short\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\t/**\n\t\t\tFires when the date changes.\n\n\t\t\t`inEvent.value` contains a standard JavaScript Date object representing\n\t\t\tthe current date.\n\t\t*/\n\t\tonChange: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmonths: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n\t/**\n\t* @private\n\t*/\n\tdays: ['S','M','T','W','T','F','S'],\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-calendar-picker',\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'monthPicker', kind: SimpleMonthPicker, classes: 'moon-calendar-picker-month', onChange: 'selectMonthPicker'},\n\t\t{name: 'yearPicker', kind: SimplePicker, classes: 'moon-calendar-picker-year', onChange: 'selectYearPicker'},\n\t\t{name: 'days', classes: 'moon-calendar-picker-days moon-neutral', kind: Group},\n\t\t{name: 'dates', kind: Group}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.initCalendar();\n\t\tthis.set('value', this.value || new Date(), true);\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis.setLocale(new ilib.LocaleInfo().locale);\n\t\t}\n\t},\n\n\t/**\n\t* Creates picker contents with default `(en-US)` values.\n\t*\n\t* @private\n\t*/\n\tinitCalendar: function () {\n\t\tvar i;\n\t\tvar startYear = this.getStartYear(),\n\t\t\tendYear = this.getEndYear(),\n\t\t\tnumberOfMonths = 12; // in the Gregorian calendar\n\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis.cal = ilib.Cal.newInstance();\n\t\t\tthis.localeValue = ilib.Date.newInstance({timezone: 'local'});\n\t\t\tthis._dateFmt = new ilib.DateFmt({\n\t\t\t\ttype: 'date',\t// only format the date component, not the time\n\t\t\t\tdate: 'd',\t\t// 'd' is the date of month\n\t\t\t\tuseNative: false,\n\t\t\t\tlength: 'short',\t//it uses 2 chars to abbreviate properly\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t\t// Create 13 months components in the month picker to take care of\n\t\t\t// the Hebrew calendar, but only show the last month in those Hebrew\n\t\t\t// years that actually have 13 months\n\t\t\tnumberOfMonths = 13;\n\t\t}\n\n\t\t//Populates SimplePicker with years.\n\t\tfor (i = startYear; i <= endYear; i++) {\n\t\t\tthis.$.yearPicker.createComponent({content: i, classes: 'picker-content'});\n\t\t}\n\t\t//Populates SimplePicker with months of the year, from JAN to DEC.\n\t\tvar months = this.months;\n\t\tfor (i = 0; i < numberOfMonths; i++) {\n\t\t\tthis.$.monthPicker.createComponent({content: months[i], classes: 'picker-content'});\n\t\t}\n\t\t//Initializes days of the week. SUN is the first and SAT is the last.\n\t\tfor(i = 0; i < 7; i++) {\n\t\t\tthis.$.days.createComponent({\n\t\t\t\tcontent: this.days[i],\n\t\t\t\tclasses: 'moon-calendar-picker-day-base ' + (this.dayOfWeekClasses || 'moon-calendar-picker-day'),\n\t\t\t\tdisabled: true\n\t\t\t});\n\t\t}\n\t\t//Populates Calendar with CalendarDate objects.\n\t\tif (!this.$.dates.controls.length) {\n\t\t\tfor (i = 1; i <= this.maxWeeks * 7; i++) {\n\t\t\t\tthis.$.dates.createComponent({\n\t\t\t\t\tkind: CalendarDate,\n\t\t\t\t\tonDateSelected:'selectDate',\n\t\t\t\t\tformatter: this._dateFmt // undefined if ilib is not available\n\t\t\t\t}, {owner:this});\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* according to the value, adjust the year bounds and update the year picker\n\t*\n\t* @private\n\t*/\n\tadjustYearBounds: function(){\n\t\tvar i, yearDiff,\n\t\t\tcount = this.$.yearPicker.getClientControls().length,\n\t\t\tyear = this.value instanceof Date ? this.value.getFullYear() : this.startYear;\n\n\t\tthis.startYear = year < this.startYear ? year : this.startYear;\n\t\tthis.endYear = year > this.endYear ? year : this.endYear;\n\t\tyearDiff = this.endYear - this.startYear;\n\t\tif(count <= yearDiff){\n\t\t\tfor(i = count; i <= yearDiff; i++) {\n\t\t\t\tthis.$.yearPicker.createComponent({classes: 'picker-content'});\n\t\t\t}\n\t\t\tthis.updateYearPicker();\n\t\t\tthis.$.yearPicker.render();\n\t\t}\n\t},\n\n\t/**\n\t * When [iLib]{@glossary ilib} is supported, calculates the start year in\n\t * the current calendar. Otherwise, returns the value of the\n\t * [startYear]{@link moon.Calendar#startYear} published property.\n\t *\n\t * @private\n\t */\n\tgetStartYear: function() {\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tvar greg = ilib.Date.newInstance({\n\t\t\t\ttype: \"gregorian\",\n\t\t\t\tyear: this.startYear,\n\t\t\t\tmonth: 1,\n\t\t\t\tday: 1,\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t\tvar localCalendarDate = ilib.Date.newInstance({\n\t\t\t\tjulianday: greg.getJulianDay(),\n\t\t\t\ttimezone: \"local\"\n\t\t\t});\n\t\t\treturn localCalendarDate.getYears();\n\t\t} else {\n\t\t\treturn this.startYear;\n\t\t}\n\t},\n\n\t/**\n\t * When [iLib]{@glossary ilib} is supported, calculates the end year in\n\t * the current calendar. Otherwise, returns the value of the\n\t * [endYear]{@link moon.Calendar#endYear} property.\n\t *\n\t * @private\n\t */\n\tgetEndYear: function() {\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tvar greg = ilib.Date.newInstance({\n\t\t\t\ttype: \"gregorian\",\n\t\t\t\tyear: this.endYear,\n\t\t\t\tmonth: 1,\n\t\t\t\tday: 1,\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t\tvar localCalendarDate = ilib.Date.newInstance({\n\t\t\t\tjulianday: greg.getJulianDay(),\n\t\t\t\ttimezone: \"local\"\n\t\t\t});\n\t\t\treturn localCalendarDate.getYears();\n\t\t} else {\n\t\t\treturn this.endYear;\n\t\t}\n\t},\n\n\t/**\n\t* When [iLib]{@glossary ilib} is supported, `this.locale` is taken from the\n\t* value passed in at Calendar instantiation time, or retrieved from the\n\t* default locale `(en-US)`.\n\t*\n\t* @fires moon.Calendar#onChange\n\t* @private\n\t*/\n\tlocaleChanged: function () {\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tilib.setLocale(this.locale);\n\t\t\t// the new locale may use a different calendar,\n\t\t\t// so redo the local date in that new calendar\n\t\t\t// The this.value does not change, but the local date does.\n\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\tunixtime: this.value.getTime(),\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\n\t\t\tthis._monthFmt = undefined; // force it to recreate the formatter\n\t\t\tthis._dayFmt = undefined;\n\t\t\tthis.calendarChanged();\n\t\t\tthis.firstDayOfWeek = -1; // Force change handler when locale changes\n\t\t\tthis.setFirstDayOfWeek(new ilib.LocaleInfo(this.locale).getFirstDayOfWeek());\n\n\t\t\t// notify each date instance as well\n\t\t\tvar dates = this.$.dates.getControls();\n\t\t\tthis._dateFmt = new ilib.DateFmt({\n\t\t\t\ttype: 'date',\t// only format the date component, not the time\n\t\t\t\tdate: 'd',\t\t// 'd' is the date of month\n\t\t\t\tuseNative: false,\n\t\t\t\tlength: 's',\t//\"short\" uses 2 chars to abbreviate properly\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t\tfor (var i = 0; i < this.$.dates.controls.length; i++) {\n\t\t\t\tdates[i].setDateFormatter(this._dateFmt);\n\t\t\t}\n\t\t}\n\t\tthis.updateYearPicker();\n\t\tthis.updateMonthPicker();\n\t\tthis.setDayOfWeekLength(this._dateFmt.length);\n\t\tthis.doChange({value: this.value});\n\t},\n\n\t/**\n\t* Sometimes the first day of week changes because of a locale change.\n\t* When this happens, we destroy the day label and reconstruct it.\n\t* We create a new `ilib.Date` instance with the time of the given day, and\n\t* get a Gregorian date instance that represents the first day of the week.\n\t*\n\t* @private\n\t*/\n\tfirstDayOfWeekChanged: function () {\n\t\tthis.updateDays();\n\t\tthis.updateDates();\n\t},\n\n\t/**\n\t* We were previously relying on a non-guaranteed ordering of calls (change handlers\n\t* on bindings, transformation of binding values) to perform validation on the\n\t* Date value before updating a control with this value. Though this ordering was\n\t* non-guaranteed, it has since changed and can possibly affect any code that is\n\t* improperly relying on the specific ordering of these calls. We instead handle the\n\t* validation in the generic setter and facade this via the `setValue()` method.\n\t*\n\t* @private\n\t*/\n\tsetValue: function (inValue) {\n\t\tthis.set('value', inValue);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tset: function (path, value) {\n\t\tif (path == 'value') {\n\t\t\tif(isNaN(value) || value === null) {\n\t\t\t\tvalue = new Date();\n\t\t\t}\n\t\t}\n\t\tControl.prototype.set.apply(this, arguments);\n\t},\n\n\t/**\n\t* @fires moon.Calendar#onChange\n\t* @private\n\t*/\n\tvalueChanged: function (inOld) {\n\t\tvar month, year;\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\tunixtime: this.value.getTime(),\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t\tmonth = this.localeValue.getMonths() - 1;\n\t\t\tyear = this.localeValue.getYears();\n\t\t} else {\n\t\t\tmonth = this.value.getMonth();\n\t\t\tyear = this.value.getFullYear();\n\t\t}\n\t\tthis.adjustYearBounds();\n\t\tif (!this.generated || this.$.monthPicker.getSelectedIndex() != month) {\n\t\t\tthis.$.monthPicker.setSelectedIndex(month);\n\t\t}\n\t\tif (!this.generated || this.$.yearPicker.getSelected().getContent() != year) {\n\t\t\tthis.$.yearPicker.setSelectedIndex(year - this.getStartYear());\n\t\t}\n\t\tthis.updateDates();\n\t\tif (this.value) {\n\t\t\tthis.doChange({value: this.value});\n\t\t}\n\t},\n\n\t/**\n\t* Updates year picker.\n\t*\n\t* @private\n\t*/\n\tupdateYearPicker: function () {\n\t\tvar i, l,\n\t\t\tyearPickerControls = this.$.yearPicker.getClientControls(),\n\t\t\tstartYear = this.getStartYear(),\n\t\t\tendYear = this.getEndYear();\n\t\tfor (i = 0, l = endYear - startYear; i <= l; i++) {\n\t\t\tyearPickerControls[i].setContent(i + startYear);\n\t\t}\n\t\tvar year = (typeof ilib !== 'undefined') ? this.localeValue.getYears() : this.value.getFullYear();\n\t\tthis.$.yearPicker.setSelectedIndex(year - this.getStartYear());\n\t},\n\n\t/**\n\t* Updates month name displayed in month picker.\n\t*\n\t* @private\n\t*/\n\tupdateMonthPicker: function () {\n\t\tvar month;\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tif (typeof(this._monthFmt) === 'undefined') {\n\t\t\t\tthis._monthFmt = new ilib.DateFmt({\n\t\t\t\t\tlocale: this.locale,\n\t\t\t\t\ttype: 'date',\t//only format the date component, not the time\n\t\t\t\t\tdate: 'm',\t\t//'m' is the month of year\n\t\t\t\t\tuseNative: false,\n\t\t\t\t\tlength: 'long'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar numberOfMonths = this.cal.getNumMonths(this.localeValue.getYears());\n\t\t\tvar monthPickerControls = this.$.monthPicker.getClientControls();\n\n\t\t\t// show the 13th month for those calendars that use it, and only in those\n\t\t\t// years that use it\n\t\t\tthis.$.monthPicker.setMonths(numberOfMonths);\n\n\t\t\t// this depends on the year because some calendars have 12 or 13 months,\n\t\t\t// depending on which year it is\n\t\t\tvar monthNames = this._monthFmt.getMonthsOfYear({\n\t\t\t\tyear: this.localeValue.getYears(),\n\t\t\t\tlength: 'long'\n\t\t\t});\n\t\t\tfor (var i = 0; i < monthNames.length - 1; i++) {\n\t\t\t\tmonthPickerControls[i].setContent(monthNames[i+1]);\n\t\t\t}\n\t\t\tmonth = this.localeValue.getMonths() - 1;\n\t\t} else {\n\t\t\tmonth = this.value.getMonth();\n\t\t}\n\t\tthis.$.monthPicker.setSelectedIndex(month);\n\t},\n\n\t/**\n\t* Updates days of the week from first day to last day.\n\t* If [iLib]{@glossary ilib} is loaded, a `'0'` value for `this.firstDayOfweek`\n\t* means Sunday and `'1'` means Monday.\n\t*\n\t* @private\n\t*/\n\tupdateDays: function () {\n\t\tif (typeof(this._dayFmt) === 'undefined' && typeof ilib !== 'undefined') {\n\t\t\tthis._dayFmt = new ilib.DateFmt({\n\t\t\t\ttype: 'date',\t//only format the date component, not the time\n\t\t\t\tdate: 'w',\t\t//'w' is the day of the week\n\t\t\t\tuseNative: false,\n\t\t\t\tlength: this.dayOfWeekLength,\n\t\t\t\tlocale: this.locale\n\t\t\t});\n\t\t}\n\n\t\tvar daysControls = this.$.days.getClientControls(),\n\t\t\tdaysOfWeek = this._dayFmt.getDaysOfWeek(),\n\t\t\tdayOfWeek;\n\t\tfor(var i = 0; i < 7; i++) {\n\t\t\tdayOfWeek = (this.firstDayOfWeek + i) % 7;\n\t\t\tif (typeof ilib !== 'undefined') {\n\t\t\t\tdaysControls[i].setContent(this.get('uppercaseDays') ? util.toUpperCase(daysOfWeek[dayOfWeek]) : daysOfWeek[dayOfWeek]);\n\t\t\t} else {\n\t\t\t\tdaysControls[i].setContent(this.days[dayOfWeek]);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Sets up first week of this month.\n\t* Before the first day of this month, days from the previous month will be\n\t* used to fill the calendar.\n\t*\n\t* @private\n\t*/\n\tupdatePrevMonth: function () {\n\t\tvar dt,\n\t\t\tdates,\n\t\t\ti;\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\t// get the first of this month\n\t\t\tdt = ilib.Date.newInstance({\n\t\t\t\tyear: this.localeValue.getYears(),\n\t\t\t\tmonth: this.localeValue.getMonths(),\n\t\t\t\tday: 1,\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\n\t\t\t// find the week-start day on or before the first of the month\n\t\t\tvar sunday = dt.onOrBefore(this.firstDayOfWeek);\n\n\t\t\t// if the sunday is before the current date\n\t\t\tvar sunJD = sunday.getJulianDay();\n\t\t\tvar daysBefore = Math.floor(dt.getJulianDay() - sunJD);\n\t\t\tif (daysBefore > 0) {\n\t\t\t\tdates = this.$.dates.getControls();\n\t\t\t\tvar temp;\n\t\t\t\tfor (i = 0; i <= daysBefore; i++) {\n\t\t\t\t\ttemp = ilib.Date.newInstance({\n\t\t\t\t\t\tjulianday: sunJD + i,\n\t\t\t\t\t\ttimezone: 'local'\n\t\t\t\t\t});\n\t\t\t\t\tdates[i].setValue(temp.getJSDate());\n\t\t\t\t\tdates[i].setColor(true);\n\t\t\t\t}\n\t\t\t\treturn daysBefore;\n\t\t\t}\n\t\t} else {\n\t\t\tvar value = this.value;\n\t\t\tdt = new Date(value.getFullYear(), value.getMonth(), value.getDate());\n\t\t\tdt.setDate(0);\n\t\t\tvar thisYear = dt.getFullYear(),\n\t\t\t\tdatesOfPrevMonth = dt.getDate(),\n\t\t\t\tdayOfLastDate = dt.getDay() - this.firstDayOfWeek,\n\t\t\t\tprevMonth = dt.getMonth();\n\t\t\tif (dayOfLastDate < 0) {\n\t\t\t\tdayOfLastDate += 7;\n\t\t\t}\n\t\t\tif (dayOfLastDate !== 6) {\n\t\t\t\tdates = this.$.dates.getControls();\n\t\t\t\tfor (i = 0; i <= dayOfLastDate; i++) {\n\t\t\t\t\tdates[i].setValue(new Date(thisYear, prevMonth, datesOfPrevMonth - dayOfLastDate + i));\n\t\t\t\t\tdates[i].setColor(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t},\n\n\t/**\n\t* Sets up last week of this month.\n\t* After the last day of this month, days from the next month will be used to\n\t* fill the calendar.\n\t*\n\t* @private\n\t*/\n\tupdateNextMonth: function (datesOfPrevMonth, monthLength) {\n\t\tvar startIndex = datesOfPrevMonth + monthLength,\n\t\t\tdates = this.$.dates.getControls(),\n\t\t\ti;\n\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tvar lastDay = ilib.Date.newInstance({\n\t\t\t\tyear: this.localeValue.getYears(),\n\t\t\t\tmonth: this.localeValue.getMonths(),\n\t\t\t\tday: monthLength,\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\n\t\t\t// get the first day of the next month\n\t\t\tvar jd = lastDay.getJulianDay() + 1;\n\t\t\tvar temp;\n\t\t\tfor (i = 0; i < this.$.dates.controls.length - startIndex; i++) {\n\t\t\t\ttemp = ilib.Date.newInstance({\n\t\t\t\t\tjulianday: jd + i,\n\t\t\t\t\ttimezone: 'local'\n\t\t\t\t});\n\t\t\t\tdates[startIndex + i].setValue(temp.getJSDate());\n\t\t\t\tdates[startIndex + i].setColor(true);\n\t\t\t}\n\t\t} else {\n\t\t\tvar value = this.value;\n\t\t\tvar dt = new Date(value.getFullYear(), value.getMonth(), value.getDate());\n\t\t\tdt.setMonth(dt.getMonth() + 1);\n\t\t\tvar thisYear = dt.getFullYear(),\n\t\t\t\tnextMonth = dt.getMonth();\n\t\t\tfor (i = 0; i < this.$.dates.controls.length - startIndex; i++) {\n\t\t\t\tdates[startIndex + i].setValue(new Date(thisYear, nextMonth, i + 1));\n\t\t\t\tdates[startIndex + i].setColor(true);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateDates: function () {\n\t\tvar datesOfPrevMonth = this.updatePrevMonth(),\n\t\t\tmonthLength,\n\t\t\tthisYear,\n\t\t\tthisMonth,\n\t\t\tdates,\n\t\t\ttemp,\n\t\t\ti;\n\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthisYear = this.localeValue.getYears();\n\t\t\tthisMonth = this.localeValue.getMonths();\n\t\t\tmonthLength = this.getMonthLength(thisYear, thisMonth);\n\t\t\tdates = this.$.dates.getControls();\n\t\t\tfor (i = 0; i < monthLength; i++) {\n\t\t\t\ttemp = ilib.Date.newInstance({\n\t\t\t\t\tyear: thisYear,\n\t\t\t\t\tmonth: thisMonth,\n\t\t\t\t\tday: i + 1,\n\t\t\t\t\ttimezone: 'local'\n\t\t\t\t});\n\t\t\t\tdates[datesOfPrevMonth + i].setValue(temp.getJSDate());\n\t\t\t\tdates[datesOfPrevMonth + i].setColor(false);\n\t\t\t}\n\t\t\tthis.$.dates.setActive(dates[datesOfPrevMonth - 1 + this.localeValue.getDays()]);\n\t\t} else {\n\t\t\tthisYear = this.value.getFullYear();\n\t\t\tthisMonth = this.value.getMonth();\n\t\t\tmonthLength = this.getMonthLength(thisYear, thisMonth);\n\t\t\tdates = this.$.dates.getControls();\n\t\t\tfor (i = 0; i < monthLength; i++) {\n\t\t\t\tdates[datesOfPrevMonth + i].setValue(new Date(thisYear, thisMonth, i + 1));\n\t\t\t\tdates[datesOfPrevMonth + i].setColor(false);\n\t\t\t}\n\t\t\tthis.$.dates.setActive(dates[datesOfPrevMonth - 1 + this.value.getDate()]);\n\t\t}\n\t\tthis.updateNextMonth(datesOfPrevMonth, monthLength);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetYear: function (newYear) {\n\t\tvar month,\n\t\t\tday,\n\t\t\tnewMonthLength;\n\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tif (this.localeValue.getYears() != newYear) {\n\t\t\t\tmonth = this.localeValue.getMonths();\n\t\t\t\tday = this.localeValue.getDays();\n\n\t\t\t\tnewMonthLength = this.getMonthLength(newYear, month);\n\n\t\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\t\tyear: newYear,\n\t\t\t\t\tmonth: month,\n\t\t\t\t\tday: (day > newMonthLength) ? newMonthLength : day,\n\t\t\t\t\ttimezone: 'local'\n\t\t\t\t});\n\n\t\t\t\tthis.setValue(this.localeValue.getJSDate());\n\n\t\t\t\t// Some years have a different number of months in other calendars,\n\t\t\t\t// so we need to make sure to update the month names in the picker\n\t\t\t\tthis.updateMonthPicker();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.value.getFullYear() != newYear) {\n\t\t\t\tmonth = this.value.getMonth();\n\t\t\t\tday = this.value.getDate();\n\n\t\t\t\tnewMonthLength = this.getMonthLength(newYear, month);\n\t\t\t\tvar newValue = new Date(newYear, month, (newMonthLength < day) ? newMonthLength : day);\n\t\t\t\tthis.setValue(newValue);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetMonth: function (newMonth) {\n\t\tvar year,\n\t\t\tday,\n\t\t\tnewMonthLength,\n\t\t\tvalue,\n\t\t\tnewValue;\n\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tnewMonth++; // convert to ilib month\n\t\t\tif (this.localeValue.getMonths() != newMonth) {\n\t\t\t\tyear = this.localeValue.getYears();\n\t\t\t\tday = this.localeValue.getDays();\n\n\t\t\t\tnewMonthLength = this.getMonthLength(year, newMonth);\n\n\t\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\t\tyear: year,\n\t\t\t\t\tmonth: newMonth,\n\t\t\t\t\tday: (day > newMonthLength) ? newMonthLength : day,\n\t\t\t\t\ttimezone: 'local'\n\t\t\t\t});\n\n\t\t\t\tthis.setValue(this.localeValue.getJSDate());\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.value.getMonth() != newMonth) {\n\t\t\t\tvalue = this.value;\n\t\t\t\tnewMonthLength = this.getMonthLength(value.getFullYear(), newMonth);\n\t\t\t\tnewValue = new Date(value.getFullYear(), newMonth, (newMonthLength < value.getDate()) ? newMonthLength : value.getDate());\n\t\t\t\tthis.setValue(newValue);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetDate: function (newDate) {\n\t\tvar year,\n\t\t\tmonth,\n\t\t\tnewMonthLength,\n\t\t\tvalue,\n\t\t\tnewValue;\n\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tyear = this.localeValue.getYears();\n\t\t\tmonth = this.localeValue.getMonths();\n\n\t\t\tnewMonthLength = this.getMonthLength(year, month);\n\n\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\tyear: year,\n\t\t\t\tmonth: month,\n\t\t\t\tday: (newDate > newMonthLength) ? newMonthLength : newDate,\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\n\t\t\tthis.setValue(this.localeValue.getJSDate());\n\t\t} else {\n\t\t\tvalue = this.value;\n\t\t\tnewMonthLength = this.getMonthLength(value.getFullYear(), value.getMonth());\n\t\t\tnewValue = new Date(value.getFullYear(), value.getMonth(), (newMonthLength < newDate) ? newMonthLength : newDate);\n\t\t\tthis.setValue(newValue);\n\t\t}\n\t},\n\n\t/**\n\t* Responds to selection of a particular [CalendarDate]{@link moon.CalendarDate}.\n\t*\n\t* @private\n\t*/\n\tselectDate: function (inSender, inEvent) {\n\t\tvar newValue = inEvent.originator.value;\n\t\tthis.setValue(newValue);\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\tunixtime: newValue.getTime(),\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* Responds to change of year in year picker.\n\t*\n\t* @private\n\t*/\n\tselectYearPicker: function (inSender, inEvent) {\n\t\tvar year = this.$.yearPicker.getSelected().getContent();\n\t\tthis.setYear(year);\n\t\t// some calendars have a different number of months and different\n\t\t// names of months depending on the year\n\t\tthis.updateMonthPicker();\n\t},\n\n\t/**\n\t* Responds to change of month in month picker.\n\t*\n\t* @private\n\t*/\n\tselectMonthPicker: function (inSender, inEvent) {\n\t\tvar month = this.$.monthPicker.getSelectedIndex();\n\t\tthis.setMonth(month);\n\t},\n\n\t/**\n\t* Returns number of days in a particular month/year.\n\t*\n\t* @private\n\t*/\n\tgetMonthLength: function (inYear, inMonth) {\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\treturn this.cal.getMonLength(inMonth, inYear);\n\t\t} else {\n\t\t\treturn 32 - new Date(inYear, inMonth, 32).getDate();\n\t\t}\n\t},\n\n\t/**\n\t* When [iLib]{@glossary ilib} is supported, and type of calendar is changed\n\t* (e.g., from gregorian to thaisolar, julian, arabic, hebrew or chinese),\n\t* calendar should check for any differences in year, month and day.\n\t*\n\t* @private\n\t*/\n\tcalendarChanged: function () {\n\t\tvar newCalendar = ilib.Cal.newInstance();\n\t\tif (newCalendar.getType() !== this.cal.getType()) {\n\t\t\tthis.cal = newCalendar;\n\t\t\tthis._monthFmt = undefined; // force it to recreate the formatter\n\t\t\tthis.updateMonthPicker();\n\t\t\tthis.updateYearPicker();\n\t\t}\n\t},\n\n\t/**\n\t* Switches CSS classes when the user (or developer) changes the day label\n\t* style dynamically.\n\t*\n\t* @private\n\t*/\n\tdayOfWeekClassesChanged: function (inOld) {\n\t\tvar dayControls = this.$.days.getClientControls();\n\t\tfor (var i = 0; i < dayControls.length; i++) {\n\t\t\tdayControls[i].removeClass(inOld || 'moon-calendar-picker-day');\n\t\t\tdayControls[i].addClass(this.dayOfWeekClasses || 'moon-calendar-picker-day');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdayOfWeekLengthChanged: function () {\n\t\tthis._dayFmt = undefined;\n\t\tthis.updateDays();\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tImage = require('../../../moonstone/lib/Image');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ImageSample',\n\tclasses: 'moon enyo-unselectable enyo-fit image-sample',\n\tcomponents: [\n\t\t{kind: Divider, content: 'Image'},\n\t\t{kind: Image, src: 'http://lorempixel.com/64/64/city/1/', alt: 'HD'},\n\t\t{kind: Image, src: 'http://lorempixel.com/128/128/city/1/', alt: 'FHD'},\n\t\t{kind: Image, src: 'http://lorempixel.com/256/256/city/1/', alt: 'UHD'},\n\t\t{kind: Divider, content: 'Multi-res'},\n\t\t{kind: BodyText, content: 'The below image will change its source resolution based on the screen size at the time this sample is loaded.'},\n\t\t{kind: Image, src: {'hd': 'http://lorempixel.com/64/64/city/1/', 'fhd': 'http://lorempixel.com/128/128/city/1/', 'uhd': 'http://lorempixel.com/256/256/city/1/'}, alt: 'Large'}\n\t]\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tdom = require('../../../enyo/lib/dom'),\n\tdispatcher = require('../../../enyo/lib/dispatcher'),\n\tAnimator = require('../../../enyo/lib/Animator'),\n\tControl = require('../../../enyo/lib/Control'),\n\tSignals = require('../../../enyo/lib/Signals'),\n\tVideo = require('../../../enyo/lib/Video');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tFittableColumns = require('../../../layout/lib/FittableColumns'),\n\tPanels = require('../../../layout/lib/Panels'),\n\tCarouselArranger = require('../../../layout/lib/CarouselArranger');\n\nvar\n\tSpinner = require('../Spinner'),\n\tIconButton = require('../IconButton'),\n\tVideoTransportSlider = require('../VideoTransportSlider'),\n\tVideoFullscreenToggleButton = require('../VideoFullscreenToggleButton'),\n\tMoonHistory = require('../History'),\n\tHistorySupport = MoonHistory.HistorySupport;\n\n/**\n* Fires when [disablePlaybackControls]{@link moon.VideoPlayer#disablePlaybackControls}\n* is `true` and the user taps one of the [controls]{@link enyo.Control}; may be handled to\n* re-enable the controls, if desired. No event-specific information is sent with this event.\n*\n* @event moon.VideoPlayer#onPlaybackControlsTapped\n* @type {Object}\n* @public\n*/\n\n/**\n* Child controls may bubble this event to toggle the fullscreen state of the video player.\n* No additional data needs to be sent with this event.\n*\n* @event moon.VideoPlayer#onRequestToggleFullscreen\n* @type {Object}\n* @public\n*/\n\n/**\n* Child controls may bubble this event to request an update to the current video position.\n*\n* @event moon.VideoPlayer#onRequestTimeChange\n* @type {Object}\n* @property {Number} value - Requested time index.\n* @public\n*/\n\n/**\n* {@link moon.VideoPlayer} is an HTML5 [video]{@glossary video} player control.  It wraps\n* an {@link enyo.Video} [object]{@glossary Object} to provide Moonstone-styled standard\n* transport [controls]{@link enyo.Control}, optional app-specific controls, and an information\n* bar for displaying video information and player feedback.\n*\n* All of the standard HTML5 media [events]{@glossary event} bubbled from `enyo.Video` will\n* also bubble from this control.\n*\n* Client [components]{@link enyo.Component} added to the `components` block are rendered into\n* the video player's transport control area, and should generally be limited to instances of\n* {@link moon.IconButton}. If more than two client components are specified, they will be\n* rendered into an \"overflow\" screen, reached by activating a button to the right of the\n* controls.\n*\n* Client components addded to the [infoComponents]{@link moon.VideoPlayer#infoComponents}\n* block will be created as a header for the video.\n*\n* ```javascript\n* {\n*\tkind: 'moon.VideoPlayer',\n*\tsrc: 'http://www.w3schools.com/html/mov_bbb.mp4',\n*\tcomponents: [\n*\t\t// Custom icons for app-specific features\n*\t\t{kind: 'moon.IconButton', src: 'assets/feature1.png', ontap: 'feature1'},\n*\t\t{kind: 'moon.IconButton', src: 'assets/feature2.png', ontap: 'feature2'},\n*\t\t{kind: 'moon.IconButton', src: 'assets/feature3.png', ontap: 'feature3'}\n*\t],\n*\tinfoComponents: [\n*\t\t{kind: 'moon.VideoHeaderBackground', components: [\n*\t\t\t{kind: 'moon.VideoInfoHeader', ... }\n*\t\t]\n*\t],\n* }\n* ```\n*\n* @class moon.VideoPlayer\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.VideoPlayer.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.VideoPlayer',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [HistorySupport],\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t// Fixme: When enyo-fit is used than the background image does not fit to video while dragging.\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-video-player enyo-unselectable',\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonPlaybackControlsTapped: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.VideoPlayer.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* URL of HTML5 video file.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsrc: '',\n\n\t\t/**\n\t\t* Array for setting multiple sources for the same video.\n\t\t*\n\t\t* @type {String[]}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tsources: null,\n\n\t\t/**\n\t\t* A [component]{@link enyo.Component} definition block describing components to\n\t\t* be created as an information block above the video. Usually, this contains a\n\t\t* [moon.VideoInfoBackground]{@link moon.VideoInfoBackground} with a\n\t\t* [moon.VideoInfoHeader]{@link moon.VideoInfoHeader} in it.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tinfoComponents: null,\n\n\t\t/**\n\t\t* If `true`, the video player is resized after metadata is loaded, based on the\n\t\t* [aspectRatio]{@link moon.VideoPlayer#aspectRatio} contained in the metadata. This\n\t\t* applies only to [inline]{@link moon.VideoPlayer#inline} mode (i.e., when\n\t\t* `inline` is `true`).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tautoResize: false,\n\n\t\t/**\n\t\t* Video aspect ratio, specified as `'width:height'`, or `'none'`.  When an aspect ratio\n\t\t* is specified at render time, the player's height or width will be updated to respect\n\t\t* the ratio, depending on whether [fixedHeight]{@link moon.VideoPlayer#fixedHeight} is\n\t\t* `true` or `false`. If [autoResize]{@link moon.VideoPlayer#autoResize} is `true`, the\n\t\t* `aspectRatio` will be updated based on the metadata for the current video and the\n\t\t* player will be resized accordingly. This applies only to\n\t\t* [inline]{@link moon.VideoPlayer#inline} mode.\n\t\t*\n\t\t* @type {String}\n\t\t* @default '16:9'\n\t\t* @public\n\t\t*/\n\t\taspectRatio: '16:9',\n\n\t\t/**\n\t\t* When `true`, the width will be adjusted at render time based on the observed height\n\t\t* and the aspect ratio. When `false` (the default), the height will be adjusted at\n\t\t* render time based on the observed width and the aspect ratio. This property is ignored\n\t\t* if [aspectRatio]{@link moon.VideoPlayer#aspectRatio} is `'none'` or a **falsy**\n\t\t* value.  In addition, this applies only to [inline]{@link moon.VideoPlayer#inline} mode.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tfixedHeight: false,\n\n\t\t/**\n\t\t* Amount of time (in milliseconds) after which control buttons are automatically hidden.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 7000\n\t\t* @public\n\t\t*/\n\t\tautoCloseTimeout: 7000,\n\n\t\t/**\n\t\t* Duration of the video.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tduration: 0,\n\n\t\t/**\n\t\t* If `true`, playback starts automatically when video is loaded.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tautoplay: false,\n\n\t\t/**\n\t\t* If `false`, fullscreen video control overlays (info or transport) are not shown\n\t\t* or hidden automatically in response to `up` or `down` events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoShowOverlay: true,\n\n\t\t/**\n\t\t* If `true`, the overlay will be shown in response to pointer movement (in addition to\n\t\t* `up` and `down` events).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tshakeAndWake: false,\n\n\t\t/**\n\t\t* If `false`, the top [infoComponents]{@link moon.VideoPlayer#infoComponents} are\n\t\t* not automatically shown or hidden in response to `up` events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoShowInfo: true,\n\n\t\t/**\n\t\t* If `false`, the bottom slider/controls are not automatically shown or hidden in\n\t\t* response to `down` events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoShowControls: true,\n\n\t\t/**\n\t\t* When `true`, the top [infoComponents]{@link moon.VideoPlayer#infoComponents} are\n\t\t* shown with no timeout; when `false` (the default), they are shown based on the\n\t\t* value of the [autoShowInfo]{@link moon.VideoPlayer#autoShowInfo} property.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tshowInfo: false,\n\n\t\t/**\n\t\t* When `false`, the player starts in fullscreen mode; when `true`, it starts in\n\t\t* inline mode. As this is meant to be initialized on startup, fire the\n\t\t* [onRequestToggleFullscreen]{@link moon.VideoPlayer#onRequestToggleFullscreen}\n\t\t* event from a child control or call\n\t\t* [toggleFullscreen()]{@link moon.VideoPlayer#toggleFullscreen} to dynamically\n\t\t* toggle between fullscreen and inline mode.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tinline: false,\n\n\t\t/**\n\t\t* Amount of time (in seconds) to jump in response to jump buttons. This value is ignored\n\t\t* when [jumpStartEnd]{@link moon.VideoPlayer#jumpStartEnd} is `true`.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 30\n\t\t* @public\n\t\t*/\n\t\tjumpSec: 30,\n\n\t\t/**\n\t\t* If `true`, the \"jump forward\" and \"jump back\" buttons jump to the start and end of the\n\t\t* video, respectively.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tjumpStartEnd: false,\n\n\t\t/**\n\t\t* When `true`, popups opened from the video player's client controls are automatically\n\t\t* hidden.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoHidePopups: true,\n\n\t\t/**\n\t\t* If `false`, the progress bar is removed and any additional controls are moved\n\t\t* downward.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowProgressBar: true,\n\n\t\t/**\n\t\t* If `false`, the transport controls are removed, but the icon button area is kept.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowPlaybackControls: true,\n\n\t\t/**\n\t\t* When `true`, playback controls are hidden when the slider is hovered over.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\thideButtonsOnSlider: true,\n\n\t\t/**\n\t\t* If `true`, the slider is disabled and will not be enabled when video data has\n\t\t* loaded.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisableSlider: false,\n\n\t\t/**\n\t\t* If `false`, the \"jump forward\" and \"jump back\" buttons are hidden.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowJumpControls: true,\n\n\t\t/**\n\t\t* When `true`, the fast-forward and rewind buttons are visible.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tshowFFRewindControls: false,\n\n\t\t/**\n\t\t* If `true`, the slider and playback controls are disabled. If the user taps the\n\t\t* controls, an\n\t\t* [onPlaybackControlsTapped]{@link moon.VideoPlayer#onPlaybackControlsTapped}\n\t\t* event will be bubbled.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisablePlaybackControls: false,\n\n\t\t/**\n\t\t* When `true`, playback controls are only active when the video player has a valid\n\t\t* source URL and no errors occur during video loading.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tdisablePlaybackControlsOnUnload: true,\n\n\t\t/**\n\t\t* If `false`, the Play/Pause control is hidden.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowPlayPauseControl: true,\n\n\t\t/**\n\t\t* If `false`, the video element is hidden.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tshowVideo: true,\n\n\t\t/**\n\t\t* When `true`, a spinner is automatically shown when video is in the play state but\n\t\t* is still loading/buffering.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoShowSpinner: true,\n\n\t\t/**\n\t\t* Source of image file to show when video isn't available or user has not yet tapped the\n\t\t* play button.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tposter: '',\n\n\t\t/**\n\t\t* If `false`, video player won't respond to remote control.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\thandleRemoteControlKey: true,\n\n\t\t/**\n\t\t* Base URL for icons\n\t\t*\n\t\t* @private\n\t\t*/\n\t\ticonPath: '$lib/moonstone/images/video-player/',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tjumpBackIcon: 'skipbackward',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\trewindIcon: 'backward',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tplayIcon: 'play',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tpauseIcon: 'pause',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tfastForwardIcon: 'forward',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tjumpForwardIcon: 'skipforward',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tmoreControlsIcon: 'arrowextend',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tlessControlsIcon: 'arrowshrink',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tinlinePlayIcon: 'play',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tinlinePauseIcon: 'pause',\n\n\t\t/**\n\t\t* Name of font-based icon or image file.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tinlineFullscreenIcon: 'fullscreen',\n\n\t\t/**\n\t\t* Default hash of playback states and their associated playback rates.\n\t\t* playbackRateHash: {\n\t\t*\tfastForward: ['2', '4', '8', '16'],\n\t\t*\trewind: ['-2', '-4', '-8', '-16'],\n\t\t*\tslowForward: ['1/4', '1/2'],\n\t\t*\tslowRewind: ['-1/2', '-1']\n\t\t* }\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tplaybackRateHash: {\n\t\t\tfastForward: ['2', '4', '8', '16'],\n\t\t\trewind: ['-2', '-4', '-8', '-16'],\n\t\t\tslowForward: ['1/4', '1/2', '1'],\n\t\t\tslowRewind: ['-1/2', '-1']\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonRequestTimeChange: 'timeChange',\n\t\tonRequestToggleFullscreen: 'toggleFullscreen',\n\t\tonSpotlightKeyUp: 'resetAutoTimeout',\n\t\tonSpotlightKeyDown: 'spotlightKeyDownHandler',\n\t\tonSpotlightUp: 'spotlightUpHandler',\n\t\tonSpotlightDown: 'spotlightDownHandler',\n\t\tonSpotlightLeft: 'spotlightLeftRightFilter',\n\t\tonSpotlightRight: 'spotlightLeftRightFilter',\n\t\tonresize: 'handleResize'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teventsToCapture: {\n\t\tonSpotlightFocus: 'capturedFocus'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.src',\t\t\t\t\t\tto:'.$.video.src'},\n\t\t{from: '.sources',\t\t\t\t\tto:'.$.video.sourceComponents'},\n\t\t{from: '.playbackRateHash',\t\t\tto:'.$.video.playbackRateHash'},\n\t\t{from: '.poster',\t\t\t\t\tto:'.$.video.poster'},\n\t\t{from: '.constrainToBgProgress',\tto:'.$.slider.constrainToBgProgress'},\n\t\t{from: '.elasticEffect',\t\t\tto:'.$.slider.elasticEffect'},\n\t\t{from: '.showJumpControls',\t\t\tto:'.$.jumpForward.showing'},\n\t\t{from: '.showJumpControls',\t\t\tto:'.$.jumpBack.showing'},\n\t\t{from: '.showFFRewindControls',\t\tto:'.$.fastForward.showing'},\n\t\t{from: '.showFFRewindControls',\t\tto:'.$.rewind.showing'},\n\t\t{from: '.showPlayPauseControl',\t\tto:'.$.fsPlayPause.showing'},\n\t\t{from: '.showVideo',\t\t\t\tto:'.$.videoContainer.showing'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tobservers: {\n\t\tupdateSource: ['src', 'sources']\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_isPlaying: false,\n\n\t/**\n\t* @private\n\t*/\n\t_canPlay: false,\n\n\t/**\n\t* @private\n\t*/\n\t_autoCloseTimer: null,\n\n\t/**\n\t* @private\n\t*/\n\t_currentTime: 0,\n\n\t/**\n\t* @private\n\t*/\n\t_panelsShowing: false,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{kind: Signals, onPanelsShown: 'panelsShown', onPanelsHidden: 'panelsHidden', onPanelsHandleFocused: 'panelsHandleFocused', onPanelsHandleBlurred: 'panelsHandleBlurred', onFullscreenChange: 'fullscreenChanged', onkeyup:'remoteKeyHandler', onSpotlightModeChanged: \"resetPreviewMode\"},\n\t\t{name: 'videoContainer', kind: Control, classes: 'moon-video-player-container', components: [\n\t\t\t{name: 'video', kind: Video, classes: 'moon-video-player-video',\n\t\t\t\tontimeupdate: 'timeUpdate', onloadedmetadata: 'metadataLoaded', durationchange: 'durationUpdate', onloadeddata: 'dataloaded', onprogress: '_progress', onPlay: '_play', onpause: '_pause', onStart: '_start',  onended: '_stop',\n\t\t\t\tonFastforward: '_fastforward', onSlowforward: '_slowforward', onRewind: '_rewind', onSlowrewind: '_slowrewind',\n\t\t\t\tonJumpForward: '_jumpForward', onJumpBackward: '_jumpBackward', onratechange: 'playbackRateChange', ontap: 'videoTapped', oncanplay: '_setCanPlay', onwaiting: '_waiting', onerror: '_error'\n\t\t\t},\n\t\t\t{name: 'spinner', kind: Spinner, classes: 'moon-video-player-spinner'}\n\t\t]},\n\n\t\t//* Fullscreen controls\n\t\t{name: 'fullscreenControl', kind: Control, classes: 'moon-video-fullscreen-control enyo-fit scrim', onmousemove: 'mousemove', components: [\n\n\t\t\t{name: 'videoInfoHeaderClient', kind: Control, showing: false, classes: 'moon-video-player-header'},\n\n\t\t\t{name: 'playerControl', kind: Control, classes: 'moon-video-player-bottom', showing: false, components: [\n\t\t\t\t{name: 'controls', kind: FittableColumns, rtl:false, classes: 'moon-video-player-controls', ontap: 'resetAutoTimeout', components: [\n\n\t\t\t\t\t{name: 'leftPremiumPlaceHolder', kind: Control, classes: 'moon-video-player-premium-placeholder-left'},\n\n\t\t\t\t\t{name: 'controlsContainer', kind: Panels, arrangerKind: CarouselArranger, fit: true, draggable: false, classes: 'moon-video-player-controls-container', components: [\n\t\t\t\t\t\t{name: 'trickPlay', kind: Control, ontap:'playbackControlsTapped', components: [\n\t\t\t\t\t\t\t{name: 'playbackControls', kind: Control, classes: 'moon-video-player-control-buttons', components: [\n\t\t\t\t\t\t\t\t{name: 'jumpBack',\t\tkind: IconButton, small: false, onholdpulse: 'onHoldPulseBackHandler', ontap: 'onjumpBackward', onrelease: 'onReleaseHandler'},\n\t\t\t\t\t\t\t\t{name: 'rewind',\t\tkind: IconButton, small: false, ontap: 'rewind'},\n\t\t\t\t\t\t\t\t{name: 'fsPlayPause',\tkind: IconButton, small: false, ontap: 'playPause'},\n\t\t\t\t\t\t\t\t{name: 'fastForward',\tkind: IconButton, small: false, ontap: 'fastForward'},\n\t\t\t\t\t\t\t\t{name: 'jumpForward',\tkind: IconButton, small: false, onholdpulse: 'onHoldPulseForwardHandler', ontap: 'onjumpForward', onrelease: 'onReleaseHandler'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{name: 'client', kind: Control, classes: 'moon-video-player-more-controls'}\n\t\t\t\t\t]},\n\n\t\t\t\t\t{name: 'rightPremiumPlaceHolder', kind: Control, classes: 'moon-video-player-premium-placeholder-right', components: [\n\t\t\t\t\t\t{name: 'moreButton', kind: IconButton, small: false, ontap: 'moreButtonTapped'}\n\t\t\t\t\t]}\n\t\t\t\t]},\n\n\t\t\t\t{name: 'sliderContainer', kind: Control, classes: 'moon-video-player-slider-container', components: [\n\t\t\t\t\t{name: 'slider', kind: VideoTransportSlider, rtl: false, disabled: true, onSeekStart: 'sliderSeekStart', onSeek: 'sliderSeek', onSeekFinish: 'sliderSeekFinish',\n\t\t\t\t\t\tonEnterTapArea: 'onEnterSlider', onLeaveTapArea: 'onLeaveSlider', ontap:'playbackControlsTapped'\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t//* Inline controls\n\t\t{name: 'inlineControl', kind: Control, classes: 'moon-video-inline-control', components: [\n\t\t\t{name: 'currPosAnimator', kind: Animator, onStep: 'currPosAnimatorStep', onEnd: 'currPosAnimatorComplete'},\n\t\t\t{name: 'bgProgressStatus', kind: Control, classes: 'moon-video-inline-control-bgprogress'},\n\t\t\t{name: 'progressStatus', kind: Control, classes: 'moon-video-inline-control-progress'},\n\t\t\t{kind: Control, classes: 'moon-video-inline-control-text', components: [\n\t\t\t\t{name: 'currTime', kind: Control, content: '00:00 / 00:00'}\n\t\t\t]},\n\t\t\t{name: 'ilPlayPause', kind: IconButton, ontap: 'playPause'},\n\t\t\t{name: 'ilFullscreen', kind: VideoFullscreenToggleButton, small: true}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.updateSource();\n\t\tthis.createInfoControls();\n\t\tthis.inlineChanged();\n\t\tthis.showInfoChanged();\n\t\tthis.autoShowInfoChanged();\n\t\tthis.autoShowControlsChanged();\n\t\tthis.autoplayChanged();\n\t\tthis.updateMoreButton();\n\t\tthis.showPlaybackControlsChanged();\n\t\tthis.showProgressBarChanged();\n\t\tthis.jumpSecChanged();\n\t\tthis.updatePlaybackControlState();\n\t\tthis.retrieveIconsSrcOrFont(this.$.jumpBack, this.jumpBackIcon, 'moon-icon-video-main-control-font-style');\n\t\tthis.retrieveIconsSrcOrFont(this.$.rewind, this.rewindIcon, 'moon-icon-video-main-control-font-style');\n\t\tthis.retrieveIconsSrcOrFont(this.$.fastForward, this.fastForwardIcon, 'moon-icon-video-main-control-font-style');\n\t\tthis.retrieveIconsSrcOrFont(this.$.jumpForward, this.jumpForwardIcon, 'moon-icon-video-main-control-font-style');\n\t\tthis.retrieveIconsSrcOrFont(this.$.ilFullscreen, this.inlineFullscreenIcon, 'moon-video-inline-control-fullscreen');\n\t\tthis.$.ilFullscreen.removeClass('moon-icon-video-round-controls-style moon-icon-exitfullscreen-font-style');\n\t\tif (window.ilib) {\n\t\t\tthis.durfmt = new ilib.DurFmt({length: 'medium', style: 'clock', useNative: false});\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcheckIconType: function(icon) {\n\t\tvar imagesrcRegex=/\\.(jpg|jpeg|png|gif)$/i;\n\t\tvar iconType=imagesrcRegex.test(icon)?'image':'iconfont';\n\t\treturn iconType;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttransformIconSrc: function(icon) {\n\t\tvar iconPath=Boolean(this.checkIconType(icon)=='image')?(this.iconPath+icon):icon;\n\t\treturn iconPath;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisablePlaybackControlsChanged: function() {\n\t\tthis.updatePlaybackControlState();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisablePlaybackControlsOnUnloadChanged: function() {\n\t\tthis.updatePlaybackControlState();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePlaybackControlState: function() {\n\t\tvar disabled = this.disablePlaybackControls ||\n\t\t\tthis._panelsShowing ||\n\t\t\t(this.disablePlaybackControlsOnUnload && (this._errorCode || (!this.getSrc() && !this.getSources()) ));\n\t\tthis.updateSliderState();\n\t\tthis.$.playbackControls.addRemoveClass('disabled', disabled);\n\t\tthis.$.jumpBack.setDisabled(disabled);\n\t\tthis.$.rewind.setDisabled(disabled);\n\t\tthis.$.fsPlayPause.setDisabled(disabled);\n\t\tthis.$.fastForward.setDisabled(disabled);\n\t\tthis.$.jumpForward.setDisabled(disabled);\n\t\tthis.$.ilPlayPause.setDisabled(disabled);\n\t\tvar currentSpot = Spotlight.getCurrent();\n\t\tif (currentSpot && currentSpot.disabled) {\n\t\t\tif (this.isFullscreen() || !this.getInline()) {\n\t\t\t\tthis.spotFSBottomControls();\n\t\t\t} else {\n\t\t\t\tSpotlight.spot(this.$.ilFullscreen);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tplaybackControlsTapped: function() {\n\t\tif (this.disablePlaybackControls) {\n\t\t\tthis.bubble('onPlaybackControlsTapped');\n\t\t}\n\t},\n\t/**\n\t* @private\n\t*/\n\tresetPreviewMode: function(){\n\t\tif(!Spotlight.getPointerMode() && this.$.slider.isInPreview() && !this.inline) {\n\t\t\tthis.$.controls.setShowing(true);\n\t\t\tthis.$.slider.endPreview();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function() {\n\t\tControl.prototype.rendered.apply(this, arguments);\n\t\t//* Change aspect ratio based on initialAspectRatio\n\t\tthis.aspectRatioChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowPlaybackControlsChanged: function(was) {\n\t\tthis.$.trickPlay.set('showing', this.showPlaybackControls);\n\t\tthis.$.moreButton.set('showing', this.showPlaybackControls && this.clientComponentsCount > 2);\n\t\tthis.toggleSpotlightForMoreControls(!this.showPlaybackControls);\n\t\tthis.$.client.addRemoveClass('moon-video-player-more-controls', this.showPlaybackControls);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowProgressBarChanged: function(was) {\n\t\tthis.$.sliderContainer.setShowing(this.showProgressBar);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateSource: function(old, value, source) {\n\t\tthis._canPlay = false;\n\t\tthis._isPlaying = this.autoplay;\n\t\tthis._errorCode = null;\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t\tthis.updatePlaybackControlState();\n\t\tthis._resetTime();\n\n\t\t// since src and sources are mutually exclusive, clear the other property\n\t\t// when one changes\n\t\tif (source === 'src') {\n\t\t\tthis.sources = null;\n\t\t} else if (source === 'sources') {\n\t\t\tthis.src = '';\n\t\t}\n\t},\n\n\t/**\n\t* Returns the underlying {@link enyo.Video} control (wrapping the HTML5 video node).\n\t*\n\t* @returns {enyo.Video} - An {@link enyo.Video} control.\n\t* @public\n\t*/\n\tgetVideo: function() {\n\t\treturn this.$.video;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateInfoControls: function() {\n\t\tvar owner = this.hasOwnProperty('infoComponents') ? this.getInstanceOwner() : this;\n\t\tthis.$.videoInfoHeaderClient.createComponents(this.infoComponents, {owner: owner});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateClientComponents: function(comps) {\n\t\tcomps = (comps) ? util.clone(comps) : [];\n\t\tthis.clientComponentsCount = comps.length;\n\t\tif (!this._buttonsSetup) {\n\t\t\tthis._buttonsSetup = true;\n\t\t\tif (!comps || comps.length === 0) {\n\t\t\t\t// No components - destroy more button\n\t\t\t\tthis.$.leftPremiumPlaceHolder.hide();\n\t\t\t\tthis.$.rightPremiumPlaceHolder.hide();\n\t\t\t} else if (comps.length <= 2) {\n\t\t\t\t// One or two components - destroy more button and utilize left/right premium placeholders\n\t\t\t\tthis.$.leftPremiumPlaceHolder.createComponent(comps.shift(), {owner: this.getInstanceOwner()});\n\t\t\t\tif (comps.length === 1) {\n\t\t\t\t\tthis.$.rightPremiumPlaceHolder.createComponent(comps.shift(), {owner: this.getInstanceOwner()});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// More than two components - use extra panel, with left premium plaeholder for first component\n\t\t\t\tthis.$.leftPremiumPlaceHolder.createComponent(comps.shift(), {owner: this.getInstanceOwner()});\n\t\t\t}\n\t\t\t// Create the rest of the components in the client (panels)\n\t\t\tthis.createComponents(comps, {owner: this.getInstanceOwner()});\n\t\t} else {\n\t\t\tControl.prototype.createClientComponents.apply(this, arguments);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tplayIconChanged: function() {\n\t\tthis.updatePlayPauseButtons();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpauseIconChanged: function() {\n\t\tthis.updatePlayPauseButtons();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinlinePlayIconChanged: function() {\n\t\tthis.updatePlayPauseButtons();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinlinePauseIconChanged: function() {\n\t\tthis.updatePlayPauseButtons();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmoreControlsIconChanged: function() {\n\t\tthis.updateMoreButton();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlessControlsIconChanged: function() {\n\t\tthis.updateMoreButton();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoplayChanged: function() {\n\t\tthis.$.video.setAutoplay(this.autoplay);\n\t\tthis._isPlaying = this.autoplay;\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tjumpSecChanged: function() {\n\t\tthis.$.video.setJumpSec(this.jumpSec);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisableSliderChanged: function() {\n\t\tthis.updateSliderState();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateSliderState: function() {\n\t\t//* this should be be called on create because default slider status should be disabled.\n\t\tvar disabled =\n\t\t\tthis.disableSlider ||\n\t\t\tthis.disablePlaybackControls ||\n\t\t\t!this._loaded ||\n\t\t\t(this.disablePlaybackControlsOnUnload && (this._errorCode || (!this.getSrc() && !this.getSources()) ));\n\t\tthis.$.slider.setDisabled(disabled);\n\t\t// We need an explicit call to showKnobStatus as moon.Slider's disabledChanged method\n\t\t// only handles hiding of the knob status. This behavior should not be changed in\n\t\t// disabledChanged, as the normal behavior of moon.Slider is to display the knob status\n\t\t// upon dragging, whereas moon.VideoPlayer is forcing the knob status to be shown when\n\t\t// the slider is visible.\n\t\tif (!disabled) {\n\t\t\tthis.$.slider.showKnobStatus();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoShowOverlayChanged: function() {\n\t\tthis.autoShowInfoChanged();\n\t\tthis.autoShowControlsChanged();\n\t\tif (this.autoShowOverlay) {\n\t\t\tthis.resetAutoTimeout();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoShowInfoChanged: function() {\n\t\tif (this.$.videoInfoHeaderClient.getShowing() && !this.autoShowInfo && !this.showInfo) {\n\t\t\tthis.$.videoInfoHeaderClient.hide();\n\t\t}\n\t\tif (this.autoShowInfo) {\n\t\t\tthis.resetAutoTimeout();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoShowControlsChanged: function() {\n\t\tif (this.$.playerControl.getShowing() && !this.autoShowControls) {\n\t\t\tthis.$.playerControl.hide();\n\t\t}\n\t\tif (this.autoShowControls) {\n\t\t\tthis.resetAutoTimeout();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowInfoChanged: function() {\n\t\tthis.$.videoInfoHeaderClient.setShowing(this.showInfo);\n\n\t\tif (this.showInfo) {\n\t\t\t// Kick off any marquees in the video info header\n\t\t\tthis.$.videoInfoHeaderClient.waterfallDown('onRequestStartMarquee');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinlineChanged: function() {\n\t\t// Force fullscreen\n\t\tthis.addRemoveClass('enyo-fullscreen enyo-fit', !this.inline);\n\t\t// Padding-bottom contains inline controls\n\t\tthis.addRemoveClass('moon-video-inline', this.inline);\n\t\t// show hide controls visibility\n\t\tthis.$.inlineControl.setShowing(this.inline);\n\t\tthis.$.fullscreenControl.setShowing(!this.inline);\n\t\tif (!this.inline) {\n\t\t\tthis.$.inlineControl.canGenerate = false;\n\t\t}\n\t\tthis.spotlight = !this.inline;\n\t},\n\n\t/**\n\t* Unloads the current video source, stopping all playback and buffering.\n\t*\n\t* @public\n\t*/\n\tunload: function() {\n\t\tthis.$.video.unload();\n\t\tthis._resetTime();\n\t\tthis._loaded = false;\n\t\tthis._isPlaying = false;\n\t\tthis._canPlay = false;\n\t\tthis._errorCode = null;\n\t\tthis.src = '';\n\t\tthis.sources = null;\n\t\tthis.updatePlaybackControlState();\n\t\tthis.updateSpinner();\n\t},\n\tshowScrim: function(show) {\n\t\tthis.$.fullscreenControl.addRemoveClass('scrim', !show);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateSpotability: function() {\n\t\tvar spotState = this._panelsShowing ? false : (this._controlsShowing ? 'container' : true);\n\t\tthis.updatePlaybackControlState();\n\t\tthis.set('spotlight', spotState);\n\t\tthis.$.leftPremiumPlaceHolder.spotlightDisabled = this._panelsShowing;\n\t\tthis.$.rightPremiumPlaceHolder.spotlightDisabled = this._panelsShowing;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpanelsShown: function(sender, e) {\n\t\tthis._panelsShowing = true;\n\t\tthis._controlsShowing = false;\n\t\tthis._infoShowing = false;\n\t\tthis.updateSpotability();\n\t\tif (e.initialization) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((this.isFullscreen() || !this.getInline()) && this.isOverlayShowing()) {\n\t\t\tthis.hideFSControls();\n\t\t\tSpotlight.unspot();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpanelsHidden: function(sender, e) {\n\t\tvar current;\n\n\t\tthis._panelsShowing = false;\n\t\tthis.updateSpotability();\n\n\t\tcurrent = Spotlight.getCurrent();\n\t\tif (!current || !current.isDescendantOf(this)) {\n\t\t\tSpotlight.spot(this);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpanelsHandleFocused: function(sender, e) {\n\t\tthis._infoShowing = this.$.videoInfoHeaderClient.getShowing();\n\t\tthis._controlsShowing = this.$.playerControl.getShowing();\n\t\tthis.hideFSControls(true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpanelsHandleBlurred: function(sender, e) {\n\t\tif (this.isLarge() && !this.isOverlayShowing()) {\n\t\t\tif (this._infoShowing) {\n\t\t\t\tthis.showFSInfo();\n\t\t\t}\n\t\t\tif (this._controlsShowing) {\n\t\t\t\tutil.asyncMethod(this, 'showFSBottomControls');\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tisLarge: function() {\n\t\treturn this.isFullscreen() || !this.get('inline');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightLeftRightFilter: function(sender, e) {\n\t\treturn this.spotlightModal && e.originator === this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightUpHandler: function(sender, e) {\n\t\tif (this._shouldHandleUpDown) {\n\t\t\t// Toggle info header on 'up' press\n\t\t\tif (e.originator !== this.$.slider) {\n\t\t\t\tif (!this.$.videoInfoHeaderClient.getShowing()) {\n\t\t\t\t\tthis.showFSInfo();\n\t\t\t\t} else {\n\t\t\t\t\tthis.hideFSInfo();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightDownHandler: function(sender, e) {\n\t\tif (this._shouldHandleUpDown) {\n\t\t\t// Toggle info header on 'down' press\n\t\t\tif (!this.$.playerControl.getShowing()) {\n\t\t\t\tthis.showFSBottomControls();\n\t\t\t} else {\n\t\t\t\tthis.hideFSBottomControls();\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightKeyDownHandler: function(sender, e) {\n\t\tthis._shouldHandleUpDown = this.isLarge() && (e.originator === this || Spotlight.getParent(e.originator) === this);\n\t},\n\n\t///// Fullscreen controls /////\n\n\n\t/**\n\t* @private\n\t*/\n\t_holdPulseThreadhold: 400,\n\n\t/**\n\t* @private\n\t*/\n\t_holding: false,\n\n\t/**\n\t* @private\n\t*/\n\t_sentHold: false,\n\n\t/**\n\t* Returns `true` if any piece of the overlay is showing.\n\t*\n\t* @private\n\t*/\n\tisOverlayShowing: function() {\n\t\treturn this.$.videoInfoHeaderClient.getShowing() || this.$.playerControl.getShowing();\n\t},\n\n\t/**\n\t* Resets the timeout, or wakes the overlay.\n\t*\n\t* @private\n\t*/\n\tmousemove: function(sender, e) {\n\t\tif (this.isOverlayShowing()) {\n\t\t\tthis.resetAutoTimeout();\n\t\t} else if (this.shakeAndWake) {\n\t\t\tthis.showFSControls();\n\t\t}\n\t},\n\n\t/**\n\t* Sets `this.visible` to `true` and clears hide job.\n\t*\n\t* @private\n\t*/\n\tshowFSControls: function(sender, e) {\n\t\tthis.showFSInfo();\n\t\tthis.showFSBottomControls();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thideFSControls: function(spottingHandled) {\n\t\tif (this.isOverlayShowing()) {\n\t\t\tthis.hideFSInfo();\n\t\t\tthis.hideFSBottomControls();\n\t\t}\n\t\tif (!spottingHandled) {\n\t\t\tSpotlight.setPointerMode(false);\n\t\t\tSpotlight.spot(this);\n\t\t}\n\t\tthis.stopJob('autoHide');\n\t},\n\n\t/**\n\t* Sets `this.visible` to `true` and clears hide job.\n\t*\n\t* @private\n\t*/\n\tshowFSBottomControls: function(sender, e) {\n\t\tif (this.autoShowOverlay && this.autoShowControls) {\n\t\t\tthis.resetAutoTimeout();\n\t\t\tthis.showScrim(true);\n\t\t\tthis.$.playerControl.setShowing(true);\n\t\t\tthis.$.playerControl.resize();\n\t\t\tif (!this.showPlaybackControls) {\n\t\t\t\t//* Fixed index\n\t\t\t\tthis.$.controlsContainer.setIndex(1);\n\t\t\t}\n\n\t\t\t//* Initial spot\n\t\t\tthis.spotFSBottomControls();\n\n\t\t\tthis.$.slider.showKnobStatus();\n\t\t\tif (this.$.video.isPaused()) {\n\t\t\t\tthis.updateFullscreenPosition();\n\t\t\t}\n\t\t\t// When controls are visible, set as container to remember last focused control\n\t\t\tthis.set('spotlight', 'container');\n\t\t\tthis.pushBackHistory();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotFSBottomControls: function() {\n\t\tif (this.showPlaybackControls) {\n\t\t\tif (this.$.controlsContainer.getIndex() === 0) {\n\t\t\t\tif (Spotlight.spot(this.$.fsPlayPause) === false) {\n\t\t\t\t\tif(Spotlight.spot(this.$.fastForward) === false){\n\t\t\t\t\t\tif(Spotlight.spot(this.$.jumpForward) === false) {\n\t\t\t\t\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.$.controls));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.$.controlsContainer.getActive()));\n\t\t\t}\n\t\t} else {\n\t\t\tvar oTarget = Spotlight.getFirstChild(this.$.leftPremiumPlaceHolder);\n\t\t\tSpotlight.spot(oTarget);\n\t\t}\n\t},\n\n\t/**\n\t* Sets `this.visible` to `false`.\n\t*\n\t* @private\n\t*/\n\thideFSBottomControls: function() {\n\t\t// When controls are hidden, set as just a spotlight true component,\n\t\t// so that it is spottable (since it won't have any spottable children),\n\t\t// and then spot itself\n\t\tthis.set('spotlight', true);\n\t\t// Only spot the player if hiding is triggered from player control\n\t\tif (Spotlight.hasCurrent() && Spotlight.getParent(Spotlight.getCurrent()) === this) {\n\t\t\tSpotlight.spot(this);\n\t\t}\n\t\tif (this.autoHidePopups) {\n\t\t\t// Hide enyo.Popup-based popups (including moon.Popup)\n\t\t\tthis.$.playerControl.waterfall('onRequestHide');\n\t\t\t// Hide moon.ContextualPopups\n\t\t\tthis.$.playerControl.waterfall('onRequestHidePopup');\n\t\t}\n\t\tthis.showScrim(false);\n\t\tthis.$.playerControl.setShowing(false);\n\t},\n\n\t/**\n\t* Sets `this.visible` to `true` and clears hide job.\n\t*\n\t* @private\n\t*/\n\tshowFSInfo: function() {\n\t\tif (this.autoShowOverlay && this.autoShowInfo) {\n\t\t\tthis.resetAutoTimeout();\n\t\t\tthis.$.videoInfoHeaderClient.setShowing(true);\n\t\t\tthis.$.videoInfoHeaderClient.resize();\n\n\t\t\t// Kick off any marquees in the video info header\n\t\t\tthis.$.videoInfoHeaderClient.waterfallDown('onRequestStartMarquee');\n\t\t\tif (this.allowBackKey) {\n\t\t\t\tthis.pushBackHistory();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Sets `this.visible` to `false`.\n\t*\n\t* @private\n\t*/\n\thideFSInfo: function() {\n\t\tif (!this.showInfo) {\n\t\t\tthis.$.videoInfoHeaderClient.setShowing(false);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresetAutoTimeout: function() {\n\t\tif (this.isFullscreen() || !this.getInline()) {\n\t\t\tthis.startJob('autoHide', this.bindSafely('hideFSControls'), this.getAutoCloseTimeout());\n\t\t}\n\t},\n\n\t/**\n\t* Toggles play/pause state based on `this.playing`.\n\t*\n\t* @private\n\t*/\n\tplayPause: function(sender, e) {\n\t\tif (this._isPlaying) {\n\t\t\tthis.pause(sender, e);\n\t\t} else {\n\t\t\tthis.play(sender, e);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonHoldPulseBackHandler: function(sender, e) {\n\t\tif (!this.jumpStartEnd) {\n\t\t\tif (e.holdTime > this._holdPulseThreadhold) {\n\t\t\t\tif (sender._sentHold !== true) {\n\t\t\t\t\tthis.jumpToStart(sender, e);\n\t\t\t\t\tsender._sentHold = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsender._holding = true;\n\t\t\t\tsender._sentHold = false;\n\t\t\t}\n\t\t}\n\t},\n\n\tonReleaseHandler: function(sender, e) {\n\t\tif (sender._sentHold && sender._sentHold === true) sender._sentHold = false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonHoldPulseForwardHandler: function(sender, e) {\n\t\tif (!this.jumpStartEnd) {\n\t\t\tif (e.holdTime > this._holdPulseThreadhold) {\n\t\t\t\tif (sender._sentHold !== true) {\n\t\t\t\t\tthis.jumpToEnd(sender, e);\n\t\t\t\t\tsender._sentHold = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsender._holding = true;\n\t\t\t\tsender._sentHold = false;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonEnterSlider: function(sender, e) {\n\t\tif (this.hideButtonsOnSlider) {\n\t\t\tthis.$.controls.setShowing(false);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonLeaveSlider: function(sender, e) {\n\t\tif (this.hideButtonsOnSlider && !this.$.slider.isDragging()) {\n\t\t\tthis.$.controls.setShowing(true);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonjumpBackward: function(sender, e) {\n\t\tif (this.jumpStartEnd) {\n\t\t\tthis.jumpToStart(sender, e);\n\t\t} else {\n\t\t\tif (!sender._holding || (sender._holding && sender._sentHold !== true)) {\n\t\t\t\tthis.jumpBackward(sender, e);\n\t\t\t}\n\t\t\tsender._holding = false;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tonjumpForward: function(sender, e) {\n\t\tif (this.jumpStartEnd) {\n\t\t\tthis.jumpToEnd(sender, e);\n\t\t} else {\n\t\t\tif (!sender._holding || (sender._holding && sender._sentHold !== true)) {\n\t\t\t\tthis.jumpForward(sender, e);\n\t\t\t}\n\t\t\tsender._holding = false;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendFeedback: function(msg, params, persist, leftSrc, rightSrc) {\n\t\tparams = params || {};\n\t\tthis.$.slider.feedback(msg, params, persist, leftSrc, rightSrc);\n\t},\n\n\t////// Slider event handling //////\n\n\t/**\n\t* When seeking starts, pauses video.\n\t*\n\t* @private\n\t*/\n\tsliderSeekStart: function(sender, e) {\n\t\tthis._isPausedBeforeDrag = this.$.video.isPaused();\n\t\tthis.pause();\n\t\treturn true;\n\t},\n\n\t/**\n\t* When seeking completes, plays video.\n\t*\n\t* @private\n\t*/\n\tsliderSeekFinish: function(sender, e) {\n\t\tif (e.value < this.duration - 1) {\n\t\t\tif (!this._isPausedBeforeDrag) {\n\t\t\t\tthis.play();\n\t\t\t} else {\n\t\t\t\tthis.pause();\n\t\t\t}\n\t\t\tthis._isPausedBeforeDrag = this.$.video.isPaused();\n\t\t}\n\t\tif (!this.$.slider.isInPreview()) {\n\t\t\tthis.$.controls.show();\n\t\t}\n\t\tthis.setCurrentTime(e.value);\n\t\treturn true;\n\t},\n\n\t/**\n\t* When seeking, sets video time.\n\t*\n\t* @private\n\t*/\n\tsliderSeek: function(sender, e) {\n\t\tthis.setCurrentTime(e.value);\n\t\treturn true;\n\t},\n\n\t/**\n\t* Programatically updates slider position to match `this.currentTime`/`this.duration`.\n\t*\n\t* @private\n\t*/\n\tupdateFullscreenPosition: function() {\n\t\tif (this.$.slider.isDragging()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$.slider.setValue(this._currentTime);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapture: function () {\n\t\tdispatcher.capture(this, this.eventsToCapture);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trelease: function () {\n\t\tdispatcher.release(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedFocus: function (sender, event) {\n\t\tSpotlight.spot(this);\n\t\treturn true;\n\t},\n\n\t///// Inline controls /////\n\n\t/**\n\t* @private\n\t*/\n\tupdateInlinePosition: function() {\n\t\tvar percentComplete = this.duration ? Math.round(this._currentTime * 1000 / this.duration) / 10 : 0;\n\t\tthis.$.progressStatus.applyStyle('width', percentComplete + '%');\n\t\tthis.$.currTime.setContent(this.formatTime(this._currentTime) + ' / ' + this.formatTime(this.duration));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvideoTapped: function() {\n\t\tif (this.getInline() && !this.isFullscreen()) {\n\t\t\tthis.playPause();\n\t\t}\n\t},\n\n\t/**\n\t* Toggles fullscreen state.\n\t*\n\t* @public\n\t*/\n\ttoggleFullscreen: function() {\n\t\tif (this.isFullscreen()) {\n\t\t\tthis.cancelFullscreen();\n\t\t} else {\n\t\t\tthis.requestFullscreen();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfullscreenChanged: function(sender, e) {\n\t\tSpotlight.unspot();\n\t\tif (this.isFullscreen()) {\n\t\t\tthis.$.ilFullscreen.undepress();\n\t\t\tthis.$.ilFullscreen.removeClass('moon-icon-video-round-controls-style moon-icon-exitfullscreen-font-style');\n\t\t\tthis.spotlight = true;\n\t\t\tthis.spotlightModal = true;\n\t\t\tthis.removeClass('inline');\n\t\t\tthis.$.inlineControl.setShowing(false);\n\t\t\tthis.$.fullscreenControl.setShowing(true);\n\t\t\tthis.showFSControls();\n\t\t\tthis.$.controlsContainer.resize();\n\t\t\tthis.capture();\n\t\t} else {\n\t\t\tthis.release();\n\t\t\tthis.stopJob('autoHide');\n\t\t\tthis.addClass('inline');\n\t\t\tthis.$.inlineControl.setShowing(true);\n\t\t\tthis.$.fullscreenControl.setShowing(false);\n\t\t\tSpotlight.spot(this.$.ilFullscreen);\n\t\t\tthis.spotlight = false;\n\t\t\tthis.spotlightModal = false;\n\t\t}\n\t\tthis.updatePosition();\n\t},\n\n\t/**\n\t* Plays the video.\n\t*\n\t* @public\n\t*/\n\tplay: function() {\n\t\tthis.currTimeSync = true;\n\t\tthis._isPlaying = true;\n\t\tthis.$.video.play();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* Pauses the video.\n\t*\n\t* @public\n\t*/\n\tpause: function() {\n\t\tthis._isPlaying = false;\n\t\tthis.$.video.pause();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* Changes the playback speed based on the previous playback setting, by cycling through\n\t* the appropriate speeds.\n\t*\n\t* @public\n\t*/\n\trewind: function() {\n\t\tthis._isPlaying = false;\n\t\tthis.$.video.rewind();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* Jumps to beginning of media [source]{@link moon.VideoPlayer#src} and sets\n\t* [playbackRate]{@link enyo.Video#playbackRate} to `1`.\n\t*\n\t* @public\n\t*/\n\tjumpToStart: function() {\n\t\tthis.$.video.jumpToStart();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t\tif(this._isPlaying){\n\t\t\tthis.$.video.play();\n\t\t}\n\t},\n\n\t/**\n\t* Jumps backward [jumpSec]{@link moon.VideoPlayer#jumpSec} seconds from the current time.\n\t*\n\t* @public\n\t*/\n\tjumpBackward: function() {\n\t\tthis.$.video.jumpBackward();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* Changes the playback speed based on the previous playback setting, by cycling through\n\t* the appropriate speeds.\n\t*\n\t* @public\n\t*/\n\tfastForward: function() {\n\t\tthis._isPlaying = false;\n\t\tthis.$.video.fastForward();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* Jumps to end of media [source]{@link moon.VideoPlayer#src} and sets\n\t* [playbackRate]{@link enyo.Video#playbackRate} to `1`.\n\t*\n\t* @public\n\t*/\n\tjumpToEnd: function() {\n\t\tthis._isPlaying = false;\n\t\tif ( this.$.video.isPaused() ) {\n\t\t\t//* Make video able to go futher than the buffer\n\t\t\tthis.$.video.play();\n\t\t}\n\t\tthis.$.video.jumpToEnd();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* Jumps forward [jumpSec]{@link moon.VideoPlayer#jumpSec} seconds from the current time.\n\t*\n\t* @public\n\t*/\n\tjumpForward: function() {\n\t\tthis.$.video.jumpForward();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* Sets the current time in the video.\n\t*\n\t* @param {Number} val - The current time to set the video to, in seconds.\n\t* @public\n\t*/\n\tsetCurrentTime: function(val) {\n\t\tthis.$.video.setCurrentTime(val);\n\t},\n\n\t/**\n\t* Responds to `onRequestTimeChange` event by setting current video time.\n\t*\n\t* @private\n\t*/\n\ttimeChange: function(sender, e) {\n\t\tthis.setCurrentTime(e.value);\n\t},\n\n\t/**\n\t* Refreshes size of video player.\n\t*\n\t* @private\n\t*/\n\thandleResize: function() {\n\t\tthis.aspectRatioChanged();\n\t},\n\n\t/**\n\t* Updates the height/width based on the video's aspect ratio.\n\t*\n\t* @private\n\t*/\n\taspectRatioChanged: function() {\n\t\t// Case 5: Fixed size provided by user\n\t\tif (!this.inline || this.aspectRatio == 'none' || !this.aspectRatio) { return; }\n\n\t\tvar videoAspectRatio = null,\n\t\t\twidth = this.getComputedStyleValue('width'),\n\t\t\theight = this.getComputedStyleValue('height'),\n\t\t\tratio = 1;\n\n\t\tvideoAspectRatio = this.aspectRatio.split(':');\n\n\t\t// If fixedHeight is true, update width based on aspect ratio\n\t\tif (this.fixedHeight) {\n\t\t\t// Case 2: Automatic resize based on video aspect ratio (fixed height):\n\t\t\t// Case 4: Fixed aspect ratio provided by user (fixed-height):\n\t\t\tratio = videoAspectRatio[0] / videoAspectRatio[1];\n\t\t\tthis.applyStyle('width', dom.unit(parseInt(height, 10) * ratio, 'rem'));\n\t\t// If fixedHeight is false, update height based on aspect ratio\n\t\t} else if (!this.fixedHeight) {\n\t\t\t// Case 1: Automatic resize based on video aspect ratio (fixed width):\n\t\t\t// Case 3: Fixed aspect ratio provided by user (fixed-width):\n\t\t\tratio = videoAspectRatio[1] / videoAspectRatio[0];\n\t\t\tthis.applyStyle('height', dom.unit(parseInt(width, 10) * ratio, 'rem'));\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdatePosition: function() {\n\t\tif (this.isFullscreen() || !this.getInline()) {\n\t\t\tthis.updateFullscreenPosition();\n\t\t} else {\n\t\t\tthis.updateInlinePosition();\n\t\t}\n\t},\n\n\t/**\n\t* Properly formats time.\n\t*\n\t* @private\n\t*/\n\tformatTime: function(val) {\n\t\tvar hour = Math.floor(val / (60*60));\n\t\tvar min = Math.floor((val / 60) % 60);\n\t\tvar sec = Math.floor(val % 60);\n\t\tif (this.durfmt) {\n\t\t\tvar time = {minute: min, second: sec};\n\t\t\tif (hour) {\n\t\t\t\ttime.hour = hour;\n\t\t\t}\n\t\t\treturn this.durfmt.format(time);\n\t\t} else {\n\t\t\treturn (hour ? this.padDigit(hour) + ':' : '') + this.padDigit(min) + ':' + this.padDigit(sec);\n\t\t}\n\t},\n\n\t/**\n\t* Time formatting helper.\n\t*\n\t* @private\n\t*/\n\tpadDigit: function(val) {\n\t\treturn (val) ? (String(val).length < 2) ? '0'+val : val : '00';\n\t},\n\n\t/**\n\t* Switches play/pause buttons as appropriate.\n\t*\n\t* @private\n\t*/\n\tupdatePlayPauseButtons: function() {\n\t\tif (this._isPlaying) {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.fsPlayPause, this.pauseIcon, 'moon-icon-playpause-font-style');\n\t\t} else {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.fsPlayPause, this.playIcon, 'moon-icon-playpause-font-style');\n\t\t}\n\t\tif (this._isPlaying) {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.ilPlayPause, this.inlinePauseIcon, 'moon-video-inline-control-play-pause');\n\t\t} else {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.ilPlayPause, this.inlinePlayIcon, 'moon-video-inline-control-play-pause');\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves icons through either `setSrc()` or `setIcon()`, depending on the icon type.\n\t*\n\t* @private\n\t*/\n\tretrieveIconsSrcOrFont:function(src, icon, classes){\n\t\tvar t = this.bindSafely('transformIconSrc');\n\t\tif(this.checkIconType(icon) == 'image') {\n\t\t\tsrc.setIcon('');\n\t\t\tsrc.setSrc(t(icon));\n\t\t\tif(src !== this.$.ilPlayPause){\n\t\t\t\tsrc.addRemoveClass(classes, Boolean(this.checkIconType(icon) == 'iconfont'));\n\t\t\t}\n\t\t\tsrc.addRemoveClass('moon-icon-', Boolean(this.checkIconType(icon) == 'iconfont'));\n\t\t\tsrc.addRemoveClass('\"moon-icon-' + icon + '\"', Boolean(this.checkIconType(icon) == 'iconfont'));\n\t\t}\n\t\tif(this.checkIconType(icon) == 'iconfont') {\n\t\t\tsrc.setSrc('');\n\t\t\tsrc.setIcon(t(icon));\n\t\t\tsrc.addRemoveClass(classes, Boolean(this.checkIconType(icon) == 'iconfont'));\n\t\t\tsrc.applyStyle('background-image', src.src);\n\t\t}\n\t},\n\n\t/**\n\t* Turns spinner on or off, as appropriate.\n\t*\n\t* @private\n\t*/\n\tupdateSpinner: function() {\n\t\tvar spinner = this.$.spinner;\n\t\tif (this.autoShowSpinner && this._isPlaying && !this._canPlay && !this._errorCode) {\n\t\t\tspinner.start();\n\t\t} else if (spinner.getShowing()) {\n\t\t\tspinner.stop();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoShowSpinnerChanged: function() {\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* When `moreButton` is tapped, toggles visibility of player controls and extra\n\t* functionality.\n\t*\n\t* @private\n\t*/\n\tmoreButtonTapped: function(sender, e) {\n\t\tvar index = this.$.controlsContainer.getIndex();\n\t\tif (index === 0) {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.lessControlsIcon, 'moon-icon-video-round-controls-style moon-icon-video-more-controls-font-style');\n\t\t\tthis.toggleSpotlightForMoreControls(true);\n\t\t\tthis.$.controlsContainer.next();\n\t\t} else {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.moreControlsIcon, 'moon-icon-video-round-controls-style moon-icon-video-more-controls-font-style');\n\t\t\tthis.toggleSpotlightForMoreControls(false);\n\t\t\tthis.$.controlsContainer.previous();\n\t\t}\n\t},\n\tupdateMoreButton: function() {\n\t\tvar index = this.$.controlsContainer.getIndex();\n\t\tif (index === 0) {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.moreControlsIcon, 'moon-icon-video-round-controls-style moon-icon-video-more-controls-font-style');\n\t\t} else {\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.lessControlsIcon, 'moon-icon-video-round-controls-style moon-icon-video-more-controls-font-style');\n\t\t}\n\t},\n\ttoggleSpotlightForMoreControls: function(moreControlsSpottable) {\n\t\tthis.$.playbackControls.spotlightDisabled = moreControlsSpottable;\n\t\tthis.$.client.spotlightDisabled = !moreControlsSpottable;\n\t},\n\n\t///////// VIDEO EVENT HANDLERS /////////\n\n\t/**\n\t* Updates the video time.\n\t*\n\t* @private\n\t*/\n\ttimeUpdate: function(sender, e) {\n\t\t//* Update _this.duration_ and _this.currentTime_\n\t\tif (!e && e.srcElement || e.currentTime == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.duration = e.duration;\n\t\tthis._currentTime = e.currentTime;\n\n\t\tthis.updatePosition();\n\n\t\t// TODO: Event handler shouldn't know about event delegates.\n\t\t// Waterfall should handle this automatically.\n\t\t// See https://enyojs.atlassian.net/browse/ENYO-3188\n\t\tdelete e.delegate;\n\t\tthis.waterfall('onTimeupdate', e);\n\t},\n\n\t/**\n\t* Called when video successfully loads video metadata.\n\t*\n\t* @private\n\t*/\n\tmetadataLoaded: function(sender, e) {\n\t\t//* Update aspect ratio based on actual video aspect ratio when autoResize is true.\n\t\tif (this.autoResize && this.$.video) {\n\t\t\tthis.setAspectRatio(this.$.video.getAspectRatio());\n\t\t}\n\t\tthis.durationUpdate(sender, e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdurationUpdate: function(sender, e) {\n\t\tthis.duration = this.$.video.getDuration();\n\t\tthis._currentTime = this.$.video.getCurrentTime();\n\n\t\tthis.$.slider.setMin(0);\n\t\tthis.$.slider.setMax(this.duration);\n\n\t\tthis.updatePosition();\n\n\t\tthis.waterfall('onTimeupdate', e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_loaded: false,\n\n\t/**\n\t* @private\n\t*/\n\tdataloaded: function(sender, e) {\n\t\tthis._loaded = true;\n\t\tthis.updateSliderState();\n\t\tthis.durationUpdate(sender, e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_getBufferedProgress: function(node) {\n\t\tvar bufferData = node.buffered,\n\t\t\tnumberOfBuffers = bufferData.length,\n\t\t\thighestBufferPoint = 0,\n\t\t\tduration = node.duration || 0,\n\t\t\tendPoint = 0,\n\t\t\ti\n\t\t;\n\n\t\tif (duration === 0 || isNaN(duration)) {\n\t\t\treturn {value: 0, percent: 0};\n\t\t}\n\n\t\t// Find furthest along buffer end point and use that (only supporting one buffer range for now)\n\t\tfor (i = 0; i < numberOfBuffers; i++) {\n\t\t\tendPoint = bufferData.end(i);\n\t\t\thighestBufferPoint = (endPoint > highestBufferPoint) ? endPoint : highestBufferPoint;\n\t\t}\n\t\treturn {value: highestBufferPoint, percent: highestBufferPoint/duration*100};\n\t},\n\n\t/**\n\t* We get this event while buffering is in progress.\n\t*\n\t* @private\n\t*/\n\t_progress: function(sender, e) {\n\t\tvar buffered = this._getBufferedProgress(e.srcElement);\n\t\tif (this.isFullscreen() || !this.getInline()) {\n\t\t\tthis.$.slider.setBgProgress(buffered.value);\n\t\t} else {\n\t\t\tthis.$.bgProgressStatus.applyStyle('width', buffered.percent + '%');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_resetTime: function() {\n\t\tthis._currentTime = 0;\n\t\tthis.duration = 0;\n\t\tthis.updatePosition();\n\t\tthis.$.slider.setBgProgress(0);\n\t\tthis.$.bgProgressStatus.applyStyle('width', 0);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_play: function(sender, e) {\n\t\tthis.sendFeedback('Play');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_pause: function(sender, e) {\n\t\t// Don't send pause feedback if we are rewinding\n\t\tif (e.srcElement.playbackRate < 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (e.srcElement.currentTime === 0) {\n\t\t\tthis.sendFeedback('Stop', {}, true);\n\t\t\treturn;\n\t\t}\n\t\tthis.sendFeedback('Pause', {}, true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_stop: function(sender, e) {\n\t\tthis.pause();\n\t\tthis.updatePlayPauseButtons();\n\t\tthis.updateSpinner();\n\t\tthis.sendFeedback('Stop');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_fastforward: function(sender, e) {\n\t\tthis.sendFeedback('Fastforward', {playbackRate: e.playbackRate}, true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_slowforward: function(sender, e) {\n\t\tthis.sendFeedback('Slowforward', {playbackRate: e.playbackRate}, true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_rewind: function(sender, e) {\n\t\tthis.sendFeedback('Rewind', {playbackRate: e.playbackRate}, true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_slowrewind: function(sender, e) {\n\t\tthis.sendFeedback('Slowrewind', {playbackRate: e.playbackRate}, true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_jumpForward: function(sender, e) {\n\t\tthis.sendFeedback('JumpForward', {jumpSize: e.jumpSize}, false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_jumpBackward: function(sender, e) {\n\t\tthis.sendFeedback('JumpBackward', {jumpSize: e.jumpSize}, false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_waiting: function(sender, e) {\n\t\tthis._canPlay = false;\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_setCanPlay: function(sender, e) {\n\t\tthis._canPlay = true;\n\t\tthis.updateSpinner();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_error: function(sender, e) {\n\t\t// Error codes in e.currentTarget.error.code\n\t\t// 1: MEDIA_ERR_ABORTED, 2: MEDIA_ERR_NETWORK, 3: MEDIA_ERR_DECODE,\n\t\t// 4: MEDIA_ERR_SRC_NOT_SUPPORTED\n\t\tthis._errorCode = e.currentTarget.error.code;\n\t\tthis._loaded = false;\n\t\tthis._isPlaying = false;\n\t\tthis._canPlay = false;\n\t\tthis.$.currTime.setContent($L('Error'));\n\t\tthis._stop();\n\t\tthis.updateSpinner();\n\t\tthis.updatePlaybackControlState();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoteKeyHandler: function(sender, e) {\n\t\tif (this.handleRemoteControlKey && !this.disablePlaybackControls) {\n\t\t\tvar showControls = false;\n\t\t\tswitch (e.keySymbol) {\n\t\t\tcase 'play':\n\t\t\t\tthis.play(sender, e);\n\t\t\t\tshowControls = true;\n\t\t\t\tbreak;\n\t\t\tcase 'pause':\n\t\t\t\tthis.pause(sender, e);\n\t\t\t\tshowControls = true;\n\t\t\t\tbreak;\n\t\t\tcase 'rewind':\n\t\t\t\tif (this.showFFRewindControls) {\n\t\t\t\t\tthis.rewind(sender, e);\n\t\t\t\t\tshowControls = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'fastforward':\n\t\t\t\tif (this.showFFRewindControls) {\n\t\t\t\t\tthis.fastForward(sender, e);\n\t\t\t\t\tshowControls = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'stop':\n\t\t\t\tthis._isPlaying = false;\n\t\t\t\tthis.jumpToStart();\n\t\t\t\tthis.$.slider.setValue(0);\n\t\t\t\tthis.sendFeedback('Stop');\n\t\t\t\tshowControls = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (showControls) {\n\t\t\t\tif(!this.$.playerControl.getShowing()) {\n\t\t\t\t\tthis.showFSBottomControls();\n\t\t\t\t} else {\n\t\t\t\t\tthis.resetAutoTimeout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackKeyHandler: function () {\n\t\t// if videoInfoHeaderClient and playerControl are visible\n\t\t// it means that we pushed video player into history stack twice.\n\t\t// to set correct target for next back key, we should pop one instance.\n\t\tvar visibleUp = this.$.videoInfoHeaderClient.getShowing(),\n\t\t\tvisibleDown = this.$.playerControl.getShowing();\n\n\t\tif (visibleUp && visibleDown\n\t\t\t&& MoonHistory.getCurrentObj() == this) {\n\t\t\tMoonHistory.ignorePopState();\n\t\t\tMoonHistory._popBackHistory();\n\t\t}\n\t\tif (visibleUp) {\n\t\t\tthis.hideFSInfo();\n\t\t}\n\t\tif (visibleDown) {\n\t\t\tthis.hideFSBottomControls();\n\t\t}\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tHeader = require('../Header');\n\n/**\n* {@link moon.InputHeader} is a header that uses an input for the title. While this\n* was initially created as an independent subkind of {@link moon.Header}, its unique\n* functionality has since been folded back into the latter kind, making the current\n* incarnation of `moon.InputHeader` simply a `moon.Header` whose\n* [inputMode]{@link moon.Header#inputMode} is set to `true`. We continue to offer\n* `moon.InputHeader` as a separate kind for reasons of convenience and backward\n* compatibility.\n*\n* The [title]{@link moon.Header#title} property is used as the input placeholder,\n* while the [value]{@link moon.Header#value} property contains the contents of the\n* input. Developers may listen for\n* [onInputHeaderInput]{@link moon.Header#onInputHeaderInput} and\n* [onInputHeaderChange]{@link moon.Header#onInputHeaderChange} events from the\n* embedded input to respond to changes.\n*\n* ```\n* {\n* \tkind: 'moon.InputHeader',\n* \ttitle: 'Input Header',\n* \ttitleAbove: '02',\n* \ttitleBelow: 'Sub Header',\n* \tsubTitleBelow: 'Sub-sub Header',\n* \tcomponents: [\n* \t\t{kind: 'moon.IconButton', src: 'assets/icon-like.png'},\n* \t\t{kind: 'moon.IconButton', src: 'assets/icon-next.png'}\n* \t]\n* }\n* ```\n*\n* @class moon.InputHeader\n* @extends moon.Header\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.InputHeader.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.InputHeader',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Header,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-input-header',\n\n\t/**\n\t* @private\n\t*/\n\tinputMode: true\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tFittableLayout = require('../../../layout/lib/FittableLayout'),\n\tFittableRows = require('../../../layout/lib/FittableRows'),\n\tFittableRowsLayout = FittableLayout.Rows;\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\toptions = require('../options'),\n\tStyleAnimator = require('../StyleAnimator'),\n\tHeader = require('../Header'),\n\tMarquee = require('../Marquee'),\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeItem = Marquee.Item;\n\n/**\n* Fires when this [panel]{@link moon.Panel} has completed its pre-arrangement transition.\n* No additional data is passed with this event.\n*\n* @event moon.Panel#onPreTransitionComplete\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when this [panel]{@link moon.Panel} has completed its post-arrangement transition.\n* No additional data is passed with this event.\n*\n* @event moon.Panel#onPostTransitionComplete\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.Panel} is the default kind for controls created inside a\n* [moon.Panels]{@link moon.Panels} container. A `moon.Panels` will typically\n* contain several instances of `moon.Panel`.\n*\n* The built-in features include an embedded {@link moon.Header} and an\n* {@link enyo.FittableRows} layout for the main body content.\n*\n* @class moon.Panel\n* @extends enyo.Control\n* @ui\n* @public\n*/\n\nmodule.exports = kind(\n\t/** @lends moon.Panel.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Panel',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t* @lends moon.Panel.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* Facade for the [title]{@link moon.Header#title} property of the embedded\n\t\t* {@link moon.Header}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitle: '',\n\n\t\t/**\n\t\t* Facade for the [titleAbove]{@link moon.Header#titleAbove} property of the\n\t\t* embedded {@link moon.Header}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitleAbove: '',\n\n\t\t/**\n\t\t* Facade for the [titleBelow]{@link moon.Header#titleBelow} property of the\n\t\t* embedded {@link moon.Header}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitleBelow: '',\n\n\t\t/**\n\t\t* Facade for the [subTitleBelow]{@link moon.Header#subTitleBelow} property\n\t\t* of the embedded {@link moon.Header}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsubTitleBelow: '',\n\n\t\t/**\n\t\t* When `true`, the header's [titleAbove]{@link moon.Header#titleAbove} property\n\t\t* is automatically populated with the panel index.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoNumber: true,\n\n\t\t/**\n\t\t* Facade for the [type]{@link moon.Header#type} property of the embedded\n\t\t* {@link moon.Header}.\n\t\t* Valid values are: `'large'`, `'small'`, and `'medium'`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'large'\n\t\t* @public\n\t\t*/\n\t\theaderType: 'large',\n\n\t\t/**\n\t\t* Facade for the [small]{@link moon.Header#small} property of the embedded\n\t\t* {@link moon.Header}. Note that this property will be deprecated soon. Until\n\t\t* it is removed, `'smallHeader: true'` refers to the historical header size,\n\t\t* which is now equivalent to `type: 'medium'`.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tsmallHeader: false,\n\n\t\t/**\n\t\t* If `true`, the header collapses when the panel body is scrolled down.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tcollapsingHeader: false,\n\n\t\t/**\n\t\t* Facade for the [allowHtml]{@link enyo.Control#allowHtml} property of the\n\t\t* embedded {@link moon.Header}.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tallowHtmlHeader: false,\n\n\t\t/**\n\t\t* Facade for the [backgroundSrc]{@link moon.Header#backgroundSrc} property\n\t\t* of the embedded {@link moon.Header}.\n\t\t*\n\t\t* @type {(String|String[]|moon.ri.selectSrc~src|moon.ri.selectSrc~src[])}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\theaderBackgroundSrc: null,\n\n\t\t/**\n\t\t* Facade for the [backgroundPosition]{@link moon.Header#backgroundPosition}\n\t\t* property of the embedded {@link moon.Header}.\n\t\t*\n\t\t* @type {(String|String[])}\n\t\t* @default 'top right'\n\t\t* @public\n\t\t*/\n\t\theaderBackgroundPosition: 'top right',\n\n\t\t/**\n\t\t* An object containing additional settings for the {@link moon.Header}. Any\n\t\t* values specified here will be mixed into the header definition.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\theaderOptions: null,\n\n\t\t/**\n\t\t* Facade for the [titleUpperCase]{@link moon.Header#titleUpperCase} property\n\t\t* of the embedded {@link moon.Header}.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\ttitleUpperCase: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\t/**\n\t\t* {@link moon.Panel#onPreTransitionComplete}\n\t\t*/\n\t\tonPreTransitionComplete: '',\n\t\t/**\n\t\t* {@link moon.Panel#onPostTransitionComplete}\n\t\t*/\n\t\tonPostTransitionComplete: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonScroll: 'scroll'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: 'container',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-panel',\n\n\t/**\n\t* @private\n\t*/\n\tlayoutKind: FittableRowsLayout,\n\n\t/**\n\t* @private\n\t*/\n\theaderOption: null, //* Deprecated\n\n\t/**\n\t* @private\n\t*/\n\tpreventTransform: !options.accelerate,\n\n\t/**\n\t* @private\n\t*/\n\tpreventAccelerate: !options.accelerate,\n\n\t/**\n\t* @private\n\t*/\n\tpanelTools : [\n\t\t{name: 'breadcrumb', kind: Control, ontap: 'handleBreadcrumbTap', classes: 'moon-panel-breadcrumb', components: [\n\t\t\t{name: 'breadcrumbViewport', kind: Control, classes: 'moon-panel-breadcrumb-viewport', components: [\n\t\t\t\t{name: 'breadcrumbBackground', kind: Control, classes: 'moon-panel-small-header-wrapper', components: [\n\t\t\t\t\t{name: 'breadcrumbTitleAbove', kind: Control, classes: 'moon-super-header-text moon-panel-small-header-title-above'},\n\t\t\t\t\t{name: 'breadcrumbText', kind: Control, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-sub-header-text moon-panel-small-header'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'viewport', kind: Control, classes: 'moon-panel-viewport', onwebkitAnimationEnd: 'animationComplete', components: [\n\t\t\t{name: 'contentWrapper', kind: FittableRows, classes: 'moon-panel-content-wrapper', components: [\n\t\t\t\t/* header will be created here programmatically in createTools after mixing-in headerOptions */\n\t\t\t\t{name: 'panelBody', kind: FittableRows, fit: true, classes: 'moon-panel-body'}\n\t\t\t]}\n\t\t]},\n\n\t\t{name: 'animator', kind: StyleAnimator, onComplete: 'animationComplete'},\n\t\t{name: 'spotlightDummy', kind: Control, spotlight: false, style: 'width:0;height:0;'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\theaderConfig : {name: 'header', kind: Header, onComplete: 'headerAnimationComplete', isChrome: true},\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.title', to: '.$.header.title'},\n\t\t{from: '.title', to: '.$.breadcrumbText.content'},\n\t\t{from: '.titleAbove', to: '.$.header.titleAbove'},\n\t\t{from: '.titleAbove', to: '.$.breadcrumbTitleAbove.content'},\n\t\t{from: '.titleBelow', to: '.$.header.titleBelow'},\n\t\t{from: '.subTitleBelow', to: '.$.header.subTitleBelow'},\n\t\t{from: '.allowHtmlHeader', to: '.$.header.allowHtml'},\n\t\t{from: '.allowHtmlHeader', to: '.$.breadcrumbText.allowHtml'},\n\t\t{from: '.headerBackgroundSrc', to: '.$.header.backgroundSrc'},\n\t\t{from: '.headerBackgroundPosition', to: '.$.header.backgroundPosition'},\n\t\t{from: '.titleUpperCase', to: '.$.header.titleUpperCase'},\n\t\t{from: '.headerType', to: '.$.header.type', oneWay: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\theaderComponents: [],\n\n\t/**\n\t* @private\n\t*/\n\tisBreadcrumb: false,\n\n\t/**\n\t* @private\n\t*/\n\tisOffscreen: false,\n\n\t/**\n\t* @private\n\t*/\n\tisHeaderCollapsed: false,\n\n\t/**\n\t* @private\n\t*/\n\tshrinking: false,\n\n\t/**\n\t* @private\n\t*/\n\tgrowing: false,\n\n\t/**\n\t* Set by {@link moon.BreadcrumbArranger} during {@link moon.BreadcrumbArranger#size}\n\t* based on the value of {@link moon.Panels#animate}.\n\t*\n\t* @private\n\t*/\n\tanimate: !options.accelerate,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\t// FIXME: Need to determine whether headerComponents was passed on the instance or kind to get the ownership correct\n\t\tif (this.headerComponents) {\n\t\t\tvar owner = this.hasOwnProperty('headerComponents') ? this.getInstanceOwner() : this;\n\t\t\tthis.$.header.createComponents(this.headerComponents, {owner: owner});\n\t\t}\n\t\tthis.autoNumberChanged();\n\t\t// Note: This line will be deprecated soon. For backward compatiblity, I leave it for a while.\n\t\tthis.smallHeaderChanged();\n\t\tthis.headerTypeChanged();\n\t\tthis.animateChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tthis.createTools();\n\t\tthis.controlParentName = 'panelBody';\n\t\tthis.discoverControlParent();\n\t\tControl.prototype.initComponents.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateTools: function () {\n\t\t// Create everything but the header\n\t\tthis.createChrome(this.panelTools);\n\t\t// Special-handling for header, which can have its options modified by the instance\n\t\tvar hc = util.clone(this.headerConfig || {});\n\t\thc.addBefore = this.$.panelBody;\n\t\tutil.mixin(hc, this.headerOptions || this.headerOption);\n\t\tthis.$.contentWrapper.createComponent(hc, {owner:this});\n\t},\n\n\t/**\n\t* On reflow, updates `this.$.contentWrapper` bounds.\n\t* @private\n\t*/\n\treflow: function () {\n\t\tControl.prototype.reflow.apply(this, arguments);\n\t\tthis.getInitAnimationValues();\n\t\tthis.updateViewportSize();\n\t\tthis.shrinkAsNeeded();\n\t},\n\n\t/**\n\t* Updates `this.$.contentWrapper` to have the height/width of `this`.\n\t* @private\n\t*/\n\tupdateViewportSize: function () {\n\t\tvar node = this.hasNode();\n\n\t\tif (!node || this.isBreadcrumb) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$.viewport.applyStyle('height', dom.unit(this.initialHeight, 'rem'));\n\t\tthis.$.viewport.applyStyle('width', dom.unit(this.initialWidth, 'rem'));\n\t\tthis.$.contentWrapper.applyStyle('height', dom.unit(this.initialHeight, 'rem'));\n\t\tthis.$.contentWrapper.applyStyle('width', dom.unit(this.initialWidth, 'rem'));\n\t},\n\n\t/**\n\t* Forcibly applies layout kind changes to `this.$.panelBody`.\n\t* @private\n\t*/\n\tlayoutKindChanged: function () {\n\t\tthis.$.panelBody.setLayoutKind(this.layoutKind);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateSpotability: function () {\n\t\tif (this.isOffscreen) {\n\t\t\tthis.spotlightDisabled = true;\n\t\t\tthis.removeSpottableProps();\n\t\t\tthis.removeSpottableBreadcrumbProps();\n\t\t} else {\n\t\t\tif (this.isBreadcrumb) {\n\t\t\t\tthis.spotlightDisabled = true;\n\t\t\t\tthis.addSpottableBreadcrumbProps();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.spotlightDisabled = false;\n\t\t\t\tthis.$.spotlightDummy.spotlight = false;\n\t\t\t\tif (!Spotlight.isSpottable(this)) {\n\t\t\t\t\t// make dummy div spottable if there is no spottable child\n\t\t\t\t\tthis.$.spotlightDummy.spotlight = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleBreadcrumbTap: function (sender, event) {\n\t\tevent.breadcrumbTap = true;\n\t},\n\n\t/**\n\t* Note: `smallHeader` will be deprecated soon.\n\t* @private\n\t*/\n\tscroll: function (sender, event) {\n\t\tif (this.collapsingHeader && ((this.headerType === 'large') || !this.smallHeader)) {\n\t\t\tif (event.originator.y < 0) {\n\t\t\t\tthis.collapseHeader();\n\t\t\t} else {\n\t\t\t\tthis.expandHeader();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimateChanged: function () {\n\t\tthis.addRemoveClass('moon-composite', this.animate);\n\t},\n\n\t/**\n\t* Note: This method will be deprecated soon.\n\t* @private\n\t*/\n\tsmallHeaderChanged: function () {\n\t\tthis.$.header.setSmall(this.smallHeader);\n\t\tif (this.generated) {\n\t\t\tthis.$.contentWrapper.resize();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\theaderTypeChanged: function () {\n\t\tthis.$.header.setType(this.headerType);\n\t\tif (this.generated) {\n\t\t\tthis.$.contentWrapper.resize();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcollapseHeader: function () {\n\t\tif (!this.isHeaderCollapsed) {\n\t\t\tthis.$.header.collapseToSmall();\n\t\t\tthis.isHeaderCollapsed = true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\texpandHeader: function () {\n\t\tif (this.isHeaderCollapsed) {\n\t\t\tthis.$.header.expandToLarge();\n\t\t\tthis.isHeaderCollapsed = false;\n\t\t}\n\t},\n\n\t/**\n\t* Updates [titleAbove]{@link moon.Panel#titleAbove} when\n\t* [autoNumber]{@link moon.Panel#autoNumber} changes.\n\t* @private\n\t*/\n\tautoNumberChanged: function () {\n\t\tif (this.getAutoNumber() === true && this.container) {\n\t\t\t// This gets the index regardless of whether the panel is client or chome\n\t\t\tvar n = this.parent.indexOfChild(this) + 1;\n\t\t\tn = ((n < 10) ? '0' : '') + n;\n\t\t\tthis.setTitleAbove(n);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgenerateAutoNumber: function () {\n\t\tvar adjustedIndex = this.indexInContainer() + 1;\n\t\treturn (adjustedIndex < 10) ? '0'+ adjustedIndex : adjustedIndex;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\taddSpottableBreadcrumbProps: function () {\n\t\tthis.$.breadcrumbBackground.set('spotlight', true);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveSpottableBreadcrumbProps: function () {\n\t\tthis.$.breadcrumbBackground.set('spotlight', false);\n\t\tthis.$.breadcrumbBackground.removeClass('spotlight');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveSpottableProps: function () {\n\t\tthis.$.breadcrumbBackground.set('spotlight', false);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshrinkAsNeeded: function () {\n\t\tif (this.needsToShrink) {\n\t\t\tthis.shrink();\n\t\t\tthis.needsToShrink = false;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tenableMarquees: function () {\n\t\tthis.$.breadcrumbText.enableMarquee();\n\t\tthis.$.header.enableMarquee();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisableMarquees: function () {\n\t\tthis.$.breadcrumbText.disableMarquee();\n\t\tthis.$.header.disableMarquee();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstartMarqueeAsNeeded: function (info) {\n\t\tvar onscreen = !info.offscreen;\n\t\tif (onscreen) {\n\t\t\tif (this.isBreadcrumb) {\n\t\t\t\tthis.$.breadcrumbText.enableMarquee();\n\t\t\t\tthis.$.breadcrumbText.startMarquee();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.$.header.enableMarquee();\n\t\t\t\tthis.$.header.startMarquee();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetHeader: function () {\n\t\treturn this.$.header;\n\t},\n\n\t/**\n\t* Called directly by {@link moon.Panels}.\n\t* @private\n\t*/\n\tinitPanel: function (info) {\n\t\tthis.set('isBreadcrumb', info.breadcrumb);\n\t\tthis.set('isOffscreen', info.offscreen);\n\t\tthis.updateSpotability();\n\t\tif (this.isBreadcrumb) {\n\t\t\tthis.needsToShrink = true;\n\t\t}\n\t\tthis.disableMarquees();\n\t\tthis.startMarqueeAsNeeded(info);\n\t},\n\n\t/**\n\t* Called directly by {@link moon.Panels}.\n\t* @private\n\t*/\n\tpreTransition: function (info) {\n\t\tthis.disableMarquees();\n\t\tthis.addClass('transitioning');\n\t\tif (!this.shrinking && info.breadcrumb && (!this.isBreadcrumb || this.growing)) {\n\t\t\tthis.shrinkAnimation();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t* Called directly by {@link moon.Panels}.\n\t* @private\n\t*/\n\tpostTransition: function (info) {\n\t\tthis.removeClass('transitioning');\n\n\t\tif (!this.growing && !info.breadcrumb && (this.isBreadcrumb || this.shrinking) && this.hasClass('shrunk')) {\n            //only grow if it has been shrunk before\n\t\t\tthis.growAnimation();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t* Called directly by {@link moon.Panels}.\n\t* @private\n\t*/\n\tupdatePanel: function (info) {\n\t\tif (!info.animate) {\n\t\t\tthis.disableMarquees();\n\t\t}\n\n        if (this.isBreadcrumb && !info.breadcrumb) {\n            this.grow();\n        }\n\n        if (!this.isBreadcrumb && info.breadcrumb) {\n            this.shrink();\n        }\n\n\t\tthis.set('isBreadcrumb', info.breadcrumb);\n\t\tthis.set('isOffscreen', info.offscreen);\n\t\tthis.updateSpotability();\n\t\tthis.startMarqueeAsNeeded(info);\n\t},\n\n\t/**\n\t* Called directly on the panel by {@link moon.Panels} when the panel has completed a\n\t* transition. You may override this function in a panel subkind to perform\n\t* post-transition work (e.g., loading data for the panel).\n\t*\n\t* @param {Object} info - Information from the [Panels]{@link moon.Panels} component.\n\t* Additional information may be supplied by the arranger, such as breadcrumb and\n\t* offscreen status.\n\t* @param {Number} info.from - The index the parent Panels was moving from for this transition.\n\t* @param {Number} info.to - The index the parent Panels was moving to for this transition.\n\t* @param {Number} info.index - The current index of this [panel]{@link moon.Panel}.\n\t* @param {Boolean} info.animate - Whether the parent Panels is set to animate.\n\t* @public\n\t*/\n\ttransitionFinished: function (info) {\n\t\tthis.updatePanel(info);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshrinkAnimation: function () {\n\t\tthis.growing = false;\n\t\tthis.shrinking = true;\n\t\tthis.addClass('shrunken');\n\t\tthis.addClass('shrinking');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshrink: function () {\n\t\tthis.addClass('shrunken');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgrowAnimation: function () {\n\t\tthis.growing = true;\n\t\tthis.shrinking = false;\n\t\tthis.addClass('growing');\n\t\tthis.removeClass('shrunken');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgrow: function () {\n\t\tthis.removeClass('shrunken');\n\t},\n\n\t/**\n\t* Was protected\n\t* @private\n\t*/\n\tgetInitAnimationValues: function () {\n\t\tvar node = this.hasNode(),\n\t\t\tpaddingT = parseInt(dom.getComputedStyleValue(node, 'padding-top'), 10),\n\t\t\tpaddingR = parseInt(dom.getComputedStyleValue(node, 'padding-right'), 10),\n\t\t\tpaddingB = parseInt(dom.getComputedStyleValue(node, 'padding-bottom'), 10),\n\t\t\tpaddingL = parseInt(dom.getComputedStyleValue(node, 'padding-left'), 10);\n\t\tthis.initialHeight = node.offsetHeight - paddingT - paddingB;\n\t\tthis.initialWidth = node.offsetWidth   - paddingR - paddingL;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thaltAnimations: function () {\n\t\tthis.removeClass('growing');\n\t\tthis.removeClass('shrinking');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpreTransitionComplete: function () {\n\t\tthis.shrinking = false;\n\t\tthis.doPreTransitionComplete();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpostTransitionComplete: function () {\n\t\tthis.growing = false;\n\t\tthis.doPostTransitionComplete();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimationComplete: function (sender, event) {\n\t\tif (this.shrinking) {\n\t\t\tthis.removeClass('shrinking');\n\t\t\tthis.preTransitionComplete();\n\t\t\treturn true;\n\t\t}\n\t\tif (this.growing) {\n\t\t\tthis.removeClass('growing');\n\t\t\tthis.postTransitionComplete();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\theaderAnimationComplete: function (sender, event) {\n\t\tif (event.animation) {\n\t\t\tswitch (event.animation.name) {\n\t\t\tcase 'collapseToSmall':\n\t\t\tcase 'expandToLarge':\n\t\t\t\t// FIXME: It would be better to call this during the animation so it resizes\n\t\t\t\t// smoothly, but that's not possible with CSS transitions; it will jump now\n\t\t\t\tthis.resize();\n\t\t\t\treturn true;\t// We stop header animation event bubble up here.\n\t\t\t}\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tContextualPopupButton = require('../ContextualPopupButton');\n\n/**\n* {@link moon.ContextualPopupDecorator} is a control that loosely couples a\n* {@link moon.ContextualPopup} with an activating control, which may be a button\n* or any other control that fires an [onActivate]{@link enyo.Control#onActivate}\n* event. The decorator surrounds both the activating control and the contextual popup.\n*\n* When the control is activated, the popup shows itself in the correct position\n* relative to the activator.\n*\n* ```\n*\t\t{kind: 'moon.ContextualPopupDecorator', components: [\n*\t\t\t{content: 'Show Popup'},\n*\t\t\t{kind: 'moon.ContextualPopup',\n*\t\t\t\tcomponents: [\n*\t\t\t\t\t{content:'Sample component in popup'}\n*\t\t\t\t]\n*\t\t\t}\n*\t\t]}\n* ```\n*\n* @class moon.ContextualPopupDecorator\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ContextualPopupDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ContextualPopupDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: ContextualPopupButton,\n\n\t/**\n\t* Selection on iOS prevents tap events, so avoid.\n\t*\n\t* @private\n\t*/\n\tclasses: 'moon-contextual-popup-decorator',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonActivate: 'activated',\n\t\tonShow: 'popupShown',\n\t\tonHide: 'popupHidden'\n\t},\n\n\t/**\n\t* @fires enyo.Control#onActivate\n\t* @private\n\t*/\n\tactivated: function (inSender, inEvent) {\n\t\t// Don't process activate events that came from inside this decorator\n\t\tif (inEvent.sentFromPopup && inEvent.sentFromPopup.isDescendantOf(this)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.requestHidePopup();\n\t\tif (inEvent.originator.active) {\n\t\t\tthis.activator = inEvent.originator;\n\t\t\t// if this ContextualPopup is already activated\n\t\t\tif (this.popupActivated) {\n\t\t\t\tinEvent.originator.active = false;\n\t\t\t\tthis.popupActivated = false;\n\t\t\t} else {\n\t\t\t\tthis.activator.addClass('active');\n\t\t\t\tthis.requestShowPopup();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Handles `onShow` event.  Since the popup is a 'client control' of the decorator,\n\t* we should provide a connector between them.\n\t*\n\t* @param {Object} inSender - The component that most recently propagated the `onShow` event.\n\t* @param {Object} inEvent - An object containing event information.\n\t* @private\n\t*/\n\tpopupShown: function (inSender, inEvent) {\n\t\tif (this.popup === undefined) {\n\t\t\tthis.popup = inEvent.originator;\n\t\t}\n\t},\n\n\t/**\n\t* Handles `onHide` event. If you tap outside of the popup, it will close.\n\t*\n\t* @private\n\t*/\n\tpopupHidden: function () {\n\t\tif (this.activator) {\n\t\t\tthis.popupActivated = this.popup.popupActivated;\n\t\t\tthis.activator.active = false;\n\t\t\tthis.activator.removeClass('active');\n\t\t\tthis.activator.removeClass('pressed');\n\t\t}\n\t},\n\n\t/**\n\t* Event waterfalls down.\n\t* @fires moon.ContextualPopup#onRequestShowPopup\n\t* @private\n\t*/\n\trequestShowPopup: function () {\n\t\tthis.waterfallDown('onRequestShowPopup', {activator: this.activator});\n\t},\n\n\t/**\n\t* Event waterfalls down.\n\t* @fires moon.ContextualPopup#onRequestHidePopup\n\t* @private\n\t*/\n\trequestHidePopup: function () {\n\t\tthis.waterfallDown('onRequestHidePopup');\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar spotlight = require('../../../spotlight');\n\nvar\n\tPopup = require('../Popup'),\n\tIconButton = require('../IconButton'),\n\tBodyText = require('../BodyText'),\n\tDivider = require('../Divider'),\n\tMoonHistory = require('../History'),\n\tHistorySupport = MoonHistory.HistorySupport,\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text,\n\tMarqueeSupport = Marquee.Support;\n\n/**\n* {@link moon.Dialog} is a {@link moon.Popup} with a title, a subtitle, a\n* message, and an area for additional controls.\n*\n* @class moon.Dialog\n* @extends moon.Popup\n* @mixes moon.MarqueeSupport\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Dialog.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Dialog',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Popup,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-dialog',\n\n\t/**\n\t* @private\n\t* @lends moon.Dialog.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* The title for the dialog.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttitle: '',\n\n\t\t/**\n\t\t* The subtitle for the dialog.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsubTitle: '',\n\n\t\t/**\n\t\t* The message for the dialog.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tmessage: '',\n\n\t\t/**\n\t\t* When `true`, the title text will have locale-safe uppercasing applied.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuppercase: true,\n\n\t\t/**\n\t\t* @deprecated Replaced by [uppercase]{@link moon.Dialog#uppercase}.\n\t\t*\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\n\t\t* an effect when explicitly set (for complete backward compatibility).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\ttitleUpperCase: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MarqueeSupport, HistorySupport],\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnSpotlight: false,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnHover: true,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnRender: true,\n\n\t/**\n\t* @private\n\t*/\n\tmarqueeOnRenderDelay: 5000,\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{name: 'closeButton', kind: IconButton, icon: 'closex', classes: 'moon-popup-close', ontap: 'closePopup', showing: false},\n\t\t{kind: Control, classes: 'moon-dialog-client-wrapper', components: [\n\t\t\t{name: 'client', kind: Control, classes: 'moon-dialog-client'},\n\t\t\t{components: [\n\t\t\t\t{name: 'title', kind: MarqueeText, classes: 'moon-popup-header-text moon-dialog-title'},\n\t\t\t\t{name: 'subTitle', kind: Control, classes: 'moon-dialog-sub-title'}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, classes: 'moon-dialog-divider'},\n\t\t{name: 'message', kind: BodyText, classes: 'moon-dialog-content'},\n\t\t{name: 'spotlightDummy', kind: Control, spotlight: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tPopup.prototype.create.apply(this, arguments);\n\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// the titleUpperCase property is fully deprecated and removed. The legacy\n\t\t// property takes precedence if it exists.\n\t\tif (this.titleUpperCase !== null) this.uppercase = this.titleUpperCase;\n\n\t\tthis.titleChanged();\n\t\tthis.subTitleChanged();\n\t\tthis.messageChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleChanged: function () {\n\t\tvar title = this.getTitle();\n\t\tthis.$.title.setContent( this.get('uppercase') ? util.toUpperCase(title) : title );\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tuppercaseChanged: function () {\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\n\t\t// titleUpperCase is fully deprecated and removed.\n\t\tif (this.titleUpperCase != this.uppercase) this.titleUpperCase = this.uppercase;\n\t\tthis.titleChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleUpperCaseChanged: function () {\n\t\tif (this.uppercase != this.titleUpperCase) this.uppercase = this.titleUpperCase;\n\t\tthis.uppercaseChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsubTitleChanged: function () {\n\t\tthis.$.subTitle.setContent(this.subTitle);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmessageChanged: function () {\n\t\tthis.$.message.setContent(this.message);\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tProgressButton = require('../../../moonstone/lib/ProgressButton');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ProgressButtonSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcontentChange: false,\n\tcomponents: [\n\t\t{kind: Divider, content: 'Progress Button with Auto Download'},\n\t\t{name: 'autoDownload', kind: ProgressButton, content: 'Auto Download', postContent: 'Auto Launch', progress: 0, ontap: 'startDownloading'},\n\t\t{tag: 'br'},\n\t\t{tag: 'br'},\n\t\t{kind: Divider, content: 'Simple Progress Button'},\n\t\t{name: 'progressButton', kind: ProgressButton, progress: 0, content: 'Download', postContent: 'Launch', barClasses: 'moon-sample-blue', ontap: 'changeValue'},\n\t\t{tag: 'br'},\n\t\t{tag: 'br'},\n\t\t{kind: InputDecorator, style: 'margin-right:10px;', components: [\n\t\t\t{kind: Input, value: 10}\n\t\t]},\n\t\t{kind: Button, content: 'Set', small: true, classes: 'moon-sample-spaced-button', ontap: 'changeValue'},\n\t\t{kind: Button, content: '-', small: true, classes: 'moon-sample-spaced-button', ontap: 'decValue'},\n\t\t{kind: Button, content: '+', small: true, classes: 'moon-sample-spaced-button', ontap: 'incValue'},\n\t\t{tag: 'br'},\n\t\t{tag: 'br'},\n\t\t{style: 'width:240px;', components: [\n\t\t\t{name: 'animateSetting', kind: CheckboxItem, checked: true, content: 'Animated'}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '$.animateSetting.checked', to: '$.autoDownload.animated'},\n\t\t{from: '$.animateSetting.checked', to: '$.progressButton.animated'}\n\t],\n\tchangeValue: function (sender, event) {\n\t\tif (this.$.animateSetting.getChecked()) {\n\t\t\tthis.$.progressButton.animateProgressTo(this.$.input.getValue());\n\t\t} else {\n\t\t\tthis.$.progressButton.setProgress(this.$.input.getValue());\n\t\t}\n\t},\n\tincValue: function () {\n\t\tthis.$.input.setValue(Math.min(parseInt(this.$.input.getValue() || 0, 10) + 10, 100));\n\t\tthis.changeValue();\n\t},\n\tdecValue: function () {\n\t\tthis.$.input.setValue(Math.max(parseInt(this.$.input.getValue() || 0, 10) - 10, 0));\n\t\tthis.changeValue();\n\t},\n\tstartDownloading: function () {\n\t\tvar _this = this;\n\t\tif (_this.contentChange === false) {\n\t\t\t_this.downloadProgress = 0;\n\t\t\t_this.contentChange = true;\n\t\t\tvar timer = setInterval(function () {\n\t\t\t\t++_this.downloadProgress;\n\t\t\t\t_this.$.autoDownload.animateProgressTo(_this.downloadProgress);\n\t\t\t\tif (_this.downloadProgress >= 100) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tTooltip = require('../../../moonstone/lib/Tooltip'),\n\tTooltipDecorator = require('../../../moonstone/lib/TooltipDecorator');\n\nmodule.exports = kind({\n\tname: 'moon.sample.TooltipSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t//Top row of buttons\n\t\t{classes: 'moon-5v', components:[\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: Button, disabled: true, centered: true, content: 'Left Tooltip'},\n\t\t\t\t{kind: Tooltip, content: 'I\\'m a left tooltip.', position: 'above'}\n\t\t\t]},\n\n\t\t\t{kind: TooltipDecorator, style: 'float:right', components: [\n\t\t\t\t{kind: Button, content: 'Right Tooltip'},\n\t\t\t\t{name: 'toolTip', kind: Tooltip, uppercase: false, content: 'I\\'m a right tooltip.'}\n\t\t\t]}\n\t\t]},\n\t\t//Second row of buttons\n\t\t{classes: 'moon-5v', components:[\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: Button, small: true, content: 'Item with Left Floating Tooltip'},\n\t\t\t\t{kind: Tooltip, floating: true, content: 'I\\'m a left floating tooltip.'}\n\t\t\t]},\n\n\t\t\t{kind: TooltipDecorator, style: 'float: right', components: [\n\t\t\t\t{kind: Button, disabled: true, small: true, content: 'Item with Right Floating Tooltip'},\n\t\t\t\t{name: 'toolTipFloating', floating: true, kind: Tooltip, content: 'I\\'m a right floating text tooltip', position: 'above'}\n\t\t\t]}\n\t\t]},\n\t\t// third row of buttons\n\t\t{fit: true, components:[\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t{kind: Input, style: 'width: 130px;', placeholder: 'Above'}\n\t\t\t\t]},\n\t\t\t\t{kind: Tooltip, floating: true, content: 'I\\'m a tooltip for an input.', position: 'above'}\n\t\t\t]},\n\n\t\t\t{kind: TooltipDecorator, style: 'float:right;', components: [\n\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t{kind: Input, style: 'width: 130px;', placeholder: 'Below'}\n\t\t\t\t]},\n\t\t\t\t{kind: Tooltip, content: 'I\\'m a tooltip for an input.', position: 'below'}\n\t\t\t]}\n\t\t]},\n\t\t//Bottom row of buttons\n\t\t{components:[\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: IconButton, src: 'assets/icon-button-enyo-logo.png'},\n\t\t\t\t{kind: Tooltip, floating: true, content: 'Floating tooltip for an IconButton.'}\n\t\t\t]},\n\n\t\t\t{kind: TooltipDecorator, style: 'float:right;', components: [\n\t\t\t\t{kind: IconButton, src: 'assets/icon-button-enyo-logo.png'},\n\t\t\t\t{kind: Tooltip, floating: false, content: 'I\\'m a tooltip for an IconButton.'}\n\t\t\t]}\n\t\t]}\n\t]\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control'),\n\tDrawer = require('../../../enyo/lib/Drawer'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tExpandableListItem = require('../ExpandableListItem'),\n\tItem = require('../Item'),\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text;\n\n/**\n* {@link moon.Accordion} is a {@link moon.ExpandableListItem} with an arrow button\n* to the right of the header and additional margin space to the left of the item list.\n*\n* To open or close the drawer, tap on the header text or navigate (via 5-way)\n* back to the top of the drawer.\n*\n* The control's child components may be of any kind; by default, they are\n* instances of {@link moon.Item}.\n*\n* ```\n* {kind: 'moon.Accordion', content: 'This is an accordion', components: [\n* \t{content: 'Item One'},\n* \t{content: 'Item Two'}\n* ]},\n* {kind: 'moon.Accordion', content: 'This is another accordion', components: [\n* \t{content: 'Item Three'},\n* \t{content: 'Item Four'}\n* ]}\n* ```\n*\n* When multiple Accordions are used in a group, only one may be open at a given time.\n*\n* ```\n* {kind: 'Group', highlander: true, components: [\n* \t{kind: 'moon.Accordion',  open: true, content: 'This is a grouped accordion', components: [\n* \t\t{content: 'Item One'},\n* \t\t{content: 'Item Two'}\n* \t]},\n* \t{kind: 'moon.Accordion', content: 'This is another grouped accordion', components: [\n* \t\t{content: 'Item Three'},\n* \t\t{content: 'Item Four'}\n* \t]},\n* \t{kind: 'moon.Accordion', content: 'This is yet another grouped accordion', components: [\n* \t\t{content: 'Item Five'},\n* \t\t{content: 'Item Six'}\n* \t]}\n* ]}\n* ```\n*\n* @class moon.Accordion\n* @extends moon.ExpandableListItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Accordion.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Accordion',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ExpandableListItem,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-accordion',\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'headerWrapper', kind: Item, classes: 'moon-accordion-header-wrapper', onSpotlightFocus: 'headerFocus', ontap: 'expandContract', components: [\n\t\t\t// headerContainer required to avoid bad scrollWidth returned in RTL for certain text widths\n\t\t\t// (webkit bug)\n\t\t\t{name: 'headerContainer', kind: Control, classes: 'moon-expandable-list-item-header moon-expandable-picker-header moon-accordion-header', components: [\n\t\t\t\t{name: 'header', kind: MarqueeText}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'drawer', kind: Drawer, resizeContainer:false, classes: 'moon-expandable-list-item-client', components: [\n\t\t\t{name: 'client', kind: Group, tag: null}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.disabled', to: '.$.headerWrapper.disabled'}\n\t]\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind')\n\tControl = require('../../../enyo/lib/Control'),\n\tDrawer = require('../../../enyo/lib/Drawer'),\n\tGroup = require('../../../enyo/lib/Group'),\n\tSignals = require('../../../enyo/lib/Signals');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tExpandableListItem = require('../ExpandableListItem'),\n\tItem = require('../Item'),\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text;\n\n/**\n* Fires when the picker's value changes.\n*\n* @event moon.DateTimePickerBase#onChange\n* @type {Object}\n* @property {String} name - The name of this control.\n* @property {Date} value - A standard JavaScript {@glossary Date} object representing\n* the picker's current value.\n* @public\n*/\n\n/**\n* {@link moon.DateTimePickerBase} is a base kind implementing fuctionality shared by\n* {@link moon.DatePicker} and {@link moon.TimePicker}. It is not intended to be used\n* directly.\n*\n* @class moon.DateTimePickerBase\n* @extends moon.ExpandableListItem\n* @ui\n* @protected\n*/\n\nmodule.exports = kind(\n\t/** @lends moon.DateTimePickerBase.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.DateTimePickerBase',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ExpandableListItem,\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-expandable-picker moon-date-picker',\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.DateTimePickerBase#onChange}\n\t\t*/\n\t\tonChange: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.DateTimePickerBase.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Text to be displayed as the current value if no item is currently selected.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tnoneText: '',\n\n\t\t/**\n\t\t* The locale (in IETF format) used for picker formatting.\n\t\t*\n\t\t* This setting only applies when the [iLib]{@glossary ilib} library is loaded.\n\t\t*\n\t\t* When `iLib` is not present, U.S. English `(en-US)` formatting is applied.\n\t\t*\n\t\t* When `iLib` is present and `locale` is set to the default value `(null)`,\n\t\t* the picker uses `iLib`'s current locale (which `iLib` tries to determine\n\t\t* from the system).\n\t\t*\n\t\t* When `iLib` is present and an explicit `locale` is provided, that locale\n\t\t* will be used (regardless of `iLib`'s current locale).\n\t\t*\n\t\t* The `locale` value may be changed after the picker is created; if this happens,\n\t\t* the picker will be reformatted to reflect the new setting.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tlocale: null,\n\n\t\t/**\n\t\t* The value of the picker, expressed as a standard JavaScript {@glossary Date}\n\t\t* object.\n\t\t*\n\t\t* @type {Date}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tvalue: null,\n\n\t\t/**\n\t\t* If `true`, the picker will use a 12-hour clock (this value is ignored when\n\t\t* `iLib` is loaded, since the meridiem will be set by the current locale).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tmeridiemEnable: false\n\t},\n\n\t/**\n\t* Set in subkind.\n\t*\n\t* @private\n\t*/\n\tiLibFormatType: null,\n\n\t/**\n\t* Set in subkind.\n\t*\n\t* @private\n\t*/\n\tdefaultOrdering: null,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'headerWrapper', kind: Item, classes: 'moon-date-picker-header-wrapper', onSpotlightFocus: 'headerFocus', ontap: 'expandContract', components: [\n\t\t\t// headerContainer required to avoid bad scrollWidth returned in RTL for certain text widths (webkit bug)\n\t\t\t{name: 'headerContainer', kind: Control, classes: 'moon-expandable-list-item-header moon-expandable-picker-header moon-expandable-datetime-header', components: [\n\t\t\t\t{name: 'header', kind: MarqueeText}\n\t\t\t]},\n\t\t\t{name: 'currentValue', kind: MarqueeText, classes: 'moon-expandable-picker-current-value'}\n\t\t]},\n\t\t{name: 'drawer', kind: Drawer, resizeContainer:false, classes:'moon-expandable-list-item-client indented', components: [\n\t\t\t{name: 'client', kind: Control, classes: 'enyo-tool-decorator moon-date-picker-client', onSpotlightLeft:'closePicker', onSpotlightSelect: 'closePicker'}\n\t\t]},\n\t\t{kind: Signals, onlocalechange: 'handleLocaleChangeEvent'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.disabled', to: '.$.headerWrapper.disabled'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tExpandableListItem.prototype.create.apply(this, arguments);\n\t\tthis.initDefaults();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitILib: function () {\n\t\tvar fmtParams = {\n\t\t\ttype: this.iLibFormatType,\n\t\t\tuseNative: false,\n\t\t\ttimezone: 'local',\n\t\t\tlength: 'full',\n\t\t\tdate: 'dmwy'\n\t\t};\n\n\t\tfmtParams.locale = this.locale;\n\t\tthis.iLibLocale = ilib.getLocale();\n\t\tthis._tf = new ilib.DateFmt(fmtParams);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitDefaults: function () {\n\t\tvar ordering;\n\t\t//Attempt to use the ilib lib (assuming that it is loaded)\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis.initILib();\n\t\t\tordering = this._tf.getTemplate();\n\t\t} else {\n\t\t\tordering = this.defaultOrdering;\n\t\t}\n\t\tthis.setupPickers(ordering);\n\t\tthis.noneTextChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupPickers: function (ordering) {\n\t\t// implement in subkind, calling this.inherited() at the end\n\t\tthis.pickers = this.getClientControls();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tformatValue: function () {\n\t\t// implement in subkind\n\t},\n\n\t/**\n\t* @fires moon.DateTimePickerBase#onChange\n\t* @private\n\t*/\n\tvalueChanged: function (inOld) {\n\t\tthis.syncingPickers = true;\n\t\tthis.setChildPickers(inOld);\n\t\tthis.syncingPickers = false;\n\n\t\tif (this.value) {\n\t\t\tthis.doChange({name:this.name, value:this.value});\n\t\t} else {\n\t\t\tthis.noneTextChanged();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetChildPickers: function (inOld) {\n\t\t// implement in subkind\n\t},\n\n\t/**\n\t* If no item is selected, sets [noneText]{@link moon.DateTimePickerBase#noneText}\n\t* as current value.\n\t*\n\t* @private\n\t*/\n\tnoneTextChanged: function () {\n\t\tif(!this.value) {\n\t\t\tthis.$.currentValue.setContent(this.getNoneText());\n\t\t} else {\n\t\t\tthis.$.currentValue.setContent(this.formatValue());\n\t\t}\n\t},\n\n\t/**\n\t* When [open]{@link moon.ExpandableListItem#open} changes, shows/hides the current value.\n\t*\n\t* @private\n\t*/\n\topenChanged: function () {\n\t\tExpandableListItem.prototype.openChanged.apply(this, arguments);\n\t\tvar pickers = this.pickers,\n\t\t\ti, p;\n\t\tif (pickers && this.open) {\n\t\t\tfor (i = 0; i < pickers.length; i++) {\n\t\t\t\tp = pickers[i];\n\t\t\t\tif (p.getClientControls().length > 0) {\n\t\t\t\t\tp = p.getClientControls()[0];\n\t\t\t\t}\n\t\t\t\tp.reflow();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttoggleActive: function () {\n\t\tif (this.getOpen()) {\n\t\t\tthis.setActive(false);\n\t\t\tif (!Spotlight.getPointerMode()) {\n\t\t\t\tSpotlight.spot(this.$.headerWrapper);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.value) {\n\t\t\t\tthis.setValue(new Date());\n\t\t\t}\n\t\t\tthis.setActive(true);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclosePicker: function (inSender, inEvent) {\n\t\t/**\n\t\t* If select/enter is pressed on any date picker item or the left key is pressed on the\n\t\t* first item, close the drawer\n\t\t*/\n\t\tif (inEvent.type == 'onSpotlightSelect' ||\n\t\t\tthis.$.client.children[0].id == inEvent.originator.id) {\n\t\t\tthis.expandContract();\n\t\t\tthis.noneTextChanged();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlocaleChanged: function () {\n\t\t// Our own locale property has changed, so we need to rebuild our child pickers\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tilib.setLocale(this.locale);\n\t\t\tthis.iLibLocale = ilib.getLocale();\n\t\t}\n\t\tthis.refresh();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleLocaleChangeEvent: function () {\n\t\t// We've received a localechange event from the system, which means either the system\n\t\t// locale or the timezone may have changed.\n\t\tif (typeof ilib !== 'undefined' && ilib.getLocale() !== this.iLibLocale) {\n\t\t\t// We're using iLib locale, and it has changed, so we'll rebuild the child pickers\n\t\t\t// entirely\n\t\t\tthis.refresh();\n\t\t} else {\n\t\t\t// We don't care about the iLib locale or it hasn't changed, but timezone might have\n\t\t\t// changed, so we'll just update the child pickers\n\t\t\tthis.setChildPickers();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trefresh: function (){\n\t\tthis.destroyClientControls();\n\t\tthis.pickers = null;\n\t\tif (this._tf) {\n\t\t\tdelete this._tf;\n\t\t}\n\t\tif (this.value && typeof ilib !== 'undefined'){\n\t\t\tthis.localeValue = ilib.Date.newInstance({unixtime: this.value.getTime(), timezone: \"local\"});\n\t\t}\n\t\tthis.initDefaults();\n\t\tthis.render();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind')\n\tControl = require('../../../enyo/lib/Control'),\n\tDrawer = require('../../../enyo/lib/Drawer');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tExpandableListItem = require('../ExpandableListItem'),\n\tItem = require('../Item'),\n\tInput = require('../Input'),\n\tInputDecorator = require('../InputDecorator'),\n\tMarquee = require('../Marquee'),\n\tMarqueeItem = Marquee.Item,\n\tMarqueeText = Marquee.Text;\n\n/**\n* Fires when the current text changes. This passes through {@link enyo.Input#onChange}.\n*\n* @event moon.ExpandableInput#onChange\n* @type {Object}\n* @property {String} value - The value of the input.\n* @public\n*/\n\n/**\n* {@link moon.ExpandableInput}, which extends {@link moon.ExpandableListItem}, is a\n* drop-down input that prompts the user to enter text.\n*\n* @class moon.ExpandableInput\n* @extends moon.ExpandableListItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ExpandableInput.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ExpandableInput',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ExpandableListItem,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-expandable-input',\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/** {@link moon.ExpandableInput#onChange} */\n\t\tonChange: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.ExpandableInput.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Text to be displayed as the current value if no item is currently selected.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tnoneText: '',\n\n\t\t/**\n\t\t* Text to be displayed in the input if no text has been entered.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tplaceholder: '',\n\n\t\t/**\n\t\t* Initial value of the input.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tvalue: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoCollapse: true,\n\n\t/**\n\t* @private\n\t*/\n\tlockBottom: false,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'headerWrapper', kind: Item, classes: 'moon-expandable-picker-header-wrapper', onSpotlightFocus: 'headerFocus', ondown: 'headerDown', ontap: 'expandContract', components: [\n\t\t\t// headerContainer required to avoid bad scrollWidth returned in RTL for certain text widths (webkit bug)\n\t\t\t{name: 'headerContainer', kind: Control, classes: 'moon-expandable-list-item-header moon-expandable-picker-header moon-expandable-input-header', components: [\n\t\t\t\t{name: 'header', kind: MarqueeText}\n\t\t\t]},\n\t\t\t{name: 'currentValue', kind: MarqueeText, classes: 'moon-expandable-picker-current-value'}\n\t\t]},\n\t\t{name: 'drawer', kind: Drawer, resizeContainer:false, classes:'moon-expandable-list-item-client indented', components: [\n\t\t\t{name: 'inputDecorator', kind: InputDecorator, onSpotlightBlur: 'inputBlur', onSpotlightFocus: 'inputFocus', onSpotlightDown: 'inputDown', components: [\n\t\t\t\t{name: 'clientInput', kind: Input, onchange: 'doChange', onkeyup: 'inputKeyUp'}\n\t\t\t]}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.value', to: '.$.clientInput.value', oneWay: false},\n\t\t{from: '.placeholder', to: '.$.clientInput.placeholder'},\n\t\t{from: '.showCurrentValue', to: '.$.currentValue.showing'},\n\t\t{from: '.currentValueText', to: '.$.currentValue.content'},\n\t\t{from: '.disabled', to: '.$.headerWrapper.disabled'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcomputed: {\n\t\t'showCurrentValue': ['open', 'value', 'noneText'],\n\t\t'currentValueText': ['value', 'noneText']\n\t},\n\n\t/**\n\t* Computed property\n\t*\n\t* @private\n\t*/\n\tshowCurrentValue: function () {\n\t\treturn !this.open && this.currentValueText() !== '';\n\t},\n\n\t/**\n\t* Computed property\n\t*\n\t* @private\n\t*/\n\tcurrentValueText: function () {\n\t\treturn (this.value === '') ? this.noneText : this.value;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\texpandContract: function () {\n\t\tif (this.getOpen()) {\n\t\t\tthis.closeDrawerAndHighlightHeader();\n\t\t} else {\n\t\t\tthis.toggleActive();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttoggleActive: function () {\n\t\tif (this.getOpen()) {\n\t\t\tthis.setActive(false);\n\t\t\tthis.$.clientInput.blur();\n\t\t} else {\n\t\t\tthis.setActive(true);\n\t\t\tSpotlight.unspot();\n\t\t\tthis.focusInput();\n\t\t}\n\t},\n\n\t/**\n\t* Focuses the {@link moon.Input} when the input decorator receives focus.\n\t*\n\t* @private\n\t*/\n\tinputFocus: function (inSender, inEvent) {\n\t\tvar direction = inEvent && inEvent.dir;\n\t\tif (this.getOpen() && direction) {\n\t\t\tthis.focusInput();\n\t\t}\n\t},\n\n\t/**\n\t* Value should be submitted if user clicks outside control. We check for\n\t* `onSpotlightFocus` and `mouseover` to avoid contracting the input on an event\n\t* fired from itself.\n\t*\n\t* @private\n\t*/\n\tinputBlur: function (inSender, inEvent) {\n\t\tvar eventType = Spotlight.getLastEvent().type;\n\t\tif (Spotlight.getPointerMode() && eventType !== 'onSpotlightFocus' && eventType !== 'mouseover') {\n\t\t\tthis.toggleActive();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinputKeyUp: function (inSender, inEvent) {\n\t\tif (inEvent.keyCode === 13) {\n\t\t\tthis.closeDrawerAndHighlightHeader();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\theaderDown: function () {\n\t\tSpotlight.unfreeze();\n\t},\n\n\t/**\n\t* Focuses the input field if navigating down from the header while the drawer is open.\n\t*\n\t* @private\n\t*/\n\tspotlightDown: function (inSender, inEvent) {\n\t\tif (inEvent.originator === this.$.headerWrapper && this.getOpen()) {\n\t\t\tthis.focusInput();\n\t\t}\n\t},\n\n\t/**\n\t* Focuses the input field.\n\t*\n\t* @private\n\t*/\n\tfocusInput: function () {\n\t\tthis.$.clientInput.focus();\n\t\t// Force cursor to end of text. We were sometimes seeing the\n\t\t// cursor positioned at the start of the text, which caused\n\t\t// problems in 5-way mode (where there's no way to move the\n\t\t// cursor).\n\t\tthis.$.clientInput.hasNode().selectionStart = this.value.length;\n\t},\n\n\t/**\n\t* If [lockBottom]{@link moon.ExpandableInput#lockBottom} is `true`, don't allow user\n\t* to navigate down from the input field; if `false`, close the drawer and return\n\t* `true` to keep {@glossary Spotlight} on header.\n\t*\n\t* @private\n\t*/\n\tinputDown: function (inSender, inEvent) {\n\t\tif (this.getLockBottom()) {\n\t\t\tthis.focusInput();\n\t\t} else {\n\t\t\tthis.closeDrawerAndHighlightHeader();\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* We manually set pointer mode to `false` as this seems to be the\n\t* least harmful method to re-highlight the header after the drawer\n\t* closes. The other options had side effects of resetting the\n\t* current spotted control to the root, or requiring a double-press to\n\t* subsequently move via 5-way.\n\t*\n\t* @private\n\t*/\n\tcloseDrawerAndHighlightHeader: function () {\n\t\tvar mode = Spotlight.getPointerMode();\n\t\tSpotlight.setPointerMode(false);\n\t\tSpotlight.unfreeze();\n\t\tSpotlight.spot(this.$.headerWrapper);\n\t\tSpotlight.setPointerMode(mode);\n\t\tthis.toggleActive();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tComponent = require('../../../enyo/lib/Component'),\n\tControl = require('../../../enyo/lib/Control'),\n\tDrawer = require('../../../enyo/lib/Drawer'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tBodyText = require('../BodyText'),\n\tExpandableListItem = require('../ExpandableListItem'),\n\tItem = require('../Item'),\n\tMarquee = require('../Marquee'),\n\tCheckboxItem = require('../CheckboxItem'),\n\tMarqueeItem = Marquee.Item,\n\tMarqueeText = Marquee.Text;\n\n/**\n* Fires when the currently selected item changes.\n*\n* @event moon.ExpandablePicker#onChange\n* @type {Object}\n* @property {Object|Object[]} selected - A reference to the currently selected item,\n*\tor (if [multipleSelection]{@link moon.ExpandablePicker#multipleSelection} is `true`),\n*\tan array of selected items.\n* @property {String} content - The content of the currently selected item, or (if\n*\t[multipleSelection]{@link moon.ExpandablePicker#multipleSelection} is `true`), a comma\n*\t(plus space) separated list of the selected items' content.\n* @property {Number} index - The index of the currently selected item, or (if\n*\t[multipleSelection]{@link moon.ExpandablePicker#multipleSelection} is `true`), an array\n* of the index values of the selected items.\n* @public\n*/\n\n/**\n* {@link moon.ExpandablePicker}, which extends {@link moon.ExpandableListItem}, is\n* a drop-down picker menu that solicits a choice from the user. The picker's child\n* components, which are instances of {@link moon.CheckboxItem} by default, provide\n* the options for the picker.\n*\n* ```\n* {kind: 'moon.ExpandablePicker', noneText: 'None Selected', content: 'Choose City',\n* components: [\n*\t{content: 'San Francisco'},\n*\t{content: 'Boston'},\n*\t{content: 'Tokyo'}\n* ]}\n* ```\n*\n* The currently selected item is available in the picker's\n* [selected]{@link moon.ExpandablePicker#selected} property and may be accessed in\n* the normal manner, by calling `get('selected')` and `set('selected', <value>)`.\n* Similarly, the index of the current selection is available in\n* [selectedIndex]{@link moon.ExpandablePicker#selectedIndex}. When the\n* [multipleSelection]{@link moon.ExpandablePicker#multipleSelection} property is set\n* to `true`, `selected` contains an array of selected items, and `selectedIndex`\n* contains an array of the selected items' index values.\n*\n* The [onChange]{@link moon.ExpandablePicker#onChange} event is fired when the\n* selected item changes.\n*\n* The picker's options may be modified programmatically in the standard manner, by\n* calling `createComponent().render()` or `destroy()`.\n*\n* ```\n* // Add new items to picker\n* this.$.expandablePicker.createComponent({'New York'}).render();\n* this.$.expandablePicker.createComponent({'London'}).render();\n*\n* // Remove currently selected item from picker\n* this.$.expandablePicker.getSelected().destroy();\n* ```\n*\n* When the picker is minimized, the content of the currently selected item is\n* displayed as subtext below the picker label. If multiple selection is enabled,\n* the content of all selected items will be displayed as a comma-separated list.\n*\n* @class moon.ExpandablePicker\n* @extends moon.ExpandableListItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ExpandablePicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ExpandablePicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ExpandableListItem,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-expandable-picker',\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\t/**\n\t\t* {@link moon.ExpandablePicker#onChange}\n\t\t*/\n\t\tonChange: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.ExpandablePicker.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Reference to currently selected item, if any, or (when\n\t\t* [multipleSelection]{@link moon.ExpandablePicker#multipleSelection} is `true`),\n\t\t* an array of selected items.\n\t\t*\n\t\t* @type {Object | Object[]}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tselected: null,\n\n\t\t/**\n\t\t* Index of the currently selected item, or `-1` if nothing is selected. If\n\t\t* [multipleSelection]{@link moon.ExpandablePicker#multipleSelection} is `true`,\n\t\t* this will be array of the selected items' index values, or an empty array if\n\t\t* nothing is selected.\n\t\t*\n\t\t* @type {Number | Number[]}\n\t\t* @default -1\n\t\t* @public\n\t\t*/\n\t\tselectedIndex: -1,\n\n\t\t/**\n\t\t* Text to be displayed as the current value if no item is currently selected.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tnoneText: '',\n\n\t\t/**\n\t\t* Text to be displayed when the drawer is opened.\n\t\t*\n\t\t* @type {String}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\thelpText: null,\n\n\t\t/**\n\t\t* If `true`, picker auto-collapses when an item is selected.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tautoCollapseOnSelect: true,\n\n\t\t/**\n\t\t* If `true`, multiple selection is allowed.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tmultipleSelection: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tautoCollapse: true,\n\n\t/**\n\t* @private\n\t*/\n\tlockBottom: true,\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: CheckboxItem,\n\n\t/**\n\t* @private\n\t*/\n\tselectAndCloseDelayMS: 600,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'headerWrapper', kind: Item, classes: 'moon-expandable-picker-header-wrapper', onSpotlightFocus: 'headerFocus', ontap: 'expandContract', components: [\n\t\t\t// headerContainer required to avoid bad scrollWidth returned in RTL for certain text widths (webkit bug)\n\t\t\t{name: 'headerContainer', kind: Control, classes: 'moon-expandable-list-item-header moon-expandable-picker-header', components: [\n\t\t\t\t{name: 'header', kind: MarqueeText}\n\t\t\t]},\n\t\t\t{name: 'currentValue', kind: MarqueeText, classes: 'moon-expandable-picker-current-value'}\n\t\t]},\n\t\t{name: 'drawer', kind: Drawer, resizeContainer:false, classes:'moon-expandable-list-item-client', components: [\n\t\t\t{name: 'client', tag: null, kind: Group, onActivate: 'activated', highlander: true},\n\t\t\t{name: 'helpText', kind: BodyText, canGenerate: false, classes: 'moon-expandable-picker-help-text'}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: 'allowHtml', to: '$.header.allowHtml'},\n\t\t{from: 'allowHtml', to: '$.currentValue.allowHtml'},\n\t\t{from: 'disabled', to: '$.headerWrapper.disabled'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tif (this.multipleSelection) {\n\t\t\tthis.selected = (this.selected) ? this.selected : [];\n\t\t\tthis.selectedIndex = (this.selectedIndex != -1) ? this.selectedIndex : [];\n\t\t}\n\t\t// super initialization\n\t\tExpandableListItem.prototype.create.apply(this, arguments);\n\n\t\tthis.selectedIndexChanged();\n\t\tthis.noneTextChanged();\n\t\tthis.helpTextChanged();\n\t\tthis.openChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function() {\n\t\tvar override = {client: {highlander: !this.multipleSelection}};\n\t\tthis.kindComponents = Component.overrideComponents(this.kindComponents, override);\n\t\tExpandableListItem.prototype.initComponents.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function () {\n\t\tExpandableListItem.prototype.rendered.apply(this, arguments);\n\t\tthis.isRendered = true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmultiSelectCurrentValue: function () {\n\t\tif (!this.multipleSelection) {\n\t\t\treturn;\n\t\t}\n\t\tvar controls = this.getCheckboxControls();\n\t\tvar str = '';\n\t\tthis.selectedIndex.sort();\n\t\tfor (var i=0; i < this.selectedIndex.length; i++) {\n\t\t\tif (!str) {\n\t\t\t\tstr = controls[this.selectedIndex[i]].getContent();\n\t\t\t} else {\n\t\t\t\tstr = str + ', ' + controls[this.selectedIndex[i]].getContent();\n\t\t\t}\n\t\t}\n\t\tif (!str) {\n\t\t\tstr = this.getNoneText();\n\t\t}\n\t\treturn str;\n\t},\n\n\t/**\n\t* When the [selected]{@link moon.ExpandablePicker#selected} control changes,\n\t* updates [checked]{@link moon.CheckboxItem#checked} values appropriately and\n\t* fires an [onChange]{@link moon.ExpandablePicker#onChange} event.\n\t*\n\t* @fires moon.ExpandablePicker#onChange\n\t* @private\n\t*/\n\tselectedChanged: function (inOldValue) {\n\t\tvar selected = this.getSelected(),\n\t\tcontrols = this.getCheckboxControls(),\n\t\tindex = -1,\n\t\ti; //declaring i here to fix travis error\n\n\t\tif (this.multipleSelection) {\n\t\t\tthis.rebuildSelectedIndices(selected, controls);\n\t\t\tif(this.hasNode()) {\n\t\t\t\tthis.fireChangeEvent();\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i=0;i<controls.length;i++) {\n\t\t\t\tif(controls[i] === selected) {\n\t\t\t\t\tcontrols[i].setChecked(true);\n\t\t\t\t\tindex = i;\n\t\t\t\t} else if (controls[i].checked) {\n\t\t\t\t\tcontrols[i].silence();\n\t\t\t\t\tcontrols[i].setChecked(false);\n\t\t\t\t\tcontrols[i].unsilence();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (index > -1 && selected !== inOldValue) {\n\t\t\t\tthis.setSelectedIndex(index);\n\t\t\t\tthis.$.currentValue.setContent(selected.getContent());\n\t\t\t\tif(this.hasNode()) {\n\t\t\t\t\tthis.fireChangeEvent();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* When the {@link moon.ExpandablePicker#selectedIndex} changes, calls\n\t* `setChecked()` on the appropriate control.\n\t*\n\t* @private\n\t*/\n\tselectedIndexChanged: function () {\n\t\tvar selected = this.getSelected(),\n\t\tcontrols = this.getCheckboxControls(),\n\t\tindex = this.getSelectedIndex();\n\n\t\tif (this.multipleSelection) {\n\t\t\tfor (var i = 0; i < controls.length; i++) {\n\t\t\t\tvar selIndex = selected.indexOf(controls[i]);\n\t\t\t\tif (index.indexOf(i) >= 0) {\n\t\t\t\t\tcontrols[i].setChecked(true);\n\t\t\t\t\tif (selIndex == -1) {\n\t\t\t\t\t\tselected.push(controls[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcontrols[i].setChecked(false);\n\t\t\t\t\tif (selIndex >= 0) {\n\t\t\t\t\t\tselected.splice(selIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$.currentValue.setContent(this.multiSelectCurrentValue());\n\t\t\tif(this.hasNode()) {\n\t\t\t\tthis.fireChangeEvent();\n\t\t\t}\n\t\t} else {\n\t\t\tif (controls[index] && controls[index] !== selected) {\n\t\t\t\tthis.setSelected(controls[index]);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* If there is no selected item, uses [noneText]{link @moon.ExpandablePicker#noneText}\n\t* as current value.\n\t*\n\t* @private\n\t*/\n\tnoneTextChanged: function () {\n\t\tif (this.multipleSelection) {\n\t\t\tif (!this.getSelected().length && !this.getSelectedIndex().length) {\n\t\t\t\tthis.$.currentValue.setContent(this.getNoneText());\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.getSelected() && this.getSelectedIndex() == -1) {\n\t\t\t\tthis.$.currentValue.setContent(this.getNoneText());\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* When [open]{@link moon.ExpandablePicker#open} changes, shows/hides `this.$.currentValue`.\n\t*\n\t* @private\n\t*/\n\topenChanged: function () {\n\t\tthis.inherited(arguments);\n\t\tthis.$.currentValue.setShowing(!this.open);\n\t\tthis.setActive(this.getOpen());\n\t},\n\n\t/**\n\t* When drawer is opened/closed, shows/hides `this.$.helpText`.\n\t*\n\t* @private\n\t*/\n\thelpTextChanged: function () {\n\t\tif (this.helpText !== null && !this.$.helpText.canGenerate) {\n\t\t\tthis.generateHelpText();\n\t\t}\n\t\tthis.$.helpText.setContent(this.helpText);\n\t\tthis.$.helpText.setShowing(!!this.helpText);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\t// When the expandablePicker itself is going away, take note so we don't try and do\n\t\t// single-picker option remove logic such as setting some properties to default\n\t\t// value when each picker option is destroyed\n\t\tthis.destroying = true;\n\t\tExpandableListItem.prototype.destroy.apply(this, arguments);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trebuildSelectedIndices: function(selected, controls) {\n\t\tthis.selectedIndex = [];\n\t\tselected = selected || this.getSelected();\n\t\tcontrols = controls || this.getCheckboxControls();\n\n\t\tfor (var i = 0; i < controls.length; i++) {\n\t\t\tif (selected.indexOf(controls[i]) >= 0) {\n\t\t\t\tcontrols[i].setChecked(true);\n\t\t\t\tthis.selectedIndex.push(i);\n\t\t\t} else {\n\t\t\t\tcontrols[i].silence();\n\t\t\t\tcontrols[i].setChecked(false);\n\t\t\t\tcontrols[i].unsilence();\n\t\t\t}\n\t\t}\n\t\tthis.$.currentValue.setContent(this.multiSelectCurrentValue());\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tremoveControl: function (inControl) {\n\t\t// Skip extra work during panel destruction.\n\t\tif (!this.destroying) {\n\t\t\t// set currentValue, selected and selectedIndex to defaults value\n\t\t\tif (this.multipleSelection) {\n\t\t\t\tfor (var i = 0; i < this.selected.length; i++) {\n\t\t\t\t\tif (this.selected[i] === inControl) {\n\t\t\t\t\t\tthis.selected.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// in case of multipleSection, removing control could change\n\t\t\t\t// selected array.\n\t\t\t\tthis.rebuildSelectedIndices();\n\t\t\t} else {\n\t\t\t\tif (this.selected === inControl) {\n\t\t\t\t\tthis.setSelected(null);\n\t\t\t\t\tthis.setSelectedIndex(-1);\n\t\t\t\t\tthis.$.currentValue.setContent(this.getNoneText());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tExpandableListItem.prototype.removeControl.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgenerateHelpText: function () {\n\t\tthis.$.helpText.canGenerate = true;\n\t\tthis.$.helpText.render();\n\t},\t\t\n\n\t/**\n\t* When an item is chosen, marks it as checked and closes the picker.\n\t*\n\t* @private\n\t*/\n\tactivated: function (inSender, inEvent) {\n\t\tvar toggledControl = inEvent && inEvent.toggledControl, index;\n\n\t\tif (!toggledControl) {\n\t\t\treturn;\n\t\t}\n\n\t\tindex = this.getCheckboxControls().indexOf(toggledControl);\n\n\t\tif (this.multipleSelection) {\n\t\t\tif (index >= 0) {\n\t\t\t\t// if toggledControl is checked but it is out of this.selected, them push it\n\t\t\t\tif (inEvent.checked && (this.selected.indexOf(toggledControl) == -1)) {\n\t\t\t\t\tthis.selected.push(toggledControl);\n\t\t\t\t\tthis.selectedChanged();\n\t\t\t\t}\n\t\t\t\t// if toggledControl is not checked but it is in this.selected, them pull it out\n\t\t\t\tif (!inEvent.checked && (this.selected.indexOf(toggledControl) >= 0)) {\n\t\t\t\t\tthis.selected.splice(this.selected.indexOf(toggledControl), 1);\n\t\t\t\t\tthis.selectedChanged();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (inEvent.checked && index >= 0) {\n\t\t\t\tthis.setSelected(toggledControl);\n\t\t\t}\n\t\t}\n\n\t\tif (this.getAutoCollapseOnSelect() && this.isRendered && this.getOpen()) {\n\t\t\tthis.startJob('selectAndClose', 'selectAndClose', this.selectAndCloseDelayMS);\n\t\t}\n\n\t\treturn true;\n\t},\n\t\n\t/**\n\t* Returns the picker items. Override point for child kinds altering the source of the items.\n\t* \n\t* @private\n\t*/\n\tgetCheckboxControls: function () {\n\t\treturn this.getClientControls();\n\t},\n\n\t/**\n\t* Closes drawer and selects header.\n\t*\n\t* @private\n\t*/\n\tselectAndClose: function () {\n\t\tthis.setActive(false);\n\t\tif (!Spotlight.getPointerMode() && Spotlight.getCurrent() && Spotlight.getCurrent().isDescendantOf(this)) {\n\t\t\tSpotlight.spot(this.$.headerWrapper);\n\t\t}\n\t},\n\n\t/**\n\t* Fires an `onChange` event.\n\t*\n\t* @fires moon.ExpandablePicker#onChange\n\t* @private\n\t*/\n\tfireChangeEvent: function () {\n\t\tvar contentStr = (this.multipleSelection) ? this.multiSelectCurrentValue() : this.getSelected().getContent();\n\t\tthis.doChange({\n\t\t\tselected: this.getSelected(),\n\t\t\tcontent: contentStr,\n\t\t\tindex: this.getSelectedIndex()\n\t\t});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmultipleSelectionChanged : function (inOldValue) {\n\t\tif (this.multipleSelection) {\n\t\t\tif (this.selected) {\n\t\t\t\tthis.selected = [this.selected];\n\t\t\t} else {\n\t\t\t\tthis.selected = [];\n\t\t\t}\n\t\t\tthis.selectedIndex = [];\n\t\t} else {\n\t\t\tthis.selected = (this.selected.length) ? this.selected[0] : null;\n\t\t\tthis.selectedIndex = -1;\n\t\t}\n\t\tthis.$.client.setHighlander(!this.multipleSelection);\n\t\tthis.selectedChanged();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tpath = require('../../../enyo/lib/pathResolver'),\n\tControl = require('../../../enyo/lib/Control'),\n\tImage = require('../../../enyo/lib/Image');\n\nvar\n\tItem = require('../Item'),\n\tLabeledTextItem = require('../LabeledTextItem');\n\n/**\n* {@link moon.ImageItem}, which derives from {@link moon.Item}, is a control that combines an\n* {@link enyo.Image} with a {@link moon.LabeledTextItem}. By default, the image is displayed to\n* the left of the text; to display the image on the right, set\n* [imageAlignRight]{@link moon.ImageItem#imageAlignRight} to `true`.\n*\n* @class moon.ImageItem\n* @extends moon.Item\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ImageItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ImageItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-imageitem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Item,\n\n\t/**\n\t* @private\n\t*/\n\tcomponents:[\n\t\t{name: 'image', kind: Image},\n\t\t{name: 'textItem', kind: LabeledTextItem, spotlight: false}\n\t],\n\n\t/**\n\t* @private\n\t* @lends moon.ImageItem.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* The absolute URL path to the image.\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tsource: '',\n\n\t\t/**\n\t\t* The label to be displayed along with the text.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tlabel: '',\n\n\t\t/**\n\t\t* The text to be displayed in the item.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttext: '',\n\n\t\t/**\n\t\t* Set to `true` to align image to right of text.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\timageAlignRight: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.allowHtml', to: '.$.textItem.allowHtml'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.sourceChanged();\n\t\tthis.labelChanged();\n\t\tthis.textChanged();\n\t\tthis.imageAlignRightChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsourceChanged: function () {\n\t\tif (!this.source || this.source === '') {\n\t\t\treturn;\n\t\t}\n\t\tthis.$.image.setAttribute('src', path.rewrite(this.source));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlabelChanged: function () {\n\t\tthis.$.textItem.setLabel(this.label);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttextChanged: function () {\n\t\tthis.$.textItem.setText(this.text);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\timageAlignRightChanged: function () {\n\t\tthis.addRemoveClass('align-right', this.imageAlignRight);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tSelectableItem = require('../SelectableItem');\n\n/**\n* {@link moon.RadioItem} is a modified {@link moon.Item} designed for use inside\n* a {@link moon.RadioItemGroup}.\n*\n* For more information, see the documentation on\n* [Radio Items]{@linkplain $dev-guide/building-apps/controls/radio-items.html}\n* in the Enyo Developer Guide.\n*\n* @class moon.RadioItem\n* @extends moon.SelectableItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.RadioItem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.RadioItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: SelectableItem,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tSelectableItem.prototype.create.apply(this, arguments);\n\t\tthis.removeClass('moon-selectable-item');\n\t\tthis.addClass('moon-radio-item');\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control'),\n\tScroller = require('../../../enyo/lib/Scroller');\n\nvar\n\tFlyweightRepeater = require('../../../layout/lib/FlyweightRepeater');\n\nvar\n\tScrollStrategy = require('../ScrollStrategy'),\n\tTouchScrollStrategy = ScrollStrategy.Touch;\n\n/**\n* Fires when the currently selected value changes.\n*\n* @event moon.IntegerPicker#onChange\n* @type {Object}\n* @property {Number} value - The currently selected value.\n* @property {String} name - The name of the picker instance.\n* @public\n*/\n\n/**\n* {@link moon.IntegerPicker} is a control that displays a list of integers\n* ranging from [min]{@link moon.IntegerPicker#min} to [max]{@link moon.IntegerPicker#max},\n* soliciting a choice from the user.\n*\n* To initialize the picker to a particular integer, set the\n* [value]{@link moon.IntegerPicker#value} property to that integer:\n*\n* ```\n* {kind: 'moon.IntegerPicker', noneText: 'None Selected',\n*\tcontent: 'Choose a Number', min: 0, max: 25, value: 5}\n* ```\n*\n* The picker may be changed programmatically by modifying the `value`, `min`,\n* and `max` properties in the normal manner, by calling [set()]{@link enyo.Object#set}.\n*\n* @class moon.IntegerPicker\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.IntegerPicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.IntegerPicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-scroll-picker-container',\n\n\t/**\n\t* @private\n\t* @lends moon.IntegerPicker.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* When `true`, button is shown as disabled and does not generate tap events.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* When `true`, picker transitions animate left/right.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tanimate: true,\n\n\t\t/**\n\t\t* Current value of the picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tvalue: 0,\n\n\t\t/**\n\t\t* Minimum value of the picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tmin: 0,\n\n\t\t/**\n\t\t* Maximum value of the picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 9\n\t\t* @public\n\t\t*/\n\t\tmax: 9,\n\n\t\t/**\n\t\t* Amount by which to increment or decrement when moving picker between\n\t\t* [min]{@link moon.IntegerPicker#min} and [max]{@link moon.IntegerPicker#max}.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1\n\t\t* @public\n\t\t*/\n\t\tstep: 1,\n\n\t\t/**\n\t\t* If a number is specified, the picker value is displayed as this many\n\t\t* zero-filled digits.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tdigits: null,\n\n\t\t/**\n\t\t* When `true`, incrementing beyond [max]{@link moon.IntegerPicker#max} will wrap to\n\t\t* [min]{@link moon.IntegerPicker#min}, and decrementing beyond `min` will wrap to\n\t\t* `max`.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\twrap: false,\n\n\t\t/**\n\t\t* The minimum width of the picker. If not set, or set to a low value, the width\n\t\t* of the picker will fluctuate slightly depending on the rendered width of the value.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 50\n\t\t* @public\n\t\t*/\n\t\tminWidth: 50\n\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightUp:'next',\n\t\tonSpotlightDown:'previous',\n\t\tonSpotlightBlur:'spotlightBlur',\n\t\tonSpotlightScrollUp:'next',\n\t\tonSpotlightScrollDown:'previous',\n\t\tonmousewheel:'mousewheel'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\t/**\n\t\t* {@link moon.IntegerPicker#onChange}\n\t\t*/\n\t\tonChange: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* Cache scroll bounds so we don't have to run {@link enyo.Scroller#stop} every time we\n\t* need them.\n\t*\n\t* @private\n\t*/\n\tscrollBounds: {},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name:'nextOverlay', kind: Control, ondown:'downNext', onholdpulse:'next', classes:'moon-scroll-picker-overlay-container next', components:[\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-overlay next'},\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-taparea'}\n\t\t]},\n\t\t// FIXME: TranslateScrollStrategy doesn't work with the current design of this component so\n\t\t// we're forcing TouchScrollStrategy\n\t\t{kind: Scroller, strategyKind: TouchScrollStrategy, thumb:false, touch:true, useMouseWheel: false, classes: 'moon-scroll-picker', components:[\n\t\t\t{name: 'repeater', kind: FlyweightRepeater, classes: 'moon-scroll-picker-repeater', ondragstart: 'dragstart', onSetupItem: 'setupItem', noSelect: true, components: [\n\t\t\t\t{name: 'item', kind: Control, classes: 'moon-scroll-picker-item'}\n\t\t\t]},\n\t\t\t{name: 'buffer', kind: Control, classes: 'moon-scroll-picker-buffer'}\n\t\t]},\n\t\t{name:'previousOverlay', kind: Control, ondown:'downPrevious', onholdpulse:'previous', classes:'moon-scroll-picker-overlay-container previous', components:[\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-overlay previous'},\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-taparea'}\n\t\t]}\n\t],\n\n\t/**\n\t* Parameter that determines scroll math simulation speed.\n\t*\n\t* @private\n\t*/\n\tscrollFrame: 3,\n\n\t/**\n\t* Indicates direction of change from user. Necessary to support proper wrapping\n\t* when `range == 2`.\n\t*\n\t* @private\n\t*/\n\tdirection: 0,\n\n\t/**\n\t* Range of possible values `max - min`.\n\t*\n\t* @private\n\t*/\n\trange: 0,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.verifyValue();\n\t\tthis.updateOverlays();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function () {\n\t\tControl.prototype.rendered.apply(this, arguments);\n\t\tthis.width = null;\n\t\tthis.rangeChanged();\n\t\tthis.minWidthChanged();\n\t\tthis.scrollToValue();\n\t\tthis.$.scroller.getStrategy().setFixedTime(false);\n\t\tthis.$.scroller.getStrategy().setFrame(this.scrollFrame);\n\t},\n\n\t/**\n\t* Snap to current value on a reflow.\n\t*\n\t* @private\n\t*/\n\treflow: function () {\n\t\tControl.prototype.reflow.apply(this, arguments);\n\t\tthis.scrollToValue();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetVerifiedValue: function () {\n\t\treturn this.value >= this.min && this.value <= this.max ? this.value : this.min;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverifyValue: function () {\n\t\tvar animate = this.animate;\n\t\tthis.animate = false;\n\t\tthis.set('value', this.getVerifiedValue());\n\t\tthis.animate = animate;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupItem: function (inSender, inEvent) {\n\t\tvar index = inEvent.index;\n\t\tvar content = this.labelForValue(this.indexToValue(index % this.range));\n\t\tthis.$.item.setContent(content);\n\t},\n\n\t/**\n\t* Formats passed-in value for display. If [digits]{@link moon.IntegerPicker#digits}\n\t* is **truthy**, zeros will be prepended to reach that number of digits.\n\t*\n\t* @param  {Number} value - Value to format.\n\t* @return {String}       - Formatted value.\n\t* @private\n\t*/\n\tlabelForValue: function(value) {\n\t\tif (this.digits) {\n\t\t\tvalue = (value < 0? '-' : '') + ('00000000000000000000' + Math.abs(value)).slice(-this.digits);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupBuffer: function() {\n\t\tvar bmin = ('' + this.min).length,\n\t\t\tbmax = Math.max(bmin, ('' + this.max).length),\n\t\t\tdigits = this.digits + (this.min < 0 ? 1 : 0),\n\t\t\tbuffer = Math.max(bmax, digits),\n\t\t\tcontent = '00000000000000000000'.substring(0, buffer);\n\t\tthis.$.buffer.setContent(content);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdigitsChanged: function () {\n\t\tthis.setupBuffer();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trangeChanged: function () {\n\t\tthis.verifyValue();\n\t\tthis.range = this.valueToIndex(this.max) - this.valueToIndex(this.min) + 1;\n\t\tthis.setupBuffer();\n\t},\n\n\t/**\n\t* Fail-safe design.\n\t* If out-of-boundary value is assigned, adjust boundary.\n\t*\n\t* @private\n\t*/\n\tvalueChanged: function (old) {\n\t\tthis.value -= (this.value-this.min)%this.step;\n\t\tif (this.value < this.min) {\n\t\t\tthis.setMin(this.value);\n\t\t} else if (this.value > this.max) {\n\t\t\tthis.setMax(this.value);\n\t\t}\n\n\t\tthis.scrollToValue(old);\n\t\tthis.updateOverlays();\n\t\tthis.fireChangeEvent();\n\t},\n\n\tstepChanged: function (old) {\n\t\tvar step = parseInt(this.step, 10);\n\t\tthis.step = isNaN(step)? 1 : step;\n\t\tthis.valueChanged(this.value);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.addRemoveClass('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\twrapChanged: function () {\n\t\tthis.updateOverlays();\n\t},\n\n\t/**\n\t* Prevent scroller dragging\n\t*\n\t* @private\n\t*/\n\tdragstart: function (inSender, inEvent) {\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tminChanged: function () {\n\t\tthis.rangeChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxChanged: function () {\n\t\tthis.rangeChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprevious: function (inSender, inEvent) {\n\t\tif(this.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.direction = -1;\n\n\t\tif (this.value - this.step >= this.min) {\n\t\t\tthis.setValue(this.value - this.step);\n\t\t} else if (this.wrap) {\n\t\t\tthis.setValue(this.max);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tthis.$.previousOverlay.addClass('selected');\n\t\tif (inEvent.originator != this.$.upArrow) {\n\t\t\tthis.startJob('hideBottomOverlay', 'hideBottomOverlay', 350);\n\t\t}\n\n\t\tthis.direction = 0;\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnext: function (inSender, inEvent) {\n\t\tif(this.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.direction = 1;\n\n\t\tif (this.value + this.step <= this.max) {\n\t\t\tthis.setValue(this.value + this.step);\n\t\t} else if (this.wrap) {\n\t\t\tthis.setValue(this.min);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tthis.$.nextOverlay.addClass('selected');\n\t\tif (inEvent.originator != this.$.downArrow) {\n\t\t\tthis.startJob('hideTopOverlay', 'hideTopOverlay', 350);\n\t\t}\n\n\t\tthis.direction = 0;\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdownPrevious: function (inSender, inEvent) {\n\t\tinEvent.configureHoldPulse({endHold: 'onLeave', delay: 300});\n\t\tthis.previous(inSender, inEvent);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdownNext: function (inSender, inEvent) {\n\t\tinEvent.configureHoldPulse({endHold: 'onLeave', delay: 300});\n\t\tthis.next(inSender, inEvent);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateOverlays: function () {\n\t\tthis.$.previousOverlay.applyStyle('visibility', (this.wrap || this.value - this.step >= this.min) ? 'visible' : 'hidden');\n\t\tthis.$.nextOverlay.applyStyle('visibility', (this.wrap || this.value + this.step <= this.max) ? 'visible' : 'hidden');\n\t},\n\n\t/**\n\t* Renders the repeater.\n\t*\n\t* @param {Number} index - Index of row.\n\t* @param {Number} count - Number of rows to render.\n\t* @private\n\t*/\n\tupdateRepeater: function(index, count) {\n\t\tthis.$.repeater.set('rowOffset', index);\n\t\tthis.$.repeater.set('count', count || 1);\n\t\tthis.$.repeater.render();\n\t},\n\n\t/**\n\t* Scrolls to the node at `index` if it exists.\n\t*\n\t* @param  {Number} index    - Index of row.\n\t* @param  {Boolean} animate - If `true`, scroll is animated.\n\t* @private\n\t*/\n\tscrollToIndex: function(index, animate) {\n\t\tvar node = this.$.repeater.fetchRowNode(index);\n\t\tif (node) {\n\t\t\tif(animate) {\n\t\t\t\tthis.$.scroller.scrollTo(node.offsetLeft, node.offsetTop);\n\t\t\t} else {\n\t\t\t\tthis.$.scroller.setScrollTop(node.offsetTop);\n\t\t\t\tthis.$.scroller.setScrollLeft(node.offsetLeft);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Converts `value` to its index in the repeater.\n\t*\n\t* @param  {Number} value - Integer value.\n\t* @return {Number}       - Repeater index.\n\t* @private\n\t*/\n\tvalueToIndex: function(value) {\n\t\treturn Math.floor((value - this.min) / this.step);\n\t},\n\n\t/**\n\t* Converts a repeater `index` to its value.\n\t*\n\t* @param  {Number} index - Repeater index\n\t* @return {Number}       - Integer value\n\t* @private\n\t*/\n\tindexToValue: function(index) {\n\t\treturn index * this.step + this.min;\n\t},\n\n\t/**\n\t* Sets up the repeater to render the rows between `old` and\n\t* [value]{@link moon.IntegerPicker#value} and scrolls to reveal the current value. If `old`\n\t* is specified, the scroll will be animated. If [wrap]{@link moon.IntegerPicker#wrap} is\n\t* `true`, the scroll will travel the shortest distance to `value`, which may result in\n\t* wrapping.\n\t*\n\t* @param  {Number} [old] - Prior value from which to scroll.\n\t* @private\n\t*/\n\tscrollToValue: function(old) {\n\t\tvar newIndex = this.valueToIndex(this.value);\n\n\t\tif(this.animate && old !== undefined) {\n\t\t\tvar oldIndex = this.valueToIndex(old);\n\t\t\tvar delta = newIndex - oldIndex;\n\n\t\t\tif(this.wrap && Math.abs(delta) >= this.range/2) {\n\n\t\t\t\t// when range is 2, we need special logic so scrolling matches the user's action\n\t\t\t\t// (e.g. tapping the up arrow always scrolls up). If direction (set in next()\n\t\t\t\t// and previous()) === delta (which will always be +/- 1), the natural rendering\n\t\t\t\t// is correct even though we're wrapping around the boundary so don't adjust.\n\t\t\t\tif(!(this.range === 2 && this.direction !== delta)) {\n\t\t\t\t\t// if wrapping and wrapping is a shorter distance, adjust the lesser index by the\n\t\t\t\t\t// range so the distance is the shortest possible\n\t\t\t\t\tif(newIndex > oldIndex) {\n\t\t\t\t\t\toldIndex += this.range;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewIndex += this.range;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// rowOffset should be the lesser of the indices and count is the difference + 1\n\t\t\tvar index = Math.min(oldIndex, newIndex);\n\t\t\tvar count = Math.abs(newIndex - oldIndex) + 1;\n\t\t\tthis.updateRepeater(index, count);\n\n\t\t\tthis.scrollToIndex(oldIndex, false);\n\t\t\tthis.startJob('valueChanged-Scroller', this.bindSafely('scrollToIndex', newIndex, true), 16);\n\t\t} else {\n\t\t\t// if old isn't specified, setup the repeater with only this.value and jump to it\n\t\t\tthis.updateRepeater(newIndex);\n\t\t\tthis.scrollToIndex(newIndex, false);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thideTopOverlay: function () {\n\t\tthis.$.nextOverlay.removeClass('selected');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thideBottomOverlay: function () {\n\t\tthis.$.previousOverlay.removeClass('selected');\n\t},\n\n\t/**\n\t* @fires moon.IntegerPicker#onChange\n\t* @private\n\t*/\n\tfireChangeEvent: function () {\n\t\tthis.doChange({\n\t\t\tname: this.name,\n\t\t\tvalue: this.value,\n\t\t\tcontent: this.labelForValue(this.value)\n\t\t});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresetOverlay: function () {\n\t\tthis.hideTopOverlay();\n\t\tthis.hideBottomOverlay();\n\t},\n\n\t/**\n\t* @fires moon.Scroller#onRequestScrollIntoView\n\t* @private\n\t*/\n\tspotlightFocus: function () {\n\t\tthis.bubble('onRequestScrollIntoView');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightBlur: function () {\n\t\tthis.hideTopOverlay();\n\t\tthis.hideBottomOverlay();\n\t},\n\n\t/**\n\t* Cache scroll bounds in [scrollBounds]{@link moon.IntegerPicker#scrollBounds} so we\n\t* don't have to call {@link enyo.Scroller#stop} to retrieve them later.\n\t*\n\t* @private\n\t*/\n\tupdateScrollBounds: function () {\n\t\tthis.scrollBounds = this.$.scroller.getStrategy()._getScrollBounds();\n\t},\n\n\t/**\n\t* Silently scrolls to the `inValue` y-position without animating.\n\t*\n\t* @private\n\t*/\n\tsetScrollTop: function (inValue) {\n\t\tthis.$.scroller.setScrollTop(inValue);\n\t},\n\n\t/**\n\t* Ensures scroll position is in bounds.\n\t*\n\t* @private\n\t*/\n\tstabilize: function () {\n\t\tthis.$.scroller.stabilize();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmousewheel: function (inSender, inEvent) {\n\t\t// Make sure scrollers that container integer pickers don't scroll\n\t\tinEvent.preventDefault();\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tminWidthChanged: function() {\n\t\tthis.applyStyle('min-width', dom.unit(this.minWidth));\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tshowingChangedHandler: function () {\n\t\tControl.prototype.showingChangedHandler.apply(this, arguments);\n\t\tif (this.showing) {\n\t\t\tthis.scrollToValue();\n\t\t}\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tplatform = require('../../../enyo/lib/platform'),\n\tScroller = require('../../../enyo/lib/Scroller');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tScrollStrategy = require('../ScrollStrategy');\n\n/**\n* On touch platforms, revert to using Enyo scroller, which picks an appropriate\n* scroll strategy for the given platform.\n*\n* @private\n*/\nif (platform.touch) {\n\tmodule.exports = Scroller;\n} else {\n\t/**\n\t* Fires when a control explicitly requests to be scrolled into view. Handled by the \n\t* [scroll strategy]{@link enyo.Scroller#strategyKind}.\n\t*\n\t* @event enyo.Scroller#onRequestScrollIntoView\n\t* @type {Object}\n\t* @property {Boolean} scrollInPointerMode - Whether to allow scrolling in pointer mode.\n\t* @property {Boolean} scrollFullPage - If defined, overrides the scroller's\n\t*\t[scrollFullPage]{@link moon.Scroller#scrollFullPage} property.\n\t* @public\n\t*/\n\n\t/**\n\t* {@link moon.Scroller} extends {@link enyo.Scroller}, adding support for 5-way focus\n\t* (Spotlight) and pagination buttons.\n\t*\n\t* It responds when controls explicitly request to be scrolled into view by emitting the\n\t* [onRequestScrollIntoView]{@link enyo.Scroller#onRequestScrollIntoView} event. This\n\t* typically happens when a control handles an `onSpotlightFocused` event, ensuring that\n\t* 5-way ({@glossary Spotlight}) focused controls remain in view.\n\t*\n\t* For more information, see the documentation on\n\t* [Scrollers]{@linkplain $dev-guide/building-apps/layout/scrollers.html} in the\n\t* Enyo Developer Guide.\n\t*\n\t* @class moon.Scroller\n\t* @extends enyo.Scroller\n\t* @ui\n\t* @public\n\t*/\n\tmodule.exports = kind(\n\t\t/** @lends moon.Scroller.prototype */ {\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tname:      'moon.Scroller',\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tkind:      Scroller,\n\n\t\t/**\n\t\t* @private\n\t\t* @lends moon.Scroller.prototype\n\t\t*/\n\t\tpublished: {\n\n\t\t\t/**\n\t\t\t* If `true`, when scrolling to focused child controls, the scroller will\n\t\t\t* scroll as far as possible, until its edge meets the next item's edge.\n\t\t\t*\n\t\t\t* @type {Boolean}\n\t\t\t* @default false\n\t\t\t* @public\n\t\t\t*/\n\t\t\tscrollFullPage: false,\n\n\t\t\t/**\n\t\t\t* If `true`, paging controls are focusable (in 5-way mode).  Normally, this\n\t\t\t* is not required, since the scroller will automatically scroll to ensure\n\t\t\t* most focusable items are in view.  It is intended to be used when the\n\t\t\t* scroller contents have no spotlightable controls, such as the case of a\n\t\t\t* scroller with a long body of text.\n\t\t\t*\n\t\t\t* @type {Boolean}\n\t\t\t* @default false\n\t\t\t* @public\n\t\t\t*/\n\t\t\tspotlightPagingControls: false,\n\n\t\t\t/**\n\t\t\t* If 'true', paging controls are hidden when content fit in scroller\n\t\t\t* even when spotlightPagingControls is true.\n\t\t\t*\n\t\t\t* @type {Boolean}\n\t\t\t* @default false\n\t\t\t* @public\n\t\t\t*/\n\t\t\thideScrollColumnsWhenFit: false,\n\n\t\t\t/**\n\t\t\t* Relative parameter used to determine scroll speed.\n\t\t\t*\n\t\t\t* @type {Number}\n\t\t\t* @default 75\n\t\t\t* @public\n\t\t\t*/\n\t\t\tscrollInterval: 75,\n\n\t\t\t/**\n\t\t\t* The ratio of mousewheel 'delta' units to pixels scrolled. Increase this\n\t\t\t* value to increase the distance scrolled by the scroll wheel. Note that\n\t\t\t* mice/trackpads do not emit the same 'delta' units per 'notch' or flick of\n\t\t\t* the scroll wheel/trackpad; that can vary based on intensity and momentum.\n\t\t\t*\n\t\t\t*\n\t\t\t* @type {Number}\n\t\t\t* @default 2\n\t\t\t* @public\n\t\t\t*/\n\t\t\tscrollWheelMultiplier: 2,\n\n\t\t\t/**\n\t\t\t* The ratio of the maximum distance scrolled by each scroll wheel event to\n\t\t\t* the height/width of the viewport. Setting a value larger than `1` is not\n\t\t\t* advised, since a single scroll event could move more than one viewport's\n\t\t\t* worth of content (depending on the delta received), resulting in skipped\n\t\t\t* content.\n\t\t\t*\n\t\t\t* @type {Number}\n\t\t\t* @default 0.2\n\t\t\t* @public\n\t\t\t*/\n\t\t\tscrollWheelPageMultiplier: 0.2,\n\n\t\t\t/**\n\t\t\t* The ratio of the distance scrolled per tap of the paging button to the\n\t\t\t* height/width of the viewport. Setting a value larger than `1` is not\n\t\t\t* advised, since a paging button tap will move more than one viewport's\n\t\t\t* worth of content, resulting in skipped content.\n\t\t\t*\n\t\t\t*\n\t\t\t* @type {Number}\n\t\t\t* @default 0.8\n\t\t\t* @public\n\t\t\t*/\n\t\t\tpaginationPageMultiplier: 0.8,\n\n\t\t\t/**\n\t\t\t* The ratio of continuous-scrolling delta units to pixels scrolled. Increase\n\t\t\t* this value to increase the distance scrolled when the pagination buttons\n\t\t\t* are held.\n\t\t\t*\n\t\t\t* @type {Number}\n\t\t\t* @default 8\n\t\t\t* @public\n\t\t\t*/\n\t\t\tpaginationScrollMultiplier: 8,\n\n\t\t\t/**\n\t\t\t* When `true`, the scroll wheel moves spotlight focus up/down through the\n\t\t\t* scroller when in 5-way mode. (In pointer mode, the scroll wheel always\n\t\t\t* scrolls the viewport without modifying focus position.) When `false`, the\n\t\t\t* scroll wheel works the same in 5-way mode as in pointer mode, where the\n\t\t\t* wheel moves the position of the scroller viewport.\n\t\t\t*\n\t\t\t* @type {Boolean}\n\t\t\t* @default true\n\t\t\t* @public\n\t\t\t*/\n\t\t\tscrollWheelMovesFocus: true\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\thandlers: {\n\t\t\tonSpotlightScrollUp:'spotlightWheel',\n\t\t\tonSpotlightScrollDown:'spotlightWheel'\n\t\t},\n\n\t\t/**\n\t\t* If `true`, scroll events are not allowed to propagate.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tpreventScrollPropagation: false,\n\n\t\t/**\n\t\t* If `true`, measure the size of the scroll columns on initial render.\n\t\t* See {@link moon.ScrollStrategy#_measureScrollColumns} for details.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tmeasureScrollColumns: false,\n\n\t\t/**\n\t\t* Default to {@link moon.ScrollStrategy}\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tstrategyKind: ScrollStrategy,\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tspotlight: 'container',\n\n\t\t/**\n\t\t* Scrolls until the specified [control]{@link enyo.Control} is in view. If\n\t\t* `scrollFullPage` is set, scrolls until the edge of `control` is aligned with\n\t\t* the edge of the visible scroll area. Optional third parameter indicates\n\t\t* whether or not the scroll should be animated. If `setLastFocusedChild` is\n\t\t* `true`, scroller will set up `control` to be the spotted child when the\n\t\t* scroller is spotted.\n\t\t*\n\t\t* @param {Object} control - The [control]{@link enyo.Control} to scroll into view.\n\t\t* @param {Boolean} [scrollFullPage] - If `true`, scrolls until the edge of `control`\n\t\t* is aligned with the edge of the visible scroll area. If `undefined`, the value in\n\t\t*\t[scrollFullPage]{@link moon.Scroller#scrollFullPage} is used.\n\t\t* @param {Boolean} [animate=true] - If `true`, animates the scroll.\n\t\t* @param {Boolean} [setLastFocusedChild=false] - If `true`, scroller will set up\n\t\t* `control` to be the spotted child when the scroller is spotted.\n\t\t* @public\n\t\t*/\n\t\tscrollToControl: function (control, scrollFullPage, animate, setLastFocusedChild) {\n\t\t\tif (setLastFocusedChild) {\n\t\t\t\tthis.setLastFocusedChild(control);\n\t\t\t}\n\t\t\tthis.$.strategy.animateToControl(control, scrollFullPage, animate);\n\t\t},\n\n\t\t/**\n\t\t* Scrolls to the specified `x` and `y` coordinates. The optional third parameter\n\t\t* may be set to `false` to disable animation for the scroll.\n\t\t*\n\t\t* @param {Number} x - Horizontal position in pixels\n\t\t* @param {Number} y - Vertical position in pixels\n\t\t* @param {Boolean} [animate=true] - If `true`, animates the scroll.\n\t\t* @public\n\t\t*/\n\t\tscrollTo: function (x, y, animate) {\n\t\t\tthis.$.strategy.scrollTo(x, y, animate);\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tbindings: [\n\t\t\t{from: '.scrollInterval',\t\t\t\tto:'.$.strategy.interval'},\n\t\t\t{from: '.scrollWheelMultiplier',\t\tto:'.$.strategy.scrollWheelMultiplier'},\n\t\t\t{from: '.scrollWheelPageMultiplier',\tto:'.$.strategy.scrollWheelPageMultiplier'},\n\t\t\t{from: '.paginationPageMultiplier',\t\tto:'.$.strategy.paginationPageMultiplier'},\n\t\t\t{from: '.paginationScrollMultiplier',\tto:'.$.strategy.paginationScrollMultiplier'},\n\t\t\t{from: '.hideScrollColumnsWhenFit',\t\tto:'.$.strategy.hideScrollColumnsWhenFit'}\n\t\t],\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tcreate: function () {\n\t\t\tScroller.prototype.create.apply(this, arguments);\n\t\t\tthis.spotlightPagingControlsChanged();\n\t\t\tthis.scrollWheelMovesFocusChanged();\n\n\t\t\tthis.$.strategy.measureScrollColumns = this.measureScrollColumns;\n\n\t\t\t// workaround because the bootstrapping code isn't attached to constructors that have\n\t\t\t// finished setup before the hook is declared\n\t\t\tif(Spotlight && this.spotlight === 'container') {\n\t\t\t\tSpotlight.Container.initContainer(this);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tsetLastFocusedChild: function(control) {\n\t\t\tSpotlight.Container.setLastFocusedChild(this, control);\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tspotlightPagingControlsChanged: function () {\n\t\t\tthis.$.strategy.set('spotlightPagingControls', this.spotlightPagingControls);\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tscrollWheelMovesFocusChanged: function () {\n\t\t\tif (!this.scrollWheelMovesFocus) {\n\t\t\t\tthis.setUseMouseWheel(true);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tspotlightWheel: function (inSender, inEvent) {\n\t\t\tif (this.scrollWheelMovesFocus) {\n\t\t\t\tif (!Spotlight.getPointerMode()) {\n\t\t\t\t\tvar curr = Spotlight.getCurrent();\n\t\t\t\t\tif (curr && curr.isDescendantOf(this)) {\n\t\t\t\t\t\tvar dir = inEvent.type == 'onSpotlightScrollUp' ? 'onSpotlightUp' : 'onSpotlightDown';\n\t\t\t\t\t\tthis._spotlightModal = this.spotlightModal;\n\t\t\t\t\t\tthis.spotlightModal = true;\t// Trap focus inside scroller while wheeling\n\t\t\t\t\t\tSpotlight.Util.dispatchEvent(dir, {type: dir}, curr);\n\t\t\t\t\t\tthis.spotlightModal = this._spotlightModal;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tpreviewDomEvent: function (inEvent) {\n\t\t\tif (this.scrollWheelMovesFocus) {\n\t\t\t\tif (inEvent.type == 'mousewheel') {\n\t\t\t\t\tthis.setUseMouseWheel(Spotlight.getPointerMode());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tChannelInfo = require('../../../moonstone/lib/ChannelInfo'),\n\tClock = require('../../../moonstone/lib/Clock'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tVideoFullscreenToggleButton = require('../../../moonstone/lib/VideoFullscreenToggleButton'),\n\tVideoInfoBackground = require('../../../moonstone/lib/VideoInfoBackground'),\n\tVideoInfoHeader = require('../../../moonstone/lib/VideoInfoHeader'),\n\tVideoPlayer = require('../../../moonstone/lib/VideoPlayer');\n\nmodule.exports = kind({\n\tname: 'moon.sample.VideoPlayerInlineSample',\n\tclasses: 'moon enyo-fit enyo-unselectable moon-video-player-sample',\n\tfit: true,\n\tcomponents: [\n\t\t{\n\t\t\tname: 'player',\n\t\t\tkind: VideoPlayer,\n\t\t\tsrc: 'http://media.w3.org/2010/05/bunny/movie.mp4',\n\t\t\tposter: 'assets/video-poster.png',\n\t\t\tinline: true,\n\t\t\tclasses: 'moon-8h',\n\t\t\tautoplay: true,\n\t\t\tinfoComponents: [\n\t\t\t\t{kind: VideoInfoBackground, orient: 'left', fit: true, components: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkind: ChannelInfo,\n\t\t\t\t\t\tchannelNo: '13',\n\t\t\t\t\t\tchannelName: 'AMC',\n\t\t\t\t\t\tclasses: 'moon-2h',\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{content: '3D'},\n\t\t\t\t\t\t\t{content: 'Live'},\n\t\t\t\t\t\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon'}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkind: VideoInfoHeader,\n\t\t\t\t\t\ttitle: 'Downton Abbey',\n\t\t\t\t\t\tsubTitle: 'Mon June 21, 7:00 - 8:00pm',\n\t\t\t\t\t\tsubSubTitle: 'R - TV 14, V, L, SC',\n\t\t\t\t\t\tdescription: 'The series, set in the Youkshire country estate of Downton Abbey, depicts the lives of the aristocratic Crawley famiry and'\n\t\t\t\t\t}\n\t\t\t\t]},\n\t\t\t\t{kind: VideoInfoBackground, orient: 'right', components: [\n\t\t\t\t\t{kind: Clock}\n\t\t\t\t]}\n\t\t\t],\n\t\t\tcomponents: [\n\t\t\t\t{kind: VideoFullscreenToggleButton},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'}\n\t\t\t]\n\t\t}\n\t]\n});\n","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdispatcher = require('../../../enyo/lib/dispatcher'),\n\tdom = require('../../../enyo/lib/dom'),\n\tutil = require('../../../enyo/lib/utils'),\n\tControl = require('../../../enyo/lib/Control'),\n\tImg = require('../../../enyo/lib/Image')\n\tSignals = require('../../../enyo/lib/Signals');\n\nvar\n\tPanels = require('../../../layout/lib/Panels');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\toptions = require('../options'),\n\tBreadcrumbArranger = require('../BreadcrumbArranger'),\n\tPanel = require('../Panel'),\n\tStyleAnimator = require('../StyleAnimator'),\n\tMoonHistory = require('../History'),\n\tHistorySupport = MoonHistory.HistorySupport;\n\n/**\n* `moon.PanelsHandle` is a helper kind for {@link moon.Panels} which implements a spottable\n*  handle that the user can interact with to hide and show the `moon.Panels` control.\n*\n* @class moon.PanelsHandle\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar PanelsHandle = kind(\n\t/** @lends moon.PanelsHandle.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.PanelsHandle',\n\n\t/*\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/*\n\t* @private\n\t*/\n\tclasses: 'moon-panels-handle',\n\n\t/*\n\t* We override getAbsoluteShowing so that the handle's spottability is not dependent on the\n\t* showing state of its parent, the {@link moon.Panels} control.\n\t*\n\t* @private\n\t*/\n\tgetAbsoluteShowing: function (ignoreBounds) {\n\t\tvar bounds = !ignoreBounds ? this.getBounds() : null;\n\n\t\tif (!this.generated || this.destroyed || !this.showing || (bounds &&\n\t\t\tbounds.height === 0 && bounds.width === 0)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n});\n\n/**\n* {@link moon.Panels} extends {@link enyo.Panels}, adding support for 5-way focus\n* (Spotlight) and pre-configured Moonstone panels design patterns. By default,\n* controls added to a `moon.Panels` are instances of {@link moon.Panel}.\n*\n* `moon.Panels` introduces the concept of patterns for panel display. Set\n* [pattern]{@link moon.Panels#pattern} to `'activity'` or `'alwaysViewing'`\n* to use one of two patterns designed for apps on Smart TV systems.\n*\n* @class moon.Panels\n* @extends enyo.Panels\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.Panels.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.Panels',\n\n\t/**\n\t* @private\n\t*/\n\tkind : Panels,\n\n\t/**\n\t* @private\n\t*/\n\tmixins : [HistorySupport],\n\n\t/**\n\t* @private\n\t*/\n\tclasses : 'moon-panels',\n\n\t/**\n\t* @private\n\t*/\n\tspotlightDecorate : false,\n\n\t/**\n\t* @private\n\t* @lends moon.Panels.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* A convenience property for configuring {@link moon.Panels} according to a\n\t\t* particular design pattern.  Valid values are `'none'` (default), `'activity'`,\n\t\t* and `'alwaysviewing'`. Note that this property may only be set at creation\n\t\t* time, and should not be changed at runtime.\n\t\t*\n\t\t* The `'alwaysviewing'` pattern uses the {@link moon.BreadcrumbArranger} with\n\t\t* semi-transparent panels (depending on the color theme) over the right half\n\t\t* of the screen, allowing multiple breadcrumbs to accumulate on the left\n\t\t* half of the screen.\n\t\t*\n\t\t* The `'activity'` pattern  uses the `moon.BreadcrumbArranger` with opaque\n\t\t* panels over the full screen and only one breadcrumb showing onscreen.\n\t\t*\n\t\t* The `'none'` pattern should be used when selecting other arrangers, such as\n\t\t* {@link enyo.CarouselArranger} or {@link enyo.CardArranger}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'none'\n\t\t* @public\n\t\t*/\n\t\tpattern: 'none',\n\n\t\t/**\n\t\t* When [useHandle]{@link moon.Panels#useHandle} is used, it is automatically\n\t\t* hidden after this amount of time (in milliseconds).\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 4000\n\t\t* @public\n\t\t*/\n\t\tautoHideTimeout: 4000,\n\n\t\t/**\n\t\t* When `true`, a handle is created to allow the user to control the showing\n\t\t* state of the panels using animation. When `false`, no handle is created and\n\t\t* panels may only be hidden/shown programmatically with no animation.\n\t\t* When `'auto'` (the default), `useHandle` is set to `true` if the\n\t\t* [pattern]{@link moon.Panels#pattern} is `'alwaysviewing'` and to `false` if\n\t\t* the `pattern` is `'activity'`. Note that this property may only be set at\n\t\t* creation time, and should not be changed at runtime. This property\n\t\t* only has an effect when using the `'activity'` or `'alwaysviewing'` pattern.\n\t\t*\n\t\t* @type {String|Boolean}\n\t\t* @default 'auto'\n\t\t* @public\n\t\t*/\n\t\tuseHandle: 'auto',\n\n\t\t/**\n\t\t* Dynamically controls whether the handle is showing.\n\t\t* When `true` (the default), the handle is shown and panels may be shown by\n\t\t* activating the handle and hidden by re-activating the handle or by tapping\n\t\t* outside the panel area. When `false`, the handle is hidden and panels may\n\t\t* only be shown or hidden programmatically using the\n\t\t* [showing]{@link enyo.Control#showing} property or the\n\t\t* [show()]{@link enyo.Control#show}/[hide()]{@link enyo.Control#hide} API.\n\t\t* This property only has an effect when [useHandle]{@link moon.Panels#useHandle}\n\t\t* is `true` (or `'auto'`, resulting in `true`).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\thandleShowing: true,\n\n\t\t/**\n\t\t* When `true`, panels are automatically popped when the user moves back.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tpopOnBack: false,\n\n\t\t/**\n\t\t* The source of the image used for branding in the lower left region of the Panels\n\t\t* (only applies to Panels using the `'activity'` pattern).\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tbrandingSrc: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnarrowFit: false,\n\n\t/**\n\t* Hierachical stack.\n\t* When we call setIndex or pushPanel, new object is pushed to this stack.\n\t* When we call popPanel or back key handler, lasted object is removed.\n\t* To save memory, it is initiated when this.allowBackKey is true.\n\t*\n\t* @type {Array}\n\t* @default null\n\t* @private\n\t*/\n\tpanelStack: null,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tontap:\t\t\t\t\t\t'tapped',\n\n\t\tonSpotlightRight:\t\t\t'spotlightRight',\n\t\tonSpotlightLeft:\t\t\t'spotlightLeft',\n\t\tonSpotlightUp:\t\t\t\t'spotlightUp',\n\t\tonSpotlightDown:\t\t\t'spotlightDown',\n\t\tonSpotlightFocus:\t\t\t'spotlightFocus',\n\t\tonSpotlightContainerLeave:\t'onSpotlightPanelLeave',\n\t\tonSpotlightContainerEnter:\t'onSpotlightPanelEnter',\n\n\t\tonPreTransitionComplete:\t'preTransitionComplete',\n\t\tonPostTransitionComplete:\t'postTransitionComplete'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleTools: [\n\t\t{name: 'backgroundScrim', kind: Control, classes: 'moon-panels-background-scrim'},\n\t\t{name: 'clientWrapper', kind: Control, classes: 'enyo-fill enyo-arranger moon-panels-client', components: [\n\t\t\t{name: 'scrim', kind: Control, classes: 'moon-panels-panel-scrim', components: [\n\t\t\t\t{name: 'branding', kind: Img, sizing: 'contain', classes: 'moon-panels-branding'}\n\t\t\t]},\n\t\t\t{name: 'client', kind: Control, tag: null}\n\t\t]},\n\t\t{name: 'showHideHandle', kind: PanelsHandle, classes: 'hidden', canGenerate: false, ontap: 'handleTap', onSpotlightLeft: 'handleSpotLeft', onSpotlightRight: 'handleSpotRight', onSpotlightFocused: 'handleFocused', onSpotlightBlur: 'handleBlur'},\n\t\t{name: 'showHideAnimator', kind: StyleAnimator, onComplete: 'showHideAnimationComplete'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: Panel,\n\n\t/**\n\t* When `false`, dragging is disabled.\n\t*\n\t* @private\n\t*/\n\tdraggable: false,\n\n\t/**\n\t* Value may be between `0` and `1`, inclusive.\n\t*\n\t* @private\n\t*/\n\tpanelCoverRatio: 1,\n\n\t/**\n\t* Will be `true` for 'activity' pattern, and `false` for 'alwaysviewing' pattern.\n\t*\n\t* @private\n\t*/\n\tshowFirstBreadcrumb: false,\n\n\t/**\n\t* Default to using `moon.BreadcrumbArranger`.\n\t*\n\t* @private\n\t*/\n\tarrangerKind: BreadcrumbArranger,\n\n\t/**\n\t* Index of panel set in the middle of transition.\n\t*\n\t* @private\n\t*/\n\tqueuedIndex: null,\n\n\t/**\n\t* Flag for initial transition.\n\t*\n\t* @private\n\t*/\n\t_initialTransition: true,\n\n\t/**\n\t* Flag for blocking consecutive push/pop/replace panel actions to protect\n\t* create/render/destroy time.\n\t*\n\t* @private\n\t*/\n\tisModifyingPanels: false,\n\n\t/**\n\t* Flag to indicate if the Panels are currently transitioning to a new index\n\t*\n\t* @private\n\t*/\n\ttransitioning: false,\n\n\t/**\n\t* Checks the state of panel transitions.\n\t*\n\t* @return {Boolean} `true` if a transition between panels is currently in progress;\n\t* otherwise, `false`.\n\t* @public\n\t*/\n\tinTransition: function () {\n\t\treturn this.transitioning;\n\t},\n\n\t/**\n\t* Creates a panel on top of the stack and increments index to select that component.\n\t*\n\t* @param {Object} info - The declarative {@glossary kind} definition.\n\t* @param {Object} moreInfo - Additional properties to be applied (defaults).\n\t* @return {Object} The instance of the panel that was created on top of the stack.\n\t* @public\n\t*/\n\tpushPanel: function (info, moreInfo) { // added\n\t\tif (this.transitioning || this.isModifyingPanels) {return null;}\n\t\tthis.isModifyingPanels = true;\n\t\tvar lastIndex = this.getPanels().length - 1,\n\t\t\toPanel = this.createComponent(info, moreInfo);\n\t\toPanel.render();\n\t\tthis.reflow();\n\t\toPanel.show();\n\t\toPanel.resize();\n\t\tthis.setIndex(lastIndex+1);\n\t\tthis.isModifyingPanels = false;\n\t\treturn oPanel;\n\t},\n\n\t/**\n\t* Options for the [moon.Panels.pushPanels()]{@link moon.Panels.pushPanels} method.\n\t*\n\t* @typedef {Object} moon.Panels.pushPanels~options\n\t* @property {Number} targetIndex - The panel index number to immediately switch to. Leaving\n\t*\tthis blank or not setting it will perform the default action, which transitions to the\n\t*\tfirst of the new panels. Setting this to a negative and other \"out of bounds\" values\n\t*\twork in conjunction with the `wrap: true` property. Negative values count backward from\n\t*\tthe end, while indices greater than the total Panels' panel length wrap around and start\n\t*\tcounting again from the beginning.\n\t* @property {Boolean} transition - Whether to transition or jump directly to the next panel.\n\t* @public\n\t*/\n\n\t/**\n\t* Creates multiple panels on top of the stack and updates index to select the last one\n\t* created. Supports an optional `options` object as the third parameter.\n\t*\n\t* @param {Object[]} info - The declarative {@glossary kind} definitions.\n\t* @param {Object} commonInfo - Additional properties to be applied (defaults).\n\t* @param {Object} options - Additional options for pushPanels.\n\t* @return {null|Object[]} Array of the panels that were created on top of the stack, or\n\t*\t`null` if panels could not be created.\n\t* @public\n\t*/\n\tpushPanels: function(info, commonInfo, options) { // added\n\t\tif (this.transitioning || this.isModifyingPanels) { return null; }\n\t\tthis.isModifyingPanels = true;\n\n\t\tif (!options) { options = {}; }\n\t\tvar lastIndex = this.getPanels().length,\n\t\t\toPanels = this.createComponents(info, commonInfo),\n\t\t\tnPanel;\n\n\t\tfor (nPanel = 0; nPanel < oPanels.length; ++nPanel) {\n\t\t\toPanels[nPanel].render();\n\t\t}\n\t\tthis.reflow();\n\t\tif (options.targetIndex || options.targetIndex === 0) {\n\t\t\tlastIndex = options.targetIndex;\n\t\t}\n\t\tlastIndex = this.clamp(lastIndex);\n\t\tthis.getPanels()[lastIndex].show();\n\t\tfor (nPanel = 0; nPanel < oPanels.length; ++nPanel) {\n\t\t\toPanels[nPanel].resize();\n\t\t}\n\n\t\t// If transition was explicitly set to false, since null or undefined indicate \"never set\" or unset\n\t\tif (options.transition === false) {\n\t\t\tthis.setIndexDirect(lastIndex);\n\t\t} else {\n\t\t\tthis.setIndex(lastIndex);\n\t\t}\n\n\t\tthis.isModifyingPanels = false;\n\t\treturn oPanels;\n\t},\n\n\t/**\n\t* Destroys panels whose index is greater than or equal to a specified value.\n\t*\n\t* @param {Number} index - Index at which to start destroying panels.\n\t* @public\n\t*/\n\tpopPanels: function (index) {\n\t\tif (this.transitioning || this.isModifyingPanels) {return;}\n\t\tthis.isModifyingPanels = true;\n\t\tvar panels = this.getPanels();\n\t\tindex = index || panels.length - 1;\n\n\t\twhile (panels.length > index && index >= 0) {\n\t\t\tpanels[panels.length - 1].destroy();\n\t\t}\n\t\tthis.isModifyingPanels = false;\n\t},\n\n\t/**\n\t* Destroys specified panel and creates new panel in-place without transition effect.\n\t*\n\t* @param {Number} index - Index of panel to destroy.\n\t* @param {Object} info - The declarative {@glossary kind} definition.\n\t* @param {Object} moreInfo - Additional properties to be applied (defaults).\n\t* @public\n\t*/\n\treplacePanel: function (index, info, moreInfo) {\n\t\tif (this.transitioning || this.isModifyingPanels) {return;}\n\t\tthis.isModifyingPanels = true;\n\t\tvar oPanel = null;\n\n\t\tif (this.getPanels().length > index) {\n\t\t\tthis.getPanels()[index].destroy();\n\t\t\tif (this.getPanels().length > index) {\n\t\t\t\tmoreInfo = util.mixin({addBefore: this.getPanels()[index]}, moreInfo);\n\t\t\t}\n\t\t}\n\t\toPanel = this.createComponent(info, moreInfo);\n\t\toPanel.render();\n\t\tthis.resize();\n\t\tthis.isModifyingPanels = false;\n\t},\n\n\t/**\n\t* Finds and returns the panel index of the passed-in control. Returns `-1` if\n\t* panel is not found.\n\t*\n\t* @param {Object} oControl - A control to look for.\n\t* @return {Number} Panel index of control, or `-1` if panel is not found.\n\t* @public\n\t*/\n\tgetPanelIndex: function (oControl) {\n\t\tvar oPanel = null;\n\n\t\twhile (oControl && oControl.parent) {\n\t\t\t// Parent of a panel can be a client or a panels.\n\t\t\tif (oControl.parent === this.$.client || oControl.parent === this) {\n\t\t\t\toPanel = oControl;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\toControl = oControl.parent;\n\t\t}\n\n\t\tif (oPanel) {\n\t\t\tfor (var n=0; n<this.getPanels().length; n++) {\n\t\t\t\tif (this.getPanels()[n] == oPanel) {\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\t/**\n\t* Returns `true` if the passed-in control is a child panel of this Panels instance.\n\t*\n\t* @param {Object} control - A panel control.\n\t* @return {Boolean} `true` if the specified control is a child panel of this Panels\n\t* instance.\n\t* @public\n\t*/\n\tisPanel: function (control) {\n\t\tfor (var n=0; n<this.getPanels().length; n++) {\n\t\t\tif (this.getPanels()[n] == control) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tPanels.prototype.create.apply(this, arguments);\n\t\tthis.set('animate', this.animate && options.accelerate, true);\n\n\t\t// we need to ensure our handler has the opportunity to modify the flow during\n\t\t// initialization\n\t\tthis.showingChanged();\n\t\tthis.brandingSrcChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tthis.applyPattern();\n\t\tPanels.prototype.initComponents.apply(this, arguments);\n\t\tthis.initializeShowHideHandle();\n\t\tthis.handleShowingChanged();\n\t\tthis.allowBackKeyChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function () {\n\t\tPanels.prototype.rendered.apply(this, arguments);\n\n\t\t// Direct hide if not showing and using handle\n\t\tif (this.useHandle === true) {\n\t\t\tif (this.showing) {\n\t\t\t\tthis._directShow();\n\t\t\t} else {\n\t\t\t\tthis._directHide();\n\t\t\t}\n\t\t}\n\t\tthis.displayBranding();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttapped: function (oSender, oEvent) {\n\t\tif (oEvent.originator === this.$.showHideHandle || this.pattern === 'none' ||\n\t\t\tthis.transitioning === true || this.isModifyingPanels === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.shouldHide(oEvent)) {\n\t\t\tif (this.showing && (this.useHandle === true) && this.handleShowing) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t} else {\n\t\t\tvar n = (oEvent.breadcrumbTap) ? this.getPanelIndex(oEvent.originator) : -1;\n\t\t\t// If tapped on not current panel (breadcrumb), go to that panel\n\t\t\tif (n >= 0 && n !== this.getIndex()) {\n\t\t\t\tthis.setIndex(n);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshouldHide: function (oEvent) {\n\t\treturn (oEvent.originator === this.$.clientWrapper || (oEvent.originator instanceof Panel && this.isPanel(oEvent.originator)));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightLeft: function (oSender, oEvent) {\n\t\tif (this.toIndex !== null) {\n\t\t\tthis.queuedIndex = this.toIndex - 1;\n\t\t\t//queuedIndex could have out boundary value. It will be managed in setIndex()\n\t\t}\n\t\tvar orig = oEvent.originator,\n\t\t\tidx;\n\t\t// Don't allow left-movement from a breadcrumb\n\t\tif (orig.name === 'breadcrumbBackground') {\n\t\t\treturn true;\n\t\t}\n\t\tif (orig instanceof Panel) {\n\t\t\tidx = this.getPanelIndex(orig);\n\t\t\tif (idx === 0) {\n\t\t\t\tif (this.showing && (this.useHandle === true) && this.handleShowing) {\n\t\t\t\t\tthis.hide();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.previous();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightRight: function (oSender, oEvent) {\n\t\tif (this.toIndex !== null) {\n\t\t\tthis.queuedIndex = this.toIndex + 1;\n\t\t\t//queuedIndex could have out boundary value. It will be managed in setIndex()\n\t\t}\n\t\tvar orig = oEvent.originator,\n\t\t\tidx = this.getPanelIndex(orig),\n\t\t\tnext = this.getPanels()[idx + 1];\n\t\tif (orig.name === 'breadcrumbBackground') {\n\t\t\t// Upon pressing right from a pointer-focused breadcrumb, just jump\n\t\t\t// to the current panel to keep focus visible\n\t\t\tSpotlight.spot(next);\n\t\t\treturn true;\n\t\t}\n\t\tif (next && orig instanceof Panel) {\n\t\t\tif (this.useHandle === true && this.handleShowing && next.isOffscreen) {\n\t\t\t\tSpotlight.spot(this.$.showHideHandle);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.next();\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightDown: function (oSender, oEvent) {\n\t\tif (oEvent.originator.name === 'breadcrumbBackground') { return true; }\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightFocus: function (oSender, oEvent) {\n\t\tvar orig = oEvent.originator;\n\t\tvar idx = this.getPanelIndex(orig);\n\t\tif (this.index !== idx && idx !== -1 && orig.name !== 'breadcrumbBackground') {\n\t\t\tthis.setIndex(idx);\n\t\t}\n\t},\n\n\t/**\n\t* Responds to tap on show/hide handle.\n\t*\n\t* @private\n\t*/\n\thandleTap: function () {\n\t\tthis.setShowing(!this.showing);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleSpotLeft: function () {\n\t\tif (this.showing) {\n\t\t\tSpotlight.spot(this.getActive());\n\t\t} else {\n\t\t\tSpotlight.unspot();\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleSpotRight: function (sender, event) {\n\t\tif (this.showing) {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleBlur: function (sender, event) {\n\t\tif (this.isHandleFocused) {\n\t\t\tthis.isHandleFocused = false;\n\t\t\tif (!Spotlight.getPointerMode()) {\n\t\t\t\tif (!this.showing) {\n\t\t\t\t\tthis.panelsHiddenAsync();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.resetHandleAutoHide();\n\t\tif (!this.showing) {\n\t\t\tSignals.send('onPanelsHandleBlurred');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpanelsHiddenAsync: function () {\n\t\tutil.asyncMethod(Signals, 'send', 'onPanelsHidden');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresetHandleAutoHide: function (sender, event) {\n\t\tthis.startJob('autoHide', 'stashHandle', this.getAutoHideTimeout());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopHandleAutoHide: function (sender, event) {\n\t\tthis.stopJob('autoHide');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstashHandle: function () {\n\t\tthis.$.showHideHandle.addRemoveClass('stashed', !this.showing);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tunstashHandle: function () {\n\t\tthis.stopHandleAutoHide();\n\t\tthis.$.showHideHandle.removeClass('stashed');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleFocused: function () {\n\t\tthis.unstashHandle();\n\t\tthis.startJob('autoHide', 'handleSpotLeft', this.getAutoHideTimeout());\n\t\tthis.isHandleFocused = true;\n\t\tSignals.send('onPanelsHandleFocused');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleShowingChanged: function () {\n\t\t//* show handle only when useHandle is true\n\t\tif (this.useHandle !== true) { return; }\n\t\tthis.$.showHideHandle.addRemoveClass('hidden', !this.handleShowing);\n\t\tthis.$.showHideHandle.spotlight = this.handleShowing;\n\t},\n\n\t/**\n\t* Called when focus enters one of the panels. If currently hiding and\n\t* `this.useHandle` is `true`, shows handle.\n\t*\n\t* @private\n\t*/\n\tonSpotlightPanelEnter: function () {\n\t\tif (!this.showing && (this.useHandle === true) && this.handleShowing ) {\n\t\t\tSpotlight.spot(this.$.showHideHandle);\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* Sets the index of the active panel, possibly transitioning the panel into view.\n\t*\n\t* @param {number} index - Index of the panel to make active.\n\t* @public\n\t*/\n\tsetIndex: function (index) {\n\t\t// Normally this.index cannot be smaller than 0 and larger than panels.length\n\t\t// However, if panels uses handle and there is sequential key input during transition\n\t\t// then index could have -1. It means that panels will be hidden.\n\t\tif (this.toIndex === null || this.useHandle === false) {\n\t\t\tindex = this.clamp(index);\n\t\t}\n\n\t\tif (index === this.index) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.toIndex !== null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.notifyPanels('initPanel');\n\t\tthis.fromIndex = this.index;\n\t\tthis.toIndex = index;\n\n\t\tthis.queuedIndex = null;\n\t\tthis._willMove = null;\n\n\t\t// Ensure any VKB is closed when transitioning panels\n\t\tthis.blurActiveElementIfHiding(index);\n\n\t\t// If panels will move for this index change, kickoff animation. Otherwise skip it.\n\t\tif (this.shouldAnimate()) {\n\t\t\tSpotlight.mute(this);\n\t\t\t// if back key feature is enabled and setIndex is not called from back key handler\n\t\t\tif (this.allowBackKey && !moon.History.isHandlingBackAction()) {\n\t\t\t\tthis.panelStack.push(this.index);\n\t\t\t\tthis.pushBackHistory();\n\t\t\t}\n\n\t\t\tthis.startTransition();\n\t\t\tthis.triggerPreTransitions();\n\t\t} else {\n\t\t\tthis._setIndex(this.toIndex);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tblurActiveElementIfHiding: function (index) {\n\t\tvar activeElement = document.activeElement,\n\t\t\tactiveComponent = activeElement ? dispatcher.$[activeElement.id] : null,\n\t\t\tpanels = this.getPanels(),\n\t\t\tpanel,\n\t\t\tpanelInfo;\n\t\tif (activeComponent) {\n\t\t\tfor (var i = 0; i < panels.length; i++) {\n\t\t\t\tpanel = panels[i];\n\t\t\t\tif (activeComponent.isDescendantOf(panel)) {\n\t\t\t\t\tpanelInfo = this.getPanelInfo(i, index);\n\t\t\t\t\tif (panelInfo.offscreen) {\n\t\t\t\t\t\tdocument.activeElement.blur();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Returns `true` if the panels should animate in the transition from `fromIndex` to\n\t* `toIndex`.\n\t*\n\t* @private\n\t*/\n\tshouldAnimate: function () {\n\t\tif (this._willMove == null) {\n\t\t\treturn (this._willMove = this.animate && this.shouldArrange());\n\t\t}\n\t\telse {\n\t\t\treturn this._willMove;\n\t\t}\n\t},\n\n\t/**\n\t* Returns `true` if any panels will move in the transition from `fromIndex` to `toIndex`.\n\t*\n\t* @private\n\t*/\n\tshouldArrange: function () {\n\t\treturn this.layout.shouldArrange ? this.layout.shouldArrange(this.fromIndex, this.toIndex) : true;\n\t},\n\n\t/**\n\t*\n\t* @private\n\t*/\n\t_setIndex: function (index) {\n\t\tvar prev = this.get('index');\n\t\tthis.index = this.clamp(index);\n\t\tthis.notifyObservers('index', prev, index);\n\t},\n\n\t/**\n\t* Called when the arranger animation completes.\n\t*\n\t* @private\n\t*/\n\tanimationEnded: function () {\n\t\tif (this.animate) {\n\t\t\tthis.triggerPostTransitions();\n\t\t} else {\n\t\t\tPanels.prototype.animationEnded.apply(this, arguments);\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetPanelInfo: function (inPanelIndex, inActiveIndex) {\n\t\treturn this.layout.getPanelInfo && this.layout.getPanelInfo(inPanelIndex, inActiveIndex) || {};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetTransitionInfo: function (inPanelIndex) {\n\t\tvar to = (this.toIndex || this.toIndex === 0) ? this.toIndex : this.index;\n\t\tvar info = this.getPanelInfo(inPanelIndex, to);\n\t\tinfo.from = this.fromIndex;\n\t\tinfo.to = this.toIndex;\n\t\tinfo.index = inPanelIndex;\n\t\tinfo.animate = this.animate;\n\t\treturn info;\n\t},\n\n\t/**\n\t* If any panel has a pre-transition, pushes the panel's index to `preTransitionWaitList`.\n\t*\n\t* @private\n\t*/\n\ttriggerPreTransitions: function () {\n\t\tvar panels = this.getPanels(),\n\t\t\tinfo;\n\n\t\tthis.preTransitionWaitlist = [];\n\n\t\tfor(var i = 0, panel; (panel = panels[i]); i++) {\n\t\t\tinfo = this.getTransitionInfo(i);\n\t\t\tif (panel.preTransition && panel.preTransition(info)) {\n\t\t\t\tthis.preTransitionWaitlist.push(i);\n\t\t\t}\n\t\t}\n\n\t\tif (this.preTransitionWaitlist.length === 0) {\n\t\t\tthis._setIndex(this.toIndex);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpreTransitionComplete: function (sender, event) {\n\t\tvar index = this.getPanels().indexOf(event.originator);\n\n\t\tfor (var i = 0; i < this.preTransitionWaitlist.length; i++) {\n\t\t\tif (this.preTransitionWaitlist[i] === index) {\n\t\t\t\tthis.preTransitionWaitlist.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.preTransitionWaitlist.length === 0) {\n\t\t\tthis._setIndex(this.toIndex);\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttriggerPostTransitions: function () {\n\t\tvar panels = this.getPanels(),\n\t\t\tinfo;\n\n\t\tthis.postTransitionWaitlist = [];\n\n\t\tfor(var i = 0, panel; (panel = panels[i]); i++) {\n\t\t\tinfo = this.getTransitionInfo(i);\n\t\t\tif (panel.postTransition && panel.postTransition(info)) {\n\t\t\t\tthis.postTransitionWaitlist.push(i);\n\t\t\t}\n\t\t}\n\n\t\tif (this.postTransitionWaitlist.length === 0) {\n\t\t\tthis.completed();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpostTransitionComplete: function (sender, event) {\n\t\tvar index = this.getPanels().indexOf(event.originator);\n\n\t\tfor (var i = 0; i < this.postTransitionWaitlist.length; i++) {\n\t\t\tif (this.postTransitionWaitlist[i] === index) {\n\t\t\t\tthis.postTransitionWaitlist.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.postTransitionWaitlist.length === 0) {\n\t\t\tthis.completed();\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* When index changes, make sure to update the breadcrumbed panel's `spotlight` property\n\t* (to avoid {@glossary Spotlight} issues).\n\t*\n\t* @private\n\t*/\n\tindexChanged: function () {\n\t\tvar activePanel = this.getActive();\n\n\t\tif (activePanel && activePanel.isBreadcrumb) {\n\t\t\tactivePanel.removeSpottableBreadcrumbProps();\n\t\t}\n\n\t\tPanels.prototype.indexChanged.apply(this, arguments);\n\n\t\tthis.displayBranding();\n\t},\n\n\tnotifyPanels: function (method) {\n\t\tvar panels = this.getPanels(),\n\t\t\tpanel, info, i;\n\t\tfor (i = 0; (panel = panels[i]); i++) {\n\t\t\tinfo = this.getTransitionInfo(i);\n\t\t\tif (panel[method]) {\n\t\t\t\tpanel[method](info);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfinishTransition: function () {\n\t\tvar panels = this.getPanels(),\n\t\t\ttoIndex = this.toIndex,\n\t\t\tfromIndex = this.fromIndex,\n\t\t\ti, panel, info, popFrom;\n\n\t\tthis.notifyPanels('transitionFinished');\n\t\tPanels.prototype.finishTransition.apply(this, arguments);\n\n\t\t// Automatically pop off panels that are no longer on screen\n\t\tif (this.popOnBack && (toIndex < fromIndex)) {\n\t\t\tpopFrom = toIndex + 1;\n\t\t\tfor (i = 0; (panel = panels[i]); i++) {\n\t\t\t\tinfo = this.getTransitionInfo(i);\n\t\t\t\t// If a panel is onscreen, don't pop it\n\t\t\t\tif ((i > toIndex) && !info.offscreen) {\n\t\t\t\t\tpopFrom++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.popPanels(popFrom);\n\t\t}\n\n\t\t// queuedIndex becomes -1 when left key input is occurred\n\t\t// during transition from index 1 to 0.\n\t\t// We can hide panels if we use handle.\n\t\tif (this.queuedIndex === -1 && this.useHandle) {\n\t\t\tthis.hide();\n\t\t} else if (this.queuedIndex !== null) {\n\t\t\tthis.setIndex(this.queuedIndex);\n\t\t}\n\n\t\tSpotlight.unmute(this);\n\t\t// Spot the active panel\n\t\tSpotlight.spot(this.getActive());\n\t},\n\n\t/**\n\t* Override the default `getShowing()` behavior to avoid setting `this.showing` based on the\n\t* CSS `display` property.\n\t*\n\t* @private\n\t*/\n\tgetShowing: function () {\n\t\treturn this.showing;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function (inOldValue) {\n\t\tif (this.$.backgroundScrim) {\n\t\t\tthis.$.backgroundScrim.addRemoveClass('visible', this.showing);\n\t\t}\n\t\tif (this.useHandle === true) {\n\t\t\tif (this.showing) {\n\t\t\t\tthis.unstashHandle();\n\t\t\t\tthis._show();\n\t\t\t\tSpotlight.spot(this.getActive());\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// in this case, our display flag will have been set to none so we need to clear\n\t\t\t\t// that even though the showing flag will remain false\n\t\t\t\tthis.applyStyle('display', null);\n\t\t\t\tthis.resetHandleAutoHide();\n\t\t\t\tthis._hide();\n\t\t\t}\n\t\t\tthis.sendShowingChangedEvent(inOldValue);\n\t\t}\n\t\telse {\n\t\t\tPanels.prototype.showingChanged.apply(this, arguments);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyPattern: function () {\n\t\tswitch (this.pattern) {\n\t\tcase 'alwaysviewing':\n\t\t\tthis.applyAlwaysViewingPattern();\n\t\t\tbreak;\n\t\tcase 'activity':\n\t\t\tthis.applyActivityPattern();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.useHandle = false;\n\t\t\tbreak;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyAlwaysViewingPattern: function () {\n\t\tthis.setArrangerKind('moon.BreadcrumbArranger');\n\t\tthis.addClass('always-viewing');\n\t\tthis.panelCoverRatio = 0.5;\n\t\tthis.useHandle = (this.useHandle === 'auto') ? true : this.useHandle;\n\t\tthis.createChrome(this.handleTools);\n\t\tthis.breadcrumbGap = 20;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyActivityPattern: function () {\n\t\tthis.setArrangerKind('moon.BreadcrumbArranger');\n\t\tthis.addClass('activity');\n\t\tthis.showFirstBreadcrumb = true;\n\t\tthis.useHandle = (this.useHandle === 'auto') ? false : this.useHandle;\n\t\tthis.createChrome(this.handleTools);\n\t\tthis.breadcrumbGap = 0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitializeShowHideHandle: function () {\n\t\tif (this.useHandle === true) {\n\t\t\tthis.$.showHideHandle.canGenerate = true;\n\t\t\tthis.$.showHideHandle.spotlight = true;\n\t\t}\n\t},\n\n\t/**\n\t* Shows panels with transition from right.\n\t*\n\t* @private\n\t*/\n\t_show: function () {\n\t\tvar init = false;\n\t\tif (!this.hasNode()) {\n\t\t\tinit = true;\n\t\t} else {\n\t\t\tthis.$.showHideHandle.addClass('right');\n\t\t\tthis.applyShowAnimation();\n\t\t}\n\t\tSignals.send('onPanelsShown', {initialization: init});\n\t},\n\n\t/**\n\t* Hides panels with transition to right.\n\t*\n\t* @private\n\t*/\n\t_hide: function () {\n\t\tif (!this.hasNode()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$.showHideHandle.removeClass('right');\n\t\tthis.applyHideAnimation();\n\t\tthis.panelsHiddenAsync();\n\t},\n\n\t/**\n\t* Sets show state without animation.\n\t*\n\t* @private\n\t*/\n\t_directShow: function () {\n\t\tthis.$.showHideHandle.addClass('right');\n\t\tif (this.handleShowing) {\n\t\t\tthis.$.showHideHandle.removeClass('hidden');\n\t\t}\n\t\tthis.applyShowAnimation(true);\n\t},\n\n\t/**\n\t* Sets hide state without animation.\n\t*\n\t* @private\n\t*/\n\t_directHide: function () {\n\t\tthis.$.showHideHandle.addClass('hidden');\n\t\tthis.$.showHideHandle.removeClass('right');\n\t\tthis.applyHideAnimation(true);\n\t\tthis.hideAnimationComplete();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyShowAnimation: function (direct) {\n\t\tthis.$.clientWrapper.applyStyle('-webkit-transition', direct ? null : '-webkit-transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)');\n\t\tdom.transform(this.$.clientWrapper, {translateX: 0});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyHideAnimation: function (direct) {\n\t\tthis.$.clientWrapper.applyStyle('-webkit-transition', direct ? null : '-webkit-transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)');\n\t\tdom.transform(this.$.clientWrapper, {translateX: '100%'});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetOffscreenXPosition: function () {\n\t\treturn this.$.clientWrapper.getBounds().width;\n\t},\n\n\t/**\n\t* Hide/show animation complete.\n\t*\n\t* @private\n\t*/\n\tshowHideAnimationComplete: function (sender, event) {\n\t\tswitch (event.animation.name) {\n\t\tcase 'show':\n\t\t\tthis.showAnimationComplete();\n\t\t\treturn true;\n\t\tcase 'hide':\n\t\t\tthis.hideAnimationComplete();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowAnimationComplete: function () {\n\t\tif (this.handleShowing) {\n\t\t\tthis.$.showHideHandle.removeClass('hidden');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thideAnimationComplete: function () {\n\t\tif (this.handleShowing) {\n\t\t\tthis.$.showHideHandle.removeClass('hidden');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisplayBranding: function () {\n\t\tif (this.$.branding) {\n\t\t\tif (this.pattern == 'activity' && this.getPanelInfo(0, this.index).breadcrumb) {\n\t\t\t\tthis.$.branding.show();\n\t\t\t} else {\n\t\t\t\tthis.$.branding.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbrandingSrcChanged: function () {\n\t\tif (this.$.branding) {\n\t\t\tthis.$.branding.set('src', this.brandingSrc);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tanimateChanged: function () {\n\t\tthis.addRemoveClass('moon-composite', this.animate);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackKeyHandler: function () {\n\t\tif (this.panelStack.length) {\n\t\t\tthis.setIndex(this.panelStack.pop());\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tallowBackKeyChanged: function () {\n\t\tif (this.allowBackKey) {\n\t\t\t//initialize stack\n\t\t\tthis.panelStack = [];\n\t\t} else if(this.panelStack) {\n\t\t\tthis.panelStack = null;\n\t\t}\n\t}\n\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton'),\n\tDialog = require('../../../moonstone/lib/Dialog');\n\nmodule.exports = kind({\n\tname: 'moons.sample.DialogSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Divider, content: 'Dialog'},\n\t\t{kind: Button, content: 'Open Dialog', ontap: 'showDialog'},\n\t\t{classes: 'moon-1v'},\n\t\t{kind: ToggleButton, content: 'Showing', name: 'showingToggle'},\n\t\t{kind: ToggleButton, content: 'Animate', name: 'animateToggle'},\n\t\t{kind: ToggleButton, content: 'SpotlightModal', ontap: 'buttonToggled'},\n\t\t{\n\t\t\tname: 'dialog', \n\t\t\tkind: Dialog,\n\t\t\ttitle: 'You\\'ve been watching TV for a very long time so let\\'s do a quick check-in.',\n\t\t\tsubTitle: 'This TV has been active for 10 hours.',\n\t\t\tmessage: 'Perhaps it is time to take a break and get some fresh air. There is a nice coffee shop around the corner', \n\t\t\tcomponents: [\n\t\t\t\t{kind: Button, content: 'Go get a coffee', ontap: 'hideDialog'},\n\t\t\t\t{kind: Button, content: 'Keep watching TV', ontap: 'addMessage'}\n\t\t\t]\n\t\t}\n\t],\n\tbindings: [\n\t\t{from: '.$.showingToggle.value', to: '.$.dialog.showing', oneWay:false},\n\t\t{from: '.$.dialog.animate', to: '.$.animateToggle.value', oneWay:false}\n\t],\n\tbuttonToggled: function(sender, event) {\n\t\tthis.$.dialog.setSpotlightModal(sender.getActive());\n\t\tthis.$.dialog.setAutoDismiss(!sender.getActive());\n\t},\n\tshowDialog: function(sender) {\n\t\tthis.$.dialog.show();\n\t},\n\thideDialog: function(sender, event) {\n\t\tthis.$.dialog.hide();\n\t},\n\taddMessage: function() {\n\t\tthis.$.dialog.setMessage(this.$.dialog.getMessage() + '<br> No, seriously, you should probably take a break.');\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tChannelInfo = require('../../../moonstone/lib/ChannelInfo'),\n\tClock = require('../../../moonstone/lib/Clock'),\n\tContextualPopup = require('../../../moonstone/lib/ContextualPopup'),\n\tContextualPopupDecorator = require('../../../moonstone/lib/ContextualPopupDecorator'),\n\tDialog = require('../../../moonstone/lib/Dialog'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton'),\n\tTooltip = require('../../../moonstone/lib/Tooltip'),\n\tTooltipDecorator = require('../../../moonstone/lib/TooltipDecorator'),\n\tVideoInfoBackground = require('../../../moonstone/lib/VideoInfoBackground'),\n\tVideoInfoHeader = require('../../../moonstone/lib/VideoInfoHeader'),\n\tVideoPlayer = require('../../../moonstone/lib/VideoPlayer');\n\nmodule.exports = kind({\n\tname: 'moon.sample.VideoPlayerSample',\n\tclasses: 'moon enyo-fit enyo-unselectable moon-video-player-sample',\n\tfit: true,\n\tcomponents: [\n\t\t{\n\t\t\tname: 'player',\n\t\t\tkind: VideoPlayer,\n\t\t\tsources: [\n\t\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.mp4', type: 'video/mp4'},\n\t\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.ogg', type: 'video/ogg'},\n\t\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.webm', type: 'video/webm'}\n\t\t\t],\n\t\t\tposter: 'assets/video-poster.png',\n\t\t\tautoplay: true,\n\t\t\tonPlaybackControlsTapped: 'controlsTapped',\n\t\t\tinfoComponents: [\n\t\t\t\t{kind: VideoInfoBackground, orient: 'left', background: true, fit: true, components: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkind: ChannelInfo,\n\t\t\t\t\t\tchannelNo: '13',\n\t\t\t\t\t\tchannelName: 'AMC',\n\t\t\t\t\t\tclasses: 'moon-2h',\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{content: '3D'},\n\t\t\t\t\t\t\t{content: 'Live'},\n\t\t\t\t\t\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon '}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkind: VideoInfoHeader,\n\t\t\t\t\t\ttitle: 'Downton Abbey - Extra Title',\n\t\t\t\t\t\tsubTitle: 'Mon June 21, 7:00 - 8:00pm',\n\t\t\t\t\t\tsubSubTitle: 'R - TV 14, V, L, SC',\n\t\t\t\t\t\tdescription: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{content: 'Icon 1', classes: 'moon-video-player-info-icon'},\n\t\t\t\t\t\t\t{content: 'Icon 2', classes: 'moon-video-player-info-icon'},\n\t\t\t\t\t\t\t{content: 'Icon 3', classes: 'moon-video-player-info-icon'}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]},\n\t\t\t\t{kind: VideoInfoBackground, orient: 'right', background: true, components: [\n\t\t\t\t\t{kind: Clock}\n\t\t\t\t]}\n\t\t\t],\n\t\t\tcomponents: [\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: ToggleButton, name: 'controlsToggleButton', content: 'Controls'},\n\t\t\t\t{kind: Button, content: 'Unload', ontap: 'unload'},\n\t\t\t\t{kind: Button, content: 'Reload', ontap: 'load'},\n\t\t\t\t{kind: ToggleButton, content: 'FF/Rewind', name: 'ffrewToggleButton'},\n\t\t\t\t{kind: ContextualPopupDecorator, components: [\n\t\t\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t\t\t{kind: Button, content: 'Popup'},\n\t\t\t\t\t\t{kind: Tooltip, floating: true, content: 'I\\'m a tooltip for a button.'}\n\t\t\t\t\t]},\n\t\t\t\t\t{\n\t\t\t\t\t\tkind: ContextualPopup,\n\t\t\t\t\t\tclasses: 'moon-3h moon-6v',\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item 2'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item 3'}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'}\n\t\t\t]\n\t\t},\n\t\t{kind: Dialog, name: 'tapDialog', title: 'The controls were tapped.', message: 'Press OK to dismiss', components: [\n\t\t\t{kind: Button, content: 'OK', ontap: 'dismissTapDialog'}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '.$.player.disablePlaybackControls', to: '.$.controlsToggleButton.value', oneWay:false},\n\t\t{from: '.$.player.showFFRewindControls', to: '.$.ffrewToggleButton.value', oneWay:false}\n\t],\n\tcontrolsTapped: function () {\n\t\tthis.$.tapDialog.show();\n\t},\n\tdismissTapDialog: function () {\n\t\tthis.$.tapDialog.hide();\n\t},\n\tunload: function () {\n\t\tthis.$.player.unload();\n\t},\n\tload: function () {\n\t\tthis.$.player.unload();\n\t\t// We can set source by sources array\n\t\tthis.sources = [\n\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.mp4', type: 'video/mp4'},\n\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.ogg', type: 'video/ogg'},\n\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.webm', type: 'video/webm'}\n\t\t];\n\t\tthis.$.player.setSources(this.sources);\n\t}\n});\n","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tDataRepeater = require('../../../enyo/lib/DataRepeater');\n\nvar\n\tExpandablePicker = require('../ExpandablePicker');\n\n/**\n* {@link moon.ExpandableDataPicker}, which extends {@link moon.ExpandablePicker}, is\n* a data-driven drop-down picker menu that solicits a choice from the user. The picker's child\n* components, which are instances of {@link moon.CheckboxItem} by default, provide\n* the options for the picker. They child controls are generated from the picker's\n* [collection]{@link moon.ExpandableDataPicker#collection}.\n* \n* ```\n* {name: 'picker', kind: 'moon.ExpandableDataPicker', content: 'Data Picker', components: [\n* \t{bindings: [\n* \t\t{from: '.model.label', to: '.content'}\n* \t]}\n* ]}\n* ```\n*\n* @class moon.ExpandableDataPicker\n* @extends moon.ExpandablePicker\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ExpandableDataPicker.prototype */ {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ExpandableDataPicker',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: ExpandablePicker,\n\t\n\t/**\n\t* @lends moon.ExpandableDataPicker.prototype\n\t* @private\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* Collection of models to render as picker items\n\t\t*\n\t\t* @type {enyo.Collection}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcollection: null\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tcollectionChanged: function () {\n\t\tthis.$.list.set('collection', this.collection);\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tExpandablePicker.prototype.create.apply(this, arguments);\n\t\tthis.collectionChanged();\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tvar comps = this.components || this.kindComponents;\n\t\tthis.components = null;\n\n\t\tExpandablePicker.prototype.initComponents.apply(this, arguments);\n\n\t\tvar list = this.getListComponent(comps);\n\t\tthis.createComponent(list);\n\t},\n\t\n\t/**\n\t* Creates the configuration for the {@link enyo.DataRepeater} that will generate the picker\n\t* items\n\t*\n\t* @param {Object[]} comps \t- Component configurations that will be each picker item\n\t* @return {Object} \t\t\t- List component configuration\n\t* @protected\n\t*/\n\tgetListComponent: function (comps) {\n\t\tvar list = {\n\t\t\tname: 'list',\n\t\t\tkind: DataRepeater,\n\t\t\tcomponents: comps,\n\t\t\towner: this\n\t\t};\n\n\t\t// could use defaultProps on the repeater but they'll also get added to the repeater's\n\t\t// container which may not be desirable\n\t\tif(comps.length === 1 && !comps[0].kind) {\n\t\t\tcomps[0].kind = this.defaultKind;\n\t\t}\n\n\t\treturn list;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgetCheckboxControls: function () {\n\t\treturn this.$.list.getClientControls();\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tRadioItem = require('../RadioItem');\n\n/**\n* {@link moon.RadioItemGroup} is a container in which a group of {@link moon.RadioItem}\n* objects are laid out horizontally. Within a group, only one item may be active at a\n* time; tapping on an item will deactivate any previously-tapped item.\n*\n* ```\n* {kind: 'moon.RadioItemGroup', onActivate: 'buttonActivated', components: [\n*\t{content: 'Lions', selected: true},\n*\t{content: 'Tigers'},\n*\t{content: 'Bears'}\n* ]}\n* ```\n*\n* @class moon.RadioItemGroup\n* @extends enyo.Group\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends  moon.RadioItemGroup.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.RadioItemGroup',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Group,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-radio-item-group',\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: RadioItem\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\t$L = require('../moon-ilib'),\n\tDateTimePickerBase = require('../DateTimePickerBase'),\n\tIntegerPicker = require('../IntegerPicker');\n\n/**\n* {@link moon.DatePicker} is a control used to allow the selection of (or simply\n* display) a day, month, and year.\n*\n* ```\n* {\n* \tkind: 'moon.DatePicker',\n* \tnoneText: 'Pick a Date',\n* \tcontent: 'Date',\n* \tonChange: 'changed'\n* }\n* ```\n*\n* Set the [value]{@link moon.DatePicker#value} property to a standard JavaScript\n* {@glossary Date} object to initialize the picker, or to change it programmatically\n* at runtime.\n*\n* @class moon.DatePicker\n* @extends moon.DateTimePickerBase\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.DatePicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.DatePicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: DateTimePickerBase,\n\n\t/**\n\t* @private\n\t* @lends moon.DatePicker.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Optional minimum year value. Must be specified using the Gregorian\n\t\t* calendar, regardless of the calendar type used by the specified locale.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1900\n\t\t* @public\n\t\t*/\n\t\tminYear: 1900,\n\n\t\t/**\n\t\t* Optional maximum year value. Must be specified using the Gregorian\n\t\t* calendar, regardless of the calendar type used by the specified locale.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 2099\n\t\t* @public\n\t\t*/\n\t\tmaxYear: 2099,\n\n\t\t/**\n\t\t* Optional label for day.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'day'\n\t\t* @public\n\t\t*/\n\t\tdayText: $L('day'),\t\t\t// i18n 'DAY' label in moon.DatePicker widget\n\n\t\t/**\n\t\t* Optional label for month.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'month'\n\t\t* @public\n\t\t*/\n\t\tmonthText: $L('month'),\t\t// i18n 'MONTH' label in moon.DatePicker widget\n\n\t\t/**\n\t\t* Optional label for year.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'year'\n\t\t* @public\n\t\t*/\n\t\tyearText: $L('year')\t\t\t// i18n 'YEAR' label in Moon.DatePicker widget\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tiLibFormatType: 'date',\n\n\t/**\n\t* @private\n\t*/\n\tdefaultOrdering: 'Mdy',\n\n\t/**\n\t* @private\n\t*/\n\tinitILib: function () {\n\t\tDateTimePickerBase.prototype.initILib.apply(this, arguments);\n\t\tif (typeof ilib !== 'undefined' && this.value) {\n\t\t\tthis.localeValue = ilib.Date.newInstance({unixtime: this.value.getTime(), timezone: \"local\"});\n\t\t}\n\t},\n\n\t/**\n\t * When [iLib]{@glossary ilib} is supported, calculates the minimum year in the\n\t * current calendar. Otherwise, returns the value of the published property\n\t * [minYear]{@link moon.DatePicker#minYear}.\n\t *\n\t * @private\n\t */\n\tgetMinYear: function() {\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tvar greg = ilib.Date.newInstance({\n\t\t\t\ttype: \"gregorian\",\n\t\t\t\tyear: this.minYear,\n\t\t\t\tmonth: 1,\n\t\t\t\tday: 1,\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t\tvar localCalendarDate = ilib.Date.newInstance({\n\t\t\t\tjulianday: greg.getJulianDay(),\n\t\t\t\ttimezone: \"local\"\n\t\t\t});\n\t\t\treturn localCalendarDate.getYears();\n\t\t} else {\n\t\t\treturn this.minYear;\n\t\t}\n\t},\n\n\t/**\n\t * When [iLib]{@glossary ilib} is supported, calculates the maximum year in the\n\t * current calendar. Otherwise, returns the value of the published property\n\t * [maxYear]{@link moon.DatePicker#maxYear}.\n\t *\n\t * @private\n\t */\n\tgetMaxYear: function() {\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tvar greg = ilib.Date.newInstance({\n\t\t\t\ttype: \"gregorian\",\n\t\t\t\tyear: this.maxYear,\n\t\t\t\tmonth: 1,\n\t\t\t\tday: 1,\n\t\t\t\ttimezone: 'local'\n\t\t\t});\n\t\t\tvar localCalendarDate = ilib.Date.newInstance({\n\t\t\t\tjulianday: greg.getJulianDay(),\n\t\t\t\ttimezone: \"local\"\n\t\t\t});\n\t\t\treturn localCalendarDate.getYears();\n\t\t} else {\n\t\t\treturn this.maxYear;\n\t\t}\n\t},\n\n\n\t/**\n\t* @private\n\t*/\n\tsetupPickers: function (ordering) {\n\t\tvar orderingArr = ordering.split('');\n\t\tvar doneArr = [];\n\t\tvar o, f, l, digits, values;\n\t\tfor(f = 0, l = orderingArr.length; f < l; f++) {\n\t\t\to = orderingArr[f];\n\t\t\tif (doneArr.indexOf(o) < 0) {\n\t\t\t\tdoneArr.push(o);\n\t\t\t}\n\t\t}\n\n\t\tvalues = this.calcPickerValues();\n\t\tthis.silence();\n\n\t\tfor(f = 0, l = doneArr.length; f < l; f++) {\n\t\t\to = doneArr[f];\n\n\t\t\tswitch (o) {\n\t\t\tcase 'd':\n\t\t\t\tdigits = (ordering.indexOf('dd') > -1) ? 2 : null;\n\t\t\t\tthis.createComponent(\n\t\t\t\t\t{classes: 'moon-date-picker-wrap', components:[\n\t\t\t\t\t\t{kind:'moon.IntegerPicker', name:'day', classes:'moon-date-picker-field', wrap:true, digits:digits, min:1,\n\t\t\t\t\t\tmax:this.monthLength(values.fullYear, values.month), value: values.date, onChange: 'pickerChanged'},\n\t\t\t\t\t\t{name: 'dayLabel', content: this.dayText, classes: 'moon-date-picker-label moon-divider-text'}\n\t\t\t\t\t]});\n\t\t\t\tbreak;\n\t\t\tcase 'M':\n\t\t\t\tdigits = (ordering.indexOf('MM') > -1) ? 2 : null;\n\t\t\t\tthis.createComponent(\n\t\t\t\t\t{classes: 'moon-date-picker-wrap', components:[\n\t\t\t\t\t\t{kind:'moon.IntegerPicker', name:'month', classes:'moon-date-picker-field', wrap:true, min:1, max:values.maxMonths, value:values.month, onChange: 'pickerChanged'},\n\t\t\t\t\t\t{name: 'monthLabel', content: this.monthText, classes: 'moon-date-picker-label moon-divider-text'}\n\t\t\t\t\t]});\n\t\t\t\tbreak;\n\t\t\tcase 'y':\n\t\t\t\tthis.createComponent(\n\t\t\t\t\t{classes: 'moon-date-picker-wrap year', components:[\n\t\t\t\t\t\t{kind:'moon.IntegerPicker', name:'year', classes:'moon-date-picker-field year', value:values.fullYear, min:this.getMinYear(), max:this.getMaxYear(), onChange: 'pickerChanged'},\n\t\t\t\t\t\t{name: 'yearLabel', content: this.yearText, classes: 'moon-date-picker-label moon-divider-text'}\n\t\t\t\t\t]});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.unsilence();\n\t\tDateTimePickerBase.prototype.setupPickers.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tformatValue: function () {\n\t\tif (!this.value) {\n\t\t\treturn (this.noneText);\n\t\t}\n\t\tif (this._tf) {\n\t\t\treturn this._tf.format(this.value);\n\t\t} else {\n\t\t\treturn this.getWeekDay()[this.value.getDay()] + ' ' + this.getMonthName()[this.value.getMonth()] + ' ' + this.value.getDate() + ' ' + this.value.getFullYear();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpickerChanged: function (inSender, inEvent) {\n\t\tif(this.syncingPickers) return true;\n\n\t\tvar day = this.$.day.getValue(),\n\t\t\tmonth = this.$.month.getValue(),\n\t\t\tyear = this.$.year.getValue(),\n\t\t\tmaxDays;\n\t\tvar valueHours = this.value ? this.value.getHours() : 0;\n\t\tvar valueMinutes = this.value ? this.value.getMinutes() : 0;\n\t\tvar valueSeconds = this.value ? this.value.getSeconds() : 0;\n\t\tvar valueMilliseconds = this.value ? this.value.getMilliseconds() : 0;\n\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tmaxDays = this.monthLength(year, month);\n\t\t\tthis.localeValue = ilib.Date.newInstance({\n\t\t\t\tday: (day <= maxDays) ? day : maxDays,\n\t\t\t\tmonth: month,\n\t\t\t\tyear: year,\n\t\t\t\thour: valueHours,\n\t\t\t\tminute: valueMinutes,\n\t\t\t\tsecond: valueSeconds,\n\t\t\t\tmillisecond: valueMilliseconds\n\t\t\t});\n\t\t\tthis.setValue(this.localeValue.getJSDate());\n\t\t} else {\n\t\t\tmaxDays = this.monthLength(year, month);\n\t\t\tthis.setValue(new Date(year, month-1, (day <= maxDays) ? day : maxDays,\n\t\t\t\tvalueHours,\n\t\t\t\tvalueMinutes,\n\t\t\t\tvalueSeconds,\n\t\t\t\tvalueMilliseconds));\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetChildPickers: function (inOld) {\n\t\tif (this.value && typeof ilib !== 'undefined') {\n\t\t\tthis.localeValue = ilib.Date.newInstance({unixtime: this.value.getTime(), timezone: \"local\"});\n\t\t}\n\n\t\tif (this.localeValue || this.value) {\n\t\t\tvar values = this.calcPickerValues();\n\n\t\t\tthis.$.year.set('value', values.fullYear);\n\t\t\tthis.$.month.set('value', values.month);\n\t\t\tthis.$.day.set('value', values.date);\n\t\t\tthis.$.month.set('max', values.maxMonths);\n\t\t\tthis.$.day.set('max', this.monthLength(values.fullYear, values.month));\n\t\t\tthis.$.currentValue.setContent(this.formatValue());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcPickerValues: function () {\n\t\tvar values = {};\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tif (this.localeValue) {\n\t\t\t\tvalues.fullYear = this.localeValue.getYears();\n\t\t\t\tvalues.month = this.localeValue.getMonths();\n\t\t\t\tvalues.date = this.localeValue.getDays();\n\t\t\t}\n\t\t\tvalues.maxMonths = this._tf.cal.getNumMonths(values.fullYear);\n\t\t} else {\n\t\t\tif (this.value) {\n\t\t\t\tvalues.fullYear = this.value.getFullYear();\n\t\t\t\tvalues.month = this.value.getMonth()+1;\n\t\t\t\tvalues.date = this.value.getDate();\n\t\t\t}\n\t\t\tvalues.maxMonths = 12;\n\t\t}\n\t\treturn values;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetMonthName: function () {\n\t\t// Only used when ilib is not loaded\n\t\treturn ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetWeekDay: function() {\n\t\t// Only used when ilib is not loaded\n\t\treturn ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\t},\n\n\t/**\n\t* Returns number of days in a particular month/year.\n\t*\n\t* @private\n\t*/\n\tmonthLength: function (inYear, inMonth) {\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\treturn this._tf.cal.getMonLength(inMonth, inYear);\n\t\t} else {\n\t\t\treturn 32 - new Date(inYear, inMonth - 1, 32).getDate();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tyearTextChanged: function (inOldvalue, inNewValue) {\n\t\tthis.$.yearLabel.setContent(inNewValue);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmonthTextChanged: function (inOldvalue, inNewValue) {\n\t\tthis.$.monthLabel.setContent(inNewValue);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdayTextChanged: function (inOldvalue, inNewValue) {\n\t\tthis.$.dayLabel.setContent(inNewValue);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom');\n\nvar\n\tIntegerPicker = require('../IntegerPicker');\n\n/**\n* Fires when the currently selected item changes.\n*\n* @event moon.SimpleIntegerPicker#onChange\n* @type {Object}\n* @property {Number} value - The value of the currently selected item.\n* @property {String} content - The content of the currently selected item.\n* @public\n*/\n\n/**\n* Fires in response to Return keypress while the picker has focus in\n* {@glossary Spotlight} 5-way mode.\n*\n* @event moon.SimpleIntegerPicker#onSelect\n* @type {Object}\n* @property {Number} value - The value of the currently selected item.\n* @property {String} content - The content of the currently selected item.\n* @public\n*/\n\n/**\n* Fires when the picker is rebuilt, allowing other controls the opportunity to reflow\n* the picker as necessary (e.g., a child of a {@link moon.ExpandableIntegerPicker} may\n* need to be reflowed when the picker is opened, as it may not be currently visible).\n* No event-specific data is sent with this event.\n*\n* @event moon.SimpleIntegerPicker#onRebuilt\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.SimpleIntegerPicker} is a [control]{@link enyo.Control} that prompts the\n* user to make a selection from a range of integer-based options.\n*\n* The picker may be changed programmatically by calling\n* [previous()]{@link moon.IntegerPicker#previous} or\n* [next()]{@link moon.IntegerPicker#next}, or by modifying the published property\n* [value]{@link moon.IntegerPicker#value}.\n*\n* @class moon.SimpleIntegerPicker\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.SimpleIntegerPicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.SimpleIntegerPicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: IntegerPicker,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-simple-integer-picker',\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonSelect: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightUp: null,\n\t\tonSpotlightDown: null,\n\t\tonSpotlightRight: 'next',\n\t\tonSpotlightLeft: 'previous',\n\t\tonSpotlightSelect: 'fireSelectEvent'\n\t},\n\n\t/**\n\t* @lends moon.SimpleIntegerPicker.prototype\n\t* @private\n\t* @lends moon.SimpleIntegerPicker.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* Unit label to be appended to the value for display.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'sec'\n\t\t* @public\n\t\t*/\n\t\tunit: 'sec'\n\t},\n\n\t/**\n\t* Number of pixels added to the width of each picker item as padding. Note that this\n\t* is not a CSS padding value.\n\t*\n\t* @type {Number}\n\t* @default 60\n\t* @public\n\t*/\n\titemPadding: 60,\n\n\t/**\n\t* Appends unit to content, forming label for display.\n\t*\n\t* @see moon.IntegerPicker.labelForValue\n\t* @private\n\t* @method\n\t*/\n\tlabelForValue: function (value) {\n\t\tvar content = IntegerPicker.prototype.labelForValue.apply(this, arguments);\n\t\treturn this.unit? content + ' ' + this.unit : content;\n\t},\n\n\t/**\n\t* Calculates width of the picker when the first item is rendered.\n\t*\n\t* @see moon.IntegerPicker.updateRepeater\n\t* @private\n\t* @method\n\t*/\n\tupdateRepeater: function () {\n\t\tIntegerPicker.prototype.updateRepeater.apply(this, arguments);\n\n\t\tif(!this.width) {\n\t\t\tvar ib;\n\t\t\tthis.$.repeater.performOnRow(this.$.repeater.rowOffset, function() {\n\t\t\t\t// have to reset to natural width before getting bounds\n\t\t\t\tthis.$.item.setStyle('width: auto');\n\t\t\t\tib = this.$.item.getBounds();\n\t\t\t}, this);\n\n\t\t\tthis.width = ib.width + this.itemPadding;\n\t\t\tthis.applyStyle('width', dom.unit(this.width, 'rem'));\n\t\t\tthis.$.item.setStyle('width: ' + dom.unit(this.width, 'rem'));\n\t\t}\n\t},\n\n\t/**\n\t* @fires moon.SimpleIntegerPicker#onSelect\n\t* @private\n\t*/\n\tfireSelectEvent: function () {\n\t\tif (this.hasNode()) {\n\t\t\tthis.doSelect({\n\t\t\t\tcontent: this.labelForValue(this.value),\n\t\t\t\tvalue: this.value\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t* Forces recalculation of the width of the picker.\n\t*\n\t* @see enyo.UiComponent.reflow\n\t* @private\n\t* @method\n\t*/\n\treflow: function () {\n\t\tthis.width = 0;\n\t\tIntegerPicker.prototype.reflow.apply(this, arguments);\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tplatform = require('../../../enyo/lib/platform'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\t$L = require('../moon-ilib'),\n\tIntegerPicker = require('../IntegerPicker'),\n\tDateTimePickerBase = require('../DateTimePickerBase');\n\n/**\n* {@link moon.MeridiemPicker} is a helper kind used by {@link moon.TimePicker}.\n* It is not intended for use in other contexts.\n*\n* @class moon.MeridiemPicker\n* @extends moon.IntegerPicker\n* @ui\n* @protected\n*/\nvar MeridiemPicker = kind(\n\t/** @lends  moon.MeridiemPicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.MeridiemPicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: IntegerPicker,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-date-picker-month',\n\n\t/**\n\t* @private\n\t*/\n\tmin: 0,\n\n\t/**\n\t* @private\n\t*/\n\tmax: 1,\n\n\t/**\n\t* @private\n\t*/\n\tvalue: null,\n\n\t/**\n\t* @private\n\t*/\n\twrap: true,\n\n\t/**\n\t* @private\n\t* @lends moon.MeridiemPicker.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* The meridiem text to display if [meridiemEnable]{@link moon.TimePicker#meridiemEnable}\n\t\t* is `true`. The first item is used if the `hour` is less than `11`; otherwise, the\n\t\t* second is used.\n\t\t*\n\t\t* @type {String[]}\n\t\t* @default ['AM','PM']\n\t\t* @public\n\t\t*/\n\t\tmeridiems: ['AM','PM']\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tIntegerPicker.prototype.valueChanged.apply(this, arguments);\t\t\n\t\tthis.updateOverlays();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupItem: function (inSender, inEvent) {\n\t\tvar index = inEvent.index % this.range;\n\t\tthis.$.item.setContent(this.meridiems[index]);\n\t}\n});\n\n/**\n* {@link moon.HourMinutePickerBase} is a helper kind used by {@link moon.TimePicker}. \n*  It is not intended for use in other contexts.\n*\n* @class moon.MinutePicker\n* @extends moon.IntegerPicker\n* @ui\n* @protected\n*/\nvar HourMinutePickerBase = kind(\n\t/** @lends moon.HourMinutePickerBase.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.HourMinutePickerBase',\n\n\t/**\n\t* @private\n\t*/\n\tkind: IntegerPicker,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-date-picker-field',\n\n\t/**\n\t* @private\n\t*/\n\tformatter: null,\n\n\t/**\n\t* @private\n\t*/\n\twrap: true,\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tIntegerPicker.prototype.create.apply(this, arguments);\n\t\t// Create ilib Date object used for formatting hours\n\t\tif (typeof ilib !== 'undefined') {\n\t\t\tthis.date = ilib.Date.newInstance();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupItem: function (inSender, inEvent) {\n\t\tvar value = this.format(inEvent.index % this.range);\n\t\tthis.$.item.setContent(value);\n\t}\n});\n\n/**\n* {@link moon.MinutePicker} is a helper kind used by {@link moon.TimePicker}. \n*  It is not intended for use in other contexts.\n*\n* @class moon.MinutePicker\n* @extends moon.HourMinutePickerBase\n* @ui\n* @protected\n*/\nvar MinutePicker = kind(\n\t/** @lends moon.MinutePicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.MinutePicker',\n\t/**\n\t* @private\n\t*/\n\tkind: HourMinutePickerBase,\n\n\t/**\n\t* @private\n\t*/\n\tmin: 0,\n\n\t/**\n\t* @private\n\t*/\n\tmax: 59,\n\n\t/**\n\t * Formats the minute at `index` for the current locale\n\t *\n\t * @param  {Number} index - Minute between 0 and 59\n\t * @return {String}       - Formatted minute\n\t * @private\n\t */\n\tformat: function (index) {\n\t\tvar minute;\n\n\t\tif (this.date) { // ilib enabled\n\t\t\tthis.date.minute = index;\n\t\t\tminute = this.formatter.format(this.date);\n\t\t} else {\t// Have TimePicker format the minutes\n\t\t\tminute = this.formatter.formatMinute(index);\n\t\t}\n\n\t\treturn minute;\n\t}\n});\n\n/**\n* {@link moon.HourPicker} is a helper kind used by {@link moon.TimePicker}. It is\n*  not intended for use in other contexts.\n*\n* @class moon.HourPicker\n* @extends moon.HourMinutePickerBase\n* @ui\n* @protected\n*/\nvar HourPicker = kind(\n\t/** @lends moon.HourPicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.HourPicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: HourMinutePickerBase,\n\n\t/**\n\t* @private\n\t*/\n\tmin: 0,\n\n\t/**\n\t* @private\n\t*/\n\tmax: 23,\n\n\n\t/**\n\t * Formats the hour at `index` for the current locale\n\t *\n\t * @param  {Number} index - Hour between 0 and 24\n\t * @return {String}       - Formatted hour\n\t * @private\n\t */\n\tformat: function (index) {\n\t\tvar hour;\n\n\t\tif (this.date) { // ilib enabled\n\t\t\tthis.date.hour = index;\n\t\t\thour = this.formatter.format(this.date);\n\t\t} else {\t// Have TimePicker format the hours\n\t\t\thour = this.formatter.formatHour(index);\n\t\t}\n\n\t\treturn hour;\n\t},\n\n\t/**\n\t * If the formatted new and old values are the same, skip animating by not passing\n\t * the old value to `IntegerPicker.scrollToValue`.\n\t *\n\t * If the hour is changed by more than 12 but the locale is using 12 hour formatting, this\n\t * will not prevent a big scroll through all intermediate values (e.g. from 3pm to 2am) even\n\t * though it only has to scroll 1 index. This can be seen most easily by selecting a time\n\t * between 2 and 3 pm on day when DST springs forward and then changing the meridiem to AM.\n\t * \n\t * @see moon.IntegerPicker.scrollToValue\n\t * @private\n\t */\n\tscrollToValue: function(old) {\n\t\t// try to avoid the format calls if the old and current values\n\t\t// don't mod to the same value\n\t\tvar maybeSame = old !== undefined && old%12 === this.value%12;\n\t\tif(maybeSame && this.format(old) === this.format(this.value)) {\n\t\t\tHourMinutePickerBase.prototype.scrollToValue.call(this);\n\t\t} else {\n\t\t\tHourMinutePickerBase.prototype.scrollToValue.apply(this, arguments);\n\t\t}\n\t}\n});\n/**\n* {@link moon.TimePicker} is a [control]{@link enyo.Control} used to allow the\n* selection of (or to simply display) a time expressed in hours and minutes, with an\n* optional meridiem indicator ('am' or 'pm').\n*\n* ```\n* {kind: 'moon.TimePicker', content: 'Time', meridiemEnable: true, onChange: 'changed'}\n* ```\n* Set the [value]{@link moon.TimePicker#value} property to a standard JavaScript\n* {@glossary Date} object to initialize the picker, or to change it programmatically at\n* runtime.\n*\n* @class moon.TimePicker\n* @extends moon.DateTimePickerBase\n* @ui\n* @public\n*/\nvar TimePicker = module.exports = kind(\n\t/** @lends moon.TimePicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.TimePicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: DateTimePickerBase,\n\n\t/**\n\t* @private\n\t* @lends moon.TimePicker.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* When `true`, the picker will use a 12-hour clock. (When [iLib]{@glossary ilib} is loaded,\n\t\t* this value will be ignored and the current locale's rules will determine whether a\n\t\t* 12-hour or 24-hour clock is used.)\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tmeridiemEnable: false,\n\n\t\t/**\n\t\t* Optional label for hour.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon.$L('hour')'\n\t\t* @public\n\t\t*/\n\t\thourText: $L('hour'),\t\t\t// i18n 'HOUR' label in moon.TimePicker widget\n\n\t\t/**\n\t\t* Optional label for minute.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon.$L('minute')'\n\t\t* @public\n\t\t*/\n\t\tminuteText: $L('minute'),\t\t// i18n 'MINUTE' label in moon.TimePicker widget\n\n\t\t/**\n\t\t* Optional label for meridiem.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'moon.$L('meridiem')'\n\t\t* @public\n\t\t*/\n\n\t\tmeridiemText: $L('meridiem'),\t// i18n 'MERIDIEM' label in moon.TimePicker widget\n\t\t/**\n\t\t* When `true`, midnight (and noon, if `meridiemEnable: true`) will be represented as `0`\n\t\t* instead of `24` (and `12`). (When [iLib]{@glossary ilib} is loaded, this value will be\n\t\t* ignored and the current locale's rules will determine whether `0` is used.)\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\thoursStartAtZero: false,\n\n\t\t/**\n\t\t* When `true`, hours will be zero-padded. (When [iLib]{@glosary ilib} is loaded, this\n\t\t* value will be ignored and the current locale's rules will determine whether\n\t\t* zero-padding is used.)\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\thoursZeroPadded: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tobservers: {\n\t\trefresh: ['hoursStartAtZero', 'meridiemEnable', 'hoursZeroPadded']\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tiLibFormatType  : 'time',\n\n\t/**\n\t* @private\n\t*/\n\tdefaultOrdering : 'hma',\n\n\n\t/**\n\t* @private\n\t*/\n\tinitILib: function () {\n\t\tDateTimePickerBase.prototype.initILib.apply(this, arguments);\n\n\t\t// Set picker format 12 vs 24 hour clock\n\t\tvar li = new ilib.LocaleInfo(this.locale || undefined);\n\t\tvar clockPref = li.getClock();\n\t\tthis.meridiemEnable = (clockPref == '12');\n\n\t\tvar fmtParams = {\n\t\t\ttype: 'time',\n\t\t\ttime: 'h',\n\t\t\tclock: clockPref !== 'locale' ? clockPref : undefined,\n\t\t\tuseNative: false,\n\t\t\ttimezone: 'local'\n\t\t};\n\t\tif (this.locale) {\n\t\t\tfmtParams.locale = this.locale;\n\t\t}\n\t\tthis.hourFormatter = new ilib.DateFmt(fmtParams);\n\n\t\tfmtParams.time = 'm';\n\t\tthis.minuteFormatter = new ilib.DateFmt(fmtParams);\n\n\t\t// Get localized meridiem values\n\t\tif (this.meridiemEnable) {\n\t\t\tfmtParams = {\n\t\t\t\ttemplate: 'a',\n\t\t\t\tclock: clockPref !== 'locale' ? clockPref : undefined,\n\t\t\t\tuseNative: false,\n\t\t\t\ttimezone: 'local'\n\t\t\t};\n\t\t\tif (this.locale) {\n\t\t\t\tfmtParams.locale = this.locale;\n\t\t\t}\n\t\t\tvar merFormatter = new ilib.DateFmt(fmtParams);\n\t\t\tvar am = ilib.Date.newInstance({hour:10});\n\t\t\tvar pm = ilib.Date.newInstance({hour:14});\n\t\t\tthis.meridiems = [merFormatter.format(am), merFormatter.format(pm)];\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetupPickers: function (ordering) {\n\t\tvar orderingArr = ordering.toLowerCase().split('');\n\t\tvar doneArr = [];\n\t\tvar o,f,l;\n\t\tfor(f = 0, l = orderingArr.length; f < l; f++) {\n\t\t\to = orderingArr[f];\n\t\t\tif (doneArr.indexOf(o) < 0) {\n\t\t\t\tdoneArr.push(o);\n\t\t\t}\n\t\t}\n\n\t\tfor(f = 0, l = doneArr.length; f < l; f++) {\n\t\t\to = doneArr[f];\n\t\t\tvar valueHours = this.value ? this.value.getHours() : 0;\n\t\t\tvar valueMinutes = this.value ? this.value.getMinutes() : 0;\n\n\t\t\tswitch (o){\n\t\t\tcase 'h':\n\t\t\tcase 'k':\n\t\t\t\tthis.wrapComponent(\n\t\t\t\t\t{name: 'timeWrapper', kind: Control, classes: 'moon-time-picker-wrap'},\n\t\t\t\t\t{kind: Control, classes: 'moon-date-picker-wrap', components:[\n\t\t\t\t\t\t{name: 'hour', kind: HourPicker, formatter: this.hourFormatter || this, value: valueHours, onChange: 'hourPickerChanged'},\n\t\t\t\t\t\t{name: 'hourLabel', kind: Control, content: this.hourText, classes: 'moon-date-picker-label moon-divider-text'}\n\t\t\t\t\t]},\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'm':\n\t\t\t\tthis.wrapComponent(\n\t\t\t\t\t{name: 'timeWrapper', kind: Control, classes: 'moon-time-picker-wrap'},\n\t\t\t\t\t{classes: 'moon-date-picker-wrap', components:[\n\t\t\t\t\t\t{name: 'minute', kind: MinutePicker, formatter: this.minuteFormatter || this, value: valueMinutes, onChange: 'minutePickerChanged'},\n\t\t\t\t\t\t{name: 'minuteLabel', content: this.minuteText, classes: 'moon-date-picker-label moon-divider-text'}\n\t\t\t\t\t]},\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'a':\n\t\t\t\tif (this.meridiemEnable === true) {\n\t\t\t\t\tthis.createComponent(\n\t\t\t\t\t\t{kind: Control, classes: 'moon-date-picker-wrap', components:[\n\t\t\t\t\t\t\t{name: 'meridiem', kind: MeridiemPicker, classes: 'moon-date-picker-field', value: valueHours > 12 ? 1 : 0, meridiems: this.meridiems || ['am','pm'], onChange: 'meridiemPickerChanged'},\n\t\t\t\t\t\t\t{name: 'meridiemLabel', kind: Control, content: this.meridiemText, classes: 'moon-date-picker-label moon-divider-text'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tDateTimePickerBase.prototype.setupPickers.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\twrapComponent: function (wrapperProps, compProps, owner) {\n\t\tvar wrapper = this.$[wrapperProps.name];\n\t\tif (!wrapper) {\n\t\t\twrapper = this.createComponent(wrapperProps);\n\t\t}\n\t\twrapper.createComponent(compProps, {owner: owner});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tformatValue: function () {\n\t\tif (!this.value) {\n\t\t\treturn (this.noneText);\n\t\t}\n\t\tvar dateStr = '';\n\t\tif (this._tf) {\n\t\t\tdateStr = this._tf.format(ilib.Date.newInstance({unixtime: this.value.getTime(), timezone:'Etc/UTC'}));\n\t\t}\n\t\telse {\n\t\t\tdateStr += this.formatHour(this.value.getHours());\n\t\t\tdateStr += ':' + ('00' + this.value.getMinutes()).slice(-2) + ' ';\n\t\t\tdateStr += this.meridiemEnable ? this.$.meridiem.getMeridiems()[this.$.meridiem.getValue()] : '';\n\t\t}\n\t\treturn dateStr;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tformatHour: function (hour) {\n\t\tif (this.meridiemEnable) {\n\t\t\tif (hour > 12) {\n\t\t\t\thour -= 12;\n\t\t\t}\n\t\t\tif (this.hoursStartAtZero) {\n\t\t\t\tif (hour == 12) {\n\t\t\t\t\thour = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thour = hour || 12;\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.hoursStartAtZero) {\n\t\t\t\thour = hour || 24;\n\t\t\t}\n\t\t}\n\t\tif (this.hoursZeroPadded) {\n\t\t\thour = ('0' + hour).slice(-2);\n\t\t}\n\t\treturn hour;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tformatMinute: function (minute) {\n\t\treturn minute;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thourPickerChanged: function (sender, event) {\n\t\tif(this.syncingPickers) return true;\n\n\t\tvar hour = event.value;\n\n\t\tif (this.value) {\n\t\t\tthis.updateHours(hour);\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tminutePickerChanged: function (sender, event) {\n\t\tif(this.syncingPickers) return true;\n\n\t\tvar minutes = event.value;\n\n\t\tif (this.value) {\n\t\t\tthis.value.setMinutes(minutes);\n\t\t\tthis.set('value', this.value, {force: true});\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmeridiemPickerChanged: function (sender, event) {\n\t\tif(this.syncingPickers) return true;\n\n\t\tvar hour = this.$.hour.get('value'),\n\t\t\tvalue = event.value;\n\n\t\tif (this.value) {\n\t\t\t// value is 0 for am, 1 for pm\n\t\t\t// reset the hour to < 12 and then add 12 if it's pm\n\t\t\thour = hour%12 + value*12;\n\t\t\tthis.updateHours(hour);\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* webOS TVs which rounds down when setting the hour to the skipped hour of DST\n\t* whereas other implementations round up. \n\t*\n\t* @private\n\t*/\n\tdstOffset: platform.webos? 3600000 : -3600000,\n\n\t/**\n\t* @private\n\t*/\n\tupdateHours: function (hour) {\n\t\tvar valueTime = this.value.getTime();\n\n\t\tthis.value.setHours(hour);\n\n\t\t// in the rare case that the value didn't change because it was snapped back to the\n\t\t// same value due to DST rules, push it back another hour.\n\t\tif (valueTime == this.value.getTime()) {\n\t\t\tthis.value = new Date(valueTime + this.dstOffset);\n\t\t}\n\n\t\tthis.set('value', this.value, {force: true});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsetChildPickers: function (inOld) {\n\t\tif (this.value) {\n\t\t\tvar hour = this.value.getHours();\n\t\t\tthis.$.hour.setValue(hour);\n\t\t\tthis.$.minute.setValue(this.value.getMinutes());\n\t\t\tif (this.meridiemEnable === true) {\n\t\t\t\tthis.$.meridiem.setValue(hour > 11 ? 1 : 0);\n\t\t\t}\n\t\t}\n\t\tthis.$.currentValue.setContent(this.formatValue());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thourTextChanged: function (inOldvalue, inNewValue) {\n\t\tthis.$.hourLabel.setContent(inNewValue);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tminuteTextChanged: function (inOldvalue, inNewValue) {\n\t\tthis.$.minuteLabel.setContent(inNewValue);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmeridiemTextChanged: function (inOldvalue, inNewValue) {\n\t\tthis.$.meridiemLabel.setContent(inNewValue);\n\t}\n});\n\nTimePicker.HourPicker = HourPicker;\nTimePicker.MinutePicker = MinutePicker;\nTimePicker.MeridiemPicker = MeridiemPicker;","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tutil = require('../../../enyo/lib/utils'),\n\tDataList = require('../../../enyo/lib/DataList');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tScroller = require('../Scroller');\n\n/**\n* {@link moon.DataListSpotlightSupport} is a {@glossary mixin} that provides\n* {@glossary Spotlight} handling code for use by {@link moon.DataList} and\n* {@link moon.DataGridList}. Since both of these [kinds]{@glossary kind} inherit\n* from their respective Enyo counterparts, this mixin provides the common add-on\n* code needed for proper spotlight handling.\n*\n* @mixin moon.DataListSpotlightSupport\n* @private\n*/\nvar SpotlightSupport = {\n\n\t/**\n\t* @private\n\t* @lends moon.DataListSpotlightSupport.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* The index of the item to focus at render time, or `-1` for no focused item.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default -1\n\t\t* @public\n\t\t*/\n\t\tinitialFocusIndex: -1\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightUp    : '_spotlightPrev',\n\t\tonSpotlightLeft  : '_spotlightPrev',\n\t\tonSpotlightDown  : '_spotlightNext',\n\t\tonSpotlightRight : '_spotlightNext'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfocusOnIndex: function (inIndex, inSubChild) {\n\t\tvar c = this.collection,\n\t\t\tchild,\n\t\t\tsubChild;\n\t\tif (c && c.length && this.hasRendered) {  // Give focus if list is rendered\n\t\t\tinIndex = inIndex < 0 ? 0 : (inIndex >= c.length ? c.length - 1 : inIndex);\n\t\t\tchild = this.childForIndex(inIndex);\n\t\t\tif (!child) {\n\t\t\t\tthis.scrollToIndex(inIndex);\n\t\t\t\tchild = this.childForIndex(inIndex);\n\t\t\t}\n\t\t\tsubChild = inSubChild ? Spotlight.getChildren(child)[inSubChild] : child;\n\t\t\tSpotlight.spot(subChild);\n\t\t} else {\n\t\t\tthis._indexToFocus = inIndex;\n\t\t\tthis._subChildToFocus = inSubChild;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetFocusedIndex: function () {\n\t\tvar focusedChild = this.getFocusedChild();\n\t\treturn focusedChild ? this.getIndexFromChild(focusedChild) : -1;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetFocusedChild: function () {\n\t\tvar current = Spotlight.getCurrent();\n\t\treturn (current && current.isDescendantOf(this.$.active)) ? current : null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_indexToFocus: -1,\n\n\t/**\n\t* @private\n\t*/\n\t_subChildToFocus: null,\n\n\t/**\n\t* @private\n\t*/\n\tdidRender: function () {\n\t\t// Lists are set to spotlight:true by default, which allows them to receive focus before\n\t\t// children are rendered; once rendred, it becomes spotlight:false, and the code below\n\t\t// ensures spotlight is transferred inside the list once rendering is complete\n\t\tthis.spotlight = false;\n\t\t// If there is a queued index to focus (or an initialFocusIndex), focus that item now that\n\t\t// the list is rendered\n\t\tvar index = (this._indexToFocus > -1) ? this._indexToFocus : this.initialFocusIndex;\n\t\tif (index > -1) {\n\t\t\tthis.focusOnIndex(index);\n\t\t\tthis._indexToFocus = -1;\n\t\t} else {\n\t\t\t// Otherwise, check if the list was focused and if so, transfer focus to the first\n\t\t\t// spottable child inside\n\t\t\tif (Spotlight.getCurrent() == this) {\n\t\t\t\tSpotlight.spot(this);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t* @method\n\t*/\n\tdidScroll: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// When scrolling in pointer mode, we unspot the last focused child, to prevent it from\n\t\t\t// looping as new pages come up\n\t\t\tvar spot;\n\t\t\tif (Spotlight.getPointerMode() &&\n\t\t\t\t((spot = Spotlight.getCurrent()) && (spot === this || spot.isDescendantOf(this.$.active)))) {\n\t\t\t\tSpotlight.unspot();\n\t\t\t\tthis._unspotSinceSpot = true;\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\t_spotlightNext: function (inSender, inEvent) {\n\t\treturn this._spotlightSelect(inEvent, 1);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_spotlightPrev: function (inSender, inEvent) {\n\t\treturn this._spotlightSelect(inEvent, -1);\n\t},\n\n\t/**\n\t* Spots the next/previous control. Handles the case where this control may not be\n\t* generated yet; otherwise, the default behavior occurs and is handled by Spotlight.\n\t*\n\t* @private\n\t*/\n\t_spotlightSelect: function (inEvent, inDirection) {\n\t\tvar pages = this.delegate.pagesByPosition(this),\n\t\t\tspottableControl;\n\n\t\t// If there are no spottable items generated in the current pages, generate the subsequent page(s)\n\t\t// based on the current direction\n\t\tif (!this.getNextSpottableChild(inDirection)) {\n\t\t\t// Find the next spottable control in the appropriate direction\n\t\t\tif (inDirection === 1) {\n\t\t\t\tspottableControl = this.findSpottableControl(inDirection, pages.firstPage, pages.lastPage.index + 1);\n\t\t\t} else if (inDirection === -1) {\n\t\t\t\tspottableControl = this.findSpottableControl(inDirection, pages.lastPage, pages.firstPage.index - 1);\n\t\t\t}\n\n\t\t\tif (spottableControl) {\n\t\t\t\t// Explicitly handle spotting of the control we found\n\t\t\t\tSpotlight.spot(spottableControl);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (this.needToAdjustPages) {\n\t\t\t// Sometimes after models added, page adjustment might be required.\n\t\t\tvar pagesForIndex = this.delegate.pageForIndex(this, inEvent.index),\n\t\t\t\tpageCount = this.delegate.pageCount(this),\n\t\t\t\tlastPageIndex = pages.lastPage.index;\n\t\t\n\t\t\t// If current selected index is lastPage and there is no page\n\t\t\t// then lower bound of scrollThreshold is undefined because it is useless\n\t\t\t// However after models are added then more pages could be generated\n\t\t\t// We need to check whether current list's position passes scrollThreshold or not.\n\t\t\tif (pagesForIndex === lastPageIndex && pageCount -1 !== lastPageIndex) {\n\t\t\t\tthis.didScroll(this, {scrollBounds: {left: null, top: null, xDir: 1, yDir: 1}});\n\t\t\t\tthis.needToAdjustPages = false;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Finds the next/previous spottable control, the page to generate the next\n\t* page worth of controls in, and the index of the next page to generate.\n\t*\n\t* @private\n\t*/\n\tfindSpottableControl: function (inDirection, inPage, inPageIndex) {\n\t\tif ((inPageIndex > this.delegate.pageCount(this) - 1) || inPageIndex < 0) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.delegate.generatePage(this, inPage, inPageIndex);\n\t\tthis.delegate.adjustPagePositions(this);\n\t\tthis.delegate.adjustBuffer(this);\n\n\t\tvar pages = this.delegate.pagesByPosition(this),\n\t\t\tcontrol = this.getNextSpottableChild(inDirection);\n\n\t\tif (!control) {\n\t\t\tif (inDirection === 1) {\n\t\t\t\treturn this.findSpottableControl(inDirection, inPage === pages.firstPage ? pages.lastPage : pages.firstPage, inPageIndex + 1);\n\t\t\t} else if (inDirection === -1) {\n\t\t\t\treturn this.findSpottableControl(inDirection, inPage === pages.firstPage ? pages.lastPage : pages.firstPage, inPageIndex - 1);\n\t\t\t}\n\t\t}\n\t\treturn control;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tpreviewDomEvent: function (inEvent) {\n\t\t// When spotlight is being applied back to the list after being unspotted, check that the child being\n\t\t// focused is visible and if not, spot the first visible child that is\n\t\tif ((inEvent.type == 'onSpotlightFocus') && this._unspotSinceSpot) {\n\t\t\tif (Spotlight.getPointerMode()) {\n\t\t\t\tthis._unspotSinceSpot = false;\n\t\t\t} else {\n\t\t\t\tvar target = inEvent.originator;\n\t\t\t\tif (target != this) {\n\t\t\t\t\t// Calculate the target bounds, relative to the scrollBounds\n\t\t\t\t\tvar tb = target.getBounds();\n\t\t\t\t\tvar p = target.isDescendantOf(this.$.page1) ? this.$.page1 : this.$.page2;\n\t\t\t\t\tvar pb = p.getBounds();\n\t\t\t\t\t// Need to add page offset to target bounds\n\t\t\t\t\ttb.top += pb.top;\n\t\t\t\t\ttb.left += pb.left;\n\t\t\t\t\tvar sb = this.$.scroller.getScrollBounds();\n\t\t\t\t\t// Check if target is inside the current scrollBounds\n\t\t\t\t\tif ((tb.top < sb.top) ||\n\t\t\t\t\t\t(tb.left < sb.left) ||\n\t\t\t\t\t\t((tb.top + tb.height) > (sb.top + sb.clientHeight)) ||\n\t\t\t\t\t\t((tb.left + tb.width) > (sb.left + sb.clientWidth))) {\n\t\t\t\t\t\t// Not in view, so find and spot the first visible child\n\t\t\t\t\t\tvar vc = this.getFirstVisibleChild(sb);\n\t\t\t\t\t\tif (vc) {\n\t\t\t\t\t\t\tthis._unspotSinceSpot = false;\n\t\t\t\t\t\t\tSpotlight.spot(vc);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._unspotSinceSpot = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetFirstVisibleChild: function (inScrollBounds) {\n\t\t// Loop through the pages in top-down order\n\t\tvar pages = (this.$.page1.index < this.$.page2.index) ?\n\t\t\t[this.$.page1, this.$.page2] :\n\t\t\t[this.$.page2, this.$.page1],\n\t\t\tpageIdx,\n\t\t\tpage,\n\t\t\tpb,\n\t\t\ti,\n\t\t\tc,\n\t\t\tcb;\n\n\t\tfor (pageIdx = 0; pageIdx < pages.length; pageIdx++) {\n\t\t\tpage = pages[pageIdx];\n\t\t\tpb = page.getBounds();\n\t\t\t// Loop through children in each page top-down\n\t\t\tfor (i=0; i<page.children.length; i++) {\n\t\t\t\tc = page.children[i];\n\t\t\t\tcb = c.getBounds();\n\t\t\t\t// Need to add page offset to target bounds\n\t\t\t\tcb.top += pb.top;\n\t\t\t\tcb.left += pb.left;\n\t\t\t\t// Return the first spottable child whose top/left are inside the viewport\n\t\t\t\tif ((cb.top >= inScrollBounds.top) && ((this.rtl ? (inScrollBounds.width - (cb.left + cb.width)) : cb.left) >= inScrollBounds.left)) {\n\t\t\t\t\tif (Spotlight.isSpottable(c)) {\n\t\t\t\t\t\treturn c;\n\t\t\t\t\t}\n\t\t\t\t\tc = Spotlight.getFirstChild(c);\n\t\t\t\t\tif (c) {\n\t\t\t\t\t\treturn c;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t* Retrieves the next/previous spottable child from the generated controls,\n\t* starting from the given index.\n\t*\n\t* @private\n\t*/\n\tgetNextSpottableChild: function (inDirection, inFocusedIndex) {\n\t\tvar i,\n\t\t\tpage,\n\t\t\tpageIndex,\n\t\t\tcontrol,\n\t\t\tcontrolIndex,\n\t\t\tfocusedIndex = this.getFocusedIndex(),\n\t\t\tpages = (inDirection === 1 && this.$.page1.index < this.$.page2.index || inDirection === -1 && this.$.page1.index > this.$.page2.index)\n\t\t\t\t? [this.$.page1, this.$.page2] : [this.$.page2, this.$.page1];\n\n\t\t// Explore the controls in the current pages\n\t\tfor (pageIndex = 0; pageIndex < pages.length; pageIndex++) {\n\t\t\tpage = pages[pageIndex];\n\t\t\tif (inDirection === 1) {\n\t\t\t\t// Loop through children in each page top-down\n\t\t\t\tfor (i = 0; i < page.children.length; i++) {\n\t\t\t\t\tcontrol = page.children[i];\n\t\t\t\t\tcontrolIndex = this.getIndexFromChild(control);\n\t\t\t\t\t// If we have already passed our current item or no item is selected, we can return the next spottable control\n\t\t\t\t\tif (controlIndex > focusedIndex || focusedIndex < 0) {\n\t\t\t\t\t\tif (Spotlight.isSpottable(control, false)) {\n\t\t\t\t\t\t\treturn control;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontrol = Spotlight.getFirstChild(control);\n\t\t\t\t\t\tif (control) {\n\t\t\t\t\t\t\treturn control;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (inDirection === -1) {\n\t\t\t\t// Loop through children in each page bottom-up\n\t\t\t\tfor (i = page.children.length - 1; i >= 0; i--) {\n\t\t\t\t\tcontrol = page.children[i];\n\t\t\t\t\tcontrolIndex = this.getIndexFromChild(control);\n\t\t\t\t\t// If we have already passed our current item or no item is selected, we can return the next spottable control\n\t\t\t\t\tif (controlIndex < focusedIndex || focusedIndex < 0) {\n\t\t\t\t\t\tif (Spotlight.isSpottable(control, false)) {\n\t\t\t\t\t\t\treturn control;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontrol = Spotlight.getFirstChild(control);\n\t\t\t\t\t\tif (control) {\n\t\t\t\t\t\t\treturn control;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetItemFromChild: function (oControl) {\n\t\twhile (oControl) {\n\t\t\tif (oControl.index !== undefined) {\n\t\t\t\treturn oControl;\n\t\t\t}\n\t\t\toControl = oControl.parent;\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetIndexFromChild: function (oControl) {\n\t\tvar item = this.getItemFromChild(oControl);\n\t\treturn item ? item.index : -1;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tunspotAndRememberFocus: function () {\n\t\tvar current = this.getFocusedChild(),\n\t\t\tfocusedItem;\n\t\tif (current) {\n\t\t\tfocusedItem = this.getItemFromChild(current);\n\t\t\tthis._indexToFocus = focusedItem.index;\n\t\t\tthis._subChildToFocus = focusedItem === current ? null : Spotlight.getChildren(focusedItem).indexOf(current);\n\t\t\tSpotlight.unspot();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trestoreFocus: function () {\n\t\tvar index = this._indexToFocus,\n\t\t\tsubChild = this._subChildToFocus,\n\t\t\tc = this.collection;\n\t\tif (c && c.length && (index > -1)) {\n\t\t\tthis.focusOnIndex(index, subChild);\n\t\t\tthis._indexToFocus = -1;\n\t\t\tthis._subChildToFocus = null;\n\t\t}\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdidResize: kind.inherit(function (sup) {\n\t\treturn function (sender, event) {\n\t\t\tthis.unspotAndRememberFocus();\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.restoreFocus();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tmodelsAdded: kind.inherit(function (sup) {\n\t\treturn function (c, e, props) {\n\t\t\tthis.unspotAndRememberFocus();\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.restoreFocus();\n\t\t\t// For specific case, page adjusting is required after models added\n\t\t\tthis.needToAdjustPages = true;\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tmodelsRemoved: kind.inherit(function (sup) {\n\t\treturn function (c, e, props) {\n\t\t\tthis.unspotAndRememberFocus();\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.restoreFocus();\n\t\t};\n\t})\n};\n\n/**\n* {@link moon.DataList} is an {@link enyo.DataList} with Moonstone styling\n* applied.  It uses {@link moon.Scroller} as its default scroller.\n*\n* @class moon.DataList\n* @extends enyo.DataList\n* @mixes moon.DataListSpotlightSupport\n* @ui\n* @public\n*/\nvar MoonDataList = module.exports = kind(\n\t/** @lends moon.DataList.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.DataList',\n\n\t/**\n\t* @private\n\t*/\n\tkind: DataList,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [SpotlightSupport],\n\n\t/**\n\t* @private\n\t*/\n\tnoDefer: true,\n\n\t/**\n\t* @private\n\t*/\n\tallowTransitions: false,\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tscrollerOptions: { kind: Scroller, horizontal: 'hidden' }\n});\n\nMoonDataList.SpotlightSupport = SpotlightSupport;\n\n/**\n* Overload the delegate strategy to incorporate measurements for our scrollers\n* when they are visible.\n*\n* @private\n*/\nMoonDataList.delegates.vertical   = util.clone(DataList.delegates.vertical);\nMoonDataList.delegates.horizontal = util.clone(DataList.delegates.horizontal);\nvar exts = {\n\t/**\n\t* Overriding scrollToControl() to specify Moonstone-specific scroller options.\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\n\t*\n\t* @method\n\t* @private\n\t*/\n\tscrollToControl: function(list, control) {\n\t\tlist.$.scroller.scrollToControl(control, false, false, true);\n\t},\n\n\t/**\n\t* Overriding scrollTo() to specify Moonstone-specific scroller options.\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\n\t*\n\t* @method\n\t* @private\n\t*/\n\tscrollTo: function(list, x, y) {\n\t\tlist.$.scroller.scrollTo(x, y, false);\n\t}\n};\nkind.extendMethods(MoonDataList.delegates.vertical, exts, true);\nkind.extendMethods(MoonDataList.delegates.horizontal, exts, true);\n","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tri = require('../../../enyo/lib/resolution'),\n\tdispatcher = require('../../../enyo/lib/dispatcher'),\n\tControl = require('../../../enyo/lib/Control'),\n\tGroupItem = require('../../../enyo/lib/GroupItem');\n\nvar\n\tFittableLayout = require('../../../layout/lib/FittableLayout'),\n\tFittableRowsLayout = FittableLayout.Rows;\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tScroller = require('../Scroller'),\n\tIconButton = require('../IconButton'),\n\tMoonHistory = require('../History'),\n\tHistorySupport = MoonHistory.HistorySupport;\n\n/**\n* An internally-used support mixin added to a {@link moon.ListActions} menu that decorates\n* `activate` events with the menu's `action` property.\n*\n* @mixin moon.ListActionActivationSupport\n* @protected\n*/\nvar ListActionActivationSupport = {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'ListActionActivationSupport',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonActivate: 'activate'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tactivate: function(sender, e) {\n\t\te.action = this.action;\n\t}\n};\n\n\n/**\n* Fires when the [ListActionsDrawer]{@link moon.ListActionsDrawer} has completed any\n* setup and/or preparation work, e.g., when animating or initial setup. No event-specific\n* information is sent with this event.\n*\n* @event moon.ListActionsDrawer#onComplete\n* @type {Object}\n* @public\n*/\n\n/**\n* {@link moon.ListActionsDrawer} is a [control]{@link enyo.Control} used by\n* {@link moon.ListActions} to house a menu of selectable options.\n*\n* @class moon.ListActionsDrawer\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar ListActionsDrawer = kind(\n\t/** @lends moon.ListActionsDrawer */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ListActionsDrawer',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t* @lends moon.ListActionsDrawer.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* If `true`, the drawer will be in its opened state; otherwise, it will be closed.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\topen: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-list-actions-drawer',\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'client', kind: Control, classes: 'moon-list-actions-drawer-client moon-neutral', ontransitionend: 'handleTransitionEnd'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonComplete: ''\n\t},\n\n\t/**\n\t* @fires moon.ListActionsDrawer#onComplete\n\t* @private\n\t*/\n\trendered: function() {\n\t\tControl.prototype.rendered.apply(this, arguments);\n\t\t// Temporarily disable animation\n\t\tthis.applyAnimatedMode(false);\n\t\t// Set the state of the drawer\n\t\tthis.openChanged();\n\t\t// Re-enable animation\n\t\tthis.applyAnimatedMode(true);\n\t\t// Let any watchers know we've finished our preparation\n\t\tthis.doComplete({rendered: true});\n\t},\n\n\t/**\n\t* @fires moon.ListActionsDrawer#onComplete\n\t* @private\n\t*/\n\thandleTransitionEnd: function(sender, e) {\n\t\tif (e.originator === this.$.client) {\n\t\t\tthis.doComplete();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* We override `getBubbleTarget()` here so that events emanating from a\n\t* [ListActionsDrawer]{@link moon.ListActionsDrawer} instance will bubble to the owner\n\t* of the associated [ListActions]{@link moon.ListActions} instance, as expected. This\n\t* is necessary because events normally bubble to a control's DOM parent, but we have\n\t* sneakily arranged for the DOM parent of a `ListActionsDrawer` instance to be not the\n\t* `ListActions` instance, but the containing [Header]{@link moon.Header} instance.\n\t*\n\t* @private\n\t*/\n\tgetBubbleTarget: function() {\n\t\treturn this.owner;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\topenChanged: function() {\n\t\t// Skip animation before render time\n\t\tif (!this.$.client.hasNode()) { return; }\n\t\tthis.$.client.addRemoveClass('open', this.open);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyAnimatedMode: function(shouldAnimate) {\n\t\tthis.$.client.addRemoveClass('animated', shouldAnimate);\n\t}\n});\n\n/**\n* Fires when the drawer open animation begins. No event-specific data is sent with this event.\n*\n* @event moon.ListActions#onShow\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when the drawer open animation ends. No event-specific data is sent with this event.\n*\n* @event moon.ListActions#onShown\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when the drawer close animation begins. No event-specific data is sent with this event.\n*\n* @event moon.ListActions#onHide\n* @type {Object}\n* @public\n*/\n\n/**\n* Fires when the drawer close animation ends. No event-specific data is sent with this event.\n*\n* @event moon.ListActions#onHidden\n* @type {Object}\n* @public\n*/\n\n/**\n* Used internally by [ListActions]{@link moon.ListActions} to ask\n* {@link moon.Header} to add fitting components to itself. Not intended for use\n* by end-developers.\n*\n* @event moon.ListActions#onRequestCreateListActions\n* @type {Object}\n* @property {Object} components - The drawer components to be created.\n* @private\n*/\n\n/**\n* Fires when when the [open]{@link moon.ListActions#open} state of the drawer has changed.\n*\n* @event moon.ListActions#onListActionOpenChanged\n* @type {Object}\n* @property {Boolean} open - `true` if the drawer is open; otherwise, `false`.\n* @public\n*/\n\n/**\n* {@link moon.ListActions} is a [control]{@link enyo.Control} designed to live within a\n* {@link moon.Header}. It is used to perform actions on an associated list of items. A\n* ListActions [object]{@glossary Object} combines an activating control with a drawer\n* containing a user-defined menu of selectable options for acting on items in the list.\n* When a menu item is selected, an action--such as filtering, sorting, moving, or\n* deleting--may be invoked in the application by handling change events from the selected\n* items.\n*\n* @class moon.ListActions\n* @extends enyo.GroupItem\n* @ui\n* @public\n*/\nvar ListActions = module.exports = kind(\n\t/** @lends moon.ListActions.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ListActions',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-list-actions',\n\n\t/**\n\t* @private\n\t*/\n\tkind: GroupItem,\n\n\t/**\n\t* @private\n\t*/\n\tmixins : [HistorySupport],\n\n\t/**\n\t* @private\n\t* @lends moon.ListActions.prototype\n\t*/\n\tpublished: {\n\n\t\t/**\n\t\t* If `true`, the drawer is expanded, showing this item's contents.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\topen: false,\n\n\t\t/**\n\t\t* If `true`, the drawer will automatically close when the user selects a menu item.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tautoCollapse: false,\n\n\t\t/**\n\t\t* A block of one or more controls to be displayed inside the list actions menu. By\n\t\t* default, each top-level [ListActions]{@link moon.ListActions} will have a\n\t\t* [defaultKind]{@link enyo.Control#defaultKind} of\n\t\t* [FittableRows]{@link enyo.FittableRows}, and should typically contain a\n\t\t* {@link moon.Divider} identifying the category and a {@link moon.Scroller} with\n\t\t* `fit: true` set on it, containing instances of {@link moon.CheckboxItem},\n\t\t* {@link moon.ToggleItem}, or {@link moon.SelectableItem} for setting options for\n\t\t* the underlying [panel]{@link moon.Panel}. Alternatively, a {@link moon.DataList}\n\t\t* may be used as the `fit: true` control for populating a data-bound list of options\n\t\t* (see below for limitations on using a `moon.DataList`).\n\t\t*\n\t\t* More than one option group may be added to the `listActions` block, in which options\n\t\t* are laid out horizontally by default, with the height of each `FittableRows` being\n\t\t* constrained to the height of the parent [Header]{@link moon.Header}. However, a\n\t\t* minimum width (300px) is enforced for each group, and if there are more groups than\n\t\t* will fit in the available horizontal space, all controls will instead be stacked\n\t\t* vertically. In this case, an outer scroller is enabled; the outer scroller scrolls\n\t\t* all groups vertically, and the `FittableRows` are reset to natural size based on\n\t\t* their content, effectively disabling any scrollers contained within, to prevent\n\t\t* nested scrolling.\n\t\t*\n\t\t* Note that the vertical stacking capability poses a limitation on using\n\t\t* `moon.DataList`. Since `moon.DataList` must always be allowed to scroll, it is\n\t\t* not suitable for use in a stacked scenario in which only one outer scroller is\n\t\t* used. As such, it cannot be used within a `ListActions` that may need to stack\n\t\t* vertically.\n\t\t*\n\t\t* Each group should have a string value set for the `action` property, as this will\n\t\t* be passed in all events that bubble from the `ListActions`, to allow the user to\n\t\t* identify which category changed.\n\t\t*\n\t\t* @type {Object[]}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tlistActions: null,\n\n\t\t/**\n\t\t* Source URL for icon image.\n\t\t*\n\t\t* @type {String|moon.ri.selectSrc~src}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ticonSrc: '',\n\n\t\t/**\n\t\t* Icon name to be used by the activator button (as in {@link moon.Icon} and\n\t\t* {@link moon.IconButton}).\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ticon: '',\n\n\t\t/**\n\t\t* By default, list action menus are 300px wide. Set this to `true` to instead have\n\t\t* the menus be proportionally sized within the available space. Note that a minimum\n\t\t* width of 300px is still respected; if all menus don't fit horizontally, they will\n\t\t* be stacked vertically.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tproportionalWidth: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonShow: '',\n\t\tonShown: '',\n\t\tonHide: '',\n\t\tonHidden: '',\n\t\tonRequestCreateListActions: '',\n\t\tonListActionOpenChanged: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents:[\n\t\t{name:'activator', kind: IconButton, classes: 'moon-list-actions-activator', ontap: 'expandContract'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tdrawerComponents: [\n\t\t{name: 'drawer', spotlightDisabled: true, kind: ListActionsDrawer, classes: 'list-actions-drawer', onComplete: 'drawerAnimationEnd', open: false, spotlight: 'container', spotlightModal:true, components: [\n\t\t\t{name: 'closeButton', kind: IconButton, icon: 'closex', classes: 'moon-popup-close moon-list-actions-close moon-neutral', ontap: 'expandContract', defaultSpotlightDown:'listActions'},\n\t\t\t{name: 'listActionsClientContainer', kind: Control, classes: 'enyo-fit moon-list-actions-client-container moon-neutral', components: [\n\t\t\t\t{name: 'listActions', kind: Scroller, classes: 'enyo-fit moon-list-actions-scroller', horizontal:'hidden', vertical:'hidden', onActivate: 'optionSelected', defaultSpotlightUp:'closeButton'}\n\t\t\t]}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: 'open', to: '$.drawer.open'},\n\t\t{from: 'iconSrc', to: '$.activator.src'},\n\t\t{from: 'icon', to: '$.activator.icon'},\n\t\t{from: 'disabled', to: '$.activator.disabled', oneWay: false}\n\t],\n\n\t/**\n\t* @fires moon.ListActions#onRequestCreateListActions\n\t* @private\n\t*/\n\tcreate: function() {\n\t\tGroupItem.prototype.create.apply(this, arguments);\n\t\tthis.doRequestCreateListActions({components: this.drawerComponents});\n\t\tif (!this.$.drawer) {\n\t\t\tthrow 'moon.ListActions must be created as a child of moon.Header';\n\t\t}\n\t\tthis.disabledChanged();\n\t\tthis.listActionsChanged();\n\t\tthis.drawerNeedsResize = true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trendered: function() {\n\t\tGroupItem.prototype.rendered.apply(this, arguments);\n\t\tif (this.open) {\n\t\t\t// Perform post-open work\n\t\t\tthis.drawerOpened(true);\n\t\t\t// Update stacking\n\t\t\tthis.resizeDrawer();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: function() {\n\t\tdispatcher.release(this.$.drawer);\n\t\tGroupItem.prototype.destroy.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function() {\n\t\tthis.addRemoveClass('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlistActionsChanged: function() {\n\t\tvar owner = this.hasOwnProperty('listActions') ? this.getInstanceOwner() : this;\n\t\tthis.listActions = this.listActions || [];\n\t\tthis.renderListActionComponents(owner);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trenderListActionComponents: function(owner) {\n\t\tthis.noAutoCollapse = true;\n\t\tthis.createListActionComponents(owner);\n\t\tthis.noAutoCollapse = false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateListActionComponents: function(owner) {\n\t\tvar listAction, i;\n\n\t\tthis.listActionComponents = [];\n\t\tfor (i = 0; (listAction = this.listActions[i]); i++) {\n\t\t\tthis.listActionComponents.push(this.createListActionComponent(listAction, owner));\n\t\t}\n\n\t\t// Increase width to 100% if there is only one list action\n\t\tif (this.proportionalWidth) {\n\t\t\tthis.$.drawer.addClass('proportional-width');\n\t\t\tvar w = 100 / this.listActionComponents.length;\n\t\t\tfor (i=0; i<this.listActionComponents.length; i++) {\n\t\t\t\tthis.listActionComponents[i].applyStyle('width', w + '%');\n\t\t\t}\n\t\t}\n\n\t\tif (this.hasNode()) {\n\t\t\tthis.$.listActions.render();\n\t\t}\n\t},\n\n\t/**\n\t* Creates a new list action component based on `listAction`.\n\t*\n\t* @private\n\t*/\n\tcreateListActionComponent: function(listAction, owner) {\n\t\tvar listActionComponent;\n\n\t\tlistAction.mixins = this.addListActionMixin(listAction);\n\t\tlistActionComponent = this.$.listActions.createComponent(listAction, {owner: owner, layoutKind: FittableRowsLayout});\n\t\tlistActionComponent.addClass('moon-list-actions-menu');\n\n\t\treturn listActionComponent;\n\t},\n\n\t/**\n\t* Adds a mixin to each list action menu that decorates `activate` events with the menu's\n\t* `action` property.\n\t*\n\t* @private\n\t*/\n\taddListActionMixin: function(listAction) {\n\t\tvar mixins = listAction.mixins || [];\n\t\tif (mixins.indexOf(ListActionActivationSupport) === -1) {\n\t\t\tmixins.push(ListActionActivationSupport);\n\t\t}\n\t\treturn mixins;\n\t},\n\n\t/**\n\t* Toggles value of `this.open`.\n\t*\n\t* @private\n\t*/\n\texpandContract: function(sender, e) {\n\t\tif (this.disabled) {\n\t\t\treturn true;\n\t\t}\n\t\tvar open = !this.getOpen();\n\t\tif (open) {\n\t\t\tthis.doShow();\n\t\t} else {\n\t\t\tthis.doHide();\n\t\t}\n\t\tthis.setOpen(open);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbeforeOpenDrawer: function(standardHeight, type) {\n\t\tthis.standardHeight = standardHeight;\n\t\tif (type !== 'large') {\n\t\t\tthis.set('stacked', false);\n\t\t}\n\t},\n\n\t//TODO: Remove the onListActionOpenChanged event. It will be deprecated in favor of the onShow/onHide events\n\t// once we communicate to SmartShare (the only app we could find that's handling this event).\n\t/**\n\t* @fires moon.ListActions#onListActionOpenChanged\n\t* @private\n\t*/\n\topenChanged: function(){\n\t\tthis.$.drawer.set('spotlightDisabled', !this.getOpen());\n\t\tthis.setActive(this.getOpen());\n\t\tthis.doListActionOpenChanged({open: this.open});\n\t\t// If opened, show drawer and resize it if needed\n\t\tif(this.open){\n\t\t\tif (this.drawerNeedsResize) {\n\t\t\t\tthis.resizeDrawer();\n\t\t\t\tthis.drawerNeedsResize = false;\n\t\t\t}\n\t\t\t// Capture onSpotlightFocus happening outside the drawer, so that we can prevent focus\n\t\t\t// from landing in the header beneath the drawer\n\t\t\tdispatcher.capture(this.$.drawer, {onSpotlightFocus: 'capturedSpotlightFocus'}, this);\n\n\t\t\tif (this.allowBackKey) {\n\t\t\t\tthis.pushBackHistory();\n\t\t\t}\n\t\t} else {\n\t\t\tdispatcher.release(this.$.drawer);\n\t\t}\n\t},\n\n\t/**\n\t* @fires moon.TooltipDecorator#onRequestMuteTooltip\n\t* @fires moon.TooltipDecorator#onRequestUnmuteTooltip\n\t* @private\n\t*/\n\tdrawerAnimationEnd: function(sender, event) {\n\t\tvar rendered = event && event.rendered;\n\n\t\t//on closed, hide drawer and spot _this.$.activator_\n\t\tif (!this.getOpen()) {\n\t\t\tthis.drawerClosed(rendered);\n\t\t}\n\t\t//on open, move top and spot _this.$.closeButton_\n\t\telse {\n\t\t\tthis.drawerOpened(rendered);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawerClosed: function (rendered) {\n\t\tif (this.generated && !rendered) {\n\t\t\tSpotlight.spot(this.$.activator);\n\t\t}\n\t\tthis.bubble('onRequestUnmuteTooltip');\n\n\t\tif (!rendered) this.doHidden();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrawerOpened: function (rendered) {\n\t\tif (this.resetScroller) {\n\t\t\tthis.$.listActions.scrollTo(0, 0);\n\t\t\tthis.resetScroller = false;\n\t\t}\n\t\tif (this.generated && !rendered) {\n\t\t\tSpotlight.spot(this.$.closeButton);\n\t\t}\n\t\tthis.bubble('onRequestMuteTooltip');\n\n\t\tthis.doShown();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tupdateStacking: function() {\n\t\tif (this.$.drawer.hasNode()) {\n\t\t\tthis.set('stacked', this.shouldStack());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshouldStack: function() {\n\t\t// Assumption: min-width of all listActionsComponents set to 300px in CSS\n\t\treturn this.$.listActions.getBounds().width < (300 * this.listActionComponents.length);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstackedChanged: function() {\n\t\tif (this.stacked) {\n\t\t\tthis.$.drawer.addClass('stacked');\n\t\t\tthis.stackMeUp();\n\t\t\t// When stacked, always have vertical scroller\n\t\t\tthis.$.listActions.setVertical('scroll');\n\t\t}\n\t\telse {\n\t\t\tthis.$.drawer.removeClass('stacked');\n\t\t\tthis.unStackMeUp();\n\t\t\tthis.$.listActions.setVertical('hidden');\n\t\t}\n\t\tthis.resetScroller = true;\n\t\tthis.$.listActions.resize();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstackMeUp: function() {\n\t\tvar optionGroup, i;\n\n\t\tfor (i = 0; (optionGroup = this.listActionComponents[i]); i++) {\n\t\t\t// Stacked contols get natural height (which prevents scrolling), such that they stack\n\t\t\t// within outer scroller which is allowed to scroll all controls; this is a problem for\n\t\t\t// DataLists, which require an explicit height, making them unsuitable for use in\n\t\t\t// stacked ListActions\n\t\t\toptionGroup.applyStyle('height', 'none');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tunStackMeUp: function() {\n\t\tvar containerHeight, optionGroup, i;\n\t\tif (this.standardHeight) {\n\t\t\tthis.$.drawer.applyStyle('height', dom.unit( ri.scale(this.standardHeight), 'rem'));\n\t\t}\n\t\tcontainerHeight = this.getContainerBounds().height;\n\n\t\tfor (i = 0; (optionGroup = this.listActionComponents[i]); i++) {\n\t\t\toptionGroup.applyStyle('height', dom.unit(containerHeight, 'rem'));\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleResize: function() {\n\t\tthis.resetCachedValues();\n\n\t\t// If drawer is collapsed, resize it the next time it is opened\n\t\tif (this.getOpen()) {\n\t\t\tthis.resizeDrawer();\n\t\t} else {\n\t\t\tthis.drawerNeedsResize = true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresizeDrawer: function() {\n\t\tthis.updateStacking();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\toptionSelected: function(sender, e) {\n\t\tthis.startJob('expandContractJob', 'expandContractJob', 300);\n\t},\n\n\texpandContractJob: function(sender, e) {\n\t\tif (this.getOpen() && this.autoCollapse && !this.noAutoCollapse) {\n\t\t\tthis.expandContract();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetContainerBounds: function() {\n\t\tthis.containerBounds = this.containerBounds || this.$.listActions.getBounds();\n\t\treturn this.containerBounds;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresetCachedValues: function() {\n\t\tthis.headerBounds = null;\n\t\tthis.clientBounds = null;\n\t\tthis.containerBounds = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcapturedSpotlightFocus: function(sender, e) {\n\t\t// We need to prevent header children below the drawer from being focused\n\t\tif (e.originator.isDescendantOf(this.$.drawer.parent) &&\n\t\t\t!e.originator.isDescendantOf(this.$.drawer)) {\n\t\t\tSpotlight.spot(this.$.drawer);\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbackKeyHandler: function () {\n\t\tif (this.open) {\n\t\t\tthis.setOpen(false);\n\t\t}\n\t\treturn true;\n\t}\n});\n\nListActions.ListActionActivationSupport = ListActionActivationSupport;\nListActions.ListActionsDrawer = ListActionsDrawer;","var\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tAccordion = require('../../../moonstone/lib/Accordion'),\n\tSelectableItem = require('../../../moonstone/lib/SelectableItem');\n\nmodule.exports = kind({\n\tname: 'moon.sample.AccordionSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, classes: 'enyo-fill moon-8h', components: [\n\t\t\t{kind: Divider, content: 'Not In Group'},\n\t\t\t{components: [\n\t\t\t\t{kind: Accordion, content: 'This is an accordion', components: [\n\t\t\t\t\t{content: 'Item One'},\n\t\t\t\t\t{content: 'Item Two'}\n\t\t\t\t]},\n\t\t\t\t{kind: Accordion, content: 'Pre-expanded accordion', open:true, components: [\n\t\t\t\t\t{content: 'Item Three'},\n\t\t\t\t\t{content: 'Item Four'}\n\t\t\t\t]},\n\t\t\t\t{kind: Accordion, content: 'This is an lonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnng title accordion', components: [\n\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooong Item One'},\n\t\t\t\t\t{content: 'Loooooooooooooooooooooooooooooong Item Two'}\n\t\t\t\t]},\n\t\t\t\t{kind: Accordion, content: 'Disabled accordion', disabled: true, components: [\n\t\t\t\t\t{content: 'Item One'},\n\t\t\t\t\t{content: 'Item Two'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'In Group'},\n\t\t\t{kind: Group, highlander:true, components: [\n\t\t\t\t{kind: Accordion, content: 'This is a grouped accordion', components: [\n\t\t\t\t\t{content: 'Item One'},\n\t\t\t\t\t{content: 'Item Two'}\n\t\t\t\t]},\n\t\t\t\t{kind: Accordion, open:true, content: 'This is another grouped accordion', components: [\n\t\t\t\t\t{content: 'Item Three'},\n\t\t\t\t\t{content: 'Item Four'}\n\t\t\t\t]},\n\t\t\t\t{kind: Accordion, content: 'This is another grouped accordion', components: [\n\t\t\t\t\t{content: 'Item Five'},\n\t\t\t\t\t{content: 'Item Six'}\n\t\t\t\t]},\n\t\t\t\t{kind: Accordion, content: 'This is another lonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnng title accordion', components: [\n\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooong Item Three'},\n\t\t\t\t\t{content: 'Loooooooooooooooooooooooooooooong Item Four'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'In Group using Grouped Selectable Items'},\n\t\t\t{kind: Group, groupName: 'menuItems', components: [\n\t\t\t\t{kind: Group, groupName: 'accordions', highlander:true, components: [\n\t\t\t\t\t{kind: Accordion, groupName: 'accordions', content: 'This is a grouped accordion', defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t{content: 'Item One', groupName: 'menuItems'},\n\t\t\t\t\t\t{content: 'Item Two', groupName: 'menuItems'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, groupName: 'accordions', open:true, content: 'This is another grouped accordion', defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t{content: 'Item Three', groupName: 'menuItems'},\n\t\t\t\t\t\t{content: 'Item Four', groupName: 'menuItems'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, groupName: 'accordions', content: 'This is another grouped accordion', defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t{content: 'Item Five', groupName: 'menuItems'},\n\t\t\t\t\t\t{content: 'Item Six', groupName: 'menuItems'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, groupName: 'accordions', content: 'This is another lonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnng title accordion', defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooong Item Three', groupName: 'menuItems'},\n\t\t\t\t\t\t{content: 'Loooooooooooooooooooooooooooooong Item Four', groupName: 'menuItems'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t]\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider')\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.BodyLargeTextSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Divider, content: 'Options'},\n\t\t\t{kind: ToggleButton, small: true, content: 'Large Body Text', ontap: 'largeTapped'},\n\n\t\t\t{kind: Divider, content: 'BodyText', style: 'margin-top: 1rem'},\n\t\t\t{kind: BodyText, content: 'Pixar genius reigns in this funny romantic comedy, which stars a robot who says absolutely nothing for a full 25 minutes yet somehow completely transfixes and endears himself to the audience within the first few minutes of the film. As the last robot left on earth, Wall-E (voiced by Ben Burtt) is one small robot--with a big, big heart--who holds the future of earth and mankind squarely in the palm of his metal hand. He\\'s outlasted all the \\'Waste Allocation Load Lifter Earth-Class\\' robots that were assigned some 700 years ago to clean up the environmental mess that man made of earth while man vacationed aboard the <a href=\\'\\'>luxury spaceship Axiom</a>.'},\n\t\t\t{kind: BodyText, content: 'Pixar genius reigns in this funny romantic comedy, which stars a robot who says absolutely nothing for a full 25 minutes yet somehow completely transfixes and endears himself to the audience within the first few minutes of the film. As the last robot left on earth, Wall-E (voiced by Ben Burtt) is one small robot--with a big, big heart--who holds the future of earth and mankind squarely in the palm of his metal hand. He\\'s outlasted all the \\'Waste Allocation Load Lifter Earth-Class\\' robots that were assigned some 700 years ago to clean up the environmental mess that man made of earth while man vacationed aboard the luxury spaceship Axiom.'},\n\t\t\t{kind: BodyText, centered: true, content: 'Pixar genius reigns in this funny romantic comedy, which stars a robot who says absolutely nothing for a full 25 minutes yet somehow completely transfixes and endears himself to the audience within the first few minutes of the film. As the last robot left on earth, Wall-E (voiced by Ben Burtt) is one small robot--with a big, big heart--who holds the future of earth and mankind squarely in the palm of his metal hand. He\\'s outlasted all the \\'Waste Allocation Load Lifter Earth-Class\\' robots that were assigned some 700 years ago to clean up the environmental mess that man made of earth while man vacationed aboard the luxury spaceship Axiom.'},\n\t\t\t{kind: BodyText, content: '      ,                      .        , -E (   )     -   ,  -             .     \\'      \\'                       .'},\n\t\t\t{kind: BodyText, content: '                                     .        -E (    )     -     -             .    \\'                                .'}\n\t\t]}\n\t],\n\tlargeTapped: function (sender, event) {\n\t\tvar enabled = sender.value;\n\t\tthis.$.scroller.getClientControls().forEach(function (control) {\n\t\t\tif (control.kind === BodyText) {\n\t\t\t\tcontrol.addRemoveClass('moon-body-large-text', enabled);\n\t\t\t}\n\t\t});\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tdrag = require('../../../enyo/lib/drag'),\n\tControl = require('../../../enyo/lib/Control'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tTooltipDecorator = require('../../../moonstone/lib/TooltipDecorator'),\n\tTooltip = require('../../../moonstone/lib/Tooltip'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tCaptionDecorator = require('../../../moonstone/lib/CaptionDecorator'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem'),\n\tBodyText = require('../../../moonstone/lib/BodyText');\n\nvar ButtonSample = module.exports = kind({\n\tname: 'moon.sample.ButtonSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit moon-button-sample',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Control, classes: 'moon-button-sample-wrapper', components: [\n\n\t\t\t\t{kind: Divider, content: 'Buttons:'},\n\t\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t\t{name: 'aButton', kind: Button, minWidth: false, content: 'A', ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: Tooltip, content: 'minWidth: false'}\n\t\t\t\t]},\n\t\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t\t{name: 'bButton', kind: Button, content: 'B', ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: Tooltip, content: 'minWidth: true'}\n\t\t\t\t]},\n\t\t\t\t{name: 'button', kind: Button, content: 'Button', uppercase : false, ontap: 'buttonTapped'},\n\t\t\t\t{name: 'disabledButton', kind: Button, disabled: true, content: 'Disabled Button', ontap: 'buttonTapped'},\n\t\t\t\t{name: 'longButton', kind: Button, content: 'Looooooooooooooooong Button', ontap: 'buttonTapped'},\n\t\t\t\t{name: 'spacesButton', kind: Button, content: 'Button   with   extra   spaces', ontap: 'buttonTapped'},\n\t\t\t\t{kind: Control, tag: 'br'},\n\t\t\t\t{kind: Control, tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Small Buttons:'},\n\t\t\t\t{name: 'smallAButton', kind: Button, small: true, minWidth: false, content: 'A', ontap: 'buttonTapped'},\n\t\t\t\t{name: 'smallBButton', kind: Button, small: true, content: 'B', ontap: 'buttonTapped'},\n\t\t\t\t{name: 'smallButton', kind: Button, small: true, content: 'Button', ontap: 'buttonTapped'},\n\t\t\t\t{name: 'smallDisabledButton', kind: Button, small: true, disabled: true, content: 'Disabled Button', ontap: 'buttonTapped'},\n\t\t\t\t{name: 'smallLongButton', kind: Button, small: true, content: 'Loooooooooooooooooooooooong Button', ontap: 'buttonTapped'},\n\t\t\t\t{name: 'smallSpacesButton', kind: Button, small:true, content: 'Button   with   extra   spaces', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleItem, classes: 'tap-area-toggle-container', content: 'Show Tap Area', onActivate: 'showSmallButtonTapArea'},\n\t\t\t\t{kind: Control, tag: 'br'},\n\t\t\t\t{kind: Control, tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Captioned Buttons:'},\n\t\t\t\t{kind: CaptionDecorator, side: 'top', content: 'Pow', components: [\n\t\t\t\t\t{name: 'captionedAButton', kind: Button, content: 'A', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'right', content: 'Boom', components: [\n\t\t\t\t\t{name: 'captionedBButton', kind: Button, content: 'B', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'bottom', content: 'Crash', components: [\n\t\t\t\t\t{name: 'captionedCButton', kind: Button, content: 'C', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'left', content: 'Bang', components: [\n\t\t\t\t\t{name: 'captionedDButton', kind: Button, content: 'D', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: Control, tag: 'br'},\n\t\t\t\t{kind: Control, tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Captioned Buttons with showOnFocus option:'},\n\t\t\t\t{kind: CaptionDecorator, side: 'top', showOnFocus: true, content: 'Pow', components: [\n\t\t\t\t\t{name: 'showOnFocusCaptionTopButton', kind: Button, content: 'Top', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'bottom', showOnFocus: true, content: 'Crash', components: [\n\t\t\t\t\t{name: 'showOnFocusCaptionBottomButton', kind: Button, content: 'Bottom', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{style: 'display:inline-block;', classes: 'moon-2h'},\n\t\t\t\t{kind: CaptionDecorator, side: 'left', showOnFocus: true, content: 'Bang', components: [\n\t\t\t\t\t{name: 'showOnFocusCaptionLeftButton', kind: Button, content: 'Left', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'right', showOnFocus: true, content: 'Boom', components: [\n\t\t\t\t\t{name: 'showOnFocusCaptionRightButton', kind: Button, content: 'Right', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: Control, tag: 'br'},\n\t\t\t\t{kind: Control, tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Grouped Buttons:'},\n\t\t\t\t{kind: Group, classes: 'moon-button-sample-group', components: [\n\t\t\t\t\t{name: 'appleButton', kind: Button, content: 'Apple', ontap: 'buttonTapped'},\n\t\t\t\t\t{name: 'bananaButton', kind: Button, content: 'Banana', ontap: 'buttonTapped'},\n\t\t\t\t\t{name: 'saskatoonberryButton', kind: Button, content: 'Saskatoonberry', ontap: 'buttonTapped'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'result', allowHtml: true, content: 'No button pressed yet.'}\n\t],\n\tbuttonTapped: function(inSender, inEvent) {\n\t\tthis.$.result.setContent('&quot;' + inSender.name + '&quot; pressed.');\n\t},\n\tshowSmallButtonTapArea: function(inSender, inEvent) {\n\t\tif (inEvent.checked) {\n\t\t\tthis.$.smallAButton.addClass('visible-tap-area');\n\t\t\tthis.$.smallBButton.addClass('visible-tap-area');\n\t\t\tthis.$.smallButton.addClass('visible-tap-area');\n\t\t\tthis.$.smallDisabledButton.addClass('visible-tap-area');\n\t\t\tthis.$.smallLongButton.addClass('visible-tap-area');\n\t\t\tthis.$.smallSpacesButton.addClass('visible-tap-area');\n\t\t} else {\n\t\t\tthis.$.smallAButton.removeClass('visible-tap-area');\n\t\t\tthis.$.smallBButton.removeClass('visible-tap-area');\n\t\t\tthis.$.smallButton.removeClass('visible-tap-area');\n\t\t\tthis.$.smallDisabledButton.removeClass('visible-tap-area');\n\t\t\tthis.$.smallLongButton.removeClass('visible-tap-area');\n\t\t\tthis.$.smallSpacesButton.removeClass('visible-tap-area');\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tBodyText = require('../../../moonstone/lib/BodyText');\n\nmodule.exports = kind({\n\tname: 'smoon.sample.CheckboxItemSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-hspacing', controlClasses: 'moon-5h', components: [\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Checkbox Items'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Option 1', checked: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Option 2', onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, disabled: true, content: 'Disabled', onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Option 4', checked: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'This is a verrry long option 5 with a custom checkmark', icon: '', src: 'assets/icon-button-enyo-logo.png', onchange: 'itemChanged'}\n\t\t\t\t]},\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Right-Handed Checkbox Items'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Option 1', checked: true, checkboxOnRight: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Option 2', checkboxOnRight: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, disabled: true, content: 'Disabled', checkboxOnRight: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Option 4', checked: true, checkboxOnRight: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'This is a verrry long option 5', checkboxOnRight: true, onchange: 'itemChanged'}\n\t\t\t\t]},\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Checkbox Item Group'},\n\t\t\t\t\t{kind: Group, onActivate: 'groupChanged', components: [\n\t\t\t\t\t\t{kind: CheckboxItem, content: 'Group Option 1'},\n\t\t\t\t\t\t{kind: CheckboxItem, content: 'Group Option 2', checked: true},\n\t\t\t\t\t\t{kind: CheckboxItem, disabled: true, content: 'Disabled'},\n\t\t\t\t\t\t{kind: CheckboxItem, content: 'Group Option 4'},\n\t\t\t\t\t\t{kind: CheckboxItem, content: 'Group Option 5'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{components: [\n\t\t\t{kind: Divider, content: 'Result'},\n\t\t\t{kind: BodyText, name: 'result', content: 'Nothing selected'}\n\t\t]}\n\t],\n\titemChanged: function(inSender, inEvent) {\n\t\tthis.$.result.setContent(inSender.getContent() + ' was ' + (inSender.getChecked() ? ' selected.' : 'deselected.'));\n\t},\n\tgroupChanged: function(inSender, inEvent) {\n\t\tif (inEvent.toggledControl.getChecked()) {\n\t\t\tvar selected = inEvent.toggledControl.getContent();\n\t\t\tthis.$.result.setContent(selected + ' was selected.');\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\t$L = require('../../../enyo/lib/hooks').$L;\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tClock = require('../../../moonstone/lib/Clock'),\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ClockSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Clock, name: 'clock'},\n\t\t{classes: 'moon-1v'},\n\t\t{classes: 'moon-hspacing', components: [\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, name: 'input', value: 'Jan 01 2013 11:22:59'}\n\t\t\t]},\n\t\t\t{kind: Button, small:true, content: 'Set Time', ontap: 'setTime'},\n\t\t\t{kind: Button, small:true, content: 'Set Static Time', ontap: 'setStaticTime'},\n\t\t\t{kind: Button, small:true, content: 'Reset to Current', ontap: 'resetTime'}\n\t\t]},\n\t\t{classes: 'moon-1v'},\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-5h', components: [\n\t\t\t\t{name: 'localePicker', kind: ExpandablePicker, noneText: $L('No Locale Selected'), content: 'Choose Locale', onChange: 'setLocale', components: [\n\t\t\t\t\t{content: 'Use Default Locale', active: true},\n\t\t\t\t\t{content: 'en-US'},\n\t\t\t\t\t{content: 'ko-KR'},\n\t\t\t\t\t{content: 'zh-TW'},\n\t\t\t\t\t{content: 'fa-IR'},\n\t\t\t\t\t{content: 'th-TH'},\t//Thailand\n\t\t\t\t\t{content: 'en-CA'},\n\t\t\t\t\t{content: 'en-IE'},\n\t\t\t\t\t{content: 'en-GB'},\n\t\t\t\t\t{content: 'en-MX'},\n\t\t\t\t\t{content: 'de-DE'},\n\t\t\t\t\t{content: 'fr-FR'},\n\t\t\t\t\t{content: 'fr-CA'},\n\t\t\t\t\t{content: 'it-IT'},\n\t\t\t\t\t{content: 'es-ES'},\n\t\t\t\t\t{content: 'es-MX'},\n\t\t\t\t\t{content: 'es-US'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t],\n\tcreate: function(){\n\t\tthis.inherited(arguments);\n\t\tif (!window.ilib) {\n\t\t\tthis.$.localePicker.hide();\n\t\t\tthis.log('iLib not present -- hiding locale picker');\n\t\t}\n\t},\n\tsetLocale: function(inSender, inEvent){\n\t\tvar locale = inEvent.selected.content,\n\t\t\tval = (locale == 'Use Default Locale') ? null : locale;\n\t\tenyo.updateLocale(locale);\n\t\tthis.$.clock.setLocale(val);\n\t\treturn true;\n\t},\n\tsetTime: function() {\n\t\tthis.$.clock.setDate(new Date(this.$.input.getValue()));\n\t},\n\tsetStaticTime: function() {\n\t\tvar d = this.$.input.getValue() ? new Date(this.$.input.getValue()) : new Date();\n\t\t// We increment the JS month value so that it is 1-based\n\t\tthis.$.clock.setDate({year: d.getFullYear(), month: d.getMonth()+1, day: d.getDate(), hour: d.getHours(), min: d.getMinutes(), sec: d.getSeconds()});\n\t},\n\tresetTime: function() {\n\t\tthis.$.clock.setDate(null);\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tExpandableInput = require('../../../moonstone/lib/ExpandableInput'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ExpandableInputSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, horizontal: 'hidden', fit: true, components: [\n\t\t\t{classes:'moon-5h', components: [\n\t\t\t\t{kind: ExpandableInput, oninput:'inputChanging', onChange:'inputChanged', content: 'Input', noneText: 'No Input'},\n\t\t\t\t{kind: ExpandableInput, oninput:'inputChanging', onChange:'inputChanged', content: 'Input with Placeholder', noneText: 'No Input', placeholder: 'Placeholder'},\n\t\t\t\t{kind: ExpandableInput, oninput:'inputChanging', onChange:'inputChanged', content: 'Input with Value', noneText: 'No Input', placeholder: 'Placeholder', value: 'Initial value'},\n\t\t\t\t{kind: ExpandableInput, oninput:'inputChanging', onChange:'inputChanged', content: 'Disabled Input', noneText: 'No Input', disabled: true, value: 'I am disabled.'},\n\t\t\t\t{kind: ExpandableInput, oninput:'inputChanging', onChange:'inputChanged', content: 'Input with loooooooooooooooong text truncation', noneText: 'No Input with loooooooooooooooooong text truncation'},\n\t\t\t\t{kind: ExpandableInput, oninput:'inputChanging', onChange:'inputChanged', content: 'Input with no value or noneText'}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'console', content: 'Input:', allowHtml: true}\n\t],\n\tinputChanging: function(inSender, inEvent) {\n\t\tthis.$.console.setContent('<em>'+inSender.getContent() + '</em> changing: \\'' + inEvent.originator.getValue() + '\\'');\n\t},\n\tinputChanged: function(inSender, inEvent) {\n\t\tthis.$.console.setContent('<em>'+inSender.getContent() + '</em> changed to: \\'' + inSender.getValue() + '\\'');\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tExpandableListItem = require('../../../moonstone/lib/ExpandableListItem'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ExpandableListItemSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\thandlers: {\n\t\tonActivate: 'activateHandler'\n\t},\n\tcomponents: [\n\t\t{kind: Scroller, horizontal: 'hidden', fit: true, components: [\n\t\t\t{classes: 'moon-5h', components: [\n\t\t\t\t{kind: ExpandableListItem, content: 'Expandable ListItem', components: [\n\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t]},\n\t\t\t\t{kind: ExpandableListItem, disabled:true, content: 'Disabled ListItem', components: [\n\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t]},\n\t\t\t\t{kind: ExpandableListItem, content: 'Pre-expanded ListItem', open: true, components: [\n\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t]},\n\t\t\t\t{kind: ExpandableListItem, content: 'Bottom-locking', lockBottom: true, open: true, components: [\n\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t]},\n\t\t\t\t{kind: ExpandableListItem, content: 'Auto-collapsing', autoCollapse: true, components: [\n\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t]},\n\t\t\t\t{kind: 'enyo.Group', highlander: true, components: [\n\t\t\t\t\t{kind: ExpandableListItem,  open: true,\n\t\t\t\t\t\tcontent: 'This is a grouped ExpandableListItem', components: [\n\t\t\t\t\t\t\t{content: 'Item One'},\n\t\t\t\t\t\t\t{content: 'Item Two'}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{kind: ExpandableListItem,\n\t\t\t\t\t\tcontent: 'This is another grouped ExpandableListItem', components: [\n\t\t\t\t\t\t\t{content: 'Item Three'},\n\t\t\t\t\t\t\t{content: 'Item Four'}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{kind: ExpandableListItem,\n\t\t\t\t\t\tcontent: 'This is yet another grouped ExpandableListItem', components: [\n\t\t\t\t\t\t\t{content: 'Item Five'},\n\t\t\t\t\t\t\t{content: 'Item Six'}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'console', content: 'Event'}\n\t],\n\tactivateHandler: function(sender, sender) {\n\t\tif (this.generated && sender.originator instanceof ExpandableListItem) {\n\t\t\tthis.$.console.setContent(sender.originator.getContent() + ' is now ' + (sender.originator.getActive() ? 'open' : 'closed'));\n\t\t}\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tExpandableText = require('../../../moonstone/lib/ExpandableText'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ExpandableTextSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true,  components: [\n\t\t\t{kind: Divider, content: '#1: Basic, No Expansion Needed'},\n\t\t\t{kind: ExpandableText, onExpandCollapse: 'collapsedChanged', content: 'Pixar genius reigns in this funny romantic comedy.'},\n\t\t\t{tag: 'br'},\n\t\t\t\n\t\t\t{kind: Divider, content: '#2: Basic'},\n\t\t\t{kind: ExpandableText, onExpandCollapse: 'collapsedChanged', content: 'Pixar genius reigns in this funny romantic comedy, which stars a robot who says absolutely nothing for a full 25 minutes yet somehow completely transfixes and endears himself to the audience within the first few minutes of the film. As the last robot left on earth, Wall-E (voiced by Ben Burtt) is one small robot--with a big, big heart--who holds the future of earth and mankind squarely in the palm of his metal hand. He\\'s outlasted all the \\'Waste Allocation Load Lifter Earth-Class\\' robots that were assigned some 700 years ago to clean up the environmental mess that man made of earth while man vacationed aboard the luxury spaceship Axiom.'},\n\t\t\t{tag: 'br'},\n\t\t\t\n\t\t\t{kind: Divider, content: '#3: Collapsed: false'},\n\t\t\t{kind: ExpandableText, onExpandCollapse: 'collapsedChanged', collapsed: false, content: 'Pixar genius reigns in this funny romantic comedy, which stars a robot who says absolutely nothing for a full 25 minutes yet somehow completely transfixes and endears himself to the audience within the first few minutes of the film. As the last robot left on earth, Wall-E (voiced by Ben Burtt) is one small robot--with a big, big heart--who holds the future of earth and mankind squarely in the palm of his metal hand. He\\'s outlasted all the \\'Waste Allocation Load Lifter Earth-Class\\' robots that were assigned some 700 years ago to clean up the environmental mess that man made of earth while man vacationed aboard the luxury spaceship Axiom.'},\n\t\t\t{tag: 'br'},\n\t\t\t\n\t\t\t{kind: Divider, content: '#4: MaxLines: 1'},\n\t\t\t{kind: ExpandableText, onExpandCollapse: 'collapsedChanged', maxLines: 1, content: 'Pixar genius reigns in this funny romantic comedy, which stars a robot who says absolutely nothing for a full 25 minutes yet somehow completely transfixes and endears himself to the audience within the first few minutes of the film. As the last robot left on earth, Wall-E (voiced by Ben Burtt) is one small robot--with a big, big heart--who holds the future of earth and mankind squarely in the palm of his metal hand. He\\'s outlasted all the \\'Waste Allocation Load Lifter Earth-Class\\' robots that were assigned some 700 years ago to clean up the environmental mess that man made of earth while man vacationed aboard the luxury spaceship Axiom.'}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'console', content: 'No change yet'}\n\t],\n\tcollapsedChanged: function(inSender, inEvent) {\n\t\tthis.$.console.setContent(inSender.name + (inSender.collapsed ? ' Collapsed' : ' Expanded'));\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tTable = require('../../../enyo/lib/Table');\n\nvar\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tDivider = require('../../../moonstone/lib/Divider');\n\nmodule.exports = kind({\n\tname: 'moon.sample.FontSample',\n\tkind: 'moon.Scroller',\n\tclasses: 'moon enyo-unselectable enyo-fit moon-font-sample',\n\tcomponents: [\n\t\t{kind: 'moon.Divider', content: 'Latin Font'},\n\t\t{kind: 'enyo.Table', components: [\n\t\t\t{classes: 'moon-header-text', components: [\n\t\t\t\t{content: 'HEADER'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'MIXED'}\n\t\t\t]},\n\t\t\t{classes: 'moon-large-text', components: [\n\t\t\t\t{content: 'Large Text'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-sub-header-text', components: [\n\t\t\t\t{content: 'Sub-header'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-large-button-text', components: [\n\t\t\t\t{content: 'LARGE BUTTON'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'MIXED'}\n\t\t\t]},\n\t\t\t{classes: 'moon-small-button-text', components: [\n\t\t\t\t{content: 'SMALL BUTTON'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'MIXED'}\n\t\t\t]},\n\t\t\t{classes: 'moon-body-text', components: [\n\t\t\t\t{content: 'Body Text'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-divider-text', components: [\n\t\t\t\t{content: 'Divider'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-superscript', components: [\n\t\t\t\t{content: 'Superscript'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-pre-text', components: [\n\t\t\t\t{content: 'Pre Text'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]}\n\t\t]},\n\t\t{tag: 'br'},\n\t\t{kind: 'moon.Divider', content: 'Non-latin Font'},\n\t\t{kind: 'enyo.Table', classes: 'enyo-locale-non-latin', components: [\n\t\t\t{classes: 'moon-header-text', components: [\n\t\t\t\t{content: 'HEADER'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'MIXED'}\n\t\t\t]},\n\t\t\t{classes: 'moon-large-text', components: [\n\t\t\t\t{content: 'Large Text'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-sub-header-text', components: [\n\t\t\t\t{content: 'Sub-header'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-large-button-text', components: [\n\t\t\t\t{content: 'LARGE BUTTON'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'MIXED'}\n\t\t\t]},\n\t\t\t{classes: 'moon-small-button-text', components: [\n\t\t\t\t{content: 'SMALL BUTTON'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'MIXED'}\n\t\t\t]},\n\t\t\t{classes: 'moon-body-text', components: [\n\t\t\t\t{content: 'Body Text'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-divider-text', components: [\n\t\t\t\t{content: 'Divider'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-superscript', components: [\n\t\t\t\t{content: 'Superscript'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]},\n\t\t\t{classes: 'moon-pre-text', components: [\n\t\t\t\t{content: 'Pre Text'},\n\t\t\t\t{content: ''},\n\t\t\t\t{content: 'Mixed'}\n\t\t\t]}\n\t\t]}\n\t]\n});\n\n// moon-header-text\n// moon-superscript\n// moon-pre-text\n// moon-large-text\n// moon-sub-header-text\n// moon-divider-text\n// moon-body-text\n// moon-large-button-text\n// moon-small-button-text\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tFormCheckbox = require('../../../moonstone/lib/FormCheckbox'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.FormCheckboxSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-hspacing', controlClasses: 'moon-5h', components: [\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'FormCheckbox Items (Default)'},\n\t\t\t\t\t{kind: FormCheckbox, content: 'Option 1', checked: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: FormCheckbox, content: 'Option 2', onchange: 'itemChanged'},\n\t\t\t\t\t{kind: FormCheckbox, disabled: true, content: 'Disabled', onchange: 'itemChanged'},\n\t\t\t\t\t{kind: FormCheckbox, content: 'Option 4', checked: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: FormCheckbox, content: 'This is a verrry long option 5', onchange: 'itemChanged'}\n\t\t\t\t]},\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'FormCheckbox Item (Group)'},\n\t\t\t\t\t{kind: Group, onActivate: 'groupChanged', components: [\n\t\t\t\t\t\t{kind: FormCheckbox, content: 'Group Option 1'},\n\t\t\t\t\t\t{kind: FormCheckbox, content: 'Group Option 2', checked: true},\n\t\t\t\t\t\t{kind: FormCheckbox, disabled: true, content: 'Disabled'},\n\t\t\t\t\t\t{kind: FormCheckbox, content: 'Group Option 4'},\n\t\t\t\t\t\t{kind: FormCheckbox, content: 'Group Option 5'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{components: [\n\t\t\t{kind: Divider, content: 'Result'},\n\t\t\t{kind: BodyText, name: 'result', content: 'Nothing selected'}\n\t\t]}\n\t],\n\titemChanged: function(inSender, inEvent) {\n\t\tthis.$.result.setContent(inSender.getContent() + ' was ' + (inSender.getChecked() ? ' selected.' : 'deselected.'));\n\t},\n\tgroupChanged: function(inSender, inEvent) {\n\t\tif (inEvent.toggledControl.getChecked()) {\n\t\t\tvar selected = inEvent.toggledControl.getContent();\n\t\t\tthis.$.result.setContent(selected + ' was selected.');\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tHeader = require('../../../moonstone/lib/Header'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\nmodule.exports = kind({\n\tname: 'moon.sample.HeaderSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit moon-header-sample',\n\tcomponents: [\n\t\t{kind: Scroller, fit:true, components: [\n\t\t\t{kind: Header, name: 'largeHeader', content: 'Large Header', titleAbove: '02', titleBelow: 'Sub Header', subTitleBelow: 'Sub-sub Header', components: [\n\t\t\t\t{kind: Button, small: true, content: 'Description', ontap: 'describeLarge'},\n\t\t\t\t{kind: Button, small: true, content: 'How to use', ontap: 'howToUseLarge'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Header, name: 'mediumHeader', content: 'Medium Header', type: 'medium', titleAbove: '03', titleBelow: 'Sub Header', subTitleBelow: '', components: [\n\t\t\t\t{kind: Button, small: true, content: 'Description', ontap: 'describeMedium'},\n\t\t\t\t{kind: Button, small: true, content: 'How to use', ontap: 'howToUseMedium'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Header, name: 'smallHeader', content: 'Small Header', type: 'small', titleAbove: '04', subTitle: 'Sub Title', titleBelow: 'Sub Header', subTitleBelow: 'Sub-sub Header', components: [\n\t\t\t\t{kind: Button, content: 'Description', ontap: 'describeSmall'},\n\t\t\t\t{kind: Button, small: true, content: 'How to use', ontap: 'howToUseSmall'},\n\t\t\t\t{kind: Button, small: true, content: 'RTL content', ontap: 'rtlSmall'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Header, content: 'Varied Alignment', titleAbove: '02', titleBelow: 'Panel actions can be positioned on left or right', components: [\n\t\t\t\t{kind: Button, small:true, content: 'Left', classes: 'moon-header-left'},\n\t\t\t\t{kind: Button, small:true, content: 'aligned', classes: 'moon-header-left'},\n\t\t\t\t{kind: Button, small:true, content: 'Right'},\n\t\t\t\t{kind: Button, small:true, content: 'Aligned'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Header, name: 'switchHeader', content: 'Static Title', placeholder: 'Type Here', titleAbove: '03', titleBelow: 'Header title can be changed to an input', subTitleBelow: 'Press \\'Switch Mode\\' button, which sets `inputMode:true`.', components: [\n\t\t\t\t{kind: Button, small:true, content: 'Switch Mode', ontap: 'switchMode', header: 'switchHeader'}\n\t\t\t]},\n\t\t\t{kind: Header, name: 'inputHeaderDismiss', inputMode: true, dismissOnEnter: true, content: 'Input-style Header', placeholder: 'Dismiss on Enter', titleAbove: '03', titleBelow: 'InputHeader blurs-focus when pressing Enter.', subTitleBelow: '', onchange: 'handleChange'},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Header, name: 'imageHeader', content: 'Header with Image', subTitle: 'Sub title can be seen only in small header. And can flow with title when marquee starts.', titleAbove: '02', titleBelow: 'Sub Header', subTitleBelow: 'Sub-sub Header', fullBleedBackground: false, backgroundSrc: 'http://lorempixel.com/g/1920/360/abstract/2/', components: [\n\t\t\t\t{kind: ToggleButton, small: true, toggleOnLabel: 'Full Bleed: true', toggleOffLabel: 'Full Bleed: false', ontap: 'handleToggle', classes: 'moon-header-left'},\n\t\t\t\t{kind: Button, small: true, content: 'large', ontap: 'resizeImageHeader'},\n\t\t\t\t{kind: Button, small: true, content: 'medium', ontap: 'resizeImageHeader'},\n\t\t\t\t{kind: Button, small: true, content: 'small', ontap: 'resizeImageHeader'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Header, name: 'marqueeHeader', content: 'Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>', allowHtml:true, titleAbove: '02', titleBelow: 'Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span> Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>   Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>   Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>', subTitleBelow: 'Titles will truncate/marquee', components: [\n\t\t\t\t{kind: Button, small:true, content: 'Switch Mode', ontap: 'switchMode', header: 'marqueeHeader'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Header, name: 'marqueeHeaderSmall', small:true, content: 'Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>', allowHtml:true, titleAbove: '02', titleBelow: 'Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span> Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>   Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>   Header           yltunniste            Kopfzeile      <span style=\\'text-transform:none\\'>j p q g</span>', subTitleBelow: 'Titles will truncate/marquee', components: [\n\t\t\t\t{kind: Button, small:true, content: 'Switch Mode', ontap: 'switchMode', header: 'marqueeHeaderSmall'}\n\t\t\t]}\n\t\t]}\n\t],\n\tdescribeLarge: function (sender, event) {\n\t\tthis.$.largeHeader.setTitleBelow('This is the default header.');\n\t},\n\thowToUseLarge: function (sender, event) {\n\t\tthis.$.largeHeader.setSubTitleBelow('Large (default) header will be used if you don\\'t specify the `type` property.');\n\t},\n\tdescribeMedium: function (sender, event) {\n\t\tthis.$.mediumHeader.setTitleBelow('Medium header flattens the button area and the titleBelow areas together for a more compact header.');\n\t},\n\thowToUseMedium: function (sender, event) {\n\t\tthis.$.mediumHeader.setSubTitleBelow('Set `type` property to \\'medium\\' to use the medium header and long very subTitleBelow.');\n\t},\n\tdescribeSmall: function (sender, event) {\n\t\tthis.$.smallHeader.setTitle('Small header flattens the buttons down to the title area, uses a smaller title font, and has no `titleBelow`.');\n\t},\n\thowToUseSmall: function (sender, event) {\n\t\tthis.$.smallHeader.setTitle('Set `type` property to \\'small\\' to use the small header.');\n\t},\n\trtlSmall: function (sender, event) {\n\t\tthis.$.smallHeader.set('title', ' Small Header');\n\t\tthis.$.smallHeader.set('titleBelow', ' ');\n\t},\n\thandleToggle: function (sender, event) {\n\t\tthis.$.imageHeader.setFullBleedBackground(sender.value);\n\t},\n\tresizeImageHeader: function (sender, event) {\n\t\tthis.$.imageHeader.setType(sender.content);\n\t},\n\tswitchMode: function (sender, event) {\n\t\tvar header = this.$[sender.header];\n\t\theader.setInputMode(!header.getInputMode());\n\t},\n\thandleChange: function (sender, event) {\n\t\tthis.$.inputHeaderDismiss.set('subTitleBelow', 'Changed: ' + sender.getValue());\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.IconButtonSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{fit:true, components: [\n\t\t\t\t{kind: Divider, content: 'Font-based Icon Buttons: '},\n\t\t\t\t{kind: IconButton, icon: 'drawer', small: false, ontap: 'buttonTapped'},\n\t\t\t\t{kind: IconButton, icon: 'search', small: false, ontap: 'buttonTapped'},\n\t\t\t\t{kind: IconButton, icon: 'drawer', ontap: 'buttonTapped'},\n\t\t\t\t{kind: IconButton, icon: 'search', ontap: 'buttonTapped'},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{kind: Divider, content: 'Image Asset Icon Buttons: '},\n\t\t\t\t{kind: IconButton, src: 'assets/icon-list.png', small: false, ontap: 'buttonTapped'},\n\t\t\t\t{kind: IconButton, src: 'assets/icon-album.png', small: false, ontap: 'buttonTapped'},\n\t\t\t\t{kind: IconButton, src: 'assets/icon-list.png', ontap: 'buttonTapped'},\n\t\t\t\t{kind: IconButton, src: 'assets/icon-album.png', ontap: 'buttonTapped'},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{kind: Divider, content: 'Disabled Icon Buttons: '},\n\t\t\t\t{kind: IconButton, icon: 'drawer', small: false, ontap: 'buttonTapped', disabled: true},\n\t\t\t\t{kind: IconButton, icon: 'search', ontap: 'buttonTapped', disabled: true},\n\t\t\t\t{kind: IconButton, src: 'assets/icon-list.png', small: false, ontap: 'buttonTapped', disabled: true},\n\t\t\t\t{kind: IconButton, src: 'assets/icon-album.png', ontap: 'buttonTapped', disabled: true},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{kind: Divider, content: 'Grouped Icon Buttons: '},\n\t\t\t\t{kind: Group, components: [\n\t\t\t\t\t{kind: IconButton, icon: 'drawer', active: true, ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: IconButton, icon: 'search', ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: IconButton, src: 'assets/icon-list.png', ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: IconButton, src: 'assets/icon-album.png', ontap: 'buttonTapped'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'console', content: 'No changes yet'}\n\t],\n\tbuttonTapped: function (sender, event) {\n\t\tthis.$.console.setContent(sender.name + ' tapped.');\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIcon = require('../../../moonstone/lib/Icon'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.IconSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit:true, components: [\n\t\t\t{kind: Divider, content: 'Moonstone Font-based Icons:'},\n\t\t\t{kind: Icon, icon: 'arrowlargeup', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowlargedown', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowlargeleft', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowlargeright', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmallup', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmalldown', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmallleft', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmallright', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'closex', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'check', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'search', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'drawer', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'exitfullscreen', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'fullscreen', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'circle', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'stop', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'play', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pause', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'forward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'backward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'skipforward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'skipbackward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pauseforward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pausebackward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pausejumpforward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pausejumpbackward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'jumpforward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'jumpbackward', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowshrink', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowextend', small: false, ontap: 'buttonTapped'},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Small Moonstone Font-based Icons:'},\n\t\t\t{kind: Icon, icon: 'arrowlargeup', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowlargedown', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowlargeleft', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowlargeright', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmallup', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmalldown', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmallleft', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowsmallright', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'closex', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'check', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'search', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'drawer', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'exitfullscreen', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'fullscreen', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'circle', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'stop', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'play', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pause', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'forward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'backward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'skipforward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'skipbackward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pauseforward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pausebackward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pausejumpforward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'pausejumpbackward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'jumpforward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'jumpbackward', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowshrink', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: 'arrowextend', ontap: 'buttonTapped'},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Examples of LG (Dingbat) Icons:'},\n\t\t\t{kind: Icon, icon: '&#42276;', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: '&#42381;', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: '&#42391;', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: '&#42322;', small: false, ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: '&#42276;', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: '&#42381;', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: '&#42391;', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, icon: '&#42322;', ontap: 'buttonTapped'},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Image Asset Icons:'},\n\t\t\t{kind: Icon, src: 'assets/icon-list.png', ontap: 'buttonTapped'},\n\t\t\t{kind: Icon, src: 'assets/icon-album.png', ontap: 'buttonTapped'},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Disabled Icons:'},\n\t\t\t{kind: Icon, icon: 'search', ontap: 'buttonTapped', disabled: true},\n\t\t\t{kind: Icon, icon: '&#42276;', ontap: 'buttonTapped', disabled: true},\n\t\t\t{kind: Icon, src: 'assets/icon-list.png', ontap: 'buttonTapped', disabled: true},\n\t\t\t{kind: Icon, src: 'assets/icon-album.png', ontap: 'buttonTapped', disabled: true},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Icons inside a spottable Item:'},\n\t\t\t{kind: Item, classes: 'moon-hspacing', ontap: 'buttonTapped', components: [\n\t\t\t\t{content: 'Selectable Item'},\n\t\t\t\t{kind: Icon, icon: '&#42276;', ontap: 'buttonTapped'},\n\t\t\t\t{kind: Icon, src: 'assets/icon-list.png', ontap: 'buttonTapped'}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'console', content: 'No changes yet'}\n\t],\n\tbuttonTapped: function (sender, event) {\n\t\tthis.$.console.setContent(sender.name + ' tapped.');\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIcon = require('../../../moonstone/lib/Icon'),\n\tImage = require('../../../moonstone/lib/Image'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ImageBadgeSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit image-badge-sample',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Divider, content: 'Image Badges:'},\n\t\t\t{kind: Image, src: 'http://placehold.it/342x360&text=Image+One', alt: 'Image One', components: [\n\t\t\t\t{kind: Icon, icon: 'skipbackward'},\n\t\t\t\t{kind: Icon, icon: 'play'},\n\t\t\t\t{kind: Icon, icon: 'skipforward'},\n\t\t\t\t{kind: Icon, icon: 'search', classes: 'float-right'}\n\t\t\t]},\n\t\t\t{kind: Image, src: {\n\t\t\t\t'hd' : 'http://placehold.it/228x240&text=Image+Two',\n\t\t\t\t'fhd': 'http://placehold.it/342x360&text=Image+Two'\n\t\t\t}, alt: 'Image Two', components: [\n\t\t\t\t{kind: Icon, icon: 'check'},\n\t\t\t\t{kind: Icon, icon: 'closex'},\n\t\t\t\t{kind: Icon, icon: 'drawer', classes: 'float-right'}\n\t\t\t]},\n\t\t\t{kind: Image, src: {\n\t\t\t\t'hd' : 'http://placehold.it/120x160&text=Image+Three',\n\t\t\t\t'fhd': 'http://placehold.it/180x240&text=Image+Three'\n\t\t\t}, alt: 'Image Three', components: [\n\t\t\t\t{kind: Icon, icon: 'closex'}\n\t\t\t]},\n\t\t\t\n\t\t\t{kind: Divider, classes: 'image-badge-sample-divider', content: 'Image Badges - Show on Spotlight:'},\n\t\t\t{kind: Item, components: [\n\t\t\t\t{kind: Image, src: 'http://placehold.it/342x360&text=Image+One', alt: 'Image One', showBadgesOnSpotlight: true, components: [\n\t\t\t\t\t{kind: Icon, icon: 'skipbackward'},\n\t\t\t\t\t{kind: Icon, icon: 'play'},\n\t\t\t\t\t{kind: Icon, icon: 'skipforward'},\n\t\t\t\t\t{kind: Icon, icon: 'search', classes: 'float-right'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Item, components: [\n\t\t\t\t{kind: Image, src: {\n\t\t\t\t\t'hd' : 'http://placehold.it/228x240&text=Image+Two',\n\t\t\t\t\t'fhd': 'http://placehold.it/342x360&text=Image+Two'\n\t\t\t\t}, alt: 'Image Two', showBadgesOnSpotlight: true, components: [\n\t\t\t\t\t{kind: Icon, icon: 'check'},\n\t\t\t\t\t{kind: Icon, icon: 'closex'},\n\t\t\t\t\t{kind: Icon, icon: 'drawer', classes: 'float-right'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Item, components: [\n\t\t\t\t{kind: Image, src: {\n\t\t\t\t\t'hd' : 'http://placehold.it/120x160&text=Image+Three',\n\t\t\t\t\t'fhd': 'http://placehold.it/180x240&text=Image+Three'\n\t\t\t\t}, alt: 'Image Three', showBadgesOnSpotlight: true, components: [\n\t\t\t\t\t{kind: Icon, icon: 'closex'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t]\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tImage = require('../../../enyo/lib/Image');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tImageItem = require('../../../moonstone/lib/ImageItem'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ImageItemSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, classes: 'enyo-fill', components: [\n\t\t\t{\n\t\t\t\tcomponents: [\n\t\t\t\t\t{kind: Divider, content: 'Left-aligned', spotlight: true},\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkind: ImageItem,\n\t\t\t\t\t\t\t\tsource: Image.placeholder,\n\t\t\t\t\t\t\t\tlabel: 'Breaking Bad',\n\t\t\t\t\t\t\t\ttext: 'A struggling high school chemistry teacher who is diagnosed with inoperable lung cancer turns to a life of crime, producing and selling methamphetamine with a former student'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkind: ImageItem,\n\t\t\t\t\t\t\t\tsource: Image.placeholder,\n\t\t\t\t\t\t\t\tlabel: 'South Park',\n\t\t\t\t\t\t\t\ttext: 'Follows the misadventures of four irreverent grade schoolers in the quiet, dysfunctional town of South Park, Colorado.'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkind: ImageItem,\n\t\t\t\t\t\t\t\tsource: Image.placeholder,\n\t\t\t\t\t\t\t\tlabel: 'Paulie',\n\t\t\t\t\t\t\t\ttext: 'Life from a parrot\\'s point of view.'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{tag: 'br'},\n\t\t\t{\n\t\t\t\tcomponents: [\n\t\t\t\t\t{kind: Divider, content: 'Right-aligned'},\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkind: ImageItem,\n\t\t\t\t\t\t\t\tsource: Image.placeholder,\n\t\t\t\t\t\t\t\tlabel: 'Breaking Bad',\n\t\t\t\t\t\t\t\timageAlignRight: true,\n\t\t\t\t\t\t\t\ttext: 'A struggling high school chemistry teacher who is diagnosed with inoperable lung cancer turns to a life of crime, producing and selling methamphetamine with a former student'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkind: ImageItem,\n\t\t\t\t\t\t\t\tsource: Image.placeholder,\n\t\t\t\t\t\t\t\tlabel: 'South Park',\n\t\t\t\t\t\t\t\timageAlignRight: true,\n\t\t\t\t\t\t\t\ttext: 'Follows the misadventures of four irreverent grade schoolers in the quiet, dysfunctional town of South Park, Colorado.'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkind: ImageItem,\n\t\t\t\t\t\t\t\tsource: Image.placeholder,\n\t\t\t\t\t\t\t\tlabel: 'Paulie',\n\t\t\t\t\t\t\t\timageAlignRight: true,\n\t\t\t\t\t\t\t\ttext: 'Life from a parrot\\'s point of view.'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]}\n\t]\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIcon = require('../../../moonstone/lib/Icon'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tRichText = require('../../../moonstone/lib/RichText'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tTextArea = require('../../../moonstone/lib/TextArea');\n\nmodule.exports = kind({\n\tname: 'moon.sample.InputSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit moon-input-sample',\n\tcomponents: [\n\t\t{kind: Divider, content: 'Inputs'},\n\t\t{kind: Scroller, horizontal: 'hidden', fit: true, components: [\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'JUST TYPE', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'Search term', oninput: 'handleInput', onchange: 'handleChange'},\n\t\t\t\t{kind: Icon, icon: 'search'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, type: 'password', placeholder: 'Enter password', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, type: 'number', placeholder: 'Enter number', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'Placeholder for initial value', value: 'This is the initial value', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'Placeholder for value with ellipsis', value: 'This is the initial value that is of a certain length to display an ellipsis.', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'Dismiss on Enter', dismissOnEnter:true, oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, disabled: true, components: [\n\t\t\t\t{kind: Input, disabled: true, placeholder: 'Disabled input'}\n\t\t\t]},\n\n\t\t\t{kind: Divider, content: 'TextAreas'},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: TextArea, placeholder: 'Enter text here', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: TextArea, placeholder: 'JUST TYPE', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, disabled: true, components: [\n\t\t\t\t{kind: TextArea, disabled: true, placeholder: 'Deactivated TextArea', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\n\t\t\t{kind: Divider, content: 'RichTexts'},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: RichText, oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: RichText, style: 'width: 240px;', oninput: 'handleInput', onchange: 'handleChange'},\n\t\t\t\t{kind: Icon, icon: 'search'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, disabled: true, components: [\n\t\t\t\t{kind: RichText, disabled: true, style: 'width: 240px;'}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result', classes: 'moon-input-sample-result'},\n\t\t{kind: BodyText, name: 'console', allowHtml: false, content: 'Input: '},\n\t\t{kind: Divider, content: 'Bottom-aligned inputs', classes: 'moon-input-sample-result'},\n\t\t{components: [\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'Bottom', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'Aligned', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, placeholder: 'Inputs', oninput: 'handleInput', onchange: 'handleChange'}\n\t\t\t]}\n\t\t]}\n\t],\n\thandleInput: function (sender, event) {\n\t\tthis.$.console.setContent('Input: ' + sender.getValue());\n\t},\n\thandleChange: function (sender, event) {\n\t\tthis.$.console.setContent('Changed: ' + sender.getValue());\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tFormCheckbox = require('../../../moonstone/lib/FormCheckbox'),\n\tIntegerPicker = require('../../../moonstone/lib/IntegerPicker'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.IntegerPickerSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Divider, content: 'Integer Picker'},\n\t\t\t{name: 'picker', kind: IntegerPicker, value: 2013, min: 1900, max: 2100, minWidth: 84, onChange: 'changed'},\n\n\t\t\t{kind: Divider, content: 'Options'},\n\t\t\t{kind: FormCheckbox, content: 'Animate', checked: true, prop: 'animate', onchange: 'checked'},\n\t\t\t{kind: FormCheckbox, content: 'Wrap', prop: 'wrap', onchange: 'checked'},\n\t\t\t{kind: FormCheckbox, content: 'Padding (5 digits)', onchange: 'paddingChecked'},\n\t\t\t{kind: FormCheckbox, content: 'Disabled', prop: 'disabled', onchange: 'checked'}\t\t\t\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'value', content: 'No change yet'}\n\t],\n\tchanged: function (sender, event) {\n\t\tif (this.$.value) {\n\t\t\tthis.$.value.setContent(event.name + ' changed to ' + event.value);\n\t\t}\n\t},\n\tchecked: function (sender, event) {\n\t\tthis.$.picker.set(sender.prop, sender.checked);\n\t},\n\tpaddingChecked: function (sender, event) {\n\t\tthis.$.picker.set('digits', sender.checked? 5 : null);\n\t\tthis.$.picker.render();\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIcon = require('../../../moonstone/lib/Icon'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tItemOverlay = require('../../../moonstone/lib/ItemOverlay'),\n\tItemOverlaySupport = ItemOverlay.ItemOverlaySupport,\n\tMarquee = require('../../../moonstone/lib/Marquee'),\n\tMarqueeText = Marquee.Text,\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ItemOverlaySample',\n\tclasses: 'moon enyo-unselectable enyo-fit moon-item-overlay-sample-wrapper',\n\tcomponents: [\n\t\t{kind: Scroller, classes: 'enyo-fill moon-7h', components: [\n\t\t\t{kind: Divider, content: 'Simple ItemOverlay Sample'},\n\t\t\t{components: [\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], beginningComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'search', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'Item with icon on the left side'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], endingComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'check', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'Item with icon on the right side'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'ItemOverlay with multiple icons Sample'},\n\t\t\t{components: [\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], beginningComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargeup', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargedown', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargeleft', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargeright', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'Multiple Icons can be used'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], endingComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargeup', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargedown', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargeleft', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowlargeright', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'Multiple Icons can be used'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], beginningComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowextend', small: true}\n\t\t\t\t\t], endingComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'arrowshrink', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'Use left and right overlay at the same time'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'ItemOverlay Auto Hide Sample'},\n\t\t\t{components: [\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], autoHideBeginning: true, beginningComponents: [\n\t\t\t\t\t\t{kind: Icon, src: 'assets/icon-list.png', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'These text are flow when item is getting focused'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], autoHideEnding: true, endingComponents: [\n\t\t\t\t\t\t{kind: Icon, src: 'assets/icon-album.png', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'These text are flow when item is getting focused'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Combine both autoHide true and false'},\n\t\t\t{components: [\n\t\t\t\t{kind: Item, mixins: [ItemOverlaySupport], autoHideEnding: true, beginningComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'search', small: true}\n\t\t\t\t\t], endingComponents: [\n\t\t\t\t\t\t{kind: Icon, icon: 'backward', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'play', small: true},\n\t\t\t\t\t\t{kind: Icon, icon: 'forward', small: true}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: MarqueeText, content: 'Both static and autoHiding ItemOverlays'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]}\n\t\t]}\n\t]\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIcon = require('../../../moonstone/lib/Icon'),\n\tImage = require('../../../moonstone/lib/Image'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tMarquee = require('../../../moonstone/lib/Marquee'),\n\tMarqueeText = Marquee.Text,\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ItemSample',\n\tclasses: 'moon enyo-unselectable enyo-fit moon-item-sample-wrapper',\n\tcomponents: [\n\t\t{kind: Scroller, classes: 'enyo-fill moon-7h', components: [\n\t\t\t{kind: Divider, content: 'Simple Item Samples'},\n\t\t\t{components: [\n\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t{kind: Item, content: 'Item 2 (Disabled)', disabled:true},\n\t\t\t\t{kind: Item, content: 'Item 3 (Disabled) with really long marqueed text', disabled:true},\n\t\t\t\t{kind: Item, content: 'Item 4'},\n\t\t\t\t{kind: Item, content: 'Item with very long text that should truncate'},\n\t\t\t\t{kind: Item, content: 'Item   with   extra   spaces   that   should   truncate'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Complex Item Samples'},\n\t\t\t{components: [\n\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t{kind: Icon, icon: 'drawer'},\n\t\t\t\t\t{tag: 'span', content: 'Item with components'}\n\t\t\t\t]},\n\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t{kind: MarqueeText, content: 'Item with more complex components'},\n\t\t\t\t\t{kind: Image, src: {\n\t\t\t\t\t\t'hd' : 'http://placehold.it/288x60&text=Image+One',\n\t\t\t\t\t\t'fhd': 'http://placehold.it/432x90&text=Image+One'\n\t\t\t\t\t}, alt: 'Image One'},\n\t\t\t\t\t{kind: Image, src: {\n\t\t\t\t\t\t'hd' : 'http://placehold.it/288x60&text=Image+Two',\n\t\t\t\t\t\t'fhd': 'http://placehold.it/432x90&text=Image+Two'\n\t\t\t\t\t}, alt: 'Image Two'}\n\t\t\t\t]},\n\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t{kind: MarqueeText, content: 'Item with more complex components'},\n\t\t\t\t\t{kind: Image, src: {\n\t\t\t\t\t\t'hd' : 'http://placehold.it/100x100&text=Image+Three',\n\t\t\t\t\t\t'fhd': 'http://placehold.it/150x150&text=Image+Three'\n\t\t\t\t\t}, style: 'float: left; margin: 10px 10px 10px 0', alt: 'Image Two'},\n\t\t\t\t\t{kind: BodyText, style: 'margin: 10px 0', content: 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.'}\n\t\t\t\t]},\n\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t{kind: MarqueeText, content: 'Item with more complex components'},\n\t\t\t\t\t{kind: Image, src: {\n\t\t\t\t\t\t'hd' : 'http://placehold.it/100x100&text=Image+Four',\n\t\t\t\t\t\t'fhd': 'http://placehold.it/150x150&text=Image+Four'\n\t\t\t\t\t}, style: 'float: right; margin: 10px 0px 10px 10px', alt: 'Image Two'},\n\t\t\t\t\t{kind: BodyText, style: 'margin: 10px 0', content: 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t]\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tLabeledTextItem = require('../../../moonstone/lib/LabeledTextItem');\n\nmodule.exports = kind({\n\tname: 'moon.sample.LabeledTextItemSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, classes: 'enyo-fill', components: [\n\t\t\t{\n\t\t\t\tkind: LabeledTextItem,\n\t\t\t\tlabel: 'Breaking Bad',\n\t\t\t\ttext: 'A struggling high school chemistry teacher who is diagnosed with inoperable lung cancer turns to a life of crime, producing and selling methamphetamine with a former student'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkind: LabeledTextItem,\n\t\t\t\tlabel: 'South Park',\n\t\t\t\ttext: 'Follows the misadventures of four irreverent grade schoolers in the quiet, dysfunctional town of South Park, Colorado.'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkind: LabeledTextItem,\n\t\t\t\tlabel: 'Paulie',\n\t\t\t\ttext: 'Life from a parrot\\'s point of view.'\n\t\t\t}\n\t\t]}\n\t]\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tMarquee = require('../../../moonstone/lib/Marquee'),\n\tMarqueeDecorator = Marquee.Decorator,\n\tMarqueeItem = Marquee.Item,\n\tMarqueeSupport = Marquee.Support,\n\tMarqueeText = Marquee.Text,\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.MarqueeSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit moon-marquee-sample',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-marquee-sample-wrapper', components: [\n\n\t\t\t\t{kind: Divider, content: 'Marquee on start:'},\n\t\t\t\t{kind: MarqueeDecorator, marqueeOnRender: true, components: [\n\t\t\t\t\t{name: 'marqueeStartOnRender1', kind: MarqueeText, classes: 'moon-marquee-start-on-render', content: 'This is first long text for marquee test which is starting marquee on page render'},\n\t\t\t\t\t{name: 'marqueeStartOnRender2', kind: MarqueeText, classes: 'moon-marquee-start-on-render', content: 'This is second long text for marquee test which is syncronized with first marquee text'}\n\t\t\t\t]},\n\t\t\t\t{name: 'marqueeStartOnRender3', marqueeOnRender: true, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is third long text for marquee test which is not syncronized with first and second marquee text'},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Marquee on focus:'},\n\t\t\t\t{kind: MarqueeDecorator, marqueeOnSpotlight: true, components: [\n\t\t\t\t\t{name: 'marqueeStartOnFocus1', kind: MarqueeText, spotlight: true, classes: 'moon-marquee-start-on-focus', content: 'This is first long text for marquee test which is starting marquee on focus'},\n\t\t\t\t\t{name: 'marqueeStartOnFocus2', kind: MarqueeText, spotlight: true, classes: 'moon-marquee-start-on-focus', content: 'This is second long text for marquee test which is syncronized with first marquee text'}\n\t\t\t\t]},\n\t\t\t\t{name: 'marqueeStartOnFocus3', marqueeOnSpotlight: true, mixins: [MarqueeSupport, MarqueeItem], spotlight: true, classes: 'moon-marquee-start-on-focus', content: 'This is third long text for marquee test which is not syncronized with first and second marquee text'},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Marquee on Hover:'},\n\t\t\t\t{kind: MarqueeDecorator, marqueeOnHover: true, marqueeOnSpotlight: false, components: [\n\t\t\t\t\t{name: 'marqueeStartOnHover1', kind: MarqueeText, classes: 'moon-marquee-start-on-hover', content: 'This is first long text for marquee test which is starting marquee on mouse hover'},\n\t\t\t\t\t{name: 'marqueeStartOnHover2', kind: MarqueeText, classes: 'moon-marquee-start-on-hover', content: 'This is second long text for marquee test which is syncronized with first marquee text'}\n\t\t\t\t]},\n\t\t\t\t{name: 'marqueeStartOnHover3', marqueeOnHover: true, marqueeOnSpotlight: false, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-hover', content: 'This is third long text for marquee test which is not syncronized with first and second marquee text'},\n\t\t\t\t{tag: 'br'},\n\n\n\t\t\t\t{kind: Divider, content: 'Marquee on content changed:'},\n\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t{kind: Input, placeholder: 'JUST TYPE', oninput: 'contentChange'}\n\n\t\t\t\t]},\n\t\t\t\t{kind: Button, content: 'Start marquee', ontap: 'start'},\n\t\t\t\t{kind: Button, content: 'Stop marquee', ontap: 'stop'},\t\n\t\t\t\t{name: 'marqueeContent1', marqueeOnRender: true, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is long text for marquee content change test for separate marquee case'},\n\t\t\t\t{name: 'marqueeContent2', marqueeOnRender: true, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', centered: true, content: 'Centered text for separate marquee case'},\n\t\t\t\t{name: 'marqueeContainer1', mixins: [MarqueeSupport], marqueeOnRender: true, components: [\n\t\t\t\t\t{name: 'marqueeContent3', mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is long text for marquee content change test for syncronized case'},\n\t\t\t\t\t{name: 'marqueeContent4', mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is short text for marquee'},\n\t\t\t\t\t{name: 'marqueeContent5', mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', centered: true, content: 'This is centered text for marquee'}\n\t\t\t\t]},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Marquee speed:'},\n\t\t\t\t{name: 'marqueeSpeed', marqueeOnRender: true, marqueeSpeed: 180, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is long text for fast marquee speed test which is twice faster then normal marquee'},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Marquee pause:'},\n\t\t\t\t{name: 'marqueePause1', marqueeOnRender: true, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is long text for marquee which has 1000ms pause time'},\n\t\t\t\t{name: 'marqueePause2', marqueeOnRender: true, marqueePause: 2000, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is long text for marquee which has 2000ms pause time'},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Disabled marquee:'},\n\t\t\t\t{name: 'marqueeDisabled', marqueeOnRender: true, disabled: true, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is long text for disabled marquee test which is having disabled property'},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'Disabled Wrap Instead Of Marquee:'},\n\t\t\t\t{name: 'marqueeDisabledWrap', wrapInsteadOfMarquee: true, disabled: true, mixins: [MarqueeSupport, MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'This is long text for disabled text which wraps because wrapInsteadOfMarquee is set to true'},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'LTR Languages:'},\n\t\t\t\t{mixins: [MarqueeSupport], marqueeOnRender: true, components: [\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: 'The quick brown fox jumped over the lazy dog.  The bean bird flies at sundown.'},\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: '        .        .'},\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: '  Fox     .     \\'   .'},\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: ''},\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: ''},\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: '      .   .'}\n\t\t\t\t]},\n\t\t\t\t{tag: 'br'},\n\n\t\t\t\t{kind: Divider, content: 'RTL Languages:'},\n\t\t\t\t{mixins: [MarqueeSupport], marqueeOnRender: true, components: [\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: '      .    .'},\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: '      .       .'},\n\t\t\t\t\t{marqueeOnRender: true, mixins: [MarqueeItem], classes: 'moon-marquee-start-on-render', content: '       .     .'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t],\n\tcontentChange: function (sender, event) {\n\t\tthis.$.marqueeContent1.setContent(sender.getValue());\n\t\tthis.$.marqueeContent2.setContent(sender.getValue());\n\t\tthis.$.marqueeContent3.setContent(sender.getValue());\n\t},\n\tstart: function (sender, event) {\n\t\tthis.$.marqueeContent1.startMarquee();\n\t\tthis.$.marqueeContent2.startMarquee();\n\t\tthis.$.marqueeContainer1.startMarquee();\n\t},\n\tstop: function (sender, event) {\n\t\tthis.$.marqueeContent1.stopMarquee();\n\t\tthis.$.marqueeContent2.stopMarquee();\n\t\tthis.$.marqueeContainer1.stopMarquee();\t\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tRepeater = require('../../../enyo/lib/Repeater');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tImageItem = require('../../../moonstone/lib/ImageItem'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tObjectActionDecorator = require('../../../moonstone/lib/ObjectActionDecorator'),\n\tBodyText = require('../../../moonstone/lib/BodyText')\n\nmodule.exports = kind({\n\tname: 'moon.sample.ObjectActionHorizontalTypeSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\thandlers: {\n\t\tontap: 'ontap'\n\t},\n\tcomponents: [\n\t\t{kind: Divider, content: 'Object Action: horizontal Type Sample'},\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Repeater, count:20, onSetupItem: 'setupItem', components: [\n\t\t\t\t{kind: ObjectActionDecorator, orientation: 'horizontal', components: [\n\t\t\t\t\t{kind: ImageItem, source: 'assets/default-music.png'}\n\t\t\t\t], actionComponents: [\n\t\t\t\t\t{kind: IconButton, name: 'Icon1'},\n\t\t\t\t\t{kind: IconButton, name: 'Icon2'},\n\t\t\t\t\t{kind: IconButton, name: 'Icon3'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'result', content: 'No item tapped yet.'}\n\t],\n\tsetupItem: function (sender, event) {\n\t\tevent.item.$.imageItem.setSource('http://placehold.it/200x300/' + Math.floor(Math.random()*0x1000000).toString(16) + '/ffffff&text=Image ' + event.index);\n\t\tevent.item.$.imageItem.setText('Item ' + event.index + ': Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.');\n\t},\n\tontap: function (sender, event) {\n\t\tthis.$.result.setContent(event.originator.name + ' tapped.');\n\t}\n});\n\n\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tutils = require('../../../enyo/lib/utils'),\n\tRepeater = require('../../../enyo/lib/Repeater');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tImageItem = require('../../../moonstone/lib/ImageItem'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tObjectActionDecorator = require('../../../moonstone/lib/ObjectActionDecorator'),\n\tBodyText = require('../../../moonstone/lib/BodyText')\n\nmodule.exports = kind({\n\tname: 'moon.sample.ObjectActionVerticalTypeSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\thandlers: {\n\t\tontap: 'ontap'\n\t},\n\tcomponents: [\n\t\t{kind: Divider, content: 'Object Action: vertical Type Sample'},\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Repeater, count: 20, classes: 'moon-hspacing', onSetupItem: 'setupItem', components: [\n\t\t\t\t{\n\t\t\t\t\tkind: ObjectActionDecorator,\n\t\t\t\t\torientation: 'vertical',\n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t\t\t{name: 'image', kind: 'enyo.Image'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t],\n\t\t\t\t\tactionComponents: [\n\t\t\t\t\t\t{kind: Button, name: 'Play', small: true, content: 'PLAY'},\n\t\t\t\t\t\t{kind: Button, name: 'Favorite', small: true, content: 'FAVORITE'},\n\t\t\t\t\t\t{kind: Button, name: 'Share', small: true, content: 'SHARE'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'result', content: 'No item tapped yet.'}\n\t],\n\tsetupItem: function (sender, event) {\n\t\tvar imageUrl = 'http://placehold.it/%./' + Math.floor(Math.random()*0x1000000).toString(16) + '/ffffff&text=Image ' + event.index;\n\t\tevent.item.$.image.setSrc({\n\t\t\t'hd' : utils.format(imageUrl, '132x132'),\n\t\t\t'fhd': utils.format(imageUrl, '198x198')\n\t\t});\n\t},\n\tontap: function (sender, event) {\n\t\tthis.$.result.setContent(event.originator.name + ' tapped.');\n\t}\n});\n\n\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.Scroller2dSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents:[\n\t\t{\n\t\t\tkind: Scroller,\n\t\t\tclasses: 'moon-scroller-sample-2d-scroller enyo-fill',\n\t\t\tcomponents: [\n\t\t\t\t{style: 'width: 2300px; height: 1300px;', components: [\n\t\t\t\t\t{kind: Button, content: 'Button 1'},\n\t\t\t\t\t{kind: Button, content: 'Button 2'},\n\t\t\t\t\t{kind: Button, content: 'Button 3'},\n\t\t\t\t\t{kind: Button, content: 'Button 4'},\n\t\t\t\t\t{kind: Button, content: 'Button 5'},\n\t\t\t\t\t{kind: Button, content: 'Button 6'},\n\t\t\t\t\t{kind: Button, content: 'Button 7'},\n\t\t\t\t\t{kind: Button, content: 'Button 8'},\n\t\t\t\t\t{kind: Button, content: 'Button 9'},\n\t\t\t\t\t{kind: Button, content: 'Button 10'},\n\t\t\t\t\t{kind: Button, content: 'Button 11'},\n\t\t\t\t\t{kind: Button, content: 'Button 12'}\n\t\t\t\t]}\n\t\t\t]\n\t\t}\n\t]\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tImage = require('../../../enyo/lib/Image')\n\tRepeater = require('../../../enyo/lib/Repeater');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ScrollerHorizontalSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Divider, content: 'Horizontal Scroller'},\n\t\t{kind: Scroller, vertical: 'hidden', spotlight: 'container', style: 'white-space: nowrap;', components: [\n\t\t\t{kind: Repeater, count: '50', components: [\n\t\t\t\t{kind: Item, classes: 'moon-scroller-sample-item enyo', style: 'display:inline-block;', components: [\n\t\t\t\t\t{kind: Image, src: 'images/enyo-icon.png'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t]\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableColumns = require('../../../layout/lib/FittableColumns');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ScrollerTextSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Panel, classes: 'enyo-fit', title: 'Text Scrolling Sample', titleBelow: 'Scroller buttons are focusable', headerComponents: [\n\t\t\t{kind: IconButton}\n\t\t], components: [\n\t\t\t{kind: Divider, content: 'Terms of Service'},\n\t\t\t{kind: Scroller, fit:true, horizontal: 'hidden', style: 'margin-bottom:20px;', components: [\n\t\t\t\t{kind: BodyText, name: 'text'}\n\t\t\t]},\n\t\t\t{kind: FittableColumns, noStretch:true, components: [\n\t\t\t\t{fit:true, components: [\n\t\t\t\t\t{kind: ToggleButton, name: 'lengthToggle', content: 'Long Text', value:true},\n\t\t\t\t\t{kind: ToggleButton, name: 'spotToggle', content: 'Spot Paging Controls', value:false},\n\t\t\t\t\t{kind: ToggleButton, name: 'hideToggle', content: 'Hide Paging Controls when fit', value:false}\n\t\t\t\t]},\n\t\t\t\t{kind: Button, content: 'Sign me Up!'}\n\t\t\t]}\n\t\t]}\n\t],\n\tlongText: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',\n\tshortText: 'The quick brown fox jumped over the lazy dog.',\n\tbindings: [\n\t\t{from: '$.lengthToggle.value', to: '$.text.content', transform: function (val) { return val ? this.longText : this.shortText; } },\n\t\t{from: '$.spotToggle.value', to: '$.scroller.spotlightPagingControls' },\n\t\t{from: '$.hideToggle.value', to: '$.scroller.hideScrollColumnsWhenFit' }\n\t]\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tSelectableItem = require('../../../moonstone/lib/SelectableItem');\n\nmodule.exports = kind({\n\tname: 'moon.sample.SelectableItemSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-hspacing', controlClasses: 'moon-5h', components: [\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Selectable Items'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Option 1', selected: true, onActivate: 'itemChanged'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Option 2', onActivate: 'itemChanged'},\n\t\t\t\t\t{kind: SelectableItem, disabled: true, content: 'Disabled', onActivate: 'itemChanged'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Option 4', selected: true, onActivate: 'itemChanged'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Option 5 is very very very long', onActivate: 'itemChanged'}\n\t\t\t\t]},\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Selectable Item Group'},\n\t\t\t\t\t{kind: Group, onActivate: 'groupChanged', components: [\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Group Option 1'},\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Group Option 2'},\n\t\t\t\t\t\t{kind: SelectableItem, disabled: true, content: 'Disabled'},\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Group Option 4'},\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Group Option 5', selected: true}\n\t\t\t\t\t]}\n\t\t\t\t]},\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Group, onActivate: 'groupChanged', components: [\n\t\t\t\t\t\t{kind: Divider, content: 'Selectable Items with long text truncation'},\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Option 1 with long text truncation', onActivate: 'itemChanged'},\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Option 2 with long text truncation', onActivate: 'itemChanged'},\n\t\t\t\t\t\t{kind: SelectableItem, disabled: true, content: 'Disabled', onActivate: 'itemChanged'},\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Option 4 with long text truncation', selected: true, onActivate: 'itemChanged'},\n\t\t\t\t\t\t{kind: SelectableItem, content: 'Option 5 with long text truncation', onActivate: 'itemChanged'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{components: [\n\t\t\t{kind: Divider, content: 'Result'},\n\t\t\t{name: 'result', content: 'Nothing selected'}\n\t\t]}\n\t],\n\titemChanged: function (sender, event) {\n\t\tif (!this.hasNode()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$.result.setContent(sender.getContent() + ' was ' + (sender.getActive() ? ' selected.' : 'deselected.'));\n\t},\n\tgroupChanged: function (sender, event) {\n\t\tif (event.originator.getActive()) {\n\t\t\tvar selected = event.originator.getContent();\n\t\t\tthis.$.result.setContent(selected + ' was selected.');\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tSimplePicker = require('../../../moonstone/lib/SimplePicker');\n\nmodule.exports = kind({\n\tname: 'moon.sample.SimplePickerSample',\n\tkind: FittableRows,\n\tclasses: 'moon moon-sample-padded enyo-unselectable enyo-fit',\n\tcomponents:[\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Divider, content: 'Picker 1 & 2: Animated'},\n\t\t\t{kind: SimplePicker, name: 'picker1', onChange: 'changed', components: [\n\t\t\t\t{content: 'San Francisco Airport Terminal Gate 1', active: true},\n\t\t\t\t{content: 'Boston Airport Terminal Gate 2'},\n\t\t\t\t{content: 'Tokyo Airport Terminal Gate 3'},\n\t\t\t\t{content: '     '}\n\t\t\t]},\n\t\t\t{kind: SimplePicker, name: 'picker2', onChange: 'changed', components: [\n\t\t\t\t{content: 'Level 1'},\n\t\t\t\t{content: 'Level 2', active: true},\n\t\t\t\t{content: 'Level 3'},\n\t\t\t\t{content: 'Level 4'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\n\t\t\t{kind: Divider, content: 'Picker 3: Non-animated'},\n\t\t\t{kind: SimplePicker, block: true, name: 'picker3', animate: false, onChange: 'changed', components: [\n\t\t\t\t{content: 'Hotmail'},\n\t\t\t\t{content: 'GMail'},\n\t\t\t\t{content: 'Yahoo Mail', active: true},\n\t\t\t\t{content: 'AOL Mail'},\n\t\t\t\t{content: 'Custom IMAP'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\n\t\t\t{kind: Divider, content: 'Picker 4: Wrapping'},\n\t\t\t{kind: SimplePicker, block: true, name: 'picker4', animate: false, wrap: true, onChange: 'changed', components: [\n\t\t\t\t{content: 'Mars'},\n\t\t\t\t{content: 'Venus'},\n\t\t\t\t{content: 'Earth'},\n\t\t\t\t{content: 'Mercury'},\n\t\t\t\t{content: 'Jupiter'},\n\t\t\t\t{content: 'Saturn'},\n\t\t\t\t{content: 'Uranus'},\n\t\t\t\t{content: 'Neptune'},\n\t\t\t\t{content: 'Pluto'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\n\t\t\t{kind: Divider, content: 'Picker 5: Disabled'},\n\t\t\t{kind: SimplePicker, block: true, name: 'picker5', disabled: true, components: [\n\t\t\t\t{content: 'Enyo'},\n\t\t\t\t{content: 'Sencha'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\n\t\t\t{kind: Divider, content: 'Picker 6: Hidden'},\n\t\t\t{kind: SimplePicker, name: 'picker6', onChange: 'changed', showing: false, components: [\n\t\t\t\t{content: 'San Francisco Airport Terminal Gate 1'},\n\t\t\t\t{content: 'Boston Airport Terminal Gate 2', active: true},\n\t\t\t\t{content: 'Tokyo Airport Terminal Gate 3'}\n\t\t\t]},\n\t\t\t{kind: Button, content: 'Toggle Showing', small: true, ontap: 'toggleShowing'}\n\t\t]},\n\t\t{classes: 'moon-1v'},\n\t\t{classes: 'moon-hspacing', components: [\n\t\t\t{components: [\n\t\t\t\t{kind: Divider, content: 'Modify picker: '},\n\t\t\t\t{kind: SimplePicker, name: 'which', components: [\n\t\t\t\t\t{content: '1'},\n\t\t\t\t\t{content: '2'},\n\t\t\t\t\t{content: '3'},\n\t\t\t\t\t{content: '4'},\n\t\t\t\t\t{content: '5'},\n\t\t\t\t\t{content: '6'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{components: [\n\t\t\t\t{kind: Divider, content: 'Add item: '},\n\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t\t{kind: Input, name: 'addInput', placeholder: 'content', classes: 'moon-2h'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Button, content: 'Add', small: true, ontap: 'addItem'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{components: [\n\t\t\t\t{kind: Divider, content: 'Set index: '},\n\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t\t{kind: Input, name: 'changeInput', placeholder: 'index', classes: 'moon-1h'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Button, content: 'Go', small: true, ontap: 'changeItem'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{components: [\n\t\t\t\t{kind: Divider, content: 'Delete current item: '},\n\t\t\t\t{kind: Button, content: 'Delete', small: true, ontap: 'destroyItem'}\n\t\t\t]}\n\t\t]},\n\t\t{components: [\n\t\t\t{kind: Divider, content: 'Result'},\n\t\t\t{kind: BodyText, name: 'result', content: 'No change yet'}\n\t\t]}\n\t],\n\ttoggleShowing: function () {\n\t\tthis.$.picker6.setShowing(!this.$.picker6.showing);\n\t},\n\tchanged: function (sender, event) {\n\t\tthis.$.result.setContent(sender.name + ' changed to ' + event.content + ' (' + event.index + ')');\n\t},\n\tchangeItem: function (sender, event) {\n\t\tvar picker = this.$['picker' + (this.$.which.getSelectedIndex()+1)];\n\t\tvar val = parseInt(this.$.changeInput.getValue(),10);\n\t\tvar len = picker.getClientControls().length - 1;\n\t\tif (isNaN(val) || val < 0 || val > len) {\n\t\t\tthis.$.result.setContent(picker.name + ' value must be an integer between 0-' + len);\n\t\t} else {\n\t\t\tpicker.setSelectedIndex(val);\n\t\t}\n\t},\n\taddItem: function (sender, event) {\n\t\tif (!this.$.addInput.getValue()) {\n\t\t\tthis.$.result.setContent('Please insert content value.');\n\t\t\treturn;\n\t\t}\n\t\tvar picker = this.$['picker' + (this.$.which.getSelectedIndex()+1)];\n\t\tpicker.createComponent({content:this.$.addInput.getValue()}).render();\n\t\tthis.$.result.setContent('\\'' + this.$.addInput.getValue() + '\\' is added to ' + picker.name);\n\t},\n\tdestroyItem: function (sender, event) {\n\t\tvar picker = this.$['picker' + (this.$.which.getSelectedIndex()+1)];\n\t\tvar sel = picker.getSelected();\n\t\tif (sel) {\n\t\t\tsel.destroy();\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tSlider = require('../../../moonstone/lib/Slider');\n\nmodule.exports = kind({\n\tkind: FittableRows,\n\tname: 'moon.sample.SliderSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tbindings: [\n\t\t{from: '.$.slider1.value', to: '.$.slider2.value'},\n\t\t{from: '.$.slider1.bgProgress', to: '.$.slider2.bgProgress'}\n\t],\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Slider 1: Default'},\n\t\t\t{name: 'slider1', kind: Slider, showPercentage: false, value: 25, bgProgress: 35, onChanging: 'sliderChanging', onChange: 'sliderChanged'},\n\n\t\t\t{kind: Divider, content: 'Slider 2: Disabled, Bound to Slider 1'},\n\t\t\t{name: 'slider2', kind: Slider, disabled: true},\n\n\t\t\t{kind: Divider, content: 'Slider 3: Custom Popup Content'},\n\t\t\t{name: 'slider3', kind: Slider, classes: 'rgb-sample-slider',\n\t\t\t\tpopupColor: 'rgb(0, 0, 25)', value: 25, bgProgress: 150, min: 0, max: 255,\n\t\t\t\tonChanging: 'customChanging', onChange: 'customChanged', onAnimateFinish: 'customAnimateFinish'\n\t\t\t},\n\n\t\t\t{kind: Divider, content: 'Slider 4: Negative Values'},\n\t\t\t{name: 'slider4', kind: Slider,\n\t\t\t\tvalue: 0, min: -100, max: 100, showPercentage: false, onChanging: 'sliderChanging', onChange: 'sliderChanged'\n\t\t\t},\n\n\t\t\t{kind: Divider, content: 'Change Value'},\n\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t{name: 'valueInput', kind: Input, placeholder: 'Value', classes: 'moon-1h', value: 20}\n\t\t\t\t]},\n\t\t\t\t{kind: Button, small:true, content: 'Set', ontap: 'changeValue'},\n\t\t\t\t{kind: Button, small:true, content: '-', ontap: 'decValue'},\n\t\t\t\t{kind: Button, small:true, content: '+', ontap: 'incValue'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\n\t\t\t{kind: Divider, content: 'Change Background Progress'},\n\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t{name: 'progressInput', kind: Input, placeholder: 'Progress', classes: 'moon-1h', value: 30}\n\t\t\t\t]},\n\t\t\t\t{kind: Button, small:true, content: 'Set', ontap: 'changeProgress'},\n\t\t\t\t{kind: Button, small:true, content: '-', ontap: 'decProgress'},\n\t\t\t\t{kind: Button, small:true, content: '+', ontap: 'incProgress'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\n\t\t\t{kind: Divider, content: 'Change Increment (applies only to dragging, 0 for disable)'},\n\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t{name: 'incrementInput', kind: Input, placeholder: 'Increment', classes: 'moon-1h', value: 0}\n\t\t\t\t]},\n\t\t\t\t{kind: Button, small:true, content: 'Set', ontap: 'changeIncrement'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\n\t\t\t{kind: Divider, content: 'Options'},\n\t\t\t{classes: 'moon-8h', defaultKind: CheckboxItem, components: [\n\t\t\t\t{name: 'lockBarSetting',        checked: true,     content: 'Lock Bar to Knob', onchange: 'changeLockbar'},\n\t\t\t\t{name: 'animateSetting',        checked: true,     content: 'Animated',        onchange: 'animateActivate'},\n\t\t\t\t{name: 'noPopupSetting',        checked: false,    content: 'Hide Popup',      onchange: 'changeStatusBubble'},\n\t\t\t\t{name: 'tapableSetting',        checked: true,     content: 'Tapable',         onchange: 'changeTapable'},\n\t\t\t\t{name: 'constrainSetting',      checked: false,    content: 'Constrain to Background Progress', onchange: 'changeConstrain'},\n\t\t\t\t{name: 'elasticSetting',        checked: false,    content: 'Elastic Effect',  onchange: 'changeElastic'},\n\t\t\t\t{name: 'showPercentageSetting', checked: false,    content: 'Show Percentage', onchange: 'changePercentage'}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{name: 'result', content: 'No slider moved yet.'}\n\t],\n\tcreate: function () {\n\t\tFittableRows.prototype.create.apply(this, arguments);\n\t\tthis.changeLockbar();\n\t\tthis.animateActivate();\n\t\tthis.changeStatusBubble();\n\t\tthis.changeTapable();\n\t\tthis.changeConstrain();\n\t\tthis.changeElastic();\n\t},\n\trendered: function () {\n\t\tFittableRows.prototype.rendered.apply(this, arguments);\n\t\tthis.updateSlider3Popup(this.$.slider3.getValue());\n\t},\n\t//* @protected\n\tchangeValue: function (sender, event) {\n\t\tvar v = this.$.valueInput.getValue();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setValue(v);\n\t\t\t}\n\t\t}\n\t},\n\tincValue: function () {\n\t\tthis.$.valueInput.setValue(Math.min(parseInt(this.$.valueInput.getValue() || 0, 10) + 10, 100));\n\t\tthis.changeValue();\n\t},\n\tdecValue: function () {\n\t\tthis.$.valueInput.setValue(Math.max(parseInt(this.$.valueInput.getValue() || 0, 10) - 10, 0));\n\t\tthis.changeValue();\n\t},\n\tchangeProgress: function (sender, event) {\n\t\tvar v = parseInt(this.$.progressInput.getValue(), 10);\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setBgProgress(v);\n\t\t\t}\n\t\t}\n\t},\n\tchangeIncrement: function (sender, event) {\n\t\tvar v = parseInt(this.$.incrementInput.getValue(), 10);\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setIncrement(v);\n\t\t\t}\n\t\t}\n\t},\n\tincProgress: function () {\n\t\tthis.$.progressInput.setValue(Math.min(parseInt(this.$.progressInput.getValue() || 0, 10) + 10, 100));\n\t\tthis.changeProgress();\n\t},\n\tdecProgress: function () {\n\t\tthis.$.progressInput.setValue(Math.max(parseInt(this.$.progressInput.getValue() || 0, 10) - 10, 0));\n\t\tthis.changeProgress();\n\t},\n\tsliderChanging: function (sender, event) {\n\t\tthis.$.result.setContent(sender.name + ' changing: ' + Math.round(event.value));\n\t},\n\tsliderChanged: function (sender, event) {\n\t\tthis.$.result.setContent(sender.name + ' changed to ' + Math.round(sender.getValue()) + '.');\n\t},\n\tcustomChanging: function (sender, event) {\n\t\tthis.updateSlider3Popup(event.value);\n\t\tthis.sliderChanging(sender, event);\n\t},\n\tcustomChanged: function (sender, event) {\n\t\tthis.updateSlider3Popup(sender.getValue());\n\t\tthis.sliderChanged(sender, event);\n\t},\n\tcustomAnimateFinish: function (sender, event) {\n\t\tthis.updateSlider3Popup(event.value);\n\t},\n\tupdateSlider3Popup: function (inValue) {\n\t\tvar color = 'rgb(0, 0, ' + Math.round(inValue) + ')';\n\t\tthis.$.slider3.setPopupContent(color);\n\t\tthis.$.slider3.setPopupColor(color);\n\t},\n\tchangeLockbar: function (sender, event) {\n\t\tvar ck = this.$.lockBarSetting.getChecked();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setLockBar(ck);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tanimateActivate: function (sender, event) {\n\t\tvar ck = this.$.animateSetting.getChecked();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setAnimate(ck);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tchangeStatusBubble: function (sender, event) {\n\t\tvar ck = this.$.noPopupSetting.getChecked();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setNoPopup(ck);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tchangeTapable: function (sender, event) {\n\t\tvar ck = this.$.tapableSetting.getChecked();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setTappable(ck);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tchangeConstrain: function (sender, event) {\n\t\tvar ck = this.$.constrainSetting.getChecked();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setConstrainToBgProgress(ck);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tchangeElastic: function (sender, event) {\n\t\tvar ck = this.$.elasticSetting.getChecked();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setElasticEffect(ck);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tchangePercentage: function (sender, event) {\n\t\tvar ck = this.$.showPercentageSetting.getChecked();\n\n\t\tfor (var i in this.$) {\n\t\t\tif (this.$[i].kind == Slider) {\n\t\t\t\tthis.$[i].setShowPercentage(ck);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIcon = require('../../../moonstone/lib/Icon'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tSpinner = require('../../../moonstone/lib/Spinner');\n\nmodule.exports = kind({\n\tname: 'moon.sample.SpinnerSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tkind: Scroller,\n\tcomponents: [\n\t\t{kind: Divider, content: 'Spinner'},\n\t\t{kind: Spinner},\n\t\t{kind: Divider, content: 'Spinner with Content'},\n\t\t{kind: Spinner, content: 'Loading...'},\n\t\t{kind: Divider, content: 'Spinner Centered in its Container'},\n\t\t{style: 'text-align: center', components: [\n\t\t\t{kind: Spinner, content: 'Loading...'}\n\t\t]},\n\t\t{kind: Divider, content: 'Spinner Centered Horizontally and Vertically in its Container'},\n\t\t{classes: 'absolute-container', components: [\n\t\t\t{kind: Spinner, content: 'Loading...', center: true}\n\t\t]},\n\t\t{classes: 'moon-1v'},\n\t\t{kind: Divider, content: 'Spinner Only Centered Horizontally in its Container'},\n\t\t{classes: 'absolute-container', components: [\n\t\t\t{kind: Spinner, content: 'Loading...', center: true, middle: false}\n\t\t]},\n\t\t{classes: 'moon-1v'},\n\t\t{kind: Divider, content: 'Spinner with Looooong Content'},\n\t\t{kind: Spinner, content: 'Loading so much content... This might take some arbitrary amount of time. Could be long, could be short. Who knows?'},\n\t\t{kind: Divider, content: 'Spinner with Components Inside'},\n\t\t{kind: Spinner, components: [\n\t\t\t{kind: Icon, icon: 'fullscreen'},\n\t\t\t{content: 'Fullscreen mode is loading'},\n\t\t\t{kind: Icon, icon: 'exitfullscreen'}\n\t\t]}\n\t]\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tutils = require('../../../enyo/lib/utils')\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tCaptionDecorator = require('../../../moonstone/lib/CaptionDecorator'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ToggleButtonSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-toggle-button-sample-wrapper', components: [\n\t\t\t\t{kind: Divider, content: 'Toggle Buttons: '},\n\t\t\t\t{kind: ToggleButton, toggleOnLabel: 'wifi is on', toggleOffLabel: 'wifi is off', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, uppercase: false, toggleOnLabel: 'Internet connected', toggleOffLabel: 'Internet disconnected', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, disabled: true, toggleOnLabel: 'Disabled Active Button', toggleOffLabel: 'Disabled Inactive Button', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, disabled: true, value: true, content: 'Disabled Active Button', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, content: 'Set-top box', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, small: true, content: 'Small Toggle', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, small: true, disabled: true, toggleOnLabel: 'Small Disabled Active Button', toggleOffLabel: 'Small Disabled Inactive Button', ontap: 'buttonTapped'},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{kind: Divider, content: 'Toggle Buttons are set on programmically by default: '},\n\t\t\t\t{kind: ToggleButton, value: true, toggleOnLabel: 'English', toggleOffLabel: 'Spanish', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, value: true, content: 'Notifications', ontap: 'buttonTapped'},\n\t\t\t\t{kind: ToggleButton, small: true, value: true, content: 'Small Button', ontap: 'buttonTapped'},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{kind: Divider, content: 'Captioned Buttons: '},\n\t\t\t\t{kind: CaptionDecorator, side: 'top', content: 'Pow', components: [\n\t\t\t\t\t{kind: ToggleButton, toggleOnLabel: 'is A', toggleOffLabel: 'not A', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'right', content: 'Boom', components: [\n\t\t\t\t\t{kind: ToggleButton, toggleOnLabel: 'is B', toggleOffLabel: 'not B', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'bottom', content: 'Crash', components: [\n\t\t\t\t\t{kind: ToggleButton, toggleOnLabel: 'is C', toggleOffLabel: 'not C', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{kind: CaptionDecorator, side: 'left', content: 'Bang', components: [\n\t\t\t\t\t{kind: ToggleButton, toggleOnLabel: 'is D', toggleOffLabel: 'not D', ontap: 'buttonTapped'}\n\t\t\t\t]},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{kind: Divider, content: 'Grouped Buttons: '},\n\t\t\t\t{kind: 'enyo.Group', classes: 'moon-toggle-button-sample-group', components: [\n\t\t\t\t\t{kind: ToggleButton, content: 'Apple', ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: ToggleButton, toggleOnLabel: 'Ripened Banana', toggleOffLabel: 'Raw Banana', value: true, ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: ToggleButton, toggleOnLabel: 'Sweet Saskatoonberry', toggleOffLabel: 'Bitter Saskatoonberry', ontap: 'buttonTapped'},\n\t\t\t\t\t{kind: ToggleButton, small: true, toggleOnLabel: 'Blue Blueberry', toggleOffLabel: 'Red Raspberry', ontap: 'buttonTapped'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'notice', content: 'No action yet.'}\n\t],\n\tbuttonTapped: function (sender, event) {\n\t\tvar labeltext = sender.get('uppercase') ? utils.toUpperCase(sender.getContent()) : sender.getContent();\n\t\tvar postString = sender.value ? ' is selected' : ' is unselected';\n\t\tif (!sender.toggleOnLabel || !sender.toggleOffLabel) {\n\t\t\tlabeltext='\\''+labeltext+'\\'' + postString;\n\t\t} else {\n\t\t\tlabeltext='\\''+labeltext+'\\' selected.';\n\t\t}\n\t\tthis.$.notice.setContent(labeltext);\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ToggleItemSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-hspacing', controlClasses: 'moon-5h', components: [\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Toggle Items'},\n\t\t\t\t\t{kind: ToggleItem, content: 'Option 1', checked: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: ToggleItem, content: 'Option 2', onchange: 'itemChanged'},\n\t\t\t\t\t{kind: ToggleItem, disabled: true, content: 'Disabled', onchange: 'itemChanged'},\n\t\t\t\t\t{kind: ToggleItem, disabled: true, checked: true, content: 'Disabled Checked'},\n\t\t\t\t\t{kind: ToggleItem, content: 'Option 4', checked: true, onchange: 'itemChanged'},\n\t\t\t\t\t{kind: ToggleItem, content: 'This is a verrry long option 5', onchange: 'itemChanged'}\n\t\t\t\t]},\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Toggle Item Group'},\n\t\t\t\t\t{kind: Group, onActivate: 'groupChanged', components: [\n\t\t\t\t\t\t{kind: ToggleItem, content: 'Group Option 1'},\n\t\t\t\t\t\t{kind: ToggleItem, content: 'Group Option 2', checked: true},\n\t\t\t\t\t\t{kind: ToggleItem, disabled: true, content: 'Disabled'},\n\t\t\t\t\t\t{kind: ToggleItem, content: 'Group Option 4'},\n\t\t\t\t\t\t{kind: ToggleItem, content: 'Group Option 5'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{components: [\n\t\t\t{kind: Divider, content: 'Result'},\n\t\t\t{kind: BodyText, name: 'result', content: 'Nothing selected'}\n\t\t]}\n\t],\n\titemChanged: function (sender, event) {\n\t\tthis.$.result.setContent(sender.getContent() + ' is ' + (sender.getChecked() ? ' selected.' : 'deselected.'));\n\t},\n\tgroupChanged: function (sender, event) {\n\t\tif (event.toggledControl.getChecked()) {\n\t\t\tvar selected = event.toggledControl.getContent();\n\t\t\tthis.$.result.setContent(selected + ' is selected.');\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton'),\n\tItem = require('../../../moonstone/lib/Item');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ActivityPanelsSample',\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tcomponents: [\n\t\t{name: 'panels', kind: Panels, pattern: 'activity', classes: 'enyo-fit', style: 'z-index: 1000;', brandingSrc: 'assets/default-movie.png', components: [\n\t\t\t{title: 'First Panel', classes: 'moon-7h', titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', headerComponents: [\n\t\t\t\t{kind: ToggleButton, small:true, content:'Medium', name:'mediumHeaderToggle', ontap: 'typeTapped'},\n\t\t\t\t{kind: ToggleButton, small:true, content:'Small', name:'smallHeaderToggle', ontap: 'typeTapped'}\n\t\t\t], components: [\n\t\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Six', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Seven', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Eight', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Nine', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Eleven', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Twelve', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Thirteen', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Fourteen', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Fifteen', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Sixteen', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Seventeen', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Eighteen', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Nineteen', ontap: 'next1'},\n\t\t\t\t\t{kind: Item, content: 'Item Twenty', ontap: 'next1'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{title: 'Second Panel', defaultSpotlightControl: 'defaultControl', classes: 'moon-7h', joinToPrev: true, components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next2'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next2'},\n\t\t\t\t{name: 'defaultControl', kind: Item, content: 'Item Three (default focus for panel)', ontap: 'next2'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next2'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next2'}\n\t\t\t]},\n\t\t\t{title: 'Third Panel', classes: 'moon-7h', titleBelow:'Type \\'go\\' to transition', headerOptions: {inputMode:true}, onInputHeaderChange:'inputChanged', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next3'}\n\t\t\t]},\n\t\t\t{title: 'Fourth', classes: 'moon-7h', joinToPrev: true, titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next4'}\n\t\t\t]},\n\t\t\t{title: 'Fifth', classes: 'moon-7h', titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next5'}\n\t\t\t]},\n\t\t\t{title: 'Sixth Panel with a very long title', classes: 'moon-7h', joinToPrev: true, titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next6'}\n\t\t\t]},\n\t\t\t{title: 'Seventh', classes: 'moon-7h', titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t{kind: Item, content: 'Item Two'},\n\t\t\t\t{kind: Item, content: 'Item Three'},\n\t\t\t\t{kind: Item, content: 'Item Four'},\n\t\t\t\t{kind: Item, content: 'Item Five'}\n\t\t\t]}\n\t\t]}\n\t],\n\t// custom next handler for each panel to avoid switching from one active panel\n\t// to another with no visible change for demo\n\tnext1: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(2);\n\t\treturn true;\n\t},\n\tnext2: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(2);\n\t\treturn true;\n\t},\n\tnext3: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(5);\n\t\treturn true;\n\t},\n\tnext4: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(5);\n\t\treturn true;\n\t},\n\tnext5: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(7);\n\t\treturn true;\n\t},\n\tnext6: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(7);\n\t\treturn true;\n\t},\n\tinputChanged: function(inSender, inEvent) {\n\t\tif (inEvent.originator.getValue() == 'go') {\n\t\t\tthis.next3();\n\t\t}\n\t},\n\ttypeTapped: function(inSender, inEvent) {\n\t\tvar i,\n\t\t\tval = inSender.get('value'),\n\t\t\tbuttonType = inSender.content.toLowerCase(),\n\t\t\ttypes = ['large', 'medium', 'small'];\n\n\t\t// If our button was `true`, use that type, otherwise revert to large.\n\t\tthis.$.panel.set('headerType', val ? buttonType.toLowerCase() : types[0]);\n\t\t// Unset all other buttons\n\t\tfor (i = 0; i < types.length; i++) {\n\t\t\tif (buttonType != types[i] && this.$[types[i] + 'HeaderToggle']) {\n\t\t\t\tthis.$[types[i] + 'HeaderToggle'].set('value', false);\n\t\t\t}\n\t\t}\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tChannelInfo = require('../../../moonstone/lib/ChannelInfo'),\n\tClock = require('../../../moonstone/lib/Clock'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem'),\n\tVideoInfoBackground = require('../../../moonstone/lib/VideoInfoBackground'),\n\tVideoInfoHeader = require('../../../moonstone/lib/VideoInfoHeader'),\n\tVideoPlayer = require('../../../moonstone/lib/VideoPlayer');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ActivityPanelsWithVideoSample',\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tcomponents: [\n        {name: 'player', kind: VideoPlayer, src: 'http://media.w3.org/2010/05/bunny/movie.mp4', poster: 'assets/video-poster.png', autoplay: true, showing: false, infoComponents: [\n\t\t\t{kind: VideoInfoBackground, orient: 'left', background: true, fit: true, components: [\n\t\t\t\t{\n\t\t\t\t\tkind: ChannelInfo,\n\t\t\t\t\tchannelNo: '13',\n\t\t\t\t\tchannelName: 'AMC',\n\t\t\t\t\tclasses: 'moon-2h', \n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{content: '3D'},\n\t\t\t\t\t\t{content: 'Live'},\n\t\t\t\t\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon '}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkind: VideoInfoHeader,\n\t\t\t\t\ttitle: 'Downton Abbey - Extra Title',\n\t\t\t\t\tsubTitle: 'Mon June 21, 7:00 - 8:00pm',\n\t\t\t\t\tsubSubTitle: 'R - TV 14, V, L, SC',\n\t\t\t\t\tdescription: 'The series, set in the Youkshire country estate of Downton Abbey, depicts the lives of the aristocratic Crawley famiry and'\n\t\t\t\t}\n\t\t\t]},\n\t\t\t{kind: VideoInfoBackground, orient: 'right', background: true, components: [\n\t\t\t\t{kind: Clock}\n\t\t\t]}\n\t\t], components: [\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'}\n\t\t]},\n\t\t{name: 'panels', kind: 'moon.Panels', pattern: 'activity', classes: 'enyo-fit', useHandle: true, onShowingChanged: 'panelsShowingChanged', components: [\n\t\t\t{title: 'First Panel', classes: 'moon-7h', titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next1'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next1'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next1'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next1'},\n\t\t\t\t{kind: ToggleItem, content: 'Show/Hide Side Handle', checked: true,  onchange: 'handleShowingChanged'}\n\t\t\t]},\n\t\t\t{title: 'Second Panel', classes: 'moon-7h',\n\t\t\t\tjoinToPrev: true, components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next2'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next2'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next2'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next2'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next2'}\n\t\t\t]},\n\t\t\t{title: 'Third Panel', classes: 'moon-7h', titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next3'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next3'}\n\t\t\t]},\n\t\t\t{title: 'Fourth', classes: 'moon-7h', joinToPrev: true, titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next4'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next4'}\n\t\t\t]},\n\t\t\t{title: 'Fifth', classes: 'moon-7h', titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next5'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next5'}\n\t\t\t]},\n\t\t\t{title: 'Sixth', classes: 'moon-7h', joinToPrev: true, titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next6'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next6'}\n\t\t\t]},\n\t\t\t{title: 'Seventh', classes: 'moon-7h', titleBelow:'Sub-title', subTitleBelow:'Sub-sub title', components: [\n\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t{kind: Item, content: 'Item Two'},\n\t\t\t\t{kind: Item, content: 'Item Three'},\n\t\t\t\t{kind: Item, content: 'Item Four'},\n\t\t\t\t{kind: Item, content: 'Item Five'}\n\t\t\t]}\n\t\t]}\n\t],\n\trendered: function() {\n\t\tthis.inherited(arguments);\n\t\tSpotlight.spot(this.$.panels);\n\t},\n\t// custom next handler for each panel to avoid switching from one active panel\n\t// to another with no visible change for demo\n\tnext1: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(2);\n\t\treturn true;\n\t},\n\tnext2: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(2);\n\t\treturn true;\n\t},\n\tnext3: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(5);\n\t\treturn true;\n\t},\n\tnext4: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(5);\n\t\treturn true;\n\t},\n\tnext5: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(7);\n\t\treturn true;\n\t},\n\tnext6: function(inSender, inEvent) {\n\t\tthis.$.panels.setIndex(7);\n\t\treturn true;\n\t},\n\thandleShowingChanged: function(inSender, inEvent) {\n\t\tthis.$.panels.setHandleShowing(inSender.getChecked());\n\t},\n\tpanelsShowingChanged: function (sender, event) {\n\t\t// Hiding the VideoPlayer when it would be obscured by the Panels avoids UI performance\n\t\t// issues caused by the GPU being occupied rendering video frames that aren't visible.\n\t\tthis.$.player.set('showing', !event.showing);\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tTooltip = require('../../../moonstone/lib/Tooltip'),\n\tTooltipDecorator = require('../../../moonstone/lib/TooltipDecorator');\n\nmodule.exports = kind({\n\tname: 'moon.sample.AlwaysViewingPanelsSample',\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tstyle: 'background: gray url(\\'http://lorempixel.com/1920/1080/\\')',\n\tcomponents: [\n\t\t{name: 'panels', kind: Panels, pattern: 'alwaysviewing', classes: 'enyo-fit', useHandle: false, components: [\n\t\t\t{title: 'First Panel', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Second Panel', titleBelow: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.', subTitleBelow: 'Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.', headerComponents: [\n\t\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t\t{kind: Tooltip, content: 'Tooltip', position: 'above'},\n\t\t\t\t\t{kind: IconButton}\n\t\t\t\t]}\n\t\t\t], components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Third Panel', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Fourth', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Fifth', joinToPrev: true, titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Sixth', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Seventh', joinToPrev: true, titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t{kind: Item, content: 'Item Two'},\n\t\t\t\t{kind: Item, content: 'Item Three'},\n\t\t\t\t{kind: Item, content: 'Item Four'},\n\t\t\t\t{kind: Item, content: 'Item Five'}\n\t\t\t]}\n\t\t]}\n\t],\n\tnext: function(inSender, inEvent) {\n\t\tthis.$.panels.next();\n\t\treturn true;\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tChannelInfo = require('../../../moonstone/lib/ChannelInfo'),\n\tClock = require('../../../moonstone/lib/Clock'),\n\tContextualPopup = require('../../../moonstone/lib/ContextualPopup'),\n\tContextualPopupDecorator = require('../../../moonstone/lib/ContextualPopupDecorator')\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem'),\n\tTooltip = require('../../../moonstone/lib/Tooltip'),\n\tTooltipDecorator = require('../../../moonstone/lib/TooltipDecorator')\n\tVideoInfoBackground = require('../../../moonstone/lib/VideoInfoBackground'),\n\tVideoInfoHeader = require('../../../moonstone/lib/VideoInfoHeader'),\n\tVideoPlayer = require('../../../moonstone/lib/VideoPlayer');\n\nmodule.exports = kind({\n    name: 'moon.sample.AlwaysViewingPanelsWithVideoSample',\n    classes: 'moon enyo-fit enyo-unselectable',\n    components: [\n        {name: 'player', kind: VideoPlayer, src: 'http://media.w3.org/2010/05/bunny/movie.mp4', poster: '$lib/moonstone/samples/assets/video-poster.png', autoplay: true, infoComponents: [\n\t\t\t{kind: VideoInfoBackground, orient: 'left', background: true, fit: true, components: [\n\t\t\t\t{\n\t\t\t\t\tkind: ChannelInfo,\n\t\t\t\t\tchannelNo: '13',\n\t\t\t\t\tchannelName: 'AMC',\n\t\t\t\t\tclasses: 'moon-2h', \n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{content: '3D'},\n\t\t\t\t\t\t{content: 'Live'},\n\t\t\t\t\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon '}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkind: VideoInfoHeader,\n\t\t\t\t\ttitle: 'Downton Abbey - Extra Title',\n\t\t\t\t\tsubTitle: 'Mon June 21, 7:00 - 8:00pm',\n\t\t\t\t\tsubSubTitle: 'R - TV 14, V, L, SC',\n\t\t\t\t\tdescription: 'The series, set in the Youkshire country estate of Downton Abbey, depicts the lives of the aristocratic Crawley famiry and'\n\t\t\t\t}\n\t\t\t]},\n\t\t\t{kind: VideoInfoBackground, orient: 'right', background: true, components: [\n\t\t\t\t{kind: Clock}\n\t\t\t]}\n\t\t], components: [\n\t\t\t{kind: IconButton, src: '$lib/moonstone/images/video-player/icon-placeholder.png'},\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: ContextualPopupDecorator, components: [\n\t\t\t\t\t{kind: Button, content: 'Popup'},\n\t\t\t\t\t{\n\t\t\t\t\t\tkind: ContextualPopup,\n\t\t\t\t\t\tclasses: 'moon-3h moon-6v',\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item 2'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item 3'}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]},\n\t\t\t\t{kind: Tooltip, floating:true, content: 'I\\'m a tooltip for a button.'}\n\t\t\t]},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'}\n\t\t]},\n        {name: 'panels', kind: Panels, pattern: 'alwaysviewing', classes: 'enyo-fit', showing: false, components: [\n            {title: 'First Panel', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: ToggleItem, content: 'Show/Hide Side Handle', checked: true,  onchange: 'handleShowingChanged'}\n\t\t\t]},\n\t\t\t{title: 'Second Panel', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n            {title: 'Third Panel', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n            {title: 'Fourth', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n            {title: 'Fifth', joinToPrev: true, titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n            {title: 'Sixth', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n            {title: 'Seventh', joinToPrev: true, titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', classes: 'moon-7h', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]}\n\t\t]}\n\t],\n\tnext: function(inSender, inEvent) {\n\t\tthis.$.panels.next();\n\t\treturn true;\n\t},\n\thandleShowingChanged: function(inSender, inEvent) {\n\t\tthis.$.panels.setHandleShowing(inSender.getChecked());\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tDrawers = require('../../../moonstone/lib/Drawers'),\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels');\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moons.sample.DrawerSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{\n\t\t\tname: 'drawers',\n\t\t\tkind: Drawers,\n\t\t\tdrawers: [\n\t\t\t\t{\n\t\t\t\t\tname: 'partialDrawer',\n\t\t\t\t\topen: false,\n\t\t\t\t\tcontrolsOpen: false,\n\t\t\t\t\tonActivate: 'partialDrawerChanged',\n\t\t\t\t\tonDeactivate: 'partialDrawerChanged',\n\t\t\t\t\thandle: {name: 'handleButton', content: 'Partial drawer with long text truncation'},\n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{kind: Panel, classes: 'enyo-fit', title: 'Partial Drawer', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t],\n\t\t\t\t\tcontrolDrawerComponents: [\n\t\t\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t\t\t{kind: Button, name: 'openMoreButton', content: 'Open More', ontap: 'openMainDrawer'},\n\t\t\t\t\t\t\t{kind: Button, content: 'Close', ontap: 'close'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'searchDrawer',\n\t\t\t\t\thandle: {content: 'Full drawer'},\n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{kind: Panel, classes: 'enyo-fit', title: 'Full Drawer', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\tcomponents: [\n\t\t\t\t{\n\t\t\t\t\tname: 'panels',\n\t\t\t\t\tkind: Panels,\n\t\t\t\t\tpattern: 'activity',\n\t\t\t\t\tclasses: 'enyo-fit',\n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{title: 'First Panel', classes: 'moon-7h', components: [\n\t\t\t\t\t\t\t{kind: Scroller, horizontal: 'hidden', classes: 'enyo-fill', components: [\n\t\t\t\t\t\t\t\t{kind: ExpandablePicker, onChange: 'pickerChangedImg', content: 'Select Image', components: [\n\t\t\t\t\t\t\t\t\t{content: 'Music',value: 'assets/drawer_icon.png'},\n\t\t\t\t\t\t\t\t\t{content: 'LG', value: 'assets/lg.png'},\n\t\t\t\t\t\t\t\t\t{content: 'HTML5', value: 'assets/html5.png'},\n\t\t\t\t\t\t\t\t\t{content: 'CSS3', value: 'assets/css3.png'},\n\t\t\t\t\t\t\t\t\t{content: 'Default', value: '', active: true}\n\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t{kind: ExpandablePicker, onChange: 'pickerChangedIcon', content: 'Select Icon', components: [\n\t\t\t\t\t\t\t\t\t{content: 'Drawer', value: 'drawer'},\n\t\t\t\t\t\t\t\t\t{content: 'FullScreen', value: 'fullscreen'},\n\t\t\t\t\t\t\t\t\t{content: 'Circle', value: 'circle'},\n\t\t\t\t\t\t\t\t\t{content: 'Stop', value: 'stop'},\n\t\t\t\t\t\t\t\t\t{content: 'Play', value: 'play'},\n\t\t\t\t\t\t\t\t\t{content: 'Pause', value: 'pause'},\n\t\t\t\t\t\t\t\t\t{content: 'Forward', value: 'forward'},\n\t\t\t\t\t\t\t\t\t{content: 'Default', value: '', active: true}\n\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{title: 'Second Panel', classes: 'moon-7h', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{title: 'Third Panel', classes: 'moon-7h', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{title: 'Fourth Panel', classes: 'moon-7h', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{title: 'Fifth Panel', classes: 'moon-7h', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\tnext: function (sender, event) {\n\t\tthis.$.panels.next();\n\t\treturn true;\n\t},\n\topenMainDrawer: function () {\n\t\tthis.$.partialDrawer.setOpen(true);\n\t},\n\tclose: function () {\n\t\tif (this.$.partialDrawer.getOpen()) {\n\t\t\tthis.$.partialDrawer.setOpen(false);\n\t\t} else {\n\t\t\tthis.$.partialDrawer.setControlsOpen(false);\n\t\t}\n\t},\n\tpartialDrawerChanged: function () {\n\t\tthis.$.openMoreButton.setShowing(!this.$.partialDrawer.getOpen());\n\t},\n\tpickerChangedImg:function (sender, event){\n\t\tthis.$.drawers.set('src', event.selected.value);\n\t},\n\tpickerChangedIcon:function (sender, event){\n\t\tthis.$.drawers.set('icon', event.selected.value);\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tRepeater = require('../../../enyo/lib/Repeater');\n\nvar\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels');\n\nmodule.exports = kind({\n\tname: 'moon.sample.HeaderAutoCollapsingSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Panels, classes: 'enyo-fit', pattern: 'activity', components: [\n\t\t\t{kind: Panel, classes: 'moon-6h', collapsingHeader: true, title: 'Scroll Me', titleBelow: 'To test the auto-collapsing', subTitleBelow: 'Feature of moon.Panel', headerComponents: [\n\t\t\t\t{kind: IconButton, icon: 'check'},\n\t\t\t\t{kind: IconButton, icon: 'arrowlargeright'}\n\t\t\t], components: [\n\t\t\t\t{kind: Scroller, fit: true, components: [\n\t\t\t\t\t{kind: Repeater, count: 50, onSetupItem: 'setupItem', components: [\n\t\t\t\t\t\t{kind: Item, ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Panel, classes: 'moon-6h', joinToPrev: true, collapsingHeader: true, title: 'Me too', titleBelow: 'Another header', subTitleBelow: 'That collapses on scroll', headerComponents: [\n\t\t\t\t{kind: IconButton, icon: 'check'},\n\t\t\t\t{kind: IconButton, icon: 'arrowlargeright'}\n\t\t\t], components: [\n\t\t\t\t{kind: Scroller, fit: true, components: [\n\t\t\t\t\t{kind: Repeater, count: 50, onSetupItem: 'setupItem', components: [\n\t\t\t\t\t\t{kind: Item, ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Panel, classes: 'moon-6h', collapsingHeader: true, title: 'Yet another', headerComponents: [\n\t\t\t\t{kind: IconButton, icon: 'check'},\n\t\t\t\t{kind: IconButton, icon: 'arrowlargeright'}\n\t\t\t], components: [\n\t\t\t\t{kind: Scroller, fit: true, components: [\n\t\t\t\t\t{kind: Repeater, count: 50, onSetupItem: 'setupItem', components: [\n\t\t\t\t\t\t{kind: Item, ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t],\n\tsetupItem: function (sender, event) {\n\t\tevent.item.$.item.setContent('Scrolling content ' + event.index);\n\t},\n\tnext: function (sender) {\n\t\tthis.$.panels.setIndex(this.$.panels.getPanelIndex(sender)+1);\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\n var\n \tFittableRows = require('../../../layout/lib/FittableRows');\n\n var\n \tBodyText = require('../../../moonstone/lib/BodyText'),\n \tDivider = require('../../../moonstone/lib/Divider'),\n \tIconButton = require('../../../moonstone/lib/IconButton'),\n \tInputHeader = require('../../../moonstone/lib/InputHeader'),\n \tpanel = require('../../../moonstone/lib/panel'),\n \tPanels = require('../../../moonstone/lib/Panels');\n\nmodule.exports = kind({\n\tname: 'moon.sample.InputHeaderSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit moon-input-header-sample',\n\tcomponents: [\n\t\t{kind: Panels, pattern: 'none', fit: true, components: [\n\t\t\t{\n\t\t\t\tkind: Panel,\n\t\t\t\tclasses: 'moon-10h',\n\t\t\t\theaderOptions: {kind: InputHeader, components: [\n\t\t\t\t\t{kind: IconButton, icon: 'check'},\n\t\t\t\t\t{kind: IconButton, icon: 'arrowlargeright'}\n\t\t\t\t]},\n\t\t\t\tonInputHeaderInput: 'handleInput',\n\t\t\t\tonInputHeaderChange: 'handleChange',\n\t\t\t\ttitle:'Input Header',\n\t\t\t\ttitleAbove: '01',\n\t\t\t\ttitleBelow: 'Sub Header',\n\t\t\t\tsubTitleBelow: 'Sub-sub Header'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkind: Panel,\n\t\t\t\tclasses: 'moon-8h',\n\t\t\t\tjoinToPrev: true,\n\t\t\t\theaderOptions: {kind: InputHeader, components: [\n\t\t\t\t\t{kind: IconButton, icon: 'check'},\n\t\t\t\t\t{kind: IconButton, icon: 'arrowlargeright'}\n\t\t\t\t]},\n\t\t\t\tonInputHeaderInput: 'handleInput',\n\t\t\t\tonInputHeaderChange: 'handleChange',\n\t\t\t\theaderType: 'medium',\n\t\t\t\ttitle:'Small Input Header',\n\t\t\t\ttitleAbove: '02',\n\t\t\t\ttitleBelow: 'Sub Header',\n\t\t\t\tsubTitleBelow: 'Sub-sub Header'\n\t\t\t}\n\t\t]},\n\t\t{kind: Divider, content: 'Result', classes: 'moon-input-header-sample-result'},\n\t\t{kind: BodyText, name: 'console', content: 'Input: '}\n\t],\n\thandleInput: function (sender, event) {\n\t\tthis.$.console.setContent('Input: ' + event.originator.getValue());\n\t\treturn true;\n\t},\n\thandleChange: function (sender, event) {\n\t\tthis.$.console.setContent('Change: ' + event.originator.getValue());\n\t\treturn true;\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind')\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tFittableLayout = require('../../../layout/lib/FittableLayout'),\n\tFittableColumnsLayout = FittableLayout.Columns;\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tChannelInfo = require('../../../moonstone/lib/ChannelInfo'),\n\tClock = require('../../../moonstone/lib/Clock'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tSelectableItem = require('../../../moonstone/lib/SelectableItem'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton'),\n\tVideoFullscreenToggleButton = require('../../../moonstone/lib/VideoFullscreenToggleButton'),\n\tVideoInfoBackground = require('../../../moonstone/lib/VideoInfoBackground'),\n\tVideoInfoHeader = require('../../../moonstone/lib/VideoInfoHeader'),\n\tVideoPlayer = require('../../../moonstone/lib/VideoPlayer');\n\nmodule.exports = kind({\n\tname: 'moon.sample.PanelsVideoPlayerSample',\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tcomponents: [\n\t\t{name: 'panels', kind: Panels, pattern: 'activity', classes: 'enyo-fit', components: [\n\t\t\t{kind: Panel, title: 'Video', classes: 'moon-4h', components: [\n\t\t\t\t{kind: Divider, content: 'Select video content'},\n\t\t\t\t{name: 'vidContents', kind: Group, style: 'margin-top: 20px;', components: [\n\t\t\t\t\t{kind: SelectableItem, content: 'Counter', onActivate: 'webMovieCounter'},\n\t\t\t\t\t{kind: SelectableItem, selected: true, content: 'Bunny', onActivate: 'webMovieBunny'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Sintel', onActivate: 'webMovieSintel'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Error URL', onActivate: 'error'}\n\t\t\t\t]},\n\t\t\t\t{classes: 'moon-vspacing-m', components: [\n\t\t\t\t\t{kind: Button, content: 'Unload', ontap: 'unload'},\n\t\t\t\t\t{kind: Button, content: 'Reload', ontap: 'load'},\n\t\t\t\t\t{kind: ToggleButton, name: 'autoplayToggle', content: 'AutoPlay'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Panel, joinToPrev: true, title: 'Player', layoutKind: FittableColumnsLayout, classes: 'moon-7h', components: [\n\t\t\t\t{\n\t\t\t\t\tfit: true,\n\t\t\t\t\tcomponents: [{\n\t\t\t\t\t\tname: 'player',\n\t\t\t\t\t\tkind: VideoPlayer,\n\t\t\t\t\t\tinline:true,\n\t\t\t\t\t\tclasses: 'moon-8h',\n\t\t\t\t\t\tposter: '$lib/moonstone/samples/assets/video-poster.png',\n\t\t\t\t\t\tinfoComponents: [{\n\t\t\t\t\t\t\tkind: VideoInfoBackground,\n\t\t\t\t\t\t\torient: 'left',\n\t\t\t\t\t\t\tfit: true,\n\t\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tkind: ChannelInfo,\n\t\t\t\t\t\t\t\t\tchannelNo: '13',\n\t\t\t\t\t\t\t\t\tchannelName: 'AMC',\n\t\t\t\t\t\t\t\t\tclasses: 'moon-2h',\n\t\t\t\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t\t\t\t{content: '3D'},\n\t\t\t\t\t\t\t\t\t\t{content: 'Live'},\n\t\t\t\t\t\t\t\t\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon'}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tkind: VideoInfoHeader,\n\t\t\t\t\t\t\t\t\ttitle: 'Downton Abbey',\n\t\t\t\t\t\t\t\t\tsubTitle: 'Mon June 21, 7:00 - 8:00pm',\n\t\t\t\t\t\t\t\t\tsubSubTitle: 'R - TV 14, V, L, SC',\n\t\t\t\t\t\t\t\t\tdescription: 'The series, set in the Youkshire country estate of Downton Abbey, depicts the lives of the aristocratic Crawley famiry and'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tkind: VideoInfoBackground,\n\t\t\t\t\t\t\torient: 'right',\n\t\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t\t{kind: Clock}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t{kind: VideoFullscreenToggleButton},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'},\n\t\t\t\t\t\t\t{kind: IconButton, src: 'images/video-player/icon-placeholder.png'}\n\t\t\t\t\t\t]\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '.$.autoplayToggle.value', to: '.$.player.autoplay'}\n\t],\n\tunload: function () {\n\t\tthis.$.player.unload();\n\t},\n\tload: function () {\n\t\tthis.$.player.unload();\n\t\tthis.$.player.setSources(this.sources);\n\t},\n\twebMovieCounter: function (sender, event) {\n\t\tif (!event.originator.active) {\n\t\t\treturn;\n\t\t}\n\t\t// Set source by sources array\n\t\tthis.sources = [\n\t\t\t{src: undefined, type: 'video/mp4'},\n\t\t\t{src: 'http://media.w3.org/2010/05/video/movie_300.ogv', type: 'video/ogg'},\n\t\t\t{src: 'http://media.w3.org/2010/05/video/movie_300.webm', type: 'video/webm'}\n\t\t];\n\t\tthis.$.player.setSources(this.sources);\n\t\tthis.$.videoInfoHeader.setTitle('Ticking Counter Video');\n\t},\n\twebMovieBunny: function (sender, event) {\n\t\tif (!event.originator.active) {\n\t\t\treturn;\n\t\t}\n\t\t// Set source by sources array\n\t\tthis.sources = [\n\t\t\t{src: null, type: 'video/mp4'},\n\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.ogv', type: 'video/ogg'},\n\t\t\t{src: 'http://media.w3.org/2010/05/bunny/movie.webm', type: 'video/webm'}\n\t\t];\n\t\tthis.$.player.setSources(this.sources);\n\t\tthis.$.videoInfoHeader.setTitle('Bunny Video');\n\t},\n\twebMovieSintel: function (sender, event) {\n\t\tif (!event.originator.active) {\n\t\t\treturn;\n\t\t}\n\t\t// Set source by sources array\n\t\tthis.sources = [\n\t\t\t{src: 'http://media.w3.org/2010/05/sintel/trailer.mp4', type: 'video/mp4'},\n\t\t\t{src: 'http://media.w3.org/2010/05/sintel/trailer.ogv', type: 'video/ogg'},\n\t\t\t{src: 'http://media.w3.org/2010/05/sintel/trailer.webm', type: 'video/webm'}\n\t\t];\n\t\tthis.$.player.setSources(this.sources);\n\t\tthis.$.videoInfoHeader.setTitle('The Sintel Video');\n\t},\n\terror: function (sender, event) {\n\t\tif (!event.originator.active) {\n\t\t\treturn;\n\t\t}\n\t\tthis.src = 'http://foo.bar';\n\t\tthis.$.player.setSrc(this.src);\n\t\tthis.$.videoInfoHeader.setTitle('Error video');\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tCardArranger = require('../../../layout/lib/CardArranger')\n\nvar\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tItem = require('../../../moonstone/lib/Item');\n\nmodule.exports = kind({\n\tname: 'moon.sample.PanelsWithCardArrangerSample',\n\tclasses: 'moon enyo-fit',\n\tcomponents: [\n\t\t{name: 'panels', kind: Panels, arrangerKind: CardArranger, animate: false, classes: 'enyo-fit', components: [\n\t\t\t{title: 'First', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Second', joinToPrev: true, components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Third', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Fourth', joinToPrev: true, components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Fifth', joinToPrev: true, components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Sixth Panel with a very long title', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Seventh', joinToPrev: true, components: [\n\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t{kind: Item, content: 'Item Two'},\n\t\t\t\t{kind: Item, content: 'Item Three'},\n\t\t\t\t{kind: Item, content: 'Item Four'},\n\t\t\t\t{kind: Item, content: 'Item Five'}\n\t\t\t]}\n\t\t]}\n\t],\n\tnext: function (sender, event) {\n\t\tthis.$.panels.next();\n\t\treturn true;\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tCarouselArranger = require('../../../layout/lib/CarouselArranger')\n\nvar\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tItem = require('../../../moonstone/lib/Item');\n\nmodule.exports = kind({\n\tname: 'moon.sample.PanelsWithCarouselArrangerSample',\n\tclasses: 'moon enyo-fit',\n\tcomponents: [\n\t\t{name: 'panels', kind: Panels, arrangerKind: CarouselArranger, classes: 'enyo-fit full', components: [\n\t\t\t{title: 'First', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Second', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Third', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Fourth', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Fifth', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Sixth', components: [\n\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next'},\n\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next'}\n\t\t\t]},\n\t\t\t{title: 'Seventh', components: [\n\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t{kind: Item, content: 'Item Two'},\n\t\t\t\t{kind: Item, content: 'Item Three'},\n\t\t\t\t{kind: Item, content: 'Item Four'},\n\t\t\t\t{kind: Item, content: 'Item Five'}\n\t\t\t]}\n\t\t]}\n\t],\n\tnext: function(inSender, inEvent) {\n\t\tthis.$.panels.next();\n\t\treturn true;\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tCardArranger = require('../../../layout/lib/CardArranger'),\n\tFittableColumns = require('../../../layout/lib/FittableColumns'),\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tFormCheckbox = require('../../../moonstone/lib/FormCheckbox'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tPopup = require('../../../moonstone/lib/Popup'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\nmodule.exports = kind({\n\tname: 'moon.sample.PopupSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Divider, content: 'Popups'},\n\n\t\t{classes: 'moon-hspacing moon-vspacing-s', components: [\n\t\t\t{kind: Button, content: 'Basic Popup', ontap: 'showPopup', popup: 'basicPopup'},\n\t\t\t{kind: Button, content: 'Direct Popup', ontap: 'showPopup', popup: 'directPopup', direct: true},\n\t\t\t{kind: Button, content: 'Long Popup', ontap: 'showPopup', popup: 'longPopup'}\n\t\t]},\n\t\t{classes: 'moon-hspacing moon-vspacing-s', components: [\n\t\t\t{kind: Button, content: 'Scroller Popup', ontap: 'showPopup', popup: 'scrollerPopup'},\n\t\t\t{kind: Button, content: 'Button in Popup', ontap: 'showPopup', popup: 'buttonPopup'},\n\t\t\t{kind: Button, content: 'Panels in Popup', ontap: 'showPopup', popup: 'panelsPopup'}\n\t\t]},\n\n\t\t{name: 'basicPopup', kind: Popup, content: 'Popup...'},\n\t\t// The directPopup only works when we programmatically call 'showDirect' or 'hideDirect'. So, we set autoDismiss as false here.\n\t\t{name: 'directPopup', kind: Popup, autoDismiss: false, components: [\n\t\t\t{content: 'Direct Popup'},\t\n\t\t\t{kind: Button, content: 'Hide Direct', ontap: 'hidePopup', popup: 'directPopup', direct: true}\n\t\t]},\n\t\t{name: 'longPopup', kind: Popup, allowHtml: true, content: 'Don\\'t go changing, to try and please me  <br>You never let me down before  <br>Don\\'t imagine you\\'re too familiar  <br>And I don\\'t see you anymore  <br>I wouldn\\'t leave you in times of trouble  <br>We never could have come this far I took the good times, I\\'ll take the bad times I\\'ll take you just the way you are Don\\'t go trying some new fashion Don\\'t change the color of your hair You always have my unspoken passion Although I might not seem to care I don\\'t want clever conversation I never want to work that hard I just want someone that I can talk to I want you just the way you are. I need to know that you will always be The same old someone that I knew What will it take till you believe in me The way that I believe in you.'},\n\t\t{name: 'scrollerPopup', kind: Popup, components: [\n\t\t\t{kind: Button, content: 'Button Outside Scroller'},\n\t\t\t{kind: Scroller, style: 'height:170px;margin-top:10px;', components: [\n\t\t\t\t{kind: Item, content: 'Test Item 1'},\n\t\t\t\t{kind: Item, content: 'Test Item 2'},\n\t\t\t\t{kind: Item, content: 'Test Item 3'},\n\t\t\t\t{kind: Item, content: 'Test Item 4'},\n\t\t\t\t{kind: Item, content: 'Test Item 5'},\n\t\t\t\t{kind: Item, content: 'Test Item 6'},\n\t\t\t\t{kind: Item, content: 'Test Item 7'},\n\t\t\t\t{kind: Item, content: 'Test Item 8'},\n\t\t\t\t{kind: Item, content: 'Test Item 9'},\n\t\t\t\t{kind: Item, content: 'Test Item 10'}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'buttonPopup', kind: Popup, floating: true, components: [\n\t\t\t{kind: Divider, content: 'Buttons in popup example'},\n\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t{kind: Button, content: 'Hello'},\n\t\t\t\t{kind: Button, content: 'Goodbye'},\n\t\t\t\t{kind: ToggleButton, content: 'SpotlightModal', ontap: 'buttonToggled'}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'panelsPopup', kind: Popup, floating: true, components: [\n\t\t\t{kind: Panels, name: 'panels', defaultKind: FittableRows, arrangerKind: CardArranger, animate:false, classes: 'moon-12v', components: [\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Step 1: Terms of Service'},\n\t\t\t\t\t{kind: Scroller, fit: true, spotlightPagingControls: true, horizontal: 'hidden', style: 'margin-bottom:20px;', components: [\n\t\t\t\t\t\t{kind: BodyText, content: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: FittableColumns, components: [\n\t\t\t\t\t\t{fit: true, components: [\n\t\t\t\t\t\t\t{kind: FormCheckbox, content: 'I agree', style: 'display:inline-block;'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ToggleButton, content: 'SpotlightModal', ontap: 'panelsToggled'},\n\t\t\t\t\t\t{kind: Button, content: 'Sign me Up!', ontap: 'panelNext'}\n\t\t\t\t\t]}\n\t\t\t\t]},\n\t\t\t\t{components: [\n\t\t\t\t\t{kind: Divider, content: 'Step 2'},\n\t\t\t\t\t{kind: BodyText, fit: true, content: 'All done.  Thanks for signing up!'},\n\t\t\t\t\t{kind: Button, content: 'Previous', ontap: 'panelPrev'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t],\n\tpopupActivator: null,\n\tshowPopup: function (sender) {\n\t\tthis.hidePopups();\n\t\tvar p = this.$[sender.popup];\n\t\tif (p) {\n\t\t\tif(sender.direct) {\n\t\t\t\tp.showDirect();\n\t\t\t} else {\n\t\t\t\tp.show();\n\t\t\t}\n\t\t}\n\t},\n\thidePopup: function (sender) {\n\t\tvar p = this.$[sender.popup];\n\t\tif(p) {\n\t\t\tif(sender.direct) {\n\t\t\t\tp.hideDirect();\n\t\t\t} else {\n\t\t\t\tp.hide();\n\t\t\t}\n\t\t}\n\t},\n\thidePopups: function () {\n\t\tthis.$.basicPopup.hide();\n\t\tthis.$.longPopup.hide();\n\t\tthis.$.buttonPopup.hide();\n\t},\n\tbuttonToggled: function (sender, event) {\n\t\tthis.$.buttonPopup.setSpotlightModal(sender.getActive());\n\t\tthis.$.buttonPopup.setAutoDismiss(!sender.getActive());\n\t},\n\tpanelsToggled: function (sender, event) {\n\t\tthis.$.panelsPopup.setSpotlightModal(sender.getActive());\n\t\tthis.$.panelsPopup.setAutoDismiss(!sender.getActive());\n\t},\n\tpanelNext: function () {\n\t\tthis.$.panels.next();\n\t},\n\tpanelPrev: function () {\n\t\tthis.$.panels.previous();\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tCollection = require('../../../enyo/lib/Collection');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tExpandableDataPicker = require('../../../moonstone/lib/ExpandableDataPicker'),\n\tFormCheckbox = require('../../../moonstone/lib/FormCheckbox'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ExpandableDataPickerSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{name: 'picker', kind: ExpandableDataPicker, content: 'Expandable Data Picker', noneText: 'Nothing Selected', components: [\n\t\t\t\t{bindings: [\n\t\t\t\t\t{from: '.model.label', to: '.content'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Divider, content:'Options'},\n\t\t\t{kind: FormCheckbox, content: 'Multiple Selection', prop: 'multipleSelection', onchange: 'checked'},\n\t\t\t{kind: FormCheckbox, content: 'Auto Collapse', prop: 'autoCollapseOnSelect', checked: true, onchange: 'checked'}\n\t\t]}\n\t],\n\tcreate: function () {\n\t\tFittableRows.prototype.create.apply(this, arguments);\n\t\tthis.$.picker.set('collection', new Collection([\n\t\t\t{label: 'first'},\n\t\t\t{label: 'second'},\n\t\t\t{label: 'third'}\n\t\t]));\n\t},\n\tchecked: function (sender, event) {\n\t\tthis.$.picker.set(sender.prop, sender.checked);\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tContextualPopup = require('../../../moonstone/lib/ContextualPopup'),\n\tContextualPopupDecorator = require('../../../moonstone/lib/ContextualPopupDecorator'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tRadioItem = require('../../../moonstone/lib/RadioItem'),\n\tRadioItemGroup = require('../../../moonstone/lib/RadioItemGroup'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ontextualPopupSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{\n\t\t\tkind: ContextualPopupDecorator,\n\t\t\tstyle: 'position: absolute; left: 0px; top: 0px;',\n\t\t\tcomponents:\n\t\t\t[\n\t\t\t\t{content: 'Average'},\n\t\t\t\t{\n\t\t\t\t\tkind: ContextualPopup,\n\t\t\t\t\tclasses: 'moon-2h moon-8v',\n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; right: 0px; top: 0px;', components: [\n\t\t\t{content: 'Small', small:true},\n\t\t\t{kind: ContextualPopup}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; right: 0px; top: 13%;', components: [\n\t\t\t{content: 'Nested Radio', small:true},\n\t\t\t\t{name: 'nestedRadioPopup', kind: ContextualPopup, components:[\n\t\t\t\t\t{name: 'nestedRadioGroup', kind: RadioItemGroup, components: [\n\t\t\t\t\t\t{content: 'Creek', selected: true},\n\t\t\t\t\t\t{content: 'River'},\n\t\t\t\t\t\t{content: 'Ocean'}\n\t\t\t\t\t]},\n\t\t\t\t\t{components:[\n\t\t\t\t\t\t{content: 'Radio Group Value'},\n\t\t\t\t\t\t{name: 'nestedRadioValue'}\n\t\t\t\t\t]},\n\t\t\t\t\t{name: 'nestedRadioDismissButton',\n\t\t\t\t\t kind: ToggleButton,\n\t\t\t\t\t style: 'margin-top:5px',\n\t\t\t\t\t small: true,\n\t\t\t\t\t toggleOnLabel: 'select dismiss on',\n\t\t\t\t\t toggleOffLabel: 'select dismiss off'\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t]\n\t\t},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; left: 0px; top: 25%;', components: [\n\t\t\t{content: 'Left'},\n\t\t\t{\n\t\t\t\tkind: ContextualPopup,\n\t\t\t\tclasses: 'moon-3h moon-4v',\n\t\t\t\tcomponents: [\n\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t]\n\t\t\t}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; right: 0px; top: 25%;', components: [\n\t\t\t{content: 'Right', small:true},\n\t\t\t{kind: ContextualPopup, components: [\n\t\t\t\t{content: 'Outside scroller', kind: Item},\n\t\t\t\t{classes: 'moon-8h moon-6v', components: [\n\t\t\t\t\t{kind: Scroller, classes: 'enyo-fill', components: [\n\t\t\t\t\t\t{content: 'testing 1', kind: Item},\n\t\t\t\t\t\t{content: 'testing 2', kind: Item},\n\t\t\t\t\t\t{content: 'testing 3', kind: Item},\n\t\t\t\t\t\t{content: 'testing 4', kind: Item},\n\t\t\t\t\t\t{content: 'testing 5', kind: Item},\n\t\t\t\t\t\t{content: 'testing 6', kind: Item},\n\t\t\t\t\t\t{content: 'testing 7', kind: Item},\n\t\t\t\t\t\t{content: 'testing 8', kind: Item},\n\t\t\t\t\t\t{content: 'testing 9', kind: Item},\n\t\t\t\t\t\t{content: 'testing 10', kind: Item},\n\t\t\t\t\t\t{content: 'testing 12', kind: Item},\n\t\t\t\t\t\t{content: 'testing 13', kind: Item},\n\t\t\t\t\t\t{content: 'testing 14', kind: Item},\n\t\t\t\t\t\t{content: 'testing 15', kind: Item},\n\t\t\t\t\t\t{content: 'testing 16', kind: Item},\n\t\t\t\t\t\t{content: 'testing 17', kind: Item},\n\t\t\t\t\t\t{content: 'testing 18', kind: Item},\n\t\t\t\t\t\t{content: 'testing 19', kind: Item}\n\t\t\t\t\t]}\n\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; left: 0px; top: 45%;', components: [\n\t\t\t{content: 'Wide'},\n\t\t\t{kind: ContextualPopup, classes: 'moon-6h moon-4v', components: [\n\t\t\t\t{kind: Scroller, classes: 'enyo-fill', components:[\n\t\t\t\t\t{content: 'testing 1'},\n\t\t\t\t\t{content: 'testing 2'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; right: 0px; top: 45%;', components: [\n\t\t\t{content: 'Long but Small Button with truncation', small:true},\n\t\t\t{kind: ContextualPopup, components: [\n\t\t\t\t{content: 'Outside scroller', kind: Item},\n\t\t\t\t{classes: 'moon-16v', components: [\n\t\t\t\t\t{kind: Scroller, classes: 'enyo-fill', components: [\n\t\t\t\t\t\t{content: 'testing 1', kind: Item},\n\t\t\t\t\t\t{content: 'testing 2', kind: Item},\n\t\t\t\t\t\t{content: 'testing 3', kind: Item},\n\t\t\t\t\t\t{content: 'testing 4', kind: Item},\n\t\t\t\t\t\t{content: 'testing 5', kind: Item},\n\t\t\t\t\t\t{content: 'testing 6', kind: Item},\n\t\t\t\t\t\t{content: 'testing 7', kind: Item},\n\t\t\t\t\t\t{content: 'testing 8', kind: Item},\n\t\t\t\t\t\t{content: 'testing 9', kind: Item},\n\t\t\t\t\t\t{content: 'testing 10', kind: Item},\n\t\t\t\t\t\t{content: 'testing 12', kind: Item},\n\t\t\t\t\t\t{content: 'testing 13', kind: Item},\n\t\t\t\t\t\t{content: 'testing 14', kind: Item},\n\t\t\t\t\t\t{content: 'testing 15', kind: Item},\n\t\t\t\t\t\t{content: 'testing 16', kind: Item},\n\t\t\t\t\t\t{content: 'testing 17', kind: Item},\n\t\t\t\t\t\t{content: 'testing 18', kind: Item},\n\t\t\t\t\t\t{content: 'testing 19', kind: Item}\n\t\t\t\t\t]}\n\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; left: 0px; top: 65%;', components: [\n\t\t\t{content: 'Deactivated', disabled:true},\n\t\t\t{kind: ContextualPopup, classes: 'moon-6h moon-4v', components: [\n\t\t\t\t{kind: Scroller, classes: 'enyo-fill', components:[\n\t\t\t\t\t{content: 'testing 1'},\n\t\t\t\t\t{content: 'testing 2'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; right: 0px; top: 65%;', components: [\n\t\t\t{content: 'Small Deactivated', small:true, disabled:true},\n\t\t\t{kind: ContextualPopup, classes: 'moon-6h moon-4v', components: [\n\t\t\t\t{kind: Scroller, classes: 'enyo-fill', components:[\n\t\t\t\t\t{content: 'testing 1'},\n\t\t\t\t\t{content: 'testing 2'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; left: 0px; bottom: 0px;', components: [\n\t\t\t{content: 'Spotlight Modal'},\n\t\t\t{\n\t\t\t\tkind: ContextualPopup,\n\t\t\t\tname: 'buttonPopup',\n\t\t\t\tclasses: 'moon-8h moon-8v',\n\t\t\t\tmodal: true,\n\t\t\t\tautoDismiss: false,\n\t\t\t\tspotlightModal: true,\n\t\t\t\tcomponents: [\n\t\t\t\t\t{kind: Scroller, horizontal: 'auto', classes: 'enyo-fill', components: [\n\t\t\t\t\t\t{kind: Button, content: 'Button'},\n\t\t\t\t\t\t{kind: ToggleButton, content: 'SpotlightModal', value: true, ontap: 'buttonToggled'},\n\t\t\t\t\t\t{tag: 'br'},\n\t\t\t\t\t\t{tag: 'br'},\n\t\t\t\t\t\t{kind: InputDecorator, spotlight: true, components: [\n\t\t\t\t\t\t\t{kind: Input, placeholder: 'USERNAME'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, style: 'position: absolute; right: 0px; bottom: 0px;', components: [\n\t\t\t{content: 'Spottable', small:true},\n\t\t\t{\n\t\t\t\tkind: ContextualPopup,\n\t\t\t\tclasses: 'moon-9h moon-4v',\n\t\t\t\tcomponents: [\n\t\t\t\t\t{kind: Scroller, horizontal: 'auto', classes: 'enyo-fill', components: [\n\t\t\t\t\t\t{kind: Button, content: 'Button 1'},\n\t\t\t\t\t\t{kind: Button, content: 'Button 2'},\n\t\t\t\t\t\t{kind: Button, content: 'Button 3'}\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t]},\n\t\t{style: 'position: absolute; left: 30%; top: 25%;', components: [\n\t\t\t{kind: Divider, content: 'Button Position', classes: 'radioItemFont'},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, style: 'width: 120px', name: 'leftInput', placeholder: 'left (px or %)', classes: 'radioItemFont'}\n\t\t\t]},\n\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t{kind: Input, style: 'width: 120px', name: 'topInput', placeholder: 'top (px or %)', classes: 'radioItemFont'}\n\t\t\t]},\n\t\t\t{kind: Button, small: true, content: 'Set Position', ontap: 'setPosition'}\n\t\t]},\n\t\t{style: 'position: absolute; left: 30%; top: 50%; ', components: [\n\t\t\t{kind: Divider, content: 'Popup Direction', classes: 'radioItemFont'},\n\t\t\t{kind: RadioItemGroup, onActivate: 'groupChanged', components: [\n\t\t\t\t{content: 'none', classes: 'radioItemFont'},\n\t\t\t\t{content: 'left', classes: 'radioItemFont'},\n\t\t\t\t{content: 'right', classes: 'radioItemFont'},\n\t\t\t\t{content: 'top', classes: 'radioItemFont'},\n\t\t\t\t{content: 'bottom', classes: 'radioItemFont'}\n\t\t\t]}\n\t\t]},\n\t\t{kind: ContextualPopupDecorator, name: 'directionButton', style: 'position: absolute; left: 40%; top: 70%;', components: [\n\t\t\t{content: 'Direction'},\n\t\t\t{\n\t\t\t\tkind: ContextualPopup,\n\t\t\t\tname: 'directionContext',\n\t\t\t\tclasses: 'moon-4v',\n\t\t\t\tcomponents: [\n\t\t\t\t\t{kind: Scroller, horizontal: 'auto', classes: 'enyo-fill', components: [\n\t\t\t\t\t\t{kind: Button, content: 'Button 1'},\n\t\t\t\t\t\t{kind: Button, content: 'Button 2'}\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '.$.nestedRadioGroup.active.content', to: '.$.nestedRadioValue.content', transform: function(val){\n\t\t\tthis.dismissRadioSelection();\n\t\t\treturn val;\n\t\t}}\n\t],\n\tbuttonToggled: function(inSender, inEvent) {\n\t\tthis.$.buttonPopup.setSpotlightModal(inSender.getActive());\n\t\tthis.$.buttonPopup.setAutoDismiss(!inSender.getActive());\n\t},\n\tdismissRadioSelection: function(){\n\t\tif(this.$.nestedRadioDismissButton.value) this.$.nestedRadioPopup.hide();\n\t},\n\tsetPosition: function(){\n\t\tthis.$.directionButton.applyStyle('left', this.$.leftInput.getValue() === '' ? '40%' : this.$.leftInput.getValue());\n\t\tthis.$.directionButton.applyStyle('top', this.$.topInput.getValue() === '' ? '70%' : this.$.topInput.getValue());\n\t},\n\tgroupChanged: function(inSender, inEvent) {\n\t\tif(inEvent.originator.getActive() && inEvent.originator.kind === RadioItem) {\n\t\t\tvar selected = inEvent.originator.getContent();\n\t\t\tthis.$.directionContext.set('direction', selected);\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tRadioItem = require('../../../moonstone/lib/RadioItem'),\n\tRadioItemGroup = require('../../../moonstone/lib/RadioItemGroup');\n\nmodule.exports = kind({\n\tname: 'moon.sample.RadioItemSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tkind: FittableRows,\n\tcomponents: [\n\t\t{fit: true, components: [\n\t\t\t{kind: Divider, content: 'Radio Items'},\n\t\t\t{style: 'margin: 0 10px', onActivate: 'buttonActivated', components: [\n\t\t\t\t{kind: RadioItem, content: 'Cat'},\n\t\t\t\t{kind: RadioItem, content: 'Dog'},\n\t\t\t\t{kind: RadioItem, content: 'Whale', disabled: true},\n\t\t\t\t{kind: RadioItem, content: 'Monte Verde Golden Toad'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Radio Item Group'},\n\t\t\t{kind: RadioItemGroup, onActivate: 'buttonActivated', components: [\n\t\t\t\t{content: 'Raspberry'},\n\t\t\t\t{content: 'Blackberry'},\n\t\t\t\t{content: 'Strawberry', disabled: true},\n\t\t\t\t{content: 'Persimmon is botanical berries'}\n\t\t\t]},\n\t\t\t{classes: 'moon-1v'},\n\t\t\t{kind: Divider, content: 'Pre-selected Radio Item Group'},\n\t\t\t{kind: RadioItemGroup, onActivate: 'buttonActivated', components: [\n\t\t\t\t{content: 'Creek'},\n\t\t\t\t{content: 'River', selected: true},\n\t\t\t\t{content: 'Waterfall', disabled: true},\n\t\t\t\t{content: 'Ocean is big big big water'}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'result', content: 'No action yet.'}\n\t],\n\tbuttonActivated: function (sender, event) {\n\t\tvar originator = event.originator,\n\t\t\tstr = 'The \\'';\n\t\t\n\t\tif (!originator || !this.hasNode()) {\n\t\t\treturn;\n\t\t}\n\t\t\t\n\t\tstr += (event.originator.getActive() && event.originator.kind === 'moon.RadioItem') ? originator.getContent() : originator.name;\n\t\tstr +=  '\\' item is selected.';\n\t\t\n\t\tthis.$.result.setContent(str);\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableColumns = require('../../../layout/lib/FittableColumns'),\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tCalendar = require('../../../moonstone/lib/Calendar'),\n\tDatePicker = require('../../../moonstone/lib/DatePicker'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\nmodule.exports = kind({\n\tname: 'smoon.sample.CalendarSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tkind: FittableColumns,\n\tcomponents: [\n\t\t{components: [\n\t\t\t{kind: Calendar, name: 'calendar', onChange: 'changed'}\n\t\t]},\n\t\t{kind: FittableRows, fit: true, components: [\n\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t{kind: Divider, content: 'Set value: '},\n\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t{kind: InputDecorator, classes: 'moon-2h', components: [\n\t\t\t\t\t\t{kind: Input, name: 'yearInput', classes: 'moon-calendar-sample-input', placeholder: 'Year'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: InputDecorator, classes: 'moon-2h', components: [\n\t\t\t\t\t\t{kind: Input, name: 'monthInput', classes: 'moon-calendar-sample-input', placeholder: 'Month'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: InputDecorator, classes: 'moon-2h', components: [\n\t\t\t\t\t\t{kind: Input, name: 'dayInput', classes: 'moon-calendar-sample-input', placeholder: 'Day'}\n\t\t\t\t\t]}\n\t\t\t\t]},\n\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t{kind: Button, small:true, content: 'Set Date', ontap: 'setDate'},\n\t\t\t\t\t{kind: Button, small:true, content: 'Reset to Current', ontap: 'resetDate'}\n\t\t\t\t]},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{classes: 'moon-7h', components: [\n\t\t\t\t\t{kind: DatePicker, name: 'picker', noneText: 'Pick a Date', content: 'Pick a Date'},\n\t\t\t\t\t{kind: ExpandablePicker, name: 'localePicker', noneText: 'No Language Selected', content: 'Choose Locale', onChange: 'setLocale', components: [\n\t\t\t\t\t\t{content: 'Use Default Locale', active: true},\n\t\t\t\t\t\t{content: 'ko-KO'}, //Korea, firstDayOfWeek: 1\n\t\t\t\t\t\t{content: 'zh-TW'},\n\t\t\t\t\t\t{content: 'fa-IR'}, // Iran, persian calendar\n\t\t\t\t\t\t{content: 'th-TH'}, //Thailand\n\t\t\t\t\t\t{content: 'en-US'}, //United States, firstDayOfWeek: 0\n\t\t\t\t\t\t{content: 'und-AE'}, //United Arab Emirates, firstDayOfWeek: 6\n\t\t\t\t\t\t{content: 'und-AG'}, //Antigua and Barbuda, firstDayOfWeek: 0\n\t\t\t\t\t\t{content: 'und-CA'}, //Canada, firstDayOfWeek: 0\n\t\t\t\t\t\t{content: 'it-CH'}, //Italian\n\t\t\t\t\t\t{content: 'en-MX'},\n\t\t\t\t\t\t{content: 'de-DE'}, // Germany, firstDayOfWeek: 1\n\t\t\t\t\t\t{content: 'fr-FR'}, // France, firstDayOfWeek: 1\n\t\t\t\t\t\t{content: 'fr-CA'},\n\t\t\t\t\t\t{content: 'it-IT'}, // Italy, firstDayOfWeek: 1\n\t\t\t\t\t\t{content: 'es-ES'}, // Spain, firstDayOfWeek: 1\n\t\t\t\t\t\t{content: 'es-MX'}\n\t\t\t\t\t]},\n\t\t\t\t\t{name: 'dowLengthPicker', kind: ExpandablePicker, content: 'Choose DOW Label Length', onChange: 'setLabelLength', components: [\n\t\t\t\t\t\t{content: 'short', active: true},\n\t\t\t\t\t\t{content: 'medium'},\n\t\t\t\t\t\t{content: 'long'},\n\t\t\t\t\t\t{content: 'full'}\n\t\t\t\t\t]},\n\t\t\t\t\t{name: 'dowLabelClass', kind: ExpandablePicker, content: 'Choose DOW Label Class', onChange: 'setLabelStyle', components: [\n\t\t\t\t\t\t{content: 'Default', active: true, className: ''},\n\t\t\t\t\t\t{content: 'Divider', className: 'moon-divider moon-divider-text'},\n\t\t\t\t\t\t{content: 'Smaller font', className: 'moon-calendar-picker-day small'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Divider, content: 'Result'},\n\t\t\t{kind: BodyText, name: 'result', content: 'No change yet'}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '.$.calendar.value', to: '.$.picker.value', oneWay:false}\n\t],\n\tcreate: function(){\n\t\tthis.inherited(arguments);\n\t\tif (!window.ilib) {\n\t\t\tthis.$.localePicker.hide();\n\t\t\tthis.$.dowLengthPicker.hide();\n\t\t\tthis.log('iLib not present -- hiding locale & dow length picker');\n\t\t} else {\n\t\t\tthis.df = new ilib.DateFmt({\n\t\t\t\ttype: 'datetime',\n\t\t\t\ttime: 'hmsa',\n\t\t\t\tdate: 'dmy',\n\t\t\t\tuseNative: false,\n\t\t\t\tlength: 'short'\n\t\t\t});\n\t\t}\n\n\t\tif (this.$.localePicker.selected) {\n\t\t\tthis.setLocale(null, {selected: this.$.localePicker.selected});\n\t\t}\n\t},\n\n\tupdateCurrentString: function (date) {\n\t\tvar formatted = window.ilib ? this.df.format(date) : date.toDateString();\n\t\tthis.$.result.setContent('Current Date' + ' changed to ' + formatted);\n\t},\n\n\tsetLocale: function(inSender, inEvent){\n\t\tif (window.ilib) {\n\t\t\tvar locale = inEvent.selected.content,\n\t\t\t\tval = (locale == 'Use Default Locale') ? null : locale;\n\t\t\tenyo.updateLocale(locale);\n\t\t\tthis.$.calendar.setLocale(val);\n\t\t\tthis.$.picker.setLocale(val);\n\n\t\t\tthis.df = new ilib.DateFmt({\n\t\t\t\ttype: 'datetime',\n\t\t\t\ttime: 'hmsa',\n\t\t\t\tdate: 'dmy',\n\t\t\t\tuseNative: false,\n\t\t\t\tlength: this.$.dowLengthPicker.selected.content\n\t\t\t});\n\t\t\tthis.updateCurrentString(this.$.calendar.getValue());\n\t\t}\n\t\treturn true;\n\t},\n\tsetLabelLength: function(inSender, inEvent){\n\t\tif (inEvent.content){\n\t\t\tthis.$.calendar.setDayOfWeekLength(inEvent.content);\n\t\t\tif (ilib) {\n\t\t\t\tthis.df = new ilib.DateFmt({\n\t\t\t\t\ttype: 'datetime',\n\t\t\t\t\ttime: 'hmsa',\n\t\t\t\t\tdate: 'dmy',\n\t\t\t\t\tuseNative: false,\n\t\t\t\t\tlength: inEvent.content\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.updateCurrentString(this.$.calendar.getValue());\n\t\t\tthis.removeLabelItem(this.$.dowLabelClass, inEvent, 'Divider', 'full');\n\t\t}\n\t\treturn true;\n\t},\n\tsetLabelStyle: function(inSender, inEvent){\n\t\tif (inEvent.content){\n\t\t\tthis.$.calendar.setDayOfWeekClasses(inEvent.selected.className);\n\t\t\tthis.removeLabelItem(this.$.dowLengthPicker, inEvent, 'full', 'Divider');\n\t\t}\n\t\treturn true;\n\t},\n\tremoveLabelItem: function (inControl, inEvent, inLabelName1, inLabelName2) {\n\t\tvar i,\n\t\t\tc = inControl.getClientControls();\n\t\tfor (i = 0; i < c.length; i++) {\n\t\t\tif (c[i].content == inLabelName1) {\n\t\t\t\tc[i].addRemoveClass('moon-calendar-dow-lable-nodisplay', Boolean(inEvent.content == inLabelName2));\n\t\t\t}\n\t\t}\n\t},\n\tchanged: function(inSender, inEvent) {\n\t\tif (this.$.result && inEvent.value) {\n\t\t\tthis.updateCurrentString(inEvent.value);\n\t\t}\n\t},\n\tsetDate: function(inSender, inEvent){\n\t\tvar year = isNaN(parseInt(this.$.yearInput.getValue(), 0)) ? this.$.picker.value.getFullYear() : parseInt(this.$.yearInput.getValue(), 0);\n\t\tvar month = isNaN(parseInt(this.$.monthInput.getValue(), 0)) ? this.$.picker.value.getMonth() : parseInt(this.$.monthInput.getValue(), 0) - 1;\n\t\tvar day = isNaN(parseInt(this.$.dayInput.getValue(), 0)) ? this.$.picker.value.getDate() : parseInt(this.$.dayInput.getValue(), 0);\n\t\tthis.$.calendar.setValue(new Date(year, month, day));\n\t},\n\tresetDate: function() {\n\t\tthis.$.calendar.setValue(null);\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tDatePicker = require('../../../moonstone/lib/DatePicker'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tBodyText = require('../../../moonstone/lib/BodyText');\n\nmodule.exports = kind({\n\tname: 'moons.sample.DatePickerSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-7h moon-vspacing-s', components: [\n\t\t\t\t{kind: DatePicker, name: 'picker', noneText: 'Pick a Date', content: 'Date', onChange: 'changed'},\n\t\t\t\t{kind: Button, name: 'buttonReset', content: 'Reset Date', small: true, ontap: 'resetTapped'},\n\t\t\t\t{kind: DatePicker, name: 'disabledPicker', disabled: true, noneText: 'Disabled Date Picker', content: 'Disabled Date'},\n\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t{kind: InputDecorator, classes: 'moon-2h', components: [\n\t\t\t\t\t\t{kind: Input, name: 'yearInput', classes: 'moon-date-picker-sample-input', placeholder: 'Year'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: InputDecorator, classes: 'moon-2h', components: [\n\t\t\t\t\t\t{kind: Input, name: 'monthInput', classes: 'moon-date-picker-sample-input', placeholder: 'Month'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: InputDecorator, classes: 'moon-2h', components: [\n\t\t\t\t\t\t{kind: Input, name: 'dayInput', classes: 'moon-date-picker-sample-input', placeholder: 'Day'}\n\t\t\t\t\t]}\n\t\t\t\t]},\n\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t{kind: Button, small: true, content: 'Set Date', ontap: 'setDate'},\n\t\t\t\t\t{kind: Button, small: true, content: 'Reset to Current', ontap: 'resetDate'}\n\t\t\t\t]},\n\t\t\t\t{name: 'localePicker', kind: ExpandablePicker, noneText: 'No Locale Selected', content: 'Choose Locale', onChange: 'setLocale', components: [\n\t\t\t\t\t{content: 'Use Default Locale', active: true},\n\t\t\t\t\t{content: 'ko-KR'},\n\t\t\t\t\t{content: 'zh-TW'},\n\t\t\t\t\t{content: 'fa-IR'},\n\t\t\t\t\t{content: 'ar-SA'},\n\t\t\t\t\t{content: 'ur-IN'},\n\t\t\t\t\t{content: 'th-TH'},\t//Thailand\n\t\t\t\t\t{content: 'en-US'},\n\t\t\t\t\t{content: 'jp-JP'},\n\t\t\t\t\t{content: 'en-CA'},\n\t\t\t\t\t{content: 'en-IE'},\n\t\t\t\t\t{content: 'en-GB'},\n\t\t\t\t\t{content: 'en-MX'},\n\t\t\t\t\t{content: 'de-DE'},\n\t\t\t\t\t{content: 'fr-FR'},\n\t\t\t\t\t{content: 'fr-CA'},\n\t\t\t\t\t{content: 'it-IT'},\n\t\t\t\t\t{content: 'es-ES'},\n\t\t\t\t\t{content: 'es-MX'},\n\t\t\t\t\t{content: 'es-US'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'result', content: 'No change yet'}\n\t],\n\tcreate: function(){\n\t\tthis.inherited(arguments);\n\t\tif (!window.ilib) {\n\t\t\tthis.$.localePicker.hide();\n\t\t\tthis.log('iLib not present -- hiding locale picker');\n\t\t}\n\t},\n\tsetLocale: function(inSender, inEvent){\n\t\tif (window.ilib) {\n\t\t\tvar locale = inEvent.selected.content,\n\t\t\t\tval = (locale == 'Use Default Locale') ? null : locale;\n\t\t\tenyo.updateLocale(locale);\n\t\t\tthis.$.picker.setLocale(val);\n\t\t\tthis.$.disabledPicker.setLocale(val);\n\t\t}\n\t\treturn true;\n\t},\n\tsetDate: function() {\n\t\tvar current = this.$.picker.value || new Date();\n\t\tvar year = isNaN(parseInt(this.$.yearInput.getValue(), 0)) ? current.getFullYear() : parseInt(this.$.yearInput.getValue(), 0);\n\t\tvar month = isNaN(parseInt(this.$.monthInput.getValue(), 0)) ? current.getMonth() : parseInt(this.$.monthInput.getValue(), 0) - 1;\n\t\tvar day = isNaN(parseInt(this.$.dayInput.getValue(), 0)) ? current.getDate() : parseInt(this.$.dayInput.getValue(), 0);\n\t\tthis.$.picker.setValue(new Date(year, month, day));\n\t},\n\tresetDate: function() {\n\t\tthis.$.picker.setValue(new Date());\n\t},\n\tchanged: function(inSender, inEvent) {\n\t\tif (this.$.result && inEvent.value){\n\t\t\tthis.$.result.setContent(inEvent.name + ' changed to ' + inEvent.value.toDateString());\n\t\t}\n\t},\n\tresetTapped: function(inSender, inEvent) {\n\t\tthis.$.picker.set('value', null);\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tControl = require('../../../enyo/lib/Control'),\n\tDrawer = require('../../../enyo/lib/Drawer');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tExpandableListItem = require('../ExpandableListItem'),\n\tItem = require('../Item'),\n\tSimpleIntegerPicker = require('../SimpleIntegerPicker'),\n\tMarquee = require('../Marquee'),\n\tMarqueeText = Marquee.Text;\n\n/**\n* Fires when the currently selected item changes.\n*\n* @event moon.ExpandableIntegerPicker#onChange\n* @type {Object}\n* @property {Number} value - The value of the currently selected item.\n* @property {String} content -  The content of the currently selected item.\n*\n* @public\n*/\n\n/**\n* {@link moon.ExpandableIntegerPicker}, which extends {@link moon.ExpandableListItem},\n* is a drop-down picker menu that prompts the user to make a selection from a range of\n* integer-based options.\n*\n* The value of the currently selected item is available in the picker's\n* [value]{@link moon.ExpandableIntegerPicker#value} property.\n*\n* When the picker is minimized, the content of the currently selected item is\n* displayed as subtext below the picker label.\n*\n* @class moon.ExpandableIntegerPicker\n* @extends moon.ExpandableListItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends moon.ExpandableIntegerPicker.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.ExpandableIntegerPicker',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ExpandableListItem,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'moon-expandable-integer-picker',\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\n\t\t/**\n\t\t* {@link moon.ExpandableIntegerPicker#onChange}\n\t\t*/\n\t\tonChange: ''\n\t},\n\n\t/**\n\t* @private\n\t* @lends moon.ExpandableIntegerPicker.prototype\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* Initial value of the picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tvalue: 0,\n\n\t\t/**\n\t\t* Minimum value of the picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tmin: 0,\n\n\t\t/**\n\t\t* Maximum value of the picker.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 9\n\t\t* @public\n\t\t*/\n\t\tmax: 9,\n\n\t\t/**\n\t\t* Amount by which to increment/decrement.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 1\n\t\t* @public\n\t\t*/\n\t\tstep: 1,\n\n\t\t/**\n\t\t* Unit/label to be appended to the end of the number.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'sec'\n\t\t* @public\n\t\t*/\n\t\tunit: 'sec'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlockBottom: true,\n\n\t/**\n\t* @private\n\t*/\n\tautoCollapse: true,\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\trequestScrollIntoView: 'requestScrollIntoView'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'headerWrapper', kind: Item, classes: 'moon-expandable-picker-header-wrapper', onSpotlightFocus: 'headerFocus', ontap: 'expandContract', components: [\n\t\t\t// headerContainer required to avoid bad scrollWidth returned in RTL for certain text widths (webkit bug)\n\t\t\t{name: 'headerContainer', kind: Control, classes: 'moon-expandable-list-item-header moon-expandable-picker-header', components: [\n\t\t\t\t{name: 'header', kind: MarqueeText}\n\t\t\t]},\n\t\t\t{name: 'currentValue', kind: MarqueeText, classes: 'moon-expandable-picker-current-value'}\n\t\t]},\n\t\t{name: 'drawer', kind: Drawer, resizeContainer:false, classes:'moon-expandable-list-item-client indented', components: [\n\t\t\t{name: 'picker', kind: SimpleIntegerPicker, deferInitialization: true, onSelect: 'toggleActive', onChange: 'pickerValueChanged'}\n\t\t]}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tbindings: [\n\t\t{from: '.min', to: '.$.picker.min', oneWay: false},\n\t\t{from: '.max', to: '.$.picker.max', oneWay: false},\n\t\t{from: '.step', to: '.$.picker.step'},\n\t\t{from: '.unit', to: '.$.picker.unit'},\n\t\t{from: '.disabled', to: '.$.headerWrapper.disabled'}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\tExpandableListItem.prototype.create.apply(this, arguments);\n\t\tthis.requestPickerReflow();\n\t\tthis.valueChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trequestPickerReflow: function () {\n\t\tthis._needsPickerReflow = true;\n\t},\n\n\t/**\n\t* Intentionally using an observer instead of a binding since the order of applying `value`,\n\t* `min`, and `max` is important. Bindings are processed after `create()` so calling this\n\t* in `create()` guarantees it runs first.\n\t*\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tthis.$.picker.set('value', this.value);\n\t},\n\n\t/**\n\t* Change handler\n\t*\n\t* @private\n\t*/\n\topenChanged: function () {\n\t\tExpandableListItem.prototype.openChanged.apply(this, arguments);\n\t\tthis.setActive(this.getOpen());\n\t\tthis.$.currentValue.set('showing', !this.open);\n\t\tif (this.open && this._needsPickerReflow) {\n\t\t\tthis.$.picker.reflow();\n\t\t\tthis._needsPickerReflow = false;\n\t\t}\n\t},\n\n\t/**\n\t* If picker is open, closes and spots header; if picker is closed, opens and unspots.\n\t*\n\t* @private\n\t*/\n\ttoggleActive: function () {\n\t\tif (this.getOpen()) {\n\t\t\tthis.setActive(false);\n\t\t\tif (!Spotlight.getPointerMode()) {\n\t\t\t\tSpotlight.spot(this.$.headerWrapper);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setActive(true);\n\t\t}\n\t},\n\n\t/**\n\t* Catch onChange events from the picker and update the value as it may have been clamped\n\t* by the picker's `step` property. Firing its own event so `content` can be fixed because\n\t* it may not have synced to SimpleIntegerPicker before this fires (e.g. the first time).\n\t*\n\t* @private\n\t*/\n\tpickerValueChanged: function (sender, event) {\n\t\tvar content = this.unit? event.value + ' ' + this.unit : event.value;\n\t\tthis.set('value', event.value);\n\t\tthis.$.currentValue.set('content', content);\n\n\t\tthis.doChange({\n\t\t\tvalue: this.value,\n\t\t\tcontent: content\n\t\t});\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tspotlightDown: function (inSender, inEvent) {\n\t\tif (this.getLockBottom() && (inEvent.originator === this.$.picker) && this.getOpen()) {\n\t\t\treturn true;\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tFormCheckbox = require('../../../moonstone/lib/FormCheckbox'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tSimpleIntegerPicker = require('../../../moonstone/lib/SimpleIntegerPicker'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\nmodule.exports = kind({\n\tname: 'moon.sample.SimpleIntegerPickerSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents:[\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{kind: Divider, content: 'Simple Integer Picker'},\n\t\t\t{kind: SimpleIntegerPicker, name: 'picker1', value:3, min:-10, max:10, step: 1, unit: 'sec', onChange: 'change'},\n\n\t\t\t{kind: Divider, content: 'Options'},\n\t\t\t{kind: FormCheckbox, content: 'Animate', checked: true, prop: 'animate', onchange: 'checked'},\n\t\t\t{kind: FormCheckbox, content: 'Wrap', prop: 'wrap', onchange: 'checked'},\n\t\t\t{kind: FormCheckbox, content: 'Padding (3 digits)', onchange: 'paddingChecked'},\n\t\t\t{kind: FormCheckbox, content: 'Labeled (sec)', checked: true, onchange: 'labelChecked'},\n\t\t\t{kind: FormCheckbox, content: 'Disabled', prop: 'disabled', onchange: 'checked'}\n\t\t]},\n\t\t{kind: ToggleButton, content: 'Toggle RTL', ontap: 'buttonTapped'},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'result', content: 'No action yet.'}\n\t],\n\tchange: function (sender, event) {\n\t\tthis.$.result.setContent(sender.name + ' changed to ' + event.content + ' (' + event.value + ')');\n\t},\n\tbuttonTapped: function (sender, event) {\n\t\tif (sender.getActive()) {\n\t\t\tControl.prototype.rtl = true;\n\t\t\tdom.addBodyClass('enyo-locale-right-to-left');\n\t\t} else {\n\t\t\tControl.prototype.rtl = false;\n\t\t\tdom.removeClass(document.body, 'enyo-locale-right-to-left');\n\t\t}\n\t},\n\tchecked: function (sender, event) {\n\t\tthis.$.picker1.set(sender.prop, sender.checked);\n\t},\n\tpaddingChecked: function (sender, event) {\n\t\tthis.$.picker1.set('digits', sender.checked? 3 : null);\n\t\tthis.$.picker1.render();\n\t},\n\tlabelChecked: function (sender, event) {\n\t\tthis.$.picker1.set('unit', sender.checked? 'sec' : null);\n\t\tthis.$.picker1.render();\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tFittableRows = require('../../../layout/lib/FittableRows');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tDatePicker = require('../../../moonstone/lib/DatePicker'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tTimePicker = require('../../../moonstone/lib/TimePicker');\n\nmodule.exports = kind({\n\tname: 'moon.sample.TimePickerSample',\n\tkind: FittableRows,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Scroller, fit: true, components: [\n\t\t\t{classes: 'moon-7h moon-vspacing-s', components: [\n\t\t\t\t{kind: DatePicker, name: 'pickerDateLinked', noneText: 'Pick a Date', content: 'Linked Date', onChange: 'dateChanged'},\n\t\t\t\t{kind: TimePicker, name: 'pickerTimeLinked', noneText: 'Pick a Time', content: 'Linked Time', meridiemEnable: true, onChange: 'timeChanged'},\n\t\t\t\t{kind: TimePicker, name: 'pickerTime', noneText: 'Pick a Time', content: 'Time', meridiemEnable: true, onChange: 'timeChanged'},\n\t\t\t\t{kind: Button, name: 'buttonReset', content: 'Reset Time', small: true, ontap: 'resetTapped'},\n\t\t\t\t{kind: TimePicker, name: 'pickerDisabled', meridiemEnable: true, disabled: true, noneText: 'Disabled Time Picker', content: 'Disabled Time'},\n\t\t\t\t{kind: ExpandablePicker, name: 'pickerLocale', noneText: 'No Locale Selected', content: 'Choose Locale', onChange: 'setLocale', components: [\n\t\t\t\t\t{content: 'Use Default Locale', active: true},\n\t\t\t\t\t{content: 'ko-KR'},\n\t\t\t\t\t{content: 'zh-TW'},\n\t\t\t\t\t{content: 'fa-IR'},\n\t\t\t\t\t{content: 'ar-SA'},\n\t\t\t\t\t{content: 'ur-IN'},\n\t\t\t\t\t{content: 'th-TH'},\t//Thailand\n\t\t\t\t\t{content: 'en-US'},\n\t\t\t\t\t{content: 'jp-JP'},\n\t\t\t\t\t{content: 'en-CA'},\n\t\t\t\t\t{content: 'en-IE'},\n\t\t\t\t\t{content: 'en-GB'},\n\t\t\t\t\t{content: 'en-MX'},\n\t\t\t\t\t{content: 'de-DE'},\n\t\t\t\t\t{content: 'fr-FR'},\n\t\t\t\t\t{content: 'fr-CA'},\n\t\t\t\t\t{content: 'it-IT'},\n\t\t\t\t\t{content: 'es-ES'},\n\t\t\t\t\t{content: 'es-MX'},\n\t\t\t\t\t{content: 'es-US'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]},\n\t\t{kind: Divider, content: 'Result'},\n\t\t{kind: BodyText, name: 'result', content: 'No change yet'}\n\t],\n\tbindings: [\n\t\t{from: '.value', to: '.$.pickerDateLinked.value', oneWay:false},\n\t\t{from: '.value', to: '.$.pickerTimeLinked.value', oneWay:false}\n\t],\n\tcreate: function (){\n\t\tFittableRows.prototype.create.apply(this, arguments);\n\t\tif (!window.ilib) {\n\t\t\tthis.$.pickerLocale.hide();\n\t\t\tthis.log('iLib not present -- hiding locale picker');\n\t\t}\n\t\tthis.set('value', new Date('Mar 09 2014 01:59'));\n\t},\n\tsetLocale: function (sender, event){\n\t\tif (window.ilib) {\n\t\t\tvar locale = event.selected.content,\n\t\t\t\tval = (locale == 'Use Default Locale') ? null : locale;\n\t\t\tenyo.updateLocale(locale);\n\t\t\tthis.$.pickerDateLinked.setLocale(val);\n\t\t\tthis.$.pickerTimeLinked.setLocale(val);\n\t\t\tthis.$.pickerTime.setLocale(val);\n\t\t\tthis.$.pickerDisabled.setLocale(val);\n\t\t\tthis.$.result.setContent('locale changed to ' + locale);\n\t\t}\n\t\treturn true;\n\t},\n\ttimeChanged: function (sender, event) {\n\t\tif (this.$.result && event.value){\n\t\t\tvar timeArray = event.value.toTimeString().split(': ');\n\t\t\tthis.$.result.setContent(event.name + ' changed to ' + timeArray[0] + ': ' + timeArray[1]);\n\t\t}\n\t},\n\tdateChanged: function (sender, event) {\n\t\tif (this.$.result && event.value){\n\t\t\tthis.$.result.setContent(event.name + ' changed to ' + event.value.toDateString());\n\t\t}\n\t},\n\tresetTapped: function (sender, event) {\n\t\tthis.$.pickerTime.set('open', false);\n\t\tthis.$.pickerTime.set('value', null);\n\t\treturn true;\n\t}\n});","require('../../../moonstone');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tdom = require('../../../enyo/lib/dom'),\n\tutil = require('../../../enyo/lib/utils'),\n\tri = require('../../../enyo/lib/resolution'),\n\tDataGridList = require('../../../enyo/lib/DataGridList');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tDataList = require('../DataList'),\n\tDataListSpotlightSupport = DataList.SpotlightSupport,\n\tScroller = require('../Scroller'),\n\tScrollStrategy = require('../ScrollStrategy');\n\n/**\n* {@link moon.DataGridList} is an {@link enyo.DataGridList} with Moonstone visual\n* styling applied.\n*\n* @class moon.DataGridList\n* @extends enyo.DataGridList\n* @mixes moon.DataListSpotlightSupport\n* @ui\n* @public\n*/\nvar MoonDataGridList = module.exports = kind(\n\t/** @lends moon.DataGridList.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'moon.DataGridList',\n\n\t/**\n\t* @private\n\t*/\n\tkind: DataGridList,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [DataListSpotlightSupport],\n\n\t/**\n\t* @private\n\t*/\n\tnoDefer: true,\n\n\t/**\n\t* @private\n\t*/\n\tallowTransitions: false,\n\n\t/**\n\t* @private\n\t*/\n\tspotlight: true,\n\n\t/**\n\t* @private\n\t*/\n\tscrollerOptions: { kind: Scroller, vertical:'scroll', horizontal: 'hidden' },\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSpotlightFocus   : 'handleSpotlightFocus',\n\t\tonSpotlightBlur    : 'handleSpotlightBlur',\n\t\tonSpotlightFocused : 'handleSpotlightFocused'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitContainer: function() {\n\t\t// Our delegate relies on scroll column metrics, so we\n\t\t// need to ask the scroller to measure the columns for us\n\t\tthis.scrollerOptions.measureScrollColumns = true;\n\t\tDataGridList.prototype.initContainer.apply(this, arguments);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// scale px values for current resolution\n\t\t\tthis.spacing = ri.scale(this.spacing);\n\t\t\tthis.minWidth = ri.scale(this.minWidth);\n\t\t\tthis.minHeight = ri.scale(this.minHeight);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\thandleSpotlightFocus: function (inSender, inEvent) {\n\t\tvar c = inEvent.originator;\n\t\tvar isClientControl = this.getClientControls().indexOf(c) >= 0;\n\t\tif(isClientControl) {\n\t\t\tvar zIndex = parseInt(dom.getComputedStyleValue(c.hasNode(), 'z-index'), 10) || 0;\n\t\t\tc.applyStyle('z-index', zIndex + 1);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleSpotlightBlur: function (inSender, inEvent) {\n\t\tvar c = inEvent.originator;\n\t\tvar isClientControl = this.getClientControls().indexOf(c) >= 0;\n\t\tif(isClientControl) {\n\t\t\tsetTimeout(this.bindSafely(function () {\n\t\t\t\tc.applyStyle('z-index', null);\n\t\t\t}), 0);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleSpotlightFocused: function (inSender, inEvent) {\n\t\tif (!Spotlight.getPointerMode()) {\n\t\t\tif (inEvent.index < this.indexBoundFirstRow) {\n\t\t\t\tthis.$.scroller.scrollToTop();\n\t\t\t} else if (inEvent.index > this.indexBoundLastRow) {\n\t\t\t\tthis.$.scroller.scrollToBottom();\n\t\t\t}\n\t\t}\n\t}\n});\n\n/**\n* Overload the delegate strategy to incorporate measurements for our scrollers\n* when they are visible.\n*\n* @private\n*/\nvar p = MoonDataGridList.delegates.verticalGrid = util.clone(DataGridList.delegates.vertical);\nkind.extendMethods(p, {\n\t/**\n\t* Overriding refresh() to stop scroller and stop scrolling.\n\t*\n\t* @method\n\t* @private\n\t*/\n\trefresh: kind.inherit(function (sup) {\n\t\treturn function (list) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tlist.$.scroller.stop();\n\t\t};\n\t}),\n\n\t/**\n\t* Overriding scrollToControl() to specify Moonstone-specific scroller options.\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\n\t*\n\t* @method\n\t* @private\n\t*/\n\tscrollToControl: function(list, control) {\n\t\tlist.$.scroller.scrollToControl(control, false, false, true);\n\t},\n\n\t/**\n\t* Overriding scrollTo() to specify Moonstone-specific scroller options.\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\n\t*\n\t* @method\n\t* @private\n\t*/\n\tscrollTo: function(list, x, y) {\n\t\tlist.$.scroller.scrollTo(x, y, false);\n\t},\n\n\t/**\n\t* moon.ScrollStrategy dynamically shows / hides scroll controls\n\t* depending on whether there's enough content to scroll. It also\n\t* \"steals\" space from the scrollable content area to make room\n\t* for the controls. This means we need to calculate whether scroll\n\t* controls will be required before generating list pages so that we\n\t* can adjust our metrics accordingly.\n\t*\n\t* We do this by overriding the width() method, so that we can\n\t* subtract the width of the scroll column in cases where we\n\t* calculate that we'll need to scroll.\n\t*\n\t* @method\n\t* @private\n\t*/\n\twidth: kind.inherit(function (sup) {\n\t\treturn function (list) {\n\t\t\tvar w = sup.apply(this, arguments),\n\t\t\t\ts = list.$.scroller,\n\t\t\t\tv = s.getVertical(),\n\t\t\t\ta, b, r, h;\n\t\t\tif (s.spotlightPagingControls) {\n\t\t\t\ta = true;\n\t\t\t}\n\t\t\telse if (v === 'auto') {\n\t\t\t\tb = s.getScrollBounds();\n\t\t\t\tthis.calculateMetrics(list, w);\n\t\t\t\tr = Math.ceil(list.collection.length / list.columns);\n\t\t\t\th = r * this.childSize(list);\n\t\t\t\ta = (h > b.clientHeight);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ta = (v === 'scroll');\n\t\t\t}\n\t\t\tif (a) {\n\t\t\t\tw = w - ScrollStrategy.vScrollColumnSize;\n\t\t\t\tthis.calculateMetrics(list, w);\n\t\t\t}\n\t\t\treturn w;\n\t\t};\n\t})\n}, true);","var\n\thooks = require('../../../enyo/lib/hooks'),\n\tkind = require('../../../enyo/lib/kind'),\n\tCollection = require('../../../enyo/lib/Collection'),\n\tDataRepeater = require('../../../enyo/lib/DataRepeater'),\n\tRouter = require('../../../enyo/lib/Router');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tContextualPopup = require('../../../moonstone/lib/ContextualPopup'),\n\tContextualPopupDecorator = require('../../../moonstone/lib/ContextualPopupDecorator'),\n\tDataList = require('../../../moonstone/lib/DataList'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tItem = require('../../../moonstone/lib/Item')\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem');\n\nvar locales = [\n\t{locale: 'local', title: '', selected: true},\n\t{locale: 'en-US', title: '<span class=\"light\">- US English</span>'},\n\t{locale: 'ko-KR', title: '<span class=\"light\">- Korean</span>'},\n\t{locale: 'th-TH', title: '<span class=\"light\">- Thai, with tall characters</span>'},\n\t{locale: 'ar-SA', title: '<span class=\"light\">- Arabic, RTL and standard font</span>'},\n\t{locale: 'ur-PK', title: '<span class=\"light\">- Urdu, RTL and custom Urdu font</span>'},\n\t{locale: 'zh-Hant-HK', title: '<span class=\"light\">- Traditional Chinese, custom Hant font</span>'},\n\t{locale: 'ja-JP', title: '<span class=\"light\">- Japanese, custom Japanese font</span>'}\n];\n\nvar LocaleItem = kind({\n\tkind: ToggleItem,\n\thandleTapEvent: false,\n\tobservers: {\n\t\tupdateTitle: ['locale', 'title']\n\t},\n\tupdateTitle: function() {\n\t\tthis.set('content', this.locale + ' ' + this.title);\n\t}\n});\n\nvar appRouter = kind({\n\tkind: Router,\n\thistory: true,\n\troutes: [\n\t\t{path: ':sampleName/:locale', handler: 'handleRoute'},\n\t\t{path: ':sampleName', handler: 'handleRoute'},\n\t\t{path: '/:locale', handler: 'handleRouteLocaleOnly'}\n\t],\n\tevents: {\n\t\tonRouteChange: ''\n\t},\n\thandleRoute: function (sampleName, locale) {\n\t\tthis.doRouteChange({sampleName: sampleName, locale: locale || 'local'});\n\t},\n\thandleRouteLocaleOnly: function (locale) {\n\t\tthis.handleRoute({sampleName: null, locale: locale});\n\t}\n});\n\n/**\n* _Moonstone Sample_ is a tool for displaying and interacting with sample code in the Moonstone\n* user interface library. This tool can display a list of all samples and load individual\n* samples. The URL to access samples accepts a sample-name and an optional internationalization\n* locale to load the sample in. When browsing through and running the samples, the URL will\n* automatically update as necessary.\n*\n* Some example URLs:\n* * Sample.html\n* * Sample.html#ButtonSample\n* * Sample.html#ButtonSample/ar-SA\n*\n* If you'd like to add a sample to the list, you'll need to include it, and any related files,\n* in the _package.js_ file in this directory. Be sure to name your file the same as your\n* sample's kind.\n*\n* **Example:** _ContextualPopupSample.js_\n* ```\n* enyo.kind({\n*     name: 'moon.sample.ContextualPopupSample',\n*     ...\n* });\n* ```\n*\n* @namespace moon.sample\n*/\nvar All = module.exports = kind({\n\tname: 'moon.sample.All',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tthemes: {\n\t\t'dark': 'moonstone-dark.css',\n\t\t'light': 'moonstone-light.css'\n\t},\n\tpublished: {\n\t\tsample: null,\n\t\tsamples: null,\n\t\tlocale: 'local',\n\t\ttheme: 'dark',\n\t\tlocation: function () {\n\t\t\tvar s = this.get('sample') || ''\t,\n\t\t\t\tlocale = this.get('locale');\n\t\t\treturn s + ((!locale || locale == 'local') ? '' : '/' + locale);\n\t\t}\n\t},\n\tcomponents: [\n\t\t{classes: 'moon-sample-persistant-hotspot', components: [\n\t\t\t{classes: 'moon-sample-persistant-frame', spotlight: 'container', components: [\n\t\t\t\t{kind: Button, content: 'Reload', small: true, spotlight: false, classes: 'moon-sample-persistant-locale-button', ontap: 'reload'},\n\t\t\t\t{kind: Button, content: 'Back to List', small: true, spotlight: false, classes: 'moon-sample-persistant-locale-button', ontap: 'backToList'},\n\t\t\t\t{kind: ContextualPopupDecorator, components: [\n\t\t\t\t\t{kind: Button, content: 'Set Locale', small: true, spotlight: false, classes: 'moon-sample-persistant-locale-button'},\n\t\t\t\t\t{name: 'localePopup', kind: ContextualPopup, classes: 'moon-sample-locale-popup', components: [\n\t\t\t\t\t\t{content: 'Set Locale', kind: Divider},\n\t\t\t\t\t\t{name: 'localeRepeater', kind: DataRepeater, ontap: 'localeListTapped', selection: true, groupSelection: true, selectionProperty: 'selected', containerOptions: {kind: Scroller, classes: 'enyo-fill'}, fit: true, components: [\n\t\t\t\t\t\t\t{kind: LocaleItem, allowHtml: true, bindings: [\n\t\t\t\t\t\t\t\t{from:'model.locale', to: 'locale'},\n\t\t\t\t\t\t\t\t{from:'model.title', to: 'title'},\n\t\t\t\t\t\t\t\t{from:'model.selected', to: 'checked'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]},\n\t\t\t\t{kind: ToggleButton, toggleOffLabel: 'Dark Theme', toggleOnLabel: 'Light Theme', small: true, ontap: 'handleThemeTap'}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'home'},\n\t\t{name: 'router', kind: appRouter, history: true, triggerOnStart: true}\n\t],\n\tbindings: [\n\t\t{from: 'locales', to: '$.localeRepeater.collection'}\n\t],\n\tlistTools: [\n\t\t{kind: Panels, pattern: 'activity', classes: 'enyo-fit', components: [\n\t\t\t{kind: Panel, title: 'Samples', headerType: 'small',\n\t\t\t\tcomponents: [\n\t\t\t\t\t{name: 'list', kind: DataList, components: [\n\t\t\t\t\t\t{kind: Item, ontap: 'chooseSample', classes: 'enyo-border-box', bindings: [\n\t\t\t\t\t\t\t{from: 'model.label', to: 'content'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t]}\n\t],\n\thandlers: {\n\t\tonRouteChange: 'handleRoute'\n\t},\n\tcomputed: {\n\t\tlocation: ['sample', 'locale']\n\t},\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.themeNodeStore = {};\n\t\t};\n\t}),\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.locales = new Collection(locales);\n\t\t\tsup.apply(this, arguments);\n\n\t\t\tthis.initializeThemes();\n\t\t};\n\t}),\n\tcreateList: function () {\n\t\tvar samples = this.get('samples'),\n\t\t\tsorted = Object.keys(samples).sort(),\n\t\t\tdataList = [];\n\t\tfor (var i = 0; i < sorted.length; i++) {\n\t\t\tvar sampleName = sorted[i],\n\t\t\t\tsample = samples[sampleName];\n\n\t\t\tdataList.push({sample: sample, name: sampleName, label: sampleName.replace(/(.*)Sample$/i, '$1')});\n\t\t}\n\t\tif (!this.$.list) {\n\t\t\tthis.$.home.createComponents(this.listTools, {owner: this});\n\t\t}\n\t\tthis.render();\n\t\tif (dataList.length) {\n\t\t\tvar c = new Collection(dataList);\n\t\t\tthis.$.list.set('collection', c);\n\t\t}\n\t},\n\tlocaleListTapped: function (sender, ev) {\n\t\tvar locale = ev.model.get('locale');\n\t\tif (locale) {\n\t\t\tthis.set('locale', locale);\n\t\t}\n\t},\n\thandleRoute: function (sender, ev) {\n\t\tthis.set('sample', ev.sampleName);\n\t\tthis.set('locale', ev.locale);\n\t},\n\tlocaleChanged: function (oldLocale, newLocale) {\n\t\tconsole.log('Setting Locale:', newLocale);\n\t\tif (this.$.localePopup && this.$.localePopup.get('showing')) {\n\t\t\tthis.$.localePopup.hide();\n\t\t}\n\t\tthis.locales.find(function(elem) { return elem.get('locale') == newLocale; }).set('selected', true);\n\t\thooks.updateLocale(newLocale);\n\t\tthis.$.router.trigger({location: this.get('location'), change: true});\n\t},\n\tsampleChanged: function (was, is) {\n\t\tif (was) {\n\t\t\tthis.$[was].destroy();\n\t\t}\n\n\t\tif (this.get('sample')) {\n\t\t\tthis.openSample();\n\t\t} else {\n\t\t\t// We have no sample, just render out the list.\n\t\t\tthis.activateList();\n\t\t}\n\t},\n\tactivateList: function () {\n\t\tconsole.log('%cList all of the Samples', 'color:green');\n\t\tthis.disableAllStylesheets();\n\t\tif (this.$.sample) {\n\t\t\tthis.$.sample.destroy();\n\t\t}\n\t\tthis.$.home.show();\n\t\tif (!this.$.home.hasNode() || !this.$.home.hasNode().children.length) {\n\t\t\t// We've never been generated, lets fix that.\n\t\t\tthis.createList();\n\t\t}\n\t\tthis.render();\n\t},\n\tbackToList: function () {\n\t\tthis.set('sample', null);\n\t\tthis.$.router.trigger({location: this.get('location'), change: true});\n\t\tthis.checkLocale();\n\t},\n\treload: function () {\n\t\twindow.location.reload();\n\t},\n\tchooseSample: function (sender, ev) {\n\t\tthis.set('sample', ev.model.get('name'));\n\t\tthis.checkLocale();\n\t},\n\topenSample: function () {\n\t\tvar s = this.get('sample'),\n\t\t\tloc;\n\n\t\t// this.disableAllStylesheets();\n\n\t\tif (s) {\n\t\t\t// Enable the stylesheet\n\t\t\t// this.enableStylesheet(s);\n\n\t\t\tloc = this.get('location');\n\t\t\tthis.$.router.trigger({location: loc, change: true});\n\t\t\tthis.$.home.hide();\n\t\t\tthis.createComponent({name: s, kind: this.samples[s]}).render();\n\t\t\tconsole.log('%c Created and Launched Sample', 'color:green;');\n\n\t\t} else {\n\t\t\tthis.createList();\n\t\t}\n\t},\n\tenableStylesheet: function (name) {\n\t\tvar i, sheets = document.getElementsByClassName(name);\n\t\tfor (i = 0; i < sheets.length; i++) {\n\t\t\tsheets[i].disabled = false;\n\t\t}\n\t\treturn sheets.length;\n\t},\n\tdisableAllStylesheets: function () {\n\t\tvar sheets = document.getElementsByClassName('sample-style');\n\t\tfor (var i = 0; i < sheets.length; i++) {\n\t\t\tsheets[i].disabled = true;\n\t\t}\n\t},\n\tinitializeThemes: function () {\n\t\tvar i,\n\t\t\ttheme = this.get('theme'),\n\t\t\tcs = document.getElementsByTagName('link');\n\n\t\tfor (i = 0; i < cs.length; i++) {\n\t\t\tif (cs[i].href.indexOf(this.themes[theme]) > 0) {\n\t\t\t\t// Save our current theme's node\n\t\t\t\tthis.themeNodeStore[theme] = cs[i];\n\t\t\t\t// Setup the other themes' nodes\n\t\t\t\tfor (var t in this.themes) {\n\t\t\t\t\tif (t != theme) {\n\t\t\t\t\t\t// Generate the new theme paths based on the existing (found) theme path\n\t\t\t\t\t\tvar tn = this.createNode('link', {\n\t\t\t\t\t\t\thref: cs[i].href.replace(this.themes[theme], this.themes['light']),\n\t\t\t\t\t\t\trel: 'stylesheet',\n\t\t\t\t\t\t\tdisabled: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Add it to the store and append to the head, already disabled\n\t\t\t\t\t\tthis.themeNodeStore[t] = tn;\n\t\t\t\t\t\tthis.appendToHead(tn);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.themeNodeStore[theme];\n\t\t\t}\n\t\t}\n\t},\n\tthemeChanged: function (oldTheme, newTheme) {\n\t\tthis.themeNodeStore[oldTheme].disabled = true;\n\t\tthis.themeNodeStore[newTheme].disabled = false;\n\t},\n\thandleThemeTap: function (sender, ev) {\n\t\tthis.set('theme', ev.originator.owner.get('value') ? 'light' : 'dark');\n\t},\n\tcreateNode: function (tagName, attrs) {\n\t\tvar key, node = document.createElement(tagName);\n\t\tif (attrs && Object.keys(attrs)) {\n\t\t\tfor (key in attrs) {\n\t\t\t\tif (key.match(/^on\\w/) || key == 'disabled') {\n\t\t\t\t\tnode[key] = attrs[key];\n\t\t\t\t} else if (key == 'content') {\n\t\t\t\t\tnode.innerHTML = attrs[key];\n\t\t\t\t} else {\n\t\t\t\t\tnode.setAttribute(key, attrs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t},\n\tappendToHead: function (node) {\n\t\tif (typeof node == 'string') {\n\t\t\tdocument.head.insertAdjacentHTML('beforeend', node );\n\t\t} else {\n\t\t\tdocument.head.appendChild( node );\n\t\t}\n\t},\n\tcheckLocale: function () {\n\t\t// Reset locale in the event one of the samples changes it\n\t\tif (typeof ilib !== 'undefined' && ilib.getLocale() != this.locale) {\n\t\t\tthis.localeChanged(ilib.getLocale(), this.locale);\n\t\t}\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tutils = require('../../../enyo/lib/utils'),\n\tCollection = require('../../../enyo/lib/Collection'),\n\tControl = require('../../../enyo/lib/Control');\n\nvar\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tExpandableInput = require('../../../moonstone/lib/ExpandableInput'),\n\tDataList = require('../../../moonstone/lib/DataList'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tDrawers = require('../../../moonstone/lib/Drawers'),\n\tCaptionDecorator = require('../../../moonstone/lib/CaptionDecorator'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\nmodule.exports = kind({\n\tname: 'moons.sample.DataListSample',\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tcomponents: [\n\t\t{name: 'drawers', kind: Drawers, drawers: [\n\t\t\t{handle: {}, controlsOpen: true, controlDrawerComponents: [\n\t\t\t\t{classes: 'moon-hspacing', controlClasses: 'moon-4h', components: [\n\t\t\t\t\t{name: 'orientation', kind: ExpandablePicker, selectedIndex: 0, content: 'Orientation', components: [\n\t\t\t\t\t\t{content: 'vertical'},\n\t\t\t\t\t\t{content: 'horizontal'}\n\t\t\t\t\t], style: 'vertical-align: top;'},\n\t\t\t\t\t{name: 'recordCount', kind: ExpandableInput, content: 'Record Count', value: 1000, onchange: 'updateRecords', style: 'vertical-align: top;'},\n\t\t\t\t\t{name: 'scrollIndex', kind: ExpandableInput, value: 0, content: 'Scroll to Index', onblur: 'scrollToIndex', style: 'vertical-align: top;'},\n\t\t\t\t\t{name: 'debugging', kind: ExpandablePicker, selectedIndex: 0, content: 'Page Debugging', components: [\n\t\t\t\t\t\t{value: false, content: 'off'},\n\t\t\t\t\t\t{value: true, content: 'on'}\n\t\t\t\t\t], style: 'vertical-align: top;'},\n\t\t\t\t\t{kind: Button, content: 'Hide', ontap: 'toggleShowing'}\n\t\t\t\t]}\n\t\t\t]}\n\t\t], components: [\n\t\t\t{kind: Panels, pattern: 'activity', classes: 'enyo-fit', components: [\n\t\t\t\t{name: 'repeaterContainer', kind: Control}\n\t\t\t]}\n\t\t]},\n\t\t{name: 'collection', kind: Collection}\n\t],\n\tbindings: [\n\t\t{from: '.$.orientation.selected.content', to: '.orientation'},\n\t\t{from: '.$.debugging.selected.value', to: '.repeaterDebugging'},\n\t\t{from: '.$.recordCount.value', to: '.recordCount', debug: true, oneWay: false, transform: function (v) {return (v !== undefined && v !== null && !isNaN(v))? v: undefined;}},\n\t\t{from: '.$.collection', to: '.$.repeater.collection'},\n\t\t{from: '.side', to: '.$.repeater.side'}\n\t],\n\tgenerateRecords: function (amount) {\n\t\tvar records = this.$.collection.models\n\t\t\t, add = []\n\t\t\t, i = records.length\n\t\t\t, len = (i + (!isNaN(amount)? amount: 0));\n\t\t\n\t\tfor (; i<len; ++i) {\n\t\t\tadd.push({\n\t\t\t\ton: false,\n\t\t\t\tdisabled: Boolean(i % 10 === 0),\n\t\t\t\tcaption: 'Caption ' + i,\n\t\t\t\tlabel: 'Label ' + i\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn add;\n\t},\n\tscrollToIndex: function (sender, event) {\n\t\tvar newIndex = sender.getValue();\n\t\tif (this.isScrolled || newIndex !== this.currentIndex) {\n\t\t\tthis.currentIndex = newIndex;\n\t\t\tthis.$.drawers.closeDrawers();\n\t\t\tthis.$.repeater.scrollToIndex(newIndex);\n\t\t\tthis.isScrolled = false;\n\t\t}\n\t},\n\tscrollStopped: function() {\n\t\tthis.isScrolled = true;\n\t},\n\ttoggleShowing: function (sender) {\n\t\tvar showing = ! this.$.repeater.getShowing();\n\t\tthis.$.repeater.setShowing(showing);\n\t\tsender.set('content', (showing? 'Hide': 'Show'));\n\t},\n\trepeaterDebuggingChanged: function () {\n\t\tif (this.$.repeater) {\n\t\t\tthis.$.repeater.addRemoveClass('debug', this.repeaterDebugging);\n\t\t}\n\t},\n\torientationChanged: function () {\n\t\tvar props = utils.mixin({}, [this.repeaterDefaults, {orientation: this.orientation}]),\n\t\t\tcp    = this.controlParent,\n\t\t\tc;\n\t\tif (this.$.repeater) {\n\t\t\tthis.$.repeater.destroy();\n\t\t}\n\t\tthis.set('side', this.orientation == 'vertical'? 'left': 'bottom');\n\t\tthis.controlParent = this.$.repeaterContainer;\n\t\tc = this.createComponent(props);\n\t\tc.render();\n\t\tthis.controlParent = cp;\n\t},\n\trecordCountChanged: function () {\n\t\tvar count   = this.get('recordCount'),\n\t\t\tnum     = Math.min(Math.max(count, 0), 1000),\n\t\t\trecords = this.$.collection.models;\n\t\tif (num != count) {\n\t\t\tthis.set('recordCount', num);\n\t\t}\n\t\tif (records.length > num) {\n\t\t\tthis.$.collection.remove(records.slice(num));\n\t\t} else if (records.length < num) {\n\t\t\tthis.$.collection.add(this.generateRecords(Math.abs(records.length - num)));\n\t\t}\n\t},\n\trepeaterDefaults: {name: 'repeater', kind: DataList, components: [\n\t\t{classes: 'enyo-border-box', components: [\n\t\t\t{name: 'caption', kind: CaptionDecorator, components: [\n\t\t\t\t{name: 'button', kind: ToggleButton}\n\t\t\t]}\n\t\t], bindings: [\n\t\t\t{from: '.model.caption', to: '.$.caption.content'},\n\t\t\t{from: '.repeater.side', to: '.$.caption.side'},\n\t\t\t{from: '.model.label', to: '.$.button.content'},\n\t\t\t{from: '.model.disabled', to: '.$.button.disabled'},\n\t\t\t{from: '.model.on', to: '.$.button.value', oneWay: false}\n\t\t]}\n\t], onScrollStop: 'scrollStopped'}\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\t$L = require('../../../enyo/lib/hooks').$L,\n\tCollection = require('../../../enyo/lib/Collection'),\n\tProgressiveFilter = require('../../../enyo/lib/ProgressiveFilter');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tDataList = require('../../../moonstone/lib/DataList'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tHighlightText = require('../../../moonstone/lib/HighlightText'),\n\tInputHeader = require('../../../moonstone/lib/InputHeader'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tMarquee = require('../../../moonstone/lib/Marquee'),\n\tMarqueeItem\t= Marquee.Item,\n\tMarqueeSupport = Marquee.Support,\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tScroller = require('../../../moonstone/lib/Scroller');\n\n// FIXME. RE-IMPLEMENT FILTERING.\n// Removed the old Enyo 2.3.0 implementation of collection filters from this sample that was removed\n// before 2.4.0 went final. We'll restore filtering to this sample once we have the new filter\n// implementation as part of post-2.4.0 work.\nmodule.exports = kind({\n\tname: 'moon.sample.HighlightTextSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Panels, pattern: 'activity', classes: 'enyo-fit', components: [\n\t\t\t{kind: Panel, title: 'STATIC', titleBelow: 'Simple items', subTitleBelow: 'Case insensitive', classes: 'moon-6h', components: [\n\t\t\t\t{kind: Scroller, fit: true, components: [\n\t\t\t\t\t{kind: Divider, content: 'Standard highlight'},\n\t\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t\t{kind: HighlightText, content: 'Very long text to see highlight with marquee', highlight: 'text', mixins: [MarqueeItem]}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t\t{kind: HighlightText, content: 'Text to highlight', highlight: 'to'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t\t{kind: HighlightText, content: 'Text to highlight', highlight: 'highlight'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Divider, content: 'Custom highlight classes'},\n\t\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t\t{kind: HighlightText, content: 'Text to highlight', highlight: 'text', highlightClasses: 'highlight-text-sample-red'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t\t{kind: HighlightText, content: 'Text to highlight', highlight: 'to', highlightClasses: 'highlight-text-sample-blue'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Item, components: [\n\t\t\t\t\t\t{kind: HighlightText, content: 'Text to highlight', highlight: 'highlight', highlightClasses: 'highlight-text-sample-fancy'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Divider, content: 'Custom control with marquee'},\n\t\t\t\t\t{tag: 'div', style: 'border: 2px dotted grey; margin: 5px 10px;', marqueeOnSpotlight: false, marqueeOnRender: true, mixins: [MarqueeSupport], components: [\n\t\t\t\t\t\t{name: 'dynamic', kind: HighlightText, highlight: 'text', mixins: [MarqueeItem], content:$L('Very long text to see highlight with marquee but not using item')}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Button, content: 'Dynamic Content Change', ontap: 'changeContent'}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{name: 'inputPanel', kind: Panel, headerOptions: {kind: InputHeader}, classes: 'moon-6h', joinToPrev: true, oninput: 'search', components: [\n\t\t\t\t{kind: DataList, fit: true, name: 'list', components: [\n\t\t\t\t\t{kind: Item, bindings: [\n\t\t\t\t\t\t{from: '.model.text', to: '.$.text.content'},\n\t\t\t\t\t\t{from: '.controller.text', to: '.$.text.highlight'}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: HighlightText, name: 'text'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t], title: 'SEARCH', titleBelow: 'Highlighted text in DataList', subTitleBelow: 'Case sensitive'}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '.filteredController', to: '.$.list.collection'},\n\t\t{from: '.$.inputPanel.$.header.value', to: '.controller.text'}\n\t],\n\tcreate: function () {\n\t\tthis.controller = new Collection(this.data);\n\t\tthis.filteredController = new ProgressiveFilter({\n\t\t\tcollection: this.controller,\n\t\t\tmethod: function (model) {\n\t\t\t\treturn model.get('text').indexOf(this.text) >= 0;\n\t\t\t}\n\t\t});\n\t\tthis.inherited(arguments);\n\t},\n\tsearch: function (sender, event) {\n\t\tthis.filteredController.reset();\n\t\tthis.filteredController.text = event.originator.getValue();\n\t\tthis.filteredController.filter();\n\n\t\tsender.waterfall('onHighlight', {highlight: event.originator.getValue()});\n\t},\n\tchangeContent: function () {\n\t\tthis.$.dynamic.setContent('Dynamic content change test, this text should be highlighted.');\n\t},\n\tdata: [\n\t\t{ text: 'proident irure nostrud', isFolder: false },\n\t\t{ text: 'adipisicing veniam officia',isFolder: true },\n\t\t{ text: 'culpa adipisicing Lorem', isFolder: false },\n\t\t{ text: 'dolor ut excepteur', isFolder: false },\n\t\t{ text: 'elit veniam nulla', isFolder: true },\n\t\t{ text: 'irure laboris irure', isFolder: false },\n\t\t{ text: 'non do consectetur', isFolder: false },\n\t\t{ text: 'irure dolor laborum', isFolder: true },\n\t\t{ text: 'nulla aliqua laborum', isFolder: false },\n\t\t{ text: 'elit ad sit', isFolder: false },\n\t\t{ text: 'aliqua voluptate nulla', isFolder: false },\n\t\t{ text: 'non eiusmod nostrud', isFolder: true },\n\t\t{ text: 'elit est ullamco', isFolder: true },\n\t\t{ text: 'magna tempor minim', isFolder: true },\n\t\t{ text: 'excepteur Lorem id', isFolder: true },\n\t\t{ text: 'quis eiusmod aute', isFolder: false },\n\t\t{ text: 'proident cillum elit', isFolder: false },\n\t\t{ text: 'commodo dolor dolor', isFolder: false },\n\t\t{ text: 'amet laborum officia', isFolder: false },\n\t\t{ text: 'aute do enim', isFolder: false },\n\t\t{ text: 'ut proident elit', isFolder: false },\n\t\t{ text: 'ea reprehenderit velit', isFolder: false },\n\t\t{ text: 'ipsum aliqua deserunt', isFolder: true },\n\t\t{ text: 'ea minim incididunt', isFolder: false },\n\t\t{ text: 'reprehenderit amet dolore', isFolder: false },\n\t\t{ text: 'velit sunt enim', isFolder: false },\n\t\t{ text: 'sunt amet esse', isFolder: false },\n\t\t{ text: 'irure laboris voluptate', isFolder: false },\n\t\t{ text: 'sit est dolore', isFolder: false },\n\t\t{ text: 'eu sit sint', isFolder: true },\n\t\t{ text: 'voluptate in ad', isFolder: false },\n\t\t{ text: 'dolore ullamco in', isFolder: true },\n\t\t{ text: 'incididunt mollit reprehenderit', isFolder: true },\n\t\t{ text: 'cupidatat eiusmod deserunt', isFolder: false },\n\t\t{ text: 'minim labore veniam', isFolder: false },\n\t\t{ text: 'commodo reprehenderit irure', isFolder: false },\n\t\t{ text: 'voluptate eiusmod labore', isFolder: true },\n\t\t{ text: 'irure sint ullamco', isFolder: true },\n\t\t{ text: 'qui cillum fugiat', isFolder: true },\n\t\t{ text: 'ex ut do', isFolder: false },\n\t\t{ text: 'Lorem Lorem amet', isFolder: true },\n\t\t{ text: 'elit commodo consectetur', isFolder: false },\n\t\t{ text: 'sit enim nisi', isFolder: false },\n\t\t{ text: 'ipsum fugiat voluptate', isFolder: true },\n\t\t{ text: 'nisi commodo labore', isFolder: false },\n\t\t{ text: 'dolor cillum elit', isFolder: true },\n\t\t{ text: 'nisi do exercitation', isFolder: true },\n\t\t{ text: 'adipisicing mollit sint', isFolder: true },\n\t\t{ text: 'ipsum exercitation ex', isFolder: true },\n\t\t{ text: 'duis voluptate do', isFolder: false },\n\t\t{ text: 'in do tempor', isFolder: true },\n\t\t{ text: 'amet id anim', isFolder: true },\n\t\t{ text: 'culpa voluptate sunt', isFolder: true },\n\t\t{ text: 'amet do do', isFolder: true },\n\t\t{ text: 'sunt fugiat consectetur', isFolder: false },\n\t\t{ text: 'in sit consequat', isFolder: true },\n\t\t{ text: 'voluptate dolore deserunt', isFolder: true },\n\t\t{ text: 'elit sit duis', isFolder: false },\n\t\t{ text: 'consectetur laboris in', isFolder: false },\n\t\t{ text: 'ipsum aliquip quis', isFolder: true },\n\t\t{ text: 'consectetur non ad', isFolder: true },\n\t\t{ text: 'id voluptate et', isFolder: false },\n\t\t{ text: 'ullamco labore ullamco', isFolder: true },\n\t\t{ text: 'ipsum pariatur enim', isFolder: false },\n\t\t{ text: 'ea excepteur magna', isFolder: false },\n\t\t{ text: 'ullamco enim tempor', isFolder: false },\n\t\t{ text: 'ex ex mollit', isFolder: false },\n\t\t{ text: 'sunt aliqua cillum', isFolder: true },\n\t\t{ text: 'nostrud incididunt commodo', isFolder: false },\n\t\t{ text: 'officia quis ut', isFolder: false },\n\t\t{ text: 'officia ipsum ipsum', isFolder: false },\n\t\t{ text: 'non qui amet', isFolder: true },\n\t\t{ text: 'duis quis pariatur', isFolder: false },\n\t\t{ text: 'enim dolor incididunt', isFolder: true },\n\t\t{ text: 'laboris Lorem anim', isFolder: false },\n\t\t{ text: 'pariatur eiusmod non', isFolder: true },\n\t\t{ text: 'anim commodo pariatur', isFolder: true },\n\t\t{ text: 'veniam anim tempor', isFolder: false },\n\t\t{ text: 'quis minim ex', isFolder: false },\n\t\t{ text: 'eu aliquip adipisicing', isFolder: false },\n\t\t{ text: 'labore est eiusmod', isFolder: true },\n\t\t{ text: 'Lorem et eiusmod', isFolder: false },\n\t\t{ text: 'voluptate est voluptate', isFolder: false },\n\t\t{ text: 'et mollit pariatur', isFolder: true },\n\t\t{ text: 'voluptate sunt tempor', isFolder: false },\n\t\t{ text: 'enim culpa ad', isFolder: true },\n\t\t{ text: 'non duis in', isFolder: true },\n\t\t{ text: 'consectetur mollit deserunt', isFolder: true },\n\t\t{ text: 'eiusmod laborum eu', isFolder: true },\n\t\t{ text: 'nisi nulla consequat', isFolder: false },\n\t\t{ text: 'voluptate qui amet', isFolder: false },\n\t\t{ text: 'laborum cupidatat in', isFolder: false },\n\t\t{ text: 'incididunt dolor dolore', isFolder: false },\n\t\t{ text: 'irure sint sunt', isFolder: true },\n\t\t{ text: 'elit duis sit', isFolder: false },\n\t\t{ text: 'cillum quis commodo', isFolder: true },\n\t\t{ text: 'ut elit aliqua', isFolder: false },\n\t\t{ text: 'amet ipsum in', isFolder: true },\n\t\t{ text: 'minim et pariatur', isFolder: false },\n\t\t{ text: 'ea officia nisi', isFolder: false }\n\t]\n});","var\n\tkind = require('../../../enyo/lib/kind')\n\tRepeater = require('../../../enyo/lib/Repeater');\n\nvar\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tListActions = require('../../../moonstone/lib/ListActions'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tTooltip = require('../../../moonstone/lib/Tooltip'),\n\tTooltipDecorator = require('../../../moonstone/lib/TooltipDecorator');\n\nmodule.exports = kind({\n\tname: 'moon.sample.DynamicPanelsSample',\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tcomponents: [\n\t\t{name: 'panels', kind: Panels, popOnBack:true, wrap: true, pattern: 'activity', classes: 'enyo-fit'}\n\t],\n\trendered: function () {\n\t\tthis.inherited(arguments);\n\t\tthis.pushSinglePanel();\n\t},\n\tpushSinglePanel: function() {\n\t\tthis.$.panels.pushPanels([\n\t\t\t{title: 'Panel ' + this.$.panels.getPanels().length, classes: 'moon-7h', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t\t{kind: Repeater, count: 30, components: [\n\t\t\t\t\t\t{kind: Item, content: 'Dummy Item', ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t], headerComponents: [\n\t\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t\t{kind: Tooltip, position: 'above', content: 'Test Dynamic Lists'},\n\t\t\t\t\t{kind: ListActions, icon: 'drawer', listActions: [\n\t\t\t\t\t\t{action: 'category3', components: [\n\t\t\t\t\t\t\t{kind: Divider, content: 'Dynamic List Action'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Dummy Item 1'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Dummy Item 2'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t], {owner: this});\n\t},\n\tpushJoinedPanels: function() {\n\t\tthis.$.panels.pushPanels([\n\t\t\t{title: 'Panel ' + this.$.panels.getPanels().length, classes: 'moon-7h', titleBelow: 'Joined Panel 1', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t\t{kind: Repeater, count: 30, components: [\n\t\t\t\t\t\t{kind: Item, content: 'Dummy Item', ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{joinToPrev:true, title: 'Panel ' + (this.$.panels.getPanels().length+1), classes: 'moon-7h', titleBelow: 'Joined Panel 2', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t\t{kind: Repeater, count: 30, components: [\n\t\t\t\t\t\t{kind: Item, content: 'Dummy Item', ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t], {owner: this});\n\t},\n\tpushSeveralPanels: function() {\n\t\tthis.$.panels.pushPanels([\n\t\t\t{title: 'Panel ' + this.$.panels.getPanels().length, titleBelow: '1 of 3 Panels', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t\t{kind: Repeater, count: 5, components: [\n\t\t\t\t\t\t{kind: Item, content: 'Dummy Item', ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{title: 'Panel ' + (this.$.panels.getPanels().length+1), titleBelow: '2 of 3 Panels', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t\t{kind: Repeater, count: 10, components: [\n\t\t\t\t\t\t{kind: Item, content: 'Dummy Item', ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{title: 'Panel ' + (this.$.panels.getPanels().length+2), titleBelow: '3 of 3 Panels', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t{kind: Scroller, fit:true, components: [\n\t\t\t\t\t{kind: Repeater, count: 15, components: [\n\t\t\t\t\t\t{kind: Item, content: 'Dummy Item', ontap: 'next'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t\t// targetIndex with a negative value works in conjunction with the wrap:true property.\n\t\t\t// Negative values count backward from the end while indices greater than the length\n\t\t\t// wrap around and start counting again from the beginning.\n\t\t], {owner: this}, {targetIndex: -1});\n\t},\n\tnext: function() {\n\t\tvar index = this.$.panels.getIndex();\n\t\tvar length = this.$.panels.getPanels().length;\n\t\tif (index < (length-1)) {\n\t\t\tthis.$.panels.next();\n\t\t} else if (length % 5 === 0) {\n\t\t\tthis.pushSeveralPanels();\n\t\t} else if (length % 3 === 0) {\n\t\t\tthis.pushJoinedPanels();\n\t\t} else {\n\t\t\tthis.pushSinglePanel();\n\t\t}\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tCollection = require('../../../enyo/lib/Collection'),\n\tControl = require('../../../enyo/lib/Control'),\n\tDataRepeater = require('../../../enyo/lib/DataRepeater');\n\nvar\n\tSpotlight = require('../../../spotlight');\n\nvar\n\tButton = require('../../../moonstone/lib/Button'),\n\tChannelInfo = require('../../../moonstone/lib/ChannelInfo'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tClock = require('../../../moonstone/lib/Clock'),\n\tContextualPopup = require('../../../moonstone/lib/ContextualPopup'),\n\tContextualPopupDecorator = require('../../../moonstone/lib/ContextualPopupDecorator'),\n\tDataList = require('../../../moonstone/lib/DataList'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tDrawers = require('../../../moonstone/lib/Drawers'),\n\tIconButton = require('../../../moonstone/lib/IconButton'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tListActions = require('../../../moonstone/lib/ListActions'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tPopup = require('../../../moonstone/lib/Popup'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem'),\n\tVideoInfoBackground = require('../../../moonstone/lib/VideoInfoBackground'),\n\tVideoInfoHeader = require('../../../moonstone/lib/VideoInfoHeader'),\n\tVideoPlayer = require('../../../moonstone/lib/VideoPlayer');\n\nmodule.exports = kind({\n\tname: 'dmoon.sample.HistorySample',\n\tkind: Control,\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tcomponents: [\n\t\t{\n\t\t\tname: 'drawers',\n\t\t\tkind: Drawers,\n\t\t\tdrawers: [\n\t\t\t\t{\n\t\t\t\t\tname: 'partialDrawer',\n\t\t\t\t\topen: false,\n\t\t\t\t\tcontrolsOpen: false,\n\t\t\t\t\tonActivate: 'partialDrawerChanged',\n\t\t\t\t\tonDeactivate: 'partialDrawerChanged',\n\t\t\t\t\thandle: {name: 'handleButton', content: 'Partial drawer with long text truncation'},\n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{kind: Panel, classes: 'enyo-fit', title: 'Partial Drawer', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t],\n\t\t\t\t\tcontrolDrawerComponents: [\n\t\t\t\t\t\t{classes: 'moon-hspacing', components: [\n\t\t\t\t\t\t\t{kind: Button, name: 'openMoreButton', content: 'Open More', ontap: 'openMainDrawer'},\n\t\t\t\t\t\t\t{kind: Button, content: 'Close', ontap: 'close'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'searchDrawer',\n\t\t\t\t\thandle: {content: 'Full drawer'},\n\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t{kind: Panel, classes: 'enyo-fit', title: 'Full Drawer', components: [\n\t\t\t\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t\t\t\t{kind: Item, content: 'Item Two'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\tcomponents: [\n\t\t\t\t{name: 'player', kind: VideoPlayer, src: 'http://media.w3.org/2010/05/bunny/movie.mp4', poster: '$lib/moonstone/samples/assets/video-poster.png', autoplay: true, showing: false, infoComponents: [\n\t\t\t\t\t{kind: VideoInfoBackground, orient: 'left', background: true, fit: true, components: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkind: ChannelInfo,\n\t\t\t\t\t\t\tchannelNo: '13',\n\t\t\t\t\t\t\tchannelName: 'AMC',\n\t\t\t\t\t\t\tclasses: 'moon-2h',\n\t\t\t\t\t\t\tcomponents: [\n\t\t\t\t\t\t\t\t{content: '3D'},\n\t\t\t\t\t\t\t\t{content: 'Live'},\n\t\t\t\t\t\t\t\t{content: 'REC 08:22', classes: 'moon-video-player-info-redicon '}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkind: VideoInfoHeader,\n\t\t\t\t\t\t\ttitle: 'Downton Abbey - Extra Title',\n\t\t\t\t\t\t\tsubTitle: 'Mon June 21, 7:00 - 8:00pm',\n\t\t\t\t\t\t\tsubSubTitle: 'R - TV 14, V, L, SC',\n\t\t\t\t\t\t\tdescription: 'The series, set in the Youkshire country estate of Downton Abbey, depicts the lives of the aristocratic Crawley famiry and'\n\t\t\t\t\t\t}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: VideoInfoBackground, orient: 'right', background: true, components: [\n\t\t\t\t\t\t{kind: Clock}\n\t\t\t\t\t]}\n\t\t\t\t], components: [\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'},\n\t\t\t\t\t{kind: IconButton, small: false, classes: 'moon-icon-video-round-controls-style'}\n\t\t\t\t]},\n\t\t\t\t{name: 'panels', kind: Panels, pattern: 'activity', classes: 'enyo-fit', useHandle: true, onShowingChanged: 'panelsShowingChanged', components: [\n\t\t\t\t\t{title: 'First Panel', classes: 'moon-7h', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next1'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next1'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next1'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next1'},\n\t\t\t\t\t\t{kind: ToggleItem, content: 'Show/Hide Side Handle', checked: true,  onchange: 'handleShowingChanged'}\n\t\t\t\t\t]},\n\t\t\t\t\t{title: 'Second Panel', classes: 'moon-7h',\n\t\t\t\t\t\tjoinToPrev: true, components: [\n\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next2'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next2'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next2'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next2'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next2'}\n\t\t\t\t\t]},\n\t\t\t\t\t{title: 'Third Panel', classes: 'moon-7h', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next3'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next3'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next3'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next3'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next3'}\n\t\t\t\t\t]},\n\t\t\t\t\t{title: 'Fourth', classes: 'moon-7h', joinToPrev: true, titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', headerComponents: [\n\t\t\t\t\t\t{kind: Button, content: 'Basic Popup', ontap: 'showPopup', popup: 'basicPopup'},\n\t\t\t\t\t\t{kind: ContextualPopupDecorator,\tcomponents:\t[\n\t\t\t\t\t\t\t{content: 'ContextualPopup'},\n\t\t\t\t\t\t\t{kind: ContextualPopup, classes: 'moon-2h moon-8v', components: [\n\t\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ContextualPopupDecorator,\tcomponents:\t[\n\t\t\t\t\t\t\t{content: 'ContextualPopup'},\n\t\t\t\t\t\t\t{kind: ContextualPopup, classes: 'moon-2h moon-8v', components: [\n\t\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t\t{content: 'Item 2'},\n\t\t\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next4'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next4'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next4'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next4'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next4'},\n\t\t\t\t\t\t{name: 'basicPopup', kind: Popup, content: 'Popup...'},\n\t\t\t\t\t\t{name: 'directPopup', kind: Popup, autoDismiss: false, components: [\n\t\t\t\t\t\t\t{content: 'Direct Popup'},\n\t\t\t\t\t\t\t{kind: Button, content: 'Hide Direct', ontap: 'hidePopup', popup: 'directPopup', direct: true}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{title: 'Fifth', classes: 'moon-7h', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next5'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next5'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next5'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next5'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next5'}\n\t\t\t\t\t]},\n\t\t\t\t\t{title: 'Sixth', classes: 'moon-7h', joinToPrev: true, titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', headerComponents: [\n\t\t\t\t\t\t//* List actions with default width\n\t\t\t\t\t\t{kind: ListActions, name: 'listActions', icon: 'drawer', proportionalWidth: true, listActions: [\n\t\t\t\t\t\t\t{action: 'category2', components: [\n\t\t\t\t\t\t\t\t{kind: Divider, content: 'Category 2 (DataList)'},\n\t\t\t\t\t\t\t\t{kind: DataList, name: 'list', fit: true, components: [\n\t\t\t\t\t\t\t\t\t{kind: CheckboxItem, bindings: [{from: '.model.name', to: '.content'}]}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{action: 'category1', components: [\n\t\t\t\t\t\t\t\t{kind: Divider, content: 'Category 1 (DataRepeater)'},\n\t\t\t\t\t\t\t\t{kind: 'enyo.DataRepeater', containerOptions: {kind: Scroller, classes: 'enyo-fill'}, name: 'repeater', fit: true, components: [\n\t\t\t\t\t\t\t\t\t{kind: ToggleItem, bindings: [{from: '.model.name', to: '.content'}]}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t], components: [\n\t\t\t\t\t\t{kind: Item, content: 'Item One', ontap: 'next6'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Two', ontap: 'next6'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Three', ontap: 'next6'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Four', ontap: 'next6'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Five', ontap: 'next6'}\n\t\t\t\t\t]},\n\t\t\t\t\t{title: 'Seventh', classes: 'moon-7h', titleBelow: 'Sub-title', subTitleBelow: 'Sub-sub title', components: [\n\t\t\t\t\t\t{kind: Item, content: 'Item One'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Two'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Three'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Four'},\n\t\t\t\t\t\t{kind: Item, content: 'Item Five'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]\n\t\t}\n\t],\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.$.list.set('collection', new Collection([\n\t\t\t{name: 'Red'},\n\t\t\t{name: 'White'},\n\t\t\t{name: 'Blue'},\n\t\t\t{name: 'Black'}\n\t\t]));\n\t\tthis.$.repeater.set('collection', new Collection([\n\t\t\t{name: 'Santa Clara'},\n\t\t\t{name: 'San Francisco'},\n\t\t\t{name: 'Seoul'}\n\t\t]));\n\t},\n\trendered: function () {\n\t\tControl.prototype.rendered.apply(this, arguments);\n\t\tSpotlight.spot(this.$.panels);\n\t},\n\t// custom next handler for each panel to avoid switching from one active panel\n\t// to another with no visible change for demo\n\tnext1: function (sender, event) {\n\t\tthis.$.panels.setIndex(2);\n\t\treturn true;\n\t},\n\tnext2: function (sender, event) {\n\t\tthis.$.panels.setIndex(2);\n\t\treturn true;\n\t},\n\tnext3: function (sender, event) {\n\t\tthis.$.panels.setIndex(5);\n\t\treturn true;\n\t},\n\tnext4: function (sender, event) {\n\t\tthis.$.panels.setIndex(5);\n\t\treturn true;\n\t},\n\tnext5: function (sender, event) {\n\t\tthis.$.panels.setIndex(7);\n\t\treturn true;\n\t},\n\tnext6: function (sender, event) {\n\t\tthis.$.panels.setIndex(7);\n\t\treturn true;\n\t},\n\thandleShowingChanged: function (sender, event) {\n\t\tthis.$.panels.setHandleShowing(sender.getChecked());\n\t},\n\tpanelsShowingChanged: function (sender, event) {\n\t\t// Hiding the VideoPlayer when it would be obscured by the Panels avoids UI performance\n\t\t// issues caused by the GPU being occupied rendering video frames that aren't visible.\n\t\tthis.$.player.set('showing', !event.showing);\n\t},\n\tshowPopup: function (sender) {\n\t\tvar p = this.$[sender.popup];\n\t\tif (p) {\n\t\t\tif(sender.direct) {\n\t\t\t\tp.showDirect();\n\t\t\t} else {\n\t\t\t\tp.show();\n\t\t\t}\n\t\t}\n\t},\n\tclose: function () {\n\t\tif (this.$.partialDrawer.getOpen()) {\n\t\t\tthis.$.partialDrawer.setOpen(false);\n\t\t} else {\n\t\t\tthis.$.partialDrawer.setControlsOpen(false);\n\t\t}\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tCollection = require('../../../enyo/lib/Collection'),\n\tDataRepeater = require('../../../enyo/lib/DataRepeater')\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tBodyText = require('../../../moonstone/lib/BodyText'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tDataList = require('../../../moonstone/lib/DataList'),\n\tDivider = require('../../../moonstone/lib/Divider'),\n\tListActions = require('../../../moonstone/lib/ListActions'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tSelectableItem = require('../../../moonstone/lib/SelectableItem'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem'),\n\tTooltip = require('../../../moonstone/lib/Tooltip'),\n\tTooltipDecorator = require('../../../moonstone/lib/TooltipDecorator');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ListActionsSample',\n\tkind: Panels,\n\tpattern: 'activity',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\thandlers: {\n\t\tonActivate: 'activateHandler'\n\t},\n\tcomponents: [\n\t\t{kind: Panel, headerType: 'medium', title: 'List Actions Sample', headerComponents: [\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: Tooltip, position: 'above', content: 'Test Dynamic Lists'},\n\n\t\t\t\t//* List actions with default width\n\t\t\t\t{kind: ListActions, disabled: true, name: 'listActions', icon: 'drawer', listActions: [\n\t\t\t\t\t{action: 'category3', components: [\n\t\t\t\t\t\t{kind: Divider, content: 'Category 3 (DataList)'},\n\t\t\t\t\t\t{kind: DataList, name: 'list', fit:true, components: [\n\t\t\t\t\t\t\t{kind: CheckboxItem, bindings: [{from: '.model.name', to: '.content'}]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{action: 'category2', components: [\n\t\t\t\t\t\t{kind: Divider, content: 'Category 2 (DataRepeater)'},\n\t\t\t\t\t\t{kind: DataRepeater, containerOptions:{kind: Scroller, classes: 'enyo-fill'}, name: 'repeater', fit:true, components: [\n\t\t\t\t\t\t\t{kind: ToggleItem, bindings: [{from: '.model.name', to: '.content'}]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{action: 'category1', components: [\n\t\t\t\t\t\t{kind: Divider, content: 'Category 1 (Static)'},\n\t\t\t\t\t\t{kind: Scroller, fit: true, components: [\n\t\t\t\t\t\t\t{kind: Group, name: 'group', highlander: true, defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t\t\t{content: 'Just Released'},\n\t\t\t\t\t\t\t\t{content: 'Recommended'},\n\t\t\t\t\t\t\t\t{content: 'Top Rated'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: Tooltip, position: 'above', content: 'Dummy List Actions'},\n\n\t\t\t\t//* List actions with proportional width\n\t\t\t\t{kind: ListActions, proportionalWidth: true, iconSrc: 'assets/icon-list.png', listActions: [\n\t\t\t\t\t{action: 'Cost', components: [\n\t\t\t\t\t\t{kind: Divider, content: 'Cost'},\n\t\t\t\t\t\t{kind: Scroller, defaultKind: ToggleItem, fit: true, components: [\n\t\t\t\t\t\t\t{content: '$'},\n\t\t\t\t\t\t\t{content: '$$'},\n\t\t\t\t\t\t\t{content: '$$$'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{action: 'Flavor', components: [\n\t\t\t\t\t\t{kind: Divider, content: 'Flavor'},\n\t\t\t\t\t\t{kind: Scroller, defaultKind: CheckboxItem, fit: true, components: [\n\t\t\t\t\t\t\t{content: 'Spicy'},\n\t\t\t\t\t\t\t{content: 'Sweet'},\n\t\t\t\t\t\t\t{content: 'Sour'},\n\t\t\t\t\t\t\t{content: 'Salty', checked: true},\n\t\t\t\t\t\t\t{content: 'Savory'},\n\t\t\t\t\t\t\t{content: 'Bland'},\n\t\t\t\t\t\t\t{content: 'Umami'},\n\t\t\t\t\t\t\t{content: 'Bitter'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: TooltipDecorator, components: [\n\t\t\t\t{kind: Tooltip, position: 'above', content: 'Test Auto Collapse'},\n\n\t\t\t\t//* List actions with auto-collapsing\n\t\t\t\t{kind: ListActions, autoCollapse: true, iconSrc: 'assets/icon-list.png', listActions: [\n\t\t\t\t\t{action: 'AutoCollapseTest', components: [\n\t\t\t\t\t\t{kind: Divider, content: 'Try Auto-collapse'},\n\t\t\t\t\t\t{kind: Scroller, fit: true, components: [\n\t\t\t\t\t\t\t{kind: Group, highlander: true, defaultKind: CheckboxItem, components: [\n\t\t\t\t\t\t\t\t{content: 'Select'},\n\t\t\t\t\t\t\t\t{content: 'One'},\n\t\t\t\t\t\t\t\t{content: 'To'},\n\t\t\t\t\t\t\t\t{content: 'Auto'},\n\t\t\t\t\t\t\t\t{content: 'Collapse'},\n\t\t\t\t\t\t\t\t{content: 'This'},\n\t\t\t\t\t\t\t\t{content: 'List'},\n\t\t\t\t\t\t\t\t{content: 'Actions'},\n\t\t\t\t\t\t\t\t{content: 'Menu'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t], components: [\n\t\t\t{components: [\n\t\t\t\t{kind: Button, small:true, content: 'Add Option to Category 1', ontap: 'addToStatic'},\n\t\t\t\t{kind: Button, small:true, content: 'Add Option to Category 2', ontap: 'addToRepeater'},\n\t\t\t\t{kind: Button, small:true, content: 'Add Option to Category 3', ontap: 'addToList'},\n\t\t\t\t{classes: 'moon-1v'},\n\t\t\t\t{kind: Button, small:true, content: 'Breadcrumb Panel', ontap: 'toggleBreadcrumb'},\n\t\t\t\t{kind: ToggleButton, small: true, toggleOnLabel: 'Header Type: Small', toggleOffLabel: 'Header Type: Medium', ontap: 'toggleHeaderSize'},\n\t\t\t\t{name: 'toggleDisabledListActions', kind: ToggleButton, small: true, toggleOnLabel: 'ListActions: Disabled', toggleOffLabel: 'ListActions: Enabled', value: true}\n\t\t\t]},\n\t\t\t{fit: true},\n\t\t\t{kind: Divider, content: 'List Action Event'},\n\t\t\t{kind: BodyText, name: 'console', content: 'Event'}\n\t\t]},\n\t\t{kind: Panel, title: 'Header', components: [\n\t\t\t{kind: Button, small:true, content: 'Go Back', ontap: 'toggleBreadcrumb'}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '$.toggleDisabledListActions.value', to: '$.listActions.disabled'}\n\t],\n\tactivateHandler: function (sender, event) {\n\t\tif (event && event.action) {\n\t\t\tif (event.originator instanceof SelectableItem) {\n\t\t\t\tthis.$.console.setContent(\n\t\t\t\t\tevent.action + ': ' +\n\t\t\t\t\tevent.originator.getContent() + ' was ' +\n\t\t\t\t\t(event.originator.getSelected() ? 'selected' : 'unselected')\n\t\t\t\t);\n\t\t\t} else {\t// moon.CheckboxItem or moon.ToggleItem\n\t\t\t\tthis.$.console.setContent(\n\t\t\t\t\tevent.action + ': ' +\n\t\t\t\t\tevent.toggledControl.getContent() + ' was ' +\n\t\t\t\t\t(event.originator.getChecked() ? 'selected' : 'unselected')\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Log the active state of the ListAction drawer\n\t\tif (event.originator instanceof ListActions) {\n\t\t\tthis.$.console.setContent(event.originator.name + ' is now ' + (event.originator.getOpen() ? 'open' : 'closed'));\n\t\t}\n\t},\n\taddToStatic: function () {\n\t\tthis.optionNumber = (this.optionNumber || 0) + 1;\n\t\tthis.$.group.createComponent({content: 'Option ' + this.optionNumber}).render();\n\t},\n\taddToList: function () {\n\t\tthis.optionNumber = (this.optionNumber || 0) + 1;\n\t\tthis.$.list.collection.add({name: 'Option ' + this.optionNumber});\n\t},\n\taddToRepeater: function () {\n\t\tthis.optionNumber = (this.optionNumber || 0) + 1;\n\t\tthis.$.repeater.collection.add({name: 'Option ' + this.optionNumber});\n\t},\n\ttoggleBreadcrumb: function () {\n\t\tthis.setIndex(this.getIndex() > 0 ? 0 : 1);\n\t},\n\ttoggleHeaderSize: function () {\n\t\tthis.getActive().setHeaderType(this.getActive().getHeaderType() == 'small' ? 'medium': 'small');\n\t},\n\tcreate: function () {\n\t\tPanels.prototype.create.apply(this, arguments);\n\t\tthis.$.list.set('collection', new Collection([\n\t\t\t{name: 'SAT 1'},\n\t\t\t{name: 'SAT 2'},\n\t\t\t{name: 'SAT 3'},\n\t\t\t{name: 'OTHER S1'},\n\t\t\t{name: 'OTHER S2'}\n\t\t]));\n\t\tthis.$.repeater.set('collection', new Collection([\n\t\t\t{name: 'Comedy'},\n\t\t\t{name: 'Action'},\n\t\t\t{name: 'Drama'},\n\t\t\t{name: 'Family'},\n\t\t\t{name: 'Fantasy'},\n\t\t\t{name: 'Science Fiction'}\n\t\t]));\n\t}\n});","var\n\tkind = require('../../../enyo/lib/kind'),\n\tCollection = require('../../../enyo/lib/Collection'),\n\tControl = require('../../../enyo/lib/Control'),\n\tGroup = require('../../../enyo/lib/Group');\n\nvar\n\tDatePicker = require('../../../moonstone/lib/DatePicker'),\n\tExpandableDataPicker = require('../../../moonstone/lib/ExpandableDataPicker'),\n\tExpandableInput = require('../../../moonstone/lib/ExpandableInput'),\n\tExpandableIntegerPicker = require('../../../moonstone/lib/ExpandableIntegerPicker'),\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tTimePicker = require('../../../moonstone/lib/TimePicker');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ExpandablePickerSample',\n\tkind: Control,\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Panels, pattern: 'activity', classes: 'enyo-fit', components: [\n\t\t\t{kind: Panel, name: 'nonGroupedPanel', onChange: 'pickerChanged', title: 'Expandable', headerType: 'medium', titleBelow: 'Not grouped', style: 'width:50%;', components: [\n\t\t\t\t{kind: Scroller, horizontal: 'hidden', classes: 'enyo-fill', components: [\n\t\t\t\t\t{style: 'max-width: 500px;', components: [\n\t\t\t\t\t\t{kind: ExpandablePicker, noneText: 'Nothing selected', content: 'Expandable Picker', allowHtml:true, components: [\n\t\t\t\t\t\t\t{content: 'English'},\n\t\t\t\t\t\t\t{content: 'Spanish'},\n\t\t\t\t\t\t\t{content: 'French'},\n\t\t\t\t\t\t\t{content: 'German'},\n\t\t\t\t\t\t\t{content: 'Italian'},\n\t\t\t\t\t\t\t{content: 'Japanese'},\n\t\t\t\t\t\t\t{content: 'Symbols <span style=\\'color:orange;\\'>&#x2620; &#x2764; &#x2619;</span>', allowHtml:true}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ExpandablePicker, content: 'Pre-selected Picker', components: [\n\t\t\t\t\t\t\t{content: 'On', active: true},\n\t\t\t\t\t\t\t{content: 'Off'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ExpandablePicker, multipleSelection: true, noneText: 'Nothing selected', content: 'Non-auto-collapsing', autoCollapseOnSelect: false, components: [\n\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t{content: 'Item 2', active: true},\n\t\t\t\t\t\t\t{content: 'Item 3', active: true}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ExpandablePicker, noneText: 'Nothing selected with loooooooooooooooooooooooooong text truncation', content: 'Expandable Picker with looooooooooooooooooooooooooong text truncation', components: [\n\t\t\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooooooooooong Item 1'},\n\t\t\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooooooooooong Item 2'},\n\t\t\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooooooooooong Item 3'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ExpandablePicker, disabled:true, content: 'Disabled Picker', components: [\n\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t{content: 'Item 2', active: true},\n\t\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ExpandablePicker, content: 'Pre-expanded picker', open: true, components: [\n\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t{content: 'Item 2', active: true},\n\t\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{kind: ExpandableIntegerPicker, autoCollapse: true, content: 'Integer Picker', value: 7, min: 3, max: 15, step: 1, unit: 'elephants'},\n\t\t\t\t\t\t{kind: ExpandableIntegerPicker, disabled:true, autoCollapse: true, content: 'Disabled Integer Picker', value: 2, min: 1, max: 15, unit: 'sec'},\n\t\t\t\t\t\t{kind: DatePicker, noneText: 'Pick a Date', content: 'Date Picker'},\n\t\t\t\t\t\t{kind: TimePicker, noneText: 'Pick a Date', content: 'Time Picker'},\n\t\t\t\t\t\t{kind: ExpandableInput, noneText: 'Enter text', content: 'Expandable Input', placeholder: 'Enter text'},\n\t\t\t\t\t\t{kind: ExpandableDataPicker, content: 'Expandable Data Picker', noneText: 'Nothing Selected', components: [\n\t\t\t\t\t\t\t{bindings: [\n\t\t\t\t\t\t\t\t{from: '.model.label', to: '.content'}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Panel, name: 'groupedPanel', onChange: 'pickerChanged', title: 'Pickers', headerType: 'medium', titleBelow: 'Grouped', joinToPrev:true, components: [\n\t\t\t\t{kind: Group, tag:null, highlander: true, components: [\n\t\t\t\t\t{kind: Scroller, horizontal: 'hidden', classes: 'enyo-fill', components: [\n\t\t\t\t\t\t{style: 'max-width: 500px;', components: [\n\t\t\t\t\t\t\t{kind: ExpandablePicker, noneText: 'Nothing selected', content: 'Expandable Picker', allowHtml:true, components: [\n\t\t\t\t\t\t\t\t{content: 'English'},\n\t\t\t\t\t\t\t\t{content: 'Spanish'},\n\t\t\t\t\t\t\t\t{content: 'French'},\n\t\t\t\t\t\t\t\t{content: 'German'},\n\t\t\t\t\t\t\t\t{content: 'Italian'},\n\t\t\t\t\t\t\t\t{content: 'Japanese'},\n\t\t\t\t\t\t\t\t{content: 'Symbols <span style=\\'color:orange;\\'>&#x2620; &#x2764; &#x2619;</span>', allowHtml:true}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{kind: ExpandablePicker, content: 'Pre-selected Picker', components: [\n\t\t\t\t\t\t\t\t{content: 'On', active: true},\n\t\t\t\t\t\t\t\t{content: 'Off'}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{kind: ExpandablePicker, content: 'Non-auto-collapsing', autoCollapseOnSelect: false, components: [\n\t\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t\t{content: 'Item 2', active: true},\n\t\t\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{kind: ExpandablePicker, noneText: 'Nothing selected with loooooooooooooooooooooooooong text truncation', content: 'Expandable Picker with looooooooooooooooooooooooooong text truncation', components: [\n\t\t\t\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooooooooooong Item 1'},\n\t\t\t\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooooooooooong Item 2'},\n\t\t\t\t\t\t\t\t{content: 'Looooooooooooooooooooooooooooooooooooooooooooong Item 3'}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{kind: ExpandablePicker, disabled:true, content: 'Disabled Picker', components: [\n\t\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t\t{content: 'Item 2', active: true},\n\t\t\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{kind: ExpandablePicker, content: 'Pre-expanded picker', open: true, components: [\n\t\t\t\t\t\t\t\t{content: 'Item 1'},\n\t\t\t\t\t\t\t\t{content: 'Item 2', active: true},\n\t\t\t\t\t\t\t\t{content: 'Item 3'}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{kind: ExpandableIntegerPicker, autoCollapse: true, content: 'Integer Picker', value: 7, min: 3, max: 15, step: 1, unit: 'elephants'},\n\t\t\t\t\t\t\t{kind: ExpandableIntegerPicker, disabled:true, autoCollapse: true, content: 'Disabled Integer Picker', value: 2, min: 1, max: 15, unit: 'sec'},\n\t\t\t\t\t\t\t{kind: DatePicker, noneText: 'Pick a Date', content: 'Date Picker'},\n\t\t\t\t\t\t\t{kind: TimePicker, noneText: 'Pick a Date', content: 'Time Picker'},\n\t\t\t\t\t\t\t{kind: ExpandableInput, noneText: 'Enter text', content: 'Expandable Input', placeholder: 'Enter text'},\n\t\t\t\t\t\t\t{kind: ExpandableDataPicker, content: 'Expandable Data Picker', noneText: 'Nothing Selected', components: [\n\t\t\t\t\t\t\t\t{bindings: [\n\t\t\t\t\t\t\t\t\t{from: '.model.label', to: '.content'}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t],\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\n\t\tvar c = new Collection([\n\t\t\t{label: 'Item 1'},\n\t\t\t{label: 'Item 2'},\n\t\t\t{label: 'Item 3'},\n\t\t\t{label: 'Item 4'},\n\t\t\t{label: 'Item 5'}\n\t\t]);\n\n\t\tthis.$.expandableDataPicker.set('collection', c);\n\t\tthis.$.expandableDataPicker2.set('collection', c);\n\t},\n\tpickerChanged: function (sender, event) {\n\t\tvar value,\n\t\t\tpicker = event.originator.getContent();\n\t\tif (event.originator instanceof ExpandablePicker) {\n\t\t\tvalue = event.content;\n\t\t\tsender.setSubTitleBelow(picker + ' changed to \\'' + value + '\\'');\n\t\t} else if ((event.originator instanceof ExpandableIntegerPicker) ||\n\t\t\t\t\t(event.originator instanceof DatePicker) ||\n\t\t\t\t\t(event.originator instanceof TimePicker) ||\n\t\t\t\t\t(event.originator instanceof ExpandableInput)) {\n\t\t\tvalue = event.originator.getValue();\n\t\t\tsender.setSubTitleBelow(picker + ' changed to \\'' + value + '\\'');\n\t\t}\n\t},\n\t// when called, go into loop of opening/closing pickers every second\n\tstressTest: function () {\n\t\tvar pickers = [\n\t\t\t'datePicker',\n\t\t\t'datePicker2',\n\t\t\t'expandableInput',\n\t\t\t'expandableInput2',\n\t\t\t'expandableIntegerPicker',\n\t\t\t// disabled 'expandableIntegerPicker2',\n\t\t\t'expandableIntegerPicker3',\n\t\t\t// disabled 'expandableIntegerPicker4',\n\t\t\t'expandablePicker',\n\t\t\t'expandablePicker2',\n\t\t\t'expandablePicker3',\n\t\t\t'expandablePicker4',\n\t\t\t// disabled 'expandablePicker5',\n\t\t\t'expandablePicker6',\n\t\t\t'expandablePicker7',\n\t\t\t'expandablePicker8',\n\t\t\t'expandablePicker9',\n\t\t\t'expandablePicker10',\n\t\t\t// disabled 'expandablePicker11',\n\t\t\t'expandablePicker12',\n\t\t\t'timePicker',\n\t\t\t'timePicker2',\n\t\t\t'expandableDataPicker',\n\t\t\t'expandableDataPicker2'\n\t\t];\n\t\tvar index = 0;\n\t\tvar opened = false;\n\t\tsetInterval(this.bindSafely(function() {\n\t\t\tif (opened) {\n\t\t\t\tthis.$[pickers[index++]].setOpen(false);\n\t\t\t} else {\n\t\t\t\tthis.$[pickers[index]].setOpen(true);\n\t\t\t}\n\t\t\topened = !opened;\n\t\t\tindex = index % pickers.length;\n\t\t}), 1000);\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind');\n\nvar\n\tAccordion = require('../../../moonstone/lib/Accordion'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tDatePicker = require('../../../moonstone/lib/DatePicker'),\n\tExpandableInput = require('../../../moonstone/lib/ExpandableInput'),\n\tExpandableIntegerPicker = require('../../../moonstone/lib/ExpandableIntegerPicker'),\n\tExpandablePicker = require('../../../moonstone/lib/ExpandablePicker'),\n\tExpandableText = require('../../../moonstone/lib/ExpandableText'),\n\tFormCheckbox = require('../../../moonstone/lib/FormCheckbox'),\n\tInput = require('../../../moonstone/lib/Input'),\n\tInputDecorator = require('../../../moonstone/lib/InputDecorator'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tScroller = require('../../../moonstone/lib/Scroller'),\n\tSelectableItem = require('../../../moonstone/lib/SelectableItem'),\n\tSimplePicker = require('../../../moonstone/lib/SimplePicker'),\n\tTimePicker = require('../../../moonstone/lib/TimePicker'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton'),\n\tToggleItem = require('../../../moonstone/lib/ToggleItem');\n\nmodule.exports = kind({\n\tname: 'moon.sample.ScrollerVerticalSample',\n\tclasses: 'moon enyo-unselectable enyo-fit',\n\tcomponents: [\n\t\t{kind: Panel, classes: 'enyo-fit', headerType: 'medium', title: 'Vertical Scroller', headerComponents: [\n\t\t\t{content: 'Spacing: ', classes: 'moon-header-client-text'},\n\t\t\t{kind: SimplePicker, name: 'spacingPicker', classes: 'moon-4h', onChange: 'spacingChanged', components: [\n\t\t\t\t{content: 'default', spacingClass: ''},\n\t\t\t\t{content: 'small', spacingClass: 'moon-vspacing-s', active:true},\n\t\t\t\t{content: 'medium', spacingClass: 'moon-vspacing-m'},\n\t\t\t\t{content: 'large', spacingClass: 'moon-vspacing-l'}\n\t\t\t]}\n\t\t], components: [\n\t\t\t{ kind: Scroller, classes: 'enyo-fill', components: [\n\t\t\t\t{name: 'wrapper', classes: 'moon-6h moon-vspacing-s', components: [\n\t\t\t\t\t{kind: ExpandablePicker, noneText: 'Select a language', autoCollapse: true, content: 'Expandable Picker', classes: 'moon-expandable-picker-wrapper', components: [\n\t\t\t\t\t\t{content: 'English'},\n\t\t\t\t\t\t{content: 'Spanish'},\n\t\t\t\t\t\t{content: 'French'},\n\t\t\t\t\t\t{content: 'German'},\n\t\t\t\t\t\t{content: 'Italian'},\n\t\t\t\t\t\t{content: 'Japanese'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: ExpandableInput, content: 'Expandable Input', noneText: 'No Input'},\n\t\t\t\t\t{kind: ExpandableIntegerPicker, content: 'Expandable Integer Picker', value: 7, min: 3, max: 15, step: 1, unit: 'elephants'},\n\t\t\t\t\t{kind: DatePicker, noneText: 'Pick a Date', content: 'Date Picker'},\n\t\t\t\t\t{kind: TimePicker, noneText: 'Pick a Time', content: 'Time Picker'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Checkbox Item 1'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Checkbox Item 2'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Checkbox Item 3'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Selectable Item 1'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Selectable Item 2'},\n\t\t\t\t\t{kind: SelectableItem, content: 'Selectable Item 3'},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Checkbox Item 4 (right)', checkboxOnRight:true},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Checkbox Item 5 (right)', checkboxOnRight:true},\n\t\t\t\t\t{kind: CheckboxItem, content: 'Checkbox Item 6 (right)', checkboxOnRight:true},\n\t\t\t\t\t{kind: ToggleItem, content: 'Toggle Item 1'},\n\t\t\t\t\t{kind: ToggleItem, content: 'Toggle Item 2'},\n\t\t\t\t\t{kind: ToggleItem, content: 'Toggle Item 3'},\n\t\t\t\t\t{kind: FormCheckbox, content: 'Form Checkbox 1'},\n\t\t\t\t\t{kind: FormCheckbox, content: 'Form Checkbox 2'},\n\t\t\t\t\t{kind: FormCheckbox, content: 'Form Checkbox 3'},\n\t\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t\t{kind: Button, content: 'Button 1'}, {tag: 'br'},\n\t\t\t\t\t{kind: Button, content: 'Button 2'}, {tag: 'br'},\n\t\t\t\t\t{kind: Button, content: 'Button 3'}, {tag: 'br'},\n\t\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t\t{kind: ToggleButton, content: 'Toggle Button 1'}, {tag: 'br'},\n\t\t\t\t\t{kind: ToggleButton, content: 'Toggle Button 2'}, {tag: 'br'},\n\t\t\t\t\t{kind: ToggleButton, content: 'Toggle Button 3'}, {tag: 'br'},\n\t\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t\t{kind: Input, placeholder: 'Input'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t\t{kind: Input, placeholder: 'Input'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: InputDecorator, components: [\n\t\t\t\t\t\t{kind: Input, placeholder: 'Input'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, content: 'Accordion 1', defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t{content: 'Item One'},\n\t\t\t\t\t\t{content: 'Item Two'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, content: 'Accordion 2', defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t{content: 'Item Three'},\n\t\t\t\t\t\t{content: 'Item Four'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, content: 'Accordion 3', defaultKind: SelectableItem, components: [\n\t\t\t\t\t\t{content: 'Item Five'},\n\t\t\t\t\t\t{content: 'Item Six'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Item, content: 'Item 1'},\n\t\t\t\t\t{kind: Item, content: 'Item 2'},\n\t\t\t\t\t{kind: Item, content: 'Item 3'},\n\t\t\t\t\t{kind: Item, content: 'Item 4'},\n\t\t\t\t\t{kind: ExpandableText, content: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'},\n\t\t\t\t\t{kind: Item, content: 'Item 5'},\n\t\t\t\t\t{kind: Item, content: 'Item 6'},\n\t\t\t\t\t{kind: Item, content: 'Item 7'},\n\t\t\t\t\t{kind: Item, content: 'Item 8'},\n\t\t\t\t\t{kind: ExpandableText, content: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'},\n\t\t\t\t\t{kind: Item, content: 'Item 9'},\n\t\t\t\t\t{kind: Item, content: 'Item 10'},\n\t\t\t\t\t{kind: Item, content: 'Item 11'},\n\t\t\t\t\t{kind: Item, content: 'Item 12'},\n\t\t\t\t\t{kind: ExpandableText, content: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'},\n\t\t\t\t\t{kind: Item, content: 'Item 13'},\n\t\t\t\t\t{kind: Item, content: 'Item 14'},\n\t\t\t\t\t{kind: Item, content: 'Item 15'},\n\t\t\t\t\t{kind: Item, content: 'Item 16'},\n\t\t\t\t\t{kind: Item, content: 'Item 17'},\n\t\t\t\t\t{kind: Item, content: 'Item 18'},\n\t\t\t\t\t{kind: Item, content: 'Item 19'},\n\t\t\t\t\t{kind: Item, content: 'Item 20'},\n\t\t\t\t\t{kind: Item, content: 'Item 21'},\n\t\t\t\t\t{kind: Item, content: 'Item 22'},\n\t\t\t\t\t{kind: ExpandablePicker, noneText: 'Select a language', autoCollapse: true, content: 'Expandable Picker', classes: 'moon-expandable-picker-wrapper', components: [\n\t\t\t\t\t\t{content: 'English'},\n\t\t\t\t\t\t{content: 'Spanish'},\n\t\t\t\t\t\t{content: 'French'},\n\t\t\t\t\t\t{content: 'German'},\n\t\t\t\t\t\t{content: 'Italian'},\n\t\t\t\t\t\t{content: 'Japanese'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: ExpandableInput, content: 'Expandable Input', noneText: 'No Input'},\n\t\t\t\t\t{kind: ExpandableIntegerPicker, content: 'Expandable Integer Picker', value: 7, min: 3, max: 15, step: 1, unit: 'elephants'},\n\t\t\t\t\t{kind: DatePicker, noneText: 'Pick a Date', content: 'Date Picker'},\n\t\t\t\t\t{kind: TimePicker, noneText: 'Pick a Time', content: 'Time Picker'},\n\t\t\t\t\t{kind: Accordion, content: 'Accordion 1', components: [\n\t\t\t\t\t\t{content: 'Item One'},\n\t\t\t\t\t\t{content: 'Item Two'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, content: 'Accordion 2', components: [\n\t\t\t\t\t\t{content: 'Item Three'},\n\t\t\t\t\t\t{content: 'Item Four'}\n\t\t\t\t\t]},\n\t\t\t\t\t{kind: Accordion, content: 'Accordion 3', components: [\n\t\t\t\t\t\t{content: 'Item Five'},\n\t\t\t\t\t\t{content: 'Item Six'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t]}\n\t],\n\tcreate: function() {\n\t\tthis.inherited(arguments);\n\t\tthis.spacingChanged();\n\t},\n\tspacingChanged: function(inSender, inEvent) {\n\t\tif (this.lastSpacingClass) {\n\t\t\tthis.$.wrapper.removeClass(this.lastSpacingClass);\n\t\t}\n\t\tvar c = this.$.spacingPicker.getSelected().spacingClass;\n\t\tthis.$.wrapper.addClass(c);\n\t\tthis.lastSpacingClass = c;\n\t}\n});\n","var\n\tkind = require('../../../enyo/lib/kind'),\n\tdrag = require('../../../enyo/lib/drag'),\n\tCollection = require('../../../enyo/lib/Collection');\n\nvar\n\tri = require('../../../moonstone/lib/resolution'),\n\tButton = require('../../../moonstone/lib/Button'),\n\tCheckboxItem = require('../../../moonstone/lib/CheckboxItem'),\n\tContextualPopup = require('../../../moonstone/lib/ContextualPopup'),\n\tContextualPopupButton = require('../../../moonstone/lib/ContextualPopupButton'),\n\tContextualPopupDecorator = require('../../../moonstone/lib/ContextualPopupDecorator'),\n\tDataList = require('../../../moonstone/lib/DataList'),\n\tDataGridList = require('../../../moonstone/lib/DataGridList'),\n\tGridListImageItem = require('../../../moonstone/lib/GridListImageItem'),\n\tItem = require('../../../moonstone/lib/Item'),\n\tPanel = require('../../../moonstone/lib/Panel'),\n\tPanels = require('../../../moonstone/lib/Panels'),\n\tRadioItemGroup = require('../../../moonstone/lib/RadioItemGroup'),\n\tScroller = require('../../../moonstone/lib/Scroller')\n\tSelectionOverlaySupport = require('../../../moonstone/lib/SelectionOverlaySupport'),\n\tToggleButton = require('../../../moonstone/lib/ToggleButton');\n\n\n\nvar GridSampleItem = kind({\n\tname: 'moon.sample.GridSampleItem',\n\tkind: 'moon.GridListImageItem',\n\tmixins: [SelectionOverlaySupport],\n\tselectionOverlayVerticalOffset: 35,\n\tsubCaption: 'Sub Caption',\n\tbindings: [\n\t\t{from: '.model.text', to: '.caption'},\n\t\t{from: '.model.subText', to: '.subCaption'},\n\t\t{from: '.model.url', to: '.source'}\n\t]\n});\n\nvar DataGridListSample = module.exports = kind({\n\tname: 'moon.sample.DataGridListSample',\n\tkind: Panels,\n\tpattern: 'activity',\n\tclasses: 'moon enyo-fit enyo-unselectable',\n\tcomponents: [\n\t\t{kind: Panel, classes: 'moon-6h', title: 'Menu', components: [\n\t\t\t{kind: Item, content: 'Scroll'},\n\t\t\t{kind: Item, content: 'the'},\n\t\t\t{kind: Item, content: 'Data Grid List'},\n\t\t\t{kind: Item, content: 'to'},\n\t\t\t{kind: Item, content: 'the'},\n\t\t\t{kind: Item, content: 'Right!'}\n\t\t]},\n\t\t{kind: Panel, joinToPrev: true, title: 'Data Grid List', headerComponents: [\n\t\t\t{kind: ToggleButton, content: 'Selection', name: 'selectionToggle'},\n\t\t\t{kind: ContextualPopupDecorator, components: [\n\t\t\t\t{kind: ContextualPopupButton, content: 'Selection Type'},\n\t\t\t\t{kind: ContextualPopup, classes: 'moon-4h', components: [\n\t\t\t\t\t{kind: RadioItemGroup, name: 'selectionTypeGroup', components: [\n\t\t\t\t\t\t{content: 'Single', value: 'single', selected: true},\n\t\t\t\t\t\t{content: 'Multiple', value: 'multi'},\n\t\t\t\t\t\t{content: 'Group', value: 'group'}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]},\n\t\t\t{kind: Button, content: 'Refresh', ontap: 'refreshItems'},\n\t\t\t{kind: ContextualPopupDecorator, components: [\n\t\t\t\t{kind: ContextualPopupButton, content: 'Popup List'},\n\t\t\t\t{kind: ContextualPopup, classes: 'moon-6h moon-8v', components: [\n\t\t\t\t\t{kind:DataList, components: [\n\t\t\t\t\t\t{kind:CheckboxItem, bindings: [\n\t\t\t\t\t\t\t{from: '.model.text', to: '.content'},\n\t\t\t\t\t\t\t{from: '.model.selected', to: '.checked', oneWay: false}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]}\n\t\t\t\t]}\n\t\t\t]}\n\t\t], components: [\n\t\t\t{name: 'gridList', fit: true, spacing: 20, minWidth: 180, minHeight: 270, kind: DataGridList, scrollerOptions: { kind: Scroller, vertical: 'scroll', horizontal: 'hidden', spotlightPagingControls: true }, components: [\n\t\t\t\t{ kind: GridSampleItem }\n\t\t\t]}\n\t\t]}\n\t],\n\tbindings: [\n\t\t{from: '.collection', to: '.$.dataList.collection'},\n\t\t{from: '.collection', to: '.$.gridList.collection'},\n\t\t{from: '.$.selectionTypeGroup.active', to: '.$.gridList.selectionType',\n\t\t\ttransform: function (selected) {\n\t\t\t\treturn selected && selected.value;\n\t\t\t}\n\t\t},\n\t\t{from: '.$.selectionToggle.value', to: '.$.gridList.selection', oneWay: false}\n\t],\n\tcreate: function () {\n\t\tPanels.prototype.create.apply(this, arguments);\n\t\t// we set the collection that will fire the binding and add it to the list\n\t\tthis.set('collection', new Collection(this.generateRecords()));\n\t},\n\tgenerateRecords: function () {\n\t\tvar records = [],\n\t\t\tidx     = this.modelIndex || 0;\n\t\tfor (; records.length < 500; ++idx) {\n\t\t\tvar title = (idx % 8 === 0) ? ' with long title' : '';\n\t\t\tvar subTitle = (idx % 8 === 0) ? 'Lorem ipsum dolor sit amet' : 'Subtitle';\n\t\t\trecords.push({\n\t\t\t\tselected: false,\n\t\t\t\ttext: 'Item ' + idx + title,\n\t\t\t\tsubText: subTitle,\n\t\t\t\turl: 'http://placehold.it/300x300/' + Math.floor(Math.random()*0x1000000).toString(16) + '/ffffff&text=Image ' + idx\n\t\t\t});\n\t\t}\n\t\t// update our internal index so it will always generate unique values\n\t\tthis.modelIndex = idx;\n\t\treturn records;\n\t},\n\trefreshItems: function () {\n\t\t// we fetch our collection reference\n\t\tvar collection = this.get('collection');\n\t\t// we now remove all of the current records from the collection\n\t\tcollection.remove(collection.models);\n\t\t// and we insert all new records that will update the list\n\t\tcollection.add(this.generateRecords());\n\t}\n});","var\n\tready = require('../../../enyo/lib/ready'),\n\tSampler = require('./All'),\n\tsamples = {\n\t\tAccordionSample\t\t\t\t\t\t: require('./AccordionSample'),\n\t\tActivityPanelsSample\t\t\t\t: require('./ActivityPanelsSample'),\n\t\tActivityPanelsWithVideoSample\t\t: require('./ActivityPanelsWithVideoSample'),\n\t\tAlwaysViewingPanelsSample\t\t\t: require('./AlwaysViewingPanelsSample'),\n\t\tAlwaysViewingPanelsWithVideoSample\t: require('./AlwaysViewingPanelsWithVideoSample'),\n\t\tBodyTextSample\t\t\t\t\t\t: require('./BodyTextSample'),\n\t\tButtonSample\t\t\t\t\t\t: require('./ButtonSample'),\n\t\tCalendarSample\t\t\t\t\t\t: require('./CalendarSample'),\n\t\tCheckboxItemSample\t\t\t\t\t: require('./CheckboxItemSample'),\n\t\tClockSample\t\t\t\t\t\t\t: require('./ClockSample'),\n\t\tContextualPopupSample\t\t\t\t: require('./ContextualPopupSample'),\n\t\tDataGridListSample\t\t\t\t\t: require('./DataGridListSample'),\n\t\tDataListSample\t\t\t\t\t\t: require('./DataListSample'),\n\t\tDatePickerSample\t\t\t\t\t: require('./DatePickerSample'),\n\t\tDialogSample\t\t\t\t\t\t: require('./DialogSample'),\n\t\tDividerSample\t\t\t\t\t\t: require('./DividerSample'),\n\t\tDrawerSample\t\t\t\t\t\t: require('./DrawerSample'),\n\t\tDynamicPanelsSample\t\t\t\t\t: require('./DynamicPanelsSample'),\n\t\tExpandableDataPickerSample\t\t\t: require('./ExpandableDataPickerSample'),\n\t\tExpandableInputSample\t\t\t\t: require('./ExpandableInputSample'),\n\t\tExpandableListItemSample\t\t\t: require('./ExpandableListItemSample'),\n\t\tExpandablePickerSample\t\t\t\t: require('./ExpandablePickerSample'),\n\t\tExpandableTextSample\t\t\t\t: require('./ExpandableTextSample'),\n\t\tFontSample\t\t\t\t\t\t\t: require('./FontSample'),\n\t\tFormCheckboxSample\t\t\t\t\t: require('./FormCheckboxSample'),\n\t\tHeaderAutoCollapsingSample\t\t\t: require('./HeaderAutoCollapsingSample'),\n\t\tHeaderSample\t\t\t\t\t\t: require('./HeaderSample'),\n\t\tHighlightTextSample\t\t\t\t\t: require('./HighlightTextSample'),\n\t\tHistorySample\t\t\t\t\t\t: require('./HistorySample'),\n\t\tIconButtonSample\t\t\t\t\t: require('./IconButtonSample'),\n\t\tIconSample\t\t\t\t\t\t\t: require('./IconSample'),\n\t\tImageBadgeSample\t\t\t\t\t: require('./ImageBadgeSample'),\n\t\tImageItemSample\t\t\t\t\t\t: require('./ImageItemSample'),\n\t\tImageSample\t\t\t\t\t\t\t: require('./ImageSample'),\n\t\tInputHeaderSample\t\t\t\t\t: require('./InputHeaderSample'),\n\t\tInputSample\t\t\t\t\t\t\t: require('./InputSample'),\n\t\tIntegerPickerSample\t\t\t\t\t: require('./IntegerPickerSample'),\n\t\tItemSample\t\t\t\t\t\t\t: require('./ItemSample'),\n\t\tItemOverlaySample\t\t\t\t\t: require('./ItemOverlaySample'),\n\t\tLabeledTextItemSample\t\t\t\t: require('./LabeledTextItemSample'),\n\t\tListActionsSample\t\t\t\t\t: require('./ListActionsSample'),\n\t\tMarqueeSample\t\t\t\t\t\t: require('./MarqueeSample'),\n\t\tObjectActionHorizontalTypeSample\t: require('./ObjectActionHorizontalTypeSample'),\n\t\tObjectActionVerticalTypeSample\t\t: require('./ObjectActionVerticalTypeSample'),\n\t\tPanelsVideoPlayerSample\t\t\t\t: require('./PanelsVideoPlayerSample'),\n\t\tPanelsWithCardArrangerSample\t\t: require('./PanelsWithCardArrangerSample'),\n\t\tPanelsWithCarouselArrangerSample\t: require('./PanelsWithCarouselArrangerSample'),\n\t\tPopupSample\t\t\t\t\t\t\t: require('./PopupSample'),\n\t\tProgressButtonSample\t\t\t\t: require('./ProgressButtonSample'),\n\t\tProgressSample\t\t\t\t\t\t: require('./ProgressSample'),\n\t\tRadioItemSample\t\t\t\t\t\t: require('./RadioItemSample'),\n\t\tScroller2dSample\t\t\t\t\t: require('./Scroller2dSample'),\n\t\tScrollerHorizontalSample\t\t\t: require('./ScrollerHorizontalSample'),\n\t\tScrollerTextSample\t\t\t\t\t: require('./ScrollerTextSample'),\n\t\tScrollerVerticalSample\t\t\t\t: require('./ScrollerVerticalSample'),\n\t\tSelectableItemSample\t\t\t\t: require('./SelectableItemSample'),\n\t\tSimpleIntegerPickerSample\t\t\t: require('./SimpleIntegerPickerSample'),\n\t\tSimplePickerSample\t\t\t\t\t: require('./SimplePickerSample'),\n\t\tSliderSample\t\t\t\t\t\t: require('./SliderSample'),\n\t\tSpinnerSample\t\t\t\t\t\t: require('./SpinnerSample'),\n\t\tTableSample\t\t\t\t\t\t\t: require('./TableSample'),\n\t\tTimePickerSample\t\t\t\t\t: require('./TimePickerSample'),\n\t\tToggleButtonSample\t\t\t\t\t: require('./ToggleButtonSample'),\n\t\tToggleItemSample\t\t\t\t\t: require('./ToggleItemSample'),\n\t\tTooltipSample\t\t\t\t\t\t: require('./TooltipSample'),\n\t\tVideoPlayerInlineSample\t\t\t\t: require('./VideoPlayerInlineSample'),\n\t\tVideoPlayerSample\t\t\t\t\t: require('./VideoPlayerSample')\n\t};\n\nready(function () {\n\tnew Sampler({samples: samples}).renderInto(document.body);\n});"]}