<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Container issues</title>
	<!-- -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<!-- -->
	<script src="../../../enyo/enyo.js" type="text/javascript"></script>
	<script src="../../layout/package.js" type="text/javascript"></script>
	<script src="../../moonraker/package.js" type="text/javascript"></script>
	<script src="../../spotlight/package.js" type="text/javascript"></script>	
	<style>
		.sample-scroller {
			border:1px solid blue;
			height:400px;
		}

		.sample-container {
			border:1px solid yellow;
			padding:10px;
		}
	</style>
</head>
<body>
<script type="text/javascript">

/*
	Highlights 3 issues - make sure to refresh page before moving to a new test:

	1) Focus goes to a container:
	a. Press Enter - goes to first item in first container as expected
	b. Press Enter again - goes back to Spot button as expected
	c. Press Enter again - incorrectly focuses on first container in scroller (you can see this if you turn test mode on).

	2) Focus jumping incorrectly (I think):
	a. Press Enter - goes to first item in first container as expected
	b. Press down until you get to bottom of scroller.
	c. Press down on the last item - incorrectly jumps to top of scroller & focuses on first spottable item.
	Note: if you press down again until the bottom again then this time it stops there w/out jumping.

	3) Random focus:
	a. Press Enter - goes to first item in first container as expected
	b. Press down once - goes to item 2
	c. Press Enter - goes back to Spot button as expected
	d. Press Enter - goes to first item in first container as expected
	e. Press Enter - goes back to Spot button as expected
	f. Press Enter - goes to first item in 3rd container
*/

	enyo.kind({
		name: "ContainerIssues",
		handlers: {
			onActivate: "optionSelected"
		},
		components: [
			{kind: "enyo.Spotlight"},
			{kind:"moon.Button", content:"Spot", spotlight:true, onSpotlightSelect: "focusItem"},
			{kind:"moon.Scroller", classes:"sample-scroller", components: [
				{spotlight:'container', classes:"sample-container", components: [
					{content:"1", kind:"moon.Item", ontap:"optionSelected"}		
				]},	
				{spotlight:'container', classes:"sample-container", components: [
					{content:"2", kind:"moon.Item", ontap:"optionSelected"},
					{content:"3", kind:"moon.Item", ontap:"optionSelected"},
					{content:"4", kind:"moon.Item", ontap:"optionSelected"},					
				]},

				{spotlight:'container', classes:"sample-container", components: [
					{content:"5", kind:"moon.Item", ontap:"optionSelected"},
					{content:"6", kind:"moon.Item", ontap:"optionSelected"}
				]}	
			]}
		],
		rendered: function() {
			this.inherited(arguments);
	//		enyo.Spotlight.setTestMode(true);
		},
		focusItem: function() {
			var first = enyo.Spotlight.getFirstChild(this.$.scroller);
			enyo.Spotlight.spot(first);
			return true;
		},
		optionSelected: function(inSender, inEvent) {
			enyo.Spotlight.spot(this.$.button);
		}
	});
	new ContainerIssues().renderInto(document.body);
</script>
</body>
</html>